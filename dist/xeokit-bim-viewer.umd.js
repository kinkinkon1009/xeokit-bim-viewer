!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).bundle={})}(this,(function(e){"use strict";class t{constructor(e,t){this.items=e||[],this._lastUniqueId=(t||0)+1}addItem(){let e;if(2===arguments.length){const t=arguments[0];if(e=arguments[1],this.items[t])throw"ID clash: '"+t+"'";return this.items[t]=e,t}for(e=arguments[0]||{};;){const t=this._lastUniqueId++;if(!this.items[t])return this.items[t]=e,t}}removeItem(e){const t=this.items[e];return delete this.items[e],t}}const s=new t;class i{constructor(e){this.id=e,this.parentItem=null,this.groups=[],this.menuElement=null,this.shown=!1,this.mouseOver=0}}class r{constructor(){this.items=[]}}class o{constructor(e,t,s,i,r){this.id=e,this.getTitle=t,this.doAction=s,this.getEnabled=i,this.getShown=r,this.itemElement=null,this.subMenu=null,this.enabled=!0}}class n{constructor(e={}){this._id=s.addItem(),this._context=null,this._enabled=!1,this._itemsCfg=[],this._rootMenu=null,this._menuList=[],this._menuMap={},this._itemList=[],this._itemMap={},this._shown=!1,this._nextId=0,this._eventSubs={},!1!==e.hideOnMouseDown&&(document.addEventListener("mousedown",(e=>{e.target.classList.contains("xeokit-context-menu-item")||this.hide()})),document.addEventListener("touchstart",this._canvasTouchStartHandler=e=>{e.target.classList.contains("xeokit-context-menu-item")||this.hide()})),e.items&&(this.items=e.items),this._hideOnAction=!1!==e.hideOnAction,this.context=e.context,this.enabled=!1!==e.enabled,this.hide()}on(e,t){let s=this._eventSubs[e];s||(s=[],this._eventSubs[e]=s),s.push(t)}fire(e,t){const s=this._eventSubs[e];if(s)for(let e=0,i=s.length;e<i;e++)s[e](t)}set items(e){this._clear(),this._itemsCfg=e||[],this._parseItems(e),this._createUI()}get items(){return this._itemsCfg}set enabled(e){(e=!!e)!==this._enabled&&(this._enabled=e,this._enabled||this.hide())}get enabled(){return this._enabled}set context(e){this._context=e}get context(){return this._context}show(e,t){this._context?this._enabled&&(this._shown||(this._hideAllMenus(),this._updateItemsTitles(),this._updateItemsEnabledStatus(),this._showMenu(this._rootMenu.id,e,t),this._shown=!0,this.fire("shown",{}))):console.error("ContextMenu cannot be shown without a context - set context first")}get shown(){return this._shown}hide(){this._enabled&&this._shown&&(this._hideAllMenus(),this._shown=!1,this.fire("hidden",{}))}destroy(){this._context=null,this._clear(),null!==this._id&&(s.removeItem(this._id),this._id=null)}_clear(){for(let e=0,t=this._menuList.length;e<t;e++){const t=this._menuList[e].menuElement;t.parentElement.removeChild(t)}this._itemsCfg=[],this._rootMenu=null,this._menuList=[],this._menuMap={},this._itemList=[],this._itemMap={}}_parseItems(e){const t=e=>{const s=this._getNextId(),n=new i(s);for(let s=0,i=e.length;s<i;s++){const i=e[s],a=new r;n.groups.push(a);for(let e=0,s=i.length;e<s;e++){const s=i[e],r=s.items,l=r&&r.length>0,h=this._getNextId(),c=s.getTitle||(()=>s.title||""),u=s.doAction||s.callback||(()=>{}),A=s.getEnabled||(()=>!0),p=s.getShown||(()=>!0),d=new o(h,c,u,A,p);if(d.parentMenu=n,a.items.push(d),l){const e=t(r);d.subMenu=e,e.parentItem=d}this._itemList.push(d),this._itemMap[d.id]=d}}return this._menuList.push(n),this._menuMap[n.id]=n,n};this._rootMenu=t(e)}_getNextId(){return"ContextMenu_"+this._id+"_"+this._nextId++}_createUI(){const e=t=>{this._createMenuUI(t);const s=t.groups;for(let t=0,i=s.length;t<i;t++){const i=s[t].items;for(let t=0,s=i.length;t<s;t++){const s=i[t].subMenu;s&&e(s)}}};e(this._rootMenu)}_createMenuUI(e){const t=e.groups,s=[];if(s.push('<div class="xeokit-context-menu '+e.id+'" style="z-index:300000; position: absolute;">'),s.push("<ul>"),t)for(let e=0,i=t.length;e<i;e++){const r=e,o=i,n=t[e].items;if(n)for(let e=0,t=n.length;e<t;e++){const i=n[e],a=i.subMenu,l=i.title||"";a?s.push('<li id="'+i.id+'" class="xeokit-context-menu-item" style="'+(r===o-1||e<t-1?"border-bottom: 0":"border-bottom: 1px solid black")+'">'+l+" [MORE]</li>"):s.push('<li id="'+i.id+'" class="xeokit-context-menu-item" style="'+(r===o-1||e<t-1?"border-bottom: 0":"border-bottom: 1px solid black")+'">'+l+"</li>")}}s.push("</ul>"),s.push("</div>");const i=s.join("");document.body.insertAdjacentHTML("beforeend",i);const r=document.querySelector("."+e.id);e.menuElement=r,r.style["border-radius"]="4px",r.style.display="none",r.style["z-index"]=3e5,r.style.background="white",r.style.border="1px solid black",r.style["box-shadow"]="0 4px 5px 0 gray",r.oncontextmenu=e=>{e.preventDefault()};const o=this;let n=null;if(t)for(let e=0,s=t.length;e<s;e++){const s=t[e].items;if(s)for(let e=0,t=s.length;e<t;e++){const t=s[e],i=t.subMenu;t.itemElement=document.getElementById(t.id),t.itemElement?(t.itemElement.addEventListener("mouseenter",(e=>{e.preventDefault();const s=t.subMenu;if(!s)return void(n&&(o._hideMenu(n.id),n=null));if(n&&n.id!==s.id&&(o._hideMenu(n.id),n=null),!1===t.enabled)return;const i=t.itemElement,r=s.menuElement,a=i.getBoundingClientRect();r.getBoundingClientRect();a.right+200>window.innerWidth?o._showMenu(s.id,a.left-200,a.top-1):o._showMenu(s.id,a.right-5,a.top-1),n=s})),i||(t.itemElement.addEventListener("click",(e=>{e.preventDefault(),o._context&&!1!==t.enabled&&(t.doAction&&t.doAction(o._context),this._hideOnAction?o.hide():(o._updateItemsTitles(),o._updateItemsEnabledStatus()))})),t.itemElement.addEventListener("mouseenter",(e=>{e.preventDefault(),!1!==t.enabled&&t.doHover&&t.doHover(o._context)})))):console.error("ContextMenu item element not found: "+t.id)}}}_updateItemsTitles(){if(this._context)for(let e=0,t=this._itemList.length;e<t;e++){const t=this._itemList[e],s=t.itemElement;if(!s)continue;const i=t.getShown;if(!i||!i(this._context))continue;const r=t.getTitle(this._context);t.subMenu,s.innerText=r}}_updateItemsEnabledStatus(){if(this._context)for(let e=0,t=this._itemList.length;e<t;e++){const t=this._itemList[e],s=t.itemElement;if(!s)continue;const i=t.getEnabled;if(!i)continue;const r=t.getShown;if(!r)continue;const o=r(this._context);if(t.shown=o,!o){s.style.visibility="hidden",s.style.height="0",s.style.padding="0";continue}s.style.visibility="visible",s.style.height="auto",s.style.padding=null;const n=i(this._context);t.enabled=n,n?s.classList.remove("disabled"):s.classList.add("disabled")}}_showMenu(e,t,s){const i=this._menuMap[e];if(!i)return void console.error("Menu not found: "+e);if(i.shown)return;const r=i.menuElement;r&&(this._showMenuElement(r,t,s),i.shown=!0)}_hideMenu(e){const t=this._menuMap[e];if(!t)return void console.error("Menu not found: "+e);if(!t.shown)return;const s=t.menuElement;s&&(this._hideMenuElement(s),t.shown=!1)}_hideAllMenus(){for(let e=0,t=this._menuList.length;e<t;e++){const t=this._menuList[e];this._hideMenu(t.id)}}_showMenuElement(e,t,s){e.style.display="block";const i=e.offsetHeight,r=e.offsetWidth;s+i>window.innerHeight&&(s=window.innerHeight-i),t+r>window.innerWidth&&(t=window.innerWidth-r),e.style.left=t+"px",e.style.top=s+"px"}_hideMenuElement(e){e.style.display="none"}}class a{constructor(e,t,s){this.id=s&&s.id?s.id:e,this.viewer=t,this._subIdMap=null,this._subIdEvents=null,this._eventSubs=null,this._eventSubsNum=null,this._events=null,this._eventCallDepth=0,t.addPlugin(this)}fire(e,t,s){this._events||(this._events={}),this._eventSubs||(this._eventSubs={},this._eventSubsNum={}),!0!==s&&(this._events[e]=t||!0);const i=this._eventSubs[e];let r;if(i)for(const s in i)i.hasOwnProperty(s)&&(r=i[s],this._eventCallDepth++,this._eventCallDepth<300?r.callback.call(r.scope,t):this.error("fire: potential stack overflow from recursive event '"+e+"' - dropping this event"),this._eventCallDepth--)}on(e,s,i){this._events||(this._events={}),this._subIdMap||(this._subIdMap=new t),this._subIdEvents||(this._subIdEvents={}),this._eventSubs||(this._eventSubs={}),this._eventSubsNum||(this._eventSubsNum={});let r=this._eventSubs[e];r?this._eventSubsNum[e]++:(r={},this._eventSubs[e]=r,this._eventSubsNum[e]=1);const o=this._subIdMap.addItem();r[o]={callback:s,scope:i||this},this._subIdEvents[o]=e;const n=this._events[e];return void 0!==n&&s.call(i||this,n),o}off(e){if(null==e)return;if(!this._subIdEvents)return;const t=this._subIdEvents[e];if(t){delete this._subIdEvents[e];const s=this._eventSubs[t];s&&(delete s[e],this._eventSubsNum[t]--),this._subIdMap.removeItem(e)}}once(e,t,s){const i=this,r=this.on(e,(function(e){i.off(r),t.call(s||this,e)}),s)}hasSubs(e){return this._eventSubsNum&&this._eventSubsNum[e]>0}log(e){console.log(`[xeokit plugin ${this.id}]: ${e}`)}warn(e){console.warn(`[xeokit plugin ${this.id}]: ${e}`)}error(e){console.error(`[xeokit plugin ${this.id}]: ${e}`)}send(e,t){}destroy(){this.viewer.removePlugin(this)}}let l=!0,h=l?Float64Array:Float32Array;const c=new h(16),u=new h(16),A=new h(4),p={setDoublePrecisionEnabled(e){l=e,h=l?Float64Array:Float32Array},getDoublePrecisionEnabled:()=>l,MIN_DOUBLE:-Number.MAX_SAFE_INTEGER,MAX_DOUBLE:Number.MAX_SAFE_INTEGER,DEGTORAD:.0174532925,RADTODEG:57.295779513,unglobalizeObjectId(e,t){const s=t.indexOf("#");return s===e.length&&t.startsWith(e)?t.substring(s+1):t},globalizeObjectId:(e,t)=>e+"#"+t,vec2:e=>new h(e||2),vec3:e=>new h(e||3),vec4:e=>new h(e||4),mat3:e=>new h(e||9),mat3ToMat4:(e,t=new h(16))=>(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=0,t[4]=e[3],t[5]=e[4],t[6]=e[5],t[7]=0,t[8]=e[6],t[9]=e[7],t[10]=e[8],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t),mat4:e=>new h(e||16),mat4ToMat3(e,t){},doublesToFloats(e,t,s){const i=new h(2);for(let r=0,o=e.length;r<o;r++)p.splitDouble(e[r],i),t[r]=i[0],s[r]=i[1]},splitDouble(e,t){const s=h.from([e])[0],i=e-s;t[0]=s,t[1]=i},createUUID:(()=>{const e=[];for(let t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);return()=>{const t=4294967295*Math.random()|0,s=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return`${e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]}-${e[255&s]}${e[s>>8&255]}-${e[s>>16&15|64]}${e[s>>24&255]}-${e[63&i|128]}${e[i>>8&255]}-${e[i>>16&255]}${e[i>>24&255]}${e[255&r]}${e[r>>8&255]}${e[r>>16&255]}${e[r>>24&255]}`}})(),clamp:(e,t,s)=>Math.max(t,Math.min(s,e)),fmod(e,t){if(e<t)return console.error("math.fmod : Attempting to find modulus within negative range - would be infinite loop - ignoring"),e;for(;t<=e;)e-=t;return e},compareVec3:(e,t)=>e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2],negateVec3:(e,t)=>(t||(t=e),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t),negateVec4:(e,t)=>(t||(t=e),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t),addVec4:(e,t,s)=>(s||(s=e),s[0]=e[0]+t[0],s[1]=e[1]+t[1],s[2]=e[2]+t[2],s[3]=e[3]+t[3],s),addVec4Scalar:(e,t,s)=>(s||(s=e),s[0]=e[0]+t,s[1]=e[1]+t,s[2]=e[2]+t,s[3]=e[3]+t,s),addVec3:(e,t,s)=>(s||(s=e),s[0]=e[0]+t[0],s[1]=e[1]+t[1],s[2]=e[2]+t[2],s),addVec3Scalar:(e,t,s)=>(s||(s=e),s[0]=e[0]+t,s[1]=e[1]+t,s[2]=e[2]+t,s),subVec4:(e,t,s)=>(s||(s=e),s[0]=e[0]-t[0],s[1]=e[1]-t[1],s[2]=e[2]-t[2],s[3]=e[3]-t[3],s),subVec3:(e,t,s)=>(s||(s=e),s[0]=e[0]-t[0],s[1]=e[1]-t[1],s[2]=e[2]-t[2],s),subVec2:(e,t,s)=>(s||(s=e),s[0]=e[0]-t[0],s[1]=e[1]-t[1],s),geometricMeanVec2(...e){const t=new h(e[0]);for(let s=1;s<e.length;s++)t[0]+=e[s][0],t[1]+=e[s][1];return t[0]/=e.length,t[1]/=e.length,t},subVec4Scalar:(e,t,s)=>(s||(s=e),s[0]=e[0]-t,s[1]=e[1]-t,s[2]=e[2]-t,s[3]=e[3]-t,s),subScalarVec4:(e,t,s)=>(s||(s=e),s[0]=t-e[0],s[1]=t-e[1],s[2]=t-e[2],s[3]=t-e[3],s),mulVec4:(e,t,s)=>(s||(s=e),s[0]=e[0]*t[0],s[1]=e[1]*t[1],s[2]=e[2]*t[2],s[3]=e[3]*t[3],s),mulVec4Scalar:(e,t,s)=>(s||(s=e),s[0]=e[0]*t,s[1]=e[1]*t,s[2]=e[2]*t,s[3]=e[3]*t,s),mulVec3Scalar:(e,t,s)=>(s||(s=e),s[0]=e[0]*t,s[1]=e[1]*t,s[2]=e[2]*t,s),mulVec2Scalar:(e,t,s)=>(s||(s=e),s[0]=e[0]*t,s[1]=e[1]*t,s),divVec3:(e,t,s)=>(s||(s=e),s[0]=e[0]/t[0],s[1]=e[1]/t[1],s[2]=e[2]/t[2],s),divVec4:(e,t,s)=>(s||(s=e),s[0]=e[0]/t[0],s[1]=e[1]/t[1],s[2]=e[2]/t[2],s[3]=e[3]/t[3],s),divScalarVec3:(e,t,s)=>(s||(s=t),s[0]=e/t[0],s[1]=e/t[1],s[2]=e/t[2],s),divVec3Scalar:(e,t,s)=>(s||(s=e),s[0]=e[0]/t,s[1]=e[1]/t,s[2]=e[2]/t,s),divVec4Scalar:(e,t,s)=>(s||(s=e),s[0]=e[0]/t,s[1]=e[1]/t,s[2]=e[2]/t,s[3]=e[3]/t,s),divScalarVec4:(e,t,s)=>(s||(s=t),s[0]=e/t[0],s[1]=e/t[1],s[2]=e/t[2],s[3]=e/t[3],s),dotVec4:(e,t)=>e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3],cross3Vec4(e,t){const s=e[0],i=e[1],r=e[2],o=t[0],n=t[1],a=t[2];return[i*a-r*n,r*o-s*a,s*n-i*o,0]},cross3Vec3(e,t,s){s||(s=e);const i=e[0],r=e[1],o=e[2],n=t[0],a=t[1],l=t[2];return s[0]=r*l-o*a,s[1]=o*n-i*l,s[2]=i*a-r*n,s},sqLenVec4:e=>p.dotVec4(e,e),lenVec4:e=>Math.sqrt(p.sqLenVec4(e)),dotVec3:(e,t)=>e[0]*t[0]+e[1]*t[1]+e[2]*t[2],dotVec2:(e,t)=>e[0]*t[0]+e[1]*t[1],sqLenVec3:e=>p.dotVec3(e,e),sqLenVec2:e=>p.dotVec2(e,e),lenVec3:e=>Math.sqrt(p.sqLenVec3(e)),distVec3:(()=>{const e=new h(3);return(t,s)=>p.lenVec3(p.subVec3(t,s,e))})(),lenVec2:e=>Math.sqrt(p.sqLenVec2(e)),distVec2:(()=>{const e=new h(2);return(t,s)=>p.lenVec2(p.subVec2(t,s,e))})(),rcpVec3:(e,t)=>p.divScalarVec3(1,e,t),normalizeVec4(e,t){const s=1/p.lenVec4(e);return p.mulVec4Scalar(e,s,t)},normalizeVec3(e,t){const s=1/p.lenVec3(e);return p.mulVec3Scalar(e,s,t)},normalizeVec2(e,t){const s=1/p.lenVec2(e);return p.mulVec2Scalar(e,s,t)},angleVec3(e,t){let s=p.dotVec3(e,t)/Math.sqrt(p.sqLenVec3(e)*p.sqLenVec3(t));return s=s<-1?-1:s>1?1:s,Math.acos(s)},vec3FromMat4Scale:(()=>{const e=new h(3);return(t,s)=>(e[0]=t[0],e[1]=t[1],e[2]=t[2],s[0]=p.lenVec3(e),e[0]=t[4],e[1]=t[5],e[2]=t[6],s[1]=p.lenVec3(e),e[0]=t[8],e[1]=t[9],e[2]=t[10],s[2]=p.lenVec3(e),s)})(),vecToArray:(()=>{function e(e){return Math.round(1e5*e)/1e5}return t=>{for(let s=0,i=(t=Array.prototype.slice.call(t)).length;s<i;s++)t[s]=e(t[s]);return t}})(),xyzArrayToObject:e=>({x:e[0],y:e[1],z:e[2]}),xyzObjectToArray:(e,t)=>((t=t||p.vec3())[0]=e.x,t[1]=e.y,t[2]=e.z,t),dupMat4:e=>e.slice(0,16),mat4To3:e=>[e[0],e[1],e[2],e[4],e[5],e[6],e[8],e[9],e[10]],m4s:e=>[e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e],setMat4ToZeroes:()=>p.m4s(0),setMat4ToOnes:()=>p.m4s(1),diagonalMat4v:e=>new h([e[0],0,0,0,0,e[1],0,0,0,0,e[2],0,0,0,0,e[3]]),diagonalMat4c:(e,t,s,i)=>p.diagonalMat4v([e,t,s,i]),diagonalMat4s:e=>p.diagonalMat4c(e,e,e,e),identityMat4:(e=new h(16))=>(e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e),identityMat3:(e=new h(9))=>(e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e),isIdentityMat4:e=>1===e[0]&&0===e[1]&&0===e[2]&&0===e[3]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]&&0===e[8]&&0===e[9]&&1===e[10]&&0===e[11]&&0===e[12]&&0===e[13]&&0===e[14]&&1===e[15],negateMat4:(e,t)=>(t||(t=e),t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=-e[7],t[8]=-e[8],t[9]=-e[9],t[10]=-e[10],t[11]=-e[11],t[12]=-e[12],t[13]=-e[13],t[14]=-e[14],t[15]=-e[15],t),addMat4:(e,t,s)=>(s||(s=e),s[0]=e[0]+t[0],s[1]=e[1]+t[1],s[2]=e[2]+t[2],s[3]=e[3]+t[3],s[4]=e[4]+t[4],s[5]=e[5]+t[5],s[6]=e[6]+t[6],s[7]=e[7]+t[7],s[8]=e[8]+t[8],s[9]=e[9]+t[9],s[10]=e[10]+t[10],s[11]=e[11]+t[11],s[12]=e[12]+t[12],s[13]=e[13]+t[13],s[14]=e[14]+t[14],s[15]=e[15]+t[15],s),addMat4Scalar:(e,t,s)=>(s||(s=e),s[0]=e[0]+t,s[1]=e[1]+t,s[2]=e[2]+t,s[3]=e[3]+t,s[4]=e[4]+t,s[5]=e[5]+t,s[6]=e[6]+t,s[7]=e[7]+t,s[8]=e[8]+t,s[9]=e[9]+t,s[10]=e[10]+t,s[11]=e[11]+t,s[12]=e[12]+t,s[13]=e[13]+t,s[14]=e[14]+t,s[15]=e[15]+t,s),addScalarMat4:(e,t,s)=>p.addMat4Scalar(t,e,s),subMat4:(e,t,s)=>(s||(s=e),s[0]=e[0]-t[0],s[1]=e[1]-t[1],s[2]=e[2]-t[2],s[3]=e[3]-t[3],s[4]=e[4]-t[4],s[5]=e[5]-t[5],s[6]=e[6]-t[6],s[7]=e[7]-t[7],s[8]=e[8]-t[8],s[9]=e[9]-t[9],s[10]=e[10]-t[10],s[11]=e[11]-t[11],s[12]=e[12]-t[12],s[13]=e[13]-t[13],s[14]=e[14]-t[14],s[15]=e[15]-t[15],s),subMat4Scalar:(e,t,s)=>(s||(s=e),s[0]=e[0]-t,s[1]=e[1]-t,s[2]=e[2]-t,s[3]=e[3]-t,s[4]=e[4]-t,s[5]=e[5]-t,s[6]=e[6]-t,s[7]=e[7]-t,s[8]=e[8]-t,s[9]=e[9]-t,s[10]=e[10]-t,s[11]=e[11]-t,s[12]=e[12]-t,s[13]=e[13]-t,s[14]=e[14]-t,s[15]=e[15]-t,s),subScalarMat4:(e,t,s)=>(s||(s=t),s[0]=e-t[0],s[1]=e-t[1],s[2]=e-t[2],s[3]=e-t[3],s[4]=e-t[4],s[5]=e-t[5],s[6]=e-t[6],s[7]=e-t[7],s[8]=e-t[8],s[9]=e-t[9],s[10]=e-t[10],s[11]=e-t[11],s[12]=e-t[12],s[13]=e-t[13],s[14]=e-t[14],s[15]=e-t[15],s),mulMat4(e,t,s){s||(s=e);const i=e[0],r=e[1],o=e[2],n=e[3],a=e[4],l=e[5],h=e[6],c=e[7],u=e[8],A=e[9],p=e[10],d=e[11],f=e[12],m=e[13],g=e[14],y=e[15],E=t[0],v=t[1],_=t[2],I=t[3],T=t[4],P=t[5],D=t[6],b=t[7],R=t[8],C=t[9],x=t[10],N=t[11],O=t[12],S=t[13],w=t[14],M=t[15];return s[0]=E*i+v*a+_*u+I*f,s[1]=E*r+v*l+_*A+I*m,s[2]=E*o+v*h+_*p+I*g,s[3]=E*n+v*c+_*d+I*y,s[4]=T*i+P*a+D*u+b*f,s[5]=T*r+P*l+D*A+b*m,s[6]=T*o+P*h+D*p+b*g,s[7]=T*n+P*c+D*d+b*y,s[8]=R*i+C*a+x*u+N*f,s[9]=R*r+C*l+x*A+N*m,s[10]=R*o+C*h+x*p+N*g,s[11]=R*n+C*c+x*d+N*y,s[12]=O*i+S*a+w*u+M*f,s[13]=O*r+S*l+w*A+M*m,s[14]=O*o+S*h+w*p+M*g,s[15]=O*n+S*c+w*d+M*y,s},mulMat3(e,t,s){s||(s=new h(9));const i=e[0],r=e[3],o=e[6],n=e[1],a=e[4],l=e[7],c=e[2],u=e[5],A=e[8],p=t[0],d=t[3],f=t[6],m=t[1],g=t[4],y=t[7],E=t[2],v=t[5],_=t[8];return s[0]=i*p+r*m+o*E,s[3]=i*d+r*g+o*v,s[6]=i*f+r*y+o*_,s[1]=n*p+a*m+l*E,s[4]=n*d+a*g+l*v,s[7]=n*f+a*y+l*_,s[2]=c*p+u*m+A*E,s[5]=c*d+u*g+A*v,s[8]=c*f+u*y+A*_,s},mulMat4Scalar:(e,t,s)=>(s||(s=e),s[0]=e[0]*t,s[1]=e[1]*t,s[2]=e[2]*t,s[3]=e[3]*t,s[4]=e[4]*t,s[5]=e[5]*t,s[6]=e[6]*t,s[7]=e[7]*t,s[8]=e[8]*t,s[9]=e[9]*t,s[10]=e[10]*t,s[11]=e[11]*t,s[12]=e[12]*t,s[13]=e[13]*t,s[14]=e[14]*t,s[15]=e[15]*t,s),mulMat4v4(e,t,s=p.vec4()){const i=t[0],r=t[1],o=t[2],n=t[3];return s[0]=e[0]*i+e[4]*r+e[8]*o+e[12]*n,s[1]=e[1]*i+e[5]*r+e[9]*o+e[13]*n,s[2]=e[2]*i+e[6]*r+e[10]*o+e[14]*n,s[3]=e[3]*i+e[7]*r+e[11]*o+e[15]*n,s},transposeMat4(e,t){const s=e[4],i=e[14],r=e[8],o=e[13],n=e[12],a=e[9];if(!t||e===t){const t=e[1],l=e[2],h=e[3],c=e[6],u=e[7],A=e[11];return e[1]=s,e[2]=r,e[3]=n,e[4]=t,e[6]=a,e[7]=o,e[8]=l,e[9]=c,e[11]=i,e[12]=h,e[13]=u,e[14]=A,e}return t[0]=e[0],t[1]=s,t[2]=r,t[3]=n,t[4]=e[1],t[5]=e[5],t[6]=a,t[7]=o,t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=i,t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15],t},transposeMat3(e,t){if(t===e){const s=e[1],i=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=s,t[5]=e[7],t[6]=i,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},determinantMat4(e){const t=e[0],s=e[1],i=e[2],r=e[3],o=e[4],n=e[5],a=e[6],l=e[7],h=e[8],c=e[9],u=e[10],A=e[11],p=e[12],d=e[13],f=e[14],m=e[15];return p*c*a*r-h*d*a*r-p*n*u*r+o*d*u*r+h*n*f*r-o*c*f*r-p*c*i*l+h*d*i*l+p*s*u*l-t*d*u*l-h*s*f*l+t*c*f*l+p*n*i*A-o*d*i*A-p*s*a*A+t*d*a*A+o*s*f*A-t*n*f*A-h*n*i*m+o*c*i*m+h*s*a*m-t*c*a*m-o*s*u*m+t*n*u*m},inverseMat4(e,t){t||(t=e);const s=e[0],i=e[1],r=e[2],o=e[3],n=e[4],a=e[5],l=e[6],h=e[7],c=e[8],u=e[9],A=e[10],p=e[11],d=e[12],f=e[13],m=e[14],g=e[15],y=s*a-i*n,E=s*l-r*n,v=s*h-o*n,_=i*l-r*a,I=i*h-o*a,T=r*h-o*l,P=c*f-u*d,D=c*m-A*d,b=c*g-p*d,R=u*m-A*f,C=u*g-p*f,x=A*g-p*m,N=1/(y*x-E*C+v*R+_*b-I*D+T*P);return t[0]=(a*x-l*C+h*R)*N,t[1]=(-i*x+r*C-o*R)*N,t[2]=(f*T-m*I+g*_)*N,t[3]=(-u*T+A*I-p*_)*N,t[4]=(-n*x+l*b-h*D)*N,t[5]=(s*x-r*b+o*D)*N,t[6]=(-d*T+m*v-g*E)*N,t[7]=(c*T-A*v+p*E)*N,t[8]=(n*C-a*b+h*P)*N,t[9]=(-s*C+i*b-o*P)*N,t[10]=(d*I-f*v+g*y)*N,t[11]=(-c*I+u*v-p*y)*N,t[12]=(-n*R+a*D-l*P)*N,t[13]=(s*R-i*D+r*P)*N,t[14]=(-d*_+f*E-m*y)*N,t[15]=(c*_-u*E+A*y)*N,t},traceMat4:e=>e[0]+e[5]+e[10]+e[15],translationMat4v(e,t){const s=t||p.identityMat4();return s[12]=e[0],s[13]=e[1],s[14]=e[2],s},translationMat3v(e,t){const s=t||p.identityMat3();return s[6]=e[0],s[7]=e[1],s},translationMat4c:(()=>{const e=new h(3);return(t,s,i,r)=>(e[0]=t,e[1]=s,e[2]=i,p.translationMat4v(e,r))})(),translationMat4s:(e,t)=>p.translationMat4c(e,e,e,t),translateMat4v:(e,t)=>p.translateMat4c(e[0],e[1],e[2],t),translateMat4c(e,t,s,i){const r=i[3];i[0]+=r*e,i[1]+=r*t,i[2]+=r*s;const o=i[7];i[4]+=o*e,i[5]+=o*t,i[6]+=o*s;const n=i[11];i[8]+=n*e,i[9]+=n*t,i[10]+=n*s;const a=i[15];return i[12]+=a*e,i[13]+=a*t,i[14]+=a*s,i},setMat4Translation:(e,t,s)=>(s[0]=e[0],s[1]=e[1],s[2]=e[2],s[3]=e[3],s[4]=e[4],s[5]=e[5],s[6]=e[6],s[7]=e[7],s[8]=e[8],s[9]=e[9],s[10]=e[10],s[11]=e[11],s[12]=t[0],s[13]=t[1],s[14]=t[2],s[15]=e[15],s),rotationMat4v(e,t,s){const i=p.normalizeVec4([t[0],t[1],t[2],0],[]),r=Math.sin(e),o=Math.cos(e),n=1-o,a=i[0],l=i[1],h=i[2];let c,u,A,d,f,m;return c=a*l,u=l*h,A=h*a,d=a*r,f=l*r,m=h*r,(s=s||p.mat4())[0]=n*a*a+o,s[1]=n*c+m,s[2]=n*A-f,s[3]=0,s[4]=n*c-m,s[5]=n*l*l+o,s[6]=n*u+d,s[7]=0,s[8]=n*A+f,s[9]=n*u-d,s[10]=n*h*h+o,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},rotationMat4c:(e,t,s,i,r)=>p.rotationMat4v(e,[t,s,i],r),scalingMat4v:(e,t=p.identityMat4())=>(t[0]=e[0],t[5]=e[1],t[10]=e[2],t),scalingMat3v:(e,t=p.identityMat3())=>(t[0]=e[0],t[4]=e[1],t),scalingMat4c:(()=>{const e=new h(3);return(t,s,i,r)=>(e[0]=t,e[1]=s,e[2]=i,p.scalingMat4v(e,r))})(),scaleMat4c:(e,t,s,i)=>(i[0]*=e,i[4]*=t,i[8]*=s,i[1]*=e,i[5]*=t,i[9]*=s,i[2]*=e,i[6]*=t,i[10]*=s,i[3]*=e,i[7]*=t,i[11]*=s,i),scaleMat4v(e,t){const s=e[0],i=e[1],r=e[2];return t[0]*=s,t[4]*=i,t[8]*=r,t[1]*=s,t[5]*=i,t[9]*=r,t[2]*=s,t[6]*=i,t[10]*=r,t[3]*=s,t[7]*=i,t[11]*=r,t},scalingMat4s:e=>p.scalingMat4c(e,e,e),rotationTranslationMat4(e,t,s=p.mat4()){const i=e[0],r=e[1],o=e[2],n=e[3],a=i+i,l=r+r,h=o+o,c=i*a,u=i*l,A=i*h,d=r*l,f=r*h,m=o*h,g=n*a,y=n*l,E=n*h;return s[0]=1-(d+m),s[1]=u+E,s[2]=A-y,s[3]=0,s[4]=u-E,s[5]=1-(c+m),s[6]=f+g,s[7]=0,s[8]=A+y,s[9]=f-g,s[10]=1-(c+d),s[11]=0,s[12]=t[0],s[13]=t[1],s[14]=t[2],s[15]=1,s},mat4ToEuler(e,t,s=p.vec4()){const i=p.clamp,r=e[0],o=e[4],n=e[8],a=e[1],l=e[5],h=e[9],c=e[2],u=e[6],A=e[10];return"XYZ"===t?(s[1]=Math.asin(i(n,-1,1)),Math.abs(n)<.99999?(s[0]=Math.atan2(-h,A),s[2]=Math.atan2(-o,r)):(s[0]=Math.atan2(u,l),s[2]=0)):"YXZ"===t?(s[0]=Math.asin(-i(h,-1,1)),Math.abs(h)<.99999?(s[1]=Math.atan2(n,A),s[2]=Math.atan2(a,l)):(s[1]=Math.atan2(-c,r),s[2]=0)):"ZXY"===t?(s[0]=Math.asin(i(u,-1,1)),Math.abs(u)<.99999?(s[1]=Math.atan2(-c,A),s[2]=Math.atan2(-o,l)):(s[1]=0,s[2]=Math.atan2(a,r))):"ZYX"===t?(s[1]=Math.asin(-i(c,-1,1)),Math.abs(c)<.99999?(s[0]=Math.atan2(u,A),s[2]=Math.atan2(a,r)):(s[0]=0,s[2]=Math.atan2(-o,l))):"YZX"===t?(s[2]=Math.asin(i(a,-1,1)),Math.abs(a)<.99999?(s[0]=Math.atan2(-h,l),s[1]=Math.atan2(-c,r)):(s[0]=0,s[1]=Math.atan2(n,A))):"XZY"===t&&(s[2]=Math.asin(-i(o,-1,1)),Math.abs(o)<.99999?(s[0]=Math.atan2(u,l),s[1]=Math.atan2(n,r)):(s[0]=Math.atan2(-h,A),s[1]=0)),s},composeMat4:(e,t,s,i=p.mat4())=>(p.quaternionToRotationMat4(t,i),p.scaleMat4v(s,i),p.translateMat4v(e,i),i),decomposeMat4:(()=>{const e=new h(3),t=new h(16);return function(s,i,r,o){e[0]=s[0],e[1]=s[1],e[2]=s[2];let n=p.lenVec3(e);e[0]=s[4],e[1]=s[5],e[2]=s[6];const a=p.lenVec3(e);e[8]=s[8],e[9]=s[9],e[10]=s[10];const l=p.lenVec3(e);p.determinantMat4(s)<0&&(n=-n),i[0]=s[12],i[1]=s[13],i[2]=s[14],t.set(s);const h=1/n,c=1/a,u=1/l;return t[0]*=h,t[1]*=h,t[2]*=h,t[4]*=c,t[5]*=c,t[6]*=c,t[8]*=u,t[9]*=u,t[10]*=u,p.mat4ToQuaternion(t,r),o[0]=n,o[1]=a,o[2]=l,this}})(),getColMat4(e,t){const s=4*t;return[e[s],e[s+1],e[s+2],e[s+3]]},setRowMat4(e,t,s){e[t]=s[0],e[t+4]=s[1],e[t+8]=s[2],e[t+12]=s[3]},lookAtMat4v(e,t,s,i){i||(i=p.mat4());const r=e[0],o=e[1],n=e[2],a=s[0],l=s[1],h=s[2],c=t[0],u=t[1],A=t[2];if(r===c&&o===u&&n===A)return p.identityMat4();let d,f,m,g,y,E,v,_,I,T;return d=r-c,f=o-u,m=n-A,T=1/Math.sqrt(d*d+f*f+m*m),d*=T,f*=T,m*=T,g=l*m-h*f,y=h*d-a*m,E=a*f-l*d,T=Math.sqrt(g*g+y*y+E*E),T?(T=1/T,g*=T,y*=T,E*=T):(g=0,y=0,E=0),v=f*E-m*y,_=m*g-d*E,I=d*y-f*g,T=Math.sqrt(v*v+_*_+I*I),T?(T=1/T,v*=T,_*=T,I*=T):(v=0,_=0,I=0),i[0]=g,i[1]=v,i[2]=d,i[3]=0,i[4]=y,i[5]=_,i[6]=f,i[7]=0,i[8]=E,i[9]=I,i[10]=m,i[11]=0,i[12]=-(g*r+y*o+E*n),i[13]=-(v*r+_*o+I*n),i[14]=-(d*r+f*o+m*n),i[15]=1,i},lookAtMat4c:(e,t,s,i,r,o,n,a,l)=>p.lookAtMat4v([e,t,s],[i,r,o],[n,a,l],[]),orthoMat4c(e,t,s,i,r,o,n){n||(n=p.mat4());const a=t-e,l=i-s,h=o-r;return n[0]=2/a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2/l,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=-2/h,n[11]=0,n[12]=-(e+t)/a,n[13]=-(i+s)/l,n[14]=-(o+r)/h,n[15]=1,n},frustumMat4v(e,t,s){s||(s=p.mat4());const i=[e[0],e[1],e[2],0],r=[t[0],t[1],t[2],0];p.addVec4(r,i,c),p.subVec4(r,i,u);const o=2*i[2],n=u[0],a=u[1],l=u[2];return s[0]=o/n,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=o/a,s[6]=0,s[7]=0,s[8]=c[0]/n,s[9]=c[1]/a,s[10]=-c[2]/l,s[11]=-1,s[12]=0,s[13]=0,s[14]=-o*r[2]/l,s[15]=0,s},frustumMat4(e,t,s,i,r,o,n){n||(n=p.mat4());const a=t-e,l=i-s,h=o-r;return n[0]=2*r/a,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=2*r/l,n[6]=0,n[7]=0,n[8]=(t+e)/a,n[9]=(i+s)/l,n[10]=-(o+r)/h,n[11]=-1,n[12]=0,n[13]=0,n[14]=-o*r*2/h,n[15]=0,n},perspectiveMat4(e,t,s,i,r){const o=[],n=[];return o[2]=s,n[2]=i,n[1]=o[2]*Math.tan(e/2),o[1]=-n[1],n[0]=n[1]*t,o[0]=-n[0],p.frustumMat4v(o,n,r)},compareMat4:(e,t)=>e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15],transformPoint3(e,t,s=p.vec3()){const i=t[0],r=t[1],o=t[2];return s[0]=e[0]*i+e[4]*r+e[8]*o+e[12],s[1]=e[1]*i+e[5]*r+e[9]*o+e[13],s[2]=e[2]*i+e[6]*r+e[10]*o+e[14],s},transformPoint4:(e,t,s=p.vec4())=>(s[0]=e[0]*t[0]+e[4]*t[1]+e[8]*t[2]+e[12]*t[3],s[1]=e[1]*t[0]+e[5]*t[1]+e[9]*t[2]+e[13]*t[3],s[2]=e[2]*t[0]+e[6]*t[1]+e[10]*t[2]+e[14]*t[3],s[3]=e[3]*t[0]+e[7]*t[1]+e[11]*t[2]+e[15]*t[3],s),transformPoints3(e,t,s){const i=s||[],r=t.length;let o,n,a,l;const h=e[0],c=e[1],u=e[2],A=e[3],p=e[4],d=e[5],f=e[6],m=e[7],g=e[8],y=e[9],E=e[10],v=e[11],_=e[12],I=e[13],T=e[14],P=e[15];let D;for(let e=0;e<r;++e)l=t[e],o=l[0],n=l[1],a=l[2],D=i[e]||(i[e]=[0,0,0]),D[0]=h*o+p*n+g*a+_,D[1]=c*o+d*n+y*a+I,D[2]=u*o+f*n+E*a+T,D[3]=A*o+m*n+v*a+P;return i.length=r,i},transformPositions3(e,t,s=t){let i;const r=t.length;let o,n,a;const l=e[0],h=e[1],c=e[2];e[3];const u=e[4],A=e[5],p=e[6];e[7];const d=e[8],f=e[9],m=e[10];e[11];const g=e[12],y=e[13],E=e[14];for(e[15],i=0;i<r;i+=3)o=t[i+0],n=t[i+1],a=t[i+2],s[i+0]=l*o+u*n+d*a+g,s[i+1]=h*o+A*n+f*a+y,s[i+2]=c*o+p*n+m*a+E;return s},transformPositions4(e,t,s=t){let i;const r=t.length;let o,n,a;const l=e[0],h=e[1],c=e[2],u=e[3],A=e[4],p=e[5],d=e[6],f=e[7],m=e[8],g=e[9],y=e[10],E=e[11],v=e[12],_=e[13],I=e[14],T=e[15];for(i=0;i<r;i+=4)o=t[i+0],n=t[i+1],a=t[i+2],s[i+0]=l*o+A*n+m*a+v,s[i+1]=h*o+p*n+g*a+_,s[i+2]=c*o+d*n+y*a+I,s[i+3]=u*o+f*n+E*a+T;return s},transformVec3(e,t,s){const i=t[0],r=t[1],o=t[2];return(s=s||this.vec3())[0]=e[0]*i+e[4]*r+e[8]*o,s[1]=e[1]*i+e[5]*r+e[9]*o,s[2]=e[2]*i+e[6]*r+e[10]*o,s},transformVec4(e,t,s){const i=t[0],r=t[1],o=t[2],n=t[3];return(s=s||p.vec4())[0]=e[0]*i+e[4]*r+e[8]*o+e[12]*n,s[1]=e[1]*i+e[5]*r+e[9]*o+e[13]*n,s[2]=e[2]*i+e[6]*r+e[10]*o+e[14]*n,s[3]=e[3]*i+e[7]*r+e[11]*o+e[15]*n,s},rotateVec2(e,t,s,i=e){const r=Math.cos(s),o=Math.sin(s),n=e[0]-t[0],a=e[1]-t[1];return i[0]=n*r-a*o+t[0],i[1]=n*o+a*r+t[1],e},rotateVec3X(e,t,s,i){const r=[],o=[];return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],o[0]=r[0],o[1]=r[1]*Math.cos(s)-r[2]*Math.sin(s),o[2]=r[1]*Math.sin(s)+r[2]*Math.cos(s),i[0]=o[0]+t[0],i[1]=o[1]+t[1],i[2]=o[2]+t[2],i},rotateVec3Y(e,t,s,i){const r=[],o=[];return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],o[0]=r[2]*Math.sin(s)+r[0]*Math.cos(s),o[1]=r[1],o[2]=r[2]*Math.cos(s)-r[0]*Math.sin(s),i[0]=o[0]+t[0],i[1]=o[1]+t[1],i[2]=o[2]+t[2],i},rotateVec3Z(e,t,s,i){const r=[],o=[];return r[0]=e[0]-t[0],r[1]=e[1]-t[1],r[2]=e[2]-t[2],o[0]=r[0]*Math.cos(s)-r[1]*Math.sin(s),o[1]=r[0]*Math.sin(s)+r[1]*Math.cos(s),o[2]=r[2],i[0]=o[0]+t[0],i[1]=o[1]+t[1],i[2]=o[2]+t[2],i},projectVec4(e,t){const s=1/e[3];return(t=t||p.vec2())[0]=e[0]*s,t[1]=e[1]*s,t},unprojectVec3:(()=>{const e=new h(16),t=new h(16),s=new h(16);return function(i,r,o,n){return this.transformVec3(this.mulMat4(this.inverseMat4(r,e),this.inverseMat4(o,t),s),i,n)}})(),lerpVec3(e,t,s,i,r,o){const n=o||p.vec3(),a=(e-t)/(s-t);return n[0]=i[0]+a*(r[0]-i[0]),n[1]=i[1]+a*(r[1]-i[1]),n[2]=i[2]+a*(r[2]-i[2]),n},lerpMat4(e,t,s,i,r,o){const n=o||p.mat4(),a=(e-t)/(s-t);return n[0]=i[0]+a*(r[0]-i[0]),n[1]=i[1]+a*(r[1]-i[1]),n[2]=i[2]+a*(r[2]-i[2]),n[3]=i[3]+a*(r[3]-i[3]),n[4]=i[4]+a*(r[4]-i[4]),n[5]=i[5]+a*(r[5]-i[5]),n[6]=i[6]+a*(r[6]-i[6]),n[7]=i[7]+a*(r[7]-i[7]),n[8]=i[8]+a*(r[8]-i[8]),n[9]=i[9]+a*(r[9]-i[9]),n[10]=i[10]+a*(r[10]-i[10]),n[11]=i[11]+a*(r[11]-i[11]),n[12]=i[12]+a*(r[12]-i[12]),n[13]=i[13]+a*(r[13]-i[13]),n[14]=i[14]+a*(r[14]-i[14]),n[15]=i[15]+a*(r[15]-i[15]),n},flatten(e){const t=[];let s,i,r,o,n;for(s=0,i=e.length;s<i;s++)for(n=e[s],r=0,o=n.length;r<o;r++)t.push(n[r]);return t},identityQuaternion:(e=p.vec4())=>(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e),eulerToQuaternion(e,t,s=p.vec4()){const i=e[0]*p.DEGTORAD/2,r=e[1]*p.DEGTORAD/2,o=e[2]*p.DEGTORAD/2,n=Math.cos(i),a=Math.cos(r),l=Math.cos(o),h=Math.sin(i),c=Math.sin(r),u=Math.sin(o);return"XYZ"===t?(s[0]=h*a*l+n*c*u,s[1]=n*c*l-h*a*u,s[2]=n*a*u+h*c*l,s[3]=n*a*l-h*c*u):"YXZ"===t?(s[0]=h*a*l+n*c*u,s[1]=n*c*l-h*a*u,s[2]=n*a*u-h*c*l,s[3]=n*a*l+h*c*u):"ZXY"===t?(s[0]=h*a*l-n*c*u,s[1]=n*c*l+h*a*u,s[2]=n*a*u+h*c*l,s[3]=n*a*l-h*c*u):"ZYX"===t?(s[0]=h*a*l-n*c*u,s[1]=n*c*l+h*a*u,s[2]=n*a*u-h*c*l,s[3]=n*a*l+h*c*u):"YZX"===t?(s[0]=h*a*l+n*c*u,s[1]=n*c*l+h*a*u,s[2]=n*a*u-h*c*l,s[3]=n*a*l-h*c*u):"XZY"===t&&(s[0]=h*a*l-n*c*u,s[1]=n*c*l-h*a*u,s[2]=n*a*u+h*c*l,s[3]=n*a*l+h*c*u),s},mat4ToQuaternion(e,t=p.vec4()){const s=e[0],i=e[4],r=e[8],o=e[1],n=e[5],a=e[9],l=e[2],h=e[6],c=e[10];let u;const A=s+n+c;return A>0?(u=.5/Math.sqrt(A+1),t[3]=.25/u,t[0]=(h-a)*u,t[1]=(r-l)*u,t[2]=(o-i)*u):s>n&&s>c?(u=2*Math.sqrt(1+s-n-c),t[3]=(h-a)/u,t[0]=.25*u,t[1]=(i+o)/u,t[2]=(r+l)/u):n>c?(u=2*Math.sqrt(1+n-s-c),t[3]=(r-l)/u,t[0]=(i+o)/u,t[1]=.25*u,t[2]=(a+h)/u):(u=2*Math.sqrt(1+c-s-n),t[3]=(o-i)/u,t[0]=(r+l)/u,t[1]=(a+h)/u,t[2]=.25*u),t},vec3PairToQuaternion(e,t,s=p.vec4()){const i=Math.sqrt(p.dotVec3(e,e)*p.dotVec3(t,t));let r=i+p.dotVec3(e,t);return r<1e-8*i?(r=0,Math.abs(e[0])>Math.abs(e[2])?(s[0]=-e[1],s[1]=e[0],s[2]=0):(s[0]=0,s[1]=-e[2],s[2]=e[1])):p.cross3Vec3(e,t,s),s[3]=r,p.normalizeQuaternion(s)},angleAxisToQuaternion(e,t=p.vec4()){const s=e[3]/2,i=Math.sin(s);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(s),t},quaternionToEuler:(()=>{const e=new h(16);return(t,s,i)=>(i=i||p.vec3(),p.quaternionToRotationMat4(t,e),p.mat4ToEuler(e,s,i),i)})(),mulQuaternions(e,t,s=p.vec4()){const i=e[0],r=e[1],o=e[2],n=e[3],a=t[0],l=t[1],h=t[2],c=t[3];return s[0]=n*a+i*c+r*h-o*l,s[1]=n*l+r*c+o*a-i*h,s[2]=n*h+o*c+i*l-r*a,s[3]=n*c-i*a-r*l-o*h,s},vec3ApplyQuaternion(e,t,s=p.vec3()){const i=t[0],r=t[1],o=t[2],n=e[0],a=e[1],l=e[2],h=e[3],c=h*i+a*o-l*r,u=h*r+l*i-n*o,A=h*o+n*r-a*i,d=-n*i-a*r-l*o;return s[0]=c*h+d*-n+u*-l-A*-a,s[1]=u*h+d*-a+A*-n-c*-l,s[2]=A*h+d*-l+c*-a-u*-n,s},quaternionToMat4(e,t){t=p.identityMat4(t);const s=e[0],i=e[1],r=e[2],o=e[3],n=2*s,a=2*i,l=2*r,h=n*o,c=a*o,u=l*o,A=n*s,d=a*s,f=l*s,m=a*i,g=l*i,y=l*r;return t[0]=1-(m+y),t[1]=d+u,t[2]=f-c,t[4]=d-u,t[5]=1-(A+y),t[6]=g+h,t[8]=f+c,t[9]=g-h,t[10]=1-(A+m),t},quaternionToRotationMat4(e,t){const s=e[0],i=e[1],r=e[2],o=e[3],n=s+s,a=i+i,l=r+r,h=s*n,c=s*a,u=s*l,A=i*a,p=i*l,d=r*l,f=o*n,m=o*a,g=o*l;return t[0]=1-(A+d),t[4]=c-g,t[8]=u+m,t[1]=c+g,t[5]=1-(h+d),t[9]=p-f,t[2]=u-m,t[6]=p+f,t[10]=1-(h+A),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},normalizeQuaternion(e,t=e){const s=p.lenVec4([e[0],e[1],e[2],e[3]]);return t[0]=e[0]/s,t[1]=e[1]/s,t[2]=e[2]/s,t[3]=e[3]/s,t},conjugateQuaternion:(e,t=e)=>(t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t),inverseQuaternion:(e,t)=>p.normalizeQuaternion(p.conjugateQuaternion(e,t)),quaternionToAngleAxis(e,t=p.vec4()){const s=(e=p.normalizeQuaternion(e,A))[3],i=2*Math.acos(s),r=Math.sqrt(1-s*s);return r<.001?(t[0]=e[0],t[1]=e[1],t[2]=e[2]):(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r),t[3]=i,t},AABB3:e=>new h(e||6),AABB2:e=>new h(e||4),OBB3:e=>new h(e||32),OBB2:e=>new h(e||16),Sphere3:(e,t,s,i)=>new h([e,t,s,i]),transformOBB3(e,t,s=t){let i;const r=t.length;let o,n,a;const l=e[0],h=e[1],c=e[2],u=e[3],A=e[4],p=e[5],d=e[6],f=e[7],m=e[8],g=e[9],y=e[10],E=e[11],v=e[12],_=e[13],I=e[14],T=e[15];for(i=0;i<r;i+=4)o=t[i+0],n=t[i+1],a=t[i+2],s[i+0]=l*o+A*n+m*a+v,s[i+1]=h*o+p*n+g*a+_,s[i+2]=c*o+d*n+y*a+I,s[i+3]=u*o+f*n+E*a+T;return s},containsAABB3:function(e,t){return e[0]<=t[0]&&t[3]<=e[3]&&e[1]<=t[1]&&t[4]<=e[4]&&e[2]<=t[2]&&t[5]<=e[5]},getAABB3Diag:(()=>{const e=new h(3),t=new h(3),s=new h(3);return i=>(e[0]=i[0],e[1]=i[1],e[2]=i[2],t[0]=i[3],t[1]=i[4],t[2]=i[5],p.subVec3(t,e,s),Math.abs(p.lenVec3(s)))})(),getAABB3DiagPoint:(()=>{const e=new h(3),t=new h(3),s=new h(3);return(i,r)=>{e[0]=i[0],e[1]=i[1],e[2]=i[2],t[0]=i[3],t[1]=i[4],t[2]=i[5];const o=p.subVec3(t,e,s),n=r[0]-i[0],a=i[3]-r[0],l=r[1]-i[1],h=i[4]-r[1],c=r[2]-i[2],u=i[5]-r[2];return o[0]+=n>a?n:a,o[1]+=l>h?l:h,o[2]+=c>u?c:u,Math.abs(p.lenVec3(o))}})(),getAABB3Area:e=>(e[3]-e[0])*(e[4]-e[1])*(e[5]-e[2]),getAABB3Center(e,t){const s=t||p.vec3();return s[0]=(e[0]+e[3])/2,s[1]=(e[1]+e[4])/2,s[2]=(e[2]+e[5])/2,s},getAABB2Center(e,t){const s=t||p.vec2();return s[0]=(e[2]+e[0])/2,s[1]=(e[3]+e[1])/2,s},collapseAABB3:(e=p.AABB3())=>(e[0]=p.MAX_DOUBLE,e[1]=p.MAX_DOUBLE,e[2]=p.MAX_DOUBLE,e[3]=p.MIN_DOUBLE,e[4]=p.MIN_DOUBLE,e[5]=p.MIN_DOUBLE,e),AABB3ToOBB3:(e,t=p.OBB3())=>(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=1,t[4]=e[3],t[5]=e[1],t[6]=e[2],t[7]=1,t[8]=e[3],t[9]=e[4],t[10]=e[2],t[11]=1,t[12]=e[0],t[13]=e[4],t[14]=e[2],t[15]=1,t[16]=e[0],t[17]=e[1],t[18]=e[5],t[19]=1,t[20]=e[3],t[21]=e[1],t[22]=e[5],t[23]=1,t[24]=e[3],t[25]=e[4],t[26]=e[5],t[27]=1,t[28]=e[0],t[29]=e[4],t[30]=e[5],t[31]=1,t),positions3ToAABB3:(()=>{const e=new h(3);return(t,s,i)=>{s=s||p.AABB3();let r,o,n,a=p.MAX_DOUBLE,l=p.MAX_DOUBLE,h=p.MAX_DOUBLE,c=p.MIN_DOUBLE,u=p.MIN_DOUBLE,A=p.MIN_DOUBLE;for(let s=0,d=t.length;s<d;s+=3)i?(e[0]=t[s+0],e[1]=t[s+1],e[2]=t[s+2],p.decompressPosition(e,i,e),r=e[0],o=e[1],n=e[2]):(r=t[s+0],o=t[s+1],n=t[s+2]),r<a&&(a=r),o<l&&(l=o),n<h&&(h=n),r>c&&(c=r),o>u&&(u=o),n>A&&(A=n);return s[0]=a,s[1]=l,s[2]=h,s[3]=c,s[4]=u,s[5]=A,s}})(),OBB3ToAABB3(e,t=p.AABB3()){let s,i,r,o=p.MAX_DOUBLE,n=p.MAX_DOUBLE,a=p.MAX_DOUBLE,l=p.MIN_DOUBLE,h=p.MIN_DOUBLE,c=p.MIN_DOUBLE;for(let t=0,u=e.length;t<u;t+=4)s=e[t+0],i=e[t+1],r=e[t+2],s<o&&(o=s),i<n&&(n=i),r<a&&(a=r),s>l&&(l=s),i>h&&(h=i),r>c&&(c=r);return t[0]=o,t[1]=n,t[2]=a,t[3]=l,t[4]=h,t[5]=c,t},points3ToAABB3(e,t=p.AABB3()){let s,i,r,o=p.MAX_DOUBLE,n=p.MAX_DOUBLE,a=p.MAX_DOUBLE,l=p.MIN_DOUBLE,h=p.MIN_DOUBLE,c=p.MIN_DOUBLE;for(let t=0,u=e.length;t<u;t++)s=e[t][0],i=e[t][1],r=e[t][2],s<o&&(o=s),i<n&&(n=i),r<a&&(a=r),s>l&&(l=s),i>h&&(h=i),r>c&&(c=r);return t[0]=o,t[1]=n,t[2]=a,t[3]=l,t[4]=h,t[5]=c,t},points3ToSphere3:(()=>{const e=new h(3);return(t,s)=>{s=s||p.vec4();let i,r=0,o=0,n=0;const a=t.length;for(i=0;i<a;i++)r+=t[i][0],o+=t[i][1],n+=t[i][2];s[0]=r/a,s[1]=o/a,s[2]=n/a;let l,h=0;for(i=0;i<a;i++)l=Math.abs(p.lenVec3(p.subVec3(t[i],s,e))),l>h&&(h=l);return s[3]=h,s}})(),positions3ToSphere3:(()=>{const e=new h(3),t=new h(3);return(s,i)=>{i=i||p.vec4();let r,o=0,n=0,a=0;const l=s.length;let h=0;for(r=0;r<l;r+=3)o+=s[r],n+=s[r+1],a+=s[r+2];const c=l/3;let u;for(i[0]=o/c,i[1]=n/c,i[2]=a/c,r=0;r<l;r+=3)e[0]=s[r],e[1]=s[r+1],e[2]=s[r+2],u=Math.abs(p.lenVec3(p.subVec3(e,i,t))),u>h&&(h=u);return i[3]=h,i}})(),OBB3ToSphere3:(()=>{const e=new h(3),t=new h(3);return(s,i)=>{i=i||p.vec4();let r,o=0,n=0,a=0;const l=s.length,h=l/4;for(r=0;r<l;r+=4)o+=s[r+0],n+=s[r+1],a+=s[r+2];i[0]=o/h,i[1]=n/h,i[2]=a/h;let c,u=0;for(r=0;r<l;r+=4)e[0]=s[r+0],e[1]=s[r+1],e[2]=s[r+2],c=Math.abs(p.lenVec3(p.subVec3(e,i,t))),c>u&&(u=c);return i[3]=u,i}})(),getSphere3Center:(e,t=p.vec3())=>(t[0]=e[0],t[1]=e[1],t[2]=e[2],t),getPositionsCenter(e,t=p.vec3()){let s=0,i=0,r=0;for(var o=0,n=e.length;o<n;o+=3)s+=e[o+0],i+=e[o+1],r+=e[o+2];const a=e.length/3;return t[0]=s/a,t[1]=i/a,t[2]=r/a,t},expandAABB3:(e,t)=>(e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]>t[2]&&(e[2]=t[2]),e[3]<t[3]&&(e[3]=t[3]),e[4]<t[4]&&(e[4]=t[4]),e[5]<t[5]&&(e[5]=t[5]),e),expandAABB3Point3:(e,t)=>(e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]>t[2]&&(e[2]=t[2]),e[3]<t[0]&&(e[3]=t[0]),e[4]<t[1]&&(e[4]=t[1]),e[5]<t[2]&&(e[5]=t[2]),e),expandAABB3Points3(e,t){for(var s,i,r,o=0,n=t.length;o<n;o+=3)s=t[o],i=t[o+1],r=t[o+2],e[0]>s&&(e[0]=s),e[1]>i&&(e[1]=i),e[2]>r&&(e[2]=r),e[3]<s&&(e[3]=s),e[4]<i&&(e[4]=i),e[5]<r&&(e[5]=r);return e},collapseAABB2:(e=p.AABB2())=>(e[0]=p.MAX_DOUBLE,e[1]=p.MAX_DOUBLE,e[2]=p.MIN_DOUBLE,e[3]=p.MIN_DOUBLE,e),point3AABB3Intersect:(e,t)=>e[0]>t[0]||e[3]<t[0]||e[1]>t[1]||e[4]<t[1]||e[2]>t[2]||e[5]<t[2],planeAABB3Intersect(e,t,s){let i,r;e[0]>0?(i=e[0]*s[0],r=e[0]*s[3]):(i=e[0]*s[3],r=e[0]*s[0]),e[1]>0?(i+=e[1]*s[1],r+=e[1]*s[4]):(i+=e[1]*s[4],r+=e[1]*s[1]),e[2]>0?(i+=e[2]*s[2],r+=e[2]*s[5]):(i+=e[2]*s[5],r+=e[2]*s[2]);if(i<=-t&&r<=-t)return-1;return i>=-t&&r>=-t?1:0},OBB3ToAABB2(e,t=p.AABB2()){let s,i,r,o,n=p.MAX_DOUBLE,a=p.MAX_DOUBLE,l=p.MIN_DOUBLE,h=p.MIN_DOUBLE;for(let t=0,c=e.length;t<c;t+=4)s=e[t+0],i=e[t+1],r=e[t+3]||1,o=1/r,s*=o,i*=o,s<n&&(n=s),i<a&&(a=i),s>l&&(l=s),i>h&&(h=i);return t[0]=n,t[1]=a,t[2]=l,t[3]=h,t},expandAABB2:(e,t)=>(e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[2]&&(e[2]=t[2]),e[3]<t[3]&&(e[3]=t[3]),e),expandAABB2Point2:(e,t)=>(e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1]),e),AABB2ToCanvas(e,t,s,i=e){const r=.5*(e[0]+1),o=.5*(e[1]+1),n=.5*(e[2]+1),a=.5*(e[3]+1);return i[0]=Math.floor(r*t),i[1]=s-Math.floor(a*s),i[2]=Math.floor(n*t),i[3]=s-Math.floor(o*s),i},tangentQuadraticBezier:(e,t,s,i)=>2*(1-e)*(s-t)+2*e*(i-s),tangentQuadraticBezier3:(e,t,s,i,r)=>-3*t*(1-e)*(1-e)+3*s*(1-e)*(1-e)-6*e*s*(1-e)+6*e*i*(1-e)-3*e*e*i+3*e*e*r,tangentSpline:e=>6*e*e-6*e+(3*e*e-4*e+1)+(-6*e*e+6*e)+(3*e*e-2*e),catmullRomInterpolate(e,t,s,i,r){const o=.5*(s-e),n=.5*(i-t),a=r*r;return(2*t-2*s+o+n)*(r*a)+(-3*t+3*s-2*o-n)*a+o*r+t},b2p0(e,t){const s=1-e;return s*s*t},b2p1:(e,t)=>2*(1-e)*e*t,b2p2:(e,t)=>e*e*t,b2(e,t,s,i){return this.b2p0(e,t)+this.b2p1(e,s)+this.b2p2(e,i)},b3p0(e,t){const s=1-e;return s*s*s*t},b3p1(e,t){const s=1-e;return 3*s*s*e*t},b3p2:(e,t)=>3*(1-e)*e*e*t,b3p3:(e,t)=>e*e*e*t,b3(e,t,s,i,r){return this.b3p0(e,t)+this.b3p1(e,s)+this.b3p2(e,i)+this.b3p3(e,r)},triangleNormal(e,t,s,i=p.vec3()){const r=t[0]-e[0],o=t[1]-e[1],n=t[2]-e[2],a=s[0]-e[0],l=s[1]-e[1],h=s[2]-e[2],c=o*h-n*l,u=n*a-r*h,A=r*l-o*a,d=Math.sqrt(c*c+u*u+A*A);return 0===d?(i[0]=0,i[1]=0,i[2]=0):(i[0]=c/d,i[1]=u/d,i[2]=A/d),i},rayTriangleIntersect:(()=>{const e=new h(3),t=new h(3),s=new h(3),i=new h(3),r=new h(3);return(o,n,a,l,h,c)=>{c=c||p.vec3();const u=p.subVec3(l,a,e),A=p.subVec3(h,a,t),d=p.cross3Vec3(n,A,s),f=p.dotVec3(u,d);if(f<1e-6)return null;const m=p.subVec3(o,a,i),g=p.dotVec3(m,d);if(g<0||g>f)return null;const y=p.cross3Vec3(m,u,r),E=p.dotVec3(n,y);if(E<0||g+E>f)return null;const v=p.dotVec3(A,y)/f;return c[0]=o[0]+v*n[0],c[1]=o[1]+v*n[1],c[2]=o[2]+v*n[2],c}})(),rayPlaneIntersect:(()=>{const e=new h(3),t=new h(3),s=new h(3),i=new h(3);return(r,o,n,a,l,h)=>{h=h||p.vec3(),o=p.normalizeVec3(o,e);const c=p.subVec3(a,n,t),u=p.subVec3(l,n,s),A=p.cross3Vec3(c,u,i);p.normalizeVec3(A,A);const d=-p.dotVec3(n,A),f=-(p.dotVec3(r,A)+d)/p.dotVec3(o,A);return h[0]=r[0]+f*o[0],h[1]=r[1]+f*o[1],h[2]=r[2]+f*o[2],h}})(),cartesianToBarycentric:(()=>{const e=new h(3),t=new h(3),s=new h(3);return(i,r,o,n,a)=>{const l=p.subVec3(n,r,e),h=p.subVec3(o,r,t),c=p.subVec3(i,r,s),u=p.dotVec3(l,l),A=p.dotVec3(l,h),d=p.dotVec3(l,c),f=p.dotVec3(h,h),m=p.dotVec3(h,c),g=u*f-A*A;if(0===g)return null;const y=1/g,E=(f*d-A*m)*y,v=(u*m-A*d)*y;return a[0]=1-E-v,a[1]=v,a[2]=E,a}})(),barycentricInsideTriangle(e){const t=e[1],s=e[2];return s>=0&&t>=0&&s+t<1},barycentricToCartesian(e,t,s,i,r=p.vec3()){const o=e[0],n=e[1],a=e[2];return r[0]=t[0]*o+s[0]*n+i[0]*a,r[1]=t[1]*o+s[1]*n+i[1]*a,r[2]=t[2]*o+s[2]*n+i[2]*a,r},mergeVertices(e,t,s,i){const r={},o=[],n=[],a=t?[]:null,l=s?[]:null,h=[];let c,u,A,p;const d=1e4;let f,m,g=0;for(f=0,m=e.length;f<m;f+=3)c=e[f],u=e[f+1],A=e[f+2],p=`${Math.round(c*d)}_${Math.round(u*d)}_${Math.round(A*d)}`,void 0===r[p]&&(r[p]=n.length/3,n.push(c),n.push(u),n.push(A),t&&(a.push(t[f]),a.push(t[f+1]),a.push(t[f+2])),s&&(l.push(s[g]),l.push(s[g+1]))),o[f/3]=r[p],g+=2;for(f=0,m=i.length;f<m;f++)h[f]=o[i[f]];const y={positions:n,indices:h};return a&&(y.normals=a),l&&(y.uv=l),y},buildNormals:(()=>{const e=new h(3),t=new h(3),s=new h(3),i=new h(3),r=new h(3),o=new h(3);return(n,a,l)=>{let h,c;const u=new Array(n.length/3);let A,d,f,m,g,y,E;for(h=0,c=a.length;h<c;h+=3){A=a[h],d=a[h+1],f=a[h+2],e[0]=n[3*A],e[1]=n[3*A+1],e[2]=n[3*A+2],t[0]=n[3*d],t[1]=n[3*d+1],t[2]=n[3*d+2],s[0]=n[3*f],s[1]=n[3*f+1],s[2]=n[3*f+2],p.subVec3(t,e,i),p.subVec3(s,e,r);const l=p.vec3();p.normalizeVec3(p.cross3Vec3(i,r,o),l),u[A]||(u[A]=[]),u[d]||(u[d]=[]),u[f]||(u[f]=[]),u[A].push(l),u[d].push(l),u[f].push(l)}for(l=l&&l.length===n.length?l:new Float32Array(n.length),h=0,c=u.length;h<c;h++){m=u[h].length,g=0,y=0,E=0;for(let e=0;e<m;e++)g+=u[h][e][0],y+=u[h][e][1],E+=u[h][e][2];l[3*h]=g/m,l[3*h+1]=y/m,l[3*h+2]=E/m}return l}})(),buildTangents:(()=>{const e=new h(3),t=new h(3),s=new h(3),i=new h(3),r=new h(3),o=new h(3),n=new h(3);return(a,l,h)=>{const c=new Float32Array(a.length);for(let u=0;u<l.length;u+=3){let A=l[u];const d=a.subarray(3*A,3*A+3),f=h.subarray(2*A,2*A+2);A=l[u+1];const m=a.subarray(3*A,3*A+3),g=h.subarray(2*A,2*A+2);A=l[u+2];const y=a.subarray(3*A,3*A+3),E=h.subarray(2*A,2*A+2),v=p.subVec3(m,d,e),_=p.subVec3(y,d,t),I=p.subVec2(g,f,s),T=p.subVec2(E,f,i),P=1/(I[0]*T[1]-I[1]*T[0]),D=p.mulVec3Scalar(p.subVec3(p.mulVec3Scalar(v,T[1],r),p.mulVec3Scalar(_,I[1],o),n),P,o);let b;for(let e=0;e<3;e++)b=3*l[u+e],c[b]+=D[0],c[b+1]+=D[1],c[b+2]+=D[2]}return c}})(),buildPickTriangles(e,t,s){const i=t.length,r=s?new Uint16Array(9*i):new Float32Array(9*i),o=new Uint8Array(12*i);let n,a,l,h,c,u,A=0,p=0,d=0;for(let s=0;s<i;s+=3)u=A>>24&255,c=A>>16&255,h=A>>8&255,l=255&A,a=t[s],n=3*a,r[p++]=e[n],r[p++]=e[n+1],r[p++]=e[n+2],o[d++]=l,o[d++]=h,o[d++]=c,o[d++]=u,a=t[s+1],n=3*a,r[p++]=e[n],r[p++]=e[n+1],r[p++]=e[n+2],o[d++]=l,o[d++]=h,o[d++]=c,o[d++]=u,a=t[s+2],n=3*a,r[p++]=e[n],r[p++]=e[n+1],r[p++]=e[n+2],o[d++]=l,o[d++]=h,o[d++]=c,o[d++]=u,A++;return{positions:r,colors:o}},faceToVertexNormals(e,t,s={}){const i=s.smoothNormalsAngleThreshold||20,r={},o=[],n={};let a,l,h,c,u;const A=1e4;let d,f,m,g,y,E;for(f=0,g=e.length;f<g;f+=3){d=f/3,l=e[f],h=e[f+1],c=e[f+2],u=`${Math.round(l*A)}_${Math.round(h*A)}_${Math.round(c*A)}`,void 0===r[u]?r[u]=[d]:r[u].push(d);const s=p.normalizeVec3([t[f],t[f+1],t[f+2]]);o[d]=s,a=p.vec4([s[0],s[1],s[2],1]),n[d]=a}for(u in r)if(r.hasOwnProperty(u)){const e=r[u],t=e.length;for(f=0;f<t;f++){const s=e[f];for(a=n[s],m=0;m<t;m++){if(f===m)continue;const t=e[m];y=o[s],E=o[t];Math.abs(p.angleVec3(y,E)/p.DEGTORAD)<i&&(a[0]+=E[0],a[1]+=E[1],a[2]+=E[2],a[3]+=1)}}}for(f=0,g=t.length;f<g;f+=3)a=n[f/3],t[f+0]=a[0]/a[3],t[f+1]=a[1]/a[3],t[f+2]=a[2]/a[3]},transformRay:(()=>{const e=new h(4),t=new h(4);return(s,i,r,o,n)=>{e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=1,p.transformVec4(s,e,t),o[0]=t[0],o[1]=t[1],o[2]=t[2],e[0]=r[0],e[1]=r[1],e[2]=r[2],p.transformVec3(s,e,t),p.normalizeVec3(t),n[0]=t[0],n[1]=t[1],n[2]=t[2]}})(),canvasPosToWorldRay:(()=>{const e=new h(16),t=new h(16),s=new h(4),i=new h(4),r=new h(4),o=new h(4);return(n,a,l,h,c,u)=>{const A=p.mulMat4(l,a,e),d=p.inverseMat4(A,t),f=n.width,m=n.height,g=(h[0]-f/2)/(f/2),y=-(h[1]-m/2)/(m/2);s[0]=g,s[1]=y,s[2]=-1,s[3]=1,p.transformVec4(d,s,i),p.mulVec4Scalar(i,1/i[3]),r[0]=g,r[1]=y,r[2]=1,r[3]=1,p.transformVec4(d,r,o),p.mulVec4Scalar(o,1/o[3]),c[0]=o[0],c[1]=o[1],c[2]=o[2],p.subVec3(o,i,u),p.normalizeVec3(u)}})(),canvasPosToLocalRay:(()=>{const e=new h(3),t=new h(3);return(s,i,r,o,n,a,l)=>{p.canvasPosToWorldRay(s,i,r,n,e,t),p.worldRayToLocalRay(o,e,t,a,l)}})(),worldRayToLocalRay:(()=>{const e=new h(16),t=new h(4),s=new h(4);return(i,r,o,n,a)=>{const l=p.inverseMat4(i,e);t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=1,p.transformVec4(l,t,s),n[0]=s[0],n[1]=s[1],n[2]=s[2],p.transformVec3(l,o,a)}})(),buildKDTree:(()=>{const e=new Float32Array;function t(s,i,r,o){const n=new h(6),a={triangles:null,left:null,right:null,leaf:!1,splitDim:0,aabb:n};let l,c;for(n[0]=n[1]=n[2]=Number.POSITIVE_INFINITY,n[3]=n[4]=n[5]=Number.NEGATIVE_INFINITY,l=0,c=s.length;l<c;++l){var u=3*s[l];for(let e=0;e<3;++e){const t=3*i[u+e];r[t]<n[0]&&(n[0]=r[t]),r[t]>n[3]&&(n[3]=r[t]),r[t+1]<n[1]&&(n[1]=r[t+1]),r[t+1]>n[4]&&(n[4]=r[t+1]),r[t+2]<n[2]&&(n[2]=r[t+2]),r[t+2]>n[5]&&(n[5]=r[t+2])}}if(s.length<20||o>10)return a.triangles=s,a.leaf=!0,a;e[0]=n[3]-n[0],e[1]=n[4]-n[1],e[2]=n[5]-n[2];let A=0;e[1]>e[A]&&(A=1),e[2]>e[A]&&(A=2),a.splitDim=A;const p=(n[A]+n[A+3])/2,d=new Array(s.length);let f=0;const m=new Array(s.length);let g=0;for(l=0,c=s.length;l<c;++l){const e=i[u=3*s[l]],t=3*i[u+1],o=3*i[u+2];r[3*e+A]<=p||r[t+A]<=p||r[o+A]<=p?d[f++]=s[l]:m[g++]=s[l]}return d.length=f,m.length=g,a.left=t(d,i,r,o+1),a.right=t(m,i,r,o+1),a}return(e,s)=>{const i=e.length/3,r=new Array(i);for(let e=0;e<i;++e)r[e]=e;return t(r,e,s,0)}})(),decompressPosition(e,t,s){(s=s||e)[0]=e[0]*t[0]+t[12],s[1]=e[1]*t[5]+t[13],s[2]=e[2]*t[10]+t[14]},decompressPositions(e,t,s=new Float32Array(e.length)){for(let i=0,r=e.length;i<r;i+=3)s[i+0]=e[i+0]*t[0]+t[12],s[i+1]=e[i+1]*t[5]+t[13],s[i+2]=e[i+2]*t[10]+t[14];return s},decompressUV(e,t,s){s[0]=e[0]*t[0]+t[6],s[1]=e[1]*t[4]+t[7]},decompressUVs(e,t,s=new Float32Array(e.length)){for(let i=0,r=e.length;i<r;i+=3)s[i+0]=e[i+0]*t[0]+t[6],s[i+1]=e[i+1]*t[4]+t[7];return s},octDecodeVec2(e,t){let s=e[0],i=e[1];s=(2*s+1)/255,i=(2*i+1)/255;const r=1-Math.abs(s)-Math.abs(i);r<0&&(s=(1-Math.abs(i))*(s>=0?1:-1),i=(1-Math.abs(s))*(i>=0?1:-1));const o=Math.sqrt(s*s+i*i+r*r);return t[0]=s/o,t[1]=i/o,t[2]=r/o,t},octDecodeVec2s(e,t){for(let s=0,i=0,r=e.length;s<r;s+=2){let r=e[s+0],o=e[s+1];r=(2*r+1)/255,o=(2*o+1)/255;const n=1-Math.abs(r)-Math.abs(o);n<0&&(r=(1-Math.abs(o))*(r>=0?1:-1),o=(1-Math.abs(r))*(o>=0?1:-1));const a=Math.sqrt(r*r+o*o+n*n);t[i+0]=r/a,t[i+1]=o/a,t[i+2]=n/a,i+=3}return t}};p.buildEdgeIndices=function(){const e=[],t=[],s=[],i=[],r=[];let o=0;const n=new Uint16Array(3),a=new Uint16Array(3),l=new Uint16Array(3),h=p.vec3(),c=p.vec3(),u=p.vec3(),A=p.vec3(),d=p.vec3(),f=p.vec3(),m=p.vec3();return function(g,y,E,v){!function(r,o){const n={};let a,l,h,c;const u=Math.pow(10,4);let A,p,d=0;for(A=0,p=r.length;A<p;A+=3)a=r[A],l=r[A+1],h=r[A+2],c=Math.round(a*u)+"_"+Math.round(l*u)+"_"+Math.round(h*u),void 0===n[c]&&(n[c]=d/3,e[d++]=a,e[d++]=l,e[d++]=h),t[A/3]=n[c];for(A=0,p=o.length;A<p;A++)i[A]=t[o[A]],s[i[A]]=o[A]}(g,y),function(t,s){o=0;for(let g=0,y=t;g<y;g+=3){const t=3*i[g],y=3*i[g+1],E=3*i[g+2];s?(n[0]=e[t],n[1]=e[t+1],n[2]=e[t+2],a[0]=e[y],a[1]=e[y+1],a[2]=e[y+2],l[0]=e[E],l[1]=e[E+1],l[2]=e[E+2],p.decompressPosition(n,s,h),p.decompressPosition(a,s,c),p.decompressPosition(l,s,u)):(h[0]=e[t],h[1]=e[t+1],h[2]=e[t+2],c[0]=e[y],c[1]=e[y+1],c[2]=e[y+2],u[0]=e[E],u[1]=e[E+1],u[2]=e[E+2]),p.subVec3(u,c,A),p.subVec3(h,c,d),p.cross3Vec3(A,d,f),p.normalizeVec3(f,m);const v=r[o]||(r[o]={normal:p.vec3()});v.normal[0]=m[0],v.normal[1]=m[1],v.normal[2]=m[2],o++}}(y.length,E);const _=[],I=Math.cos(p.DEGTORAD*v),T={};let P,D,b,R,C,x,N,O,S,w,M,B=!1;for(let e=0,t=y.length;e<t;e+=3){const t=e/3;for(let s=0;s<3;s++)P=i[e+s],D=i[e+(s+1)%3],b=Math.min(P,D),R=Math.max(P,D),C=b+","+R,void 0===T[C]?T[C]={index1:b,index2:R,face1:t,face2:void 0}:T[C].face2=t}for(C in T)x=T[C],void 0!==x.face2&&(N=r[x.face1].normal,O=r[x.face2].normal,S=p.dotVec3(N,O),S>I)||(w=s[x.index1],M=s[x.index2],(!B&&w>65535||M>65535)&&(B=!0),_.push(w),_.push(M));return B?new Uint32Array(_):new Uint16Array(_)}}();const d={build:{version:"0.8"},client:{browser:navigator&&navigator.userAgent?navigator.userAgent:"n/a"},components:{scenes:0,models:0,meshes:0,objects:0},memory:{meshes:0,positions:0,colors:0,normals:0,uvs:0,indices:0,textures:0,transforms:0,materials:0,programs:0},frame:{frameCount:0,fps:0,useProgram:0,bindTexture:0,bindArray:0,drawElements:0,drawArrays:0,tasksRun:0,tasksScheduled:0}};var f=[["0",10],["A",26],["a",26],["_",1],["$",1]].map((function(e){for(var t=[],s=e[0].charCodeAt(0),i=s+e[1],r=s;r<i;++r)t.push(r);return String.fromCharCode.apply(null,t)})).join("");function m(e,t){return(t&&4!==t?[0,6]:[0,6,12,18]).map((function(t){return f.substr(parseInt(e/(1<<t))%64,1)})).reverse().join("")}const g=function(){for(var e={},t=window.location.search.substring(1).split("&"),s=0;s<t.length;s++){var i=t[s].split("=");if(void 0===e[i[0]])e[i[0]]=decodeURIComponent(i[1]);else if("string"==typeof e[i[0]]){var r=[e[i[0]],decodeURIComponent(i[1])];e[i[0]]=r}else e[i[0]].push(decodeURIComponent(i[1]))}return e}();const y={xmlToJson:function e(t,s){if(t.nodeType===t.TEXT_NODE){var i=t.nodeValue;if(null===i.match(/^\s+$/))return i}else if(t.nodeType===t.ELEMENT_NODE||t.nodeType===t.DOCUMENT_NODE){var r={type:t.nodeName,children:[]};if(t.nodeType===t.ELEMENT_NODE)for(var o=0;o<t.attributes.length;o++){var n=t.attributes[o];r[s[n.nodeName]||n.nodeName]=n.nodeValue}for(var a=0;a<t.childNodes.length;a++){(o=e(t.childNodes[a],s))&&r.children.push(o)}return r}},clone:function(e){return JSON.parse(JSON.stringify(e))},compressGuid:function(e){var t=[0,2,4,6,8,10,12,14,16,18,20,22,24,26,28,30].map((function(t){return parseInt(e.substr(t,2),16)}));return m(t[0],2)+[1,4,7,10,13].map((function(e){return m((t[e]<<16)+(t[e+1]<<8)+t[e+2])})).join("")},findNodeOfType:function(e,t){var s=[],i=function(e){e.type===t&&s.push(e),(e.children||[]).forEach((function(e){i(e)}))};return i(e),s},timeout:function(e){return new Promise((function(t,s){setTimeout(t,e)}))},httpRequest:function(e){return new Promise((function(t,s){var i=new XMLHttpRequest;i.open(e.method||"GET",e.url,!0),i.onload=function(r){console.log(e.url,i.readyState,i.status),4===i.readyState&&(200===i.status?t(i.responseXML):s(i.statusText))},i.send(null)}))},loadJSON:function(e,t,s){var i=e=>{};t=t||i,s=s||i;var r=new XMLHttpRequest;r.overrideMimeType("application/json"),r.open("GET",e,!0),r.addEventListener("load",(function(e){var i=e.target.response;if(200===this.status){var r;try{r=JSON.parse(i)}catch(e){s(`utils.loadJSON(): Failed to parse JSON response - ${e}`)}t(r)}else if(0===this.status){console.warn("loadFile: HTTP Status 0 received.");try{t(JSON.parse(i))}catch(e){s(`utils.loadJSON(): Failed to parse JSON response - ${e}`)}}else s(e)}),!1),r.addEventListener("error",(function(e){s(e)}),!1),r.send(null)},loadArraybuffer:function(e,t,s){var i=e=>{};t=t||i,s=s||i;const r=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(r){const e=!!r[2];var o=r[3];o=window.decodeURIComponent(o),e&&(o=window.atob(o));try{const e=new ArrayBuffer(o.length),s=new Uint8Array(e);for(var n=0;n<o.length;n++)s[n]=o.charCodeAt(n);window.setTimeout((function(){t(e)}),0)}catch(e){window.setTimeout((function(){s(e)}),0)}}else{const i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onreadystatechange=function(){4===i.readyState&&(200===i.status?t(i.response):s("loadArrayBuffer error : "+i.response))},i.send(null)}},queryString:g,isArray:function(e){return e&&!e.propertyIsEnumerable("length")&&"object"==typeof e&&"number"==typeof e.length},isString:function(e){return"string"==typeof e||e instanceof String},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},isID:function(e){return y.isString(e)||y.isNumeric(e)},isSameComponent:function(e,t){return!(!e||!t)&&(y.isNumeric(e)||y.isString(e)?`${e}`:e.id)===(y.isNumeric(t)||y.isString(t)?`${t}`:t.id)},isFunction:function(e){return"function"==typeof e},isObject:function(e){const t={}.constructor;return!!e&&e.constructor===t},copy:function(e){return y.apply(e,{})},apply:function(e,t){for(const s in e)e.hasOwnProperty(s)&&(t[s]=e[s]);return t},apply2:function(e,t){for(const s in e)e.hasOwnProperty(s)&&void 0!==e[s]&&null!==e[s]&&(t[s]=e[s]);return t},applyIf:function(e,t){for(const s in e)e.hasOwnProperty(s)&&(void 0!==t[s]&&null!==t[s]||(t[s]=e[s]));return t},isEmptyObject:function(e){for(const t in e)if(e.hasOwnProperty(t))return!1;return!0},inQuotes:function(e){return y.isNumeric(e)?`${e}`:`'${e}'`},concat:function(e,t){const s=new e.constructor(e.length+t.length);return s.set(e),s.set(t,e.length),s},flattenParentChildHierarchy:function(e){var t=[];return function e(s){s.id=s.uuid,delete s.oid,t.push(s);var i=s.children;if(i)for(var r=0,o=i.length;r<o;r++){i[r].parent=s.id,e(i[r])}s.children=[]}(e),t}},E={},v=new t,_=new class{constructor(){this._head=[],this._headLength=0,this._tail=[],this._index=0,this._length=0}get length(){return this._length}shift(){if(this._index>=this._headLength){const e=this._head;if(e.length=0,this._head=this._tail,this._tail=e,this._index=0,this._headLength=this._head.length,!this._headLength)return}const e=this._head[this._index];return this._index<0?delete this._head[this._index++]:this._head[this._index++]=void 0,this._length--,e}push(e){return this._length++,this._tail.push(e),this}unshift(e){return this._head[--this._index]=e,this._length++,this}},I={sceneId:null,time:null,startTime:null,prevTime:null,deltaTime:null},T=[];let P,D=0,b=0;const R=new function(){this.version="1.0.0",this.scenes={},this._superTypes={},this._addScene=function(e){if(e.id){if(R.scenes[e.id])return void console.error(`[ERROR] Scene ${y.inQuotes(e.id)} already exists`)}else e.id=v.addItem({});R.scenes[e.id]=e;const t=e.ticksPerOcclusionTest,s=e.ticksPerRender;E[e.id]={ticksPerOcclusionTest:t,ticksPerRender:s,renderCountdown:s},d.components.scenes++,e.once("destroyed",(()=>{v.removeItem(e.id),delete R.scenes[e.id],delete E[e.id],d.components.scenes--}))},this.clear=function(){let e;for(const t in R.scenes)R.scenes.hasOwnProperty(t)&&(e=R.scenes[t],"default.scene"===t?e.clear():(e.destroy(),delete R.scenes[e.id]))},this.scheduleTask=function(e,t){_.push(e),_.push(t)},this.runTasks=function(e=-1){let t,s,i=(new Date).getTime(),r=0;for(;_.length>0&&(e<0||i<e);)t=_.shift(),s=_.shift(),s?t.call(s):t(),i=(new Date).getTime(),r++;return r},this.getNumTasks=function(){return _.length}},C=function(){let e=Date.now();if(P=e-D,D>0&&P>0){var t=1e3/P;b+=t,T.push(t),T.length>=30&&(b-=T.shift()),d.frame.fps=Math.round(b/T.length)}!function(e){const t=R.runTasks(e+10),s=R.getNumTasks();d.frame.tasksRun=t,d.frame.tasksScheduled=s,d.frame.tasksBudget=10}(e),function(e){for(var t in I.time=e,R.scenes)if(R.scenes.hasOwnProperty(t)){var s=R.scenes[t];I.sceneId=t,I.startTime=s.startTime,I.deltaTime=null!=I.prevTime?I.time-I.prevTime:0,s.fire("tick",I,!0)}I.prevTime=e}(e),function(){const e=R.scenes,t=!1;let s,i,r,o,n;for(n in e)e.hasOwnProperty(n)&&(s=e[n],i=E[n],i||(i=E[n]={}),r=s.ticksPerOcclusionTest,i.ticksPerOcclusionTest!==r&&(i.ticksPerOcclusionTest=r,i.renderCountdown=r),--s.occlusionTestCountdown<=0&&(s.doOcclusionTest(),s.occlusionTestCountdown=r),o=s.ticksPerRender,i.ticksPerRender!==o&&(i.ticksPerRender=o,i.renderCountdown=o),0==--i.renderCountdown&&(s.render(t),i.renderCountdown=o))}(),D=e,void 0!==window.requestPostAnimationFrame?window.requestPostAnimationFrame(C):requestAnimationFrame(C)};void 0!==window.requestPostAnimationFrame?window.requestPostAnimationFrame(C):requestAnimationFrame(C);class x{get type(){return"Component"}get isComponent(){return!0}constructor(e=null,t={}){if(this.scene=null,"Scene"===this.type)this.scene=this,this.viewer=t.viewer;else{if("Scene"===e.type)this.scene=e;else{if(!(e instanceof x))throw"Invalid param: owner must be a Component";this.scene=e.scene}this._owner=e}this._dontClear=!!t.dontClear,this._renderer=this.scene._renderer,this.meta=t.meta||{},this.id=t.id,this.destroyed=!1,this._attached={},this._attachments=null,this._subIdMap=null,this._subIdEvents=null,this._eventSubs=null,this._eventSubsNum=null,this._events=null,this._eventCallDepth=0,this._ownedComponents=null,this!==this.scene&&this.scene._addComponent(this),this._updateScheduled=!1,e&&e._own(this)}glRedraw(){this._renderer&&(this._renderer.imageDirty(),this.castsShadow&&this._renderer.shadowsDirty())}glResort(){this._renderer&&this._renderer.needStateSort()}get owner(){return this._owner}isType(e){return this.type===e}fire(e,t,s){this._events||(this._events={}),this._eventSubs||(this._eventSubs={},this._eventSubsNum={}),!0!==s&&(this._events[e]=t||!0);const i=this._eventSubs[e];let r;if(i)for(const s in i)i.hasOwnProperty(s)&&(r=i[s],this._eventCallDepth++,this._eventCallDepth<300?r.callback.call(r.scope,t):this.error("fire: potential stack overflow from recursive event '"+e+"' - dropping this event"),this._eventCallDepth--)}on(e,s,i){this._events||(this._events={}),this._subIdMap||(this._subIdMap=new t),this._subIdEvents||(this._subIdEvents={}),this._eventSubs||(this._eventSubs={}),this._eventSubsNum||(this._eventSubsNum={});let r=this._eventSubs[e];r?this._eventSubsNum[e]++:(r={},this._eventSubs[e]=r,this._eventSubsNum[e]=1);const o=this._subIdMap.addItem();r[o]={callback:s,scope:i||this},this._subIdEvents[o]=e;const n=this._events[e];return void 0!==n&&s.call(i||this,n),o}off(e){if(null==e)return;if(!this._subIdEvents)return;const t=this._subIdEvents[e];if(t){delete this._subIdEvents[e];const s=this._eventSubs[t];s&&(delete s[e],this._eventSubsNum[t]--),this._subIdMap.removeItem(e)}}once(e,t,s){const i=this,r=this.on(e,(function(e){i.off(r),t.call(s||this,e)}),s)}hasSubs(e){return this._eventSubsNum&&this._eventSubsNum[e]>0}log(e){e="[LOG]"+this._message(e),window.console.log(e),this.scene.fire("log",e)}_message(e){return" ["+this.type+" "+y.inQuotes(this.id)+"]: "+e}warn(e){e="[WARN]"+this._message(e),window.console.warn(e),this.scene.fire("warn",e)}error(e){e="[ERROR]"+this._message(e),window.console.error(e),this.scene.fire("error",e)}_attach(e){const t=e.name;if(!t)return void this.error("Component 'name' expected");let s=e.component;const i=e.sceneDefault,r=e.sceneSingleton,o=e.type,n=e.on,a=!1!==e.recompiles;if(s&&(y.isNumeric(s)||y.isString(s))){const e=s;if(s=this.scene.components[e],!s)return void this.error("Component not found: "+y.inQuotes(e))}if(!s)if(!0===r){const e=this.scene.types[o];for(const t in e)if(e.hasOwnProperty){s=e[t];break}if(!s)return this.error("Scene has no default component for '"+t+"'"),null}else if(!0===i&&(s=this.scene[t],!s))return this.error("Scene has no default component for '"+t+"'"),null;if(s){if(s.scene.id!==this.scene.id)return void this.error("Not in same scene: "+s.type+" "+y.inQuotes(s.id));if(o&&!s.isType(o))return void this.error("Expected a "+o+" type or subtype: "+s.type+" "+y.inQuotes(s.id))}this._attachments||(this._attachments={});const l=this._attached[t];let h,c,u;if(l){if(s&&l.id===s.id)return;const e=this._attachments[l.id];for(h=e.subs,c=0,u=h.length;c<u;c++)l.off(h[c]);delete this._attached[t],delete this._attachments[l.id];const i=e.params.onDetached;i&&(y.isFunction(i)?i(l):i.scope?i.callback.call(i.scope,l):i.callback(l)),e.managingLifecycle&&l.destroy()}if(s){const i={params:e,component:s,subs:[],managingLifecycle:false};i.subs.push(s.once("destroyed",(function(){i.params.component=null,this._attach(i.params)}),this)),a&&i.subs.push(s.on("dirty",(function(){this.fire("dirty",this)}),this)),this._attached[t]=s,this._attachments[s.id]=i;const r=e.onAttached;if(r&&(y.isFunction(r)?r(s):r.scope?r.callback.call(r.scope,s):r.callback(s)),n){let e,t,r,o;for(e in n)if(n.hasOwnProperty(e)){if(t=n[e],y.isFunction(t)?(r=t,o=null):(r=t.callback,o=t.scope),!r)continue;i.subs.push(s.on(e,r,o))}}}return a&&this.fire("dirty",this),this.fire(t,s),s}_checkComponent(e,t){if(!t.isComponent){if(!y.isID(t))return void this.error("Expected a Component or ID");{const e=t;if(!(t=this.scene.components[e]))return void this.error("Component not found: "+e)}}if(e===t.type){if(t.scene.id===this.scene.id)return t;this.error("Not in same scene: "+t.type)}else this.error("Expected a "+e+" Component")}_checkComponent2(e,t){if(!t.isComponent){if(!y.isID(t))return void this.error("Expected a Component or ID");{const e=t;if(!(t=this.scene.components[e]))return void this.error("Component not found: "+e)}}if(t.scene.id===this.scene.id){for(var s=0,i=e.length;s<i;s++)if(e[s]===t.type)return t;return this.error("Expected component types: "+e),null}this.error("Not in same scene: "+t.type)}_own(e){this._ownedComponents||(this._ownedComponents={}),this._ownedComponents[e.id]||(this._ownedComponents[e.id]=e),e.once("destroyed",(()=>{delete this._ownedComponents[e.id]}),this)}_needUpdate(e){this._updateScheduled||(this._updateScheduled=!0,0===e?this._doUpdate():R.scheduleTask(this._doUpdate,this))}_doUpdate(){this._updateScheduled&&(this._updateScheduled=!1,this._update&&this._update())}_update(){}clear(){if(this._ownedComponents)for(var e in this._ownedComponents)if(this._ownedComponents.hasOwnProperty(e)){this._ownedComponents[e].destroy(),delete this._ownedComponents[e]}}destroy(){if(this.destroyed)return;let e,t,s,i,r,o;if(this.fire("destroyed",this.destroyed=!0),this._attachments)for(e in this._attachments)if(this._attachments.hasOwnProperty(e)){for(t=this._attachments[e],s=t.component,i=t.subs,r=0,o=i.length;r<o;r++)s.off(i[r]);t.managingLifecycle&&s.destroy()}if(this._ownedComponents)for(e in this._ownedComponents)this._ownedComponents.hasOwnProperty(e)&&(s=this._ownedComponents[e],s.destroy(),delete this._ownedComponents[e]);this.scene._removeComponent(this),this._attached={},this._attachments=null,this._subIdMap=null,this._subIdEvents=null,this._eventSubs=null,this._events=null,this._eventCallDepth=0,this._ownedComponents=null,this._updateScheduled=!1}}const N=1,O=4,S=8,w=16,M=32,B=256,F=512,L=1024,U=2048,H=new Float32Array([0,0,0]),G=new Uint16Array([0,0,0]);class V{constructor(e,t,s,i,r,o){this._isObject=t,this.scene=e.scene,this.model=e,this.meshes=i,this._numTriangles=0;for(var n=0,a=this.meshes.length;n<a;n++){const e=this.meshes[n];e.parent=this,this._numTriangles+=e.numTriangles}this.id=s,this.originalSystemId=p.unglobalizeObjectId(e.id,s),this._flags=r,this._aabb=o,this._offsetAABB=p.AABB3(o),this._offset=p.vec3(),this._colorizeUpdated=!1,this._opacityUpdated=!1,this._culled=!1,this._culledVFC=!1,this._culledLOD=!1,this._isObject&&e.scene._registerObject(this)}get isEntity(){return!0}get isModel(){return!1}get isObject(){return this._isObject}get aabb(){return this._offsetAABB}get numTriangles(){return this._numTriangles}get visible(){return this._getFlag(N)}set visible(e){if(!!(this._flags&N)!==e){this._flags=e?this._flags|N:this._flags&~N;for(let e=0,t=this.meshes.length;e<t;e++)this.meshes[e]._setVisible(this._flags);this._isObject&&this.model.scene._objectVisibilityUpdated(this,e),this.model.glRedraw()}}get highlighted(){return this._getFlag(F)}set highlighted(e){if(!!(this._flags&F)!==e){this._flags=e?this._flags|F:this._flags&~F;for(var t=0,s=this.meshes.length;t<s;t++)this.meshes[t]._setHighlighted(this._flags);this._isObject&&this.model.scene._objectHighlightedUpdated(this,e),this.model.glRedraw()}}get xrayed(){return this._getFlag(B)}set xrayed(e){if(!!(this._flags&B)!==e){this._flags=e?this._flags|B:this._flags&~B;for(let e=0,t=this.meshes.length;e<t;e++)this.meshes[e]._setXRayed(this._flags);this._isObject&&this.model.scene._objectXRayedUpdated(this,e),this.model.glRedraw()}}get selected(){return this._getFlag(L)}set selected(e){if(!!(this._flags&L)!==e){this._flags=e?this._flags|L:this._flags&~L;for(let e=0,t=this.meshes.length;e<t;e++)this.meshes[e]._setSelected(this._flags);this._isObject&&this.model.scene._objectSelectedUpdated(this,e),this.model.glRedraw()}}get edges(){return this._getFlag(U)}set edges(e){if(!!(this._flags&U)!==e){this._flags=e?this._flags|U:this._flags&~U;for(var t=0,s=this.meshes.length;t<s;t++)this.meshes[t]._setEdges(this._flags);this.model.glRedraw()}}get culledVFC(){return!!this._culledVFC}set culledVFC(e){this._culledVFC=e,this.internalSetCulled()}get culledLOD(){return!!this._culledLOD}set culledLOD(e){this._culledLOD=e,this.internalSetCulled()}get culled(){return!!this._culled}set culled(e){this._culled=e,this.internalSetCulled()}internalSetCulled(){let e=!!this._culled||!!this._culledLOD||!!this._culledVFC;if(!!(this._flags&O)!==e){this._flags=e?this._flags|O:this._flags&~O;for(var t=0,s=this.meshes.length;t<s;t++)this.meshes[t]._setCulled(this._flags);this.model.glRedraw()}}get clippable(){return this._getFlag(w)}set clippable(e){if(!!(this._flags&w)!==e){this._flags=e?this._flags|w:this._flags&~w;for(var t=0,s=this.meshes.length;t<s;t++)this.meshes[t]._setClippable(this._flags);this.model.glRedraw()}}get collidable(){return this._getFlag(M)}set collidable(e){if(!!(this._flags&M)!==e){this._flags=e?this._flags|M:this._flags&~M;for(var t=0,s=this.meshes.length;t<s;t++)this.meshes[t]._setCollidable(this._flags)}}get pickable(){return this._getFlag(S)}set pickable(e){if(!!(this._flags&S)!==e){this._flags=e?this._flags|S:this._flags&~S;for(var t=0,s=this.meshes.length;t<s;t++)this.meshes[t]._setPickable(this._flags)}}get colorize(){if(0===this.meshes.length)return null;const e=this.meshes[0]._colorize;return H[0]=e[0]/255,H[1]=e[1]/255,H[2]=e[2]/255,H}set colorize(e){if(e){G[0]=Math.floor(255*e[0]),G[1]=Math.floor(255*e[1]),G[2]=Math.floor(255*e[2]);for(let e=0,t=this.meshes.length;e<t;e++)this.meshes[e]._setColorize(G)}else for(let e=0,t=this.meshes.length;e<t;e++)this.meshes[e]._setColorize(null);if(this._isObject){const t=!!e;this.scene._objectColorizeUpdated(this,t),this._colorizeUpdated=t}this.model.glRedraw()}get opacity(){return this.meshes.length>0?this.meshes[0]._colorize[3]/255:1}set opacity(e){if(0===this.meshes.length)return;const t=null!=e,s=this.meshes[0]._colorize[3];let i=255;if(t){if(e<0?e=0:e>1&&(e=1),i=Math.floor(255*e),s===i)return}else if(i=255,s===i)return;for(let e=0,t=this.meshes.length;e<t;e++)this.meshes[e]._setOpacity(i,this._flags);this._isObject&&(this.scene._objectOpacityUpdated(this,t),this._opacityUpdated=t),this.model.glRedraw()}get offset(){return this._offset}set offset(e){e?(this._offset[0]=e[0],this._offset[1]=e[1],this._offset[2]=e[2]):(this._offset[0]=0,this._offset[1]=0,this._offset[2]=0);for(let e=0,t=this.meshes.length;e<t;e++)this.meshes[e]._setOffset(this._offset);this._offsetAABB[0]=this._aabb[0]+this._offset[0],this._offsetAABB[1]=this._aabb[1]+this._offset[1],this._offsetAABB[2]=this._aabb[2]+this._offset[2],this._offsetAABB[3]=this._aabb[3]+this._offset[0],this._offsetAABB[4]=this._aabb[4]+this._offset[1],this._offsetAABB[5]=this._aabb[5]+this._offset[2],this.scene._aabbDirty=!0,this.scene._objectOffsetUpdated(this,e.some((e=>0!==e))),this.model._aabbDirty=!0,this.model.glRedraw()}get castsShadow(){return!1}set castsShadow(e){}get receivesShadow(){return!1}set receivesShadow(e){}get saoEnabled(){return this.model.saoEnabled}getEachVertex(e){for(let t=0,s=this.meshes.length;t<s;t++)this.meshes[t].getEachVertex(e)}_getFlag(e){return!!(this._flags&e)}_finalize(){const e=this.model.scene;this._isObject&&(this.visible&&e._objectVisibilityUpdated(this,!0),this.highlighted&&e._objectHighlightedUpdated(this,!0),this.xrayed&&e._objectXRayedUpdated(this,!0),this.selected&&e._objectSelectedUpdated(this,!0));for(let e=0,t=this.meshes.length;e<t;e++)this.meshes[e]._finalize(this._flags)}_finalize2(){for(let e=0,t=this.meshes.length;e<t;e++)this.meshes[e]._finalize2()}_destroy(){const e=this.model.scene;this._isObject&&(e._deregisterObject(this),this.visible&&e._objectVisibilityUpdated(this,!1,!1),this.xrayed&&e._objectXRayedUpdated(this,!1),this.selected&&e._objectSelectedUpdated(this,!1),this.highlighted&&e._objectHighlightedUpdated(this,!1),this._opacityUpdated&&(this.scene._objectColorizeUpdated(this,!1),this.scene._objectOpacityUpdated(this,!1)),this.offset.some((e=>0!==e))&&this.scene._objectOffsetUpdated(this,!1));for(let e=0,t=this.meshes.length;e<t;e++)this.meshes[e]._destroy();e._aabbDirty=!0}}const k=p.vec3(),j=function(){const e=new Float64Array(16),t=new Float64Array(4),s=new Float64Array(4);return function(i,r,o){return o=o||e,t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=1,p.transformVec4(i,t,s),p.setMat4Translation(i,s,o),o.slice()}}();function Q(e,t,s,i=1e3){const r=p.getPositionsCenter(e,k),o=Math.round(r[0]/i)*i,n=Math.round(r[1]/i)*i,a=Math.round(r[2]/i)*i;s[0]=o,s[1]=n,s[2]=a;const l=0!==s[0]||0!==s[1]||0!==s[2];if(l)for(let s=0,i=e.length;s<i;s+=3)t[s+0]=e[s+0]-o,t[s+1]=e[s+1]-n,t[s+2]=e[s+2]-a;return l}function W(e,t,s,i){const r=p.dotVec3(t,s)+e,o=p.normalizeVec3(t,k);return p.mulVec3Scalar(o,-r,i),i}const z=1,K=4,Y=8,X=16,Z=32,q=256,J=512,$=1024,ee=2048,te=new Float32Array([0,0,0]),se=new Uint16Array([0,0,0]);class ie{constructor(e,t,s,i,r,o){this._isObject=t,this.scene=e.scene,this.model=e,this.meshes=i,this._numTriangles=0;for(var n=0,a=this.meshes.length;n<a;n++){const e=this.meshes[n];e.parent=this,this._numTriangles+=e.numTriangles}this.id=s,this.originalSystemId=p.unglobalizeObjectId(e.id,s),this._flags=r,this._aabb=o,this._offsetAABB=p.AABB3(o),this._offset=p.vec3(),this._colorizeUpdated=!1,this._opacityUpdated=!1,this._culled=!1,this._culledVFC=!1,this._culledLOD=!1,this._isObject&&e.scene._registerObject(this)}get isEntity(){return!0}get isModel(){return!1}get isObject(){return this._isObject}get aabb(){return this._offsetAABB}get numTriangles(){return this._numTriangles}get visible(){return this._getFlag(z)}set visible(e){if(!!(this._flags&z)!==e){this._flags=e?this._flags|z:this._flags&~z;for(let e=0,t=this.meshes.length;e<t;e++)this.meshes[e]._setVisible(this._flags);this._isObject&&this.model.scene._objectVisibilityUpdated(this,e),this.model.glRedraw()}}get highlighted(){return this._getFlag(J)}set highlighted(e){if(!!(this._flags&J)!==e){this._flags=e?this._flags|J:this._flags&~J;for(var t=0,s=this.meshes.length;t<s;t++)this.meshes[t]._setHighlighted(this._flags);this._isObject&&this.model.scene._objectHighlightedUpdated(this,e),this.model.glRedraw()}}get xrayed(){return this._getFlag(q)}set xrayed(e){if(!!(this._flags&q)!==e){this._flags=e?this._flags|q:this._flags&~q;for(let e=0,t=this.meshes.length;e<t;e++)this.meshes[e]._setXRayed(this._flags);this._isObject&&this.model.scene._objectXRayedUpdated(this,e),this.model.glRedraw()}}get selected(){return this._getFlag($)}set selected(e){if(!!(this._flags&$)!==e){this._flags=e?this._flags|$:this._flags&~$;for(let e=0,t=this.meshes.length;e<t;e++)this.meshes[e]._setSelected(this._flags);this._isObject&&this.model.scene._objectSelectedUpdated(this,e),this.model.glRedraw()}}get edges(){return this._getFlag(ee)}set edges(e){if(!!(this._flags&ee)!==e){this._flags=e?this._flags|ee:this._flags&~ee;for(var t=0,s=this.meshes.length;t<s;t++)this.meshes[t]._setEdges(this._flags);this.model.glRedraw()}}get culledVFC(){return!!this._culledVFC}set culledVFC(e){this._culledVFC=e,this.internalSetCulled()}get culledLOD(){return!!this._culledLOD}set culledLOD(e){this._culledLOD=e,this.internalSetCulled()}get culled(){return!!this._culled}set culled(e){this._culled=e,this.internalSetCulled()}internalSetCulled(){let e=!!this._culled||!!this._culledLOD||!!this._culledVFC;if(!!(this._flags&K)!==e){this._flags=e?this._flags|K:this._flags&~K;for(var t=0,s=this.meshes.length;t<s;t++)this.meshes[t]._setCulled(this._flags);this.model.glRedraw()}}get clippable(){return this._getFlag(X)}set clippable(e){if(!!(this._flags&X)!==e){this._flags=e?this._flags|X:this._flags&~X;for(var t=0,s=this.meshes.length;t<s;t++)this.meshes[t]._setClippable(this._flags);this.model.glRedraw()}}get collidable(){return this._getFlag(Z)}set collidable(e){if(!!(this._flags&Z)!==e){this._flags=e?this._flags|Z:this._flags&~Z;for(var t=0,s=this.meshes.length;t<s;t++)this.meshes[t]._setCollidable(this._flags)}}get pickable(){return this._getFlag(Y)}set pickable(e){if(!!(this._flags&Y)!==e){this._flags=e?this._flags|Y:this._flags&~Y;for(var t=0,s=this.meshes.length;t<s;t++)this.meshes[t]._setPickable(this._flags)}}get colorize(){if(0===this.meshes.length)return null;const e=this.meshes[0]._colorize;return te[0]=e[0]/255,te[1]=e[1]/255,te[2]=e[2]/255,te}set colorize(e){if(e){se[0]=Math.floor(255*e[0]),se[1]=Math.floor(255*e[1]),se[2]=Math.floor(255*e[2]);for(let e=0,t=this.meshes.length;e<t;e++)this.meshes[e]._setColorize(se)}else for(let e=0,t=this.meshes.length;e<t;e++)this.meshes[e]._setColorize(null);if(this._isObject){const t=!!e;this.scene._objectColorizeUpdated(this,t),this._colorizeUpdated=t}this.model.glRedraw()}get opacity(){return this.meshes.length>0?this.meshes[0]._colorize[3]/255:1}set opacity(e){if(0===this.meshes.length)return;const t=null!=e,s=this.meshes[0]._colorize[3];let i=255;if(t){if(e<0?e=0:e>1&&(e=1),i=Math.floor(255*e),s===i)return}else if(i=255,s===i)return;for(let e=0,t=this.meshes.length;e<t;e++)this.meshes[e]._setOpacity(i,this._flags);this._isObject&&(this.scene._objectOpacityUpdated(this,t),this._opacityUpdated=t),this.model.glRedraw()}get offset(){return this._offset}set offset(e){e?(this._offset[0]=e[0],this._offset[1]=e[1],this._offset[2]=e[2]):(this._offset[0]=0,this._offset[1]=0,this._offset[2]=0);for(let e=0,t=this.meshes.length;e<t;e++)this.meshes[e]._setOffset(this._offset);this._offsetAABB[0]=this._aabb[0]+this._offset[0],this._offsetAABB[1]=this._aabb[1]+this._offset[1],this._offsetAABB[2]=this._aabb[2]+this._offset[2],this._offsetAABB[3]=this._aabb[3]+this._offset[0],this._offsetAABB[4]=this._aabb[4]+this._offset[1],this._offsetAABB[5]=this._aabb[5]+this._offset[2],this.scene._aabbDirty=!0,this.scene._objectOffsetUpdated(this,e),this.model._aabbDirty=!0,this.model.glRedraw()}get castsShadow(){return!1}set castsShadow(e){}get receivesShadow(){return!1}set receivesShadow(e){}get saoEnabled(){return this.model.saoEnabled}_getFlag(e){return!!(this._flags&e)}_finalize(){const e=this.model.scene;this._isObject&&(this.visible&&e._objectVisibilityUpdated(this,!0),this.highlighted&&e._objectHighlightedUpdated(this,!0),this.xrayed&&e._objectXRayedUpdated(this,!0),this.selected&&e._objectSelectedUpdated(this,!0));for(let e=0,t=this.meshes.length;e<t;e++)this.meshes[e]._finalize(this._flags)}_finalize2(){for(let e=0,t=this.meshes.length;e<t;e++)this.meshes[e]._finalize2()}_destroy(){const e=this.model.scene;this._isObject&&(e._deregisterObject(this),this.visible&&e._objectVisibilityUpdated(this,!1,!1),this.xrayed&&e._objectXRayedUpdated(this,!1),this.selected&&e._objectSelectedUpdated(this,!1),this.highlighted&&e._objectHighlightedUpdated(this,!1),this._opacityUpdated&&(this.scene._objectColorizeUpdated(this,!1),this.scene._objectOpacityUpdated(this,!1)),this.offset.some((e=>0!==e))&&this.scene._objectOffsetUpdated(this,!1));for(let e=0,t=this.meshes.length;e<t;e++)this.meshes[e]._destroy();e._aabbDirty=!0}}p.vec4(),p.vec4(),p.vec3(),p.vec3(),p.vec3(),p.vec3(),p.vec3();class re extends x{get type(){return"Spinner"}constructor(e,t={}){super(e,t),this._canvas=t.canvas,this._element=null,this._isCustom=!1,t.elementId&&(this._element=document.getElementById(t.elementId),this._element?this._adjustPosition():this.error("Can't find given Spinner HTML element: '"+t.elementId+"' - will automatically create default element")),this._element||this._createDefaultSpinner(),this.processes=0}_createDefaultSpinner(){this._injectDefaultCSS();const e=document.createElement("div"),t=e.style;t["z-index"]="9000",t.position="absolute",e.innerHTML='<div class="sk-fading-circle">                <div class="sk-circle1 sk-circle"></div>                <div class="sk-circle2 sk-circle"></div>                <div class="sk-circle3 sk-circle"></div>                <div class="sk-circle4 sk-circle"></div>                <div class="sk-circle5 sk-circle"></div>                <div class="sk-circle6 sk-circle"></div>                <div class="sk-circle7 sk-circle"></div>                <div class="sk-circle8 sk-circle"></div>                <div class="sk-circle9 sk-circle"></div>                <div class="sk-circle10 sk-circle"></div>                <div class="sk-circle11 sk-circle"></div>                <div class="sk-circle12 sk-circle"></div>                </div>',this._canvas.parentElement.appendChild(e),this._element=e,this._isCustom=!1,this._adjustPosition()}_injectDefaultCSS(){const e="xeokit-spinner-css";if(document.getElementById(e))return;const t=document.createElement("style");t.innerHTML=".sk-fading-circle {        background: transparent;        margin: 20px auto;        width: 50px;        height:50px;        position: relative;        }        .sk-fading-circle .sk-circle {        width: 120%;        height: 120%;        position: absolute;        left: 0;        top: 0;        }        .sk-fading-circle .sk-circle:before {        content: '';        display: block;        margin: 0 auto;        width: 15%;        height: 15%;        background-color: #ff8800;        border-radius: 100%;        -webkit-animation: sk-circleFadeDelay 1.2s infinite ease-in-out both;        animation: sk-circleFadeDelay 1.2s infinite ease-in-out both;        }        .sk-fading-circle .sk-circle2 {        -webkit-transform: rotate(30deg);        -ms-transform: rotate(30deg);        transform: rotate(30deg);    }    .sk-fading-circle .sk-circle3 {        -webkit-transform: rotate(60deg);        -ms-transform: rotate(60deg);        transform: rotate(60deg);    }    .sk-fading-circle .sk-circle4 {        -webkit-transform: rotate(90deg);        -ms-transform: rotate(90deg);        transform: rotate(90deg);    }    .sk-fading-circle .sk-circle5 {        -webkit-transform: rotate(120deg);        -ms-transform: rotate(120deg);        transform: rotate(120deg);    }    .sk-fading-circle .sk-circle6 {        -webkit-transform: rotate(150deg);        -ms-transform: rotate(150deg);        transform: rotate(150deg);    }    .sk-fading-circle .sk-circle7 {        -webkit-transform: rotate(180deg);        -ms-transform: rotate(180deg);        transform: rotate(180deg);    }    .sk-fading-circle .sk-circle8 {        -webkit-transform: rotate(210deg);        -ms-transform: rotate(210deg);        transform: rotate(210deg);    }    .sk-fading-circle .sk-circle9 {        -webkit-transform: rotate(240deg);        -ms-transform: rotate(240deg);        transform: rotate(240deg);    }    .sk-fading-circle .sk-circle10 {        -webkit-transform: rotate(270deg);        -ms-transform: rotate(270deg);        transform: rotate(270deg);    }    .sk-fading-circle .sk-circle11 {        -webkit-transform: rotate(300deg);        -ms-transform: rotate(300deg);        transform: rotate(300deg);    }    .sk-fading-circle .sk-circle12 {        -webkit-transform: rotate(330deg);        -ms-transform: rotate(330deg);        transform: rotate(330deg);    }    .sk-fading-circle .sk-circle2:before {        -webkit-animation-delay: -1.1s;        animation-delay: -1.1s;    }    .sk-fading-circle .sk-circle3:before {        -webkit-animation-delay: -1s;        animation-delay: -1s;    }    .sk-fading-circle .sk-circle4:before {        -webkit-animation-delay: -0.9s;        animation-delay: -0.9s;    }    .sk-fading-circle .sk-circle5:before {        -webkit-animation-delay: -0.8s;        animation-delay: -0.8s;    }    .sk-fading-circle .sk-circle6:before {        -webkit-animation-delay: -0.7s;        animation-delay: -0.7s;    }    .sk-fading-circle .sk-circle7:before {        -webkit-animation-delay: -0.6s;        animation-delay: -0.6s;    }    .sk-fading-circle .sk-circle8:before {        -webkit-animation-delay: -0.5s;        animation-delay: -0.5s;    }    .sk-fading-circle .sk-circle9:before {        -webkit-animation-delay: -0.4s;        animation-delay: -0.4s;    }    .sk-fading-circle .sk-circle10:before {        -webkit-animation-delay: -0.3s;        animation-delay: -0.3s;    }    .sk-fading-circle .sk-circle11:before {        -webkit-animation-delay: -0.2s;        animation-delay: -0.2s;    }    .sk-fading-circle .sk-circle12:before {        -webkit-animation-delay: -0.1s;        animation-delay: -0.1s;    }    @-webkit-keyframes sk-circleFadeDelay {        0%, 39%, 100% { opacity: 0; }        40% { opacity: 1; }    }    @keyframes sk-circleFadeDelay {        0%, 39%, 100% { opacity: 0; }        40% { opacity: 1; }    }",t.id=e,document.body.appendChild(t)}_adjustPosition(){if(this._isCustom)return;const e=this._canvas,t=this._element,s=t.style;s.left=e.offsetLeft+.5*e.clientWidth-.5*t.clientWidth+"px",s.top=e.offsetTop+.5*e.clientHeight-.5*t.clientHeight+"px"}set processes(e){if(e=e||0,this._processes===e)return;if(e<0)return;const t=this._processes;this._processes=e;const s=this._element;s&&(s.style.visibility=this._processes>0?"visible":"hidden"),this.fire("processes",this._processes),0===this._processes&&this._processes!==t&&this.fire("zeroProcesses",this._processes)}get processes(){return this._processes}_destroy(){this._element&&!this._isCustom&&(this._element.parentNode.removeChild(this._element),this._element=null);const e=document.getElementById("xeokit-spinner-css");e&&e.parentNode.removeChild(e)}}const oe={WEBGL:!1,SUPPORTED_EXTENSIONS:{}},ne=document.createElement("canvas");if(ne){const e=ne.getContext("webgl",{antialias:!0})||ne.getContext("experimental-webgl",{antialias:!0});oe.WEBGL=!!e,oe.WEBGL&&(oe.ANTIALIAS=e.getContextAttributes().antialias,e.getShaderPrecisionFormat?e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0?oe.FS_MAX_FLOAT_PRECISION="highp":e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?oe.FS_MAX_FLOAT_PRECISION="mediump":oe.FS_MAX_FLOAT_PRECISION="lowp":oe.FS_MAX_FLOAT_PRECISION="mediump",oe.DEPTH_BUFFER_BITS=e.getParameter(e.DEPTH_BITS),oe.MAX_TEXTURE_SIZE=e.getParameter(e.MAX_TEXTURE_SIZE),oe.MAX_CUBE_MAP_SIZE=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),oe.MAX_RENDERBUFFER_SIZE=e.getParameter(e.MAX_RENDERBUFFER_SIZE),oe.MAX_TEXTURE_UNITS=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),oe.MAX_TEXTURE_IMAGE_UNITS=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),oe.MAX_VERTEX_ATTRIBS=e.getParameter(e.MAX_VERTEX_ATTRIBS),oe.MAX_VERTEX_UNIFORM_VECTORS=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),oe.MAX_FRAGMENT_UNIFORM_VECTORS=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),oe.MAX_VARYING_VECTORS=e.getParameter(e.MAX_VARYING_VECTORS),e.getSupportedExtensions().forEach((function(e){oe.SUPPORTED_EXTENSIONS[e]=!0})))}const ae=["webgl2","experimental-webgl","webkit-3d","moz-webgl","moz-glweb20"];class le extends x{constructor(e,t={}){super(e,t),this._backgroundColor=p.vec3([t.backgroundColor?t.backgroundColor[0]:1,t.backgroundColor?t.backgroundColor[1]:1,t.backgroundColor?t.backgroundColor[2]:1]),this._backgroundColorFromAmbientLight=!!t.backgroundColorFromAmbientLight,this.canvas=t.canvas,this.gl=null,this.webgl2=!1,this.transparent=!!t.transparent,this.optimizeResizeDetection=!0,this.contextAttr=t.contextAttr||{},this.contextAttr.alpha=this.transparent,this.contextAttr.preserveDrawingBuffer=!!this.contextAttr.preserveDrawingBuffer,this.contextAttr.stencil=!1,this.contextAttr.premultipliedAlpha=!!this.contextAttr.premultipliedAlpha,this.contextAttr.antialias=!1!==this.contextAttr.antialias,this.resolutionScale=t.resolutionScale,this.canvas.width=Math.round(this.canvas.clientWidth*this._resolutionScale),this.canvas.height=Math.round(this.canvas.clientHeight*this._resolutionScale),this.boundary=[this.canvas.offsetLeft,this.canvas.offsetTop,this.canvas.clientWidth,this.canvas.clientHeight],this._initWebGL(t);const s=this;this.canvas.addEventListener("webglcontextlost",this._webglcontextlostListener=function(e){console.time("webglcontextrestored"),s.scene._webglContextLost(),s.fire("webglcontextlost"),e.preventDefault()},!1),this.canvas.addEventListener("webglcontextrestored",this._webglcontextrestoredListener=function(e){s._initWebGL(),s.gl&&(s.scene._webglContextRestored(s.gl),s.fire("webglcontextrestored",s.gl),e.preventDefault()),console.timeEnd("webglcontextrestored")},!1);let i=null,r=null,o=null,n=null,a=null,l=null,h=null,c=null,u=0;this._tick=this.scene.on("tick",(()=>{if(u++,s._canvasSizeChanged=!1,s.optimizeResizeDetection&&u<10)return;u=0;const e=this.canvas,t=this._resolutionScale!==i,A=window.innerWidth!==r||window.innerHeight!==o,p=e.clientWidth!==n||e.clientHeight!==a,f=e.offsetLeft!==l||e.offsetTop!==h,m=e.parentElement;if(t||A||p||f||m!==c){if(s._canvasSizeChanged=!0,this._spinner._adjustPosition(),t||p||f){const s=e.clientWidth,i=e.clientHeight;if(t||p){let t,s=0;for(const e in R.scenes)R.scenes.hasOwnProperty(e)&&(t=R.scenes[e],s+=Math.round(t.canvas.canvas.clientWidth*this._resolutionScale*(t.canvas.canvas.clientHeight*this._resolutionScale)));d.memory.pixels=s,e.width=Math.round(e.clientWidth*this._resolutionScale),e.height=Math.round(e.clientHeight*this._resolutionScale)}const r=this.boundary;r[0]=e.offsetLeft,r[1]=e.offsetTop,r[2]=s,r[3]=i,t||this.fire("boundary",r),n=s,a=i}t&&(i=this._resolutionScale),A&&(r=window.innerWidth,o=window.innerHeight),f&&(l=e.offsetLeft,h=e.offsetTop),c=m}})),this._spinner=new re(this.scene,{canvas:this.canvas,elementId:t.spinnerElementId})}get type(){return"Canvas"}get backgroundColorFromAmbientLight(){return this._backgroundColorFromAmbientLight}set backgroundColorFromAmbientLight(e){this._backgroundColorFromAmbientLight=!1!==e,this.glRedraw()}get backgroundColor(){return this._backgroundColor}set backgroundColor(e){e?(this._backgroundColor[0]=e[0],this._backgroundColor[1]=e[1],this._backgroundColor[2]=e[2]):(this._backgroundColor[0]=1,this._backgroundColor[1]=1,this._backgroundColor[2]=1),this.glRedraw()}get resolutionScale(){return this._resolutionScale}set resolutionScale(e){if((e=e||1)===this._resolutionScale)return;this._resolutionScale=e;const t=this.canvas;t.width=Math.round(t.clientWidth*this._resolutionScale),t.height=Math.round(t.clientHeight*this._resolutionScale),this.glRedraw()}get spinner(){return this._spinner}_createCanvas(){const e="xeokit-canvas-"+p.createUUID(),t=document.getElementsByTagName("body")[0],s=document.createElement("div"),i=s.style;i.height="100%",i.width="100%",i.padding="0",i.margin="0",i.background="rgba(0,0,0,0);",i.float="left",i.left="0",i.top="0",i.position="absolute",i.opacity="1.0",i["z-index"]="-10000",s.innerHTML+='<canvas id="'+e+'" style="width: 100%; height: 100%; float: left; margin: 0; padding: 0;"></canvas>',t.appendChild(s),this.canvas=document.getElementById(e)}_getElementXY(e){let t=0,s=0;for(;e;)t+=e.offsetLeft-e.scrollLeft,s+=e.offsetTop-e.scrollTop,e=e.offsetParent;return{x:t,y:s}}_initWebGL(){if(!this.gl)for(let e=0;!this.gl&&e<ae.length;e++)try{this.gl=this.canvas.getContext(ae[e],this.contextAttr)}catch(e){}this.gl||(this.error("Failed to get a WebGL context"),this.fire("webglContextFailed",!0,!0));{const e=this.gl;let t="__",s=e.activeTexture;e.activeTexture=function(e){t!==e&&(t=e,s.call(this,e))};let i={},r=e.bindTexture;e.bindTexture=function(e,s){i[t]!==s&&(i[t]=s,r.call(this,e,s))}}this.gl&&this.webgl2&&(this.gl.hint(this.gl.FRAGMENT_SHADER_DERIVATIVE_HINT,this.gl.FASTEST),this.gl,WebGL2RenderingContext)}getSnapshot(e){throw"Canvas#getSnapshot() has been replaced by Viewer#getSnapshot() - use that method instead."}readPixels(e,t,s,i){return this.scene._renderer.readPixels(e,t,s,i)}loseWebGLContext(){this.canvas.loseContext&&this.canvas.loseContext()}destroy(){this.scene.off(this._tick),this._spinner._destroy(),this.canvas.removeEventListener("webglcontextlost",this._webglcontextlostListener),this.canvas.removeEventListener("webglcontextrestored",this._webglcontextrestoredListener),this.gl=null,super.destroy()}}class he{constructor(e){this._scene=e,this._matPool=[],this._matPoolNextFreeIndex=0,this._rtcViewMats={},this._rtcPickViewMats={},this.reset()}reset(){this._matPoolNextFreeIndex=0,this._rtcViewMats={},this._rtcPickViewMats={},this.gl=this._scene.canvas.gl,this.lastProgramId=null,this.pbrEnabled=!1,this.colorTextureEnabled=!1,this.withSAO=!1,this.backfaces=!1,this.frontface=!0,this.textureUnit=0,this.drawElements=0,this.drawArrays=0,this.useProgram=0,this.bindTexture=0,this.bindArray=0,this.pass=0,this.shadowViewMatrix=null,this.shadowProjMatrix=null,this.pickViewMatrix=null,this.pickProjMatrix=null,this.pickZNear=.01,this.pickZFar=5e3,this.pickInvisible=!1,this.pickElementsCount=null,this.pickElementsOffset=null,this.lineWidth=1}getRTCViewMatrix(e,t){let s=this._rtcViewMats[e];return s||(s=this._getNewMat(),j(this._scene.camera.viewMatrix,t,s),this._rtcViewMats[e]=s),s}getRTCPickViewMatrix(e,t){let s=this._rtcPickViewMats[e];if(!s){s=this._getNewMat();const i=this.pickViewMatrix||this._scene.camera.viewMatrix;j(i,t,s),this._rtcPickViewMats[e]=s}return s}_getNewMat(){let e=this._matPool[this._matPoolNextFreeIndex];return e||(e=p.mat4(),this._matPool[this._matPoolNextFreeIndex]=e),this._matPoolNextFreeIndex++,e}}class ce{constructor(){this.entity=null,this.primitive=null,this.primIndex=-1,this.pickSurfacePrecision=!1,this.touchInput=!1,this._canvasPos=new Int16Array([0,0]),this._origin=new Float64Array([0,0,0]),this._direction=new Float64Array([0,0,0]),this._indices=new Int32Array(3),this._localPos=new Float64Array([0,0,0]),this._worldPos=new Float64Array([0,0,0]),this._viewPos=new Float64Array([0,0,0]),this._bary=new Float64Array([0,0,0]),this._worldNormal=new Float64Array([0,0,0]),this._uv=new Float64Array([0,0]),this.reset()}get canvasPos(){return this._gotCanvasPos?this._canvasPos:null}set canvasPos(e){e?(this._canvasPos[0]=e[0],this._canvasPos[1]=e[1],this._gotCanvasPos=!0):this._gotCanvasPos=!1}get origin(){return this._gotOrigin?this._origin:null}set origin(e){e?(this._origin[0]=e[0],this._origin[1]=e[1],this._origin[2]=e[2],this._gotOrigin=!0):this._gotOrigin=!1}get direction(){return this._gotDirection?this._direction:null}set direction(e){e?(this._direction[0]=e[0],this._direction[1]=e[1],this._direction[2]=e[2],this._gotDirection=!0):this._gotDirection=!1}get indices(){return this.entity&&this._gotIndices?this._indices:null}set indices(e){e?(this._indices[0]=e[0],this._indices[1]=e[1],this._indices[2]=e[2],this._gotIndices=!0):this._gotIndices=!1}get localPos(){return this.entity&&this._gotLocalPos?this._localPos:null}set localPos(e){e?(this._localPos[0]=e[0],this._localPos[1]=e[1],this._localPos[2]=e[2],this._gotLocalPos=!0):this._gotLocalPos=!1}get worldPos(){return this.entity&&this._gotWorldPos?this._worldPos:null}set worldPos(e){e?(this._worldPos[0]=e[0],this._worldPos[1]=e[1],this._worldPos[2]=e[2],this._gotWorldPos=!0):this._gotWorldPos=!1}get viewPos(){return this.entity&&this._gotViewPos?this._viewPos:null}set viewPos(e){e?(this._viewPos[0]=e[0],this._viewPos[1]=e[1],this._viewPos[2]=e[2],this._gotViewPos=!0):this._gotViewPos=!1}get bary(){return this.entity&&this._gotBary?this._bary:null}set bary(e){e?(this._bary[0]=e[0],this._bary[1]=e[1],this._bary[2]=e[2],this._gotBary=!0):this._gotBary=!1}get worldNormal(){return this.entity&&this._gotWorldNormal?this._worldNormal:null}set worldNormal(e){e?(this._worldNormal[0]=e[0],this._worldNormal[1]=e[1],this._worldNormal[2]=e[2],this._gotWorldNormal=!0):this._gotWorldNormal=!1}get uv(){return this.entity&&this._gotUV?this._uv:null}set uv(e){e?(this._uv[0]=e[0],this._uv[1]=e[1],this._gotUV=!0):this._gotUV=!1}reset(){this.entity=null,this.primIndex=-1,this.primitive=null,this.pickSurfacePrecision=!1,this._gotCanvasPos=!1,this._gotOrigin=!1,this._gotDirection=!1,this._gotIndices=!1,this._gotLocalPos=!1,this._gotWorldPos=!1,this._gotViewPos=!1,this._gotBary=!1,this._gotWorldNormal=!1,this._gotUV=!1,this.touchInput=!1}}class ue{constructor(e,t,s){if(this.allocated=!1,this.compiled=!1,this.handle=e.createShader(t),this.handle){if(this.allocated=!0,e.shaderSource(this.handle,s),e.compileShader(this.handle),this.compiled=e.getShaderParameter(this.handle,e.COMPILE_STATUS),!this.compiled&&!e.isContextLost()){const t=s.split("\n"),i=[];for(let e=0;e<t.length;e++)i.push(e+1+": "+t[e]+"\n");this.errors=[],this.errors.push(""),this.errors.push(e.getShaderInfoLog(this.handle)),this.errors=this.errors.concat(i.join(""))}}else this.errors=["Failed to allocate"]}destroy(){}}class Ae{constructor(e,t){this.bindTexture=function(s,i){return!!s.bind(i)&&(e.uniform1i(t,i),!0)}}}class pe{constructor(e,t){this._gl=e,this.location=t}bindArrayBuffer(e){e&&(e.bind(),this._gl.enableVertexAttribArray(this.location),this._gl.vertexAttribPointer(this.location,e.itemSize,e.itemType,e.normalized,e.stride,e.offset))}}const de=new t({});function fe(e){const t=[];let s,i;for(let r=0,o=e.length;r<o;r++)s=e[r],i=s.indexOf("/"),i>0&&"/"===s.charAt(i+1)&&(s=s.substring(0,i)),t.push(s);return t.join("\n")}function me(e){console.error(e.join("\n"))}class ge{constructor(e,t){this.id=de.addItem({}),this.source=t,this.init(e)}init(e){if(this.gl=e,this.allocated=!1,this.compiled=!1,this.linked=!1,this.validated=!1,this.errors=null,this.uniforms={},this.samplers={},this.attributes={},this._vertexShader=new ue(e,e.VERTEX_SHADER,fe(this.source.vertex)),this._fragmentShader=new ue(e,e.FRAGMENT_SHADER,fe(this.source.fragment)),!this._vertexShader.allocated)return this.errors=["Vertex shader failed to allocate"].concat(this._vertexShader.errors),void me(this.errors);if(!this._fragmentShader.allocated)return this.errors=["Fragment shader failed to allocate"].concat(this._fragmentShader.errors),void me(this.errors);if(this.allocated=!0,!this._vertexShader.compiled)return this.errors=["Vertex shader failed to compile"].concat(this._vertexShader.errors),void me(this.errors);if(!this._fragmentShader.compiled)return this.errors=["Fragment shader failed to compile"].concat(this._fragmentShader.errors),void me(this.errors);let t,s,i,r,o;if(this.compiled=!0,this.handle=e.createProgram(),!this.handle)return void(this.errors=["Failed to allocate program"]);if(e.attachShader(this.handle,this._vertexShader.handle),e.attachShader(this.handle,this._fragmentShader.handle),e.linkProgram(this.handle),this.linked=e.getProgramParameter(this.handle,e.LINK_STATUS),this.validated=!0,!this.linked||!this.validated)return this.errors=[],this.errors.push(""),this.errors.push(e.getProgramInfoLog(this.handle)),this.errors.push("\nVertex shader:\n"),this.errors=this.errors.concat(this.source.vertex),this.errors.push("\nFragment shader:\n"),this.errors=this.errors.concat(this.source.fragment),void me(this.errors);const n=e.getProgramParameter(this.handle,e.ACTIVE_UNIFORMS);for(s=0;s<n;++s)i=e.getActiveUniform(this.handle,s),i&&(r=i.name,"\0"===r[r.length-1]&&(r=r.substr(0,r.length-1)),o=e.getUniformLocation(this.handle,r),i.type===e.SAMPLER_2D||i.type===e.SAMPLER_CUBE||35682===i.type||e instanceof WebGL2RenderingContext&&(i.type===e.UNSIGNED_INT_SAMPLER_2D||i.type===e.INT_SAMPLER_2D)?this.samplers[r]=new Ae(e,o):this.uniforms[r]=o);const a=e.getProgramParameter(this.handle,e.ACTIVE_ATTRIBUTES);for(s=0;s<a;s++)t=e.getActiveAttrib(this.handle,s),t&&(o=e.getAttribLocation(this.handle,t.name),this.attributes[t.name]=new pe(e,o));this.allocated=!0}bind(){this.allocated&&this.gl.useProgram(this.handle)}getLocation(e){if(this.allocated)return this.uniforms[e]}getAttribute(e){if(this.allocated)return this.attributes[e]}bindTexture(e,t,s){if(!this.allocated)return!1;const i=this.samplers[e];return!!i&&i.bindTexture(t,s)}destroy(){this.allocated&&(de.removeItem(this.id),this.gl.deleteProgram(this.handle),this.gl.deleteShader(this._vertexShader.handle),this.gl.deleteShader(this._fragmentShader.handle),this.handle=null,this.attributes=null,this.uniforms=null,this.samplers=null,this.allocated=!1)}}class ye{constructor(e,t,s,i,r,o,n,a,l){switch(this._gl=e,this.type=t,this.allocated=!1,s.constructor){case Uint8Array:this.itemType=e.UNSIGNED_BYTE,this.itemByteSize=1;break;case Int8Array:this.itemType=e.BYTE,this.itemByteSize=1;break;case Uint16Array:this.itemType=e.UNSIGNED_SHORT,this.itemByteSize=2;break;case Int16Array:this.itemType=e.SHORT,this.itemByteSize=2;break;case Uint32Array:this.itemType=e.UNSIGNED_INT,this.itemByteSize=4;break;case Int32Array:this.itemType=e.INT,this.itemByteSize=4;break;default:this.itemType=e.FLOAT,this.itemByteSize=4}this.usage=o,this.length=0,this.dataLength=i,this.numItems=0,this.itemSize=r,this.normalized=!!n,this.stride=a||0,this.offset=l||0,this._allocate(s)}_allocate(e){if(this.allocated=!1,this._handle=this._gl.createBuffer(),!this._handle)throw"Failed to allocate WebGL ArrayBuffer";this._handle&&(this._gl.bindBuffer(this.type,this._handle),this._gl.bufferData(this.type,e.length>this.dataLength?e.slice(0,this.dataLength):e,this.usage),this._gl.bindBuffer(this.type,null),this.length=e.length,this.numItems=this.length/this.itemSize,this.allocated=!0)}setData(e,t){this.allocated&&(e.length+(t||0)>this.length?(this.destroy(),this._allocate(e)):(this._gl.bindBuffer(this.type,this._handle),t||0===t?this._gl.bufferSubData(this.type,t*this.itemByteSize,e):this._gl.bufferData(this.type,e,this.usage),this._gl.bindBuffer(this.type,null)))}bind(){this.allocated&&this._gl.bindBuffer(this.type,this._handle)}unbind(){this.allocated&&this._gl.bindBuffer(this.type,null)}destroy(){this.allocated&&(this._gl.deleteBuffer(this._handle),this._handle=null,this.allocated=!1)}}class Ee{constructor(e,t){this.scene=e,this.aabb=p.AABB3(),this.origin=p.vec3(t),this.originHash=this.origin.join(),this.numMarkers=0,this.markers={},this.markerList=[],this.markerIndices={},this.positions=[],this.indices=[],this.positionsBuf=null,this.lenPositionsBuf=0,this.indicesBuf=null,this.sectionPlanesActive=[],this.culledBySectionPlanes=!1,this.occlusionTestList=[],this.lenOcclusionTestList=0,this.pixels=[],this.aabbDirty=!1,this.markerListDirty=!1,this.positionsDirty=!0,this.occlusionTestListDirty=!1}addMarker(e){this.markers[e.id]=e,this.markerListDirty=!0,this.numMarkers++}markerWorldPosUpdated(e){if(!this.markers[e.id])return;const t=this.markerIndices[e.id];this.positions[3*t+0]=e.worldPos[0],this.positions[3*t+1]=e.worldPos[1],this.positions[3*t+2]=e.worldPos[2],this.positionsDirty=!0}removeMarker(e){delete this.markers[e.id],this.markerListDirty=!0,this.numMarkers--}update(){this.markerListDirty&&(this._buildMarkerList(),this.markerListDirty=!1,this.positionsDirty=!0,this.occlusionTestListDirty=!0),this.positionsDirty&&(this._buildPositions(),this.positionsDirty=!1,this.aabbDirty=!0,this.vbosDirty=!0),this.aabbDirty&&(this._buildAABB(),this.aabbDirty=!1),this.vbosDirty&&(this._buildVBOs(),this.vbosDirty=!1),this.occlusionTestListDirty&&this._buildOcclusionTestList(),this._updateActiveSectionPlanes()}_buildMarkerList(){for(var e in this.numMarkers=0,this.markers)this.markers.hasOwnProperty(e)&&(this.markerList[this.numMarkers]=this.markers[e],this.markerIndices[e]=this.numMarkers,this.numMarkers++);this.markerList.length=this.numMarkers}_buildPositions(){let e=0;for(let t=0;t<this.numMarkers;t++)if(this.markerList[t]){const s=this.markerList[t].worldPos;this.positions[e++]=s[0],this.positions[e++]=s[1],this.positions[e++]=s[2],this.indices[t]=t}this.positions.length=3*this.numMarkers,this.indices.length=this.numMarkers}_buildAABB(){const e=this.aabb;p.collapseAABB3(e),p.expandAABB3Points3(e,this.positions);const t=this.origin;e[0]+=t[0],e[1]+=t[1],e[2]+=t[2],e[3]+=t[0],e[4]+=t[1],e[5]+=t[2]}_buildVBOs(){if(this.positionsBuf){if(this.lenPositionsBuf===this.positions.length)return void this.positionsBuf.setData(this.positions);this.positionsBuf.destroy(),this.positionsBuf=null,this.indicesBuf.destroy(),this.indicesBuf=null}const e=this.scene.canvas.gl,t=3*this.numMarkers,s=this.numMarkers;this.positionsBuf=new ye(e,e.ARRAY_BUFFER,new Float32Array(this.positions),t,3,e.STATIC_DRAW),this.indicesBuf=new ye(e,e.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.indices),s,1,e.STATIC_DRAW),this.lenPositionsBuf=this.positions.length}_buildOcclusionTestList(){const e=this.scene.canvas,t=this.scene.camera.perspective.near,s=e.boundary,i=s[2],r=s[3];let o=0;this.lenOcclusionTestList=0;for(let e=0;e<this.numMarkers;e++){const s=this.markerList[e];if(s.viewPos[2]>-t){s._setVisible(!1);continue}const n=s.canvasPos,a=n[0],l=n[1];a+10<0||l+10<0||a-10>i||l-10>r?s._setVisible(!1):!s.entity||s.entity.visible?s.occludable?(this.occlusionTestList[this.lenOcclusionTestList++]=s,this.pixels[o++]=a,this.pixels[o++]=l):s._setVisible(!0):s._setVisible(!1)}}_updateActiveSectionPlanes(){const e=this.scene._sectionPlanesState.sectionPlanes,t=e.length;if(t>0)for(let s=0;s<t;s++){const t=e[s];if(t.active){const e=p.planeAABB3Intersect(t.dir,t.dist,this.aabb);if(-1===e)return void(this.culledBySectionPlanes=!0);const i=0===e;this.sectionPlanesActive[s]=i}else this.sectionPlanesActive[s]=!1}this.culledBySectionPlanes=!1}destroy(){this.markers={},this.markerList.length=0,this.positionsBuf&&this.positionsBuf.destroy(),this.indicesBuf&&this.indicesBuf.destroy()}}const ve=p.vec3([1,0,0]),_e=p.vec3();class Ie{constructor(e,t){this._scene=e,this._renderBufferManager=t,this._occlusionLayers={},this._occlusionLayersList=[],this._occlusionLayersListDirty=!1,this._shaderSource=null,this._program=null,this._shaderSourceHash=null,this._shaderSourceDirty=!0,this._programDirty=!1,this._markersToOcclusionLayersMap={},this._onCameraViewMatrix=e.camera.on("viewMatrix",(()=>{this._occlusionTestListDirty=!0})),this._onCameraProjMatrix=e.camera.on("projMatrix",(()=>{this._occlusionTestListDirty=!0})),this._onCanvasBoundary=e.canvas.on("boundary",(()=>{this._occlusionTestListDirty=!0}))}addMarker(e){const t=e.origin.join();let s=this._occlusionLayers[t];s||(s=new Ee(this._scene,e.origin),this._occlusionLayers[s.originHash]=s,this._occlusionLayersListDirty=!0),s.addMarker(e),this._markersToOcclusionLayersMap[e.id]=s,this._occlusionTestListDirty=!0}markerWorldPosUpdated(e){const t=this._markersToOcclusionLayersMap[e.id];if(!t)return void e.error("Marker has not been added to OcclusionTester");const s=e.origin.join();if(s!==t.originHash){1===t.numMarkers?(t.destroy(),delete this._occlusionLayers[t.originHash],this._occlusionLayersListDirty=!0):t.removeMarker(e);let i=this._occlusionLayers[s];i||(i=new Ee(this._scene,e.origin),this._occlusionLayers[s]=t,this._occlusionLayersListDirty=!0),i.addMarker(e),this._markersToOcclusionLayersMap[e.id]=i}else t.markerWorldPosUpdated(e)}removeMarker(e){const t=e.origin.join();let s=this._occlusionLayers[t];s&&(1===s.numMarkers?(s.destroy(),delete this._occlusionLayers[s.originHash],this._occlusionLayersListDirty=!0):s.removeMarker(e),delete this._markersToOcclusionLayersMap[e.id])}get needOcclusionTest(){return this._occlusionTestListDirty}bindRenderBuf(){const e=[this._scene.canvas.canvas.id,this._scene._sectionPlanesState.getHash()].join(";");if(e!==this._shaderSourceHash&&(this._shaderSourceHash=e,this._shaderSourceDirty=!0),this._shaderSourceDirty&&(this._buildShaderSource(),this._shaderSourceDirty=!1,this._programDirty=!0),this._programDirty&&(this._buildProgram(),this._programDirty=!1,this._occlusionTestListDirty=!0),this._occlusionLayersListDirty&&(this._buildOcclusionLayersList(),this._occlusionLayersListDirty=!1),this._occlusionTestListDirty){for(let e=0,t=this._occlusionLayersList.length;e<t;e++){this._occlusionLayersList[e].occlusionTestListDirty=!0}this._occlusionTestListDirty=!1}this._readPixelBuf=this._renderBufferManager.getRenderBuffer("occlusionReadPix"),this._readPixelBuf.bind(),this._readPixelBuf.clear()}_buildOcclusionLayersList(){let e=0;for(let t in this._occlusionLayers)this._occlusionLayers.hasOwnProperty(t)&&(this._occlusionLayersList[e++]=this._occlusionLayers[t]);this._occlusionLayersList.length=e}_buildShaderSource(){this._shaderSource={vertex:this._buildVertexShaderSource(),fragment:this._buildFragmentShaderSource()}}_buildVertexShaderSource(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// OcclusionTester vertex shader"),s.push("in vec3 position;"),s.push("uniform mat4 modelMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;")),t&&s.push("out vec4 vWorldPosition;"),s.push("void main(void) {"),s.push("vec4 worldPosition = vec4(position, 1.0); "),s.push("   vec4 viewPosition = viewMatrix * worldPosition;"),t&&s.push("   vWorldPosition = worldPosition;"),s.push("   vec4 clipPos = projMatrix * viewPosition;"),s.push("   gl_PointSize = 20.0;"),e.logarithmicDepthBufferEnabled?s.push("vFragDepth = 1.0 + clipPos.w;"):s.push("clipPos.z += -0.001;"),s.push("   gl_Position = clipPos;"),s.push("}"),s}_buildFragmentShaderSource(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// OcclusionTester fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;");for(let e=0;e<t.sectionPlanes.length;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("out vec4 outColor;"),i.push("void main(void) {"),s){i.push("  float dist = 0.0;");for(var r=0;r<t.sectionPlanes.length;r++)i.push("if (sectionPlaneActive"+r+") {"),i.push("   dist += clamp(dot(-sectionPlaneDir"+r+".xyz, vWorldPosition.xyz - sectionPlanePos"+r+".xyz), 0.0, 1000.0);"),i.push("}");i.push("  if (dist > 0.0) { discard; }")}return e.logarithmicDepthBufferEnabled&&i.push("gl_FragDepth = log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("   outColor = vec4(1.0, 0.0, 0.0, 1.0); "),i.push("}"),i}_buildProgram(){this._program&&this._program.destroy();const e=this._scene,t=e.canvas.gl,s=e._sectionPlanesState;if(this._program=new ge(t,this._shaderSource),this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uViewMatrix=i.getLocation("viewMatrix"),this._uProjMatrix=i.getLocation("projMatrix"),this._uSectionPlanes=[];for(let e=0,t=s.sectionPlanes.length;e<t;e++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+e),pos:i.getLocation("sectionPlanePos"+e),dir:i.getLocation("sectionPlaneDir"+e)});this._aPosition=i.getAttribute("position"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=i.getLocation("logDepthBufFC"))}drawMarkers(){const e=this._scene,t=e.canvas.gl,s=this._program,i=e._sectionPlanesState,r=e.camera,o=e.camera.project;if(s.bind(),t.uniformMatrix4fv(this._uProjMatrix,!1,r._project._state.matrix),e.logarithmicDepthBufferEnabled){const e=2/(Math.log(o.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}for(let e=0,s=this._occlusionLayersList.length;e<s;e++){const s=this._occlusionLayersList[e];if(s.update(),s.culledBySectionPlanes)continue;const o=s.origin;t.uniformMatrix4fv(this._uViewMatrix,!1,j(r.viewMatrix,o));const n=i.sectionPlanes.length;if(n>0){const e=i.sectionPlanes;for(let i=0;i<n;i++){const r=this._uSectionPlanes[i];if(r){const n=s.sectionPlanesActive[i];if(t.uniform1i(r.active,n?1:0),n){const s=e[i];t.uniform3fv(r.pos,W(s.dist,s.dir,o,_e)),t.uniform3fv(r.dir,s.dir)}}}}this._aPosition.bindArrayBuffer(s.positionsBuf);const a=s.indicesBuf;a.bind(),t.drawElements(t.POINTS,a.numItems,a.itemType,0)}}doOcclusionTest(){{const e=this._scene.canvas.resolutionScale,t=255*ve[0],s=255*ve[1],i=255*ve[2];for(let r=0,o=this._occlusionLayersList.length;r<o;r++){const o=this._occlusionLayersList[r];for(let r=0;r<o.lenOcclusionTestList;r++){const n=o.occlusionTestList[r],a=2*r,l=this._readPixelBuf.read(Math.round(o.pixels[a]*e),Math.round(o.pixels[a+1]*e)),h=l[0]===t&&l[1]===s&&l[2]===i;n._setVisible(h)}}}}unbindRenderBuf(){this._readPixelBuf.unbind()}destroy(){if(!this.destroyed){for(let e=0,t=this._occlusionLayersList.length;e<t;e++){this._occlusionLayersList[e].destroy()}this._program&&this._program.destroy(),this._scene.camera.off(this._onCameraViewMatrix),this._scene.camera.off(this._onCameraProjMatrix),this._scene.canvas.off(this._onCanvasBoundary),this.destroyed=!0}}}const Te=p.vec2();class Pe{constructor(e){this._scene=e,this._numSamples=null,this._program=null,this._programError=!1,this._aPosition=null,this._aUV=null,this._uDepthTexture="uDepthTexture",this._uCameraNear=null,this._uCameraFar=null,this._uCameraProjectionMatrix=null,this._uCameraInverseProjectionMatrix=null,this._uScale=null,this._uIntensity=null,this._uBias=null,this._uKernelRadius=null,this._uMinResolution=null,this._uRandomSeed=null,this._uvBuf=null,this._positionsBuf=null,this._indicesBuf=null}render(e){if(this._build(),this._programError)return;this._getInverseProjectMat||(this._getInverseProjectMat=(()=>{let e=!0;this._scene.camera.on("projMatrix",(function(){e=!0}));const t=p.mat4();return()=>(e&&p.inverseMat4(i.camera.projMatrix,t),t)})());const t=this._scene.canvas.gl,s=this._program,i=this._scene,r=i.sao,o=t.drawingBufferWidth,n=t.drawingBufferHeight,a=i.camera.project._state,l=a.near,h=a.far,c=a.matrix,u=this._getInverseProjectMat(),A=Math.random(),d="perspective"===i.camera.projection;Te[0]=o,Te[1]=n,t.viewport(0,0,o,n),t.clearColor(0,0,0,1),t.disable(t.DEPTH_TEST),t.disable(t.BLEND),t.frontFace(t.CCW),t.clear(t.COLOR_BUFFER_BIT),s.bind(),t.uniform1f(this._uCameraNear,l),t.uniform1f(this._uCameraFar,h),t.uniformMatrix4fv(this._uCameraProjectionMatrix,!1,c),t.uniformMatrix4fv(this._uCameraInverseProjectionMatrix,!1,u),t.uniform1i(this._uPerspective,d),t.uniform1f(this._uScale,r.scale*(h/5)),t.uniform1f(this._uIntensity,r.intensity),t.uniform1f(this._uBias,r.bias),t.uniform1f(this._uKernelRadius,r.kernelRadius),t.uniform1f(this._uMinResolution,r.minResolution),t.uniform2fv(this._uViewport,Te),t.uniform1f(this._uRandomSeed,A);const f=e.getDepthTexture();s.bindTexture(this._uDepthTexture,f,0),this._aUV.bindArrayBuffer(this._uvBuf),this._aPosition.bindArrayBuffer(this._positionsBuf),this._indicesBuf.bind(),t.drawElements(t.TRIANGLES,this._indicesBuf.numItems,this._indicesBuf.itemType,0)}_build(){let e=!1;const t=this._scene.sao;if(t.numSamples!==this._numSamples&&(this._numSamples=Math.floor(t.numSamples),e=!0),!e)return;const s=this._scene.canvas.gl;if(this._program&&(this._program.destroy(),this._program=null),this._program=new ge(s,{vertex:["#version 300 es\n                    precision highp float;\n                    precision highp int;\n                    \n                    in vec3 aPosition;\n                    in vec2 aUV;            \n                    \n                    out vec2 vUV;\n                    \n                    void main () {\n                        gl_Position = vec4(aPosition, 1.0);\n                        vUV = aUV;\n                    }"],fragment:[`#version 300 es      \n                precision highp float;\n                precision highp int;           \n                \n                #define NORMAL_TEXTURE 0\n                #define PI 3.14159265359\n                #define PI2 6.28318530718\n                #define EPSILON 1e-6\n                #define NUM_SAMPLES ${this._numSamples}\n                #define NUM_RINGS 4              \n            \n                in vec2        vUV;\n            \n                uniform sampler2D   uDepthTexture;\n               \n                uniform float       uCameraNear;\n                uniform float       uCameraFar;\n                uniform mat4        uProjectMatrix;\n                uniform mat4        uInverseProjectMatrix;\n                \n                uniform bool        uPerspective;\n\n                uniform float       uScale;\n                uniform float       uIntensity;\n                uniform float       uBias;\n                uniform float       uKernelRadius;\n                uniform float       uMinResolution;\n                uniform vec2        uViewport;\n                uniform float       uRandomSeed;\n\n                float pow2( const in float x ) { return x*x; }\n                \n                highp float rand( const in vec2 uv ) {\n                    const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n                    highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n                    return fract(sin(sn) * c);\n                }\n\n                vec3 packNormalToRGB( const in vec3 normal ) {\n                    return normalize( normal ) * 0.5 + 0.5;\n                }\n\n                vec3 unpackRGBToNormal( const in vec3 rgb ) {\n                    return 2.0 * rgb.xyz - 1.0;\n                }\n\n                const float packUpscale = 256. / 255.;\n                const float unpackDownScale = 255. / 256.; \n\n                const vec3 packFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\n                const vec4 unPackFactors = unpackDownScale / vec4( packFactors, 1. );   \n\n                const float shiftRights = 1. / 256.;\n\n                vec4 packFloatToRGBA( const in float v ) {\n                    vec4 r = vec4( fract( v * packFactors ), v );\n                    r.yzw -= r.xyz * shiftRights; \n                    return r * packUpscale;\n                }\n\n                float unpackRGBAToFloat( const in vec4 v ) {                   \n                    return dot( floor( v * 255.0 + 0.5 ) / 255.0, unPackFactors );\n                }\n                \n                float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n                    return ( near * far ) / ( ( far - near ) * invClipZ - far );\n                }\n\n                float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n                    return linearClipZ * ( near - far ) - near;\n                }\n                \n                float getDepth( const in vec2 screenPosition ) {\n                    return vec4(texture(uDepthTexture, screenPosition)).r;\n                }\n\n                float getViewZ( const in float depth ) {\n                     if (uPerspective) {\n                         return perspectiveDepthToViewZ( depth, uCameraNear, uCameraFar );\n                     } else {\n                        return orthographicDepthToViewZ( depth, uCameraNear, uCameraFar );\n                     }\n                }\n\n                vec3 getViewPos( const in vec2 screenPos, const in float depth, const in float viewZ ) {\n                \tfloat clipW = uProjectMatrix[2][3] * viewZ + uProjectMatrix[3][3];\n                \tvec4 clipPosition = vec4( ( vec3( screenPos, depth ) - 0.5 ) * 2.0, 1.0 );\n                \tclipPosition *= clipW; \n                \treturn ( uInverseProjectMatrix * clipPosition ).xyz;\n                }\n\n                vec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPos ) {               \n                    return normalize( cross( dFdx( viewPosition ), dFdy( viewPosition ) ) );\n                }\n\n                float scaleDividedByCameraFar;\n                float minResolutionMultipliedByCameraFar;\n\n                float getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {\n                \tvec3 viewDelta = sampleViewPosition - centerViewPosition;\n                \tfloat viewDistance = length( viewDelta );\n                \tfloat scaledScreenDistance = scaleDividedByCameraFar * viewDistance;\n                \treturn max(0.0, (dot(centerViewNormal, viewDelta) - minResolutionMultipliedByCameraFar) / scaledScreenDistance - uBias) / (1.0 + pow2( scaledScreenDistance ) );\n                }\n\n                const float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );\n                const float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );\n\n                float getAmbientOcclusion( const in vec3 centerViewPosition ) {\n            \n                \tscaleDividedByCameraFar = uScale / uCameraFar;\n                \tminResolutionMultipliedByCameraFar = uMinResolution * uCameraFar;\n                \tvec3 centerViewNormal = getViewNormal( centerViewPosition, vUV );\n\n                \tfloat angle = rand( vUV + uRandomSeed ) * PI2;\n                \tvec2 radius = vec2( uKernelRadius * INV_NUM_SAMPLES ) / uViewport;\n                \tvec2 radiusStep = radius;\n\n                \tfloat occlusionSum = 0.0;\n                \tfloat weightSum = 0.0;\n\n                \tfor( int i = 0; i < NUM_SAMPLES; i ++ ) {\n                \t\tvec2 sampleUv = vUV + vec2( cos( angle ), sin( angle ) ) * radius;\n                \t\tradius += radiusStep;\n                \t\tangle += ANGLE_STEP;\n\n                \t\tfloat sampleDepth = getDepth( sampleUv );\n                \t\tif( sampleDepth >= ( 1.0 - EPSILON ) ) {\n                \t\t\tcontinue;\n                \t\t}\n\n                \t\tfloat sampleViewZ = getViewZ( sampleDepth );\n                \t\tvec3 sampleViewPosition = getViewPos( sampleUv, sampleDepth, sampleViewZ );\n                \t\tocclusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );\n                \t\tweightSum += 1.0;\n                \t}\n\n                \tif( weightSum == 0.0 ) discard;\n\n                \treturn occlusionSum * ( uIntensity / weightSum );\n                }\n\n                out vec4 outColor;\n   \n                void main() {\n                \n                \tfloat centerDepth = getDepth( vUV );\n                \t\n                \tif( centerDepth >= ( 1.0 - EPSILON ) ) {\n                \t\tdiscard;\n                \t}\n\n                \tfloat centerViewZ = getViewZ( centerDepth );\n                \tvec3 viewPosition = getViewPos( vUV, centerDepth, centerViewZ );\n\n                \tfloat ambientOcclusion = getAmbientOcclusion( viewPosition );\n                \n                \toutColor = packFloatToRGBA(  1.0- ambientOcclusion );\n                }`]}),this._program.errors)return console.error(this._program.errors.join("\n")),void(this._programError=!0);const i=new Float32Array([1,1,0,1,0,0,1,0]),r=new Float32Array([1,1,0,-1,1,0,-1,-1,0,1,-1,0]),o=new Uint32Array([0,1,2,0,2,3]);this._positionsBuf=new ye(s,s.ARRAY_BUFFER,r,r.length,3,s.STATIC_DRAW),this._uvBuf=new ye(s,s.ARRAY_BUFFER,i,i.length,2,s.STATIC_DRAW),this._indicesBuf=new ye(s,s.ELEMENT_ARRAY_BUFFER,o,o.length,1,s.STATIC_DRAW),this._program.bind(),this._uCameraNear=this._program.getLocation("uCameraNear"),this._uCameraFar=this._program.getLocation("uCameraFar"),this._uCameraProjectionMatrix=this._program.getLocation("uProjectMatrix"),this._uCameraInverseProjectionMatrix=this._program.getLocation("uInverseProjectMatrix"),this._uPerspective=this._program.getLocation("uPerspective"),this._uScale=this._program.getLocation("uScale"),this._uIntensity=this._program.getLocation("uIntensity"),this._uBias=this._program.getLocation("uBias"),this._uKernelRadius=this._program.getLocation("uKernelRadius"),this._uMinResolution=this._program.getLocation("uMinResolution"),this._uViewport=this._program.getLocation("uViewport"),this._uRandomSeed=this._program.getLocation("uRandomSeed"),this._aPosition=this._program.getAttribute("aPosition"),this._aUV=this._program.getAttribute("aUV"),this._dirty=!1}destroy(){this._program&&(this._program.destroy(),this._program=null)}}const De=new Float32Array(Oe(17,[0,1])),be=new Float32Array(Oe(17,[1,0])),Re=new Float32Array(function(e,t){const s=[];for(let i=0;i<=e;i++)s.push(Ne(i,t));return s}(17,4)),Ce=new Float32Array(2);class xe{constructor(e){this._scene=e,this._program=null,this._programError=!1,this._aPosition=null,this._aUV=null,this._uDepthTexture="uDepthTexture",this._uOcclusionTexture="uOcclusionTexture",this._uViewport=null,this._uCameraNear=null,this._uCameraFar=null,this._uCameraProjectionMatrix=null,this._uCameraInverseProjectionMatrix=null,this._uvBuf=null,this._positionsBuf=null,this._indicesBuf=null,this.init()}init(){const e=this._scene.canvas.gl;if(this._program=new ge(e,{vertex:["#version 300 es\n                precision highp float;\n                precision highp int;\n                    \n                in vec3 aPosition;\n                in vec2 aUV;\n                uniform vec2 uViewport;\n                out vec2 vUV;\n                out vec2 vInvSize;\n                void main () {\n                    vUV = aUV;\n                    vInvSize = 1.0 / uViewport;\n                    gl_Position = vec4(aPosition, 1.0);\n                }"],fragment:["#version 300 es\n                precision highp float;\n                precision highp int;\n                    \n                #define PI 3.14159265359\n                #define PI2 6.28318530718\n                #define EPSILON 1e-6\n\n                #define KERNEL_RADIUS 16\n\n                in vec2        vUV;\n                in vec2        vInvSize;\n            \n                uniform sampler2D   uDepthTexture;\n                uniform sampler2D   uOcclusionTexture;              \n               \n                uniform float       uCameraNear;\n                uniform float       uCameraFar;               \n                uniform float       uDepthCutoff;\n\n                uniform vec2        uSampleOffsets[ KERNEL_RADIUS + 1 ];\n                uniform float       uSampleWeights[ KERNEL_RADIUS + 1 ];\n\n                const float         unpackDownscale = 255. / 256.; \n\n                const vec3          packFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\n                const vec4          unpackFactors = unpackDownscale / vec4( packFactors, 1. );   \n\n                const float packUpscale = 256. / 255.;\n       \n                const float shiftRights = 1. / 256.;\n                \n                float unpackRGBAToFloat( const in vec4 v ) {\n                    return dot( floor( v * 255.0 + 0.5 ) / 255.0, unpackFactors );\n                }               \n\n                vec4 packFloatToRGBA( const in float v ) {\n                    vec4 r = vec4( fract( v * packFactors ), v );\n                    r.yzw -= r.xyz * shiftRights; \n                    return r * packUpscale;\n                }\n\n                float viewZToOrthographicDepth( const in float viewZ) {\n                    return ( viewZ + uCameraNear ) / ( uCameraNear - uCameraFar );\n                }\n              \n                float orthographicDepthToViewZ( const in float linearClipZ) {\n                    return linearClipZ * ( uCameraNear - uCameraFar ) - uCameraNear;\n                }\n\n                float viewZToPerspectiveDepth( const in float viewZ) {\n                    return (( uCameraNear + viewZ ) * uCameraFar ) / (( uCameraFar - uCameraNear ) * viewZ );\n                }\n                \n                float perspectiveDepthToViewZ( const in float invClipZ) {\n                    return ( uCameraNear * uCameraFar ) / ( ( uCameraFar - uCameraNear ) * invClipZ - uCameraFar );\n                }\n\n                float getDepth( const in vec2 screenPosition ) {\n                    return vec4(texture(uDepthTexture, screenPosition)).r;\n                }\n\n                float getViewZ( const in float depth ) {\n                     return perspectiveDepthToViewZ( depth );\n                }\n\n                out vec4 outColor;\n        \n                void main() {\n                \n                    float depth = getDepth( vUV );\n                    if( depth >= ( 1.0 - EPSILON ) ) {\n                        discard;\n                    }\n\n                    float centerViewZ = -getViewZ( depth );\n                    bool rBreak = false;\n                    bool lBreak = false;\n\n                    float weightSum = uSampleWeights[0];\n                    float occlusionSum = unpackRGBAToFloat(texture( uOcclusionTexture, vUV )) * weightSum;\n\n                    for( int i = 1; i <= KERNEL_RADIUS; i ++ ) {\n\n                        float sampleWeight = uSampleWeights[i];\n                        vec2 sampleUVOffset = uSampleOffsets[i] * vInvSize;\n\n                        vec2 sampleUV = vUV + sampleUVOffset;\n                        float viewZ = -getViewZ( getDepth( sampleUV ) );\n\n                        if( abs( viewZ - centerViewZ ) > uDepthCutoff ) {\n                            rBreak = true;\n                        }\n\n                        if( ! rBreak ) {\n                            occlusionSum += unpackRGBAToFloat(texture( uOcclusionTexture, sampleUV )) * sampleWeight;\n                            weightSum += sampleWeight;\n                        }\n\n                        sampleUV = vUV - sampleUVOffset;\n                        viewZ = -getViewZ( getDepth( sampleUV ) );\n\n                        if( abs( viewZ - centerViewZ ) > uDepthCutoff ) {\n                            lBreak = true;\n                        }\n\n                        if( ! lBreak ) {\n                            occlusionSum += unpackRGBAToFloat(texture( uOcclusionTexture, sampleUV )) * sampleWeight;\n                            weightSum += sampleWeight;\n                        }\n                    }\n\n                    outColor = packFloatToRGBA(occlusionSum / weightSum);\n                }"]}),this._program.errors)return console.error(this._program.errors.join("\n")),void(this._programError=!0);const t=new Float32Array([1,1,0,1,0,0,1,0]),s=new Float32Array([1,1,0,-1,1,0,-1,-1,0,1,-1,0]),i=new Uint32Array([0,1,2,0,2,3]);this._positionsBuf=new ye(e,e.ARRAY_BUFFER,s,s.length,3,e.STATIC_DRAW),this._uvBuf=new ye(e,e.ARRAY_BUFFER,t,t.length,2,e.STATIC_DRAW),this._indicesBuf=new ye(e,e.ELEMENT_ARRAY_BUFFER,i,i.length,1,e.STATIC_DRAW),this._program.bind(),this._uViewport=this._program.getLocation("uViewport"),this._uCameraNear=this._program.getLocation("uCameraNear"),this._uCameraFar=this._program.getLocation("uCameraFar"),this._uDepthCutoff=this._program.getLocation("uDepthCutoff"),this._uSampleOffsets=e.getUniformLocation(this._program.handle,"uSampleOffsets"),this._uSampleWeights=e.getUniformLocation(this._program.handle,"uSampleWeights"),this._aPosition=this._program.getAttribute("aPosition"),this._aUV=this._program.getAttribute("aUV")}render(e,t,s){if(this._programError)return;this._getInverseProjectMat||(this._getInverseProjectMat=(()=>{let e=!0;this._scene.camera.on("projMatrix",(function(){e=!0}));const t=p.mat4();return()=>(e&&p.inverseMat4(o.camera.projMatrix,t),t)})());const i=this._scene.canvas.gl,r=this._program,o=this._scene,n=i.drawingBufferWidth,a=i.drawingBufferHeight,l=o.camera.project._state,h=l.near,c=l.far;i.viewport(0,0,n,a),i.clearColor(0,0,0,1),i.enable(i.DEPTH_TEST),i.disable(i.BLEND),i.frontFace(i.CCW),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),r.bind(),Ce[0]=n,Ce[1]=a,i.uniform2fv(this._uViewport,Ce),i.uniform1f(this._uCameraNear,h),i.uniform1f(this._uCameraFar,c),i.uniform1f(this._uDepthCutoff,.01),0===s?i.uniform2fv(this._uSampleOffsets,be):i.uniform2fv(this._uSampleOffsets,De),i.uniform1fv(this._uSampleWeights,Re);const u=e.getDepthTexture(),A=t.getTexture();r.bindTexture(this._uDepthTexture,u,0),r.bindTexture(this._uOcclusionTexture,A,1),this._aUV.bindArrayBuffer(this._uvBuf),this._aPosition.bindArrayBuffer(this._positionsBuf),this._indicesBuf.bind(),i.drawElements(i.TRIANGLES,this._indicesBuf.numItems,this._indicesBuf.itemType,0)}destroy(){this._program.destroy()}}function Ne(e,t){return Math.exp(-e*e/(t*t*2))/(Math.sqrt(2*Math.PI)*t)}function Oe(e,t){const s=[];for(let i=0;i<=e;i++)s.push(t[0]*i),s.push(t[1]*i);return s}class Se{constructor(e,t,s){s=s||{},this.gl=t,this.allocated=!1,this.canvas=e,this.buffer=null,this.bound=!1,this.size=s.size,this._hasDepthTexture=!!s.depthTexture}setSize(e){this.size=e}webglContextRestored(e){this.gl=e,this.buffer=null,this.allocated=!1,this.bound=!1}bind(e=null){if(this._touch(e),this.bound)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.buffer.framebuf),this.bound=!0}_touch(e=null){let t,s;const i=this.gl;if(this.size?(t=this.size[0],s=this.size[1]):(t=i.drawingBufferWidth,s=i.drawingBufferHeight),this.buffer){if(this.buffer.width===t&&this.buffer.height===s)return;i.deleteTexture(this.buffer.texture),i.deleteFramebuffer(this.buffer.framebuf),i.deleteRenderbuffer(this.buffer.renderbuf)}const r=i.createTexture();let o;i.bindTexture(i.TEXTURE_2D,r),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),e?i.texStorage2D(i.TEXTURE_2D,1,e,t,s):i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t,s,0,i.RGBA,i.UNSIGNED_BYTE,null),this._hasDepthTexture&&(o=i.createTexture(),i.bindTexture(i.TEXTURE_2D,o),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_COMPONENT32F,t,s,0,i.DEPTH_COMPONENT,i.FLOAT,null));const n=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,n),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_COMPONENT32F,t,s);const a=i.createFramebuffer();if(i.bindFramebuffer(i.FRAMEBUFFER,a),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,r,0),this._hasDepthTexture?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,o,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,n),i.bindTexture(i.TEXTURE_2D,null),i.bindRenderbuffer(i.RENDERBUFFER,null),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.FRAMEBUFFER,a),!i.isFramebuffer(a))throw"Invalid framebuffer";i.bindFramebuffer(i.FRAMEBUFFER,null);const l=i.checkFramebufferStatus(i.FRAMEBUFFER);switch(l){case i.FRAMEBUFFER_COMPLETE:break;case i.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:throw"Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case i.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:throw"Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case i.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:throw"Incomplete framebuffer: FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case i.FRAMEBUFFER_UNSUPPORTED:throw"Incomplete framebuffer: FRAMEBUFFER_UNSUPPORTED";default:throw"Incomplete framebuffer: "+l}this.buffer={framebuf:a,renderbuf:n,texture:r,depthTexture:o,width:t,height:s},this.bound=!1}clear(){if(!this.bound)throw"Render buffer not bound";const e=this.gl;e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}read(e,t,s=null,i=null,r=Uint8Array,o=4){const n=e,a=(this.buffer.height||this.gl.drawingBufferHeight)-t,l=new r(o),h=this.gl;return h.readPixels(n,a,1,1,s||h.RGBA,i||h.UNSIGNED_BYTE,l,0),l}readArray(e=null,t=null,s=Uint8Array,i=4){const r=new s(this.buffer.width*this.buffer.height*i),o=this.gl;return o.readPixels(0,0,this.buffer.width,this.buffer.height,e||o.RGBA,t||o.UNSIGNED_BYTE,r,0),r}readImageAsCanvas(){const e=this.gl,t=this._getImageDataCache(),s=t.pixelData,i=t.canvas,r=t.imageData,o=t.context;e.readPixels(0,0,this.buffer.width,this.buffer.height,e.RGBA,e.UNSIGNED_BYTE,s);const n=this.buffer.width,a=this.buffer.height,l=a/2|0,h=4*n,c=new Uint8Array(4*n);for(let e=0;e<l;++e){const t=e*h,i=(a-e-1)*h;c.set(s.subarray(t,t+h)),s.copyWithin(t,i,i+h),s.set(c,i)}return r.data.set(s),o.putImageData(r,0,0),i}readImage(e){const t=this.gl,s=this._getImageDataCache(),i=s.pixelData,r=s.canvas,o=s.imageData,n=s.context,{width:a,height:l}=this.buffer;t.readPixels(0,0,a,l,t.RGBA,t.UNSIGNED_BYTE,i),o.data.set(i),n.putImageData(o,0,0),n.save(),n.globalCompositeOperation="copy",n.scale(1,-1),n.drawImage(r,0,-l,a,l),n.restore();let h=e.format||"png";return"jpeg"!==h&&"png"!==h&&"bmp"!==h&&(console.error("Unsupported image format: '"+h+"' - supported types are 'jpeg', 'bmp' and 'png' - defaulting to 'png'"),h="png"),r.toDataURL(`image/${h}`)}_getImageDataCache(e=Uint8Array,t=4){const s=this.buffer.width,i=this.buffer.height;let r=this._imageDataCache;if(r&&(r.width===s&&r.height===i||(this._imageDataCache=null,r=null)),!r){const o=document.createElement("canvas"),n=o.getContext("2d");o.width=s,o.height=i,r={pixelData:new e(s*i*t),canvas:o,context:n,imageData:n.createImageData(s,i),width:s,height:i},this._imageDataCache=r}return r.context.resetTransform(),r}unbind(){const e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null),this.bound=!1}getTexture(){const e=this;return this._texture||(this._texture={renderBuffer:this,bind:function(t){return!(!e.buffer||!e.buffer.texture)&&(e.gl.activeTexture(e.gl["TEXTURE"+t]),e.gl.bindTexture(e.gl.TEXTURE_2D,e.buffer.texture),!0)},unbind:function(t){e.buffer&&e.buffer.texture&&(e.gl.activeTexture(e.gl["TEXTURE"+t]),e.gl.bindTexture(e.gl.TEXTURE_2D,null))}})}hasDepthTexture(){return this._hasDepthTexture}getDepthTexture(){if(!this._hasDepthTexture)return null;const e=this;return this._depthTexture||(this._dethTexture={renderBuffer:this,bind:function(t){return!(!e.buffer||!e.buffer.depthTexture)&&(e.gl.activeTexture(e.gl["TEXTURE"+t]),e.gl.bindTexture(e.gl.TEXTURE_2D,e.buffer.depthTexture),!0)},unbind:function(t){e.buffer&&e.buffer.depthTexture&&(e.gl.activeTexture(e.gl["TEXTURE"+t]),e.gl.bindTexture(e.gl.TEXTURE_2D,null))}})}destroy(){if(this.allocated){const e=this.gl;e.deleteTexture(this.buffer.texture),e.deleteTexture(this.buffer.depthTexture),e.deleteFramebuffer(this.buffer.framebuf),e.deleteRenderbuffer(this.buffer.renderbuf),this.allocated=!1,this.buffer=null,this.bound=!1}this._imageDataCache=null,this._texture=null,this._depthTexture=null}}class we{constructor(e){this.scene=e,this._renderBuffersBasic={},this._renderBuffersScaled={}}getRenderBuffer(e,t){const s=1===this.scene.canvas.resolutionScale?this._renderBuffersBasic:this._renderBuffersScaled;let i=s[e];return i||(i=new Se(this.scene.canvas.canvas,this.scene.canvas.gl,t),s[e]=i),i}destroy(){for(let e in this._renderBuffersBasic)this._renderBuffersBasic[e].destroy();for(let e in this._renderBuffersScaled)this._renderBuffersScaled[e].destroy()}}function Me(e,t){if(void 0===e._cachedExtensions&&(e._cachedExtensions={}),void 0!==e._cachedExtensions[t])return e._cachedExtensions[t];let s;switch(t){case"WEBGL_depth_texture":s=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=e.getExtension(t)}return e._cachedExtensions[t]=s,s}var Be=function(){const e=[],t=[],s=[],i=[],r=[];let o=0;const n=new Uint16Array(3),a=new Uint16Array(3),l=new Uint16Array(3),h=p.vec3(),c=p.vec3(),u=p.vec3(),A=p.vec3(),d=p.vec3(),f=p.vec3(),m=p.vec3();return function(g,y,E,v){!function(r,o){const n={};let a,l,h,c;const u=Math.pow(10,4);let A,p,d=0;for(A=0,p=r.length;A<p;A+=3)a=r[A],l=r[A+1],h=r[A+2],c=Math.round(a*u)+"_"+Math.round(l*u)+"_"+Math.round(h*u),void 0===n[c]&&(n[c]=d/3,e[d++]=a,e[d++]=l,e[d++]=h),t[A/3]=n[c];for(A=0,p=o.length;A<p;A++)i[A]=t[o[A]],s[i[A]]=o[A]}(g,y),function(t,s){o=0;for(let g=0,y=t;g<y;g+=3){const t=3*i[g],y=3*i[g+1],E=3*i[g+2];s?(n[0]=e[t],n[1]=e[t+1],n[2]=e[t+2],a[0]=e[y],a[1]=e[y+1],a[2]=e[y+2],l[0]=e[E],l[1]=e[E+1],l[2]=e[E+2],p.decompressPosition(n,s,h),p.decompressPosition(a,s,c),p.decompressPosition(l,s,u)):(h[0]=e[t],h[1]=e[t+1],h[2]=e[t+2],c[0]=e[y],c[1]=e[y+1],c[2]=e[y+2],u[0]=e[E],u[1]=e[E+1],u[2]=e[E+2]),p.subVec3(u,c,A),p.subVec3(h,c,d),p.cross3Vec3(A,d,f),p.normalizeVec3(f,m);const v=r[o]||(r[o]={normal:p.vec3()});v.normal[0]=m[0],v.normal[1]=m[1],v.normal[2]=m[2],o++}}(y.length,E);const _=[],I=Math.cos(p.DEGTORAD*v),T={};let P,D,b,R,C,x,N,O,S,w,M,B=!1;for(let e=0,t=y.length;e<t;e+=3){const t=e/3;for(let s=0;s<3;s++)P=i[e+s],D=i[e+(s+1)%3],b=Math.min(P,D),R=Math.max(P,D),C=b+","+R,void 0===T[C]?T[C]={index1:b,index2:R,face1:t,face2:void 0}:T[C].face2=t}for(C in T)x=T[C],void 0!==x.face2&&(N=r[x.face1].normal,O=r[x.face2].normal,S=p.dotVec3(N,O),S>I)||(w=s[x.index1],M=s[x.index2],(!B&&w>65535||M>65535)&&(B=!0),_.push(w),_.push(M));return B?new Uint32Array(_):new Uint16Array(_)}}();class Fe{constructor(e,t,s,i,r=null,o=0){this.model=e,this.object=null,this.parent=null,this.id=t,this.pickId=this.model.scene._renderer.getPickID(this),this.aabb=p.AABB3(),this._layer=r,this._portionId=o,this._color=[s[0],s[1],s[2],i],this._colorize=[s[0],s[1],s[2],i],this._colorizing=!1,this._transparent=i<255,this.numTriangles=0,this.origin=null}_finalize(e){this._layer.initFlags(this._portionId,e,this._transparent)}_finalize2(){this._layer.flushInitFlags&&this._layer.flushInitFlags()}_setVisible(e){this._layer.setVisible(this._portionId,e,this._transparent)}_setColor(e){this._color[0]=e[0],this._color[1]=e[1],this._color[2]=e[2],this._colorizing||this._layer.setColor(this._portionId,this._color,!1)}_setColorize(e){e?(this._colorize[0]=e[0],this._colorize[1]=e[1],this._colorize[2]=e[2],this._layer.setColor(this._portionId,this._colorize,false),this._colorizing=!0):(this._layer.setColor(this._portionId,this._color,false),this._colorizing=!1)}_setOpacity(e,t){const s=e<255,i=this._transparent!==s;this._color[3]=e,this._colorize[3]=e,this._transparent=s,this._colorizing?this._layer.setColor(this._portionId,this._colorize):this._layer.setColor(this._portionId,this._color),i&&this._layer.setTransparent(this._portionId,t,s)}_setOffset(e){this._layer.setOffset(this._portionId,e)}_setHighlighted(e){this._layer.setHighlighted(this._portionId,e,this._transparent)}_setXRayed(e){this._layer.setXRayed(this._portionId,e,this._transparent)}_setSelected(e){this._layer.setSelected(this._portionId,e,this._transparent)}_setEdges(e){this._layer.setEdges(this._portionId,e,this._transparent)}_setClippable(e){this._layer.setClippable(this._portionId,e,this._transparent)}_setCollidable(e){this._layer.setCollidable(this._portionId,e)}_setPickable(e){this._layer.setPickable(this._portionId,e,this._transparent)}_setCulled(e){this._layer.setCulled(this._portionId,e,this._transparent)}canPickTriangle(){return!1}drawPickTriangles(e,t){}pickTriangleSurface(e){}precisionRayPickSurface(e,t,s,i){return!!this._layer.precisionRayPickSurface&&this._layer.precisionRayPickSurface(this._portionId,e,t,s,i)}canPickWorldPos(){return!0}drawPickDepths(e){this.model.drawPickDepths(e)}drawPickNormals(e){this.model.drawPickNormals(e)}delegatePickedEntity(){return this.parent}_destroy(){this.model.scene._renderer.putPickID(this.pickId)}}const Le=0,Ue=1,He=2,Ge=3,Ve=4,ke=5,je=6,Qe=7,We=8,ze=9,Ke=10,Ye=11,Xe=new t({});class Ze{constructor(e){this.id=Xe.addItem({});for(const t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}destroy(){Xe.removeItem(this.id)}}const qe=function(){const e=p.mat4(),t=p.mat4();return function(s,i){i=i||p.mat4();const r=s[0],o=s[1],n=s[2],a=s[3]-r,l=s[4]-o,h=s[5]-n,c=65535;return p.identityMat4(e),p.translationMat4v(s,e),p.identityMat4(t),p.scalingMat4v([a/c,l/c,h/c],t),p.mulMat4(e,t,i),i}}();var Je=function(){const e=p.mat4(),t=p.mat4();return function(s,i,r){const o=new Uint16Array(s.length),n=new Float32Array([r[0]!==i[0]?65535/(r[0]-i[0]):0,r[1]!==i[1]?65535/(r[1]-i[1]):0,r[2]!==i[2]?65535/(r[2]-i[2]):0]);let a;for(a=0;a<s.length;a+=3)o[a+0]=Math.max(0,Math.min(65535,Math.floor((s[a+0]-i[0])*n[0]))),o[a+1]=Math.max(0,Math.min(65535,Math.floor((s[a+1]-i[1])*n[1]))),o[a+2]=Math.max(0,Math.min(65535,Math.floor((s[a+2]-i[2])*n[2])));p.identityMat4(e),p.translationMat4v(i,e),p.identityMat4(t),p.scalingMat4v([(r[0]-i[0])/65535,(r[1]-i[1])/65535,(r[2]-i[2])/65535],t);return{quantized:o,decodeMatrix:p.mulMat4(e,t,p.identityMat4())}}}();var $e=function(){const e=p.mat3(),t=p.mat3();return function(s,i,r){const o=new Uint16Array(s.length),n=new Float32Array([65535/(r[0]-i[0]),65535/(r[1]-i[1])]);let a;for(a=0;a<s.length;a+=2)o[a+0]=Math.max(0,Math.min(65535,Math.floor((s[a+0]-i[0])*n[0]))),o[a+1]=Math.max(0,Math.min(65535,Math.floor((s[a+1]-i[1])*n[1])));p.identityMat3(e),p.translationMat3v(i,e),p.identityMat3(t),p.scalingMat3v([(r[0]-i[0])/65535,(r[1]-i[1])/65535],t);return{quantized:o,decodeMatrix:p.mulMat3(e,t,p.identityMat3())}}}();function et(e,t,s,i){let r=e[t]/(Math.abs(e[t])+Math.abs(e[t+1])+Math.abs(e[t+2])),o=e[t+1]/(Math.abs(e[t])+Math.abs(e[t+1])+Math.abs(e[t+2]));if(e[t+2]<0){let e=(1-Math.abs(o))*(r>=0?1:-1),t=(1-Math.abs(r))*(o>=0?1:-1);r=e,o=t}return new Int8Array([Math[s](127.5*r+(r<0?-1:0)),Math[i](127.5*o+(o<0?-1:0))])}function tt(e){let t=e[0],s=e[1];t/=t<0?127:128,s/=s<0?127:128;const i=1-Math.abs(t)-Math.abs(s);i<0&&(t=(1-Math.abs(s))*(t>=0?1:-1),s=(1-Math.abs(t))*(s>=0?1:-1));const r=Math.sqrt(t*t+s*s+i*i);return[t/r,s/r,i/r]}function st(e,t,s){return e[t]*s[0]+e[t+1]*s[1]+e[t+2]*s[2]}const it={getPositionsBounds:function(e){const t=new Float32Array(3),s=new Float32Array(3);let i,r;for(i=0;i<3;i++)t[i]=Number.MAX_VALUE,s[i]=-Number.MAX_VALUE;for(i=0;i<e.length;i+=3)for(r=0;r<3;r++)t[r]=Math.min(t[r],e[i+r]),s[r]=Math.max(s[r],e[i+r]);return{min:t,max:s}},createPositionsDecodeMatrix:qe,compressPositions:Je,compressPosition:function(e,t,s){const i=new Float32Array([t[3]!==t[0]?65535/(t[3]-t[0]):0,t[4]!==t[1]?65535/(t[4]-t[1]):0,t[5]!==t[2]?65535/(t[5]-t[2]):0]);s[0]=Math.max(0,Math.min(65535,Math.floor((e[0]-t[0])*i[0]))),s[1]=Math.max(0,Math.min(65535,Math.floor((e[1]-t[1])*i[1]))),s[2]=Math.max(0,Math.min(65535,Math.floor((e[2]-t[2])*i[2])))},decompressPositions:function(e,t,s=new Float32Array(e.length)){for(let i=0,r=e.length;i<r;i+=3)s[i+0]=e[i+0]*t[0]+t[12],s[i+1]=e[i+1]*t[5]+t[13],s[i+2]=e[i+2]*t[10]+t[14];return s},decompressPosition:function(e,t,s){return s[0]=e[0]*t[0]+t[12],s[1]=e[1]*t[5]+t[13],s[2]=e[2]*t[10]+t[14],s},decompressAABB:function(e,t,s=e){return s[0]=e[0]*t[0]+t[12],s[1]=e[1]*t[5]+t[13],s[2]=e[2]*t[10]+t[14],s[3]=e[3]*t[0]+t[12],s[4]=e[4]*t[5]+t[13],s[5]=e[5]*t[10]+t[14],s},getUVBounds:function(e){const t=new Float32Array(2),s=new Float32Array(2);let i,r;for(i=0;i<2;i++)t[i]=Number.MAX_VALUE,s[i]=-Number.MAX_VALUE;for(i=0;i<e.length;i+=2)for(r=0;r<2;r++)t[r]=Math.min(t[r],e[i+r]),s[r]=Math.max(s[r],e[i+r]);return{min:t,max:s}},compressUVs:$e,decompressUVs:function(e,t,s=new Float32Array(e.length)){for(let i=0,r=e.length;i<r;i+=3)s[i+0]=e[i+0]*t[0]+t[6],s[i+1]=e[i+1]*t[4]+t[7];return s},decompressUV:function(e,t,s){s[0]=e[0]*t[0]+t[6],s[1]=e[1]*t[4]+t[7]},compressNormals:function(e){const t=new Int8Array(e.length);let s,i,r,o,n;for(let a=0;a<e.length;a+=3)r=s=et(e,a,"floor","floor"),i=tt(s),o=n=st(e,a,i),s=et(e,a,"ceil","floor"),i=tt(s),o=st(e,a,i),o>n&&(r=s,n=o),s=et(e,a,"floor","ceil"),i=tt(s),o=st(e,a,i),o>n&&(r=s,n=o),s=et(e,a,"ceil","ceil"),i=tt(s),o=st(e,a,i),o>n&&(r=s,n=o),t[a]=r[0],t[a+1]=r[1];return t},decompressNormals:function(e,t){for(let s=0,i=0,r=e.length;s<r;s+=2){let r=e[s+0],o=e[s+1];r=(2*r+1)/255,o=(2*o+1)/255;const n=1-Math.abs(r)-Math.abs(o);n<0&&(r=(1-Math.abs(o))*(r>=0?1:-1),o=(1-Math.abs(r))*(o>=0?1:-1));const a=Math.sqrt(r*r+o*o+n*n);t[i+0]=r/a,t[i+1]=o/a,t[i+2]=n/a,i+=3}return t},decompressNormal:function(e,t){let s=e[0],i=e[1];s=(2*s+1)/255,i=(2*i+1)/255;const r=1-Math.abs(s)-Math.abs(i);r<0&&(s=(1-Math.abs(i))*(s>=0?1:-1),i=(1-Math.abs(s))*(i>=0?1:-1));const o=Math.sqrt(s*s+i*i+r*r);return t[0]=s/o,t[1]=i/o,t[2]=r/o,t}};class rt extends x{get type(){return"Perspective"}constructor(e,t={}){super(e,t),this.camera=e,this._state=new Ze({matrix:p.mat4(),inverseMatrix:p.mat4(),transposedMatrix:p.mat4(),near:.1,far:2e3}),this._inverseMatrixDirty=!0,this._transposedMatrixDirty=!0,this._fov=60,this._canvasResized=this.scene.canvas.on("boundary",this._needUpdate,this),this.fov=t.fov,this.fovAxis=t.fovAxis,this.near=t.near,this.far=t.far}_update(){const e=this.scene.viewport.boundary,t=e[2]/e[3],s=this._fovAxis;let i=this._fov;("x"===s||"min"===s&&t<1||"max"===s&&t>1)&&(i/=t),i=Math.min(i,120),p.perspectiveMat4(i*(Math.PI/180),t,this._state.near,this._state.far,this._state.matrix),this._inverseMatrixDirty=!0,this._transposedMatrixDirty=!0,this.glRedraw(),this.fire("matrix",this._state.matrix)}set fov(e){(e=null!=e?e:60)!==this._fov&&(this._fov=e,this._needUpdate(0),this.fire("fov",this._fov))}get fov(){return this._fov}set fovAxis(e){e=e||"min",this._fovAxis!==e&&("x"!==e&&"y"!==e&&"min"!==e&&(this.error("Unsupported value for 'fovAxis': "+e+" - defaulting to 'min'"),e="min"),this._fovAxis=e,this._needUpdate(0),this.fire("fovAxis",this._fovAxis))}get fovAxis(){return this._fovAxis}set near(e){const t=null!=e?e:.1;this._state.near!==t&&(this._state.near=t,this._needUpdate(0),this.fire("near",this._state.near))}get near(){return this._state.near}set far(e){const t=null!=e?e:2e3;this._state.far!==t&&(this._state.far=t,this._needUpdate(0),this.fire("far",this._state.far))}get far(){return this._state.far}get matrix(){return this._updateScheduled&&this._doUpdate(),this._state.matrix}get inverseMatrix(){return this._updateScheduled&&this._doUpdate(),this._inverseMatrixDirty&&(p.inverseMat4(this._state.matrix,this._state.inverseMatrix),this._inverseMatrixDirty=!1),this._state.inverseMatrix}get transposedMatrix(){return this._updateScheduled&&this._doUpdate(),this._transposedMatrixDirty&&(p.transposeMat4(this._state.matrix,this._state.transposedMatrix),this._transposedMatrixDirty=!1),this._state.transposedMatrix}unproject(e,t,s,i,r){const o=this.scene.canvas.canvas,n=o.offsetWidth/2,a=o.offsetHeight/2;return s[0]=(e[0]-n)/n,s[1]=(e[1]-a)/a,s[2]=t,s[3]=1,p.mulMat4v4(this.inverseMatrix,s,i),p.mulVec3Scalar(i,1/i[3]),i[3]=1,i[1]*=-1,p.mulMat4v4(this.camera.inverseViewMatrix,i,r),r}destroy(){super.destroy(),this._state.destroy(),this.scene.canvas.off(this._canvasResized)}}class ot extends x{get type(){return"Ortho"}constructor(e,t={}){super(e,t),this.camera=e,this._state=new Ze({matrix:p.mat4(),inverseMatrix:p.mat4(),transposedMatrix:p.mat4(),near:.1,far:2e3}),this._inverseMatrixDirty=!0,this._transposedMatrixDirty=!0,this.scale=t.scale,this.near=t.near,this.far=t.far,this._onCanvasBoundary=this.scene.canvas.on("boundary",this._needUpdate,this)}_update(){const e=this.scene,t=.5*this._scale,s=e.viewport.boundary,i=s[2],r=s[3],o=i/r;let n,a,l,h;i>r?(n=-t,a=t,l=t/o,h=-t/o):(n=-t*o,a=t*o,l=t,h=-t),p.orthoMat4c(n,a,h,l,this._state.near,this._state.far,this._state.matrix),this._inverseMatrixDirty=!0,this._transposedMatrixDirty=!0,this.glRedraw(),this.fire("matrix",this._state.matrix)}set scale(e){null==e&&(e=1),e<=0&&(e=.01),this._scale=e,this._needUpdate(0),this.fire("scale",this._scale)}get scale(){return this._scale}set near(e){const t=null!=e?e:.1;this._state.near!==t&&(this._state.near=t,this._needUpdate(0),this.fire("near",this._state.near))}get near(){return this._state.near}set far(e){const t=null!=e?e:2e3;this._state.far!==t&&(this._state.far=t,this._needUpdate(0),this.fire("far",this._state.far))}get far(){return this._state.far}get matrix(){return this._updateScheduled&&this._doUpdate(),this._state.matrix}get inverseMatrix(){return this._updateScheduled&&this._doUpdate(),this._inverseMatrixDirty&&(p.inverseMat4(this._state.matrix,this._state.inverseMatrix),this._inverseMatrixDirty=!1),this._state.inverseMatrix}get transposedMatrix(){return this._updateScheduled&&this._doUpdate(),this._transposedMatrixDirty&&(p.transposeMat4(this._state.matrix,this._state.transposedMatrix),this._transposedMatrixDirty=!1),this._state.transposedMatrix}unproject(e,t,s,i,r){const o=this.scene.canvas.canvas,n=o.offsetWidth/2,a=o.offsetHeight/2;return s[0]=(e[0]-n)/n,s[1]=(e[1]-a)/a,s[2]=t,s[3]=1,p.mulMat4v4(this.inverseMatrix,s,i),p.mulVec3Scalar(i,1/i[3]),i[3]=1,i[1]*=-1,p.mulMat4v4(this.camera.inverseViewMatrix,i,r),r}destroy(){super.destroy(),this._state.destroy(),this.scene.canvas.off(this._onCanvasBoundary)}}class nt extends x{get type(){return"Frustum"}constructor(e,t={}){super(e,t),this.camera=e,this._state=new Ze({matrix:p.mat4(),inverseMatrix:p.mat4(),transposedMatrix:p.mat4(),near:.1,far:1e4}),this._left=-1,this._right=1,this._bottom=-1,this._top=1,this._inverseMatrixDirty=!0,this._transposedMatrixDirty=!0,this.left=t.left,this.right=t.right,this.bottom=t.bottom,this.top=t.top,this.near=t.near,this.far=t.far}_update(){p.frustumMat4(this._left,this._right,this._bottom,this._top,this._state.near,this._state.far,this._state.matrix),this._inverseMatrixDirty=!0,this._transposedMatrixDirty=!0,this.glRedraw(),this.fire("matrix",this._state.matrix)}set left(e){this._left=null!=e?e:-1,this._needUpdate(0),this.fire("left",this._left)}get left(){return this._left}set right(e){this._right=null!=e?e:1,this._needUpdate(0),this.fire("right",this._right)}get right(){return this._right}set top(e){this._top=null!=e?e:1,this._needUpdate(0),this.fire("top",this._top)}get top(){return this._top}set bottom(e){this._bottom=null!=e?e:-1,this._needUpdate(0),this.fire("bottom",this._bottom)}get bottom(){return this._bottom}set near(e){this._state.near=null!=e?e:.1,this._needUpdate(0),this.fire("near",this._state.near)}get near(){return this._state.near}set far(e){this._state.far=null!=e?e:1e4,this._needUpdate(0),this.fire("far",this._state.far)}get far(){return this._state.far}get matrix(){return this._updateScheduled&&this._doUpdate(),this._state.matrix}get inverseMatrix(){return this._updateScheduled&&this._doUpdate(),this._inverseMatrixDirty&&(p.inverseMat4(this._state.matrix,this._state.inverseMatrix),this._inverseMatrixDirty=!1),this._state.inverseMatrix}get transposedMatrix(){return this._updateScheduled&&this._doUpdate(),this._transposedMatrixDirty&&(p.transposeMat4(this._state.matrix,this._state.transposedMatrix),this._transposedMatrixDirty=!1),this._state.transposedMatrix}unproject(e,t,s,i,r){const o=this.scene.canvas.canvas,n=o.offsetWidth/2,a=o.offsetHeight/2;return s[0]=(e[0]-n)/n,s[1]=(e[1]-a)/a,s[2]=t,s[3]=1,p.mulMat4v4(this.inverseMatrix,s,i),p.mulVec3Scalar(i,1/i[3]),i[3]=1,i[1]*=-1,p.mulMat4v4(this.camera.inverseViewMatrix,i,r),r}destroy(){super.destroy(),this._state.destroy(),super.destroy()}}class at extends x{get type(){return"CustomProjection"}constructor(e,t={}){super(e,t),this.camera=e,this._state=new Ze({matrix:p.mat4(),inverseMatrix:p.mat4(),transposedMatrix:p.mat4()}),this._inverseMatrixDirty=!0,this._transposedMatrixDirty=!1,this.matrix=t.matrix}set matrix(e){this._state.matrix.set(e||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this._inverseMatrixDirty=!0,this._transposedMatrixDirty=!0,this.glRedraw(),this.fire("matrix",this._state.matrix)}get matrix(){return this._state.matrix}get inverseMatrix(){return this._updateScheduled&&this._doUpdate(),this._inverseMatrixDirty&&(p.inverseMat4(this._state.matrix,this._state.inverseMatrix),this._inverseMatrixDirty=!1),this._state.inverseMatrix}get transposedMatrix(){return this._updateScheduled&&this._doUpdate(),this._transposedMatrixDirty&&(p.transposeMat4(this._state.matrix,this._state.transposedMatrix),this._transposedMatrixDirty=!1),this._state.transposedMatrix}unproject(e,t,s,i,r){const o=this.scene.canvas.canvas,n=o.offsetWidth/2,a=o.offsetHeight/2;return s[0]=(e[0]-n)/n,s[1]=(e[1]-a)/a,s[2]=t,s[3]=1,p.mulMat4v4(this.inverseMatrix,s,i),p.mulVec3Scalar(i,1/i[3]),i[3]=1,i[1]*=-1,p.mulMat4v4(this.camera.inverseViewMatrix,i,r),r}destroy(){super.destroy(),this._state.destroy()}}const lt=p.vec3(),ht=p.vec3(),ct=p.vec3(),ut=p.vec3(),At=p.vec3(),pt=p.vec3(),dt=p.vec4(),ft=p.vec4(),mt=p.vec4(),gt=p.mat4(),yt=p.mat4(),Et=p.vec3(),vt=p.vec3(),_t=p.vec3(),It=p.vec3();class Tt extends x{get type(){return"Camera"}constructor(e,t={}){super(e,t),this._state=new Ze({deviceMatrix:p.mat4(),hasDeviceMatrix:!1,matrix:p.mat4(),normalMatrix:p.mat4(),inverseMatrix:p.mat4()}),this._perspective=new rt(this),this._ortho=new ot(this),this._frustum=new nt(this),this._customProjection=new at(this),this._project=this._perspective,this._eye=p.vec3([0,0,10]),this._look=p.vec3([0,0,0]),this._up=p.vec3([0,1,0]),this._worldUp=p.vec3([0,1,0]),this._worldRight=p.vec3([1,0,0]),this._worldForward=p.vec3([0,0,-1]),this.deviceMatrix=t.deviceMatrix,this.eye=t.eye,this.look=t.look,this.up=t.up,this.worldAxis=t.worldAxis,this.gimbalLock=t.gimbalLock,this.constrainPitch=t.constrainPitch,this.projection=t.projection,this._perspective.on("matrix",(()=>{"perspective"===this._projectionType&&this.fire("projMatrix",this._perspective.matrix)})),this._ortho.on("matrix",(()=>{"ortho"===this._projectionType&&this.fire("projMatrix",this._ortho.matrix)})),this._frustum.on("matrix",(()=>{"frustum"===this._projectionType&&this.fire("projMatrix",this._frustum.matrix)})),this._customProjection.on("matrix",(()=>{"customProjection"===this._projectionType&&this.fire("projMatrix",this._customProjection.matrix)}))}_update(){const e=this._state;let t;"ortho"===this.projection?(p.subVec3(this._eye,this._look,Et),p.normalizeVec3(Et,vt),p.mulVec3Scalar(vt,1e3,_t),p.addVec3(this._look,_t,It),t=It):t=this._eye,e.hasDeviceMatrix?(p.lookAtMat4v(t,this._look,this._up,yt),p.mulMat4(e.deviceMatrix,yt,e.matrix)):p.lookAtMat4v(t,this._look,this._up,e.matrix),p.inverseMat4(this._state.matrix,this._state.inverseMatrix),p.transposeMat4(this._state.inverseMatrix,this._state.normalMatrix),this.glRedraw(),this.fire("matrix",this._state.matrix),this.fire("viewMatrix",this._state.matrix)}orbitYaw(e){let t=p.subVec3(this._eye,this._look,lt);p.rotationMat4v(.0174532925*e,this._gimbalLock?this._worldUp:this._up,gt),t=p.transformPoint3(gt,t,ht),this.eye=p.addVec3(this._look,t,ct),this.up=p.transformPoint3(gt,this._up,ut)}orbitPitch(e){if(this._constrainPitch&&(e=p.dotVec3(this._up,this._worldUp)/p.DEGTORAD)<1)return;let t=p.subVec3(this._eye,this._look,lt);const s=p.cross3Vec3(p.normalizeVec3(t,ht),p.normalizeVec3(this._up,ct));p.rotationMat4v(.0174532925*e,s,gt),t=p.transformPoint3(gt,t,ut),this.up=p.transformPoint3(gt,this._up,At),this.eye=p.addVec3(t,this._look,pt)}yaw(e){let t=p.subVec3(this._look,this._eye,lt);p.rotationMat4v(.0174532925*e,this._gimbalLock?this._worldUp:this._up,gt),t=p.transformPoint3(gt,t,ht),this.look=p.addVec3(t,this._eye,ct),this._gimbalLock&&(this.up=p.transformPoint3(gt,this._up,ut))}pitch(e){if(this._constrainPitch&&(e=p.dotVec3(this._up,this._worldUp)/p.DEGTORAD)<1)return;let t=p.subVec3(this._look,this._eye,lt);const s=p.cross3Vec3(p.normalizeVec3(t,ht),p.normalizeVec3(this._up,ct));p.rotationMat4v(.0174532925*e,s,gt),this.up=p.transformPoint3(gt,this._up,pt),t=p.transformPoint3(gt,t,ut),this.look=p.addVec3(t,this._eye,At)}pan(e){const t=p.subVec3(this._eye,this._look,lt),s=[0,0,0];let i;if(0!==e[0]){const r=p.cross3Vec3(p.normalizeVec3(t,[]),p.normalizeVec3(this._up,ht));i=p.mulVec3Scalar(r,e[0]),s[0]+=i[0],s[1]+=i[1],s[2]+=i[2]}0!==e[1]&&(i=p.mulVec3Scalar(p.normalizeVec3(this._up,ct),e[1]),s[0]+=i[0],s[1]+=i[1],s[2]+=i[2]),0!==e[2]&&(i=p.mulVec3Scalar(p.normalizeVec3(t,ut),e[2]),s[0]+=i[0],s[1]+=i[1],s[2]+=i[2]),this.eye=p.addVec3(this._eye,s,At),this.look=p.addVec3(this._look,s,pt)}zoom(e){const t=p.subVec3(this._eye,this._look,lt),s=Math.abs(p.lenVec3(t,ht)),i=Math.abs(s+e);if(i<.5)return;const r=p.normalizeVec3(t,ct);this.eye=p.addVec3(this._look,p.mulVec3Scalar(r,i),ut)}set eye(e){this._eye.set(e||[0,0,10]),this._needUpdate(0),this.fire("eye",this._eye)}get eye(){return this._eye}set look(e){this._look.set(e||[0,0,0]),this._needUpdate(0),this.fire("look",this._look)}get look(){return this._look}set up(e){this._up.set(e||[0,1,0]),this._needUpdate(0),this.fire("up",this._up)}get up(){return this._up}set deviceMatrix(e){this._state.deviceMatrix.set(e||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this._state.hasDeviceMatrix=!!e,this._needUpdate(0),this.fire("deviceMatrix",this._state.deviceMatrix)}get deviceMatrix(){return this._state.deviceMatrix}set worldAxis(e){e=e||[1,0,0,0,1,0,0,0,1],this._worldAxis?this._worldAxis.set(e):this._worldAxis=p.vec3(e),this._worldRight[0]=this._worldAxis[0],this._worldRight[1]=this._worldAxis[1],this._worldRight[2]=this._worldAxis[2],this._worldUp[0]=this._worldAxis[3],this._worldUp[1]=this._worldAxis[4],this._worldUp[2]=this._worldAxis[5],this._worldForward[0]=this._worldAxis[6],this._worldForward[1]=this._worldAxis[7],this._worldForward[2]=this._worldAxis[8],this.fire("worldAxis",this._worldAxis)}get worldAxis(){return this._worldAxis}get worldUp(){return this._worldUp}get xUp(){return this._worldUp[0]>this._worldUp[1]&&this._worldUp[0]>this._worldUp[2]}get yUp(){return this._worldUp[1]>this._worldUp[0]&&this._worldUp[1]>this._worldUp[2]}get zUp(){return this._worldUp[2]>this._worldUp[0]&&this._worldUp[2]>this._worldUp[1]}get worldRight(){return this._worldRight}get worldForward(){return this._worldForward}set gimbalLock(e){this._gimbalLock=!1!==e,this.fire("gimbalLock",this._gimbalLock)}get gimbalLock(){return this._gimbalLock}set constrainPitch(e){this._constrainPitch=!!e,this.fire("constrainPitch",this._constrainPitch)}get eyeLookDist(){return p.lenVec3(p.subVec3(this._look,this._eye,lt))}get matrix(){return this._updateScheduled&&this._doUpdate(),this._state.matrix}get viewMatrix(){return this._updateScheduled&&this._doUpdate(),this._state.matrix}get normalMatrix(){return this._updateScheduled&&this._doUpdate(),this._state.normalMatrix}get viewNormalMatrix(){return this._updateScheduled&&this._doUpdate(),this._state.normalMatrix}get inverseViewMatrix(){return this._updateScheduled&&this._doUpdate(),this._state.inverseMatrix}get projMatrix(){return this[this.projection].matrix}get perspective(){return this._perspective}get ortho(){return this._ortho}get frustum(){return this._frustum}get customProjection(){return this._customProjection}set projection(e){e=e||"perspective",this._projectionType!==e&&("perspective"===e?this._project=this._perspective:"ortho"===e?this._project=this._ortho:"frustum"===e?this._project=this._frustum:"customProjection"===e?this._project=this._customProjection:(this.error("Unsupported value for 'projection': "+e+" defaulting to 'perspective'"),this._project=this._perspective,e="perspective"),this._project._update(),this._projectionType=e,this.glRedraw(),this._update(),this.fire("dirty"),this.fire("projection",this._projectionType),this.fire("projMatrix",this._project.matrix))}get projection(){return this._projectionType}get project(){return this._project}projectWorldPos(e){const t=dt,s=ft,i=mt;t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=1,p.mulMat4v4(this.viewMatrix,t,s),p.mulMat4v4(this.projMatrix,s,i),p.mulVec3Scalar(i,1/i[3]),i[3]=1,i[1]*=-1;const r=this.scene.canvas.canvas,o=r.offsetWidth/2,n=r.offsetHeight/2;return[i[0]*o+o,i[1]*n+n]}destroy(){super.destroy(),this._state.destroy()}}const Pt=p.vec4(),Dt=p.vec3();class bt{constructor(e,t){this._scene=e,this._withSAO=t,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){const e=this._scene;return[e._lightsState.getHash(),e._sectionPlanesState.getHash(),this._withSAO?"sao":"nosao"].join(";")}drawLayer(e,t,s){const i=this._scene,r=i.camera,o=t.model,n=i.canvas.gl,a=t._state,l=a.textureState,h=t._state.origin;if(!this._program&&(this._allocate(),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram(e,a)),l.bindCommonTextures(this._program,this._uTexturePerObjectIdPositionsDecodeMatrix,this._uTexturePerVertexIdCoordinates,this._uTexturePerObjectIdColorsAndFlags,this._uTextureCameraMatrices,this._uTextureModelMatrices,this._uTexturePerObjectIdOffsets);let c=r.eye;e.pickViewMatrix&&(l.bindPickCameraTexture(this._program,this._uTextureCameraMatrices),c=e.pickOrigin||c);const u=[c[0]-h[0],c[1]-h[1],c[2]-h[2]];n.uniform3fv(this._uCameraEyeRtc,u),n.uniform1i(this._uRenderPass,s);const A=i._sectionPlanesState.sectionPlanes.length;if(A>0){const e=i._sectionPlanesState.sectionPlanes,s=t.layerIndex*A,r=o.renderFlags;for(let t=0;t<A;t++){const i=this._uSectionPlanes[t];if(i){const o=r.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,o?1:0),o){const s=e[t];if(h){const e=W(s.dist,s.dir,h,Dt);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}a.numIndices8Bits>0&&(l.bindTriangleIndicesTextures(this._program,this._uTexturePerPolygonIdPortionIds,this._uTexturePerPolygonIdIndices,8),n.drawArrays(n.TRIANGLES,0,a.numIndices8Bits)),a.numIndices16Bits>0&&(l.bindTriangleIndicesTextures(this._program,this._uTexturePerPolygonIdPortionIds,this._uTexturePerPolygonIdIndices,16),n.drawArrays(n.TRIANGLES,0,a.numIndices16Bits)),a.numIndices32Bits>0&&(l.bindTriangleIndicesTextures(this._program,this._uTexturePerPolygonIdPortionIds,this._uTexturePerPolygonIdIndices,32),n.drawArrays(n.TRIANGLES,0,a.numIndices32Bits)),e.drawElements++}_allocate(){const e=this._scene,t=e.canvas.gl,s=e._lightsState;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uRenderPass=i.getLocation("renderPass"),this._uLightAmbient=i.getLocation("lightAmbient"),this._uLightColor=[],this._uLightDir=[],this._uLightPos=[],this._uLightAttenuation=[];const r=s.lights;let o;for(let e=0,t=r.length;e<t;e++)switch(o=r[e],o.type){case"dir":this._uLightColor[e]=i.getLocation("lightColor"+e),this._uLightPos[e]=null,this._uLightDir[e]=i.getLocation("lightDir"+e);break;case"point":this._uLightColor[e]=i.getLocation("lightColor"+e),this._uLightPos[e]=i.getLocation("lightPos"+e),this._uLightDir[e]=null,this._uLightAttenuation[e]=i.getLocation("lightAttenuation"+e);break;case"spot":this._uLightColor[e]=i.getLocation("lightColor"+e),this._uLightPos[e]=i.getLocation("lightPos"+e),this._uLightDir[e]=i.getLocation("lightDir"+e),this._uLightAttenuation[e]=i.getLocation("lightAttenuation"+e)}this._uSectionPlanes=[];for(let t=0,s=e._sectionPlanesState.sectionPlanes.length;t<s;t++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+t),pos:i.getLocation("sectionPlanePos"+t),dir:i.getLocation("sectionPlaneDir"+t)});this._withSAO&&(this._uOcclusionTexture="uOcclusionTexture",this._uSAOParams=i.getLocation("uSAOParams")),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=i.getLocation("logDepthBufFC")),this._uTexturePerObjectIdPositionsDecodeMatrix="uTexturePerObjectIdPositionsDecodeMatrix",this._uTexturePerObjectIdColorsAndFlags="uTexturePerObjectIdColorsAndFlags",this._uTexturePerVertexIdCoordinates="uTexturePerVertexIdCoordinates",this._uTexturePerPolygonIdNormals="uTexturePerPolygonIdNormals",this._uTexturePerPolygonIdIndices="uTexturePerPolygonIdIndices",this._uTexturePerPolygonIdPortionIds="uTexturePerPolygonIdPortionIds",this._uTextureCameraMatrices="uTextureCameraMatrices",this._uTextureModelMatrices="uTextureModelMatrices",this._uTexturePerObjectIdOffsets="uTexturePerObjectIdOffsets",this._uCameraEyeRtc=i.getLocation("uCameraEyeRtc")}_bindProgram(e){const t=this._scene,s=t.canvas.gl,i=this._program,r=t._lightsState.lights,o=t.camera.project;i.bind(),this._uLightAmbient&&s.uniform4fv(this._uLightAmbient,t._lightsState.getAmbientColorAndIntensity());for(let e=0,t=r.length;e<t;e++){const t=r[e];this._uLightColor[e]&&s.uniform4f(this._uLightColor[e],t.color[0],t.color[1],t.color[2],t.intensity),this._uLightPos[e]&&(s.uniform3fv(this._uLightPos[e],t.pos),this._uLightAttenuation[e]&&s.uniform1f(this._uLightAttenuation[e],t.attenuation)),this._uLightDir[e]&&s.uniform3fv(this._uLightDir[e],t.dir)}if(this._withSAO){const i=t.sao;if(i.possible){const t=s.drawingBufferWidth,r=s.drawingBufferHeight;Pt[0]=t,Pt[1]=r,Pt[2]=i.blendCutoff,Pt[3]=i.blendFactor,s.uniform4fv(this._uSAOParams,Pt),this._program.bindTexture(this._uOcclusionTexture,e.occlusionTexture,10)}}if(t.logarithmicDepthBufferEnabled){const e=2/(Math.log(o.far+1)/Math.LN2);s.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState,s=e._lightsState,i=t.sectionPlanes.length>0;let r;const o=[];o.push("#version 300 es"),o.push("// Triangles dataTexture draw vertex shader"),o.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),o.push("precision highp float;"),o.push("precision highp int;"),o.push("precision highp usampler2D;"),o.push("precision highp isampler2D;"),o.push("precision highp sampler2D;"),o.push("#else"),o.push("precision mediump float;"),o.push("precision mediump int;"),o.push("precision mediump usampler2D;"),o.push("precision mediump isampler2D;"),o.push("precision mediump sampler2D;"),o.push("#endif"),o.push("uniform int renderPass;"),e.entityOffsetsEnabled&&o.push("in vec3 offset;"),o.push("uniform highp sampler2D uTexturePerObjectIdPositionsDecodeMatrix;"),o.push("uniform lowp usampler2D uTexturePerObjectIdColorsAndFlags;"),o.push("uniform highp sampler2D uTexturePerObjectIdOffsets;"),o.push("uniform mediump usampler2D uTexturePerVertexIdCoordinates;"),o.push("uniform highp usampler2D uTexturePerPolygonIdIndices;"),o.push("uniform mediump usampler2D uTexturePerPolygonIdPortionIds;"),o.push("uniform highp sampler2D uTextureCameraMatrices;"),o.push("uniform highp sampler2D uTextureModelMatrices;"),o.push("uniform vec3 uCameraEyeRtc;"),o.push("vec3 positions[3];"),e.logarithmicDepthBufferEnabled&&(o.push("uniform float logDepthBufFC;"),o.push("out float vFragDepth;"),o.push("out float isPerspective;")),o.push("bool isPerspectiveMatrix(mat4 m) {"),o.push("    return (m[2][3] == - 1.0);"),o.push("}"),o.push("uniform vec4 lightAmbient;");for(let e=0,t=s.lights.length;e<t;e++)r=s.lights[e],"ambient"!==r.type&&(o.push("uniform vec4 lightColor"+e+";"),"dir"===r.type&&o.push("uniform vec3 lightDir"+e+";"),"point"===r.type&&o.push("uniform vec3 lightPos"+e+";"),"spot"===r.type&&(o.push("uniform vec3 lightPos"+e+";"),o.push("uniform vec3 lightDir"+e+";")));i&&(o.push("out vec4 vWorldPosition;"),o.push("flat out uint vFlags2;")),o.push("out vec4 vColor;"),o.push("void main(void) {"),o.push("int polygonIndex = gl_VertexID / 3;"),o.push("int h_packed_object_id_index = (polygonIndex >> 3) & 4095;"),o.push("int v_packed_object_id_index = (polygonIndex >> 3) >> 12;"),o.push("int objectIndex = int(texelFetch(uTexturePerPolygonIdPortionIds, ivec2(h_packed_object_id_index, v_packed_object_id_index), 0).r);"),o.push("ivec2 objectIndexCoords = ivec2(objectIndex % 512, objectIndex / 512);"),o.push("uvec4 flags = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+2, objectIndexCoords.y), 0);"),o.push("uvec4 flags2 = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+3, objectIndexCoords.y), 0);"),o.push("if (int(flags.x) != renderPass) {"),o.push("   gl_Position = vec4(3.0, 3.0, 3.0, 1.0);"),o.push("   return;"),o.push("} else {"),o.push("mat4 viewMatrix = mat4 (texelFetch (uTextureCameraMatrices, ivec2(0, 0), 0), texelFetch (uTextureCameraMatrices, ivec2(1, 0), 0), texelFetch (uTextureCameraMatrices, ivec2(2, 0), 0), texelFetch (uTextureCameraMatrices, ivec2(3, 0), 0));"),o.push("mat4 viewNormalMatrix = mat4 (texelFetch (uTextureCameraMatrices, ivec2(0, 1), 0), texelFetch (uTextureCameraMatrices, ivec2(1, 1), 0), texelFetch (uTextureCameraMatrices, ivec2(2, 1), 0), texelFetch (uTextureCameraMatrices, ivec2(3, 1), 0));"),o.push("mat4 projMatrix = mat4 (texelFetch (uTextureCameraMatrices, ivec2(0, 2), 0), texelFetch (uTextureCameraMatrices, ivec2(1, 2), 0), texelFetch (uTextureCameraMatrices, ivec2(2, 2), 0), texelFetch (uTextureCameraMatrices, ivec2(3, 2), 0));"),o.push("mat4 worldMatrix = mat4 (texelFetch (uTextureModelMatrices, ivec2(0, 0), 0), texelFetch (uTextureModelMatrices, ivec2(1, 0), 0), texelFetch (uTextureModelMatrices, ivec2(2, 0), 0), texelFetch (uTextureModelMatrices, ivec2(3, 0), 0));"),o.push("mat4 worldNormalMatrix = mat4 (texelFetch (uTextureModelMatrices, ivec2(0, 1), 0), texelFetch (uTextureModelMatrices, ivec2(1, 1), 0), texelFetch (uTextureModelMatrices, ivec2(2, 1), 0), texelFetch (uTextureModelMatrices, ivec2(3, 1), 0));"),o.push("ivec4 packedVertexBase = ivec4(texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+4, objectIndexCoords.y), 0));"),o.push("ivec4 packedIndexBaseOffset = ivec4(texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+5, objectIndexCoords.y), 0));"),o.push("int indexBaseOffset = (packedIndexBaseOffset.r << 24) + (packedIndexBaseOffset.g << 16) + (packedIndexBaseOffset.b << 8) + packedIndexBaseOffset.a;"),o.push("int h_index = (polygonIndex - indexBaseOffset) & 4095;"),o.push("int v_index = (polygonIndex - indexBaseOffset) >> 12;"),o.push("ivec3 vertexIndices = ivec3(texelFetch(uTexturePerPolygonIdIndices, ivec2(h_index, v_index), 0));"),o.push("ivec3 uniqueVertexIndexes = vertexIndices + (packedVertexBase.r << 24) + (packedVertexBase.g << 16) + (packedVertexBase.b << 8) + packedVertexBase.a;"),o.push("ivec3 indexPositionH = uniqueVertexIndexes & 4095;"),o.push("ivec3 indexPositionV = uniqueVertexIndexes >> 12;"),o.push("mat4 positionsDecodeMatrix = transpose(mat4 (texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+0, objectIndexCoords.y), 0), texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+1, objectIndexCoords.y), 0), texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+2, objectIndexCoords.y), 0), vec4(0, 0, 0, 1)));"),o.push("uint solid = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+7, objectIndexCoords.y), 0).r;"),o.push("positions[0] = vec3(texelFetch(uTexturePerVertexIdCoordinates, ivec2(indexPositionH.r, indexPositionV.r), 0));"),o.push("positions[1] = vec3(texelFetch(uTexturePerVertexIdCoordinates, ivec2(indexPositionH.g, indexPositionV.g), 0));"),o.push("positions[2] = vec3(texelFetch(uTexturePerVertexIdCoordinates, ivec2(indexPositionH.b, indexPositionV.b), 0));"),o.push("uvec4 color = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+0, objectIndexCoords.y), 0);"),o.push("if (color.a == 0u) {"),o.push("   gl_Position = vec4(3.0, 3.0, 3.0, 1.0);"),o.push("   return;"),o.push("};"),o.push("vec3 normal = normalize(cross(positions[2] - positions[0], positions[1] - positions[0]));"),o.push("vec3 position;"),o.push("position = positions[gl_VertexID % 3];"),o.push("vec3 viewNormal = -normalize((transpose(inverse(viewMatrix*positionsDecodeMatrix)) * vec4(normal,1)).xyz);"),o.push("if (solid != 1u) {"),o.push("if (isPerspectiveMatrix(projMatrix)) {"),o.push("vec3 uCameraEyeRtcInQuantizedSpace = (inverse(worldMatrix * positionsDecodeMatrix) * vec4(uCameraEyeRtc, 1)).xyz;"),o.push("if (dot(position.xyz - uCameraEyeRtcInQuantizedSpace, normal) < 0.0) {"),o.push("position = positions[2 - (gl_VertexID % 3)];"),o.push("viewNormal = -viewNormal;"),o.push("}"),o.push("} else {"),o.push("if (viewNormal.z < 0.0) {"),o.push("position = positions[2 - (gl_VertexID % 3)];"),o.push("viewNormal = -viewNormal;"),o.push("}"),o.push("}"),o.push("}"),o.push("vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),o.push("vec4 offset = vec4(texelFetch (uTexturePerObjectIdOffsets, objectIndexCoords, 0).rgb, 0.0);"),o.push("worldPosition.xyz = worldPosition.xyz + offset.xyz;"),o.push("vec4 viewPosition = viewMatrix * worldPosition; "),o.push("vec3 reflectedColor = vec3(0.0, 0.0, 0.0);"),o.push("vec3 viewLightDir = vec3(0.0, 0.0, -1.0);"),o.push("float lambertian = 1.0;");for(let e=0,t=s.lights.length;e<t;e++)if(r=s.lights[e],"ambient"!==r.type){if("dir"===r.type)"view"===r.space?o.push("viewLightDir = normalize(lightDir"+e+");"):o.push("viewLightDir = normalize((viewMatrix * vec4(lightDir"+e+", 0.0)).xyz);");else if("point"===r.type)"view"===r.space?o.push("viewLightDir = -normalize(lightPos"+e+" - viewPosition.xyz);"):o.push("viewLightDir = -normalize((viewMatrix * vec4(lightPos"+e+", 0.0)).xyz);");else{if("spot"!==r.type)continue;"view"===r.space?o.push("viewLightDir = normalize(lightDir"+e+");"):o.push("viewLightDir = normalize((viewMatrix * vec4(lightDir"+e+", 0.0)).xyz);")}o.push("lambertian = max(dot(-viewNormal, viewLightDir), 0.0);"),o.push("reflectedColor += lambertian * (lightColor"+e+".rgb * lightColor"+e+".a);")}return o.push("vec3 rgb = vec3(color.rgb) / 255.0;"),o.push("vColor =  vec4((lightAmbient.rgb * lightAmbient.a * rgb) + (reflectedColor * rgb), float(color.a) / 255.0);"),o.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(o.push("vFragDepth = 1.0 + clipPos.w;"),o.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),i&&(o.push("vWorldPosition = worldPosition;"),o.push("vFlags2 = flags2.r;")),o.push("gl_Position = clipPos;"),o.push("}"),o.push("}"),o}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Triangles dataTexture draw fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("in float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),this._withSAO&&(i.push("uniform sampler2D uOcclusionTexture;"),i.push("uniform vec4      uSAOParams;"),i.push("const float       packUpscale = 256. / 255.;"),i.push("const float       unpackDownScale = 255. / 256.;"),i.push("const vec3        packFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );"),i.push("const vec4        unPackFactors = unpackDownScale / vec4( packFactors, 1. );"),i.push("float unpackRGBToFloat( const in vec4 v ) {"),i.push("    return dot( v, unPackFactors );"),i.push("}")),s){i.push("in vec4 vWorldPosition;"),i.push("flat in uint vFlags2;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("in vec4 vColor;"),i.push("out vec4 outColor;"),i.push("void main(void) {"),s){i.push("  bool clippable = vFlags2 > 0u;"),i.push("  if (clippable) {"),i.push("  float dist = 0.0;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("if (sectionPlaneActive"+e+") {"),i.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("}");i.push("  if (dist > 0.0) { "),i.push("      discard;"),i.push("  }"),i.push("}")}return e.logarithmicDepthBufferEnabled&&i.push("    gl_FragDepth = log2( vFragDepth ) * logDepthBufFC * 0.5;"),this._withSAO?(i.push("   float viewportWidth     = uSAOParams[0];"),i.push("   float viewportHeight    = uSAOParams[1];"),i.push("   float blendCutoff       = uSAOParams[2];"),i.push("   float blendFactor       = uSAOParams[3];"),i.push("   vec2 uv                 = vec2(gl_FragCoord.x / viewportWidth, gl_FragCoord.y / viewportHeight);"),i.push("   float ambient           = smoothstep(blendCutoff, 1.0, unpackRGBToFloat(texture(uOcclusionTexture, uv))) * blendFactor;"),i.push("   outColor            = vec4(vColor.rgb * ambient, 1.0);")):i.push("   outColor            = vColor;"),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Rt=new Float32Array([1,1,1]);p.vec4();const Ct=p.vec3();class xt{constructor(e,t){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=this._scene,r=i.camera,o=t.model,n=i.canvas.gl,a=t._state,l=a.textureState,h=t._state.origin;if(!this._program&&(this._allocate(),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram(e,a)),l.bindCommonTextures(this._program,this._uTexturePerObjectIdPositionsDecodeMatrix,this._uTexturePerVertexIdCoordinates,this._uTexturePerObjectIdColorsAndFlags,this._uTextureCameraMatrices,this._uTextureModelMatrices,this._uTexturePerObjectIdOffsets);let c=r.eye;e.pickViewMatrix&&(l.bindPickCameraTexture(this._program,this._uTextureCameraMatrices),c=e.pickOrigin||c);const u=[c[0]-h[0],c[1]-h[1],c[2]-h[2]];if(n.uniform3fv(this._uCameraEyeRtc,u),n.uniform1i(this._uRenderPass,s),s===ke){const e=i.xrayMaterial._state,t=e.fillColor,s=e.fillAlpha;n.uniform4f(this._uColor,t[0],t[1],t[2],s)}else if(s===Ge){const e=i.highlightMaterial._state,t=e.fillColor,s=e.fillAlpha;n.uniform4f(this._uColor,t[0],t[1],t[2],s)}else if(s===Ve){const e=i.selectedMaterial._state,t=e.fillColor,s=e.fillAlpha;n.uniform4f(this._uColor,t[0],t[1],t[2],s)}else n.uniform4fv(this._uColor,Rt);const A=i._sectionPlanesState.sectionPlanes.length;if(A>0){const e=i._sectionPlanesState.sectionPlanes,s=t.layerIndex*A,r=o.renderFlags;for(let t=0;t<A;t++){const i=this._uSectionPlanes[t];if(i){const o=r.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,o?1:0),o){const s=e[t];if(h){const e=W(s.dist,s.dir,h,Ct);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}a.numIndices8Bits>0&&(l.bindTriangleIndicesTextures(this._program,this._uTexturePerPolygonIdPortionIds,this._uTexturePerPolygonIdIndices,8),n.drawArrays(n.TRIANGLES,0,a.numIndices8Bits)),a.numIndices16Bits>0&&(l.bindTriangleIndicesTextures(this._program,this._uTexturePerPolygonIdPortionIds,this._uTexturePerPolygonIdIndices,16),n.drawArrays(n.TRIANGLES,0,a.numIndices16Bits)),a.numIndices32Bits>0&&(l.bindTriangleIndicesTextures(this._program,this._uTexturePerPolygonIdPortionIds,this._uTexturePerPolygonIdIndices,32),n.drawArrays(n.TRIANGLES,0,a.numIndices32Bits)),e.drawElements++}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uColor=s.getLocation("color"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC")),this._uTexturePerObjectIdPositionsDecodeMatrix="uTexturePerObjectIdPositionsDecodeMatrix",this._uTexturePerObjectIdColorsAndFlags="uTexturePerObjectIdColorsAndFlags",this._uTexturePerVertexIdCoordinates="uTexturePerVertexIdCoordinates",this._uTexturePerPolygonIdNormals="uTexturePerPolygonIdNormals",this._uTexturePerPolygonIdIndices="uTexturePerPolygonIdIndices",this._uTexturePerPolygonIdPortionIds="uTexturePerPolygonIdPortionIds",this._uTextureCameraMatrices="uTextureCameraMatrices",this._uTextureModelMatrices="uTextureModelMatrices",this._uTexturePerObjectIdOffsets="uTexturePerObjectIdOffsets",this._uCameraEyeRtc=s.getLocation("uCameraEyeRtc")}_bindProgram(e){const t=this._scene,s=t.canvas.gl,i=t.camera.project;if(this._program.bind(),t.logarithmicDepthBufferEnabled){const e=2/(Math.log(i.far+1)/Math.LN2);s.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Triangles dataTexture silhouette vertex shader"),s.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),s.push("precision highp float;"),s.push("precision highp int;"),s.push("precision highp usampler2D;"),s.push("precision highp isampler2D;"),s.push("precision highp sampler2D;"),s.push("#else"),s.push("precision mediump float;"),s.push("precision mediump int;"),s.push("precision mediump usampler2D;"),s.push("precision mediump isampler2D;"),s.push("precision mediump sampler2D;"),s.push("#endif"),s.push("uniform int renderPass;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("uniform highp sampler2D uTexturePerObjectIdPositionsDecodeMatrix;"),s.push("uniform lowp usampler2D uTexturePerObjectIdColorsAndFlags;"),s.push("uniform highp sampler2D uTexturePerObjectIdOffsets;"),s.push("uniform mediump usampler2D uTexturePerVertexIdCoordinates;"),s.push("uniform highp usampler2D uTexturePerPolygonIdIndices;"),s.push("uniform mediump usampler2D uTexturePerPolygonIdPortionIds;"),s.push("uniform highp sampler2D uTextureCameraMatrices;"),s.push("uniform highp sampler2D uTextureModelMatrices;"),s.push("uniform vec3 uCameraEyeRtc;"),s.push("vec3 positions[3];"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("out float isPerspective;")),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("out float isPerspective;"),t&&(s.push("out vec4 vWorldPosition;"),s.push("flat out uint vFlags2;")),s.push("void main(void) {"),s.push("mat4 viewMatrix = mat4 (texelFetch (uTextureCameraMatrices, ivec2(0, 0), 0), texelFetch (uTextureCameraMatrices, ivec2(1, 0), 0), texelFetch (uTextureCameraMatrices, ivec2(2, 0), 0), texelFetch (uTextureCameraMatrices, ivec2(3, 0), 0));"),s.push("mat4 viewNormalMatrix = mat4 (texelFetch (uTextureCameraMatrices, ivec2(0, 1), 0), texelFetch (uTextureCameraMatrices, ivec2(1, 1), 0), texelFetch (uTextureCameraMatrices, ivec2(2, 1), 0), texelFetch (uTextureCameraMatrices, ivec2(3, 1), 0));"),s.push("mat4 projMatrix = mat4 (texelFetch (uTextureCameraMatrices, ivec2(0, 2), 0), texelFetch (uTextureCameraMatrices, ivec2(1, 2), 0), texelFetch (uTextureCameraMatrices, ivec2(2, 2), 0), texelFetch (uTextureCameraMatrices, ivec2(3, 2), 0));"),s.push("mat4 worldMatrix = mat4 (texelFetch (uTextureModelMatrices, ivec2(0, 0), 0), texelFetch (uTextureModelMatrices, ivec2(1, 0), 0), texelFetch (uTextureModelMatrices, ivec2(2, 0), 0), texelFetch (uTextureModelMatrices, ivec2(3, 0), 0));"),s.push("mat4 worldNormalMatrix = mat4 (texelFetch (uTextureModelMatrices, ivec2(0, 1), 0), texelFetch (uTextureModelMatrices, ivec2(1, 1), 0), texelFetch (uTextureModelMatrices, ivec2(2, 1), 0), texelFetch (uTextureModelMatrices, ivec2(3, 1), 0));"),s.push("int polygonIndex = gl_VertexID / 3;"),s.push("int h_packed_object_id_index = (polygonIndex >> 3) & 4095;"),s.push("int v_packed_object_id_index = (polygonIndex >> 3) >> 12;"),s.push("int objectIndex = int(texelFetch(uTexturePerPolygonIdPortionIds, ivec2(h_packed_object_id_index, v_packed_object_id_index), 0).r);"),s.push("ivec2 objectIndexCoords = ivec2(objectIndex % 512, objectIndex / 512);"),s.push("uvec4 flags = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+2, objectIndexCoords.y), 0);"),s.push("uvec4 flags2 = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+3, objectIndexCoords.y), 0);"),s.push("if (int(flags.y) != renderPass) {"),s.push("   gl_Position = vec4(3.0, 3.0, 3.0, 1.0);"),s.push("   return;"),s.push("} else {"),s.push("ivec4 packedVertexBase = ivec4(texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+4, objectIndexCoords.y), 0));"),s.push("ivec4 packedIndexBaseOffset = ivec4(texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+5, objectIndexCoords.y), 0));"),s.push("int indexBaseOffset = (packedIndexBaseOffset.r << 24) + (packedIndexBaseOffset.g << 16) + (packedIndexBaseOffset.b << 8) + packedIndexBaseOffset.a;"),s.push("int h_index = (polygonIndex - indexBaseOffset) & 4095;"),s.push("int v_index = (polygonIndex - indexBaseOffset) >> 12;"),s.push("ivec3 vertexIndices = ivec3(texelFetch(uTexturePerPolygonIdIndices, ivec2(h_index, v_index), 0));"),s.push("ivec3 uniqueVertexIndexes = vertexIndices + (packedVertexBase.r << 24) + (packedVertexBase.g << 16) + (packedVertexBase.b << 8) + packedVertexBase.a;"),s.push("ivec3 indexPositionH = uniqueVertexIndexes & 4095;"),s.push("ivec3 indexPositionV = uniqueVertexIndexes >> 12;"),s.push("mat4 positionsDecodeMatrix = transpose(mat4 (texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+0, objectIndexCoords.y), 0), texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+1, objectIndexCoords.y), 0), texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+2, objectIndexCoords.y), 0), vec4(0, 0, 0, 1)));"),s.push("uint solid = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+7, objectIndexCoords.y), 0).r;"),s.push("positions[0] = vec3(texelFetch(uTexturePerVertexIdCoordinates, ivec2(indexPositionH.r, indexPositionV.r), 0));"),s.push("positions[1] = vec3(texelFetch(uTexturePerVertexIdCoordinates, ivec2(indexPositionH.g, indexPositionV.g), 0));"),s.push("positions[2] = vec3(texelFetch(uTexturePerVertexIdCoordinates, ivec2(indexPositionH.b, indexPositionV.b), 0));"),s.push("vec3 normal = normalize(cross(positions[2] - positions[0], positions[1] - positions[0]));"),s.push("vec3 position;"),s.push("position = positions[gl_VertexID % 3];"),s.push("vec3 viewNormal = -normalize((transpose(inverse(viewMatrix*positionsDecodeMatrix)) * vec4(normal,1)).xyz);"),s.push("if (solid != 1u) {"),s.push("if (isPerspectiveMatrix(projMatrix)) {"),s.push("vec3 uCameraEyeRtcInQuantizedSpace = (inverse(worldMatrix * positionsDecodeMatrix) * vec4(uCameraEyeRtc, 1)).xyz;"),s.push("if (dot(position.xyz - uCameraEyeRtcInQuantizedSpace, normal) < 0.0) {"),s.push("position = positions[2 - (gl_VertexID % 3)];"),s.push("viewNormal = -viewNormal;"),s.push("}"),s.push("} else {"),s.push("if (viewNormal.z < 0.0) {"),s.push("position = positions[2 - (gl_VertexID % 3)];"),s.push("viewNormal = -viewNormal;"),s.push("}"),s.push("}"),s.push("}"),s.push("vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),s.push("vec4 offset = vec4(texelFetch (uTexturePerObjectIdOffsets, objectIndexCoords, 0).rgb, 0.0);"),s.push("worldPosition.xyz = worldPosition.xyz + offset.xyz;"),s.push("vec4 viewPosition = viewMatrix * worldPosition; "),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),t&&(s.push("vWorldPosition = worldPosition;"),s.push("vFlags2 = flags2.r;")),s.push("gl_Position = clipPos;"),s.push("}"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Triangles dataTexture draw fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("in float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("varying float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("flat in uint vFlags2;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("uniform vec4 color;"),i.push("out vec4 outColor;"),i.push("void main(void) {"),s){i.push("  bool clippable = vFlags2 > 0u;"),i.push("  if (clippable) {"),i.push("  float dist = 0.0;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("if (sectionPlaneActive"+e+") {"),i.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("}");i.push("  if (dist > 0.0) { "),i.push("      discard;"),i.push("  }"),i.push("}")}return e.logarithmicDepthBufferEnabled&&i.push("    gl_FragDepth = log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("    outColor = color;"),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Nt=p.vec3(),Ot=new Float32Array([0,0,0,1]);class St{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=a.textureState,h=t._state.origin;if(!this._program&&(this._allocate(t),this.errors))return;if(e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),l.bindCommonTextures(this._program,this._uTexturePerObjectIdPositionsDecodeMatrix,this._uTexturePerVertexIdCoordinates,this._uTexturePerObjectIdColorsAndFlags,this._uTextureCameraMatrices,this._uTextureModelMatrices,this._uTexturePerObjectIdOffsets),e.pickViewMatrix&&l.bindPickCameraTexture(this._program,this._uTextureCameraMatrices),n.uniform1i(this._uRenderPass,s),s===Ke){const e=r.xrayMaterial._state,t=e.edgeColor,s=e.edgeAlpha;n.uniform4f(this._uColor,t[0],t[1],t[2],s)}else if(s===We){const e=r.highlightMaterial._state,t=e.edgeColor,s=e.edgeAlpha;n.uniform4f(this._uColor,t[0],t[1],t[2],s)}else if(s===ze){const e=r.selectedMaterial._state,t=e.edgeColor,s=e.edgeAlpha;n.uniform4f(this._uColor,t[0],t[1],t[2],s)}else n.uniform4fv(this._uColor,Ot);n.uniformMatrix4fv(this._uViewMatrix,!1,h?j(o.viewMatrix,h):o.viewMatrix),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix);const c=r._sectionPlanesState.sectionPlanes.length;if(c>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*c,o=i.renderFlags;for(let t=0;t<c;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(h){const e=W(s.dist,s.dir,h,Nt);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}a.numEdgeIndices8Bits>0&&(l.bindEdgeIndicesTextures(this._program,this._uTexturePerEdgeIdPortionIds,this._uTexturePerPolygonIdEdgeIndices,8),n.drawArrays(n.LINES,0,a.numEdgeIndices8Bits)),a.numEdgeIndices16Bits>0&&(l.bindEdgeIndicesTextures(this._program,this._uTexturePerEdgeIdPortionIds,this._uTexturePerPolygonIdEdgeIndices,16),n.drawArrays(n.LINES,0,a.numEdgeIndices16Bits)),a.numEdgeIndices32Bits>0&&(l.bindEdgeIndicesTextures(this._program,this._uTexturePerEdgeIdPortionIds,this._uTexturePerPolygonIdEdgeIndices,32),n.drawArrays(n.LINES,0,a.numEdgeIndices32Bits)),e.drawElements++}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uColor=s.getLocation("color"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC")),this._uTexturePerObjectIdPositionsDecodeMatrix="uTexturePerObjectIdPositionsDecodeMatrix",this._uTexturePerObjectIdColorsAndFlags="uTexturePerObjectIdColorsAndFlags",this._uTexturePerVertexIdCoordinates="uTexturePerVertexIdCoordinates",this._uTexturePerPolygonIdEdgeIndices="uTexturePerPolygonIdEdgeIndices",this._uTexturePerEdgeIdPortionIds="uTexturePerEdgeIdPortionIds",this._uTextureCameraMatrices="uTextureCameraMatrices",this._uTextureModelMatrices="uTextureModelMatrices",this._uTexturePerObjectIdOffsets="uTexturePerObjectIdOffsets"}_bindProgram(){const e=this._scene,t=e.canvas.gl,s=this._program,i=e.camera.project;if(s.bind(),e.logarithmicDepthBufferEnabled){const e=2/(Math.log(i.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Batched geometry edges drawing vertex shader"),s.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),s.push("precision highp float;"),s.push("precision highp int;"),s.push("precision highp usampler2D;"),s.push("precision highp isampler2D;"),s.push("precision highp sampler2D;"),s.push("#else"),s.push("precision mediump float;"),s.push("precision mediump int;"),s.push("precision mediump usampler2D;"),s.push("precision mediump isampler2D;"),s.push("precision mediump sampler2D;"),s.push("#endif"),s.push("uniform int renderPass;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("uniform highp sampler2D uTexturePerObjectIdPositionsDecodeMatrix;"),s.push("uniform lowp usampler2D uTexturePerObjectIdColorsAndFlags;"),s.push("uniform highp sampler2D uTexturePerObjectIdOffsets;"),s.push("uniform mediump usampler2D uTexturePerVertexIdCoordinates;"),s.push("uniform highp usampler2D uTexturePerPolygonIdEdgeIndices;"),s.push("uniform mediump usampler2D uTexturePerEdgeIdPortionIds;"),s.push("uniform highp sampler2D uTextureCameraMatrices;"),s.push("uniform highp sampler2D uTextureModelMatrices;"),s.push("uniform vec4 color;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("out float isPerspective;")),t&&(s.push("out vec4 vWorldPosition;"),s.push("flat out uint vFlags2;")),s.push("out vec4 vColor;"),s.push("void main(void) {"),s.push("mat4 viewMatrix = mat4 (texelFetch (uTextureCameraMatrices, ivec2(0, 0), 0), texelFetch (uTextureCameraMatrices, ivec2(1, 0), 0), texelFetch (uTextureCameraMatrices, ivec2(2, 0), 0), texelFetch (uTextureCameraMatrices, ivec2(3, 0), 0));"),s.push("mat4 projMatrix = mat4 (texelFetch (uTextureCameraMatrices, ivec2(0, 2), 0), texelFetch (uTextureCameraMatrices, ivec2(1, 2), 0), texelFetch (uTextureCameraMatrices, ivec2(2, 2), 0), texelFetch (uTextureCameraMatrices, ivec2(3, 2), 0));"),s.push("mat4 worldMatrix = mat4 (texelFetch (uTextureModelMatrices, ivec2(0, 0), 0), texelFetch (uTextureModelMatrices, ivec2(1, 0), 0), texelFetch (uTextureModelMatrices, ivec2(2, 0), 0), texelFetch (uTextureModelMatrices, ivec2(3, 0), 0));"),s.push("int edgeIndex = gl_VertexID / 2;"),s.push("int h_packed_object_id_index = (edgeIndex >> 3) & 4095;"),s.push("int v_packed_object_id_index = (edgeIndex >> 3) >> 12;"),s.push("int objectIndex = int(texelFetch(uTexturePerEdgeIdPortionIds, ivec2(h_packed_object_id_index, v_packed_object_id_index), 0).r);"),s.push("ivec2 objectIndexCoords = ivec2(objectIndex % 512, objectIndex / 512);"),s.push("uvec4 flags = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+2, objectIndexCoords.y), 0);"),s.push("uvec4 flags2 = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+3, objectIndexCoords.y), 0);"),s.push("if (int(flags.z) != renderPass) {"),s.push("   gl_Position = vec4(3.0, 3.0, 3.0, 1.0);"),s.push("   return;"),s.push("} else {"),s.push("ivec4 packedVertexBase = ivec4(texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+4, objectIndexCoords.y), 0));"),s.push("ivec4 packedEdgeIndexBaseOffset = ivec4(texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+6, objectIndexCoords.y), 0));"),s.push("int edgeIndexBaseOffset = (packedEdgeIndexBaseOffset.r << 24) + (packedEdgeIndexBaseOffset.g << 16) + (packedEdgeIndexBaseOffset.b << 8) + packedEdgeIndexBaseOffset.a;"),s.push("int h_index = (edgeIndex - edgeIndexBaseOffset) & 4095;"),s.push("int v_index = (edgeIndex - edgeIndexBaseOffset) >> 12;"),s.push("ivec3 vertexIndices = ivec3(texelFetch(uTexturePerPolygonIdEdgeIndices, ivec2(h_index, v_index), 0));"),s.push("ivec3 uniqueVertexIndexes = vertexIndices + (packedVertexBase.r << 24) + (packedVertexBase.g << 16) + (packedVertexBase.b << 8) + packedVertexBase.a;"),s.push("int indexPositionH = uniqueVertexIndexes[gl_VertexID % 2] & 4095;"),s.push("int indexPositionV = uniqueVertexIndexes[gl_VertexID % 2] >> 12;"),s.push("mat4 positionsDecodeMatrix = transpose(mat4 (texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+0, objectIndexCoords.y), 0), texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+1, objectIndexCoords.y), 0), texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+2, objectIndexCoords.y), 0), vec4(0, 0, 0, 1)));"),s.push("uvec4 flags = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+2, objectIndexCoords.y), 0);"),s.push("uvec4 flags2 = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+3, objectIndexCoords.y), 0);"),s.push("vec3 position = vec3(texelFetch(uTexturePerVertexIdCoordinates, ivec2(indexPositionH, indexPositionV), 0));"),s.push("      vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),s.push("vec4 offset = vec4(texelFetch (uTexturePerObjectIdOffsets, objectIndexCoords, 0).rgb, 0.0);"),s.push("worldPosition.xyz = worldPosition.xyz + offset.xyz;"),s.push("      vec4 viewPosition  = viewMatrix * worldPosition; "),t&&(s.push("  vWorldPosition = worldPosition;"),s.push("  vFlags2 = flags2.r;")),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),s.push("gl_Position = clipPos;"),s.push("vColor = vec4(color.r, color.g, color.b, color.a);"),s.push("}"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Batched geometry edges drawing fragment shader"),e.logarithmicDepthBufferEnabled&&i.push("#extension GL_EXT_frag_depth : enable"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("in float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("flat in uint vFlags2;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("in vec4 vColor;"),i.push("out vec4 outColor;"),i.push("void main(void) {"),s){i.push("  bool clippable = vFlags2 > 0u;"),i.push("  if (clippable) {"),i.push("  float dist = 0.0;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("if (sectionPlaneActive"+e+") {"),i.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("}");i.push("  if (dist > 0.0) { discard; }"),i.push("}")}return e.logarithmicDepthBufferEnabled&&i.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("   outColor            = vColor;"),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const wt=p.vec3();class Mt{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene;r.camera;const o=r.canvas.gl,n=t._state,a=n.textureState,l=t._state.origin;if(!this._program&&(this._allocate(t),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),a.bindCommonTextures(this._program,this._uTexturePerObjectIdPositionsDecodeMatrix,this._uTexturePerVertexIdCoordinates,this._uTexturePerObjectIdColorsAndFlags,this._uTextureCameraMatrices,this._uTextureModelMatrices,this._uTexturePerObjectIdOffsets),e.pickViewMatrix&&a.bindPickCameraTexture(this._program,this._uTextureCameraMatrices),o.uniform1i(this._uRenderPass,s);const h=r._sectionPlanesState.sectionPlanes.length;if(h>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*h,n=i.renderFlags;for(let t=0;t<h;t++){const i=this._uSectionPlanes[t];if(i){const r=n.sectionPlanesActivePerLayer[s+t];if(o.uniform1i(i.active,r?1:0),r){const s=e[t];if(l){const e=W(s.dist,s.dir,l,wt);o.uniform3fv(i.pos,e)}else o.uniform3fv(i.pos,s.pos);o.uniform3fv(i.dir,s.dir)}}}}n.numEdgeIndices8Bits>0&&(a.bindEdgeIndicesTextures(this._program,this._uTexturePerEdgeIdPortionIds,this._uTexturePerPolygonIdEdgeIndices,8),o.drawArrays(o.LINES,0,n.numEdgeIndices8Bits)),n.numEdgeIndices16Bits>0&&(a.bindEdgeIndicesTextures(this._program,this._uTexturePerEdgeIdPortionIds,this._uTexturePerPolygonIdEdgeIndices,16),o.drawArrays(o.LINES,0,n.numEdgeIndices16Bits)),n.numEdgeIndices32Bits>0&&(a.bindEdgeIndicesTextures(this._program,this._uTexturePerEdgeIdPortionIds,this._uTexturePerPolygonIdEdgeIndices,32),o.drawArrays(o.LINES,0,n.numEdgeIndices32Bits)),e.drawElements++}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC")),this._uTexturePerObjectIdPositionsDecodeMatrix="uTexturePerObjectIdPositionsDecodeMatrix",this._uTexturePerObjectIdColorsAndFlags="uTexturePerObjectIdColorsAndFlags",this._uTexturePerVertexIdCoordinates="uTexturePerVertexIdCoordinates",this._uTexturePerPolygonIdEdgeIndices="uTexturePerPolygonIdEdgeIndices",this._uTexturePerEdgeIdPortionIds="uTexturePerEdgeIdPortionIds",this._uTextureCameraMatrices="uTextureCameraMatrices",this._uTextureModelMatrices="uTextureModelMatrices",this._uTexturePerObjectIdOffsets="uTexturePerObjectIdOffsets"}_bindProgram(){const e=this._scene,t=e.canvas.gl,s=this._program,i=e.camera.project;if(s.bind(),e.logarithmicDepthBufferEnabled){const e=2/(Math.log(i.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Batched geometry edges drawing vertex shader"),s.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),s.push("precision highp float;"),s.push("precision highp int;"),s.push("precision highp usampler2D;"),s.push("precision highp isampler2D;"),s.push("precision highp sampler2D;"),s.push("#else"),s.push("precision mediump float;"),s.push("precision mediump int;"),s.push("precision mediump usampler2D;"),s.push("precision mediump isampler2D;"),s.push("precision mediump sampler2D;"),s.push("#endif"),s.push("uniform int renderPass;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("uniform highp sampler2D uTexturePerObjectIdPositionsDecodeMatrix;"),s.push("uniform lowp usampler2D uTexturePerObjectIdColorsAndFlags;"),s.push("uniform highp sampler2D uTexturePerObjectIdOffsets;"),s.push("uniform mediump usampler2D uTexturePerVertexIdCoordinates;"),s.push("uniform highp usampler2D uTexturePerPolygonIdEdgeIndices;"),s.push("uniform mediump usampler2D uTexturePerEdgeIdPortionIds;"),s.push("uniform highp sampler2D uTextureCameraMatrices;"),s.push("uniform highp sampler2D uTextureModelMatrices;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("out float isPerspective;")),t&&(s.push("out vec4 vWorldPosition;"),s.push("flat out uint vFlags2;")),s.push("out vec4 vColor;"),s.push("void main(void) {"),s.push("mat4 viewMatrix = mat4 (texelFetch (uTextureCameraMatrices, ivec2(0, 0), 0), texelFetch (uTextureCameraMatrices, ivec2(1, 0), 0), texelFetch (uTextureCameraMatrices, ivec2(2, 0), 0), texelFetch (uTextureCameraMatrices, ivec2(3, 0), 0));"),s.push("mat4 projMatrix = mat4 (texelFetch (uTextureCameraMatrices, ivec2(0, 2), 0), texelFetch (uTextureCameraMatrices, ivec2(1, 2), 0), texelFetch (uTextureCameraMatrices, ivec2(2, 2), 0), texelFetch (uTextureCameraMatrices, ivec2(3, 2), 0));"),s.push("mat4 worldMatrix = mat4 (texelFetch (uTextureModelMatrices, ivec2(0, 0), 0), texelFetch (uTextureModelMatrices, ivec2(1, 0), 0), texelFetch (uTextureModelMatrices, ivec2(2, 0), 0), texelFetch (uTextureModelMatrices, ivec2(3, 0), 0));"),s.push("int edgeIndex = gl_VertexID / 2;"),s.push("int h_packed_object_id_index = (edgeIndex >> 3) & 4095;"),s.push("int v_packed_object_id_index = (edgeIndex >> 3) >> 12;"),s.push("int objectIndex = int(texelFetch(uTexturePerEdgeIdPortionIds, ivec2(h_packed_object_id_index, v_packed_object_id_index), 0).r);"),s.push("ivec2 objectIndexCoords = ivec2(objectIndex % 512, objectIndex / 512);"),s.push("uvec4 flags = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+2, objectIndexCoords.y), 0);"),s.push("uvec4 flags2 = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+3, objectIndexCoords.y), 0);"),s.push("if (int(flags.z) != renderPass) {"),s.push("   gl_Position = vec4(3.0, 3.0, 3.0, 1.0);"),s.push("   return;"),s.push("} else {"),s.push("ivec4 packedVertexBase = ivec4(texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+4, objectIndexCoords.y), 0));"),s.push("ivec4 packedEdgeIndexBaseOffset = ivec4(texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+6, objectIndexCoords.y), 0));"),s.push("int edgeIndexBaseOffset = (packedEdgeIndexBaseOffset.r << 24) + (packedEdgeIndexBaseOffset.g << 16) + (packedEdgeIndexBaseOffset.b << 8) + packedEdgeIndexBaseOffset.a;"),s.push("int h_index = (edgeIndex - edgeIndexBaseOffset) & 4095;"),s.push("int v_index = (edgeIndex - edgeIndexBaseOffset) >> 12;"),s.push("ivec3 vertexIndices = ivec3(texelFetch(uTexturePerPolygonIdEdgeIndices, ivec2(h_index, v_index), 0));"),s.push("ivec3 uniqueVertexIndexes = vertexIndices + (packedVertexBase.r << 24) + (packedVertexBase.g << 16) + (packedVertexBase.b << 8) + packedVertexBase.a;"),s.push("int indexPositionH = uniqueVertexIndexes[gl_VertexID % 2] & 4095;"),s.push("int indexPositionV = uniqueVertexIndexes[gl_VertexID % 2] >> 12;"),s.push("mat4 positionsDecodeMatrix = transpose(mat4 (texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+0, objectIndexCoords.y), 0), texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+1, objectIndexCoords.y), 0), texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+2, objectIndexCoords.y), 0), vec4(0, 0, 0, 1)));"),s.push("uvec4 flags = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+2, objectIndexCoords.y), 0);"),s.push("uvec4 flags2 = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+3, objectIndexCoords.y), 0);"),s.push("vec3 position = vec3(texelFetch(uTexturePerVertexIdCoordinates, ivec2(indexPositionH, indexPositionV), 0));"),s.push("uvec4 color = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+0, objectIndexCoords.y), 0);"),s.push("if (color.a == 0u) {"),s.push("   gl_Position = vec4(3.0, 3.0, 3.0, 1.0);"),s.push("   return;"),s.push("};"),s.push("      vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),s.push("vec4 offset = vec4(texelFetch (uTexturePerObjectIdOffsets, objectIndexCoords, 0).rgb, 0.0);"),s.push("worldPosition.xyz = worldPosition.xyz + offset.xyz;"),s.push("      vec4 viewPosition  = viewMatrix * worldPosition; "),t&&(s.push("  vWorldPosition = worldPosition;"),s.push("  vFlags2 = flags2.r;")),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),s.push("gl_Position = clipPos;"),s.push("vec4 rgb = vec4(color.rgba);"),s.push("vColor = vec4(float(rgb.r*0.5) / 255.0, float(rgb.g*0.5) / 255.0, float(rgb.b*0.5) / 255.0, float(rgb.a) / 255.0);"),s.push("}"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Batched geometry edges drawing fragment shader"),e.logarithmicDepthBufferEnabled&&i.push("#extension GL_EXT_frag_depth : enable"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("in float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("flat in uint vFlags2;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("in vec4 vColor;"),i.push("out vec4 outColor;"),i.push("void main(void) {"),s){i.push("  bool clippable = vFlags2 > 0u;"),i.push("  if (clippable) {"),i.push("  float dist = 0.0;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("if (sectionPlaneActive"+e+") {"),i.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("}");i.push("  if (dist > 0.0) { discard; }"),i.push("}")}return e.logarithmicDepthBufferEnabled&&i.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("   outColor            = vColor;"),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Bt=p.vec3();class Ft{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=a.textureState,h=t._state.origin;this._program||this._allocate(t),e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram(e)),l.bindCommonTextures(this._program,this._uTexturePerObjectIdPositionsDecodeMatrix,this._uTexturePerVertexIdCoordinates,this._uTexturePerObjectIdColorsAndFlags,this._uTextureCameraMatrices,this._uTextureModelMatrices,this._uTexturePerObjectIdOffsets);let c=o.eye;e.pickViewMatrix&&(l.bindPickCameraTexture(this._program,this._uTextureCameraMatrices),c=e.pickOrigin||c);const u=[c[0]-h[0],c[1]-h[1],c[2]-h[2]];if(n.uniform3fv(this._uCameraEyeRtc,u),n.uniform1i(this._uRenderPass,s),r.logarithmicDepthBufferEnabled){const e=2/(Math.log(o.project.far+1)/Math.LN2);n.uniform1f(this._uLogDepthBufFC,e)}const A=r._sectionPlanesState.sectionPlanes.length;if(A>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*A,o=i.renderFlags;for(let t=0;t<A;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(h){const e=W(s.dist,s.dir,h,Bt);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}a.numIndices8Bits>0&&(l.bindTriangleIndicesTextures(this._program,this._uTexturePerPolygonIdPortionIds,this._uTexturePerPolygonIdIndices,8),n.drawArrays(n.TRIANGLES,0,a.numIndices8Bits)),a.numIndices16Bits>0&&(l.bindTriangleIndicesTextures(this._program,this._uTexturePerPolygonIdPortionIds,this._uTexturePerPolygonIdIndices,16),n.drawArrays(n.TRIANGLES,0,a.numIndices16Bits)),a.numIndices32Bits>0&&(l.bindTriangleIndicesTextures(this._program,this._uTexturePerPolygonIdPortionIds,this._uTexturePerPolygonIdIndices,32),n.drawArrays(n.TRIANGLES,0,a.numIndices32Bits)),e.drawElements++}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uPickInvisible=s.getLocation("pickInvisible"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});this._withSAO&&(this._uOcclusionTexture="uOcclusionTexture",this._uSAOParams=s.getLocation("uSAOParams")),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC")),this._uTexturePerObjectIdPositionsDecodeMatrix="uTexturePerObjectIdPositionsDecodeMatrix",this._uTexturePerObjectIdColorsAndFlags="uTexturePerObjectIdColorsAndFlags",this._uTexturePerVertexIdCoordinates="uTexturePerVertexIdCoordinates",this._uTexturePerPolygonIdNormals="uTexturePerPolygonIdNormals",this._uTexturePerPolygonIdIndices="uTexturePerPolygonIdIndices",this._uTexturePerPolygonIdPortionIds="uTexturePerPolygonIdPortionIds",this._uTextureCameraMatrices="uTextureCameraMatrices",this._uTextureModelMatrices="uTextureModelMatrices",this._uTexturePerObjectIdOffsets="uTexturePerObjectIdOffsets",this._uCameraEyeRtc=s.getLocation("uCameraEyeRtc")}_bindProgram(e){const t=this._scene.canvas.gl;this._program.bind(),t.uniform1i(this._uPickInvisible,e.pickInvisible)}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Batched geometry picking vertex shader"),s.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),s.push("precision highp float;"),s.push("precision highp int;"),s.push("precision highp usampler2D;"),s.push("precision highp isampler2D;"),s.push("precision highp sampler2D;"),s.push("#else"),s.push("precision mediump float;"),s.push("precision mediump int;"),s.push("precision mediump usampler2D;"),s.push("precision mediump isampler2D;"),s.push("precision mediump sampler2D;"),s.push("#endif"),s.push("uniform int renderPass;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("uniform bool pickInvisible;"),s.push("uniform highp sampler2D uTexturePerObjectIdPositionsDecodeMatrix;"),s.push("uniform lowp usampler2D uTexturePerObjectIdColorsAndFlags;"),s.push("uniform highp sampler2D uTexturePerObjectIdOffsets;"),s.push("uniform mediump usampler2D uTexturePerVertexIdCoordinates;"),s.push("uniform highp usampler2D uTexturePerPolygonIdIndices;"),s.push("uniform mediump usampler2D uTexturePerPolygonIdPortionIds;"),s.push("uniform highp sampler2D uTextureCameraMatrices;"),s.push("uniform highp sampler2D uTextureModelMatrices;"),s.push("uniform vec3 uCameraEyeRtc;"),s.push("vec3 positions[3];"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("out float isPerspective;")),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),t&&(s.push("smooth out vec4 vWorldPosition;"),s.push("flat out uvec4 vFlags2;")),s.push("out vec4 vPickColor;"),s.push("void main(void) {"),s.push("mat4 viewMatrix = mat4 (texelFetch (uTextureCameraMatrices, ivec2(0, 0), 0), texelFetch (uTextureCameraMatrices, ivec2(1, 0), 0), texelFetch (uTextureCameraMatrices, ivec2(2, 0), 0), texelFetch (uTextureCameraMatrices, ivec2(3, 0), 0));"),s.push("mat4 viewNormalMatrix = mat4 (texelFetch (uTextureCameraMatrices, ivec2(0, 1), 0), texelFetch (uTextureCameraMatrices, ivec2(1, 1), 0), texelFetch (uTextureCameraMatrices, ivec2(2, 1), 0), texelFetch (uTextureCameraMatrices, ivec2(3, 1), 0));"),s.push("mat4 projMatrix = mat4 (texelFetch (uTextureCameraMatrices, ivec2(0, 2), 0), texelFetch (uTextureCameraMatrices, ivec2(1, 2), 0), texelFetch (uTextureCameraMatrices, ivec2(2, 2), 0), texelFetch (uTextureCameraMatrices, ivec2(3, 2), 0));"),s.push("mat4 worldMatrix = mat4 (texelFetch (uTextureModelMatrices, ivec2(0, 0), 0), texelFetch (uTextureModelMatrices, ivec2(1, 0), 0), texelFetch (uTextureModelMatrices, ivec2(2, 0), 0), texelFetch (uTextureModelMatrices, ivec2(3, 0), 0));"),s.push("mat4 worldNormalMatrix = mat4 (texelFetch (uTextureModelMatrices, ivec2(0, 1), 0), texelFetch (uTextureModelMatrices, ivec2(1, 1), 0), texelFetch (uTextureModelMatrices, ivec2(2, 1), 0), texelFetch (uTextureModelMatrices, ivec2(3, 1), 0));"),s.push("int polygonIndex = gl_VertexID / 3;"),s.push("int h_packed_object_id_index = (polygonIndex >> 3) & 4095;"),s.push("int v_packed_object_id_index = (polygonIndex >> 3) >> 12;"),s.push("int objectIndex = int(texelFetch(uTexturePerPolygonIdPortionIds, ivec2(h_packed_object_id_index, v_packed_object_id_index), 0).r);"),s.push("ivec2 objectIndexCoords = ivec2(objectIndex % 512, objectIndex / 512);"),s.push("uvec4 flags = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+2, objectIndexCoords.y), 0);"),s.push("uvec4 flags2 = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+3, objectIndexCoords.y), 0);"),s.push("if (int(flags.w) != renderPass) {"),s.push("   gl_Position = vec4(3.0, 3.0, 3.0, 1.0);"),s.push("   return;"),s.push("} else {"),s.push("ivec4 packedVertexBase = ivec4(texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+4, objectIndexCoords.y), 0));"),s.push("ivec4 packedIndexBaseOffset = ivec4(texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+5, objectIndexCoords.y), 0));"),s.push("int indexBaseOffset = (packedIndexBaseOffset.r << 24) + (packedIndexBaseOffset.g << 16) + (packedIndexBaseOffset.b << 8) + packedIndexBaseOffset.a;"),s.push("int h_index = (polygonIndex - indexBaseOffset) & 4095;"),s.push("int v_index = (polygonIndex - indexBaseOffset) >> 12;"),s.push("ivec3 vertexIndices = ivec3(texelFetch(uTexturePerPolygonIdIndices, ivec2(h_index, v_index), 0));"),s.push("ivec3 uniqueVertexIndexes = vertexIndices + (packedVertexBase.r << 24) + (packedVertexBase.g << 16) + (packedVertexBase.b << 8) + packedVertexBase.a;"),s.push("ivec3 indexPositionH = uniqueVertexIndexes & 4095;"),s.push("ivec3 indexPositionV = uniqueVertexIndexes >> 12;"),s.push("mat4 positionsDecodeMatrix = transpose(mat4 (texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+0, objectIndexCoords.y), 0), texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+1, objectIndexCoords.y), 0), texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+2, objectIndexCoords.y), 0), vec4(0, 0, 0, 1)));"),s.push("uint solid = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+7, objectIndexCoords.y), 0).r;"),s.push("positions[0] = vec3(texelFetch(uTexturePerVertexIdCoordinates, ivec2(indexPositionH.r, indexPositionV.r), 0));"),s.push("positions[1] = vec3(texelFetch(uTexturePerVertexIdCoordinates, ivec2(indexPositionH.g, indexPositionV.g), 0));"),s.push("positions[2] = vec3(texelFetch(uTexturePerVertexIdCoordinates, ivec2(indexPositionH.b, indexPositionV.b), 0));"),s.push("uvec4 color = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+0, objectIndexCoords.y), 0);"),s.push("if (color.a == 0u) {"),s.push("   gl_Position = vec4(3.0, 3.0, 3.0, 1.0);"),s.push("   return;"),s.push("};"),s.push("vPickColor = vec4(texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+1, objectIndexCoords.y), 0)) / 255.0;"),s.push("vec3 normal = normalize(cross(positions[2] - positions[0], positions[1] - positions[0]));"),s.push("vec3 position;"),s.push("position = positions[gl_VertexID % 3];"),s.push("if (solid != 1u) {"),s.push("if (isPerspectiveMatrix(projMatrix)) {"),s.push("vec3 uCameraEyeRtcInQuantizedSpace = (inverse(worldMatrix * positionsDecodeMatrix) * vec4(uCameraEyeRtc, 1)).xyz;"),s.push("if (dot(position.xyz - uCameraEyeRtcInQuantizedSpace, normal) < 0.0) {"),s.push("position = positions[2 - (gl_VertexID % 3)];"),s.push("}"),s.push("} else {"),s.push("vec3 viewNormal = -normalize((transpose(inverse(viewMatrix*positionsDecodeMatrix)) * vec4(normal,1)).xyz);"),s.push("if (viewNormal.z < 0.0) {"),s.push("position = positions[2 - (gl_VertexID % 3)];"),s.push("}"),s.push("}"),s.push("}"),s.push("vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),s.push("vec4 offset = vec4(texelFetch (uTexturePerObjectIdOffsets, objectIndexCoords, 0).rgb, 0.0);"),s.push("worldPosition.xyz = worldPosition.xyz + offset.xyz;"),s.push("vec4 viewPosition = viewMatrix * worldPosition; "),t&&(s.push("      vWorldPosition = worldPosition;"),s.push("      vFlags2 = flags2;")),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),s.push("gl_Position = clipPos;"),s.push("  }"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Batched geometry picking fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("in float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("flat in uvec4 vFlags2;");for(var r=0;r<t.sectionPlanes.length;r++)i.push("uniform bool sectionPlaneActive"+r+";"),i.push("uniform vec3 sectionPlanePos"+r+";"),i.push("uniform vec3 sectionPlaneDir"+r+";")}if(i.push("in vec4 vPickColor;"),i.push("out vec4 outPickColor;"),i.push("void main(void) {"),s){i.push("  bool clippable = (float(vFlags2.x) > 0.0);"),i.push("  if (clippable) {"),i.push("      float dist = 0.0;");for(r=0;r<t.sectionPlanes.length;r++)i.push("      if (sectionPlaneActive"+r+") {"),i.push("          dist += clamp(dot(-sectionPlaneDir"+r+".xyz, vWorldPosition.xyz - sectionPlanePos"+r+".xyz), 0.0, 1000.0);"),i.push("      }");i.push("      if (dist > 0.0) { discard; }"),i.push("  }")}return e.logarithmicDepthBufferEnabled&&i.push("    gl_FragDepth = log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("   outPickColor = vPickColor; "),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Lt=p.vec3();class Ut{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=a.textureState,h=t._state.origin;this._program||this._allocate(),e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),l.bindCommonTextures(this._program,this._uTexturePerObjectIdPositionsDecodeMatrix,this._uTexturePerVertexIdCoordinates,this._uTexturePerObjectIdColorsAndFlags,this._uTextureCameraMatrices,this._uTextureModelMatrices,this._uTexturePerObjectIdOffsets);let c=o.eye;e.pickViewMatrix&&(l.bindPickCameraTexture(this._program,this._uTextureCameraMatrices),c=e.pickOrigin||c);const u=[c[0]-h[0],c[1]-h[1],c[2]-h[2]];if(n.uniform3fv(this._uCameraEyeRtc,u),n.uniform1i(this._uRenderPass,s),n.uniform1i(this._uPickInvisible,e.pickInvisible),n.uniform1f(this._uPickZNear,e.pickZNear),n.uniform1f(this._uPickZFar,e.pickZFar),r.logarithmicDepthBufferEnabled){const t=2/(Math.log(e.pickZFar+1)/Math.LN2);n.uniform1f(this._uLogDepthBufFC,t)}const A=r._sectionPlanesState.sectionPlanes.length;if(A>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*A,o=i.renderFlags;for(let t=0;t<A;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(h){const e=W(s.dist,s.dir,h,Lt);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}a.numIndices8Bits>0&&(l.bindTriangleIndicesTextures(this._program,this._uTexturePerPolygonIdPortionIds,this._uTexturePerPolygonIdIndices,8),n.drawArrays(n.TRIANGLES,0,a.numIndices8Bits)),a.numIndices16Bits>0&&(l.bindTriangleIndicesTextures(this._program,this._uTexturePerPolygonIdPortionIds,this._uTexturePerPolygonIdIndices,16),n.drawArrays(n.TRIANGLES,0,a.numIndices16Bits)),a.numIndices32Bits>0&&(l.bindTriangleIndicesTextures(this._program,this._uTexturePerPolygonIdPortionIds,this._uTexturePerPolygonIdIndices,32),n.drawArrays(n.TRIANGLES,0,a.numIndices32Bits)),e.drawElements++}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uPickInvisible=s.getLocation("pickInvisible"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});this._aPackedVertexId=s.getAttribute("packedVertexId"),this._uPickZNear=s.getLocation("pickZNear"),this._uPickZFar=s.getLocation("pickZFar"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC")),this._uTexturePerObjectIdPositionsDecodeMatrix="uTexturePerObjectIdPositionsDecodeMatrix",this._uTexturePerObjectIdColorsAndFlags="uTexturePerObjectIdColorsAndFlags",this._uTexturePerVertexIdCoordinates="uTexturePerVertexIdCoordinates",this._uTexturePerPolygonIdNormals="uTexturePerPolygonIdNormals",this._uTexturePerPolygonIdIndices="uTexturePerPolygonIdIndices",this._uTexturePerPolygonIdPortionIds="uTexturePerPolygonIdPortionIds",this._uTextureCameraMatrices="uTextureCameraMatrices",this._uTextureModelMatrices="uTextureModelMatrices",this._uTexturePerObjectIdOffsets="uTexturePerObjectIdOffsets",this._uCameraEyeRtc=s.getLocation("uCameraEyeRtc")}_bindProgram(){this._program.bind()}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Triangles dataTexture pick depth vertex shader"),s.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),s.push("precision highp float;"),s.push("precision highp int;"),s.push("precision highp usampler2D;"),s.push("precision highp isampler2D;"),s.push("precision highp sampler2D;"),s.push("#else"),s.push("precision mediump float;"),s.push("precision mediump int;"),s.push("precision mediump usampler2D;"),s.push("precision mediump isampler2D;"),s.push("precision mediump sampler2D;"),s.push("#endif"),s.push("uniform int renderPass;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("uniform bool pickInvisible;"),s.push("uniform highp sampler2D uTexturePerObjectIdPositionsDecodeMatrix;"),s.push("uniform lowp usampler2D uTexturePerObjectIdColorsAndFlags;"),s.push("uniform highp sampler2D uTexturePerObjectIdOffsets;"),s.push("uniform mediump usampler2D uTexturePerVertexIdCoordinates;"),s.push("uniform highp usampler2D uTexturePerPolygonIdIndices;"),s.push("uniform mediump usampler2D uTexturePerPolygonIdPortionIds;"),s.push("uniform highp sampler2D uTextureCameraMatrices;"),s.push("uniform highp sampler2D uTextureModelMatrices;"),s.push("uniform vec3 uCameraEyeRtc;"),s.push("vec3 positions[3];"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("out float isPerspective;")),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),t&&(s.push("out vec4 vWorldPosition;"),s.push("flat out uint vFlags2;")),s.push("out vec4 vViewPosition;"),s.push("void main(void) {"),s.push("mat4 viewMatrix = mat4 (texelFetch (uTextureCameraMatrices, ivec2(0, 0), 0), texelFetch (uTextureCameraMatrices, ivec2(1, 0), 0), texelFetch (uTextureCameraMatrices, ivec2(2, 0), 0), texelFetch (uTextureCameraMatrices, ivec2(3, 0), 0));"),s.push("mat4 viewNormalMatrix = mat4 (texelFetch (uTextureCameraMatrices, ivec2(0, 1), 0), texelFetch (uTextureCameraMatrices, ivec2(1, 1), 0), texelFetch (uTextureCameraMatrices, ivec2(2, 1), 0), texelFetch (uTextureCameraMatrices, ivec2(3, 1), 0));"),s.push("mat4 projMatrix = mat4 (texelFetch (uTextureCameraMatrices, ivec2(0, 2), 0), texelFetch (uTextureCameraMatrices, ivec2(1, 2), 0), texelFetch (uTextureCameraMatrices, ivec2(2, 2), 0), texelFetch (uTextureCameraMatrices, ivec2(3, 2), 0));"),s.push("mat4 worldMatrix = mat4 (texelFetch (uTextureModelMatrices, ivec2(0, 0), 0), texelFetch (uTextureModelMatrices, ivec2(1, 0), 0), texelFetch (uTextureModelMatrices, ivec2(2, 0), 0), texelFetch (uTextureModelMatrices, ivec2(3, 0), 0));"),s.push("mat4 worldNormalMatrix = mat4 (texelFetch (uTextureModelMatrices, ivec2(0, 1), 0), texelFetch (uTextureModelMatrices, ivec2(1, 1), 0), texelFetch (uTextureModelMatrices, ivec2(2, 1), 0), texelFetch (uTextureModelMatrices, ivec2(3, 1), 0));"),s.push("int polygonIndex = gl_VertexID / 3;"),s.push("int h_packed_object_id_index = (polygonIndex >> 3) & 4095;"),s.push("int v_packed_object_id_index = (polygonIndex >> 3) >> 12;"),s.push("int objectIndex = int(texelFetch(uTexturePerPolygonIdPortionIds, ivec2(h_packed_object_id_index, v_packed_object_id_index), 0).r);"),s.push("ivec2 objectIndexCoords = ivec2(objectIndex % 512, objectIndex / 512);"),s.push("uvec4 flags = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+2, objectIndexCoords.y), 0);"),s.push("uvec4 flags2 = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+3, objectIndexCoords.y), 0);"),s.push("if (int(flags.w) != renderPass) {"),s.push("   gl_Position = vec4(3.0, 3.0, 3.0, 1.0);"),s.push("   return;"),s.push("} else {"),s.push("ivec4 packedVertexBase = ivec4(texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+4, objectIndexCoords.y), 0));"),s.push("ivec4 packedIndexBaseOffset = ivec4(texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+5, objectIndexCoords.y), 0));"),s.push("int indexBaseOffset = (packedIndexBaseOffset.r << 24) + (packedIndexBaseOffset.g << 16) + (packedIndexBaseOffset.b << 8) + packedIndexBaseOffset.a;"),s.push("int h_index = (polygonIndex - indexBaseOffset) & 4095;"),s.push("int v_index = (polygonIndex - indexBaseOffset) >> 12;"),s.push("ivec3 vertexIndices = ivec3(texelFetch(uTexturePerPolygonIdIndices, ivec2(h_index, v_index), 0));"),s.push("ivec3 uniqueVertexIndexes = vertexIndices + (packedVertexBase.r << 24) + (packedVertexBase.g << 16) + (packedVertexBase.b << 8) + packedVertexBase.a;"),s.push("ivec3 indexPositionH = uniqueVertexIndexes & 4095;"),s.push("ivec3 indexPositionV = uniqueVertexIndexes >> 12;"),s.push("mat4 positionsDecodeMatrix = transpose(mat4 (texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+0, objectIndexCoords.y), 0), texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+1, objectIndexCoords.y), 0), texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+2, objectIndexCoords.y), 0), vec4(0, 0, 0, 1)));"),s.push("uint solid = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+7, objectIndexCoords.y), 0).r;"),s.push("positions[0] = vec3(texelFetch(uTexturePerVertexIdCoordinates, ivec2(indexPositionH.r, indexPositionV.r), 0));"),s.push("positions[1] = vec3(texelFetch(uTexturePerVertexIdCoordinates, ivec2(indexPositionH.g, indexPositionV.g), 0));"),s.push("positions[2] = vec3(texelFetch(uTexturePerVertexIdCoordinates, ivec2(indexPositionH.b, indexPositionV.b), 0));"),s.push("uvec4 color = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+0, objectIndexCoords.y), 0);"),s.push("if (color.a == 0u) {"),s.push("   gl_Position = vec4(3.0, 3.0, 3.0, 1.0);"),s.push("   return;"),s.push("};"),s.push("vec3 normal = normalize(cross(positions[2] - positions[0], positions[1] - positions[0]));"),s.push("vec3 position;"),s.push("position = positions[gl_VertexID % 3];"),s.push("if (solid != 1u) {"),s.push("if (isPerspectiveMatrix(projMatrix)) {"),s.push("vec3 uCameraEyeRtcInQuantizedSpace = (inverse(worldMatrix * positionsDecodeMatrix) * vec4(uCameraEyeRtc, 1)).xyz;"),s.push("if (dot(position.xyz - uCameraEyeRtcInQuantizedSpace, normal) < 0.0) {"),s.push("position = positions[2 - (gl_VertexID % 3)];"),s.push("}"),s.push("} else {"),s.push("vec3 viewNormal = -normalize((transpose(inverse(viewMatrix*positionsDecodeMatrix)) * vec4(normal,1)).xyz);"),s.push("if (viewNormal.z < 0.0) {"),s.push("position = positions[2 - (gl_VertexID % 3)];"),s.push("}"),s.push("}"),s.push("}"),s.push("vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),s.push("vec4 offset = vec4(texelFetch (uTexturePerObjectIdOffsets, objectIndexCoords, 0).rgb, 0.0);"),s.push("worldPosition.xyz = worldPosition.xyz + offset.xyz;"),s.push("vec4 viewPosition = viewMatrix * worldPosition; "),t&&(s.push("      vWorldPosition = worldPosition;"),s.push("      vFlags2 = flags2.r;")),s.push("vViewPosition = viewPosition;"),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),s.push("gl_Position = clipPos;"),s.push("  }"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Triangles dataTexture pick depth fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("in float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),i.push("uniform float pickZNear;"),i.push("uniform float pickZFar;"),s){i.push("in vec4 vWorldPosition;"),i.push("flat in uint vFlags2;");for(var r=0;r<t.sectionPlanes.length;r++)i.push("uniform bool sectionPlaneActive"+r+";"),i.push("uniform vec3 sectionPlanePos"+r+";"),i.push("uniform vec3 sectionPlaneDir"+r+";")}if(i.push("in vec4 vViewPosition;"),i.push("vec4 packDepth(const in float depth) {"),i.push("  const vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);"),i.push("  const vec4 bitMask  = vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);"),i.push("  vec4 res = fract(depth * bitShift);"),i.push("  res -= res.xxyz * bitMask;"),i.push("  return res;"),i.push("}"),i.push("out vec4 outPackedDepth;"),i.push("void main(void) {"),s){i.push("  bool clippable = vFlags2 > 0u;"),i.push("  if (clippable) {"),i.push("      float dist = 0.0;");for(r=0;r<t.sectionPlanes.length;r++)i.push("      if (sectionPlaneActive"+r+") {"),i.push("          dist += clamp(dot(-sectionPlaneDir"+r+".xyz, vWorldPosition.xyz - sectionPlanePos"+r+".xyz), 0.0, 1000.0);"),i.push("      }");i.push("      if (dist > 0.0) { discard; }"),i.push("  }")}return e.logarithmicDepthBufferEnabled&&i.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("    float zNormalizedDepth = abs((pickZNear + vViewPosition.z) / (pickZFar - pickZNear));"),i.push("    outPackedDepth = packDepth(zNormalizedDepth); "),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Ht=p.vec3();function Gt(e){const t=1/e;return isNaN(t)||!isFinite(t)?1:t}class Vt{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=a.textureState,h=t._state.origin;e._origin[0]=h[0],e._origin[1]=h[1],e._origin[2]=h[2];const c=t.aabb,u=2e9,A=[Gt(c[3]-c[0])*u,Gt(c[4]-c[1])*u,Gt(c[5]-c[2])*u];e._coordinateScale[0]=Gt(A[0]),e._coordinateScale[1]=Gt(A[1]),e._coordinateScale[2]=Gt(A[2]),this._program||this._allocate(),e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),l.bindCommonTextures(this._program,this._uTexturePerObjectIdPositionsDecodeMatrix,this._uTexturePerVertexIdCoordinates,this._uTexturePerObjectIdColorsAndFlags,this._uTextureCameraMatrices,this._uTextureModelMatrices,this._uTexturePerObjectIdOffsets);let p=o.eye;e.pickViewMatrix&&(l.bindPickCameraTexture(this._program,this._uTextureCameraMatrices),p=e.pickOrigin||p);const d=[p[0]-h[0],p[1]-h[1],p[2]-h[2]];if(n.uniform3fv(this._uCameraEyeRtc,d),n.uniform2fv(this._u_vectorA,e._vectorA),n.uniform2fv(this._u_invVectorAB,e._invVectorAB),n.uniform1i(this._u_layerNumber,e._layerNumber),n.uniform3fv(this._u_coordinateScaler,A),n.uniform1i(this._uRenderPass,s),n.uniform1i(this._uPickInvisible,e.pickInvisible),n.uniform1f(this._uPickZNear,e.pickZNear),n.uniform1f(this._uPickZFar,e.pickZFar),r.logarithmicDepthBufferEnabled){const t=2/(Math.log(e.pickZFar+1)/Math.LN2);n.uniform1f(this._uLogDepthBufFC,t)}const f=r._sectionPlanesState.sectionPlanes.length;if(f>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*f,o=i.renderFlags;for(let t=0;t<f;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(h){const e=W(s.dist,s.dir,h,Ht);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}const m="edge"===e._snapMode?n.LINES:n.POINTS;a.numEdgeIndices8Bits>0&&(l.bindEdgeIndicesTextures(this._program,this._uTexturePerEdgeIdPortionIds,this._uTexturePerPolygonIdEdgeIndices,8),n.drawArrays(m,0,a.numEdgeIndices8Bits)),a.numEdgeIndices16Bits>0&&(l.bindEdgeIndicesTextures(this._program,this._uTexturePerEdgeIdPortionIds,this._uTexturePerPolygonIdEdgeIndices,16),n.drawArrays(m,0,a.numEdgeIndices16Bits)),a.numEdgeIndices32Bits>0&&(l.bindEdgeIndicesTextures(this._program,this._uTexturePerEdgeIdPortionIds,this._uTexturePerPolygonIdEdgeIndices,32),n.drawArrays(m,0,a.numEdgeIndices32Bits)),e.drawElements++}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uPickInvisible=s.getLocation("pickInvisible"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});this._aPackedVertexId=s.getAttribute("packedVertexId"),this._uPickZNear=s.getLocation("pickZNear"),this._uPickZFar=s.getLocation("pickZFar"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC")),this._uTexturePerObjectIdPositionsDecodeMatrix="uTexturePerObjectIdPositionsDecodeMatrix",this._uTexturePerObjectIdColorsAndFlags="uTexturePerObjectIdColorsAndFlags",this._uTexturePerVertexIdCoordinates="uTexturePerVertexIdCoordinates",this._uTexturePerPolygonIdEdgeIndices="uTexturePerPolygonIdEdgeIndices",this._uTexturePerEdgeIdPortionIds="uTexturePerEdgeIdPortionIds",this._uTextureCameraMatrices="uTextureCameraMatrices",this._uTextureModelMatrices="uTextureModelMatrices",this._uTexturePerObjectIdOffsets="uTexturePerObjectIdOffsets",this._uCameraEyeRtc=s.getLocation("uCameraEyeRtc"),this._u_vectorA=s.getLocation("_vectorA"),this._u_invVectorAB=s.getLocation("_invVectorAB"),this._u_layerNumber=s.getLocation("_layerNumber"),this._u_coordinateScaler=s.getLocation("_coordinateScaler")}_bindProgram(){this._program.bind()}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Batched geometry edges drawing vertex shader"),s.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),s.push("precision highp float;"),s.push("precision highp int;"),s.push("precision highp usampler2D;"),s.push("precision highp isampler2D;"),s.push("precision highp sampler2D;"),s.push("#else"),s.push("precision mediump float;"),s.push("precision mediump int;"),s.push("precision mediump usampler2D;"),s.push("precision mediump isampler2D;"),s.push("precision mediump sampler2D;"),s.push("#endif"),s.push("uniform int renderPass;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("uniform highp sampler2D uTexturePerObjectIdPositionsDecodeMatrix;"),s.push("uniform lowp usampler2D uTexturePerObjectIdColorsAndFlags;"),s.push("uniform highp sampler2D uTexturePerObjectIdOffsets;"),s.push("uniform mediump usampler2D uTexturePerVertexIdCoordinates;"),s.push("uniform highp usampler2D uTexturePerPolygonIdEdgeIndices;"),s.push("uniform mediump usampler2D uTexturePerEdgeIdPortionIds;"),s.push("uniform highp sampler2D uTextureCameraMatrices;"),s.push("uniform highp sampler2D uTextureModelMatrices;"),s.push("uniform vec3 uCameraEyeRtc;"),s.push("uniform vec2 _vectorA;"),s.push("uniform vec2 _invVectorAB;"),s.push("vec3 positions[3];"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("out float isPerspective;")),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("vec2 remapClipPos(vec2 clipPos) {"),s.push("    float x = (clipPos.x - _vectorA.x) * _invVectorAB.x;"),s.push("    float y = (clipPos.y - _vectorA.y) * _invVectorAB.y;"),s.push("    return vec2(x, y);"),s.push("}"),t&&(s.push("out vec4 vWorldPosition;"),s.push("flat out uint vFlags2;")),s.push("out vec4 vViewPosition;"),s.push("out highp vec3 relativeToOriginPosition;"),s.push("void main(void) {"),s.push("mat4 viewMatrix = mat4 (texelFetch (uTextureCameraMatrices, ivec2(0, 0), 0), texelFetch (uTextureCameraMatrices, ivec2(1, 0), 0), texelFetch (uTextureCameraMatrices, ivec2(2, 0), 0), texelFetch (uTextureCameraMatrices, ivec2(3, 0), 0));"),s.push("mat4 viewNormalMatrix = mat4 (texelFetch (uTextureCameraMatrices, ivec2(0, 1), 0), texelFetch (uTextureCameraMatrices, ivec2(1, 1), 0), texelFetch (uTextureCameraMatrices, ivec2(2, 1), 0), texelFetch (uTextureCameraMatrices, ivec2(3, 1), 0));"),s.push("mat4 projMatrix = mat4 (texelFetch (uTextureCameraMatrices, ivec2(0, 2), 0), texelFetch (uTextureCameraMatrices, ivec2(1, 2), 0), texelFetch (uTextureCameraMatrices, ivec2(2, 2), 0), texelFetch (uTextureCameraMatrices, ivec2(3, 2), 0));"),s.push("mat4 worldMatrix = mat4 (texelFetch (uTextureModelMatrices, ivec2(0, 0), 0), texelFetch (uTextureModelMatrices, ivec2(1, 0), 0), texelFetch (uTextureModelMatrices, ivec2(2, 0), 0), texelFetch (uTextureModelMatrices, ivec2(3, 0), 0));"),s.push("mat4 worldNormalMatrix = mat4 (texelFetch (uTextureModelMatrices, ivec2(0, 1), 0), texelFetch (uTextureModelMatrices, ivec2(1, 1), 0), texelFetch (uTextureModelMatrices, ivec2(2, 1), 0), texelFetch (uTextureModelMatrices, ivec2(3, 1), 0));"),s.push("int edgeIndex = gl_VertexID / 2;"),s.push("int h_packed_object_id_index = (edgeIndex >> 3) & 4095;"),s.push("int v_packed_object_id_index = (edgeIndex >> 3) >> 12;"),s.push("int objectIndex = int(texelFetch(uTexturePerEdgeIdPortionIds, ivec2(h_packed_object_id_index, v_packed_object_id_index), 0).r);"),s.push("ivec2 objectIndexCoords = ivec2(objectIndex % 512, objectIndex / 512);"),s.push("uvec4 flags = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+2, objectIndexCoords.y), 0);"),s.push("uvec4 flags2 = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+3, objectIndexCoords.y), 0);"),s.push("{"),s.push("ivec4 packedVertexBase = ivec4(texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+4, objectIndexCoords.y), 0));"),s.push("ivec4 packedEdgeIndexBaseOffset = ivec4(texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+6, objectIndexCoords.y), 0));"),s.push("int edgeIndexBaseOffset = (packedEdgeIndexBaseOffset.r << 24) + (packedEdgeIndexBaseOffset.g << 16) + (packedEdgeIndexBaseOffset.b << 8) + packedEdgeIndexBaseOffset.a;"),s.push("int h_index = (edgeIndex - edgeIndexBaseOffset) & 4095;"),s.push("int v_index = (edgeIndex - edgeIndexBaseOffset) >> 12;"),s.push("ivec3 vertexIndices = ivec3(texelFetch(uTexturePerPolygonIdEdgeIndices, ivec2(h_index, v_index), 0));"),s.push("ivec3 uniqueVertexIndexes = vertexIndices + (packedVertexBase.r << 24) + (packedVertexBase.g << 16) + (packedVertexBase.b << 8) + packedVertexBase.a;"),s.push("int indexPositionH = uniqueVertexIndexes[gl_VertexID % 2] & 4095;"),s.push("int indexPositionV = uniqueVertexIndexes[gl_VertexID % 2] >> 12;"),s.push("mat4 positionsDecodeMatrix = transpose(mat4 (texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+0, objectIndexCoords.y), 0), texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+1, objectIndexCoords.y), 0), texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+2, objectIndexCoords.y), 0), vec4(0, 0, 0, 1)));"),s.push("uvec4 flags = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+2, objectIndexCoords.y), 0);"),s.push("uvec4 flags2 = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+3, objectIndexCoords.y), 0);"),s.push("vec3 position = vec3(texelFetch(uTexturePerVertexIdCoordinates, ivec2(indexPositionH, indexPositionV), 0));"),s.push("      vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),s.push("vec4 offset = vec4(texelFetch (uTexturePerObjectIdOffsets, objectIndexCoords, 0).rgb, 0.0);"),s.push("worldPosition.xyz = worldPosition.xyz + offset.xyz;"),s.push("relativeToOriginPosition = worldPosition.xyz;"),s.push("      vec4 viewPosition  = viewMatrix * worldPosition; "),t&&(s.push("  vWorldPosition = worldPosition;"),s.push("  vFlags2 = flags2.r;")),s.push("vViewPosition = viewPosition;"),s.push("vec4 clipPos = projMatrix * viewPosition;"),s.push("float tmp = clipPos.w;"),s.push("clipPos.xyzw /= tmp;"),s.push("clipPos.xy = remapClipPos(clipPos.xy);"),s.push("clipPos.xyzw *= tmp;"),s.push("vViewPosition = clipPos;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),s.push("gl_Position = clipPos;"),s.push("  }"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Triangles dataTexture pick depth fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("in float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),i.push("uniform float pickZNear;"),i.push("uniform float pickZFar;"),i.push("uniform int _layerNumber;"),i.push("uniform vec3 _coordinateScaler;"),s){i.push("in vec4 vWorldPosition;"),i.push("flat in uint vFlags2;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("in highp vec3 relativeToOriginPosition;"),i.push("out highp ivec4 outCoords;"),i.push("void main(void) {"),s){i.push("  bool clippable = vFlags2 > 0u;"),i.push("  if (clippable) {"),i.push("      float dist = 0.0;");for(var r=0;r<t.sectionPlanes.length;r++)i.push("      if (sectionPlaneActive"+r+") {"),i.push("          dist += clamp(dot(-sectionPlaneDir"+r+".xyz, vWorldPosition.xyz - sectionPlanePos"+r+".xyz), 0.0, 1000.0);"),i.push("      }");i.push("      if (dist > 0.0) { discard; }"),i.push("  }")}return e.logarithmicDepthBufferEnabled&&i.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("outCoords = ivec4(relativeToOriginPosition.xyz*_coordinateScaler.xyz, _layerNumber);"),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}p.vec4();const kt=p.vec3();function jt(e){const t=1/e;return isNaN(t)||!isFinite(t)?1:t}class Qt{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=a.textureState,h=t._state.origin;e._origin[0]=h[0],e._origin[1]=h[1],e._origin[2]=h[2];const c=t.aabb,u=2e9,A=[jt(c[3]-c[0])*u,jt(c[4]-c[1])*u,jt(c[5]-c[2])*u];e._coordinateScale[0]=jt(A[0]),e._coordinateScale[1]=jt(A[1]),e._coordinateScale[2]=jt(A[2]),this._program||this._allocate(),e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),l.bindCommonTextures(this._program,this._uTexturePerObjectIdPositionsDecodeMatrix,this._uTexturePerVertexIdCoordinates,this._uTexturePerObjectIdColorsAndFlags,this._uTextureCameraMatrices,this._uTextureModelMatrices,this._uTexturePerObjectIdOffsets);let p=o.eye;e.pickViewMatrix&&(l.bindPickCameraTexture(this._program,this._uTextureCameraMatrices),p=e.pickOrigin||p);const d=[p[0]-h[0],p[1]-h[1],p[2]-h[2]];if(n.uniform3fv(this._uCameraEyeRtc,d),n.uniform2fv(this._u_vectorA,e._vectorA),n.uniform2fv(this._u_invVectorAB,e._invVectorAB),n.uniform1i(this._u_layerNumber,e._layerNumber),n.uniform3fv(this._u_coordinateScaler,A),n.uniform1i(this._uRenderPass,s),n.uniform1i(this._uPickInvisible,e.pickInvisible),n.uniform1f(this._uPickZNear,e.pickZNear),n.uniform1f(this._uPickZFar,e.pickZFar),r.logarithmicDepthBufferEnabled){const t=2/(Math.log(e.pickZFar+1)/Math.LN2);n.uniform1f(this._uLogDepthBufFC,t)}const f=r._sectionPlanesState.sectionPlanes.length;if(f>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*f,o=i.renderFlags;for(let t=0;t<f;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(h){const e=W(s.dist,s.dir,h,kt);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}a.numIndices8Bits>0&&(l.bindTriangleIndicesTextures(this._program,this._uTexturePerPolygonIdPortionIds,this._uTexturePerPolygonIdIndices,8),n.drawArrays(n.TRIANGLES,0,a.numIndices8Bits)),a.numIndices16Bits>0&&(l.bindTriangleIndicesTextures(this._program,this._uTexturePerPolygonIdPortionIds,this._uTexturePerPolygonIdIndices,16),n.drawArrays(n.TRIANGLES,0,a.numIndices16Bits)),a.numIndices32Bits>0&&(l.bindTriangleIndicesTextures(this._program,this._uTexturePerPolygonIdPortionIds,this._uTexturePerPolygonIdIndices,32),n.drawArrays(n.TRIANGLES,0,a.numIndices32Bits)),e.drawElements++}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uPickInvisible=s.getLocation("pickInvisible"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});this._aPackedVertexId=s.getAttribute("packedVertexId"),this._uPickZNear=s.getLocation("pickZNear"),this._uPickZFar=s.getLocation("pickZFar"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC")),this._uTexturePerObjectIdPositionsDecodeMatrix="uTexturePerObjectIdPositionsDecodeMatrix",this._uTexturePerObjectIdColorsAndFlags="uTexturePerObjectIdColorsAndFlags",this._uTexturePerVertexIdCoordinates="uTexturePerVertexIdCoordinates",this._uTexturePerPolygonIdNormals="uTexturePerPolygonIdNormals",this._uTexturePerPolygonIdIndices="uTexturePerPolygonIdIndices",this._uTexturePerPolygonIdPortionIds="uTexturePerPolygonIdPortionIds",this._uTextureCameraMatrices="uTextureCameraMatrices",this._uTextureModelMatrices="uTextureModelMatrices",this._uTexturePerObjectIdOffsets="uTexturePerObjectIdOffsets",this._uCameraEyeRtc=s.getLocation("uCameraEyeRtc"),this._u_vectorA=s.getLocation("_vectorA"),this._u_invVectorAB=s.getLocation("_invVectorAB"),this._u_layerNumber=s.getLocation("_layerNumber"),this._u_coordinateScaler=s.getLocation("_coordinateScaler")}_bindProgram(){this._program.bind()}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Triangles dataTexture draw vertex shader"),s.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),s.push("precision highp float;"),s.push("precision highp int;"),s.push("precision highp usampler2D;"),s.push("precision highp isampler2D;"),s.push("precision highp sampler2D;"),s.push("#else"),s.push("precision mediump float;"),s.push("precision mediump int;"),s.push("precision mediump usampler2D;"),s.push("precision mediump isampler2D;"),s.push("precision mediump sampler2D;"),s.push("#endif"),s.push("uniform int renderPass;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("uniform highp sampler2D uTexturePerObjectIdPositionsDecodeMatrix;"),s.push("uniform lowp usampler2D uTexturePerObjectIdColorsAndFlags;"),s.push("uniform highp sampler2D uTexturePerObjectIdOffsets;"),s.push("uniform mediump usampler2D uTexturePerVertexIdCoordinates;"),s.push("uniform highp usampler2D uTexturePerPolygonIdIndices;"),s.push("uniform mediump usampler2D uTexturePerPolygonIdPortionIds;"),s.push("uniform highp sampler2D uTextureCameraMatrices;"),s.push("uniform highp sampler2D uTextureModelMatrices;"),s.push("uniform vec3 uCameraEyeRtc;"),s.push("uniform vec2 _vectorA;"),s.push("uniform vec2 _invVectorAB;"),s.push("vec3 positions[3];"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("out float isPerspective;")),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("vec2 remapClipPos(vec2 clipPos) {"),s.push("    float x = (clipPos.x - _vectorA.x) * _invVectorAB.x;"),s.push("    float y = (clipPos.y - _vectorA.y) * _invVectorAB.y;"),s.push("    return vec2(x, y);"),s.push("}"),t&&(s.push("out vec4 vWorldPosition;"),s.push("flat out uint vFlags2;")),s.push("out vec4 vViewPosition;"),s.push("out highp vec3 relativeToOriginPosition;"),s.push("void main(void) {"),s.push("mat4 viewMatrix = mat4 (texelFetch (uTextureCameraMatrices, ivec2(0, 0), 0), texelFetch (uTextureCameraMatrices, ivec2(1, 0), 0), texelFetch (uTextureCameraMatrices, ivec2(2, 0), 0), texelFetch (uTextureCameraMatrices, ivec2(3, 0), 0));"),s.push("mat4 viewNormalMatrix = mat4 (texelFetch (uTextureCameraMatrices, ivec2(0, 1), 0), texelFetch (uTextureCameraMatrices, ivec2(1, 1), 0), texelFetch (uTextureCameraMatrices, ivec2(2, 1), 0), texelFetch (uTextureCameraMatrices, ivec2(3, 1), 0));"),s.push("mat4 projMatrix = mat4 (texelFetch (uTextureCameraMatrices, ivec2(0, 2), 0), texelFetch (uTextureCameraMatrices, ivec2(1, 2), 0), texelFetch (uTextureCameraMatrices, ivec2(2, 2), 0), texelFetch (uTextureCameraMatrices, ivec2(3, 2), 0));"),s.push("mat4 worldMatrix = mat4 (texelFetch (uTextureModelMatrices, ivec2(0, 0), 0), texelFetch (uTextureModelMatrices, ivec2(1, 0), 0), texelFetch (uTextureModelMatrices, ivec2(2, 0), 0), texelFetch (uTextureModelMatrices, ivec2(3, 0), 0));"),s.push("mat4 worldNormalMatrix = mat4 (texelFetch (uTextureModelMatrices, ivec2(0, 1), 0), texelFetch (uTextureModelMatrices, ivec2(1, 1), 0), texelFetch (uTextureModelMatrices, ivec2(2, 1), 0), texelFetch (uTextureModelMatrices, ivec2(3, 1), 0));"),s.push("int polygonIndex = gl_VertexID / 3;"),s.push("int h_packed_object_id_index = (polygonIndex >> 3) & 4095;"),s.push("int v_packed_object_id_index = (polygonIndex >> 3) >> 12;"),s.push("int objectIndex = int(texelFetch(uTexturePerPolygonIdPortionIds, ivec2(h_packed_object_id_index, v_packed_object_id_index), 0).r);"),s.push("ivec2 objectIndexCoords = ivec2(objectIndex % 512, objectIndex / 512);"),s.push("uvec4 flags = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+2, objectIndexCoords.y), 0);"),s.push("uvec4 flags2 = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+3, objectIndexCoords.y), 0);"),s.push("{"),s.push("ivec4 packedVertexBase = ivec4(texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+4, objectIndexCoords.y), 0));"),s.push("ivec4 packedIndexBaseOffset = ivec4(texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+5, objectIndexCoords.y), 0));"),s.push("int indexBaseOffset = (packedIndexBaseOffset.r << 24) + (packedIndexBaseOffset.g << 16) + (packedIndexBaseOffset.b << 8) + packedIndexBaseOffset.a;"),s.push("int h_index = (polygonIndex - indexBaseOffset) & 4095;"),s.push("int v_index = (polygonIndex - indexBaseOffset) >> 12;"),s.push("ivec3 vertexIndices = ivec3(texelFetch(uTexturePerPolygonIdIndices, ivec2(h_index, v_index), 0));"),s.push("ivec3 uniqueVertexIndexes = vertexIndices + (packedVertexBase.r << 24) + (packedVertexBase.g << 16) + (packedVertexBase.b << 8) + packedVertexBase.a;"),s.push("ivec3 indexPositionH = uniqueVertexIndexes & 4095;"),s.push("ivec3 indexPositionV = uniqueVertexIndexes >> 12;"),s.push("mat4 positionsDecodeMatrix = transpose(mat4 (texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+0, objectIndexCoords.y), 0), texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+1, objectIndexCoords.y), 0), texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+2, objectIndexCoords.y), 0), vec4(0, 0, 0, 1)));"),s.push("uint solid = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+7, objectIndexCoords.y), 0).r;"),s.push("positions[0] = vec3(texelFetch(uTexturePerVertexIdCoordinates, ivec2(indexPositionH.r, indexPositionV.r), 0));"),s.push("positions[1] = vec3(texelFetch(uTexturePerVertexIdCoordinates, ivec2(indexPositionH.g, indexPositionV.g), 0));"),s.push("positions[2] = vec3(texelFetch(uTexturePerVertexIdCoordinates, ivec2(indexPositionH.b, indexPositionV.b), 0));"),s.push("uvec4 color = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+0, objectIndexCoords.y), 0);"),s.push("if (color.a == 0u) {"),s.push("   gl_Position = vec4(3.0, 3.0, 3.0, 1.0);"),s.push("   return;"),s.push("};"),s.push("vec3 normal = normalize(cross(positions[2] - positions[0], positions[1] - positions[0]));"),s.push("vec3 position;"),s.push("position = positions[gl_VertexID % 3];"),s.push("vec3 viewNormal = -normalize((transpose(inverse(viewMatrix*positionsDecodeMatrix)) * vec4(normal,1)).xyz);"),s.push("if (solid != 1u) {"),s.push("if (isPerspectiveMatrix(projMatrix)) {"),s.push("vec3 uCameraEyeRtcInQuantizedSpace = (inverse(worldMatrix * positionsDecodeMatrix) * vec4(uCameraEyeRtc, 1)).xyz;"),s.push("if (dot(position.xyz - uCameraEyeRtcInQuantizedSpace, normal) < 0.0) {"),s.push("position = positions[2 - (gl_VertexID % 3)];"),s.push("viewNormal = -viewNormal;"),s.push("}"),s.push("} else {"),s.push("if (viewNormal.z < 0.0) {"),s.push("position = positions[2 - (gl_VertexID % 3)];"),s.push("viewNormal = -viewNormal;"),s.push("}"),s.push("}"),s.push("}"),s.push("      vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),s.push("vec4 offset = vec4(texelFetch (uTexturePerObjectIdOffsets, objectIndexCoords, 0).rgb, 0.0);"),s.push("worldPosition.xyz = worldPosition.xyz + offset.xyz;"),s.push("relativeToOriginPosition = worldPosition.xyz;"),s.push("      vec4 viewPosition  = viewMatrix * worldPosition; "),t&&(s.push("  vWorldPosition = worldPosition;"),s.push("  vFlags2 = flags2.r;")),s.push("vViewPosition = viewPosition;"),s.push("vec4 clipPos = projMatrix * viewPosition;"),s.push("float tmp = clipPos.w;"),s.push("clipPos.xyzw /= tmp;"),s.push("clipPos.xy = remapClipPos(clipPos.xy);"),s.push("clipPos.z += 0.001;"),s.push("clipPos.xyzw *= tmp;"),s.push("vViewPosition = clipPos;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),s.push("gl_Position = clipPos;"),s.push("  }"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Triangles dataTexture draw fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("in float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),i.push("uniform float pickZNear;"),i.push("uniform float pickZFar;"),i.push("uniform int _layerNumber;"),i.push("uniform vec3 _coordinateScaler;"),s){i.push("in vec4 vWorldPosition;"),i.push("flat in uint vFlags2;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("in highp vec3 relativeToOriginPosition;"),i.push("out highp ivec4 outCoords;"),i.push("void main(void) {"),s){i.push("  bool clippable = vFlags2 > 0u;"),i.push("  if (clippable) {"),i.push("      float dist = 0.0;");for(var r=0;r<t.sectionPlanes.length;r++)i.push("      if (sectionPlaneActive"+r+") {"),i.push("          dist += clamp(dot(-sectionPlaneDir"+r+".xyz, vWorldPosition.xyz - sectionPlanePos"+r+".xyz), 0.0, 1000.0);"),i.push("      }");i.push("      if (dist > 0.0) { discard; }"),i.push("  }")}return e.logarithmicDepthBufferEnabled&&i.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("outCoords = ivec4(relativeToOriginPosition.xyz*_coordinateScaler.xyz, - _layerNumber);"),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Wt=p.vec3();class zt{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=a.textureState,h=t._state.origin;this._program||this._allocate(t),e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),l.bindCommonTextures(this._program,this._uTexturePerObjectIdPositionsDecodeMatrix,this._uTexturePerVertexIdCoordinates,this._uTexturePerObjectIdColorsAndFlags,this._uTextureCameraMatrices,this._uTextureModelMatrices,this._uTexturePerObjectIdOffsets);let c=o.eye;e.pickViewMatrix&&(l.bindPickCameraTexture(this._program,this._uTextureCameraMatrices),c=e.pickOrigin||c);const u=[c[0]-h[0],c[1]-h[1],c[2]-h[2]];if(n.uniform3fv(this._uCameraEyeRtc,u),n.uniform1i(this._uRenderPass,s),n.uniform3fv(this._uCameraEyeRtc,u),n.uniform1i(this._uPickInvisible,e.pickInvisible),r.logarithmicDepthBufferEnabled){const e=2/(Math.log(o.project.far+1)/Math.LN2);n.uniform1f(this._uLogDepthBufFC,e)}const A=r._sectionPlanesState.sectionPlanes.length;if(A>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*A,o=i.renderFlags;for(let t=0;t<A;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(h){const e=W(s.dist,s.dir,h,Wt);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}a.numIndices8Bits>0&&(l.bindTriangleIndicesTextures(this._program,this._uTexturePerPolygonIdPortionIds,this._uTexturePerPolygonIdIndices,8),n.drawArrays(n.TRIANGLES,0,a.numIndices8Bits)),a.numIndices16Bits>0&&(l.bindTriangleIndicesTextures(this._program,this._uTexturePerPolygonIdPortionIds,this._uTexturePerPolygonIdIndices,16),n.drawArrays(n.TRIANGLES,0,a.numIndices16Bits)),a.numIndices32Bits>0&&(l.bindTriangleIndicesTextures(this._program,this._uTexturePerPolygonIdPortionIds,this._uTexturePerPolygonIdIndices,32),n.drawArrays(n.TRIANGLES,0,a.numIndices32Bits)),e.drawElements++}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uPickInvisible=s.getLocation("pickInvisible"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC")),this._uTexturePerObjectIdPositionsDecodeMatrix="uTexturePerObjectIdPositionsDecodeMatrix",this._uTexturePerObjectIdColorsAndFlags="uTexturePerObjectIdColorsAndFlags",this._uTexturePerVertexIdCoordinates="uTexturePerVertexIdCoordinates",this._uTexturePerPolygonIdNormals="uTexturePerPolygonIdNormals",this._uTexturePerPolygonIdIndices="uTexturePerPolygonIdIndices",this._uTexturePerPolygonIdPortionIds="uTexturePerPolygonIdPortionIds",this._uTextureCameraMatrices="uTextureCameraMatrices",this._uTextureModelMatrices="uTextureModelMatrices",this._uTexturePerObjectIdOffsets="uTexturePerObjectIdOffsets",this._uCameraEyeRtc=s.getLocation("uCameraEyeRtc")}_bindProgram(){this._program.bind()}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Triangles dataTexture pick normals vertex shader"),s.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),s.push("precision highp float;"),s.push("precision highp int;"),s.push("precision highp usampler2D;"),s.push("precision highp isampler2D;"),s.push("precision highp sampler2D;"),s.push("#else"),s.push("precision mediump float;"),s.push("precision mediump int;"),s.push("precision mediump usampler2D;"),s.push("precision mediump isampler2D;"),s.push("precision mediump sampler2D;"),s.push("#endif"),s.push("uniform int renderPass;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("uniform bool pickInvisible;"),s.push("uniform highp sampler2D uTexturePerObjectIdPositionsDecodeMatrix;"),s.push("uniform lowp usampler2D uTexturePerObjectIdColorsAndFlags;"),s.push("uniform highp sampler2D uTexturePerObjectIdOffsets;"),s.push("uniform mediump usampler2D uTexturePerVertexIdCoordinates;"),s.push("uniform highp usampler2D uTexturePerPolygonIdIndices;"),s.push("uniform mediump usampler2D uTexturePerPolygonIdPortionIds;"),s.push("uniform highp sampler2D uTextureCameraMatrices;"),s.push("uniform highp sampler2D uTextureModelMatrices;"),s.push("uniform vec3 uCameraEyeRtc;"),s.push("vec3 positions[3];"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("out float isPerspective;")),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),t&&(s.push("out vec4 vWorldPosition;"),s.push("flat out uint vFlags2;")),s.push("out vec3 vWorldNormal;"),s.push("void main(void) {"),s.push("mat4 viewMatrix = mat4 (texelFetch (uTextureCameraMatrices, ivec2(0, 0), 0), texelFetch (uTextureCameraMatrices, ivec2(1, 0), 0), texelFetch (uTextureCameraMatrices, ivec2(2, 0), 0), texelFetch (uTextureCameraMatrices, ivec2(3, 0), 0));"),s.push("mat4 projMatrix = mat4 (texelFetch (uTextureCameraMatrices, ivec2(0, 2), 0), texelFetch (uTextureCameraMatrices, ivec2(1, 2), 0), texelFetch (uTextureCameraMatrices, ivec2(2, 2), 0), texelFetch (uTextureCameraMatrices, ivec2(3, 2), 0));"),s.push("mat4 worldMatrix = mat4 (texelFetch (uTextureModelMatrices, ivec2(0, 0), 0), texelFetch (uTextureModelMatrices, ivec2(1, 0), 0), texelFetch (uTextureModelMatrices, ivec2(2, 0), 0), texelFetch (uTextureModelMatrices, ivec2(3, 0), 0));"),s.push("int polygonIndex = gl_VertexID / 3;"),s.push("int h_packed_object_id_index = (polygonIndex >> 3) & 4095;"),s.push("int v_packed_object_id_index = (polygonIndex >> 3) >> 12;"),s.push("int objectIndex = int(texelFetch(uTexturePerPolygonIdPortionIds, ivec2(h_packed_object_id_index, v_packed_object_id_index), 0).r);"),s.push("ivec2 objectIndexCoords = ivec2(objectIndex % 512, objectIndex / 512);"),s.push("uvec4 flags = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+2, objectIndexCoords.y), 0);"),s.push("uvec4 flags2 = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+3, objectIndexCoords.y), 0);"),s.push("if (int(flags.w) != renderPass) {"),s.push("   gl_Position = vec4(3.0, 3.0, 3.0, 1.0);"),s.push("   return;"),s.push("} else {"),s.push("ivec4 packedVertexBase = ivec4(texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+4, objectIndexCoords.y), 0));"),s.push("ivec4 packedIndexBaseOffset = ivec4(texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+5, objectIndexCoords.y), 0));"),s.push("int indexBaseOffset = (packedIndexBaseOffset.r << 24) + (packedIndexBaseOffset.g << 16) + (packedIndexBaseOffset.b << 8) + packedIndexBaseOffset.a;"),s.push("int h_index = (polygonIndex - indexBaseOffset) & 4095;"),s.push("int v_index = (polygonIndex - indexBaseOffset) >> 12;"),s.push("ivec3 vertexIndices = ivec3(texelFetch(uTexturePerPolygonIdIndices, ivec2(h_index, v_index), 0));"),s.push("ivec3 uniqueVertexIndexes = vertexIndices + (packedVertexBase.r << 24) + (packedVertexBase.g << 16) + (packedVertexBase.b << 8) + packedVertexBase.a;"),s.push("ivec3 indexPositionH = uniqueVertexIndexes & 4095;"),s.push("ivec3 indexPositionV = uniqueVertexIndexes >> 12;"),s.push("mat4 positionsDecodeMatrix = transpose(mat4 (texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+0, objectIndexCoords.y), 0), texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+1, objectIndexCoords.y), 0), texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+2, objectIndexCoords.y), 0), vec4(0, 0, 0, 1)));"),s.push("uint solid = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+7, objectIndexCoords.y), 0).r;"),s.push("positions[0] = vec3(texelFetch(uTexturePerVertexIdCoordinates, ivec2(indexPositionH.r, indexPositionV.r), 0));"),s.push("positions[1] = vec3(texelFetch(uTexturePerVertexIdCoordinates, ivec2(indexPositionH.g, indexPositionV.g), 0));"),s.push("positions[2] = vec3(texelFetch(uTexturePerVertexIdCoordinates, ivec2(indexPositionH.b, indexPositionV.b), 0));"),s.push("vec3 normal = normalize(cross(positions[2] - positions[0], positions[1] - positions[0]));"),s.push("vec3 position;"),s.push("position = positions[gl_VertexID % 3];"),s.push("if (solid != 1u) {"),s.push("if (isPerspectiveMatrix(projMatrix)) {"),s.push("vec3 uCameraEyeRtcInQuantizedSpace = (inverse(worldMatrix * positionsDecodeMatrix) * vec4(uCameraEyeRtc, 1)).xyz;"),s.push("if (dot(position.xyz - uCameraEyeRtcInQuantizedSpace, normal) < 0.0) {"),s.push("position = positions[2 - (gl_VertexID % 3)];"),s.push("normal = -normal;"),s.push("}"),s.push("} else {"),s.push("vec3 viewNormal = -normalize((transpose(inverse(viewMatrix*positionsDecodeMatrix)) * vec4(normal,1)).xyz);"),s.push("if (viewNormal.z < 0.0) {"),s.push("position = positions[2 - (gl_VertexID % 3)];"),s.push("normal = -normal;"),s.push("}"),s.push("}"),s.push("}"),s.push("normal = -normal;"),s.push("vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),s.push("vec4 offset = vec4(texelFetch (uTexturePerObjectIdOffsets, objectIndexCoords, 0).rgb, 0.0);"),s.push("worldPosition.xyz = worldPosition.xyz + offset.xyz;"),s.push("vec4 viewPosition = viewMatrix * worldPosition; "),s.push("vWorldNormal = normal.xyz;"),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),t&&(s.push("      vWorldPosition = worldPosition;"),s.push("      vFlags2 = flags2.w;")),s.push("gl_Position = clipPos;"),s.push("}"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Triangles dataTexture pick normals fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("in float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("flat in uint vFlags2;");for(var r=0;r<t.sectionPlanes.length;r++)i.push("uniform bool sectionPlaneActive"+r+";"),i.push("uniform vec3 sectionPlanePos"+r+";"),i.push("uniform vec3 sectionPlaneDir"+r+";")}if(i.push("in vec3 vWorldNormal;"),i.push("out vec4 outNormal;"),i.push("void main(void) {"),s){i.push("  bool clippable = vFlags2 > 0u;"),i.push("  if (clippable) {"),i.push("      float dist = 0.0;");for(r=0;r<t.sectionPlanes.length;r++)i.push("      if (sectionPlaneActive"+r+") {"),i.push("          dist += clamp(dot(-sectionPlaneDir"+r+".xyz, vWorldPosition.xyz - sectionPlanePos"+r+".xyz), 0.0, 1000.0);"),i.push("      }");i.push("      if (dist > 0.0) { discard; }"),i.push("  }")}return e.logarithmicDepthBufferEnabled&&i.push("    gl_FragDepth = log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("    outNormal = vec4((vWorldNormal * 0.5) + 0.5, 1.0);"),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}p.vec3();class Kt{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uPositionsDecodeMatrix=s.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=s.getLocation("worldMatrix"),this._uViewMatrix=s.getLocation("viewMatrix"),this._uProjMatrix=s.getLocation("projMatrix"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});this._aPosition=s.getAttribute("position"),this._aOffset=s.getAttribute("offset"),this._aColor=s.getAttribute("color"),this._aFlags=s.getAttribute("flags"),this._aFlags2=s.getAttribute("flags2"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC"))}_bindProgram(){const e=this._scene,t=e.canvas.gl,s=e.camera.project;if(this._program.bind(),t.uniformMatrix4fv(this._uProjMatrix,!1,s.matrix),e.logarithmicDepthBufferEnabled){const e=2/(Math.log(s.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("// Triangles dataTexture occlusion vertex shader"),e.logarithmicDepthBufferEnabled&&oe.SUPPORTED_EXTENSIONS.EXT_frag_depth&&s.push("#extension GL_EXT_frag_depth : enable"),s.push("uniform int renderPass;"),s.push("attribute vec3 position;"),e.entityOffsetsEnabled&&s.push("attribute vec3 offset;"),s.push("attribute vec4 color;"),s.push("attribute vec4 flags;"),s.push("attribute vec4 flags2;"),s.push("uniform mat4 worldMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),oe.SUPPORTED_EXTENSIONS.EXT_frag_depth&&s.push("varying float vFragDepth;"),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("varying float isPerspective;")),t&&(s.push("varying vec4 vWorldPosition;"),s.push("varying vec4 vFlags2;")),s.push("void main(void) {"),s.push("if (int(flags.x) != renderPass) {"),s.push("      gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("  } else {"),s.push("      vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("      vec4 viewPosition  = viewMatrix * worldPosition; "),t&&(s.push("      vWorldPosition = worldPosition;"),s.push("      vFlags2 = flags2;")),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(oe.SUPPORTED_EXTENSIONS.EXT_frag_depth?s.push("vFragDepth = 1.0 + clipPos.w;"):(s.push("clipPos.z = log2( max( 1e-6, clipPos.w + 1.0 ) ) * logDepthBufFC - 1.0;"),s.push("clipPos.z *= clipPos.w;")),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),s.push("gl_Position = clipPos;"),s.push("  }"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("// Triangles dataTexture occlusion fragment shader"),e.logarithmicDepthBufferEnabled&&oe.SUPPORTED_EXTENSIONS.EXT_frag_depth&&i.push("#extension GL_EXT_frag_depth : enable"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&oe.SUPPORTED_EXTENSIONS.EXT_frag_depth&&(i.push("varying float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("varying float vFragDepth;")),s){i.push("varying vec4 vWorldPosition;"),i.push("varying vec4 vFlags2;");for(let e=0;e<t.sectionPlanes.length;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("void main(void) {"),s){i.push("  bool clippable = (float(vFlags2.x) > 0.0);"),i.push("  if (clippable) {"),i.push("      float dist = 0.0;");for(let e=0;e<t.sectionPlanes.length;e++)i.push("      if (sectionPlaneActive"+e+") {"),i.push("          dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("      }");i.push("      if (dist > 0.0) { discard; }"),i.push("  }")}return e.logarithmicDepthBufferEnabled&&oe.SUPPORTED_EXTENSIONS.EXT_frag_depth&&i.push("    gl_FragDepthEXT = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("   gl_FragColor = vec4(0.0, 0.0, 1.0, 1.0); "),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}p.vec4();const Yt=p.vec3();class Xt{constructor(e){this._scene=e,this._allocate(),this._hash=this._getHash()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=this._scene,r=i.camera,o=t.model,n=i.canvas.gl,a=t._state,l=a.textureState,h=t._state.origin;if(!this._program&&(this._allocate(),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram(e,a)),l.bindCommonTextures(this._program,this._uTexturePerObjectIdPositionsDecodeMatrix,this._uTexturePerVertexIdCoordinates,this._uTexturePerObjectIdColorsAndFlags,this._uTextureCameraMatrices,this._uTextureModelMatrices,this._uTexturePerObjectIdOffsets);let c=r.eye;e.pickViewMatrix&&(l.bindPickCameraTexture(this._program,this._uTextureCameraMatrices),c=e.pickOrigin||c);const u=[c[0]-h[0],c[1]-h[1],c[2]-h[2]];n.uniform3fv(this._uCameraEyeRtc,u),n.uniform1i(this._uRenderPass,s);const A=i._sectionPlanesState.sectionPlanes.length;if(A>0){const e=i._sectionPlanesState.sectionPlanes,s=t.layerIndex*A,r=o.renderFlags;for(let t=0;t<A;t++){const i=this._uSectionPlanes[t];if(i){const o=r.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,o?1:0),o){const s=e[t];if(h){const e=W(s.dist,s.dir,h,Yt);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}a.numIndices8Bits>0&&(l.bindTriangleIndicesTextures(this._program,this._uTexturePerPolygonIdPortionIds,this._uTexturePerPolygonIdIndices,8),n.drawArrays(n.TRIANGLES,0,a.numIndices8Bits)),a.numIndices16Bits>0&&(l.bindTriangleIndicesTextures(this._program,this._uTexturePerPolygonIdPortionIds,this._uTexturePerPolygonIdIndices,16),n.drawArrays(n.TRIANGLES,0,a.numIndices16Bits)),a.numIndices32Bits>0&&(l.bindTriangleIndicesTextures(this._program,this._uTexturePerPolygonIdPortionIds,this._uTexturePerPolygonIdIndices,32),n.drawArrays(n.TRIANGLES,0,a.numIndices32Bits)),e.drawElements++}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uPositionsDecodeMatrix=s.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=s.getLocation("worldMatrix"),this._uViewMatrix=s.getLocation("viewMatrix"),this._uProjMatrix=s.getLocation("projMatrix"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC")),this._uTexturePerObjectIdPositionsDecodeMatrix="uTexturePerObjectIdPositionsDecodeMatrix",this._uTexturePerObjectIdColorsAndFlags="uTexturePerObjectIdColorsAndFlags",this._uTexturePerVertexIdCoordinates="uTexturePerVertexIdCoordinates",this._uTexturePerPolygonIdNormals="uTexturePerPolygonIdNormals",this._uTexturePerPolygonIdIndices="uTexturePerPolygonIdIndices",this._uTexturePerPolygonIdPortionIds="uTexturePerPolygonIdPortionIds",this._uTextureCameraMatrices="uTextureCameraMatrices",this._uTextureModelMatrices="uTextureModelMatrices",this._uTexturePerObjectIdOffsets="uTexturePerObjectIdOffsets",this._uCameraEyeRtc=s.getLocation("uCameraEyeRtc")}_bindProgram(e){const t=this._scene,s=t.canvas.gl,i=this._program,r=t.camera.project;if(i.bind(),s.uniformMatrix4fv(this._uProjMatrix,!1,r.matrix),t.logarithmicDepthBufferEnabled){const e=2/(Math.log(r.far+1)/Math.LN2);s.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState;e._lightsState;const s=t.sectionPlanes.length>0,i=[];return i.push("#version 300 es"),i.push("// Triangles dataTexture draw vertex shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("precision highp usampler2D;"),i.push("precision highp isampler2D;"),i.push("precision highp sampler2D;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("precision mediump usampler2D;"),i.push("precision mediump isampler2D;"),i.push("precision mediump sampler2D;"),i.push("#endif"),i.push("uniform int renderPass;"),e.entityOffsetsEnabled&&i.push("in vec3 offset;"),i.push("uniform highp sampler2D uTexturePerObjectIdPositionsDecodeMatrix;"),i.push("uniform lowp usampler2D uTexturePerObjectIdColorsAndFlags;"),i.push("uniform highp sampler2D uTexturePerObjectIdOffsets;"),i.push("uniform mediump usampler2D uTexturePerVertexIdCoordinates;"),i.push("uniform highp usampler2D uTexturePerPolygonIdIndices;"),i.push("uniform mediump usampler2D uTexturePerPolygonIdPortionIds;"),i.push("uniform highp sampler2D uTextureCameraMatrices;"),i.push("uniform highp sampler2D uTextureModelMatrices;"),i.push("uniform vec3 uCameraEyeRtc;"),i.push("vec3 positions[3];"),e.logarithmicDepthBufferEnabled&&(i.push("uniform float logDepthBufFC;"),i.push("out float vFragDepth;"),i.push("out float isPerspective;")),i.push("bool isPerspectiveMatrix(mat4 m) {"),i.push("    return (m[2][3] == - 1.0);"),i.push("}"),i.push("out highp vec2 vHighPrecisionZW;"),s&&(i.push("out vec4 vWorldPosition;"),i.push("flat out uint vFlags2;")),i.push("void main(void) {"),i.push("int polygonIndex = gl_VertexID / 3;"),i.push("int h_packed_object_id_index = (polygonIndex >> 3) & 4095;"),i.push("int v_packed_object_id_index = (polygonIndex >> 3) >> 12;"),i.push("int objectIndex = int(texelFetch(uTexturePerPolygonIdPortionIds, ivec2(h_packed_object_id_index, v_packed_object_id_index), 0).r);"),i.push("ivec2 objectIndexCoords = ivec2(objectIndex % 512, objectIndex / 512);"),i.push("uvec4 flags = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+2, objectIndexCoords.y), 0);"),i.push("uvec4 flags2 = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+3, objectIndexCoords.y), 0);"),i.push("if (int(flags.x) != renderPass) {"),i.push("   gl_Position = vec4(3.0, 3.0, 3.0, 1.0);"),i.push("   return;"),i.push("} else {"),i.push("mat4 viewMatrix = mat4 (texelFetch (uTextureCameraMatrices, ivec2(0, 0), 0), texelFetch (uTextureCameraMatrices, ivec2(1, 0), 0), texelFetch (uTextureCameraMatrices, ivec2(2, 0), 0), texelFetch (uTextureCameraMatrices, ivec2(3, 0), 0));"),i.push("mat4 viewNormalMatrix = mat4 (texelFetch (uTextureCameraMatrices, ivec2(0, 1), 0), texelFetch (uTextureCameraMatrices, ivec2(1, 1), 0), texelFetch (uTextureCameraMatrices, ivec2(2, 1), 0), texelFetch (uTextureCameraMatrices, ivec2(3, 1), 0));"),i.push("mat4 projMatrix = mat4 (texelFetch (uTextureCameraMatrices, ivec2(0, 2), 0), texelFetch (uTextureCameraMatrices, ivec2(1, 2), 0), texelFetch (uTextureCameraMatrices, ivec2(2, 2), 0), texelFetch (uTextureCameraMatrices, ivec2(3, 2), 0));"),i.push("mat4 worldMatrix = mat4 (texelFetch (uTextureModelMatrices, ivec2(0, 0), 0), texelFetch (uTextureModelMatrices, ivec2(1, 0), 0), texelFetch (uTextureModelMatrices, ivec2(2, 0), 0), texelFetch (uTextureModelMatrices, ivec2(3, 0), 0));"),i.push("mat4 worldNormalMatrix = mat4 (texelFetch (uTextureModelMatrices, ivec2(0, 1), 0), texelFetch (uTextureModelMatrices, ivec2(1, 1), 0), texelFetch (uTextureModelMatrices, ivec2(2, 1), 0), texelFetch (uTextureModelMatrices, ivec2(3, 1), 0));"),i.push("ivec4 packedVertexBase = ivec4(texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+4, objectIndexCoords.y), 0));"),i.push("ivec4 packedIndexBaseOffset = ivec4(texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+5, objectIndexCoords.y), 0));"),i.push("int indexBaseOffset = (packedIndexBaseOffset.r << 24) + (packedIndexBaseOffset.g << 16) + (packedIndexBaseOffset.b << 8) + packedIndexBaseOffset.a;"),i.push("int h_index = (polygonIndex - indexBaseOffset) & 4095;"),i.push("int v_index = (polygonIndex - indexBaseOffset) >> 12;"),i.push("ivec3 vertexIndices = ivec3(texelFetch(uTexturePerPolygonIdIndices, ivec2(h_index, v_index), 0));"),i.push("ivec3 uniqueVertexIndexes = vertexIndices + (packedVertexBase.r << 24) + (packedVertexBase.g << 16) + (packedVertexBase.b << 8) + packedVertexBase.a;"),i.push("ivec3 indexPositionH = uniqueVertexIndexes & 4095;"),i.push("ivec3 indexPositionV = uniqueVertexIndexes >> 12;"),i.push("mat4 positionsDecodeMatrix = transpose(mat4 (texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+0, objectIndexCoords.y), 0), texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+1, objectIndexCoords.y), 0), texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+2, objectIndexCoords.y), 0), vec4(0, 0, 0, 1)));"),i.push("uint solid = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+7, objectIndexCoords.y), 0).r;"),i.push("positions[0] = vec3(texelFetch(uTexturePerVertexIdCoordinates, ivec2(indexPositionH.r, indexPositionV.r), 0));"),i.push("positions[1] = vec3(texelFetch(uTexturePerVertexIdCoordinates, ivec2(indexPositionH.g, indexPositionV.g), 0));"),i.push("positions[2] = vec3(texelFetch(uTexturePerVertexIdCoordinates, ivec2(indexPositionH.b, indexPositionV.b), 0));"),i.push("uvec4 color = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+0, objectIndexCoords.y), 0);"),i.push("if (color.a == 0u) {"),i.push("   gl_Position = vec4(3.0, 3.0, 3.0, 1.0);"),i.push("   return;"),i.push("};"),i.push("vec3 normal = normalize(cross(positions[2] - positions[0], positions[1] - positions[0]));"),i.push("vec3 position;"),i.push("position = positions[gl_VertexID % 3];"),i.push("vec3 viewNormal = -normalize((transpose(inverse(viewMatrix*positionsDecodeMatrix)) * vec4(normal,1)).xyz);"),i.push("if (solid != 1u) {"),i.push("if (isPerspectiveMatrix(projMatrix)) {"),i.push("vec3 uCameraEyeRtcInQuantizedSpace = (inverse(worldMatrix * positionsDecodeMatrix) * vec4(uCameraEyeRtc, 1)).xyz;"),i.push("if (dot(position.xyz - uCameraEyeRtcInQuantizedSpace, normal) < 0.0) {"),i.push("position = positions[2 - (gl_VertexID % 3)];"),i.push("viewNormal = -viewNormal;"),i.push("}"),i.push("} else {"),i.push("if (viewNormal.z < 0.0) {"),i.push("position = positions[2 - (gl_VertexID % 3)];"),i.push("viewNormal = -viewNormal;"),i.push("}"),i.push("}"),i.push("}"),i.push("vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),i.push("vec4 offset = vec4(texelFetch (uTexturePerObjectIdOffsets, objectIndexCoords, 0).rgb, 0.0);"),i.push("worldPosition.xyz = worldPosition.xyz + offset.xyz;"),i.push("vec4 viewPosition = viewMatrix * worldPosition; "),i.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(i.push("vFragDepth = 1.0 + clipPos.w;"),i.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),s&&(i.push("vWorldPosition = worldPosition;"),i.push("vFlags2 = flags2.r;")),i.push("gl_Position = clipPos;"),i.push("vHighPrecisionZW = gl_Position.zw;"),i.push("}"),i.push("}"),i}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Triangles dataTexture draw fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),i.push("in highp vec2 vHighPrecisionZW;"),i.push("out vec4 outColor;"),e.logarithmicDepthBufferEnabled&&(i.push("in float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("flat in uint vFlags2;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("void main(void) {"),s){i.push("  bool clippable = vFlags2 > 0u;"),i.push("  if (clippable) {"),i.push("  float dist = 0.0;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("if (sectionPlaneActive"+e+") {"),i.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("}");i.push("  if (dist > 0.0) { "),i.push("      discard;"),i.push("  }"),i.push("}")}return e.logarithmicDepthBufferEnabled&&i.push("    gl_FragDepth = log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;"),i.push("    outColor = vec4(vec3(1.0 - fragCoordZ), 1.0); "),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Zt=p.vec3();class qt{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=t._state.origin;if(!this._program&&(this._allocate(t),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram(t)),n.uniform1i(this._uRenderPass,s),n.uniformMatrix4fv(this._uViewMatrix,!1,l?j(o.viewMatrix,l):o.viewMatrix),n.uniformMatrix4fv(this._uViewNormalMatrix,!1,o.viewNormalMatrix),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix),n.uniformMatrix4fv(this._uWorldNormalMatrix,!1,i.worldNormalMatrix);const h=r._sectionPlanesState.sectionPlanes.length;if(h>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*h,o=i.renderFlags;for(let t=0;t<h;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(l){const e=W(s.dist,s.dir,l,Zt);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,t._state.positionsDecodeMatrix),this._aPosition.bindArrayBuffer(a.positionsBuf),this._aOffset.bindArrayBuffer(a.offsetsBuf),this._aNormal.bindArrayBuffer(a.normalsBuf),this._aColor.bindArrayBuffer(a.colorsBuf),this._aFlags.bindArrayBuffer(a.flagsBuf),this._aFlags2&&this._aFlags2.bindArrayBuffer(a.flags2Buf),a.indicesBuf.bind(),n.drawElements(n.TRIANGLES,a.indicesBuf.numItems,a.indicesBuf.itemType,0)}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uPositionsDecodeMatrix=s.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=s.getLocation("worldMatrix"),this._uWorldNormalMatrix=s.getLocation("worldNormalMatrix"),this._uViewMatrix=s.getLocation("viewMatrix"),this._uViewNormalMatrix=s.getLocation("viewNormalMatrix"),this._uProjMatrix=s.getLocation("projMatrix"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});this._aPosition=s.getAttribute("position"),this._aOffset=s.getAttribute("offset"),this._aNormal=s.getAttribute("normal"),this._aColor=s.getAttribute("color"),this._aFlags=s.getAttribute("flags"),this._aFlags2&&(this._aFlags2=s.getAttribute("flags2")),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC"))}_bindProgram(){const e=this._scene,t=e.canvas.gl,s=e.camera.project;if(this._program.bind(),t.uniformMatrix4fv(this._uProjMatrix,!1,s.matrix),e.logarithmicDepthBufferEnabled){const e=2/(Math.log(s.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("// Batched geometry normals vertex shader"),e.logarithmicDepthBufferEnabled&&oe.SUPPORTED_EXTENSIONS.EXT_frag_depth&&s.push("#extension GL_EXT_frag_depth : enable"),s.push("uniform int renderPass;"),s.push("attribute vec3 position;"),e.entityOffsetsEnabled&&s.push("attribute vec3 offset;"),s.push("attribute vec3 normal;"),s.push("attribute vec4 color;"),s.push("attribute vec4 flags;"),s.push("attribute vec4 flags2;"),s.push("uniform mat4 worldMatrix;"),s.push("uniform mat4 worldNormalMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),s.push("uniform mat4 viewNormalMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),oe.SUPPORTED_EXTENSIONS.EXT_frag_depth&&s.push("varying float vFragDepth;"),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("varying float isPerspective;")),s.push("vec3 octDecode(vec2 oct) {"),s.push("    vec3 v = vec3(oct.xy, 1.0 - abs(oct.x) - abs(oct.y));"),s.push("    if (v.z < 0.0) {"),s.push("        v.xy = (1.0 - abs(v.yx)) * vec2(v.x >= 0.0 ? 1.0 : -1.0, v.y >= 0.0 ? 1.0 : -1.0);"),s.push("    }"),s.push("    return normalize(v);"),s.push("}"),t&&(s.push("varying vec4 vWorldPosition;"),s.push("varying vec4 vFlags2;")),s.push("varying vec3 vViewNormal;"),s.push("void main(void) {"),s.push("if (int(flags.x) != renderPass) {"),s.push("      gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("  } else {"),s.push("      vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("      vec4 viewPosition   = viewMatrix * worldPosition; "),s.push("      vec4 worldNormal    = worldNormalMatrix * vec4(octDecode(normal.xy), 0.0); "),s.push("      vec3 viewNormal     = normalize((viewNormalMatrix * worldNormal).xyz);"),t&&(s.push("      vWorldPosition  = worldPosition;"),s.push("      vFlags2         = flags2;")),s.push("      vViewNormal = viewNormal;"),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(oe.SUPPORTED_EXTENSIONS.EXT_frag_depth?s.push("vFragDepth = 1.0 + clipPos.w;"):(s.push("clipPos.z = log2( max( 1e-6, clipPos.w + 1.0 ) ) * logDepthBufFC - 1.0;"),s.push("clipPos.z *= clipPos.w;")),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),s.push("gl_Position = clipPos;"),s.push("  }"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("// Batched geometry normals fragment shader"),e.logarithmicDepthBufferEnabled&&oe.SUPPORTED_EXTENSIONS.EXT_frag_depth&&i.push("#extension GL_EXT_frag_depth : enable"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&oe.SUPPORTED_EXTENSIONS.EXT_frag_depth&&(i.push("varying float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("varying float vFragDepth;")),s){i.push("varying vec4 vWorldPosition;"),i.push("varying vec4 vFlags2;");for(let e=0;e<t.sectionPlanes.length;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("varying vec3 vViewNormal;"),i.push("vec3 packNormalToRGB( const in vec3 normal ) {"),i.push("    return normalize( normal ) * 0.5 + 0.5;"),i.push("}"),i.push("void main(void) {"),s){i.push("  bool clippable = (float(vFlags2.x) > 0.0);"),i.push("  if (clippable) {"),i.push("      float dist = 0.0;");for(var r=0;r<t.sectionPlanes.length;r++)i.push("      if (sectionPlaneActive"+r+") {"),i.push("          dist += clamp(dot(-sectionPlaneDir"+r+".xyz, vWorldPosition.xyz - sectionPlanePos"+r+".xyz), 0.0, 1000.0);"),i.push("      }");i.push("      if (dist > 0.0) { discard; }"),i.push("  }")}return e.logarithmicDepthBufferEnabled&&oe.SUPPORTED_EXTENSIONS.EXT_frag_depth&&i.push("    gl_FragDepthEXT = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("    gl_FragColor = vec4(packNormalToRGB(vViewNormal), 1.0); "),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}p.vec3();class Jt{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t){}_allocate(){const e=this._scene,t=e.canvas.gl,s=e._sectionPlanesState;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uPositionsDecodeMatrix=i.getLocation("positionsDecodeMatrix"),this._uShadowViewMatrix=i.getLocation("shadowViewMatrix"),this._uShadowProjMatrix=i.getLocation("shadowProjMatrix"),e.logarithmicDepthBufferEnabled&&(this._uZFar=i.getLocation("zFar")),this._uSectionPlanes=[];for(let e=0,t=s.sectionPlanes.length;e<t;e++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+e),pos:i.getLocation("sectionPlanePos"+e),dir:i.getLocation("sectionPlaneDir"+e)});this._aPosition=i.getAttribute("position"),this._aOffset=i.getAttribute("offset"),this._aColor=i.getAttribute("color"),this._aFlags=i.getAttribute("flags"),this._aFlags2=i.getAttribute("flags2")}_bindProgram(e){const t=this._scene.canvas.gl;this._program.bind(),t.uniformMatrix4fv(this._uShadowViewMatrix,!1,e.shadowViewMatrix),t.uniformMatrix4fv(this._uShadowProjMatrix,!1,e.shadowProjMatrix),this._lastLightId=null}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("// Batched geometry shadow vertex shader"),s.push("attribute vec3 position;"),e.entityOffsetsEnabled&&s.push("attribute vec3 offset;"),s.push("attribute vec4 color;"),s.push("attribute vec4 flags;"),s.push("attribute vec4 flags2;"),s.push("uniform mat4 shadowViewMatrix;"),s.push("uniform mat4 shadowProjMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),t&&(s.push("varying vec4 vWorldPosition;"),s.push("varying vec4 vFlags2;")),s.push("varying vec4 vViewPosition;"),s.push("void main(void) {"),s.push("  bool visible        = (float(flags.x) > 0.0);"),s.push("  bool transparent    = ((float(color.a) / 255.0) < 1.0);"),s.push("  if (!visible || transparent) {"),s.push("      gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("  } else {"),s.push("      vec4 worldPosition = positionsDecodeMatrix * vec4(position, 1.0); "),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("      vec4 viewPosition  = shadowViewMatrix * worldPosition; "),t&&(s.push("      vWorldPosition = worldPosition;"),s.push("      vFlags2 = flags2;")),s.push("      vViewPosition = viewPosition;"),s.push("      gl_Position = shadowProjMatrix * viewPosition;"),s.push("  }"),s.push("}"),s}_buildFragmentShader(){const e=this._scene._sectionPlanesState,t=e.sectionPlanes.length>0,s=[];if(s.push("// Batched geometry shadow fragment shader"),s.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),s.push("precision highp float;"),s.push("precision highp int;"),s.push("#else"),s.push("precision mediump float;"),s.push("precision mediump int;"),s.push("#endif"),t){s.push("varying vec4 vWorldPosition;"),s.push("varying vec4 vFlags2;");for(let t=0;t<e.sectionPlanes.length;t++)s.push("uniform bool sectionPlaneActive"+t+";"),s.push("uniform vec3 sectionPlanePos"+t+";"),s.push("uniform vec3 sectionPlaneDir"+t+";")}if(s.push("varying vec4 vViewPosition;"),s.push("vec4 encodeFloat( const in float v ) {"),s.push("  const vec4 bitShift = vec4(256 * 256 * 256, 256 * 256, 256, 1.0);"),s.push("  const vec4 bitMask = vec4(0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0);"),s.push("  vec4 comp = fract(v * bitShift);"),s.push("  comp -= comp.xxyz * bitMask;"),s.push("  return comp;"),s.push("}"),s.push("void main(void) {"),t){s.push("  bool clippable = (float(vFlags2.x) > 0.0);"),s.push("  if (clippable) {"),s.push("      float dist = 0.0;");for(var i=0;i<e.sectionPlanes.length;i++)s.push("      if (sectionPlaneActive"+i+") {"),s.push("          dist += clamp(dot(-sectionPlaneDir"+i+".xyz, vWorldPosition.xyz - sectionPlanePos"+i+".xyz), 0.0, 1000.0);"),s.push("      }");s.push("      if (dist > 0.0) { discard; }"),s.push("  }")}return s.push("    gl_FragColor = encodeFloat( gl_FragCoord.z); "),s.push("}"),s}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const $t=p.vec4(),es=p.vec3(),ts={linear:"linearToLinear",sRGB:"sRGBToLinear",gamma:"gammaToLinear"};class ss{constructor(e,t){this._scene=e,this._withSAO=t,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){const e=this._scene;return[e.gammaOutput,e._lightsState.getHash(),e._sectionPlanesState.getHash(),this._withSAO?"sao":"nosao"].join(";")}drawLayer(e,t,s){const i=this._scene,r=i.camera,o=t.model,n=i.canvas.gl,a=t._state,l=t._state.origin;if(!this._program&&(this._allocate(),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram(e)),n.uniform1i(this._uRenderPass,s),n.uniformMatrix4fv(this._uViewMatrix,!1,l?j(r.viewMatrix,l):r.viewMatrix),n.uniformMatrix4fv(this._uViewNormalMatrix,!1,r.viewNormalMatrix),n.uniformMatrix4fv(this._uWorldMatrix,!1,o.worldMatrix),n.uniformMatrix4fv(this._uWorldNormalMatrix,!1,o.worldNormalMatrix);const h=i._sectionPlanesState.sectionPlanes.length;if(h>0){const e=i._sectionPlanesState.sectionPlanes,s=t.layerIndex*h,r=o.renderFlags;for(let t=0;t<h;t++){const i=this._uSectionPlanes[t];if(i){const o=r.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,o?1:0),o){const s=e[t];if(l){const e=W(s.dist,s.dir,l,es);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,t._state.positionsDecodeMatrix),this._aPosition.bindArrayBuffer(a.positionsBuf),this._aNormal&&this._aNormal.bindArrayBuffer(a.normalsBuf),this._aColor&&this._aColor.bindArrayBuffer(a.colorsBuf),this._aMetallicRoughness&&this._aMetallicRoughness.bindArrayBuffer(a.metallicRoughnessBuf),this._aFlags&&this._aFlags.bindArrayBuffer(a.flagsBuf),this._aFlags2&&this._aFlags2.bindArrayBuffer(a.flags2Buf),this._aOffset&&this._aOffset.bindArrayBuffer(a.offsetsBuf),a.indicesBuf.bind(),n.drawElements(n.TRIANGLES,a.indicesBuf.numItems,a.indicesBuf.itemType,0),e.drawElements++}_allocate(){const e=this._scene,t=e.canvas.gl,s=e._lightsState;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uRenderPass=i.getLocation("renderPass"),this._uPositionsDecodeMatrix=i.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=i.getLocation("worldMatrix"),this._uWorldNormalMatrix=i.getLocation("worldNormalMatrix"),this._uViewMatrix=i.getLocation("viewMatrix"),this._uViewNormalMatrix=i.getLocation("viewNormalMatrix"),this._uProjMatrix=i.getLocation("projMatrix"),this._uGammaFactor=i.getLocation("gammaFactor"),this._uLightAmbient=i.getLocation("lightAmbient"),this._uLightColor=[],this._uLightDir=[],this._uLightPos=[],this._uLightAttenuation=[];const r=s.lights;let o;for(let e=0,t=r.length;e<t;e++)switch(o=r[e],o.type){case"dir":this._uLightColor[e]=i.getLocation("lightColor"+e),this._uLightPos[e]=null,this._uLightDir[e]=i.getLocation("lightDir"+e);break;case"point":this._uLightColor[e]=i.getLocation("lightColor"+e),this._uLightPos[e]=i.getLocation("lightPos"+e),this._uLightDir[e]=null,this._uLightAttenuation[e]=i.getLocation("lightAttenuation"+e);break;case"spot":this._uLightColor[e]=i.getLocation("lightColor"+e),this._uLightPos[e]=i.getLocation("lightPos"+e),this._uLightDir[e]=i.getLocation("lightDir"+e),this._uLightAttenuation[e]=i.getLocation("lightAttenuation"+e)}s.reflectionMaps.length>0&&(this._uReflectionMap="reflectionMap"),s.lightMaps.length>0&&(this._uLightMap="lightMap"),this._uSectionPlanes=[];for(let t=0,s=e._sectionPlanesState.sectionPlanes.length;t<s;t++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+t),pos:i.getLocation("sectionPlanePos"+t),dir:i.getLocation("sectionPlaneDir"+t)});this._aPosition=i.getAttribute("position"),this._aOffset=i.getAttribute("offset"),this._aNormal=i.getAttribute("normal"),this._aColor=i.getAttribute("color"),this._aMetallicRoughness=i.getAttribute("metallicRoughness"),this._aFlags=i.getAttribute("flags"),this._aFlags2=i.getAttribute("flags2"),this._withSAO&&(this._uOcclusionTexture="uOcclusionTexture",this._uSAOParams=i.getLocation("uSAOParams")),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=i.getLocation("logDepthBufFC"))}_bindProgram(e){const t=oe.MAX_TEXTURE_UNITS,s=this._scene,i=s.canvas.gl,r=this._program,o=s._lightsState,n=o.lights,a=s.camera.project;r.bind(),i.uniformMatrix4fv(this._uProjMatrix,!1,a.matrix),this._uLightAmbient&&i.uniform4fv(this._uLightAmbient,s._lightsState.getAmbientColorAndIntensity());for(let e=0,t=n.length;e<t;e++){const t=n[e];this._uLightColor[e]&&i.uniform4f(this._uLightColor[e],t.color[0],t.color[1],t.color[2],t.intensity),this._uLightPos[e]&&(i.uniform3fv(this._uLightPos[e],t.pos),this._uLightAttenuation[e]&&i.uniform1f(this._uLightAttenuation[e],t.attenuation)),this._uLightDir[e]&&i.uniform3fv(this._uLightDir[e],t.dir)}if(o.reflectionMaps.length>0&&o.reflectionMaps[0].texture&&this._uReflectionMap&&(r.bindTexture(this._uReflectionMap,o.reflectionMaps[0].texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%t,e.bindTexture++),o.lightMaps.length>0&&o.lightMaps[0].texture&&this._uLightMap&&(r.bindTexture(this._uLightMap,o.lightMaps[0].texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%t,e.bindTexture++),this._withSAO){const r=s.sao;if(r.possible){const s=i.drawingBufferWidth,o=i.drawingBufferHeight;$t[0]=s,$t[1]=o,$t[2]=r.blendCutoff,$t[3]=r.blendFactor,i.uniform4fv(this._uSAOParams,$t),this._program.bindTexture(this._uOcclusionTexture,e.occlusionTexture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%t,e.bindTexture++}}if(s.logarithmicDepthBufferEnabled){const e=2/(Math.log(a.far+1)/Math.LN2);i.uniform1f(this._uLogDepthBufFC,e)}this._uGammaFactor&&i.uniform1f(this._uGammaFactor,s.gammaFactor)}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState,s=e._lightsState,i=t.sectionPlanes.length>0,r=t.clippingCaps,o=[];return o.push("// Triangles dataTexture quality draw vertex shader"),e.logarithmicDepthBufferEnabled&&oe.SUPPORTED_EXTENSIONS.EXT_frag_depth&&o.push("#extension GL_EXT_frag_depth : enable"),o.push("uniform int renderPass;"),o.push("attribute vec3 position;"),o.push("attribute vec3 normal;"),o.push("attribute vec4 color;"),o.push("attribute vec2 metallicRoughness;"),o.push("attribute vec4 flags;"),o.push("attribute vec4 flags2;"),e.entityOffsetsEnabled&&o.push("attribute vec3 offset;"),o.push("uniform mat4 worldMatrix;"),o.push("uniform mat4 worldNormalMatrix;"),o.push("uniform mat4 viewMatrix;"),o.push("uniform mat4 projMatrix;"),o.push("uniform mat4 viewNormalMatrix;"),o.push("uniform mat4 positionsDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(o.push("uniform float logDepthBufFC;"),oe.SUPPORTED_EXTENSIONS.EXT_frag_depth&&o.push("varying float vFragDepth;"),o.push("bool isPerspectiveMatrix(mat4 m) {"),o.push("    return (m[2][3] == - 1.0);"),o.push("}"),o.push("varying float isPerspective;")),o.push("vec3 octDecode(vec2 oct) {"),o.push("    vec3 v = vec3(oct.xy, 1.0 - abs(oct.x) - abs(oct.y));"),o.push("    if (v.z < 0.0) {"),o.push("        v.xy = (1.0 - abs(v.yx)) * vec2(v.x >= 0.0 ? 1.0 : -1.0, v.y >= 0.0 ? 1.0 : -1.0);"),o.push("    }"),o.push("    return normalize(v);"),o.push("}"),o.push("varying vec4 vViewPosition;"),o.push("varying vec3 vViewNormal;"),o.push("varying vec4 vColor;"),o.push("varying vec2 vMetallicRoughness;"),s.lightMaps.length>0&&o.push("varying vec3 vWorldNormal;"),i&&(o.push("varying vec4 vWorldPosition;"),o.push("varying vec4 vFlags2;"),r&&o.push("varying vec4 vClipPosition;")),o.push("void main(void) {"),o.push("if (int(flags.x) != renderPass) {"),o.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),o.push("} else {"),o.push("vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),e.entityOffsetsEnabled&&o.push("worldPosition.xyz = worldPosition.xyz + offset;"),o.push("vec4 viewPosition  = viewMatrix * worldPosition; "),o.push("vec4 worldNormal =  worldNormalMatrix * vec4(octDecode(normal.xy), 0.0); "),o.push("vec3 viewNormal = normalize((viewNormalMatrix * worldNormal).xyz);"),o.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(o.push("isPerspective = float (isPerspectiveMatrix(projMatrix));"),oe.SUPPORTED_EXTENSIONS.EXT_frag_depth?o.push("vFragDepth = 1.0 + clipPos.w;"):(o.push("clipPos.z = log2( max( 1e-6, clipPos.w + 1.0 ) ) * logDepthBufFC - 1.0;"),o.push("clipPos.z *= clipPos.w;"))),i&&(o.push("vWorldPosition = worldPosition;"),o.push("vFlags2 = flags2;"),r&&o.push("vClipPosition = clipPos;")),o.push("vViewPosition = viewPosition;"),o.push("vViewNormal = viewNormal;"),o.push("vColor = color;"),o.push("vMetallicRoughness = metallicRoughness;"),s.lightMaps.length>0&&o.push("vWorldNormal = worldNormal.xyz;"),o.push("gl_Position = clipPos;"),o.push("}"),o.push("}"),o}_buildFragmentShader(){const e=this._scene,t=e.gammaOutput,s=e._sectionPlanesState,i=e._lightsState,r=s.sectionPlanes.length>0,o=s.clippingCaps,n=[];n.push("// Triangles dataTexture quality draw fragment shader"),e.logarithmicDepthBufferEnabled&&oe.SUPPORTED_EXTENSIONS.EXT_frag_depth&&n.push("#extension GL_EXT_frag_depth : enable"),n.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),n.push("precision highp float;"),n.push("precision highp int;"),n.push("#else"),n.push("precision mediump float;"),n.push("precision mediump int;"),n.push("#endif"),e.logarithmicDepthBufferEnabled&&oe.SUPPORTED_EXTENSIONS.EXT_frag_depth&&(n.push("varying float isPerspective;"),n.push("uniform float logDepthBufFC;"),n.push("varying float vFragDepth;")),n.push("varying vec4 vViewPosition;"),n.push("varying vec3 vViewNormal;"),n.push("varying vec4 vColor;"),n.push("varying vec2 vMetallicRoughness;"),i.lightMaps.length>0&&n.push("varying vec3 vWorldNormal;"),n.push("uniform mat4 viewMatrix;"),i.reflectionMaps.length>0&&n.push("uniform samplerCube reflectionMap;"),i.lightMaps.length>0&&n.push("uniform samplerCube lightMap;"),n.push("uniform vec4 lightAmbient;");for(let e=0,t=i.lights.length;e<t;e++){const t=i.lights[e];"ambient"!==t.type&&(n.push("uniform vec4 lightColor"+e+";"),"dir"===t.type&&n.push("uniform vec3 lightDir"+e+";"),"point"===t.type&&n.push("uniform vec3 lightPos"+e+";"),"spot"===t.type&&(n.push("uniform vec3 lightPos"+e+";"),n.push("uniform vec3 lightDir"+e+";")))}if(this._withSAO&&(n.push("uniform sampler2D uOcclusionTexture;"),n.push("uniform vec4      uSAOParams;"),n.push("const float       packUpscale = 256. / 255.;"),n.push("const float       unpackDownScale = 255. / 256.;"),n.push("const vec3        packFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );"),n.push("const vec4        unPackFactors = unpackDownScale / vec4( packFactors, 1. );"),n.push("float unpackRGBAToDepth( const in vec4 v ) {"),n.push("    return dot( v, unPackFactors );"),n.push("}")),n.push("uniform float gammaFactor;"),n.push("vec4 linearToLinear( in vec4 value ) {"),n.push("  return value;"),n.push("}"),n.push("vec4 sRGBToLinear( in vec4 value ) {"),n.push("  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );"),n.push("}"),n.push("vec4 gammaToLinear( in vec4 value) {"),n.push("  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );"),n.push("}"),t&&(n.push("vec4 linearToGamma( in vec4 value, in float gammaFactor ) {"),n.push("  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );"),n.push("}")),r){n.push("varying vec4 vWorldPosition;"),n.push("varying vec4 vFlags2;"),o&&n.push("varying vec4 vClipPosition;");for(let e=0,t=s.sectionPlanes.length;e<t;e++)n.push("uniform bool sectionPlaneActive"+e+";"),n.push("uniform vec3 sectionPlanePos"+e+";"),n.push("uniform vec3 sectionPlaneDir"+e+";")}if(n.push("#define PI 3.14159265359"),n.push("#define RECIPROCAL_PI 0.31830988618"),n.push("#define RECIPROCAL_PI2 0.15915494"),n.push("#define EPSILON 1e-6"),n.push("#define saturate(a) clamp( a, 0.0, 1.0 )"),n.push("vec3 inverseTransformDirection(in vec3 dir, in mat4 matrix) {"),n.push("   return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );"),n.push("}"),n.push("struct IncidentLight {"),n.push("   vec3 color;"),n.push("   vec3 direction;"),n.push("};"),n.push("struct ReflectedLight {"),n.push("   vec3 diffuse;"),n.push("   vec3 specular;"),n.push("};"),n.push("struct Geometry {"),n.push("   vec3 position;"),n.push("   vec3 viewNormal;"),n.push("   vec3 worldNormal;"),n.push("   vec3 viewEyeDir;"),n.push("};"),n.push("struct Material {"),n.push("   vec3    diffuseColor;"),n.push("   float   specularRoughness;"),n.push("   vec3    specularColor;"),n.push("   float   shine;"),n.push("};"),n.push("float GGXRoughnessToBlinnExponent(const in float ggxRoughness) {"),n.push("   float r = ggxRoughness + 0.0001;"),n.push("   return (2.0 / (r * r) - 2.0);"),n.push("}"),n.push("float getSpecularMIPLevel(const in float blinnShininessExponent, const in int maxMIPLevel) {"),n.push("   float maxMIPLevelScalar = float( maxMIPLevel );"),n.push("   float desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( ( blinnShininessExponent * blinnShininessExponent ) + 1.0 );"),n.push("   return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );"),n.push("}"),i.reflectionMaps.length>0&&(n.push("vec3 getLightProbeIndirectRadiance(const in vec3 reflectVec, const in float blinnShininessExponent, const in int maxMIPLevel) {"),n.push("   float mipLevel = 0.5 * getSpecularMIPLevel(blinnShininessExponent, maxMIPLevel);"),n.push("   vec3 envMapColor = "+ts[i.reflectionMaps[0].encoding]+"(textureCube(reflectionMap, reflectVec, mipLevel)).rgb;"),n.push("  return envMapColor;"),n.push("}")),n.push("vec3 F_Schlick(const in vec3 specularColor, const in float dotLH) {"),n.push("   float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );"),n.push("   return ( 1.0 - specularColor ) * fresnel + specularColor;"),n.push("}"),n.push("float G_GGX_Smith(const in float alpha, const in float dotNL, const in float dotNV) {"),n.push("   float a2 = ( alpha * alpha );"),n.push("   float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * ( dotNL * dotNL ) );"),n.push("   float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * ( dotNV * dotNV ) );"),n.push("   return 1.0 / ( gl * gv );"),n.push("}"),n.push("float G_GGX_SmithCorrelated(const in float alpha, const in float dotNL, const in float dotNV) {"),n.push("   float a2 = ( alpha * alpha );"),n.push("   float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * ( dotNV * dotNV ) );"),n.push("   float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * ( dotNL * dotNL ) );"),n.push("   return 0.5 / max( gv + gl, EPSILON );"),n.push("}"),n.push("float D_GGX(const in float alpha, const in float dotNH) {"),n.push("   float a2 = ( alpha * alpha );"),n.push("   float denom = ( dotNH * dotNH) * ( a2 - 1.0 ) + 1.0;"),n.push("   return RECIPROCAL_PI * a2 / ( denom * denom);"),n.push("}"),n.push("vec3 BRDF_Specular_GGX(const in IncidentLight incidentLight, const in Geometry geometry, const in vec3 specularColor, const in float roughness) {"),n.push("   float alpha = ( roughness * roughness );"),n.push("   vec3 halfDir = normalize( incidentLight.direction + geometry.viewEyeDir );"),n.push("   float dotNL = saturate( dot( geometry.viewNormal, incidentLight.direction ) );"),n.push("   float dotNV = saturate( dot( geometry.viewNormal, geometry.viewEyeDir ) );"),n.push("   float dotNH = saturate( dot( geometry.viewNormal, halfDir ) );"),n.push("   float dotLH = saturate( dot( incidentLight.direction, halfDir ) );"),n.push("   vec3  F = F_Schlick( specularColor, dotLH );"),n.push("   float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );"),n.push("   float D = D_GGX( alpha, dotNH );"),n.push("   return F * (G * D);"),n.push("}"),n.push("vec3 BRDF_Specular_GGX_Environment(const in Geometry geometry, const in vec3 specularColor, const in float roughness) {"),n.push("   float dotNV = saturate(dot(geometry.viewNormal, geometry.viewEyeDir));"),n.push("   const vec4 c0 = vec4( -1, -0.0275, -0.572,  0.022);"),n.push("   const vec4 c1 = vec4(  1,  0.0425,   1.04, -0.04);"),n.push("   vec4 r = roughness * c0 + c1;"),n.push("   float a004 = min(r.x * r.x, exp2(-9.28 * dotNV)) * r.x + r.y;"),n.push("   vec2 AB    = vec2(-1.04, 1.04) * a004 + r.zw;"),n.push("   return specularColor * AB.x + AB.y;"),n.push("}"),(i.lightMaps.length>0||i.reflectionMaps.length>0)&&(n.push("void computePBRLightMapping(const in Geometry geometry, const in Material material, inout ReflectedLight reflectedLight) {"),i.lightMaps.length>0&&(n.push("   vec3 irradiance = "+ts[i.lightMaps[0].encoding]+"(textureCube(lightMap, geometry.worldNormal)).rgb;"),n.push("   irradiance *= PI;"),n.push("   vec3 diffuseBRDFContrib = (RECIPROCAL_PI * material.diffuseColor);"),n.push("   reflectedLight.diffuse +=  irradiance * diffuseBRDFContrib;")),i.reflectionMaps.length>0&&(n.push("   vec3 reflectVec             = reflect(geometry.viewEyeDir, geometry.viewNormal);"),n.push("   reflectVec                  = inverseTransformDirection(reflectVec, viewMatrix);"),n.push("   float blinnExpFromRoughness = GGXRoughnessToBlinnExponent(material.specularRoughness);"),n.push("   vec3 radiance               = getLightProbeIndirectRadiance(reflectVec, blinnExpFromRoughness, 8);"),n.push("   vec3 specularBRDFContrib    = BRDF_Specular_GGX_Environment(geometry, material.specularColor, material.specularRoughness);"),n.push("   reflectedLight.specular     += radiance * specularBRDFContrib;")),n.push("}")),n.push("void computePBRLighting(const in IncidentLight incidentLight, const in Geometry geometry, const in Material material, inout ReflectedLight reflectedLight) {"),n.push("   float dotNL     = saturate(dot(geometry.viewNormal, incidentLight.direction));"),n.push("   vec3 irradiance = dotNL * incidentLight.color * PI;"),n.push("   reflectedLight.diffuse  += irradiance * (RECIPROCAL_PI * material.diffuseColor);"),n.push("   reflectedLight.specular += irradiance * BRDF_Specular_GGX(incidentLight, geometry, material.specularColor, material.specularRoughness);"),n.push("}"),n.push("void main(void) {"),r){n.push("  bool clippable = (float(vFlags2.x) > 0.0);"),n.push("  if (clippable) {"),n.push("  float dist = 0.0;");for(let e=0,t=s.sectionPlanes.length;e<t;e++)n.push("if (sectionPlaneActive"+e+") {"),n.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),n.push("}");o?(n.push("  if (dist > (0.002 * vClipPosition.w)) {"),n.push("      discard;"),n.push("  }"),n.push("  if (dist > 0.0) { "),n.push("      gl_FragColor=vec4(1.0, 0.0, 0.0, 1.0);"),e.logarithmicDepthBufferEnabled&&oe.SUPPORTED_EXTENSIONS.EXT_frag_depth&&n.push("  gl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;"),n.push("  return;"),n.push("}")):(n.push("  if (dist > 0.0) { "),n.push("      discard;"),n.push("  }")),n.push("}")}n.push("IncidentLight  light;"),n.push("Material       material;"),n.push("Geometry       geometry;"),n.push("ReflectedLight reflectedLight = ReflectedLight(vec3(0.0,0.0,0.0), vec3(0.0,0.0,0.0));"),n.push("vec3 rgb = (vec3(float(vColor.r) / 255.0, float(vColor.g) / 255.0, float(vColor.b) / 255.0));"),n.push("float alpha = float(vColor.a) / 255.0;"),n.push("vec3  diffuseColor = rgb;"),n.push("float specularF0 = 1.0;"),n.push("float metallic = float(vMetallicRoughness.r) / 255.0;"),n.push("float roughness = float(vMetallicRoughness.g) / 255.0;"),n.push("float dielectricSpecular = 0.16 * specularF0 * specularF0;"),n.push("material.diffuseColor      = diffuseColor * (1.0 - dielectricSpecular) * (1.0 - metallic);"),n.push("material.specularRoughness = clamp(roughness, 0.04, 1.0);"),n.push("material.specularColor     = mix(vec3(dielectricSpecular), diffuseColor, metallic);"),n.push("geometry.position      = vViewPosition.xyz;"),n.push("geometry.viewNormal    = -normalize(vViewNormal);"),n.push("geometry.viewEyeDir    = normalize(vViewPosition.xyz);"),i.lightMaps.length>0&&n.push("geometry.worldNormal   = normalize(vWorldNormal);"),(i.lightMaps.length>0||i.reflectionMaps.length>0)&&n.push("computePBRLightMapping(geometry, material, reflectedLight);");for(let e=0,t=i.lights.length;e<t;e++){const t=i.lights[e];if("ambient"!==t.type){if("dir"===t.type)"view"===t.space?n.push("light.direction =  normalize(lightDir"+e+");"):n.push("light.direction =  normalize((viewMatrix * vec4(lightDir"+e+", 0.0)).xyz);");else if("point"===t.type)"view"===t.space?n.push("light.direction =  normalize(lightPos"+e+" - vViewPosition.xyz);"):n.push("light.direction =  normalize((viewMatrix * vec4(lightPos"+e+", 0.0)).xyz);");else{if("spot"!==t.type)continue;"view"===t.space?n.push("light.direction =  normalize(lightDir"+e+");"):n.push("light.direction =  normalize((viewMatrix * vec4(lightDir"+e+", 0.0)).xyz);")}n.push("light.color =  lightColor"+e+".rgb * lightColor"+e+".a;"),n.push("computePBRLighting(light, geometry, material, reflectedLight);")}}return n.push("vec3 outgoingLight = (lightAmbient.rgb * lightAmbient.a * rgb) + (reflectedLight.diffuse) + (reflectedLight.specular);"),n.push("vec4 fragColor;"),this._withSAO?(n.push("   float viewportWidth     = uSAOParams[0];"),n.push("   float viewportHeight    = uSAOParams[1];"),n.push("   float blendCutoff       = uSAOParams[2];"),n.push("   float blendFactor       = uSAOParams[3];"),n.push("   vec2 uv                 = vec2(gl_FragCoord.x / viewportWidth, gl_FragCoord.y / viewportHeight);"),n.push("   float ambient           = smoothstep(blendCutoff, 1.0, unpackRGBAToDepth(texture2D(uOcclusionTexture, uv))) * blendFactor;"),n.push("   fragColor               = vec4(outgoingLight.rgb * ambient, alpha);")):n.push("   fragColor            = vec4(outgoingLight.rgb, alpha);"),t&&n.push("fragColor = linearToGamma(fragColor, gammaFactor);"),n.push("gl_FragColor = fragColor;"),e.logarithmicDepthBufferEnabled&&oe.SUPPORTED_EXTENSIONS.EXT_frag_depth&&n.push("    gl_FragDepthEXT = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),n.push("}"),n}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const is=p.vec3();class rs{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=t._state.origin;this._program||this._allocate(t),e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),this._program.bindTexture(this._uTexturePerObjectIdPositionsDecodeMatrix,{bind:function(e){return n.activeTexture(n["TEXTURE"+e]),n.bindTexture(n.TEXTURE_2D,a.texturePerObjectIdPositionsDecodeMatrix),!0},unbind:function(e){n.activeTexture(n["TEXTURE"+e]),n.bindTexture(n.TEXTURE_2D,null)}},1),this._program.bindTexture(this._uTexturePerVertexIdCoordinates,{bind:function(e){return n.activeTexture(n["TEXTURE"+e]),n.bindTexture(n.TEXTURE_2D,a.texturePerVertexIdCoordinates),!0},unbind:function(e){n.activeTexture(n["TEXTURE"+e]),n.bindTexture(n.TEXTURE_2D,null)}},2),this._program.bindTexture(this._uTexturePerObjectIdColorsAndFlags,{bind:function(e){return n.activeTexture(n["TEXTURE"+e]),n.bindTexture(n.TEXTURE_2D,a.texturePerObjectIdColorsAndFlags),!0},unbind:function(e){n.activeTexture(n["TEXTURE"+e]),n.bindTexture(n.TEXTURE_2D,null)}},3),n.uniform1i(this._uRenderPass,s),n.uniform1i(this._uPickInvisible,e.pickInvisible),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix);const h=e.pickViewMatrix||o.viewMatrix,c=l?j(h,l):h;if(n.uniformMatrix4fv(this._uViewMatrix,!1,c),n.uniformMatrix4fv(this._uProjMatrix,!1,e.pickProjMatrix),r.logarithmicDepthBufferEnabled){const e=2/(Math.log(o.project.far+1)/Math.LN2);n.uniform1f(this._uLogDepthBufFC,e)}const u=r._sectionPlanesState.sectionPlanes.length;if(u>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*u,o=i.renderFlags;for(let t=0;t<u;t++){const i=this._uSectionPlanes[t],r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(l){const e=W(s.dist,s.dir,l,is);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}a.numIndices8Bits>0&&(this._program.bindTexture(this._uTexturePerPolygonIdPortionIds,{bind:function(e){return n.activeTexture(n["TEXTURE"+e]),n.bindTexture(n.TEXTURE_2D,a.texturePerPolygonIdPortionIds8Bits),!0},unbind:function(e){n.activeTexture(n["TEXTURE"+e]),n.bindTexture(n.TEXTURE_2D,null)}},4),this._program.bindTexture(this._uTexturePerPolygonIdIndices,{bind:function(e){return n.activeTexture(n["TEXTURE"+e]),n.bindTexture(n.TEXTURE_2D,a.texturePerPolygonIdIndices8Bits),!0},unbind:function(e){n.activeTexture(n["TEXTURE"+e]),n.bindTexture(n.TEXTURE_2D,null)}},5),n.drawArrays(n.TRIANGLES,0,a.numIndices8Bits)),a.numIndices16Bits>0&&(this._program.bindTexture(this._uTexturePerPolygonIdPortionIds,{bind:function(e){return n.activeTexture(n["TEXTURE"+e]),n.bindTexture(n.TEXTURE_2D,a.texturePerPolygonIdPortionIds16Bits),!0},unbind:function(e){n.activeTexture(n["TEXTURE"+e]),n.bindTexture(n.TEXTURE_2D,null)}},4),this._program.bindTexture(this._uTexturePerPolygonIdIndices,{bind:function(e){return n.activeTexture(n["TEXTURE"+e]),n.bindTexture(n.TEXTURE_2D,a.texturePerPolygonIdIndices16Bits),!0},unbind:function(e){n.activeTexture(n["TEXTURE"+e]),n.bindTexture(n.TEXTURE_2D,null)}},5),n.drawArrays(n.TRIANGLES,0,a.numIndices16Bits)),a.numIndices32Bits>0&&(this._program.bindTexture(this._uTexturePerPolygonIdPortionIds,{bind:function(e){return n.activeTexture(n["TEXTURE"+e]),n.bindTexture(n.TEXTURE_2D,a.texturePerPolygonIdPortionIds32Bits),!0},unbind:function(e){n.activeTexture(n["TEXTURE"+e]),n.bindTexture(n.TEXTURE_2D,null)}},4),this._program.bindTexture(this._uTexturePerPolygonIdIndices,{bind:function(e){return n.activeTexture(n["TEXTURE"+e]),n.bindTexture(n.TEXTURE_2D,a.texturePerPolygonIdIndices32Bits),!0},unbind:function(e){n.activeTexture(n["TEXTURE"+e]),n.bindTexture(n.TEXTURE_2D,null)}},5),n.drawArrays(n.TRIANGLES,0,a.numIndices32Bits)),e.drawElements++}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uPickInvisible=s.getLocation("pickInvisible"),this._uPositionsDecodeMatrix=s.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=s.getLocation("worldMatrix"),this._uViewMatrix=s.getLocation("viewMatrix"),this._uProjMatrix=s.getLocation("projMatrix"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});this._aPackedVertexId=s.getAttribute("packedVertexId"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC")),this._uTexturePerObjectIdPositionsDecodeMatrix="uTexturePerObjectIdPositionsDecodeMatrix",this._uTexturePerObjectIdColorsAndFlags="uTexturePerObjectIdColorsAndFlags",this._uTexturePerVertexIdCoordinates="uTexturePerVertexIdCoordinates",this._uTexturePerPolygonIdNormals="uTexturePerPolygonIdNormals",this._uTexturePerPolygonIdIndices="uTexturePerPolygonIdIndices",this._uTexturePerPolygonIdPortionIds="uTexturePerPolygonIdPortionIds"}_bindProgram(){this._program.bind()}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Triangles dataTexture pick flat normals vertex shader"),s.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),s.push("precision highp float;"),s.push("precision highp int;"),s.push("precision highp usampler2D;"),s.push("precision highp isampler2D;"),s.push("precision highp sampler2D;"),s.push("#else"),s.push("precision mediump float;"),s.push("precision mediump int;"),s.push("precision mediump usampler2D;"),s.push("precision mediump isampler2D;"),s.push("precision mediump sampler2D;"),s.push("#endif"),s.push("uniform int renderPass;"),s.push("in uvec3 packedVertexId;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("uniform bool pickInvisible;"),s.push("uniform mat4 worldMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),s.push("uniform sampler2D uTexturePerObjectIdPositionsDecodeMatrix;"),s.push("uniform usampler2D uTexturePerObjectIdColorsAndFlags;"),s.push("uniform usampler2D uTexturePerVertexIdCoordinates;"),s.push("uniform usampler2D uTexturePerPolygonIdIndices;"),s.push("uniform isampler2D uTexturePerPolygonIdNormals;"),s.push("uniform usampler2D uTexturePerPolygonIdPortionIds;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("out float isPerspective;")),s.push("out vec4 vWorldPosition;"),t&&s.push("out int vFlags2;"),s.push("void main(void) {"),s.push("int polygonIndex = gl_VertexID / 3;"),s.push("int h_normal_index = polygonIndex & 4095;"),s.push("int v_normal_index = polygonIndex >> 12;"),s.push("int h_packed_object_id_index = ((polygonIndex >> 3) / 2) & 4095;"),s.push("int v_packed_object_id_index = ((polygonIndex >> 3) / 2) >> 12;"),s.push("ivec3 packedObjectId = ivec3(texelFetch(uTexturePerPolygonIdPortionIds, ivec2(h_packed_object_id_index, v_packed_object_id_index), 0).rgb);"),s.push("int objectIndex;"),s.push("if (((polygonIndex >> 3) % 2) == 0) {"),s.push("  objectIndex = (packedObjectId.r << 4) + (packedObjectId.g >> 4);"),s.push("} else {"),s.push("  objectIndex = ((packedObjectId.g & 15) << 8) + packedObjectId.b;"),s.push("}"),s.push("ivec2 objectIndexCoords = ivec2(objectIndex % 512, objectIndex / 512);"),s.push("ivec4 packedVertexBase = ivec4(texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+4, objectIndexCoords.y), 0));"),s.push("int h_index = polygonIndex & 4095;"),s.push("int v_index = polygonIndex >> 12;"),s.push("ivec3 vertexIndices = ivec3(texelFetch(uTexturePerPolygonIdIndices, ivec2(h_index, v_index), 0));"),s.push("ivec3 uniqueVertexIndexes = vertexIndices + (packedVertexBase.r << 24) + (packedVertexBase.g << 16) + (packedVertexBase.b << 8) + packedVertexBase.a;"),s.push("ivec3 indexPositionH = uniqueVertexIndexes & 4095;"),s.push("ivec3 indexPositionV = uniqueVertexIndexes >> 12;"),s.push("mat4 positionsDecodeMatrix = transpose(mat4 (texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+0, objectIndexCoords.y), 0), texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+1, objectIndexCoords.y), 0), texelFetch (uTexturePerObjectIdPositionsDecodeMatrix, ivec2(objectIndexCoords.x*3+2, objectIndexCoords.y), 0), vec4(0, 0, 0, 1)));"),s.push("uvec4 flags = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+2, objectIndexCoords.y), 0);"),s.push("uvec4 flags2 = texelFetch (uTexturePerObjectIdColorsAndFlags, ivec2(objectIndexCoords.x*8+3, objectIndexCoords.y), 0);"),s.push("vec3 position1 = vec3(texelFetch(uTexturePerVertexIdCoordinates, ivec2(indexPositionH.r, indexPositionV.r), 0));"),s.push("vec3 position2 = vec3(texelFetch(uTexturePerVertexIdCoordinates, ivec2(indexPositionH.g, indexPositionV.g), 0));"),s.push("vec3 position3 = vec3(texelFetch(uTexturePerVertexIdCoordinates, ivec2(indexPositionH.b, indexPositionV.b), 0));"),s.push("vec3 normal = normalize(cross(position3 - position1, position2 - position1));"),s.push("int vertexNumber = gl_VertexID % 3;"),s.push("vec3 position;"),s.push("if (vertexNumber == 0) position = position1;"),s.push("else if (vertexNumber == 1) position = position2;"),s.push("else position = position3;"),s.push("if (int(flags.w) != renderPass) {"),s.push("      gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("  } else {"),s.push("      vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("      vec4 viewPosition  = viewMatrix * worldPosition; "),s.push("      vWorldPosition = worldPosition;"),t&&s.push("      vFlags2 = flags2.r;"),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),s.push("gl_Position = clipPos;"),s.push("  }"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Triangles dataTexture pick flat normals fragment shader"),i.push("#extension GL_OES_standard_derivatives : enable"),e.logarithmicDepthBufferEnabled&&i.push("#extension GL_EXT_frag_depth : enable"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("in float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),i.push("in vec4 vWorldPosition;"),s){i.push("in int vFlags2;");for(var r=0;r<t.sectionPlanes.length;r++)i.push("uniform bool sectionPlaneActive"+r+";"),i.push("uniform vec3 sectionPlanePos"+r+";"),i.push("uniform vec3 sectionPlaneDir"+r+";")}if(i.push("out vec4 outNormal;"),i.push("void main(void) {"),s){i.push("  bool clippable = vFlags2 > 0;"),i.push("  if (clippable) {"),i.push("      float dist = 0.0;");for(r=0;r<t.sectionPlanes.length;r++)i.push("      if (sectionPlaneActive"+r+") {"),i.push("          dist += clamp(dot(-sectionPlaneDir"+r+".xyz, vWorldPosition.xyz - sectionPlanePos"+r+".xyz), 0.0, 1000.0);"),i.push("      }");i.push("      if (dist > 0.0) { discard; }"),i.push("  }")}return e.logarithmicDepthBufferEnabled&&i.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("  vec3 xTangent = dFdx( vWorldPosition.xyz );"),i.push("  vec3 yTangent = dFdy( vWorldPosition.xyz );"),i.push("  vec3 worldNormal = normalize( cross( xTangent, yTangent ) );"),i.push("  outNormal = vec4((worldNormal * 0.5) + 0.5, 1.0);"),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}class os{constructor(e){this._scene=e}_compile(){this._colorRenderer&&!this._colorRenderer.getValid()&&(this._colorRenderer.destroy(),this._colorRenderer=null),this._colorRendererWithSAO&&!this._colorRendererWithSAO.getValid()&&(this._colorRendererWithSAO.destroy(),this._colorRendererWithSAO=null),this._flatColorRenderer&&!this._flatColorRenderer.getValid()&&(this._flatColorRenderer.destroy(),this._flatColorRenderer=null),this._flatColorRendererWithSAO&&!this._flatColorRendererWithSAO.getValid()&&(this._flatColorRendererWithSAO.destroy(),this._flatColorRendererWithSAO=null),this._colorQualityRenderer&&!this._colorQualityRenderer.getValid()&&(this._colorQualityRenderer.destroy(),this._colorQualityRenderer=null),this._colorQualityRendererWithSAO&&!this._colorQualityRendererWithSAO.getValid()&&(this._colorQualityRendererWithSAO.destroy(),this._colorQualityRendererWithSAO=null),this._depthRenderer&&!this._depthRenderer.getValid()&&(this._depthRenderer.destroy(),this._depthRenderer=null),this._normalsRenderer&&!this._normalsRenderer.getValid()&&(this._normalsRenderer.destroy(),this._normalsRenderer=null),this._silhouetteRenderer&&!this._silhouetteRenderer.getValid()&&(this._silhouetteRenderer.destroy(),this._silhouetteRenderer=null),this._edgesRenderer&&!this._edgesRenderer.getValid()&&(this._edgesRenderer.destroy(),this._edgesRenderer=null),this._edgesColorRenderer&&!this._edgesColorRenderer.getValid()&&(this._edgesColorRenderer.destroy(),this._edgesColorRenderer=null),this._pickMeshRenderer&&!this._pickMeshRenderer.getValid()&&(this._pickMeshRenderer.destroy(),this._pickMeshRenderer=null),this._pickDepthRenderer&&!this._pickDepthRenderer.getValid()&&(this._pickDepthRenderer.destroy(),this._pickDepthRenderer=null),this._vertexDepthRenderer&&!this._vertexDepthRenderer.getValid()&&(this._vertexDepthRenderer.destroy(),this._vertexDepthRenderer=null),this._vertexDepthZBufferInitializer&&!this._vertexDepthZBufferInitializer.getValid()&&(this._vertexDepthZBufferInitializer.destroy(),this._vertexDepthZBufferInitializer=null),this._pickNormalsRenderer&&!1===this._pickNormalsRenderer.getValid()&&(this._pickNormalsRenderer.destroy(),this._pickNormalsRenderer=null),this._pickNormalsFlatRenderer&&!1===this._pickNormalsFlatRenderer.getValid()&&(this._pickNormalsFlatRenderer.destroy(),this._pickNormalsFlatRenderer=null),this._occlusionRenderer&&!1===this._occlusionRenderer.getValid()&&(this._occlusionRenderer.destroy(),this._occlusionRenderer=null),this._shadowRenderer&&!this._shadowRenderer.getValid()&&(this._shadowRenderer.destroy(),this._shadowRenderer=null)}get colorRenderer(){return this._colorRenderer||(this._colorRenderer=new bt(this._scene,!1)),this._colorRenderer}get colorRendererWithSAO(){return this._colorRendererWithSAO||(this._colorRendererWithSAO=new bt(this._scene,!0)),this._colorRendererWithSAO}get colorQualityRenderer(){return this._colorQualityRenderer||(this._colorQualityRenderer=new ss(this._scene,!1)),this._colorQualityRenderer}get colorQualityRendererWithSAO(){return this._colorQualityRendererWithSAO||(this._colorQualityRendererWithSAO=new ss(this._scene,!0)),this._colorQualityRendererWithSAO}get silhouetteRenderer(){return this._silhouetteRenderer||(this._silhouetteRenderer=new xt(this._scene)),this._silhouetteRenderer}get depthRenderer(){return this._depthRenderer||(this._depthRenderer=new Xt(this._scene)),this._depthRenderer}get normalsRenderer(){return this._normalsRenderer||(this._normalsRenderer=new qt(this._scene)),this._normalsRenderer}get edgesRenderer(){return this._edgesRenderer||(this._edgesRenderer=new St(this._scene)),this._edgesRenderer}get edgesColorRenderer(){return this._edgesColorRenderer||(this._edgesColorRenderer=new Mt(this._scene)),this._edgesColorRenderer}get pickMeshRenderer(){return this._pickMeshRenderer||(this._pickMeshRenderer=new Ft(this._scene)),this._pickMeshRenderer}get pickNormalsRenderer(){return this._pickNormalsRenderer||(this._pickNormalsRenderer=new zt(this._scene)),this._pickNormalsRenderer}get pickNormalsFlatRenderer(){return this._pickNormalsFlatRenderer||(this._pickNormalsFlatRenderer=new rs(this._scene)),this._pickNormalsFlatRenderer}get pickDepthRenderer(){return this._pickDepthRenderer||(this._pickDepthRenderer=new Ut(this._scene)),this._pickDepthRenderer}get vertexDepthRenderer(){return this._vertexDepthRenderer||(this._vertexDepthRenderer=new Vt(this._scene)),this._vertexDepthRenderer}get vertexDepthZBufferInitializer(){return this._vertexDepthZBufferInitializer||(this._vertexDepthZBufferInitializer=new Qt(this._scene)),this._vertexDepthZBufferInitializer}get occlusionRenderer(){return this._occlusionRenderer||(this._occlusionRenderer=new Kt(this._scene)),this._occlusionRenderer}get shadowRenderer(){return this._shadowRenderer||(this._shadowRenderer=new Jt(this._scene)),this._shadowRenderer}_destroy(){this._colorRenderer&&this._colorRenderer.destroy(),this._colorRendererWithSAO&&this._colorRendererWithSAO.destroy(),this._flatColorRenderer&&this._flatColorRenderer.destroy(),this._flatColorRendererWithSAO&&this._flatColorRendererWithSAO.destroy(),this._colorQualityRenderer&&this._colorQualityRenderer.destroy(),this._colorQualityRendererWithSAO&&this._colorQualityRendererWithSAO.destroy(),this._depthRenderer&&this._depthRenderer.destroy(),this._normalsRenderer&&this._normalsRenderer.destroy(),this._silhouetteRenderer&&this._silhouetteRenderer.destroy(),this._edgesRenderer&&this._edgesRenderer.destroy(),this._edgesColorRenderer&&this._edgesColorRenderer.destroy(),this._pickMeshRenderer&&this._pickMeshRenderer.destroy(),this._pickDepthRenderer&&this._pickDepthRenderer.destroy(),this._vertexDepthRenderer&&this._vertexDepthRenderer.destroy(),this._vertexDepthZBufferInitializer&&this._vertexDepthZBufferInitializer.destroy(),this._pickNormalsRenderer&&this._pickNormalsRenderer.destroy(),this._pickNormalsFlatRenderer&&this._pickNormalsFlatRenderer.destroy(),this._occlusionRenderer&&this._occlusionRenderer.destroy(),this._shadowRenderer&&this._shadowRenderer.destroy()}}const ns={};class as{constructor(){this.positions=[],this.metallicRoughness=[],this.indices8Bits=[],this.indices16Bits=[],this.indices32Bits=[],this.edgeIndices8Bits=[],this.edgeIndices16Bits=[],this.edgeIndices32Bits=[],this.perObjectColors=[],this.perObjectPickColors=[],this.perObjectSolid=[],this.perObjectOffsets=[],this.perObjectPositionsDecodeMatrices=[],this.perObjectInstancePositioningMatrices=[],this.perObjectVertexBases=[],this.perObjectIndexBaseOffsets=[],this.perObjectEdgeIndexBaseOffsets=[],this.perTriangleNumberPortionId8Bits=[],this.perTriangleNumberPortionId16Bits=[],this.perTriangleNumberPortionId32Bits=[],this.perEdgeNumberPortionId8Bits=[],this.perEdgeNumberPortionId16Bits=[],this.perEdgeNumberPortionId32Bits=[]}}
/**
   * @author https://github.com/tmarti, with support from https://tribia.com/
   * @license MIT
   * 
   * This file takes a geometry given by { positions, indices }, and returns
   * equivalent { positions, indices } arrays but which only contain unique
   * positions.
   * 
   * The time is O(N logN) with the number of positions due to a pre-sorting
   * step, but is much more GC-friendly and actually faster than the classic O(N)
   * approach based in keeping a hash-based LUT to identify unique positions.
   */let ls=null;function hs(e,t){let s;for(let i=0;i<3;i++)if(0!=(s=ls[3*e+i]-ls[3*t+i]))return s;return 0}let cs=null;function us(e){let t=e.positions,s=e.indices,i=e.edgeIndices;!function(e){if(!(null!==cs&&cs.length>=e)){cs=new Uint32Array(e);for(let t=0;t<e;t++)cs[t]=t}}(t.length/3);let r=cs.slice(0,t.length/3),o=cs.slice(0,t.length/3);ls=t,r.sort(hs);let n=0;o[r[0]]=0;for(let e=1,t=r.length;e<t;e++)0!=hs(r[e],r[e-1])&&n++,o[r[e]]=n;const a=new Uint16Array(3*(n+1));n=0,a[3*n+0]=t[3*r[0]+0],a[3*n+1]=t[3*r[0]+1],a[3*n+2]=t[3*r[0]+2];for(let e=1,s=r.length;e<s;e++)0!=hs(r[e],r[e-1])&&(n++,a[3*n+0]=t[3*r[e]+0],a[3*n+1]=t[3*r[e]+1],a[3*n+2]=t[3*r[e]+2]),o[r[e]]=n;ls=null;let l=new Uint32Array(s.length);for(let e=0,t=s.length;e<t;e++)l[e]=o[s[e]];let h=new Uint32Array(i.length);for(let e=0,t=i.length;e<t;e++)h[e]=o[i[e]];return[a,l,h]}
/**
   * @author https://github.com/tmarti, with support from https://tribia.com/
   * @license MIT
   **/let As=null;function ps(e,t){let s,i,r,o,n,a,l=3*e,h=3*t;const c=Math.min(s=As[l],i=As[l+1],r=As[l+2]),u=Math.min(o=As[h],n=As[h+1],a=As[h+2]);if(c!=u)return c-u;const A=Math.max(s,i,r),p=Math.max(o,n,a);return A!=p?A-p:0}let ds=null;function fs(e,t){let s=ds[2*e]-ds[2*t];return 0!=s?s:ds[2*e+1]-ds[2*t+1]}function ms(e,t,s=!1){const i=e.positions||[],r=function(e,t){let s=new Int32Array(e.length/3);for(let e=0,t=s.length;e<t;e++)s[e]=e;As=new Int32Array(e.length);for(let s=0,i=e.length;s<i;s++)As[s]=e[s]>>t;s.sort(ps);const i=new Int32Array(e.length);for(let t=0,r=s.length;t<r;t++)i[3*t+0]=e[3*s[t]+0],i[3*t+1]=e[3*s[t]+1],i[3*t+2]=e[3*s[t]+2];return i}(e.indices||[],t),o=function(e){if(0==(e||[]).length)return[];let t=new Int32Array(e.length/2);for(let e=0,s=t.length;e<s;e++)t[e]=e;for(let t=0,s=e.length;t<s;t+=2)if(e[t]>e[t+1]){let s=e[t];e[t]=e[t+1],e[t+1]=s}ds=new Int32Array(e),t.sort(fs);const s=new Int32Array(e.length);for(let i=0,r=t.length;i<r;i++)s[2*i+0]=e[2*t[i]+0],s[2*i+1]=e[2*t[i]+1];return s}(e.edgeIndices||[]);function n(e,t){if(e>t){let s=e;e=t,t=s}function s(s,i){return s!=e?e-s:i!=t?t-i:0}for(var i=0,r=(o.length>>1)-1;i<=r;){var n=r+i>>1,a=s(o[2*n],o[2*n+1]);if(a>0)i=n+1;else{if(!(a<0))return n;r=n-1}}return-i-1}const a=new Int32Array(o.length/2);a.fill(0);const l=i.length/3;if(l>8*(1<<t))return[e];const h=new Int32Array(l);h.fill(-1);const c=[];function u(){h.fill(-1);let e={positions:[],indices:[],edgeIndices:[],maxNumPositions:(1<<t)-t,numPositions:0,bucketNumber:c.length};return c.push(e),e}let A=u();for(let t=0,s=r.length;t<s;t+=3){let s=0;const l=r[t],c=r[t+1],p=r[t+2];if(-1==h[l]&&s++,-1==h[c]&&s++,-1==h[p]&&s++,s+A.numPositions>A.maxNumPositions&&(A=u()),A.bucketNumber>8)return[e];let d;-1==h[l]&&(h[l]=A.numPositions++,A.positions.push(i[3*l]),A.positions.push(i[3*l+1]),A.positions.push(i[3*l+2])),-1==h[c]&&(h[c]=A.numPositions++,A.positions.push(i[3*c]),A.positions.push(i[3*c+1]),A.positions.push(i[3*c+2])),-1==h[p]&&(h[p]=A.numPositions++,A.positions.push(i[3*p]),A.positions.push(i[3*p+1]),A.positions.push(i[3*p+2])),A.indices.push(h[l]),A.indices.push(h[c]),A.indices.push(h[p]),(d=n(l,c))>=0&&0==a[d]&&(a[d]=1,A.edgeIndices.push(h[o[2*d]]),A.edgeIndices.push(h[o[2*d+1]])),(d=n(l,p))>=0&&0==a[d]&&(a[d]=1,A.edgeIndices.push(h[o[2*d]]),A.edgeIndices.push(h[o[2*d+1]])),(d=n(c,p))>=0&&0==a[d]&&(a[d]=1,A.edgeIndices.push(h[o[2*d]]),A.edgeIndices.push(h[o[2*d+1]]))}const p=t/8*2,d=t/8,f=2*i.length+(r.length+o.length)*p;let m=0,g=-i.length/3;return c.forEach((e=>{m+=2*e.positions.length+(e.indices.length+e.edgeIndices.length)*d,g+=e.positions.length/3})),m>f?[e]:(s&&function(e,t){const s={};let i=0;e.forEach((e=>{let t=e.indices,r=e.edgeIndices,o=e.positions;for(var n=0,a=t.length;n<a;n+=3){var l=o[3*t[n]]+"_"+o[3*t[n]+1]+"_"+o[3*t[n]+2]+"/"+o[3*t[n+1]]+"_"+o[3*t[n+1]+1]+"_"+o[3*t[n+1]+2]+"/"+o[3*t[n+2]]+"_"+o[3*t[n+2]+1]+"_"+o[3*t[n+2]+2];s[l]=!0}i+=e.edgeIndices.length/2;for(n=0,a=r.length;n<a;n+=2)l=o[3*r[n]]+"_"+o[3*r[n]+1]+"_"+o[3*r[n]+2]+"/"+o[3*r[n+1]]+"_"+o[3*r[n+1]+1]+"_"+o[3*r[n+1]+2]+"/"}));{let e=t.indices;t.edgeIndices;let i=t.positions;for(var r=0,o=e.length;r<o;r+=3){var n=i[3*e[r]]+"_"+i[3*e[r]+1]+"_"+i[3*e[r]+2]+"/"+i[3*e[r+1]]+"_"+i[3*e[r+1]+1]+"_"+i[3*e[r+1]+2]+"/"+i[3*e[r+2]]+"_"+i[3*e[r+2]+1]+"_"+i[3*e[r+2]+2];if(!(n in s))throw console.log("Not found "+n),"Ohhhh!"}}}(c,e),c)}const gs={sizeDataColorsAndFlags:0,sizeDataPositionDecodeMatrices:0,sizeDataTextureOffsets:0,sizeDataTexturePositions:0,sizeDataTextureIndices:0,sizeDataTextureEdgeIndices:0,sizeDataTexturePortionIds:0,numberOfGeometries:0,numberOfPortions:0,numberOfLayers:0,numberOfTextures:0,totalPolygons:0,totalPolygons8Bits:0,totalPolygons16Bits:0,totalPolygons32Bits:0,totalEdges:0,totalEdges8Bits:0,totalEdges16Bits:0,totalEdges32Bits:0,cannotCreatePortion:{because10BitsObjectId:0,becauseTextureSize:0},overheadSizeAlignementIndices:0,overheadSizeAlignementEdgeIndices:0};window.printDataTextureRamStats=function(){console.log(JSON.stringify(gs,null,4));let e=0;Object.keys(gs).forEach((t=>{t.startsWith("size")&&(e+=gs[t])})),console.log(`Total size ${e} bytes (${(e/1e3/1e3).toFixed(2)} MB)`),console.log(`Avg bytes / triangle: ${(e/gs.totalPolygons).toFixed(2)}`);let t={};Object.keys(gs).forEach((s=>{s.startsWith("size")&&(t[s]=`${(gs[s]/e*100).toFixed(2)} % of total`)})),console.log(JSON.stringify({percentualRamUsage:t},null,4))};class ys{constructor(e,t,s,i,r=null){this._gl=e,this._texture=t,this._textureWidth=s,this._textureHeight=i,this._textureData=r}bindTexture(e,t,s){return e.bindTexture(t,this,s)}bind(e){return this._gl.activeTexture(this._gl["TEXTURE"+e]),this._gl.bindTexture(this._gl.TEXTURE_2D,this._texture),!0}unbind(e){}}class Es{constructor(){this.texturePerObjectIdColorsAndFlags=null,this.texturePerObjectIdOffsets=null,this.texturePerObjectIdPositionsDecodeMatrix=null,this.texturePerVertexIdCoordinates=null,this.texturePerPolygonIdPortionIds8Bits=null,this.texturePerPolygonIdPortionIds16Bits=null,this.texturePerPolygonIdPortionIds32Bits=null,this.texturePerEdgeIdPortionIds8Bits=null,this.texturePerEdgeIdPortionIds16Bits=null,this.texturePerEdgeIdPortionIds32Bits=null,this.texturePerPolygonIdIndices8Bits=null,this.texturePerPolygonIdIndices16Bits=null,this.texturePerPolygonIdIndices32Bits=null,this.texturePerPolygonIdEdgeIndices8Bits=null,this.texturePerPolygonIdEdgeIndices16Bits=null,this.texturePerPolygonIdEdgeIndices32Bits=null,this.textureCameraMatrices=null,this.texturePickCameraMatrices=null,this.textureModelMatrices=null}finalize(){this.indicesPerBitnessTextures={8:this.texturePerPolygonIdIndices8Bits,16:this.texturePerPolygonIdIndices16Bits,32:this.texturePerPolygonIdIndices32Bits},this.indicesPortionIdsPerBitnessTextures={8:this.texturePerPolygonIdPortionIds8Bits,16:this.texturePerPolygonIdPortionIds16Bits,32:this.texturePerPolygonIdPortionIds32Bits},this.edgeIndicesPerBitnessTextures={8:this.texturePerPolygonIdEdgeIndices8Bits,16:this.texturePerPolygonIdEdgeIndices16Bits,32:this.texturePerPolygonIdEdgeIndices32Bits},this.edgeIndicesPortionIdsPerBitnessTextures={8:this.texturePerEdgeIdPortionIds8Bits,16:this.texturePerEdgeIdPortionIds16Bits,32:this.texturePerEdgeIdPortionIds32Bits}}bindCommonTextures(e,t,s,i,r,o,n){this.texturePerObjectIdPositionsDecodeMatrix.bindTexture(e,t,1),this.texturePerVertexIdCoordinates.bindTexture(e,s,2),this.texturePerObjectIdColorsAndFlags.bindTexture(e,i,3),this.textureCameraMatrices.bindTexture(e,r,4),this.textureModelMatrices.bindTexture(e,o,5),this.texturePerObjectIdOffsets.bindTexture(e,n,6)}bindPickCameraTexture(e,t){this.texturePickCameraMatrices.bindTexture(e,t,4)}bindTriangleIndicesTextures(e,t,s,i){this.indicesPortionIdsPerBitnessTextures[i].bindTexture(e,t,7),this.indicesPerBitnessTextures[i].bindTexture(e,s,8)}bindEdgeIndicesTextures(e,t,s,i){this.edgeIndicesPortionIdsPerBitnessTextures[i].bindTexture(e,t,7),this.edgeIndicesPerBitnessTextures[i].bindTexture(e,s,8)}}class vs{disableBindedTextureFiltering(e){e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}generateCameraDataTexture(e,t,s,i,r=!0){const o=e.createTexture();e.bindTexture(e.TEXTURE_2D,o),e.texStorage2D(e.TEXTURE_2D,1,e.RGBA32F,4,3),this.disableBindedTextureFiltering(e),e.bindTexture(e.TEXTURE_2D,null);const n=new ys(e,o,4,3);let a=!0;if(n._updateViewMatrix=(s,r)=>{e.bindTexture(e.TEXTURE_2D,n._texture),e.texSubImage2D(e.TEXTURE_2D,0,0,0,4,1,e.RGBA,e.FLOAT,new Float32Array(i?j(s,i):s)),e.texSubImage2D(e.TEXTURE_2D,0,0,1,4,1,e.RGBA,e.FLOAT,new Float32Array(t.viewNormalMatrix)),e.texSubImage2D(e.TEXTURE_2D,0,0,2,4,1,e.RGBA,e.FLOAT,new Float32Array(r))},r){const e=()=>{a&&(a=!1,n._updateViewMatrix(t.viewMatrix,t.project.matrix))};t.on("matrix",(()=>a=!0)),s.on("rendering",e),e()}return n}generatePeformanceModelDataTexture(e,t){const s=e.createTexture();return e.bindTexture(e.TEXTURE_2D,s),e.texStorage2D(e.TEXTURE_2D,1,e.RGBA32F,4,2),e.texSubImage2D(e.TEXTURE_2D,0,0,0,4,1,e.RGBA,e.FLOAT,new Float32Array(t.worldMatrix)),e.texSubImage2D(e.TEXTURE_2D,0,0,1,4,1,e.RGBA,e.FLOAT,new Float32Array(t.worldNormalMatrix)),this.disableBindedTextureFiltering(e),e.bindTexture(e.TEXTURE_2D,null),new ys(e,s,4,2)}generateTextureForColorsAndFlags(e,t,s,i,r,o,n){const a=t.length;this.numPortions=a;const l=4096,h=Math.ceil(a/512);if(0==h)throw"texture height == 0";const c=new Uint8Array(16384*h);gs.sizeDataColorsAndFlags+=c.byteLength,gs.numberOfTextures++;for(let e=0;e<a;e++)c.set(t[e],32*e+0),c.set(s[e],32*e+4),c.set([0,0,0,0],32*e+8),c.set([0,0,0,0],32*e+12),c.set([i[e]>>24&255,i[e]>>16&255,i[e]>>8&255,255&i[e]],32*e+16),c.set([r[e]>>24&255,r[e]>>16&255,r[e]>>8&255,255&r[e]],32*e+20),c.set([o[e]>>24&255,o[e]>>16&255,o[e]>>8&255,255&o[e]],32*e+24),c.set([n[e]?1:0,0,0,0],32*e+28);const u=e.createTexture();return e.bindTexture(e.TEXTURE_2D,u),e.texStorage2D(e.TEXTURE_2D,1,e.RGBA8UI,l,h),e.texSubImage2D(e.TEXTURE_2D,0,0,0,l,h,e.RGBA_INTEGER,e.UNSIGNED_BYTE,c,0),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null),new ys(e,u,l,h,c)}generateTextureForObjectOffsets(e,t){const s=512,i=Math.ceil(t/s);if(0==i)throw"texture height == 0";var r=new Float32Array(1536*i).fill(0);gs.sizeDataTextureOffsets+=r.byteLength,gs.numberOfTextures++;const o=e.createTexture();return e.bindTexture(e.TEXTURE_2D,o),e.texStorage2D(e.TEXTURE_2D,1,e.RGB32F,s,i),e.texSubImage2D(e.TEXTURE_2D,0,0,0,s,i,e.RGB,e.FLOAT,r,0),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null),new ys(e,o,s,i,r)}generateTextureForPositionsDecodeMatrices(e,t,s){const i=t.length;if(0==i)throw"num decode+entity matrices == 0";const r=1536,o=Math.ceil(i/512);var n=new Float32Array(6144*o);gs.sizeDataPositionDecodeMatrices+=n.byteLength,gs.numberOfTextures++;const a=p.mat4(),l=p.mat4();for(var h=0;h<t.length;h++)n.set(p.transposeMat4(p.mulMat4(s[h],t[h],a),l).slice(0,12),12*h);const c=e.createTexture();return e.bindTexture(e.TEXTURE_2D,c),e.texStorage2D(e.TEXTURE_2D,1,e.RGBA32F,r,o),e.texSubImage2D(e.TEXTURE_2D,0,0,0,r,o,e.RGBA,e.FLOAT,n,0),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null),new ys(e,c,r,o)}generateTextureFor8BitIndices(e,t){if(0==t.length)return{texture:null,textureHeight:0};const s=4096,i=Math.ceil(t.length/3/s);if(0==i)throw"texture height == 0";const r=new Uint8Array(s*i*3);gs.sizeDataTextureIndices+=r.byteLength,gs.numberOfTextures++,r.fill(0),r.set(t,0);const o=e.createTexture();return e.bindTexture(e.TEXTURE_2D,o),e.texStorage2D(e.TEXTURE_2D,1,e.RGB8UI,s,i),e.texSubImage2D(e.TEXTURE_2D,0,0,0,s,i,e.RGB_INTEGER,e.UNSIGNED_BYTE,r,0),this.disableBindedTextureFiltering(e),e.bindTexture(e.TEXTURE_2D,null),new ys(e,o,s,i)}generateTextureFor16BitIndices(e,t){if(0==t.length)return{texture:null,textureHeight:0};const s=4096,i=Math.ceil(t.length/3/s);if(0==i)throw"texture height == 0";const r=new Uint16Array(s*i*3);gs.sizeDataTextureIndices+=r.byteLength,gs.numberOfTextures++,r.fill(0),r.set(t,0);const o=e.createTexture();return e.bindTexture(e.TEXTURE_2D,o),e.texStorage2D(e.TEXTURE_2D,1,e.RGB16UI,s,i),e.texSubImage2D(e.TEXTURE_2D,0,0,0,s,i,e.RGB_INTEGER,e.UNSIGNED_SHORT,r,0),this.disableBindedTextureFiltering(e),e.bindTexture(e.TEXTURE_2D,null),new ys(e,o,s,i)}generateTextureFor32BitIndices(e,t){if(0==t.length)return{texture:null,textureHeight:0};const s=4096,i=Math.ceil(t.length/3/s);if(0==i)throw"texture height == 0";const r=new Uint32Array(s*i*3);gs.sizeDataTextureIndices+=r.byteLength,gs.numberOfTextures++,r.fill(0),r.set(t,0);const o=e.createTexture();return e.bindTexture(e.TEXTURE_2D,o),e.texStorage2D(e.TEXTURE_2D,1,e.RGB32UI,s,i),e.texSubImage2D(e.TEXTURE_2D,0,0,0,s,i,e.RGB_INTEGER,e.UNSIGNED_INT,r,0),this.disableBindedTextureFiltering(e),e.bindTexture(e.TEXTURE_2D,null),new ys(e,o,s,i)}generateTextureFor8BitsEdgeIndices(e,t){if(0==t.length)return{texture:null,textureHeight:0};const s=4096,i=Math.ceil(t.length/2/s);if(0==i)throw"texture height == 0";const r=new Uint8Array(s*i*2);gs.sizeDataTextureEdgeIndices+=r.byteLength,gs.numberOfTextures++,r.fill(0),r.set(t,0);const o=e.createTexture();return e.bindTexture(e.TEXTURE_2D,o),e.texStorage2D(e.TEXTURE_2D,1,e.RG8UI,s,i),e.texSubImage2D(e.TEXTURE_2D,0,0,0,s,i,e.RG_INTEGER,e.UNSIGNED_BYTE,r,0),this.disableBindedTextureFiltering(e),e.bindTexture(e.TEXTURE_2D,null),new ys(e,o,s,i)}generateTextureFor16BitsEdgeIndices(e,t){if(0==t.length)return{texture:null,textureHeight:0};const s=4096,i=Math.ceil(t.length/2/s);if(0==i)throw"texture height == 0";const r=new Uint16Array(s*i*2);gs.sizeDataTextureEdgeIndices+=r.byteLength,gs.numberOfTextures++,r.fill(0),r.set(t,0);const o=e.createTexture();return e.bindTexture(e.TEXTURE_2D,o),e.texStorage2D(e.TEXTURE_2D,1,e.RG16UI,s,i),e.texSubImage2D(e.TEXTURE_2D,0,0,0,s,i,e.RG_INTEGER,e.UNSIGNED_SHORT,r,0),this.disableBindedTextureFiltering(e),e.bindTexture(e.TEXTURE_2D,null),new ys(e,o,s,i)}generateTextureFor32BitsEdgeIndices(e,t){if(0==t.length)return{texture:null,textureHeight:0};const s=4096,i=Math.ceil(t.length/2/s);if(0==i)throw"texture height == 0";const r=new Uint32Array(s*i*2);gs.sizeDataTextureEdgeIndices+=r.byteLength,gs.numberOfTextures++,r.fill(0),r.set(t,0);const o=e.createTexture();return e.bindTexture(e.TEXTURE_2D,o),e.texStorage2D(e.TEXTURE_2D,1,e.RG32UI,s,i),e.texSubImage2D(e.TEXTURE_2D,0,0,0,s,i,e.RG_INTEGER,e.UNSIGNED_INT,r,0),this.disableBindedTextureFiltering(e),e.bindTexture(e.TEXTURE_2D,null),new ys(e,o,s,i)}generateTextureForPositions(e,t){const s=t.length/3,i=4096,r=Math.ceil(s/i);if(0==r)throw"texture height == 0";const o=new Uint16Array(i*r*3);gs.sizeDataTexturePositions+=o.byteLength,gs.numberOfTextures++,o.fill(0),o.set(t,0);const n=e.createTexture();return e.bindTexture(e.TEXTURE_2D,n),e.texStorage2D(e.TEXTURE_2D,1,e.RGB16UI,i,r),e.texSubImage2D(e.TEXTURE_2D,0,0,0,i,r,e.RGB_INTEGER,e.UNSIGNED_SHORT,o,0),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null),new ys(e,n,i,r)}generateTextureForPackedPortionIds(e,t){if(0==t.length)return{texture:null,textureHeight:0};const s=t.length,i=4096,r=Math.ceil(s/i);if(0==r)throw"texture height == 0";const o=new Uint16Array(i*r);o.set(t,0),gs.sizeDataTexturePortionIds+=o.byteLength,gs.numberOfTextures++;const n=e.createTexture();return e.bindTexture(e.TEXTURE_2D,n),e.texStorage2D(e.TEXTURE_2D,1,e.R16UI,i,r),e.texSubImage2D(e.TEXTURE_2D,0,0,0,i,r,e.RED_INTEGER,e.UNSIGNED_SHORT,o,0),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null),new ys(e,n,i,r)}}const _s=p.identityMat4();p.mat4(),p.mat4();const Is=p.vec4([0,0,0,1]),Ts=p.vec4([0,0,0,1]),Ps=p.vec4([0,0,0,1]),Ds=p.OBB3(),bs=new Uint8Array(4),Rs=new Float32Array(3),Cs=p.vec3(),xs=p.vec3(),Ns=p.vec3(),Os=p.vec3(),Ss=p.vec3(),ws=p.vec3(),Ms=p.vec3();let Bs=0;class Fs{constructor(e,t){this._layerNumber=Bs++,gs.numberOfLayers++,this.sortId=`TrianglesDataTextureLayer-${this._layerNumber}`,this.layerIndex=t.layerIndex,this._dataTextureRenderers=function(e){const t=e.id;let s=ns[t];return s||(s=new os(e),ns[t]=s,s._compile(),e.on("compile",(()=>{s._compile()})),e.on("destroyed",(()=>{delete ns[t],s._destroy()}))),s}(e.scene),this.model=e,this._buffer=new as,this._dataTextureState=new Es,this.dataTextureGenerator=new vs,this._state=new Ze({metallicRoughnessBuf:null,positionsDecodeMatrix:p.mat4(),textureState:this._dataTextureState,numIndices8Bits:0,numIndices16Bits:0,numIndices32Bits:0,numEdgeIndices8Bits:0,numEdgeIndices16Bits:0,numEdgeIndices32Bits:0,numVertices:0}),this._numPortions=0,this._numVisibleLayerPortions=0,this._numTransparentLayerPortions=0,this._numXRayedLayerPortions=0,this._numSelectedLayerPortions=0,this._numHighlightedLayerPortions=0,this._numClippableLayerPortions=0,this._numEdgesLayerPortions=0,this._numPickableLayerPortions=0,this._numCulledLayerPortions=0,this._modelAABB=p.collapseAABB3(),this._portions=[],this._finalized=!1,this._subPortionIdMapping=[],this._instancedGeometrySubPortionData={},this.aabb=p.collapseAABB3(),this.numUpdatesInFrame=0}canCreatePortion(e,t=null){if(this._finalized)throw"Already finalized";const s=this._state,i=e.preparedBuckets.length;this._numPortions+i>65536&&gs.cannotCreatePortion.because10BitsObjectId++;let r=this._numPortions+i<=65536;if(!(null!==t&&t+"#0"in this._instancedGeometrySubPortionData)){const t=Math.max(s.numIndices8Bits,s.numIndices16Bits,s.numIndices32Bits);let i=0,o=e.indices.length/3;e.preparedBuckets.forEach((e=>{i+=e.positions.length/3})),(s.numVertices+i>16777216||t+o>16777216)&&gs.cannotCreatePortion.becauseTextureSize++,r&&=s.numVertices+i<=16777216&&t+o<=16777216}return r}createPortion(e,t=null){if(this._finalized)throw"Already finalized";const s=null!==t;let i=this._subPortionIdMapping.length;const r=[];this._subPortionIdMapping.push(r);const o=s?t.aabb:e.aabb;return e.preparedBuckets.forEach(((i,n)=>{let a;if(s){const t=e.id+"#"+n;t in this._instancedGeometrySubPortionData||(this._instancedGeometrySubPortionData[t]=this.createSubPortionGeometry(i)),a=this._instancedGeometrySubPortionData[t]}else a=this.createSubPortionGeometry(i);const l=p.collapseAABB3(),h=this.createSubPortionObject(s?t:e,a,i.positions,e.positionsDecodeMatrix,s?t.origin:e.origin,l,s,e.solid);p.expandAABB3(o,l),r.push(h)})),this.model.numPortions++,i}createSubPortionGeometry(e){const t=this._state;if(e.indices){const t=8*Math.ceil(e.indices.length/3/8)*3;gs.overheadSizeAlignementIndices+=2*(t-e.indices.length);const s=new Uint32Array(t);s.fill(0),s.set(e.indices),e.indices=s}if(e.edgeIndices){const t=8*Math.ceil(e.edgeIndices.length/2/8)*2;gs.overheadSizeAlignementEdgeIndices+=2*(t-e.edgeIndices.length);const s=new Uint32Array(t);s.fill(0),s.set(e.edgeIndices),e.edgeIndices=s}const s=e.positions,i=e.indices,r=e.edgeIndices,o=this._buffer,n=o.positions.length/3,a=s.length/3;for(let e=0,t=s.length;e<t;e++)o.positions.push(s[e]);let l,h,c=0;if(i){let e;c=i.length/3,e=a<=256?o.indices8Bits:a<=65536?o.indices16Bits:o.indices32Bits,l=e.length/3;for(let t=0,s=i.length;t<s;t++)e.push(i[t])}let u=0;if(r){let e;u=r.length/2,e=a<=256?o.edgeIndices8Bits:a<=65536?o.edgeIndices16Bits:o.edgeIndices32Bits,h=e.length/2;for(let t=0,s=r.length;t<s;t++)e.push(r[t])}return t.numVertices+=a,gs.numberOfGeometries++,{vertexBase:n,numVertices:a,numTriangles:c,numEdges:u,indicesBase:l,edgeIndicesBase:h}}createSubPortionObject(e,t,s,i,r,o,n,a){const l=e.color;e.metallic,e.roughness;const h=e.colors,c=e.opacity,u=e.meshMatrix,A=e.worldMatrix,d=e.pickColor;this.model.scene;const f=this._buffer,m=this._state;if(f.perObjectPositionsDecodeMatrices.push(i),n?f.perObjectInstancePositioningMatrices.push(u):f.perObjectInstancePositioningMatrices.push(_s),n){const e=p.collapseAABB3();p.expandAABB3Points3(e,s),it.decompressAABB(e,i);const t=p.AABB3ToOBB3(e);for(let e=0,s=t.length;e<s;e+=4)Is[0]=t[e+0],Is[1]=t[e+1],Is[2]=t[e+2],p.transformPoint4(u,Is,Ts),A?(p.transformPoint4(A,Ts,Ps),p.expandAABB3Point3(o,Ps)):p.expandAABB3Point3(o,Ts)}else if(i){const e=it.getPositionsBounds(s),t=it.decompressPosition(e.min,i,[]),r=it.decompressPosition(e.max,i,[]);o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=r[0],o[4]=r[1],o[5]=r[2],A&&(p.AABB3ToOBB3(o,Ds),p.transformOBB3(A,Ds),p.OBB3ToAABB3(Ds,o))}else if(u)for(let e=0,t=s.length;e<t;e+=3)Is[0]=s[e+0],Is[1]=s[e+1],Is[2]=s[e+2],p.transformPoint4(u,Is,Ts),s[e+0]=Ts[0],s[e+1]=Ts[1],s[e+2]=Ts[2],p.expandAABB3Point3(this._modelAABB,Ts),A?(p.transformPoint4(A,Ts,Ps),p.expandAABB3Point3(o,Ps)):p.expandAABB3Point3(o,Ts);else for(let e=0,t=s.length;e<t;e+=3)Is[0]=s[e+0],Is[1]=s[e+1],Is[2]=s[e+2],p.expandAABB3Point3(this._modelAABB,Is),A?(p.transformPoint4(A,Is,Ts),p.expandAABB3Point3(o,Ts)):p.expandAABB3Point3(o,Is);r&&(this._state.origin=r,o[0]+=r[0],o[1]+=r[1],o[2]+=r[2],o[3]+=r[0],o[4]+=r[1],o[5]+=r[2]),p.expandAABB3(this.aabb,o),f.perObjectSolid.push(a),h?f.perObjectColors.push([255*h[0],255*h[1],255*h[2],255]):l&&f.perObjectColors.push([l[0],l[1],l[2],c]),f.perObjectPickColors.push(d),f.perObjectVertexBases.push(t.vertexBase);{let e;e=t.numVertices<=256?m.numIndices8Bits:t.numVertices<=65536?m.numIndices16Bits:m.numIndices32Bits,f.perObjectIndexBaseOffsets.push(e/3-t.indicesBase)}{let e;e=t.numVertices<=256?m.numEdgeIndices8Bits:t.numVertices<=65536?m.numEdgeIndices16Bits:m.numEdgeIndices32Bits,f.perObjectEdgeIndexBaseOffsets.push(e/2-t.edgeIndicesBase)}const g=this._portions.length;if(t.numTriangles>0){let e,s=3*t.numTriangles;t.numVertices<=256?(e=f.perTriangleNumberPortionId8Bits,m.numIndices8Bits+=s,gs.totalPolygons8Bits+=t.numTriangles):t.numVertices<=65536?(e=f.perTriangleNumberPortionId16Bits,m.numIndices16Bits+=s,gs.totalPolygons16Bits+=t.numTriangles):(e=f.perTriangleNumberPortionId32Bits,m.numIndices32Bits+=s,gs.totalPolygons32Bits+=t.numTriangles),gs.totalPolygons+=t.numTriangles;for(let s=0;s<t.numTriangles;s+=8)e.push(g)}if(t.numEdges>0){let e,s=2*t.numEdges;t.numVertices<=256?(e=f.perEdgeNumberPortionId8Bits,m.numEdgeIndices8Bits+=s,gs.totalEdges8Bits+=t.numEdges):t.numVertices<=65536?(e=f.perEdgeNumberPortionId16Bits,m.numEdgeIndices16Bits+=s,gs.totalEdges16Bits+=t.numEdges):(e=f.perEdgeNumberPortionId32Bits,m.numEdgeIndices32Bits+=s,gs.totalEdges32Bits+=t.numEdges),gs.totalEdges+=t.numEdges;for(let s=0;s<t.numEdges;s+=8)e.push(g)}return f.perObjectOffsets.push([0,0,0]),this._portions.push({numVerts:t.numTriangles}),this._numPortions++,gs.numberOfPortions++,g}finalize(){if(this._finalized)return void this.model.error("Already finalized");const e=this._state,t=this._dataTextureState,s=this.model.scene.canvas.gl,i=this._buffer;e.gl=s,t.texturePerObjectIdColorsAndFlags=this.dataTextureGenerator.generateTextureForColorsAndFlags(s,i.perObjectColors,i.perObjectPickColors,i.perObjectVertexBases,i.perObjectIndexBaseOffsets,i.perObjectEdgeIndexBaseOffsets,i.perObjectSolid),t.texturePerObjectIdOffsets=this.dataTextureGenerator.generateTextureForObjectOffsets(s,this._numPortions),t.texturePerObjectIdPositionsDecodeMatrix=this.dataTextureGenerator.generateTextureForPositionsDecodeMatrices(s,i.perObjectPositionsDecodeMatrices,i.perObjectInstancePositioningMatrices),t.texturePerVertexIdCoordinates=this.dataTextureGenerator.generateTextureForPositions(s,i.positions),t.texturePerPolygonIdPortionIds8Bits=this.dataTextureGenerator.generateTextureForPackedPortionIds(s,i.perTriangleNumberPortionId8Bits),t.texturePerPolygonIdPortionIds16Bits=this.dataTextureGenerator.generateTextureForPackedPortionIds(s,i.perTriangleNumberPortionId16Bits),t.texturePerPolygonIdPortionIds32Bits=this.dataTextureGenerator.generateTextureForPackedPortionIds(s,i.perTriangleNumberPortionId32Bits),i.perEdgeNumberPortionId8Bits.length>0&&(t.texturePerEdgeIdPortionIds8Bits=this.dataTextureGenerator.generateTextureForPackedPortionIds(s,i.perEdgeNumberPortionId8Bits)),i.perEdgeNumberPortionId16Bits.length>0&&(t.texturePerEdgeIdPortionIds16Bits=this.dataTextureGenerator.generateTextureForPackedPortionIds(s,i.perEdgeNumberPortionId16Bits)),i.perEdgeNumberPortionId32Bits.length>0&&(t.texturePerEdgeIdPortionIds32Bits=this.dataTextureGenerator.generateTextureForPackedPortionIds(s,i.perEdgeNumberPortionId32Bits)),i.indices8Bits.length>0&&(t.texturePerPolygonIdIndices8Bits=this.dataTextureGenerator.generateTextureFor8BitIndices(s,i.indices8Bits)),i.indices16Bits.length>0&&(t.texturePerPolygonIdIndices16Bits=this.dataTextureGenerator.generateTextureFor16BitIndices(s,i.indices16Bits)),i.indices32Bits.length>0&&(t.texturePerPolygonIdIndices32Bits=this.dataTextureGenerator.generateTextureFor32BitIndices(s,i.indices32Bits)),i.edgeIndices8Bits.length>0&&(t.texturePerPolygonIdEdgeIndices8Bits=this.dataTextureGenerator.generateTextureFor8BitsEdgeIndices(s,i.edgeIndices8Bits)),i.edgeIndices16Bits.length>0&&(t.texturePerPolygonIdEdgeIndices16Bits=this.dataTextureGenerator.generateTextureFor16BitsEdgeIndices(s,i.edgeIndices16Bits)),i.edgeIndices32Bits.length>0&&(t.texturePerPolygonIdEdgeIndices32Bits=this.dataTextureGenerator.generateTextureFor32BitsEdgeIndices(s,i.edgeIndices32Bits)),this.model._modelMatricesTexture||(this.model._modelMatricesTexture=this.dataTextureGenerator.generatePeformanceModelDataTexture(s,this.model)),t.textureModelMatrices=this.model._modelMatricesTexture,this.model.cameraTexture||(this.model.cameraTexture=this.dataTextureGenerator.generateCameraDataTexture(this.model.scene.canvas.gl,this.model.scene.camera,this.model.scene,this._state.origin.slice())),t.textureCameraMatrices=this.model.cameraTexture,this.model.pickCameraTexture||(this.model.pickCameraTexture=this.dataTextureGenerator.generateCameraDataTexture(this.model.scene.canvas.gl,this.model.scene.camera,this.model.scene,this._state.origin.slice(),!1)),t.texturePickCameraMatrices=this.model.pickCameraTexture,t.finalize(),this._buffer=null,this._instancedGeometrySubPortionData={},this._finalized=!0}attachToRenderingEvent(){const e=this;this.model.scene.on("rendering",(function(){e._deferredSetFlagsDirty&&e.commitDeferredFlags(),e.numUpdatesInFrame=0}))}isEmpty(){return 0===this._numPortions}initFlags(e,t,s){t&z&&(this._numVisibleLayerPortions++,this.model.numVisibleLayerPortions++),t&J&&(this._numHighlightedLayerPortions++,this.model.numHighlightedLayerPortions++),t&q&&(this._numXRayedLayerPortions++,this.model.numXRayedLayerPortions++),t&$&&(this._numSelectedLayerPortions++,this.model.numSelectedLayerPortions++),t&X&&(this._numClippableLayerPortions++,this.model.numClippableLayerPortions++),t&ee&&(this._numEdgesLayerPortions++,this.model.numEdgesLayerPortions++),t&Y&&(this._numPickableLayerPortions++,this.model.numPickableLayerPortions++),t&K&&(this._numCulledLayerPortions++,this.model.numCulledLayerPortions++),s&&(this._numTransparentLayerPortions++,this.model.numTransparentLayerPortions++);this._setFlags(e,t,s,true),this._setFlags2(e,t,true)}flushInitFlags(){this._setDeferredFlags(),this._setDeferredFlags2()}setVisible(e,t,s){if(!this._finalized)throw"Not finalized";t&z?(this._numVisibleLayerPortions++,this.model.numVisibleLayerPortions++):(this._numVisibleLayerPortions--,this.model.numVisibleLayerPortions--),this._setFlags(e,t,s)}setHighlighted(e,t,s){if(!this._finalized)throw"Not finalized";t&J?(this._numHighlightedLayerPortions++,this.model.numHighlightedLayerPortions++):(this._numHighlightedLayerPortions--,this.model.numHighlightedLayerPortions--),this._setFlags(e,t,s)}setXRayed(e,t,s){if(!this._finalized)throw"Not finalized";t&q?(this._numXRayedLayerPortions++,this.model.numXRayedLayerPortions++):(this._numXRayedLayerPortions--,this.model.numXRayedLayerPortions--),this._setFlags(e,t,s)}setSelected(e,t,s){if(!this._finalized)throw"Not finalized";t&$?(this._numSelectedLayerPortions++,this.model.numSelectedLayerPortions++):(this._numSelectedLayerPortions--,this.model.numSelectedLayerPortions--),this._setFlags(e,t,s)}setEdges(e,t,s){if(!this._finalized)throw"Not finalized";t&ee?(this._numEdgesLayerPortions++,this.model.numEdgesLayerPortions++):(this._numEdgesLayerPortions--,this.model.numEdgesLayerPortions--),this._setFlags(e,t,s)}setClippable(e,t){if(!this._finalized)throw"Not finalized";t&X?(this._numClippableLayerPortions++,this.model.numClippableLayerPortions++):(this._numClippableLayerPortions--,this.model.numClippableLayerPortions--),this._setFlags2(e,t)}beginDeferredFlags(){this._deferredSetFlagsActive=!0}commitDeferredFlags(){if(this._deferredSetFlagsActive=!1,!this._deferredSetFlagsDirty)return;this._deferredSetFlagsDirty=!1;const e=this.model.scene.canvas.gl,t=this._dataTextureState;e.bindTexture(e.TEXTURE_2D,t.texturePerObjectIdColorsAndFlags._texture),e.texSubImage2D(e.TEXTURE_2D,0,0,0,t.texturePerObjectIdColorsAndFlags._textureWidth,t.texturePerObjectIdColorsAndFlags._textureHeight,e.RGBA_INTEGER,e.UNSIGNED_BYTE,t.texturePerObjectIdColorsAndFlags._textureData),e.bindTexture(e.TEXTURE_2D,t.texturePerObjectIdOffsets._texture),e.texSubImage2D(e.TEXTURE_2D,0,0,0,t.texturePerObjectIdOffsets._textureWidth,t.texturePerObjectIdOffsets._textureHeight,e.RGB,e.FLOAT,t.texturePerObjectIdOffsets._textureData)}setCulled(e,t,s){if(!this._finalized)throw"Not finalized";t&K?(this._numCulledLayerPortions+=this._subPortionIdMapping[e].length,this.model.numCulledLayerPortions++):(this._numCulledLayerPortions-=this._subPortionIdMapping[e].length,this.model.numCulledLayerPortions--),this._setFlags(e,t,s)}setCollidable(e,t){if(!this._finalized)throw"Not finalized"}setPickable(e,t,s){if(!this._finalized)throw"Not finalized";t&Y?(this._numPickableLayerPortions++,this.model.numPickableLayerPortions++):(this._numPickableLayerPortions--,this.model.numPickableLayerPortions--),this._setFlags(e,t,s)}setColor(e,t){const s=this._subPortionIdMapping[e];for(let e=0,i=s.length;e<i;e++)this._subPortionSetColor(s[e],t)}_subPortionSetColor(e,t){if(!this._finalized)throw"Not finalized";const s=this._dataTextureState,i=this.model.scene.canvas.gl;bs[0]=t[0],bs[1]=t[1],bs[2]=t[2],bs[3]=t[3],s.texturePerObjectIdColorsAndFlags._textureData.set(bs,32*e),this._deferredSetFlagsActive?this._deferredSetFlagsDirty=!0:(++this.numUpdatesInFrame>=10&&this.beginDeferredFlags(),i.bindTexture(i.TEXTURE_2D,s.texturePerObjectIdColorsAndFlags._texture),i.texSubImage2D(i.TEXTURE_2D,0,e%512*8,Math.floor(e/512),1,1,i.RGBA_INTEGER,i.UNSIGNED_BYTE,bs))}setTransparent(e,t,s){s?(this._numTransparentLayerPortions++,this.model.numTransparentLayerPortions++):(this._numTransparentLayerPortions--,this.model.numTransparentLayerPortions--),this._setFlags(e,t,s)}_setFlags(e,t,s,i=!1){const r=this._subPortionIdMapping[e];for(let e=0,i=r.length;e<i;e++)this._subPortionSetFlags(r[e],t,s)}_subPortionSetFlags(e,t,s,i=!1){if(!this._finalized)throw"Not finalized";const r=!!(t&z),o=!!(t&q),n=!!(t&J),a=!!(t&$),l=!!(t&K);let h,c;h=!r||l||o?Le:s?He:Ue,c=!r||l?Le:a?Ve:n?Ge:o?ke:Le;let u=0;u=!r||l?Le:a?ze:n?We:o?Ke:!!(t&ee)?s?Qe:je:Le;let A=r&&!l&&!!(t&Y)?Ye:Le;const p=this._dataTextureState,d=this.model.scene.canvas.gl;bs[0]=h,bs[1]=c,bs[2]=u,bs[3]=A,p.texturePerObjectIdColorsAndFlags._textureData.set(bs,32*e+8),this._deferredSetFlagsActive?this._deferredSetFlagsDirty=!0:(++this.numUpdatesInFrame>=10&&this.beginDeferredFlags(),d.bindTexture(d.TEXTURE_2D,p.texturePerObjectIdColorsAndFlags._texture),d.texSubImage2D(d.TEXTURE_2D,0,e%512*8+2,Math.floor(e/512),1,1,d.RGBA_INTEGER,d.UNSIGNED_BYTE,bs))}_setDeferredFlags(){}_setFlags2(e,t,s=!1){const i=this._subPortionIdMapping[e];for(let e=0,s=i.length;e<s;e++)this._subPortionSetFlags2(i[e],t)}_subPortionSetFlags2(e,t,s=!1){if(!this._finalized)throw"Not finalized";const i=t&X?255:0,r=this._dataTextureState,o=this.model.scene.canvas.gl;bs[0]=i,bs[1]=0,bs[2]=1,bs[3]=2,r.texturePerObjectIdColorsAndFlags._textureData.set(bs,32*e+12),this._deferredSetFlagsActive?this._deferredSetFlagsDirty=!0:(++this.numUpdatesInFrame>=10&&this.beginDeferredFlags(),o.bindTexture(o.TEXTURE_2D,r.texturePerObjectIdColorsAndFlags._texture),o.texSubImage2D(o.TEXTURE_2D,0,e%512*8+3,Math.floor(e/512),1,1,o.RGBA_INTEGER,o.UNSIGNED_BYTE,bs))}_setDeferredFlags2(){}setOffset(e,t){const s=this._subPortionIdMapping[e];for(let e=0,i=s.length;e<i;e++)this._subPortionSetOffset(s[e],t)}_subPortionSetOffset(e,t){if(!this._finalized)throw"Not finalized";const s=this._dataTextureState,i=this.model.scene.canvas.gl;Rs[0]=t[0],Rs[1]=t[1],Rs[2]=t[2],s.texturePerObjectIdOffsets._textureData.set(Rs,3*e),this._deferredSetFlagsActive?this._deferredSetFlagsDirty=!0:(++this.numUpdatesInFrame>=10&&this.beginDeferredFlags(),i.bindTexture(i.TEXTURE_2D,s.texturePerObjectIdOffsets._texture),i.texSubImage2D(i.TEXTURE_2D,0,0,e,1,1,i.RGB,i.FLOAT,Rs))}drawColorOpaque(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&this._numTransparentLayerPortions!==this._numPortions&&this._numXRayedLayerPortions!==this._numPortions&&(this._updateBackfaceCull(e,t),t.withSAO&&this.model.saoEnabled?t.pbrEnabled&&this.model.pbrEnabled?this._dataTextureRenderers.colorQualityRendererWithSAO&&this._dataTextureRenderers.colorQualityRendererWithSAO.drawLayer(t,this,Ue):this._dataTextureRenderers.colorRendererWithSAO&&this._dataTextureRenderers.colorRendererWithSAO.drawLayer(t,this,Ue):t.pbrEnabled&&this.model.pbrEnabled?this._dataTextureRenderers.colorQualityRenderer&&this._dataTextureRenderers.colorQualityRenderer.drawLayer(t,this,Ue):this._dataTextureRenderers.colorRenderer&&this._dataTextureRenderers.colorRenderer.drawLayer(t,this,Ue))}_updateBackfaceCull(e,t){const s=this.model.backfaces||e.sectioned;if(t.backfaces!==s){const e=t.gl;s?e.disable(e.CULL_FACE):e.enable(e.CULL_FACE),t.backfaces=s}}drawColorTransparent(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numTransparentLayerPortions&&this._numXRayedLayerPortions!==this._numPortions&&(this._updateBackfaceCull(e,t),t.pbrEnabled&&this.model.pbrEnabled?this._dataTextureRenderers.colorQualityRenderer&&this._dataTextureRenderers.colorQualityRenderer.drawLayer(t,this,He):this._dataTextureRenderers.colorRenderer&&this._dataTextureRenderers.colorRenderer.drawLayer(t,this,He))}drawDepth(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&this._numTransparentLayerPortions!==this._numPortions&&this._numXRayedLayerPortions!==this._numPortions&&(this._updateBackfaceCull(e,t),this._dataTextureRenderers.depthRenderer&&this._dataTextureRenderers.depthRenderer.drawLayer(t,this,Ue))}drawNormals(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&this._numTransparentLayerPortions!==this._numPortions&&this._numXRayedLayerPortions!==this._numPortions&&(this._updateBackfaceCull(e,t),this._dataTextureRenderers.normalsRenderer&&this._dataTextureRenderers.normalsRenderer.drawLayer(t,this,Ue))}drawSilhouetteXRayed(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numXRayedLayerPortions&&(this._updateBackfaceCull(e,t),this._dataTextureRenderers.silhouetteRenderer&&this._dataTextureRenderers.silhouetteRenderer.drawLayer(t,this,ke))}drawSilhouetteHighlighted(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numHighlightedLayerPortions&&(this._updateBackfaceCull(e,t),this._dataTextureRenderers.silhouetteRenderer&&this._dataTextureRenderers.silhouetteRenderer.drawLayer(t,this,Ge))}drawSilhouetteSelected(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numSelectedLayerPortions&&(this._updateBackfaceCull(e,t),this._dataTextureRenderers.silhouetteRenderer&&this._dataTextureRenderers.silhouetteRenderer.drawLayer(t,this,Ve))}drawEdgesColorOpaque(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numEdgesLayerPortions&&this._dataTextureRenderers.edgesColorRenderer&&this._dataTextureRenderers.edgesColorRenderer.drawLayer(t,this,je)}drawEdgesColorTransparent(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numEdgesLayerPortions&&0!==this._numTransparentLayerPortions&&this._dataTextureRenderers.edgesColorRenderer&&this._dataTextureRenderers.edgesColorRenderer.drawLayer(t,this,Qe)}drawEdgesHighlighted(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numHighlightedLayerPortions&&this._dataTextureRenderers.edgesRenderer&&this._dataTextureRenderers.edgesRenderer.drawLayer(t,this,We)}drawEdgesSelected(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numSelectedLayerPortions&&this._dataTextureRenderers.edgesRenderer&&this._dataTextureRenderers.edgesRenderer.drawLayer(t,this,ze)}drawEdgesXRayed(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numXRayedLayerPortions&&this._dataTextureRenderers.edgesRenderer&&this._dataTextureRenderers.edgesRenderer.drawLayer(t,this,Ke)}drawOcclusion(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&(this._updateBackfaceCull(e,t),this._dataTextureRenderers.occlusionRenderer&&this._dataTextureRenderers.occlusionRenderer.drawLayer(t,this,Ue))}drawShadow(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&(this._updateBackfaceCull(e,t),this._dataTextureRenderers.shadowRenderer&&this._dataTextureRenderers.shadowRenderer.drawLayer(t,this,Ue))}drawPickMesh(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&(this._updateBackfaceCull(e,t),this._dataTextureRenderers.pickMeshRenderer&&this._dataTextureRenderers.pickMeshRenderer.drawLayer(t,this,Ye))}drawPickDepths(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&(this._updateBackfaceCull(e,t),this._dataTextureRenderers.pickDepthRenderer&&this._dataTextureRenderers.pickDepthRenderer.drawLayer(t,this,Ye))}drawVertexDepths(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&(this._updateBackfaceCull(e,t),this._dataTextureRenderers.vertexDepthRenderer&&this._dataTextureRenderers.vertexDepthRenderer.drawLayer(t,this,Ye))}drawVertexZBufferInitializer(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&(this._updateBackfaceCull(e,t),this._dataTextureRenderers.vertexDepthZBufferInitializer&&this._dataTextureRenderers.vertexDepthZBufferInitializer.drawLayer(t,this,Ye))}drawPickNormals(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&(this._updateBackfaceCull(e,t),this._dataTextureRenderers.pickNormalsRenderer&&this._dataTextureRenderers.pickNormalsRenderer.drawLayer(t,this,Ye))}precisionRayPickSurface(e,t,s,i,r){if(!this.model.scene.pickSurfacePrecisionEnabled)return!1;const o=this._state,n=this._portions[e];if(!n)return this.model.error("portion not found: "+e),!1;const a=n.quantizedPositions,l=n.indices,h=o.origin,c=n.offset,u=Cs,A=xs;u.set(h?p.subVec3(t,h,Ns):t),A.set(s),c&&p.subVec3(u,c),p.transformRay(this.model.worldNormalMatrix,u,A,u,A);const d=Os,f=Ss,m=ws;let g=!1,y=0;const E=Ms;for(let e=0,s=l.length;e<s;e+=3){const s=3*l[e],n=3*l[e+1],v=3*l[e+2];if(d[0]=a[s],d[1]=a[s+1],d[2]=a[s+2],f[0]=a[n],f[1]=a[n+1],f[2]=a[n+2],m[0]=a[v],m[1]=a[v+1],m[2]=a[v+2],p.decompressPosition(d,o.positionsDecodeMatrix),p.decompressPosition(f,o.positionsDecodeMatrix),p.decompressPosition(m,o.positionsDecodeMatrix),p.rayTriangleIntersect(u,A,d,f,m,E)){p.transformPoint3(this.model.worldMatrix,E,E),c&&p.addVec3(E,c),h&&p.addVec3(E,h);const e=Math.abs(p.lenVec3(p.subVec3(E,t,[])));(!g||e>y)&&(y=e,i.set(E),r&&p.triangleNormal(d,f,m,r),g=!0)}}return g&&r&&(p.transformVec3(this.model.worldNormalMatrix,r,r),p.normalizeVec3(r)),g}destroy(){const e=this._state;e.metallicRoughnessBuf&&(e.metallicRoughnessBuf.destroy(),e.metallicRoughnessBuf=null),e.destroy()}}class Ls{constructor(){this.visibleLayers=[],this.sectionPlanesActivePerLayer=[],this.reset()}reset(){this.culled=!1,this.sectioned=!1,this.numLayers=0,this.numVisibleLayers=0,this.colorOpaque=!1,this.colorTransparent=!1,this.edgesOpaque=!1,this.edgesTransparent=!1,this.xrayedSilhouetteOpaque=!1,this.xrayedEdgesOpaque=!1,this.xrayedSilhouetteTransparent=!1,this.xrayedEdgesTransparent=!1,this.highlightedSilhouetteOpaque=!1,this.highlightedEdgesOpaque=!1,this.highlightedSilhouetteTransparent=!1,this.highlightedEdgesTransparent=!1,this.selectedSilhouetteOpaque=!1,this.selectedEdgesOpaque=!1,this.selectedSilhouetteTransparent=!1,this.selectedEdgesTransparent=!1}}let Us=!1;const Hs=[];class Gs{constructor(e,t){this.triangleLODLevels=e,this.nodesInLOD={},this.triangleCountInLOD={},this.targetFps=t,this.lodLevelIndex=0,this.consecutiveFramesWithTargetFps=0,this.consecutiveFramesWithoutTargetFps=0}initializeLodState(e){if(0==e._nodeList.length)return;const t=e._nodeList;let s={},i={};for(let e=0,o=t.length;e<o;e++){const o=t[e];let n,a;for(n=0,a=this.triangleLODLevels.length;n<a&&!(o.numTriangles>=this.triangleLODLevels[n]);n++);var r=this.triangleLODLevels[n]||0;r in s||(s[r]=[]),s[r].push(o),r in i||(i[r]=0),i[r]+=o.numTriangles}this.nodesInLOD=s,this.triangleCountInLOD=i}}class Vs{constructor(e,t,s){this.model=e,this.lodState=new Gs(t,s),console.time("initializeLodState"),this.lodState.initializeLodState(e),console.timeEnd("initializeLodState"),function(e,t){if(!Us){Us=!0;const t=4;let s=new Array(t),i=0,r=-1,o=Date.now(),n=0;e.on("rendering",(function(){if(-1!=r)for(let e=0,t=Hs.length;e<t;e++)Hs[e].applyLodCulling(r)})),e.on("rendered",(function(){o=Date.now(),window.requestAnimationFrame((function(){i++;const e=Date.now();n=e-o,o=e,s[i%t]=n;let a=0;if(i>t){for(let e=0;e<t;e++)a+=s[e];r=t/a*1e3}}))}));{let t=0,s=t;e.camera.on("matrix",(function(){s=t})),e.on("tick",(function(){if(t-s>3)for(let e=0,t=Hs.length;e<t;e++)Hs[e].resetLodCulling();t++}))}}Hs.push(t)}(this.model.scene,this)}_increaseLODLevelIndex(){const e=this.lodState;if(e.lodLevelIndex==e.triangleLODLevels.length)return!1;const t=e.nodesInLOD[e.triangleLODLevels[e.lodLevelIndex]]||[];for(let e=0,s=t.length;e<s;e++)t[e].culledLOD=!0;return e.lodLevelIndex++,!0}_decreaseLODLevelIndex(){const e=this.lodState;if(0==e.lodLevelIndex)return!1;const t=e.nodesInLOD[e.triangleLODLevels[e.lodLevelIndex-1]]||[];for(let e=0,s=t.length;e<s;e++)t[e].culledLOD=!1;return e.lodLevelIndex--,!0}applyLodCulling(e){let t=this.lodState;this.model;let s=!1;return e<t.targetFps?++t.consecutiveFramesWithoutTargetFps>0&&(t.consecutiveFramesWithoutTargetFps=0,s=this._increaseLODLevelIndex()):e>t.targetFps+4&&++t.consecutiveFramesWithTargetFps>1&&(t.consecutiveFramesWithTargetFps=0,s=this._decreaseLODLevelIndex()),s&&console.log("LOD level = "+t.lodLevelIndex),s}resetLodCulling(){this.model;let e=!1,t=!1;do{e|=t=this._decreaseLODLevelIndex()}while(t);return e&&console.log("LOD resetted"),e}}var ks={},js={};!function(e){if("object"==typeof js&&void 0!==ks)ks.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).RBush3D=e()}}((function(){return function e(t,s,i){function r(n,a){if(!s[n]){if(!t[n]){var l="function"==typeof require&&require;if(!a&&l)return l(n,!0);if(o)return o(n,!0);var h=new Error("Cannot find module '"+n+"'");throw h.code="MODULE_NOT_FOUND",h}var c=s[n]={exports:{}};t[n][0].call(c.exports,(function(e){return r(t[n][1][e]||e)}),c,c.exports,e,t,s,i)}return s[n].exports}for(var o="function"==typeof require&&require,n=0;n<i.length;n++)r(i[n]);return r}({1:[function(e,t,s){Object.defineProperty(s,"__esModule",{value:!0});var i=e("quickselect"),r=[],o=function(e){return r.push(e)},n=function(e){e&&(o(e),c(e)||e.children.forEach(n))},a=function(e){var t=r.pop();return t?(t.children=e,t.height=1,t.leaf=!0,t.minX=1/0,t.minY=1/0,t.minZ=1/0,t.maxX=-1/0,t.maxY=-1/0,t.maxZ=-1/0):t={children:e,height:1,leaf:!0,minX:1/0,minY:1/0,minZ:1/0,maxX:-1/0,maxY:-1/0,maxZ:-1/0},t},l=[],h=function(e,t){var s=l.pop();return s?(s.dist=e,s.node=t):s={dist:e,node:t},s},c=function(e){return e.leaf},u=function(e,t){return e.leaf},A=function(e,t,s){if(!s)return t.indexOf(e);for(var i=0;i<t.length;i++)if(s(e,t[i]))return i;return-1},p=function(e){d(e,0,e.children.length,e)},d=function(e,t,s,i){var r=i;r?(r.minX=1/0,r.minY=1/0,r.minZ=1/0,r.maxX=-1/0,r.maxY=-1/0,r.maxZ=-1/0):r=a([]);for(var o=t,n=void 0;o<s;o++)n=e.children[o],f(r,n);return r},f=function(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.minZ=Math.min(e.minZ,t.minZ),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e.maxZ=Math.max(e.maxZ,t.maxZ),e},m=function(e){return(e.maxX-e.minX)*(e.maxY-e.minY)*(e.maxZ-e.minZ)},g=function(e){return e.maxX-e.minX+(e.maxY-e.minY)+(e.maxZ-e.minZ)},y=function(e,t){var s=Math.min(e.minX,t.minX),i=Math.min(e.minY,t.minY),r=Math.min(e.minZ,t.minZ);return(Math.max(e.maxX,t.maxX)-s)*(Math.max(e.maxY,t.maxY)-i)*(Math.max(e.maxZ,t.maxZ)-r)},E=function(e,t){var s=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),r=Math.max(e.minZ,t.minZ),o=Math.min(e.maxX,t.maxX),n=Math.min(e.maxY,t.maxY),a=Math.min(e.maxZ,t.maxZ);return Math.max(0,o-s)*Math.max(0,n-i)*Math.max(0,a-r)},v=function(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&e.minZ<=t.minZ&&t.maxX<=e.maxX&&t.maxY<=e.maxY&&t.maxZ<=e.maxZ};s.intersects=function(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.minZ<=e.maxZ&&t.maxX>=e.minX&&t.maxY>=e.minY&&t.maxZ>=e.minZ},s.boxRayIntersects=function(e,t,s,i,r,o,n){var a=(e.minX-t)*r,l=(e.maxX-t)*r,h=(e.minY-s)*o,c=(e.maxY-s)*o,u=(e.minZ-i)*n,A=(e.maxZ-i)*n,p=Math.min(u,A),d=Math.max(u,A),f=Math.min(h,c),m=Math.max(h,c),g=Math.min(a,l),y=Math.max(a,l),E=Math.max(0,g,f,p);return Math.min(y,m,d)>=E?E:1/0};var _=function(e,t,s,r,o){for(var n,a=[t,s];a.length;)(s=a.pop())-(t=a.pop())<=r||(n=t+Math.ceil((s-t)/r/2)*r,i(e,n,t,s,o),a.push(t,n,n,s))},I=function(e,t){return e.minX-t.minX},T=function(e,t){return e.minY-t.minY},P=function(e,t){return e.minZ-t.minZ},D=function(){function e(e){void 0===e&&(e=16),this.maxEntries=Math.max(e,8),this.minEntries=Math.max(4,Math.ceil(.4*this.maxEntries)),this.clear()}return e.alloc=function(){return this.pool.pop()||new this},e.free=function(e){e.clear(),this.pool.push(e)},e.prototype.searchCustom=function(e,t){var s=this.data,i=[];if(!e(s,u(s)))return i;for(var r=[];s;){for(var o=0,n=s.children.length;o<n;o++){var a=s.children[o];e(a,u(s))&&(u(s)?i.push(a):t(a)?this._all(a,i):r.push(a))}s=r.pop()}return i},e.prototype.analyzeTriangles=function(e){void 0===e&&(e=this.data);var t=0;if(c(e))for(var s=0,i=e.children.length;s<i;s++)t+=e.children[s].numTriangles;else for(s=0,i=e.children.length;s<i;s++)t+=this.analyzeTriangles(e.children[s]);return e.totalTriangles=t},e.prototype.groupNodesByNumTrianglesThreshold=function(e,t){void 0===t&&(this.analyzeTriangles(),t=this.data);for(var s=[],i=0,r=t.children.length;i<r;i++){var o=t.children[i];s.push({item:o,triangles:o.totalTriangles||o.numTriangles})}s.sort((function(e,t){return-(e.item.triangles-t.item.triangles)}));var n=[],a=[],l=0;for(i=0,r=s.length;i<r;i++){var h=s[i];if(l+h.triangles<e)a.push(h),l+=h.triangles;else if(a.length&&(n.push(a),a=[],l=0),l+h.triangles<e)i--;else if(u(t,h.item))n.push([h]);else{for(var c=this.groupNodesByNumTrianglesThreshold(e,h.item),A=[],p=0,d=0,f=c.length;d<f-1;d++)n.push(c[i]);if(c.length>1){for(d=0,f=(c=c[c.length-1]).length;d<f;d++)(p+=c[d].triangles)<e?A.push(c[d]):(0==p&&A.push(c[d]),n.push(A),p=0,A=[]);A.forEach((function(e){a.push(e),l+=e.triangles}))}}}return a.length&&n.push(a),n},e.prototype.search=function(e){var t=this.data,i=[];if(!s.intersects(e,t))return i;for(var r=[];t;){for(var o=0,n=t.children.length;o<n;o++){var a=t.children[o];s.intersects(e,a)&&(u(t)?i.push(a):v(e,a)?this._all(a,i):r.push(a))}t=r.pop()}return i},e.prototype.collides=function(e){var t=this.data;if(!s.intersects(e,t))return!1;for(var i=[];t;){for(var r=0,o=t.children.length;r<o;r++){var n=t.children[r];if(s.intersects(e,n)){if(u(t)||v(e,n))return!0;i.push(n)}}t=i.pop()}return!1},e.prototype.raycastInv=function(e,t,i,r,o,n,a){void 0===a&&(a=1/0);var c=this.data;if(r===1/0&&o===1/0&&n===1/0)return h(1/0,void 0);if(s.boxRayIntersects(c,e,t,i,r,o,n)===1/0)return h(1/0,void 0);for(var A,p=[h(0,c)],d=function(e,t){var s=p[e];p[e]=p[t],p[t]=s},f=function(){var e=p[0],t=p.length-1;p[0]=p[t],p.length=t;for(var s=0;;){var i=s<<1|1;if(i>=t)break;var r=i+1;if(r<t&&p[r].dist<p[i].dist&&(i=r),p[s].dist<p[i].dist)break;d(s,i),s=i}return function(e){l.push(e)}(e),e.node},m=function(e,t){var s=p.length;for(p.push(h(e,t));s>0;){var i=s-1>>1;if(p[i].dist<=p[s].dist)break;d(s,i),s=i}},g=a;p.length&&p[0].dist<g;)for(var y=0,E=(c=f()).children.length;y<E;y++){var v=c.children[y],_=s.boxRayIntersects(v,e,t,i,r,o,n);if(u(c)){if(_<g){if(0===_)return h(_,v);g=_,A=v}}else m(_,v)}return h(g<a?g:1/0,A)},e.prototype.raycast=function(e,t,s,i,r,o,n){return void 0===n&&(n=1/0),this.raycastInv(e,t,s,1/i,1/r,1/o,n)},e.prototype.all=function(){return this._all(this.data,[])},e.prototype.load=function(e){if(!e||!e.length)return this;if(e.length<this.minEntries){for(var t=0,s=e.length;t<s;t++)this.insert(e[t]);return this}var i=this.build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this.splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},e.prototype.insert=function(e){return e&&this._insert(e,this.data.height-1),this},e.prototype.clear=function(){return this.data&&n(this.data),this.data=a([]),this},e.prototype.remove=function(e,t){if(!e)return this;for(var s,i,r=this.data,o=0,n=!1,a=[],l=[];r||a.length;){if(r||(r=a.pop(),o=l.pop(),i=a[a.length-1],n=!0),c(r)&&-1!==(s=A(e,r.children,t)))return r.children.splice(s,1),a.push(r),this.condense(a),this;n||c(r)||!v(r,e)?i?(o++,r=i.children[o],n=!1):r=void 0:(a.push(r),l.push(o),o=0,i=r,r=r.children[0])}return this},e.prototype.toJSON=function(){return this.data},e.prototype.fromJSON=function(e){return n(this.data),this.data=e,this},e.prototype.build=function(e,t,s,i){var r,o=s-t+1,n=this.maxEntries;if(o<=n)return r=a(e.slice(t,s+1)),p(r),r;i||(i=Math.ceil(Math.log(o)/Math.log(n)),n=Math.ceil(o/Math.pow(n,i-1))),(r=a([])).leaf=!1,r.height=i;var l=Math.ceil(o/n),h=l*Math.ceil(Math.pow(n,2/3)),c=l*Math.ceil(Math.pow(n,1/3));_(e,t,s,c,I);for(var u=t;u<=s;u+=c){var A=Math.min(u+c-1,s);_(e,u,A,h,T);for(var d=u;d<=A;d+=h){var f=Math.min(d+h-1,A);_(e,d,f,l,P);for(var m=d;m<=f;m+=l){var g=Math.min(m+l-1,f);r.children.push(this.build(e,m,g,i-1))}}}return p(r),r},e.prototype._all=function(e,t){for(var s=[];e;)c(e)?t.push.apply(t,e.children):s.push.apply(s,e.children),e=s.pop();return t},e.prototype.chooseSubtree=function(e,t,s,i){for(var r,o,n;i.push(t),!c(t)&&i.length-1!==s;){r=o=1/0;for(var a=0,l=t.children.length;a<l;a++){var h=t.children[a],u=m(h),A=y(e,h)-u;A<o?(o=A,r=u<r?u:r,n=h):A===o&&u<r&&(r=u,n=h)}t=n||t.children[0]}return t},e.prototype.split=function(e,t){var s=e[t],i=s.children.length,r=this.minEntries;this.chooseSplitAxis(s,r,i);var o=this.chooseSplitIndex(s,r,i),n=a(s.children.splice(o,s.children.length-o));n.height=s.height,n.leaf=s.leaf,p(s),p(n),t?e[t-1].children.push(n):this.splitRoot(s,n)},e.prototype.splitRoot=function(e,t){this.data=a([e,t]),this.data.height=e.height+1,this.data.leaf=!1,p(this.data)},e.prototype.chooseSplitIndex=function(e,t,s){for(var i,r=1/0,o=1/0,n=t;n<=s-t;n++){var a=d(e,0,n),l=d(e,n,s),h=E(a,l),c=m(a)+m(l);h<r?(r=h,i=n,o=c<o?c:o):h===r&&c<o&&(o=c,i=n)}return i},e.prototype.chooseSplitAxis=function(e,t,s){var i=this.allDistMargin(e,t,s,I),r=this.allDistMargin(e,t,s,T),o=this.allDistMargin(e,t,s,P);i<r&&i<o?e.children.sort(I):r<i&&r<o&&e.children.sort(T)},e.prototype.allDistMargin=function(e,t,s,i){e.children.sort(i);for(var r=d(e,0,t),o=d(e,s-t,s),n=g(r)+g(o),a=t;a<s-t;a++){var l=e.children[a];f(r,l),n+=g(r)}for(a=s-t-1;a>=t;a--){l=e.children[a];f(o,l),n+=g(o)}return n},e.prototype.adjustParentBBoxes=function(e,t,s){for(var i=s;i>=0;i--)f(t[i],e)},e.prototype.condense=function(e){for(var t=e.length-1,s=void 0;t>=0;t--)0===e[t].children.length?t>0?((s=e[t-1].children).splice(s.indexOf(e[t]),1),o(e[t])):this.clear():p(e[t])},e.prototype._insert=function(e,t,s){var i=[],r=this.chooseSubtree(e,this.data,t,i);for(r.children.push(e),f(r,e);t>=0&&i[t].children.length>this.maxEntries;)this.split(i,t),t--;this.adjustParentBBoxes(e,i,t)},e.pool=[],e}();s.RBush3D=D},{quickselect:2}],2:[function(e,t,s){!function(e,i){"object"==typeof s&&void 0!==t?t.exports=i():e.quickselect=i()}(this,(function(){function e(s,i,r,o,n){for(;o>r;){if(o-r>600){var a=o-r+1,l=i-r+1,h=Math.log(a),c=.5*Math.exp(2*h/3),u=.5*Math.sqrt(h*c*(a-c)/a)*(l-a/2<0?-1:1);e(s,i,Math.max(r,Math.floor(i-l*c/a+u)),Math.min(o,Math.floor(i+(a-l)*c/a+u)),n)}var A=s[i],p=r,d=o;for(t(s,r,i),n(s[o],A)>0&&t(s,r,o);p<d;){for(t(s,p,d),p++,d--;n(s[p],A)<0;)p++;for(;n(s[d],A)>0;)d--}0===n(s[r],A)?t(s,r,d):t(s,++d,o),d<=i&&(r=d+1),i<=d&&(o=d-1)}}function t(e,t,s){var i=e[t];e[t]=e[s],e[s]=i}function s(e,t){return e<t?-1:e>t?1:0}return function(t,i,r,o,n){e(t,i,r||0,o||t.length-1,n||s)}}))},{}]},{},[1])(1)}));var Qs=ks.exports.RBush3D,Ws=function(e){function t(e){var t=0;return e.meshes.forEach((function(e){t+=e.numTriangles})),t}function s(e,t){var s={pos:{x:0,y:0},left:0,right:e,top:0,bottom:t,dir:0};function i(){(0==s.dir&&s.pos.x+1>=s.right||1==s.dir&&s.pos.y+1>=s.bottom||2==s.dir&&s.pos.x-1<=s.left-1||3==s.dir&&s.pos.y-1<=s.top-1)&&(s.dir=(s.dir+1)%4,0==s.dir&&s.left++,1==s.dir&&s.top++,2==s.dir&&s.right--,3==s.dir&&s.bottom--),0==s.dir&&s.pos.x++,1==s.dir&&s.pos.y++,2==s.dir&&s.pos.x--,3==s.dir&&s.pos.y--}for(var r=[],o=e*t;r.length<o;i())r.push(s.pos.x+"_"+s.pos.y);return r}var i,r,o,n,a=0,l=(r=function(t,s){for(var i=s||function(e){return!0},r=(e.aabbTree.data.maxX-e.aabbTree.data.minX)/10,o=(e.aabbTree.data.maxZ-e.aabbTree.data.minZ)/10,n=[],a=e.aabbTree.data.minX,l=0;l<10;l++,a+=r)for(var h=e.aabbTree.data.minZ,c=0;c<10;c++,h+=o)n.push({minX:a,maxX:a+r,minY:-1e8,maxY:1e8,minZ:h,maxZ:h+o,indexX:l,indexZ:c});var u={cellsByEntity:{},entitiesByCell:{},cellsX:10,cellsZ:10};return(n||[]).forEach((function(t){e.aabbTree.search(t).filter((function(e){return i(e.entity)})).forEach((function(e){var s=e.entity.id;u.cellsByEntity[s]=u.cellsByEntity[s]||{cells:[],entity:e.entity},u.cellsByEntity[s].cells.push(t);var i=t.indexX+"_"+t.indexZ;u.entitiesByCell[i]=u.entitiesByCell[i]||{entities:[],cell:t},u.entitiesByCell[i].entities.push(e.entity)}))})),u}((i={cellSideInMeters:.05,entityFilterFunc:function(e){return!0},maxPolygonsPerCluster:9e4,minPercentOfClustredPolygons:.9}).cellSideInMeters,i.entityFilterFunc),o=function(e,s){var i={},r=0;Object.keys(s).forEach((function(e){var o=s[e].cells.length,n=t(s[e].entity);i[o]=(i[o]||0)+n,r+=n}));var o=Object.keys(i);o.sort((function(e,t){return e-t}));for(var n=0,a=0,l=0;l<o.length&&a<e;l++)n=o[l],a+=i[n]/r;return{maxCellsPerEntity:n,polygonStats:{percentClustered:a,numberClustered:Math.round(a*r),numberUnclustered:r-Math.round(a*r)}}}(i.minPercentOfClustredPolygons,r.cellsByEntity),n=function(e,i,r,o,n,a){var l={},h={accumEntities:[]},c=[];s(e,i).forEach((function(e){var s=function(e,t,s,i){return(s[e]||{entities:[]}).entities.filter((function(e){return i[e.id].cells.length<=t}))}(e,r,o,n).filter((function(e){return!(e.id in l)}));s.forEach((function(e){l[e.id]=!0})),s.sort((function(e,s){return t(e)-t(s)}));var i=h.accumEntities.concat(s),u=[],A=a,p=0;do{for(;p<i.length;p++){var d=i[p],f=t(d);f>A&&(c.push(u),u=[],A=a),u.push(d),A-=f}}while(p<i.length);h.accumEntities=u})),h.accumEntities.length&&c.push(h.accumEntities);var u=[];Object.keys(n).forEach((function(e){e in l||u.push(n[e].entity)}));var A=a,p=[];u.forEach((function(e){var s=t(e);s>A&&(c.push(p),p=[],A=a),p.push(e),A-=s})),p.length&&c.push(p);var d={};return c.forEach((function(e,t){e.forEach((function(e){d[e.id]=t}))})),{clusters:c,entityIdToClusterIdMapping:d}}(r.cellsX,r.cellsZ,o.maxCellsPerEntity,r.entitiesByCell,r.cellsByEntity,i.maxPolygonsPerCluster),{clusters:{total:n.clusters.length},clusteringResult:n});a+=l.clusters.total,console.log("Total clusters: "+a);var h=[];return l.clusteringResult.clusters.forEach((function(e){e.forEach((function(e){h.push(e.id)}))})),l.orderedEntityIds=h,l};
/**
   * @author https://github.com/tmarti, with support from https://tribia.com/
   * @license MIT
   */function zs(e,t){t.length;const s=e.length,i=[],r=[];function o(e){for(let s=0,i=e.meshIds.length;s<i;s++)if(t[e.meshIds[s]].geometryId)return!0;return!1}for(let n=0;n<s;n++){const s=e[n];if(o(s)){r.push(n);continue}const a=p.collapseAABB3();let l=0;s.meshIds.forEach((e=>{const s=t[e],i=it.getPositionsBounds(s.positions),r=it.decompressPosition(i.min,s.positionsDecodeMatrix,[]),o=it.decompressPosition(i.max,s.positionsDecodeMatrix,[]);r[0]+=s.origin[0],r[1]+=s.origin[1],r[2]+=s.origin[2],o[0]+=s.origin[0],o[1]+=s.origin[1],o[2]+=s.origin[2],p.expandAABB3Point3(a,r),p.expandAABB3Point3(a,o),l+=Math.round(s.indices.length/3)})),i[n]={aabb:a,numTriangles:l,entityId:s.id}}let n,a=[],l={};if(Object.keys(i).length>0){n=
/**
   * @author https://github.com/tmarti, with support from https://tribia.com/
   * @license MIT
   */
function(e){const t=[];for(let s=0,i=e.length;s<i;s++){const i=e[s];i&&t.push({minX:i.aabb[0],minY:i.aabb[1],minZ:i.aabb[2],maxX:i.aabb[3],maxY:i.aabb[4],maxZ:i.aabb[5],entity:{id:s,xeokitId:i.entityId,meshes:[{numTriangles:i.numTriangles}]},numTriangles:i.numTriangles})}const s=new Qs(4);return s.load(t),s}(i);let e=Ws({aabbTree:n});a=e.orderedEntityIds,l=e.clusteringResult.entityIdToClusterIdMapping}return{orderedClusteredIndexes:a,entityIdToClusterIdMapping:l,instancedIndexes:r,rTreeBasedAabbTree:n}}let Ks=p.vec3();const Ys=256,Xs=180/Math.PI,Zs=new Float32Array(262144);for(let e=-256;e<Ys;e++)for(let t=-256;t<Ys;t++){const s=(e+Ys<<9)+(t+Ys),i=Math.max(Math.abs(e),Math.abs(t));Zs[s]=Math.atan2(e/i,t/i)}function qs(e,t){const s=Ys/Math.max(Math.abs(e),Math.abs(t)),i=Math.round(e*s)+255,r=Math.round(t*s)+255;return Zs[(i<<9)+r]}const Js=256;class $s{constructor(){this._aabbTree=null,this._orderedMeshList=[],this._orderedEntityList=[],this._frustumProps={dirty:!0,wMultiply:1,hMultiply:1},this._cullFrame=0,this.finalized=!1}initializeVfcState(e,t){if(this.finalized)throw"Already finalized";const s=zs(e,t);this._aabbTree=s.rTreeBasedAabbTree;for(let i=0,r=s.orderedClusteredIndexes.length;i<r;i++){const r=s.orderedClusteredIndexes[i],o=s.entityIdToClusterIdMapping[r],n=e[r],a=[];for(let e=0,s=n.meshIds.length;e<s;e++){const s=n.meshIds[e];t[s].id=this._orderedMeshList.length,a.push(this._orderedMeshList.length),this._orderedMeshList.push({clusterNumber:o,mesh:t[s]})}n.meshIds=a,this._orderedEntityList.push(n)}for(let i=0,r=s.instancedIndexes.length;i<r;i++){let r=e[s.instancedIndexes[i]];const o=[];for(let e=0,s=r.meshIds.length;e<s;e++){const s=r.meshIds[e];t[s].id=this._orderedMeshList.length,o.push(this._orderedMeshList.length),this._orderedMeshList.push({clusterNumber:99999,mesh:t[s]})}r.meshIds=o,this._orderedEntityList.push(r)}}finalize(e,t){if(this.finalized)throw"Already finalized";let s=-1;for(let i=0,r=this._orderedMeshList.length;i<r;i++){const{clusterNumber:r,mesh:o}=this._orderedMeshList[i];-1!=s&&s!=r&&t.call(e),e.createMesh(o),s=r}for(let t=0,s=this._orderedEntityList.length;t<s;t++)e.createEntity(this._orderedEntityList[t]);this._orderedMeshList=[],this._orderedEntityList=[],this.finalized=!0}applyViewFrustumCulling(e){if(!this.finalized)throw"Not finalized";if(!this._aabbTree)return;this._canvasElement||(this._canvasElement=e.scene.canvas.canvas),this._camera||(this._camera=e.scene.camera),this._ensureFrustumPropsUpdated(e),this._initializeCullingDataIfNeeded(e);const t=this._searchVisibleNodesWithFrustumCulling();this._cullFrame++,this._markVisibleFrameOfVisibleNodes(t,this._cullFrame),this._cullNonVisibleNodes(e,this._cullFrame)}_initializeCullingDataIfNeeded(e){if(this._internalNodesList)return;if(!this._aabbTree)return;const t=this._aabbTree.all();let s=0;t.forEach((e=>{s=Math.max(s,e.entity.id)}));const i=new Array(s+1);t.forEach((t=>{i[t.entity.id]=e._nodes[t.entity.xeokitId]})),this._internalNodesList=i,this._lastVisibleFrameOfNodes=new Array(i.length),this._lastVisibleFrameOfNodes.fill(0)}_searchVisibleNodesWithFrustumCulling(){return this._aabbTree.searchCustom(((e,t)=>this._aabbIntersectsCameraFrustum(e,t)),(e=>this._aabbContainedInCameraFrustum(e)))}_markVisibleFrameOfVisibleNodes(e,t){const s=this._lastVisibleFrameOfNodes;for(let i=0,r=e.length;i<r;i++)s[e[i].entity.id]=t}_cullNonVisibleNodes(e,t){const s=this._internalNodesList,i=this._lastVisibleFrameOfNodes;for(let e=0,r=s.length;e<r;e++)s[e]&&(s[e].culledVFC=i[e]!==t)}_getPointsForBBox(e){for(var t=[],s=0;s<8;s++)t.push([1&s?e.maxX:e.minX,2&s?e.maxY:e.minY,4&s?e.maxZ:e.minZ]);return t}_aabbIntersectsCameraFrustum(e,t){if(t)return!0;if("ortho"==this._camera.projection)return this._frustumProps.dirty=!1,!0;var s=this._aabbIntersectsCameraFrustum_internal(e);return!!((4096&s||!(1&s||2&s)||1&s)&&(8192&s||!(16&s||32&s)||16&s)&&(16384&s||!(s&Js||512&s)||s&Js))}_aabbContainedInCameraFrustum(e){if("ortho"==this._camera.projection)return this._frustumProps.dirty=!1,!0;var t=e._check;return 1&t&&16&t&&t&Js}_ensureFrustumPropsUpdated(e){const t=Math.min(this._canvasElement.width,this._canvasElement.height);this._frustumProps.wMultiply=this._canvasElement.width/t,this._frustumProps.hMultiply=this._canvasElement.height/t;const s=this._canvasElement.width/this._canvasElement.height;let i=this._camera.perspective.fov;s<1&&(i/=s),i=Math.min(i,120),this._frustumProps.fov=i;const r=p.inverseMat4(e.worldMatrix,p.mat4()),o=p.transformVec3(this._camera.eye,r,[0,0,0]),n=p.transformVec3(this._camera.look,r,[0,0,0]);this._frustumProps.forward=p.normalizeVec3(p.subVec3(n,o,[0,0,0]),[0,0,0]),this._frustumProps.up=p.normalizeVec3(this._camera.up,[0,0,0]),this._frustumProps.right=p.normalizeVec3(p.cross3Vec3(this._frustumProps.forward,this._frustumProps.up,[0,0,0]),[0,0,0]),this._frustumProps.eye=o.slice(),this._frustumProps.CAM_FACTOR_1=this._frustumProps.fov/2*this._frustumProps.wMultiply/Xs,this._frustumProps.CAM_FACTOR_2=this._frustumProps.fov/2*this._frustumProps.hMultiply/Xs}_aabbIntersectsCameraFrustum_internal(e){var t=e._points||this._getPointsForBBox(e);e._points=t;var s=819;window._debug&&(window._debug=!1);for(var i=0,r=t.length;i<r;i++){var o=t[i],n=Ks;n[0]=o[0]-this._frustumProps.eye[0],n[1]=o[1]-this._frustumProps.eye[1],n[2]=o[2]-this._frustumProps.eye[2];var a=p.dotVec3(n,this._frustumProps.forward);a<0?(s|=4,s&=-2):(s|=8,s&=-3);var l=qs(p.dotVec3(n,this._frustumProps.right),a);Math.abs(l)>this._frustumProps.CAM_FACTOR_1?(s|=l<0?64:128,s&=-17):s&=-33;var h=qs(p.dotVec3(n,this._frustumProps.up),a);Math.abs(h)>this._frustumProps.CAM_FACTOR_2?(s|=h<0?1024:2048,s&=-257):s&=-513}return 4&s&&8&s&&(s|=4096),64&s&&128&s&&(s|=8192),1024&s&&2048&s&&(s|=16384),e._check=s,s}}class ei{constructor(e){this.model=e,this.entities=[],this.meshes=[],this.finalized=!1}addEntity(e){if(this.finalized)throw"Already finalized";this.entities.push(e)}addMesh(e){if(this.finalized)throw"Already finalized";this.meshes.push(e)}finalize(e){if(this.finalized)throw"Already finalized";this.finalized=!0,this.vfcState=new $s,console.time("initializeVfcState"),this.vfcState.initializeVfcState(this.entities,this.meshes),console.timeEnd("initializeVfcState"),console.time("finalizeVfcState"),this.vfcState.finalize(this.model,e),console.timeEnd("finalizeVfcState");const t=this;this.model.scene.on("rendering",(()=>this.applyViewFrustumCulling.call(t)))}applyViewFrustumCulling(){if(!this.finalized)throw"Not finalized";this.vfcState.applyViewFrustumCulling(this.model)}}const ti=p.vec3(),si=p.mat4(),ii=p.vec3([1,1,1]),ri=p.vec3([0,0,0]),oi=p.vec3([0,0,0]),ni=p.identityQuaternion();class ai extends x{constructor(e,t={}){if(super(e,t),!(this.scene.canvas.gl instanceof WebGL2RenderingContext))throw"Using a DataTextureSceneModel requires the usage of webgl2";this._enableVertexWelding=!t.disableVertexWelding,this._enableIndexRebucketing=!t.disableIndexRebucketing,this._targetLodFps=t.targetLodFps,t.enableViewFrustumCulling&&(this._vfcManager=new ei(this)),this._aabb=p.collapseAABB3(),this._aabbDirty=!1,this._layerList=[],this._nodeList=[],this._currentDataTextureLayer=null,this._instancingGeometries={},this._preparedInstancingGeometries={},this._meshes={},this._nodes={},this.renderFlags=new Ls,this.numGeometries=0,this.numPortions=0,this.numVisibleLayerPortions=0,this.numTransparentLayerPortions=0,this.numXRayedLayerPortions=0,this.numHighlightedLayerPortions=0,this.numSelectedLayerPortions=0,this.numEdgesLayerPortions=0,this.numPickableLayerPortions=0,this.numClippableLayerPortions=0,this.numCulledLayerPortions=0,this.numEntities=0,this._numTriangles=0,this._edgeThreshold=t.edgeThreshold||10,this.finalized=!1,this.visible=t.visible,this.culled=t.culled,this.pickable=t.pickable,this.clippable=t.clippable,this.collidable=t.collidable,this.castsShadow=t.castsShadow,this.receivesShadow=t.receivesShadow,this.xrayed=t.xrayed,this.highlighted=t.highlighted,this.selected=t.selected,this.edges=t.edges,this.colorize=t.colorize,this.opacity=t.opacity,this.backfaces=t.backfaces,this._origin=p.vec3(t.origin||[0,0,0]),this._position=p.vec3(t.position||[0,0,0]),this._rotation=p.vec3(t.rotation||[0,0,0]),this._quaternion=p.vec4(t.quaternion||[0,0,0,1]),t.rotation&&p.eulerToQuaternion(this._rotation,"XYZ",this._quaternion),this._scale=p.vec3(t.scale||[1,1,1]),this._worldMatrix=p.mat4(),p.composeMat4(this._position,this._quaternion,this._scale,this._worldMatrix),this._worldNormalMatrix=p.mat4(),p.inverseMat4(this._worldMatrix,this._worldNormalMatrix),p.transposeMat4(this._worldNormalMatrix),(t.matrix||t.position||t.rotation||t.scale||t.quaternion)&&(this._viewMatrix=p.mat4(),this._viewNormalMatrix=p.mat4(),this._viewMatrixDirty=!0,this._worldMatrixNonIdentity=!0),this._opacity=1,this._colorize=[1,1,1],this._saoEnabled=!1!==t.saoEnabled,this._pbrEnabled=!1,this._isModel=t.isModel,this._isModel&&this.scene._registerModel(this),this._onCameraViewMatrix=this.scene.camera.on("matrix",(()=>{this._viewMatrixDirty=!0}))}get isPerformanceModel(){return!0}get objects(){return this._nodes}get origin(){return this._origin}get position(){return this._position}get rotation(){return this._rotation}get quaternion(){return this._quaternion}get scale(){return this._scale}get matrix(){return this._worldMatrix}get worldMatrix(){return this._worldMatrix}get worldNormalMatrix(){return this._worldNormalMatrix}get viewMatrix(){return this._viewMatrix?(this._viewMatrixDirty&&(p.mulMat4(this.scene.camera.viewMatrix,this._worldMatrix,this._viewMatrix),p.inverseMat4(this._viewMatrix,this._viewNormalMatrix),p.transposeMat4(this._viewNormalMatrix),this._viewMatrixDirty=!1),this._viewMatrix):this.scene.camera.viewMatrix}get viewNormalMatrix(){return this._viewNormalMatrix?(this._viewMatrixDirty&&(p.mulMat4(this.scene.camera.viewMatrix,this._worldMatrix,this._viewMatrix),p.inverseMat4(this._viewMatrix,this._viewNormalMatrix),p.transposeMat4(this._viewNormalMatrix),this._viewMatrixDirty=!1),this._viewNormalMatrix):this.scene.camera.viewNormalMatrix}get backfaces(){return this._backfaces}set backfaces(e){e=!!e,this._backfaces=e,this.glRedraw()}get entityList(){return this._nodeList}get isEntity(){return!0}get isModel(){return this._isModel}get isObject(){return!1}get aabb(){return this._aabbDirty&&this._rebuildAABB(),this._aabb}get numTriangles(){return this._numTriangles}get numLines(){return 0}get numPoints(){return 0}get visible(){return this.numVisibleLayerPortions>0}set visible(e){e=!1!==e,this._visible=e;for(let t=0,s=this._nodeList.length;t<s;t++)this._nodeList[t].visible=e;this.glRedraw()}get xrayed(){return this.numXRayedLayerPortions>0}set xrayed(e){e=!!e,this._xrayed=e;for(let t=0,s=this._nodeList.length;t<s;t++)this._nodeList[t].xrayed=e;this.glRedraw()}get highlighted(){return this.numHighlightedLayerPortions>0}set highlighted(e){e=!!e,this._highlighted=e;for(let t=0,s=this._nodeList.length;t<s;t++)this._nodeList[t].highlighted=e;this.glRedraw()}get selected(){return this.numSelectedLayerPortions>0}set selected(e){e=!!e,this._selected=e;for(let t=0,s=this._nodeList.length;t<s;t++)this._nodeList[t].selected=e;this.glRedraw()}get edges(){return this.numEdgesLayerPortions>0}set edges(e){e=!!e,this._edges=e;for(let t=0,s=this._nodeList.length;t<s;t++)this._nodeList[t].edges=e;this.glRedraw()}get culled(){return this._culled}set culled(e){e=!!e,this._culled=e;for(let t=0,s=this._nodeList.length;t<s;t++)this._nodeList[t].culled=e;this.glRedraw()}get clippable(){return this._clippable}set clippable(e){e=!1!==e,this._clippable=e;for(let t=0,s=this._nodeList.length;t<s;t++)this._nodeList[t].clippable=e;this.glRedraw()}get collidable(){return this._collidable}set collidable(e){e=!1!==e,this._collidable=e;for(let t=0,s=this._nodeList.length;t<s;t++)this._nodeList[t].collidable=e}get pickable(){return this.numPickableLayerPortions>0}set pickable(e){e=!1!==e,this._pickable=e;for(let t=0,s=this._nodeList.length;t<s;t++)this._nodeList[t].pickable=e}get colorize(){return this._colorize}set colorize(e){this._colorize=e;for(let t=0,s=this._nodeList.length;t<s;t++)this._nodeList[t].colorize=e}get opacity(){return this._opacity}set opacity(e){this._opacity=e;for(let t=0,s=this._nodeList.length;t<s;t++)this._nodeList[t].opacity=e}get castsShadow(){return this._castsShadow}set castsShadow(e){(e=!1!==e)!==this._castsShadow&&(this._castsShadow=e,this.glRedraw())}get receivesShadow(){return this._receivesShadow}set receivesShadow(e){(e=!1!==e)!==this._receivesShadow&&(this._receivesShadow=e,this.glRedraw())}get saoEnabled(){return this._saoEnabled}get pbrEnabled(){return this._pbrEnabled}get isDrawable(){return!0}get isStateSortable(){return!1}get xrayMaterial(){return this.scene.xrayMaterial}get highlightMaterial(){return this.scene.highlightMaterial}get selectedMaterial(){return this.scene.selectedMaterial}get edgeMaterial(){return this.scene.edgeMaterial}getPickViewMatrix(e){return this._viewMatrix?this._viewMatrix:e}createGeometry(e){e.positionsCompressed&&!e.positions&&(e.positions=e.positionsCompressed);const t=e.id;if(null==t)return void this.error("Config missing: id");if(t in this._instancingGeometries)return void this.error("Geometry already created: "+t);const s=e.primitive;if(null==s)return void this.error("Config missing: primitive");const i=e.origin||e.rtcCenter,r=i?p.addVec3(this._origin,i,ti):this._origin;switch(s){case"triangles":case"solid":case"surface":this._instancingGeometries[e.id]=y.apply({origin:r,layerIndex:0},e),this._numTriangles+=e.indices?Math.round(e.indices.length/3):0;break;case"lines":case"points":throw"Not supported at the moment"}this.numGeometries++}createMesh(e){if(e.positionsCompressed&&!e.positions&&(e.positions=e.positionsCompressed),this._vfcManager&&!this._vfcManager.finalized)return e.color&&(e.color=e.color.slice()),e.positionsDecodeMatrix&&(e.positionsDecodeMatrix=e.positionsDecodeMatrix.slice()),void this._vfcManager.addMesh(e);let t=e.id;if(null==t)return void this.error("Config missing: id");if(this._meshes[t])return void this.error("DataTextureSceneModel already has a Mesh with this ID: "+t);const s=e.geometryId,i=void 0!==s;let r=null;r=i?this._instancingGeometries[s]:e;let o=null;if(i&&s in this._preparedInstancingGeometries)o=this._preparedInstancingGeometries[s];else{let e=r.primitive||"triangles";"triangles"!==e&&"solid"!==e&&"surface"!==e&&(this.error(`Unsupported value for 'primitive': '${e}' - supported values are 'triangles', 'solid' and 'surface'. Defaulting to 'triangles'.`),e="triangles");let t=r.positions;if(!t)return this.error("Config missing: positions (no meshIds provided, so expecting geometry arrays instead)"),null;let n=r.indices,a=r.edgeIndices;if(!r.indices&&"triangles"===e)return this.error("Config missing for triangles primitive: indices (no meshIds provided, so expecting geometry arrays instead)"),null;a||(a=Be(t,n,null,this._edgeThreshold)),r.edgeIndices=a,o=function(e,t,s){let i,r,o,n;t?[i,r,o]=us({positions:e.positions,indices:e.indices,edgeIndices:e.edgeIndices}):(i=e.positions,r=e.indices,o=e.edgeIndices),n=s?ms({positions:i,indices:r,edgeIndices:o},i.length/3>65536?16:8):[{positions:i,indices:r,edgeIndices:o}];return e.preparedBuckets=n,e}(r,this._enableVertexWelding,this._enableIndexRebucketing),i&&(this._preparedInstancingGeometries[s]=o)}let n,a=this._currentDataTextureLayer;null===a||a.canCreatePortion(o,i?s:null)||(a.finalize(),delete this._currentDataTextureLayer,a=null),a||(a=new Fs(this,{layerIndex:0,origin:e.origin}),this._layerList.push(a),this._currentDataTextureLayer=a);const l=e.color?new Uint8Array([Math.floor(255*e.color[0]),Math.floor(255*e.color[1]),Math.floor(255*e.color[2])]):[255,255,255],h=void 0!==e.opacity&&null!==e.opacity?Math.floor(255*e.opacity):255,c=void 0!==e.metallic&&null!==e.metallic?Math.floor(255*e.metallic):0,u=void 0!==e.roughness&&null!==e.roughness?Math.floor(255*e.roughness):255,A=new Fe(this,t,l,h),d=A.pickId,f=new Uint8Array([255&d,d>>8&255,d>>16&255,d>>24&255]),m=p.collapseAABB3();if(o.solid="solid"==o.primitive,i){let t,i=this._worldMatrixNonIdentity?this._worldMatrix:null;if(e.matrix)t=e.matrix;else{const s=e.scale||ii,i=e.position||ri,r=e.rotation||oi;p.eulerToQuaternion(r,"XYZ",ni),t=p.composeMat4(i,ni,s,si)}n=a.createPortion(o,{origin:e.origin,geometryId:s,color:l,metallic:c,roughness:u,opacity:h,meshMatrix:t,worldMatrix:i,aabb:m,pickColor:f}),p.expandAABB3(this._aabb,m),this._numTriangles+=o.indices.length/3,A.numTriangles=o.indices.length/3,A.origin=o.origin}else{let t=null;if(!e.positionsDecodeMatrix){const e=p.vec3(),s=[];Q(positions,s,e)&&(positions=s,t=p.addVec3(this._origin,e,e))}const s=e.origin||e.rtcCenter;t=s?t?p.addVec3(this._origin,s,ti):s:this._origin;const i=this._worldMatrixNonIdentity?this._worldMatrix:null;let r;if(!e.positionsDecodeMatrix)if(e.matrix)r=e.matrix;else{const t=e.scale||ii,s=e.position||ri,i=e.rotation||oi;p.eulerToQuaternion(i,"XYZ",ni),r=p.composeMat4(s,ni,t,si)}switch(e.primitive||"triangles"){case"triangles":case"solid":case"surface":n=a.createPortion(y.apply({origin:t,color:l,metallic:c,roughness:u,colors:e.colors,colorsCompressed:e.colorsCompressed,opacity:h,meshMatrix:r,worldMatrix:i,aabb:m,pickColor:f},o));const s=Math.round(o.indices.length/3);this._numTriangles+=s,A.numTriangles=s;break;case"lines":case"points":throw"Not supported at the moment"}p.expandAABB3(this._aabb,m),this.numGeometries++,A.origin=t}A.parent=null,A._layer=a,A._portionId=n,A.aabb=m,this._meshes[t]=A}createEntity(e){if(this._vfcManager&&!this._vfcManager.finalized)return void this._vfcManager.addEntity(e);let t=e.id;void 0===t?t=p.createUUID():this.scene.components[t]&&(this.error("Scene already has a Component with this ID: "+t+" - will assign random ID"),t=p.createUUID());const s=e.meshIds;if(void 0===s)return void this.error("Config missing: meshIds");let i=[];for(let e=0,t=s.length;e<t;e++){const t=s[e],r=this._meshes[t];r?r.parent?this.error("Mesh with ID "+t+" already belongs to object with ID "+r.parent.id+" - ignoring this mesh"):i.push(r):this.error("Mesh with this ID not found: "+t+" - ignoring this mesh")}let r,o=0;if(this._visible&&!1!==e.visible&&(o|=z),this._pickable&&!1!==e.pickable&&(o|=Y),this._culled&&!1!==e.culled&&(o|=K),this._clippable&&!1!==e.clippable&&(o|=X),this._collidable&&!1!==e.collidable&&(o|=Z),this._edges&&!1!==e.edges&&(o|=ee),this._xrayed&&!1!==e.xrayed&&(o|=q),this._highlighted&&!1!==e.highlighted&&(o|=J),this._selected&&!1!==e.selected&&(o|=$),1===i.length)r=i[0].aabb;else{r=p.collapseAABB3();for(let e=0,t=i.length;e<t;e++)p.expandAABB3(r,i[e].aabb)}const n=new ie(this,e.isObject,t,i,o,r);return this._nodeList.push(n),this._nodes[t]=n,this.numEntities++,n}finalize(){if(!this.destroyed){this._vfcManager&&this._vfcManager.finalize((function(){this._currentDataTextureLayer&&(this._currentDataTextureLayer.finalize(),delete this._currentDataTextureLayer,this._currentDataTextureLayer=null)})),this._currentDataTextureLayer&&this._currentDataTextureLayer.finalize();for(let e=0,t=this._nodeList.length;e<t;e++){this._nodeList[e]._finalize()}for(let e=0,t=this._nodeList.length;e<t;e++){this._nodeList[e]._finalize2()}this._layerList.sort(((e,t)=>e.sortId<t.sortId?-1:e.sortId>t.sortId?1:0));for(let e=0,t=this._layerList.length;e<t;e++){this._layerList[e].layerIndex=e}this.glRedraw(),this.scene._aabbDirty=!0,this._instancingGeometries={},this._preparedInstancingGeometries={},this._targetLodFps&&(this.lodCullingManager=new Vs(this,[2e3,600,150,80,20],this._targetLodFps));for(let e=0,t=this._layerList.length;e<t;e++){this._layerList[e].attachToRenderingEvent()}this.finalized=!0}}_rebuildAABB(){p.collapseAABB3(this._aabb);for(let e=0,t=this._nodeList.length;e<t;e++){const t=this._nodeList[e];p.expandAABB3(this._aabb,t.aabb)}this._aabbDirty=!1}stateSortCompare(e,t){}rebuildRenderFlags(){this.renderFlags.reset(),this._updateRenderFlagsVisibleLayers(),this.renderFlags.numLayers>0&&0===this.renderFlags.numVisibleLayers?this.renderFlags.culled=!0:this._updateRenderFlags()}_updateRenderFlagsVisibleLayers(){const e=this.renderFlags;e.numLayers=this._layerList.length,e.numVisibleLayers=0;for(let t=0,s=this._layerList.length;t<s;t++){const s=this._layerList[t];this._getActiveSectionPlanesForLayer(s)&&(e.visibleLayers[e.numVisibleLayers++]=t)}}_getActiveSectionPlanesForLayer(e){const t=this.renderFlags,s=this.scene._sectionPlanesState.sectionPlanes,i=s.length,r=e.layerIndex*i;if(i>0)for(let e=0;e<i;e++){s[e].active?(t.sectionPlanesActivePerLayer[r+e]=!0,t.sectioned=!0):t.sectionPlanesActivePerLayer[r+e]=!1}return!0}_updateRenderFlags(){if(0===this.numVisibleLayerPortions)return;if(this.numCulledLayerPortions===this.numPortions)return;const e=this.renderFlags;if(e.colorOpaque=this.numTransparentLayerPortions<this.numPortions,this.numTransparentLayerPortions>0&&(e.colorTransparent=!0),this.numXRayedLayerPortions>0){const t=this.scene.xrayMaterial._state;t.fill&&(t.fillAlpha<1?e.xrayedSilhouetteTransparent=!0:e.xrayedSilhouetteOpaque=!0),t.edges&&(t.edgeAlpha<1?e.xrayedEdgesTransparent=!0:e.xrayedEdgesOpaque=!0)}if(this.numEdgesLayerPortions>0){this.scene.edgeMaterial._state.edges&&(e.edgesOpaque=this.numTransparentLayerPortions<this.numPortions,this.numTransparentLayerPortions>0&&(e.edgesTransparent=!0))}if(this.numSelectedLayerPortions>0){const t=this.scene.selectedMaterial._state;t.fill&&(t.fillAlpha<1?e.selectedSilhouetteTransparent=!0:e.selectedSilhouetteOpaque=!0),t.edges&&(t.edgeAlpha<1?e.selectedEdgesTransparent=!0:e.selectedEdgesOpaque=!0)}if(this.numHighlightedLayerPortions>0){const t=this.scene.highlightMaterial._state;t.fill&&(t.fillAlpha<1?e.highlightedSilhouetteTransparent=!0:e.highlightedSilhouetteOpaque=!0),t.edges&&(t.edgeAlpha<1?e.highlightedEdgesTransparent=!0:e.highlightedEdgesOpaque=!0)}}drawColorOpaque(e){const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawColorOpaque(t,e)}}drawColorTransparent(e){const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawColorTransparent(t,e)}}drawDepth(e){const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawDepth(t,e)}}drawNormals(e){const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawNormals(t,e)}}drawSilhouetteXRayed(e){const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawSilhouetteXRayed(t,e)}}drawSilhouetteHighlighted(e){const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawSilhouetteHighlighted(t,e)}}drawSilhouetteSelected(e){const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawSilhouetteSelected(t,e)}}drawEdgesColorOpaque(e){const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawEdgesColorOpaque(t,e)}}drawEdgesColorTransparent(e){const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawEdgesColorTransparent(t,e)}}drawEdgesXRayed(e){const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawEdgesXRayed(t,e)}}drawEdgesHighlighted(e){const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawEdgesHighlighted(t,e)}}drawEdgesSelected(e){const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawEdgesSelected(t,e)}}drawOcclusion(e){if(0===this.numVisibleLayerPortions)return;const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawOcclusion(t,e)}}drawShadow(e){if(0===this.numVisibleLayerPortions)return;const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawShadow(t,e)}}drawPickMesh(e){if(0===this.numVisibleLayerPortions)return;const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawPickMesh(t,e)}}drawPickDepths(e){if(0===this.numVisibleLayerPortions)return;const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawPickDepths(t,e)}}drawVertexDepths(e){if(0===this.numVisibleLayerPortions)return;const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawVertexDepths(t,e)}}drawVertexZBufferInitializer(e){if(0===this.numVisibleLayerPortions)return;const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawVertexZBufferInitializer(t,e)}}drawPickNormals(e){if(0===this.numVisibleLayerPortions)return;const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawPickNormals(t,e)}}destroy(){this.scene.camera.off(this._onCameraViewMatrix);for(let e=0,t=this._layerList.length;e<t;e++)this._layerList[e].destroy();for(let e=0,t=this._nodeList.length;e<t;e++)this._nodeList[e]._destroy();this.scene._aabbDirty=!0,this._isModel&&this.scene._deregisterModel(this),super.destroy()}}const li=function(e,s){s=s||{};const i=new he(e),r=e.canvas.canvas,o=e.canvas.gl,n=!!s.transparent,a=s.alphaDepthMask,l=new t({});let h={},c={},u=!0,A=!0,f=!0,m=!0,g=!0,y=!0,E=!0,v=!0;const _=new we(e);let I=!1;const T=new Pe(e),P=new xe(e);function D(){u&&(!function(){for(let e in h)if(h.hasOwnProperty(e)){const t=h[e],s=t.drawableMap,i=t.drawableListPreCull;let r=0;for(let e in s)s.hasOwnProperty(e)&&(i[r++]=s[e]);i.length=r}}(),u=!1,A=!0),A&&(!function(){for(let e in h)if(h.hasOwnProperty(e)){const t=h[e];t.isStateSortable&&t.drawableListPreCull.sort(t.stateSortCompare)}}(),A=!1,f=!0),f&&function(){for(let e in h)if(h.hasOwnProperty(e)){const t=h[e],s=t.drawableListPreCull,i=t.drawableList;let r=0;for(let e=0,t=s.length;e<t;e++){const t=s[e];t.rebuildRenderFlags(),t.renderFlags.culled||(i[r++]=t)}i.length=r}}()}function b(e){if(!e.castsShadow)return;const t=e.getShadowRenderBuf();if(t){t.bind(),i.reset(),i.backfaces=!0,i.frontface=!0,i.shadowViewMatrix=e.getShadowViewMatrix(),i.shadowProjMatrix=e.getShadowProjMatrix(),o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),o.clearColor(0,0,0,1),o.enable(o.DEPTH_TEST),o.disable(o.BLEND),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT);for(let e in h)if(h.hasOwnProperty(e)){const t=h[e].drawableList;for(let e=0,s=t.length;e<s;e++){const s=t[e];!1!==s.visible&&s.castsShadow&&s.drawShadow&&(s.renderFlags.colorOpaque&&s.drawShadow(i))}}t.unbind()}}this._occlusionTester=null,this.capabilities={astcSupported:!!Me(o,"WEBGL_compressed_texture_astc"),etc1Supported:!0,etc2Supported:!!Me(o,"WEBGL_compressed_texture_etc"),dxtSupported:!!Me(o,"WEBGL_compressed_texture_s3tc"),bptcSupported:!!Me(o,"EXT_texture_compression_bptc"),pvrtcSupported:!(!Me(o,"WEBGL_compressed_texture_pvrtc")&&!Me(o,"WEBKIT_WEBGL_compressed_texture_pvrtc"))},this.setTransparentEnabled=function(e){m=e,f=!0},this.setEdgesEnabled=function(e){g=e,f=!0},this.setSAOEnabled=function(e){y=e,f=!0},this.setPBREnabled=function(e){E=e,f=!0},this.setColorTextureEnabled=function(e){v=e,f=!0},this.needStateSort=function(){A=!0},this.shadowsDirty=function(){},this.imageDirty=function(){f=!0},this.webglContextLost=function(){},this.webglContextRestored=function(e){T.init(),P.init(),f=!0},this.addDrawable=function(e,t){const s=t.type;if(!s)return void console.error("Renderer#addDrawable() : drawable with ID "+e+" has no 'type' - ignoring");let i=h[s];i||(i={type:t.type,count:0,isStateSortable:t.isStateSortable,stateSortCompare:t.stateSortCompare,drawableMap:{},drawableListPreCull:[],drawableList:[]},h[s]=i),i.count++,i.drawableMap[e]=t,c[e]=t,u=!0},this.removeDrawable=function(e){const t=c[e];if(!t)return void console.error("Renderer#removeDrawable() : drawable not found with ID "+e+" - ignoring");const s=t.type,i=h[s];--i.count<=0?delete h[s]:delete i.drawableMap[e],delete c[e],u=!0},this.getPickID=function(e){return l.addItem(e)},this.putPickID=function(e){l.removeItem(e)},this.clear=function(t){if(o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),n)o.clearColor(1,1,1,1);else{const t=e.canvas.backgroundColorFromAmbientLight?this.lights.getAmbientColorAndIntensity():e.canvas.backgroundColor;o.clearColor(t[0],t[1],t[2],1)}o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT)},this.needsRender=function(){return f||u||A},this.render=function(t){(t=t||{}).force&&(f=!0),D(),f&&(!function(t){const s=e.sao;y&&s.possible&&function(t){const s=e.sao,r=_.getRenderBuffer("saoDepth",{depthTexture:!0});r.bind(),r.clear(),function(e){i.reset(),i.pass=e.pass,o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),o.clearColor(0,0,0,0),o.enable(o.DEPTH_TEST),o.frontFace(o.CCW),o.enable(o.CULL_FACE),o.depthMask(!0),!1!==e.clear&&o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT);for(let e in h)if(h.hasOwnProperty(e)){const t=h[e].drawableList;for(let e=0,s=t.length;e<s;e++){const s=t[e];!0!==s.culled&&!1!==s.visible&&s.drawDepth&&s.saoEnabled&&(s.renderFlags.colorOpaque&&s.drawDepth(i))}}}(t),r.unbind();const n=_.getRenderBuffer("saoOcclusion");if(n.bind(),n.clear(),T.render(r),n.unbind(),s.blur){const e=_.getRenderBuffer("saoOcclusion2");e.bind(),e.clear(),P.render(r,n,0),e.unbind(),n.bind(),n.clear(),P.render(r,e,1),n.unbind()}}(t);(function(){let t=e._lightsState.lights;for(let e=0,s=t.length;e<s;e++){const s=t[e];s.castsShadow&&b(s)}})(),function(t){const s=[],r=[],l=[],c=[],u=[],A=[],p=[],f=[],I=[],T=[],P=[],D=[],b=[],R=[],C=[],x=[];{const N=e._lightsState.getAmbientColorAndIntensity();if(i.reset(),i.pass=t.pass,i.withSAO=!1,i.pbrEnabled=E&&!!e.pbrEnabled,i.colorTextureEnabled=v&&!!e.colorTextureEnabled,o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),n)o.clearColor(0,0,0,0);else{const t=e.canvas.backgroundColorFromAmbientLight?N:e.canvas.backgroundColor;o.clearColor(t[0],t[1],t[2],1)}o.enable(o.DEPTH_TEST),o.frontFace(o.CCW),o.enable(o.CULL_FACE),o.depthMask(!0),o.lineWidth(1),i.lineWidth=1;const O=e.sao.possible;if(y&&O){const e=_.getRenderBuffer("saoOcclusion");i.occlusionTexture=e?e.getTexture():null}else i.occlusionTexture=null;let S,w,M;const B=Date.now();!1!==t.clear&&o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT);let F=0,L=0,U=0,H=0,G=0,V=0,k=0,j=0,Q=0,W=0,z=0,K=0,Y=0,X=0,Z=0,q=0;for(let e in h)if(h.hasOwnProperty(e)){const t=h[e].drawableList;for(S=0,w=t.length;S<w;S++){if(M=t[S],!0===M.culled||!1===M.visible)continue;const e=M.renderFlags;e.colorOpaque&&(y&&O&&M.saoEnabled?s[F++]=M:M.drawColorOpaque(i)),m&&e.colorTransparent&&(l[U++]=M),e.xrayedSilhouetteTransparent&&(p[k++]=M),e.xrayedSilhouetteOpaque&&(u[G++]=M),e.highlightedSilhouetteTransparent&&(P[z++]=M),e.highlightedSilhouetteOpaque&&(I[Q++]=M),e.selectedSilhouetteTransparent&&(C[Z++]=M),e.selectedSilhouetteOpaque&&(b[Y++]=M),g&&(e.edgesOpaque&&(r[L++]=M),e.edgesTransparent&&(c[H++]=M)),e.selectedEdgesTransparent&&(x[q++]=M),e.selectedEdgesOpaque&&(R[X++]=M),e.xrayedEdgesTransparent&&(f[j++]=M),e.xrayedEdgesOpaque&&(A[V++]=M),e.highlightedEdgesTransparent&&(D[K++]=M),e.highlightedEdgesOpaque&&(T[W++]=M)}}if(F>0)for(i.withSAO=!0,S=0;S<F;S++)s[S].drawColorOpaque(i);if(L>0)for(S=0;S<L;S++)r[S].drawEdgesColorOpaque(i);if(G>0)for(S=0;S<G;S++)u[S].drawSilhouetteXRayed(i);if(V>0)for(S=0;S<V;S++)A[S].drawEdgesXRayed(i);if(k>0||j>0||U>0||H>0){if(o.enable(o.CULL_FACE),o.enable(o.BLEND),n?(o.blendEquation(o.FUNC_ADD),o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA)):(o.blendEquation(o.FUNC_ADD),o.blendFunc(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA)),i.backfaces=!1,a||o.depthMask(!1),(U>0||H>0)&&o.blendFunc(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA),H>0)for(S=0;S<H;S++)M=c[S],M.drawEdgesColorTransparent(i);if(U>0)for(S=0;S<U;S++)M=l[S],M.drawColorTransparent(i);if(j>0)for(S=0;S<j;S++)f[S].drawEdgesXRayed(i);if(k>0)for(S=0;S<k;S++)p[S].drawSilhouetteXRayed(i);o.disable(o.BLEND),a||o.depthMask(!0)}if(Q>0||W>0){if(i.lastProgramId=null,e.highlightMaterial.glowThrough&&o.clear(o.DEPTH_BUFFER_BIT),W>0)for(S=0;S<W;S++)T[S].drawEdgesHighlighted(i);if(Q>0)for(S=0;S<Q;S++)I[S].drawSilhouetteHighlighted(i)}if(z>0||K>0||Q>0){if(i.lastProgramId=null,e.selectedMaterial.glowThrough&&o.clear(o.DEPTH_BUFFER_BIT),o.enable(o.BLEND),n?(o.blendEquation(o.FUNC_ADD),o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA)):o.blendFunc(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA),o.enable(o.CULL_FACE),K>0)for(S=0;S<K;S++)D[S].drawEdgesHighlighted(i);if(z>0)for(S=0;S<z;S++)P[S].drawSilhouetteHighlighted(i);o.disable(o.BLEND)}if(Y>0||X>0){if(i.lastProgramId=null,e.selectedMaterial.glowThrough&&o.clear(o.DEPTH_BUFFER_BIT),X>0)for(S=0;S<X;S++)R[S].drawEdgesSelected(i);if(Y>0)for(S=0;S<Y;S++)b[S].drawSilhouetteSelected(i)}if(Z>0||q>0){if(i.lastProgramId=null,e.selectedMaterial.glowThrough&&o.clear(o.DEPTH_BUFFER_BIT),o.enable(o.CULL_FACE),o.enable(o.BLEND),n?(o.blendEquation(o.FUNC_ADD),o.blendFuncSeparate(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA,o.ONE,o.ONE_MINUS_SRC_ALPHA)):o.blendFunc(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA),q>0)for(S=0;S<q;S++)x[S].drawEdgesSelected(i);if(Z>0)for(S=0;S<Z;S++)C[S].drawSilhouetteSelected(i);o.disable(o.BLEND)}const J=Date.now(),$=d.frame;$.renderTime=(J-B)/1e3,$.drawElements=i.drawElements,$.drawArrays=i.drawArrays,$.useProgram=i.useProgram,$.bindTexture=i.bindTexture,$.bindArray=i.bindArray;const ee=oe.MAX_TEXTURE_IMAGE_UNITS;for(let e=0;e<ee;e++)o.activeTexture(o.TEXTURE0+e);o.bindTexture(o.TEXTURE_CUBE_MAP,null),o.bindTexture(o.TEXTURE_2D,null);const te=oe.MAX_VERTEX_ATTRIBS;for(let e=0;e<te;e++)o.disableVertexAttribArray(e)}}(t)}(t),d.frame.frameCount++,f=!1)},this.pick=function(){const t=p.vec3(),s=p.mat4(),n=p.mat4(),a=p.vec3(),c=p.vec3([0,1,0]),u=new ce,A=p.vec2(),d=p.vec3(),f=p.vec3(),m=p.vec3(),g=p.vec3(),y=p.vec3();return function(E,v=u){let I;v.reset(),D();let T=null,P=null;if(v.pickSurface=E.pickSurface,E.canvasPos)d[0]=E.canvasPos[0],d[1]=E.canvasPos[1],T=e.camera.viewMatrix,P=e.camera.projMatrix,v.canvasPos=E.canvasPos;else{const i=p.frustumMat4(-1,1,-1,1,.01,e.camera.project.far,s);E.matrix?(T=E.matrix,P=i):(f.set(E.origin||[0,0,0]),m.set(E.direction||[0,0,1]),I=p.addVec3(f,m,t),a[0]=Math.random(),a[1]=Math.random(),a[2]=Math.random(),p.normalizeVec3(a),p.cross3Vec3(m,a,c),T=p.lookAtMat4v(f,I,c,n),P=i,v.origin=f,v.direction=m),d[0]=.5*r.clientWidth,d[1]=.5*r.clientHeight}if(null!==T)for(let e in h)if(h.hasOwnProperty(e)){const t=h[e].drawableList;for(let e=0,s=t.length;e<s;e++){const s=t[e];s instanceof ai&&s.pickCameraTexture&&s.pickCameraTexture._updateViewMatrix(T,P)}}const b=_.getRenderBuffer("pick");b.bind();const C=function(t,s,r,n,a,c){i.reset(),i.backfaces=!0,i.frontface=!0,i.pickOrigin=c.origin,i.pickViewMatrix=r,i.pickProjMatrix=n,i.pickInvisible=!!a.pickInvisible,o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),o.clearColor(0,0,0,0),o.enable(o.DEPTH_TEST),o.disable(o.CULL_FACE),o.disable(o.BLEND),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT);const u=a.includeEntityIds,A=a.excludeEntityIds;for(let e in h)if(h.hasOwnProperty(e)){const t=h[e].drawableList;for(let e=0,s=t.length;e<s;e++){const s=t[e];!s.drawPickMesh||!0===s.culled||!0!==a.pickInvisible&&!1===s.visible||!1===s.pickable||(u&&!u[s.id]||A&&A[s.id]||s.drawPickMesh(i))}}const p=e.canvas.resolutionScale,d=t.read(Math.round(s[0]*p),Math.round(s[1]*p));let f=d[0]+256*d[1]+256*d[2]*256+256*d[3]*256*256;if(f<0)return;return l.items[f]}(b,d,T,P,E,v);if(!C)return b.unbind(),null;const x=C.delegatePickedEntity?C.delegatePickedEntity():C;return x?(E.pickSurface&&(E.pickSurfacePrecision&&e.pickSurfacePrecisionEnabled?(E.canvasPos&&p.canvasPosToWorldRay(e.canvas.canvas,T,P,d,f,m),C.precisionRayPickSurface(f,m,g,y)&&(v.worldPos=g,!1!==E.pickSurfaceNormal&&(v.worldNormal=y),v.pickSurfacePrecision=!0)):C.canPickTriangle&&C.canPickTriangle()?(!function(t,s,r,n,a,l){if(!s.drawPickTriangles)return;i.reset(),i.backfaces=!0,i.frontface=!0,i.pickOrigin=l.origin,i.pickViewMatrix=n,i.pickProjMatrix=a,o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),o.clearColor(0,0,0,0),o.enable(o.DEPTH_TEST),o.disable(o.CULL_FACE),o.disable(o.BLEND),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),s.drawPickTriangles(i);const h=e.canvas.resolutionScale,c=t.read(Math.round(r[0]*h),Math.round(r[1]*h));let u=c[0]+256*c[1]+256*c[2]*256+256*c[3]*256*256;u*=3,l.primIndex=u}(b,C,d,T,P,v),C.pickTriangleSurface(T,P,v),v.pickSurfacePrecision=!1):C.canPickWorldPos&&C.canPickWorldPos()&&(A[0]=e.camera.project.near,A[1]=e.camera.project.far,R(b,C,d,T,P,A,v),!1!==E.pickSurfaceNormal&&function(t,s,r,n,a,l){i.reset(),i.backfaces=!0,i.frontface=!0,i.pickOrigin=l.origin,i.pickViewMatrix=n,i.pickProjMatrix=a,o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),o.clearColor(0,0,0,0),o.enable(o.DEPTH_TEST),o.disable(o.CULL_FACE),o.disable(o.BLEND),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),s.drawPickNormals(i);const h=e.canvas.resolutionScale,c=t.read(Math.round(r[0]*h),Math.round(r[1]*h)),u=[c[0]/256-.5,c[1]/256-.5,c[2]/256-.5];p.normalizeVec3(u),l.worldNormal=u}(b,C,d,T,P,v),v.pickSurfacePrecision=!1)),b.unbind(),v.entity=x,v):(b.unbind(),null)}}();const R=function(){const t=p.vec4(),s=p.vec4(),n=p.vec4(),a=p.vec4(),l=p.vec4(),h=p.mat4(),c=p.mat4(),u=p.mat4();return function(A,d,f,m,g,y,E){i.reset(),i.backfaces=!0,i.frontface=!0,i.pickOrigin=E.origin,i.pickViewMatrix=m,i.pickProjMatrix=g,i.pickZNear=y[0],i.pickZFar=y[1],i.pickElementsCount=d.pickElementsCount,i.pickElementsOffset=d.pickElementsOffset,o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),o.clearColor(0,0,0,0),o.enable(o.DEPTH_TEST),o.disable(o.CULL_FACE),o.disable(o.BLEND),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),d.drawPickDepths(i);const v=e.canvas.resolutionScale,_=function(e){const t=[e[0]/256,e[1]/256,e[2]/256,e[3]/256],s=[1/16777216,1/65536,1/256,1];return p.dotVec4(t,s)}(A.read(Math.round(f[0]*v),Math.round(f[1]*v))),I=(f[0]-r.clientWidth/2)/(r.clientWidth/2),T=-(f[1]-r.clientHeight/2)/(r.clientHeight/2),P=d.origin;let D;if(P){const e=j(m,P,h);D=p.mulMat4(g,e,c)}else D=p.mulMat4(g,m,c);const b=p.inverseMat4(D,u);t[0]=I,t[1]=T,t[2]=-1,t[3]=1;let R=p.transformVec4(b,t);R=p.mulVec4Scalar(R,1/R[3]),s[0]=I,s[1]=T,s[2]=1,s[3]=1;let C=p.transformVec4(b,s);C=p.mulVec4Scalar(C,1/C[3]);const x=p.subVec3(C,R,n),N=p.addVec3(R,p.mulVec4Scalar(x,_,a),l);P&&p.addVec3(N,P),E.worldPos=N}}();function C(e){return!(!0===e.culled||!1===e.visible||!e.pickable)&&e instanceof ai}this.snapPick=function(t,s=50,r="vertex"){const n=[e.camera.project.near,e.camera.project.far];i.reset(),i.backfaces=!0,i.frontface=!0,i.pickZNear=n[0],i.pickZFar=n[1];let a=_.getRenderBuffer("uniquePickColors-aabs",{depthTexture:!0,size:[2*s+1,2*s+1]});var l,c;i._vectorA=[(l=t[0],c=o.drawingBufferWidth,l/c*2-1),function(e,t){return 1-e/t*2}(t[1],o.drawingBufferHeight)],i._invVectorAB=[o.drawingBufferWidth/(2*s),o.drawingBufferHeight/(2*s)],i._snapMode=r,a.bind(o.RGBA32I),o.viewport(0,0,a.size[0],a.size[1]),o.enable(o.DEPTH_TEST),o.frontFace(o.CCW),o.disable(o.CULL_FACE),o.depthMask(!0),o.disable(o.BLEND),o.depthFunc(o.LESS),o.clear(o.DEPTH_BUFFER_BIT),o.clearBufferiv(o.COLOR,0,new Int32Array([0,0,0,0]));const u=function(e){const t={};for(let s in h)if(h.hasOwnProperty(s)){const i=h[s].drawableList;for(let s=0,r=i.length;s<r;s++){const r=i[s],o=s+1;C(r)&&(e._origin=[0,0,0],e._coordinateScale=[1,1,1],e._layerNumber=o,r.drawVertexZBufferInitializer(e),t[o]={origin:e._origin.slice(),coordinateScale:e._coordinateScale.slice()})}}return t}(i),A=function(e){const t={};for(let s in h)if(h.hasOwnProperty(s)){const i=h[s].drawableList;for(let s=0,r=i.length;s<r;s++){const r=i[s],o=s+1;C(r)&&(e._origin=[0,0,0],e._coordinateScale=[1,1,1],e._layerNumber=o,r.drawVertexDepths(e),t[o]={origin:e._origin.slice(),coordinateScale:e._coordinateScale.slice()})}}return t}(i),p=a.readArray(o.RGBA_INTEGER,o.INT,Int32Array,4);a.unbind();let d=null;const f=4*s+s*a.size[0]*4,m=p.slice(f,f+4);if(0!==m[3]){const e=u[Math.abs(m[3])],t=e.origin,s=e.coordinateScale;d=[m[0]*s[0]+t[0],m[1]*s[1]+t[1],m[2]*s[2]+t[2]]}let g=[];for(let e=0;e<p.length;e+=4)if(p[e+3]>0){const t=Math.floor(e/4),s=a.size[0];a.size[1];const i=t%s-Math.floor(s/2),r=Math.floor(t/s)-Math.floor(s/2),o=Math.sqrt(Math.pow(i,2)+Math.pow(r,2));g.push({x:i,y:r,dist:o,result:[p[e+0],p[e+1],p[e+2],p[e+3]]})}let y=null;if(g.length>0){g.sort(((e,t)=>e.dist-t.dist)),g=g[0].result;const e=A[g[3]],t=e.origin,s=e.coordinateScale;y=[g[0]*s[0]+t[0],g[1]*s[1]+t[1],g[2]*s[2]+t[2]]}if(null===d&&null==y)return null;let E=null;return null!==y&&(E=e.camera.projectWorldPos(y)),{worldPos:d,snappedWorldPos:y,snappedCanvasPos:E}},this.addMarker=function(t){this._occlusionTester=this._occlusionTester||new Ie(e,_),this._occlusionTester.addMarker(t),e.occlusionTestCountdown=0},this.markerWorldPosUpdated=function(e){this._occlusionTester.markerWorldPosUpdated(e)},this.removeMarker=function(e){this._occlusionTester.removeMarker(e)},this.doOcclusionTest=function(){if(this._occlusionTester&&this._occlusionTester.needOcclusionTest){D(),this._occlusionTester.bindRenderBuf(),i.reset(),i.backfaces=!0,i.frontface=!0,o.viewport(0,0,o.drawingBufferWidth,o.drawingBufferHeight),o.clearColor(0,0,0,0),o.enable(o.DEPTH_TEST),o.disable(o.CULL_FACE),o.disable(o.BLEND),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT);for(let e in h)if(h.hasOwnProperty(e)){const t=h[e].drawableList;for(let e=0,s=t.length;e<s;e++){const s=t[e];s.drawOcclusion&&!0!==s.culled&&!1!==s.visible&&!1!==s.pickable&&s.drawOcclusion(i)}}this._occlusionTester.drawMarkers(i),this._occlusionTester.doOcclusionTest(),this._occlusionTester.unbindRenderBuf()}},this.readPixels=function(e,t,s,i){const r=_.getRenderBuffer("snapshot");let o,n,a,l;for(r.bind(),r.clear(),this.render({force:!0,opaqueOnly:i}),n=0;n<s;n++)a=2*n,l=4*n,o=r.read(e[a],e[a+1]),t[l]=o[0],t[l+1]=o[1],t[l+2]=o[2],t[l+3]=o[3];r.unbind(),f=!0},this.beginSnapshot=function(e={}){const t=_.getRenderBuffer("snapshot");e.width&&e.height&&t.setSize([e.width,e.height]),t.bind(),t.clear(),I=!0},this.renderSnapshot=function(){if(!I)return;_.getRenderBuffer("snapshot").clear(),this.render({force:!0,opaqueOnly:!1}),f=!0},this.readSnapshot=function(e){return _.getRenderBuffer("snapshot").readImage(e)},this.readSnapshotAsCanvas=function(){return _.getRenderBuffer("snapshot").readImageAsCanvas()},this.endSnapshot=function(){if(!I)return;_.getRenderBuffer("snapshot").unbind(),I=!1},this.destroy=function(){h={},c={},_.destroy(),T.destroy(),P.destroy(),this._occlusionTester&&this._occlusionTester.destroy()}};class hi extends x{constructor(e,t={}){super(e,t),this.KEY_BACKSPACE=8,this.KEY_TAB=9,this.KEY_ENTER=13,this.KEY_SHIFT=16,this.KEY_CTRL=17,this.KEY_ALT=18,this.KEY_PAUSE_BREAK=19,this.KEY_CAPS_LOCK=20,this.KEY_ESCAPE=27,this.KEY_PAGE_UP=33,this.KEY_PAGE_DOWN=34,this.KEY_END=35,this.KEY_HOME=36,this.KEY_LEFT_ARROW=37,this.KEY_UP_ARROW=38,this.KEY_RIGHT_ARROW=39,this.KEY_DOWN_ARROW=40,this.KEY_INSERT=45,this.KEY_DELETE=46,this.KEY_NUM_0=48,this.KEY_NUM_1=49,this.KEY_NUM_2=50,this.KEY_NUM_3=51,this.KEY_NUM_4=52,this.KEY_NUM_5=53,this.KEY_NUM_6=54,this.KEY_NUM_7=55,this.KEY_NUM_8=56,this.KEY_NUM_9=57,this.KEY_A=65,this.KEY_B=66,this.KEY_C=67,this.KEY_D=68,this.KEY_E=69,this.KEY_F=70,this.KEY_G=71,this.KEY_H=72,this.KEY_I=73,this.KEY_J=74,this.KEY_K=75,this.KEY_L=76,this.KEY_M=77,this.KEY_N=78,this.KEY_O=79,this.KEY_P=80,this.KEY_Q=81,this.KEY_R=82,this.KEY_S=83,this.KEY_T=84,this.KEY_U=85,this.KEY_V=86,this.KEY_W=87,this.KEY_X=88,this.KEY_Y=89,this.KEY_Z=90,this.KEY_LEFT_WINDOW=91,this.KEY_RIGHT_WINDOW=92,this.KEY_SELECT_KEY=93,this.KEY_NUMPAD_0=96,this.KEY_NUMPAD_1=97,this.KEY_NUMPAD_2=98,this.KEY_NUMPAD_3=99,this.KEY_NUMPAD_4=100,this.KEY_NUMPAD_5=101,this.KEY_NUMPAD_6=102,this.KEY_NUMPAD_7=103,this.KEY_NUMPAD_8=104,this.KEY_NUMPAD_9=105,this.KEY_MULTIPLY=106,this.KEY_ADD=107,this.KEY_SUBTRACT=109,this.KEY_DECIMAL_POINT=110,this.KEY_DIVIDE=111,this.KEY_F1=112,this.KEY_F2=113,this.KEY_F3=114,this.KEY_F4=115,this.KEY_F5=116,this.KEY_F6=117,this.KEY_F7=118,this.KEY_F8=119,this.KEY_F9=120,this.KEY_F10=121,this.KEY_F11=122,this.KEY_F12=123,this.KEY_NUM_LOCK=144,this.KEY_SCROLL_LOCK=145,this.KEY_SEMI_COLON=186,this.KEY_EQUAL_SIGN=187,this.KEY_COMMA=188,this.KEY_DASH=189,this.KEY_PERIOD=190,this.KEY_FORWARD_SLASH=191,this.KEY_GRAVE_ACCENT=192,this.KEY_OPEN_BRACKET=219,this.KEY_BACK_SLASH=220,this.KEY_CLOSE_BRACKET=221,this.KEY_SINGLE_QUOTE=222,this.KEY_SPACE=32,this.element=t.element,this.altDown=!1,this.ctrlDown=!1,this.mouseDownLeft=!1,this.mouseDownMiddle=!1,this.mouseDownRight=!1,this.keyDown=[],this.enabled=!0,this.keyboardEnabled=!0,this.mouseover=!1,this.mouseCanvasPos=p.vec2(),this._keyboardEventsElement=t.keyboardEventsElement||document,this._bindEvents()}_bindEvents(){if(!this._eventsBound){this._keyboardEventsElement.addEventListener("keydown",this._keyDownListener=e=>{this.enabled&&this.keyboardEnabled&&"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&(e.keyCode===this.KEY_CTRL?this.ctrlDown=!0:e.keyCode===this.KEY_ALT?this.altDown=!0:e.keyCode===this.KEY_SHIFT&&(this.shiftDown=!0),this.keyDown[e.keyCode]=!0,this.fire("keydown",e.keyCode,!0))},!1),this._keyboardEventsElement.addEventListener("keyup",this._keyUpListener=e=>{this.enabled&&this.keyboardEnabled&&"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&(e.keyCode===this.KEY_CTRL?this.ctrlDown=!1:e.keyCode===this.KEY_ALT?this.altDown=!1:e.keyCode===this.KEY_SHIFT&&(this.shiftDown=!1),this.keyDown[e.keyCode]=!1,this.fire("keyup",e.keyCode,!0))}),this.element.addEventListener("mouseenter",this._mouseEnterListener=e=>{this.enabled&&(this.mouseover=!0,this._getMouseCanvasPos(e),this.fire("mouseenter",this.mouseCanvasPos,!0))}),this.element.addEventListener("mouseleave",this._mouseLeaveListener=e=>{this.enabled&&(this.mouseover=!1,this._getMouseCanvasPos(e),this.fire("mouseleave",this.mouseCanvasPos,!0))}),this.element.addEventListener("mousedown",this._mouseDownListener=e=>{if(this.enabled){switch(e.which){case 1:this.mouseDownLeft=!0;break;case 2:this.mouseDownMiddle=!0;break;case 3:this.mouseDownRight=!0}this._getMouseCanvasPos(e),this.element.focus(),this.fire("mousedown",this.mouseCanvasPos,!0),this.mouseover&&e.preventDefault()}}),document.addEventListener("mouseup",this._mouseUpListener=e=>{if(this.enabled){switch(e.which){case 1:this.mouseDownLeft=!1;break;case 2:this.mouseDownMiddle=!1;break;case 3:this.mouseDownRight=!1}this.fire("mouseup",this.mouseCanvasPos,!0)}},!0),document.addEventListener("click",this._clickListener=e=>{if(this.enabled){switch(e.which){case 1:case 3:this.mouseDownLeft=!1,this.mouseDownRight=!1;break;case 2:this.mouseDownMiddle=!1}this._getMouseCanvasPos(e),this.fire("click",this.mouseCanvasPos,!0),this.mouseover&&e.preventDefault()}}),document.addEventListener("dblclick",this._dblClickListener=e=>{if(this.enabled){switch(e.which){case 1:case 3:this.mouseDownLeft=!1,this.mouseDownRight=!1;break;case 2:this.mouseDownMiddle=!1}this._getMouseCanvasPos(e),this.fire("dblclick",this.mouseCanvasPos,!0),this.mouseover&&e.preventDefault()}}),this.element.addEventListener("mousemove",this._mouseMoveListener=e=>{this.enabled&&(this._getMouseCanvasPos(e),this.fire("mousemove",this.mouseCanvasPos,!0),this.mouseover&&e.preventDefault())}),this.element.addEventListener("wheel",this._mouseWheelListener=(e,t)=>{if(!this.enabled)return;const s=Math.max(-1,Math.min(1,40*-e.deltaY));this.fire("mousewheel",s,!0)},{passive:!0});{let e,t;const s=2;this.on("mousedown",(s=>{e=s[0],t=s[1]})),this.on("mouseup",(i=>{e>=i[0]-s&&e<=i[0]+s&&t>=i[1]-s&&t<=i[1]+s&&this.fire("mouseclicked",i,!0)}))}this._eventsBound=!0}}_unbindEvents(){this._eventsBound&&(this._keyboardEventsElement.removeEventListener("keydown",this._keyDownListener),this._keyboardEventsElement.removeEventListener("keyup",this._keyUpListener),this.element.removeEventListener("mouseenter",this._mouseEnterListener),this.element.removeEventListener("mouseleave",this._mouseLeaveListener),this.element.removeEventListener("mousedown",this._mouseDownListener),document.removeEventListener("mouseup",this._mouseDownListener),document.removeEventListener("click",this._clickListener),document.removeEventListener("dblclick",this._dblClickListener),this.element.removeEventListener("mousemove",this._mouseMoveListener),this.element.removeEventListener("wheel",this._mouseWheelListener),window.OrientationChangeEvent&&window.removeEventListener("orientationchange",this._orientationchangedListener),window.DeviceMotionEvent&&window.removeEventListener("devicemotion",this._deviceMotionListener),window.DeviceOrientationEvent&&window.removeEventListener("deviceorientation",this._deviceOrientListener),this._eventsBound=!1)}_getMouseCanvasPos(e){if(e){let t=e.target,s=0,i=0;for(;t.offsetParent;)s+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;this.mouseCanvasPos[0]=e.pageX-s,this.mouseCanvasPos[1]=e.pageY-i}else e=window.event,this.mouseCanvasPos[0]=e.x,this.mouseCanvasPos[1]=e.y}setEnabled(e){this.enabled!==e&&this.fire("enabled",this.enabled=e)}getEnabled(){return this.enabled}setKeyboardEnabled(e){this.keyboardEnabled=e}getKeyboardEnabled(){return this.keyboardEnabled}destroy(){super.destroy(),this._unbindEvents()}}class ci extends x{get type(){return"Viewport"}constructor(e,t={}){super(e,t),this._state=new Ze({boundary:[0,0,100,100]}),this.boundary=t.boundary,this.autoBoundary=t.autoBoundary}set boundary(e){if(!this._autoBoundary){if(!e){const t=this.scene.canvas.boundary;e=[0,0,t[2],t[3]]}this._state.boundary=e,this.glRedraw(),this.fire("boundary",this._state.boundary)}}get boundary(){return this._state.boundary}set autoBoundary(e){(e=!!e)!==this._autoBoundary&&(this._autoBoundary=e,this._autoBoundary?this._onCanvasSize=this.scene.canvas.on("boundary",(function(e){const t=e[2],s=e[3];this._state.boundary=[0,0,t,s],this.glRedraw(),this.fire("boundary",this._state.boundary)}),this):this._onCanvasSize&&(this.scene.canvas.off(this._onCanvasSize),this._onCanvasSize=null),this.fire("autoBoundary",this._autoBoundary))}get autoBoundary(){return this._autoBoundary}_getState(){return this._state}destroy(){super.destroy(),this._state.destroy()}}class ui extends x{get type(){return"Light"}get isLight(){return!0}constructor(e,t={}){super(e,t)}}class Ai extends ui{get type(){return"DirLight"}constructor(e,t={}){super(e,t),this._shadowRenderBuf=null,this._shadowViewMatrix=null,this._shadowProjMatrix=null,this._shadowViewMatrixDirty=!0,this._shadowProjMatrixDirty=!0;const s=this.scene.camera,i=this.scene.canvas;this._onCameraViewMatrix=s.on("viewMatrix",(()=>{this._shadowViewMatrixDirty=!0})),this._onCameraProjMatrix=s.on("projMatrix",(()=>{this._shadowProjMatrixDirty=!0})),this._onCanvasBoundary=i.on("boundary",(()=>{this._shadowProjMatrixDirty=!0})),this._state=new Ze({type:"dir",dir:p.vec3([1,1,1]),color:p.vec3([.7,.7,.8]),intensity:1,space:t.space||"view",castsShadow:!1,getShadowViewMatrix:()=>{if(this._shadowViewMatrixDirty){this._shadowViewMatrix||(this._shadowViewMatrix=p.identityMat4());const e=this.scene.camera,t=this._state.dir,s=e.look,i=[s[0]-t[0],s[1]-t[1],s[2]-t[2]],r=[0,1,0];p.lookAtMat4v(i,s,r,this._shadowViewMatrix),this._shadowViewMatrixDirty=!1}return this._shadowViewMatrix},getShadowProjMatrix:()=>(this._shadowProjMatrixDirty&&(this._shadowProjMatrix||(this._shadowProjMatrix=p.identityMat4()),p.orthoMat4c(-40,40,-40,40,-40,80,this._shadowProjMatrix),this._shadowProjMatrixDirty=!1),this._shadowProjMatrix),getShadowRenderBuf:()=>(this._shadowRenderBuf||(this._shadowRenderBuf=new Se(this.scene.canvas.canvas,this.scene.canvas.gl,{size:[1024,1024]})),this._shadowRenderBuf)}),this.dir=t.dir,this.color=t.color,this.intensity=t.intensity,this.castsShadow=t.castsShadow,this.scene._lightCreated(this)}set dir(e){this._state.dir.set(e||[1,1,1]),this._shadowViewMatrixDirty=!0,this.glRedraw()}get dir(){return this._state.dir}set color(e){this._state.color.set(e||[.7,.7,.8]),this.glRedraw()}get color(){return this._state.color}set intensity(e){e=void 0!==e?e:1,this._state.intensity=e,this.glRedraw()}get intensity(){return this._state.intensity}set castsShadow(e){e=!!e,this._state.castsShadow!==e&&(this._state.castsShadow=e,this._shadowViewMatrixDirty=!0,this.glRedraw())}get castsShadow(){return this._state.castsShadow}destroy(){const e=this.scene.camera,t=this.scene.canvas;e.off(this._onCameraViewMatrix),e.off(this._onCameraProjMatrix),t.off(this._onCanvasBoundary),super.destroy(),this._state.destroy(),this._shadowRenderBuf&&this._shadowRenderBuf.destroy(),this.scene._lightDestroyed(this),this.glRedraw()}}class pi extends ui{get type(){return"AmbientLight"}constructor(e,t={}){super(e,t),this._state={type:"ambient",color:p.vec3([.7,.7,.7]),intensity:1},this.color=t.color,this.intensity=t.intensity,this.scene._lightCreated(this)}set color(e){this._state.color.set(e||[.7,.7,.8]),this.glRedraw()}get color(){return this._state.color}set intensity(e){this._state.intensity=void 0!==e?e:1,this.glRedraw()}get intensity(){return this._state.intensity}destroy(){super.destroy(),this.scene._lightDestroyed(this)}}class di extends x{get type(){return"Geometry"}get isGeometry(){return!0}constructor(e,t={}){super(e,t),d.memory.meshes++}destroy(){super.destroy(),d.memory.meshes--}}const fi=d.memory,mi=p.AABB3();class gi extends di{get type(){return"ReadableGeometry"}get isReadableGeometry(){return!0}constructor(e,t={}){super(e,t),this._state=new Ze({compressGeometry:!!t.compressGeometry,primitive:null,primitiveName:null,positions:null,normals:null,colors:null,uv:null,indices:null,positionsDecodeMatrix:null,uvDecodeMatrix:null,positionsBuf:null,normalsBuf:null,colorsbuf:null,uvBuf:null,indicesBuf:null,hash:""}),this._numTriangles=0,this._edgeThreshold=t.edgeThreshold||10,this._edgeIndicesBuf=null,this._pickTrianglePositionsBuf=null,this._pickTriangleColorsBuf=null,this._aabbDirty=!0,this._boundingSphere=!0,this._aabb=null,this._aabbDirty=!0,this._obb=null,this._obbDirty=!0;const s=this._state,i=this.scene.canvas.gl;switch(t.primitive=t.primitive||"triangles",t.primitive){case"points":s.primitive=i.POINTS,s.primitiveName=t.primitive;break;case"lines":s.primitive=i.LINES,s.primitiveName=t.primitive;break;case"line-loop":s.primitive=i.LINE_LOOP,s.primitiveName=t.primitive;break;case"line-strip":s.primitive=i.LINE_STRIP,s.primitiveName=t.primitive;break;case"triangles":s.primitive=i.TRIANGLES,s.primitiveName=t.primitive;break;case"triangle-strip":s.primitive=i.TRIANGLE_STRIP,s.primitiveName=t.primitive;break;case"triangle-fan":s.primitive=i.TRIANGLE_FAN,s.primitiveName=t.primitive;break;default:this.error("Unsupported value for 'primitive': '"+t.primitive+"' - supported values are 'points', 'lines', 'line-loop', 'line-strip', 'triangles', 'triangle-strip' and 'triangle-fan'. Defaulting to 'triangles'."),s.primitive=i.TRIANGLES,s.primitiveName=t.primitive}if(t.positions)if(this._state.compressGeometry){const e=it.getPositionsBounds(t.positions),i=it.compressPositions(t.positions,e.min,e.max);s.positions=i.quantized,s.positionsDecodeMatrix=i.decodeMatrix}else s.positions=t.positions.constructor===Float32Array?t.positions:new Float32Array(t.positions);if(t.colors&&(s.colors=t.colors.constructor===Float32Array?t.colors:new Float32Array(t.colors)),t.uv)if(this._state.compressGeometry){const e=it.getUVBounds(t.uv),i=it.compressUVs(t.uv,e.min,e.max);s.uv=i.quantized,s.uvDecodeMatrix=i.decodeMatrix}else s.uv=t.uv.constructor===Float32Array?t.uv:new Float32Array(t.uv);t.normals&&(this._state.compressGeometry?s.normals=it.compressNormals(t.normals):s.normals=t.normals.constructor===Float32Array?t.normals:new Float32Array(t.normals)),t.indices&&(s.indices=t.indices.constructor===Uint32Array||t.indices.constructor===Uint16Array?t.indices:new Uint32Array(t.indices),"triangles"===this._state.primitiveName&&(this._numTriangles=t.indices.length/3)),this._buildHash(),fi.meshes++,this._buildVBOs()}_buildVBOs(){const e=this._state,t=this.scene.canvas.gl;if(e.indices&&(e.indicesBuf=new ye(t,t.ELEMENT_ARRAY_BUFFER,e.indices,e.indices.length,1,t.STATIC_DRAW),fi.indices+=e.indicesBuf.numItems),e.positions&&(e.positionsBuf=new ye(t,t.ARRAY_BUFFER,e.positions,e.positions.length,3,t.STATIC_DRAW),fi.positions+=e.positionsBuf.numItems),e.normals){let s=e.compressGeometry;e.normalsBuf=new ye(t,t.ARRAY_BUFFER,e.normals,e.normals.length,3,t.STATIC_DRAW,s),fi.normals+=e.normalsBuf.numItems}e.colors&&(e.colorsBuf=new ye(t,t.ARRAY_BUFFER,e.colors,e.colors.length,4,t.STATIC_DRAW),fi.colors+=e.colorsBuf.numItems),e.uv&&(e.uvBuf=new ye(t,t.ARRAY_BUFFER,e.uv,e.uv.length,2,t.STATIC_DRAW),fi.uvs+=e.uvBuf.numItems)}_buildHash(){const e=this._state,t=["/g"];t.push("/"+e.primitive+";"),e.positions&&t.push("p"),e.colors&&t.push("c"),(e.normals||e.autoVertexNormals)&&t.push("n"),e.uv&&t.push("u"),e.compressGeometry&&t.push("cp"),t.push(";"),e.hash=t.join("")}_getEdgeIndices(){return this._edgeIndicesBuf||this._buildEdgeIndices(),this._edgeIndicesBuf}_getPickTrianglePositions(){return this._pickTrianglePositionsBuf||this._buildPickTriangleVBOs(),this._pickTrianglePositionsBuf}_getPickTriangleColors(){return this._pickTriangleColorsBuf||this._buildPickTriangleVBOs(),this._pickTriangleColorsBuf}_buildEdgeIndices(){const e=this._state;if(!e.positions||!e.indices)return;const t=this.scene.canvas.gl,s=Be(e.positions,e.indices,e.positionsDecodeMatrix,this._edgeThreshold);this._edgeIndicesBuf=new ye(t,t.ELEMENT_ARRAY_BUFFER,s,s.length,1,t.STATIC_DRAW),fi.indices+=this._edgeIndicesBuf.numItems}_buildPickTriangleVBOs(){const e=this._state;if(!e.positions||!e.indices)return;const t=this.scene.canvas.gl,s=p.buildPickTriangles(e.positions,e.indices,e.compressGeometry),i=s.positions,r=s.colors;this._pickTrianglePositionsBuf=new ye(t,t.ARRAY_BUFFER,i,i.length,3,t.STATIC_DRAW),this._pickTriangleColorsBuf=new ye(t,t.ARRAY_BUFFER,r,r.length,4,t.STATIC_DRAW,!0),fi.positions+=this._pickTrianglePositionsBuf.numItems,fi.colors+=this._pickTriangleColorsBuf.numItems}_buildPickVertexVBOs(){}_webglContextLost(){this._sceneVertexBufs&&this._sceneVertexBufs.webglContextLost()}_webglContextRestored(){this._sceneVertexBufs&&this._sceneVertexBufs.webglContextRestored(),this._buildVBOs(),this._edgeIndicesBuf=null,this._pickVertexPositionsBuf=null,this._pickTrianglePositionsBuf=null,this._pickTriangleColorsBuf=null,this._pickVertexPositionsBuf=null,this._pickVertexColorsBuf=null}get primitive(){return this._state.primitiveName}get compressGeometry(){return this._state.compressGeometry}get positions(){return this._state.positions?this._state.compressGeometry?(this._decompressedPositions||(this._decompressedPositions=new Float32Array(this._state.positions.length),it.decompressPositions(this._state.positions,this._state.positionsDecodeMatrix,this._decompressedPositions)),this._decompressedPositions):this._state.positions:null}set positions(e){const t=this._state,s=t.positions;if(s)if(s.length===e.length){if(this._state.compressGeometry){const s=it.getPositionsBounds(e),i=it.compressPositions(e,s.min,s.max);e=i.quantized,t.positionsDecodeMatrix=i.decodeMatrix}s.set(e),t.positionsBuf&&t.positionsBuf.setData(s),this._setAABBDirty(),this.glRedraw()}else this.error("can't update geometry positions - new positions are wrong length");else this.error("can't update geometry positions - geometry has no positions")}get normals(){if(this._state.normals){if(!this._state.compressGeometry)return this._state.normals;if(!this._decompressedNormals){const e=this._state.normals.length,t=e+e/2;this._decompressedNormals=new Float32Array(t),it.decompressNormals(this._state.normals,this._decompressedNormals)}return this._decompressedNormals}}set normals(e){if(this._state.compressGeometry)return void this.error("can't update geometry normals - quantized geometry is immutable");const t=this._state,s=t.normals;s?s.length===e.length?(s.set(e),t.normalsBuf&&t.normalsBuf.setData(s),this.glRedraw()):this.error("can't update geometry normals - new normals are wrong length"):this.error("can't update geometry normals - geometry has no normals")}get uv(){return this._state.uv?this._state.compressGeometry?(this._decompressedUV||(this._decompressedUV=new Float32Array(this._state.uv.length),it.decompressUVs(this._state.uv,this._state.uvDecodeMatrix,this._decompressedUV)),this._decompressedUV):this._state.uv:null}set uv(e){if(this._state.compressGeometry)return void this.error("can't update geometry UVs - quantized geometry is immutable");const t=this._state,s=t.uv;s?s.length===e.length?(s.set(e),t.uvBuf&&t.uvBuf.setData(s),this.glRedraw()):this.error("can't update geometry UVs - new UVs are wrong length"):this.error("can't update geometry UVs - geometry has no UVs")}get colors(){return this._state.colors}set colors(e){if(this._state.compressGeometry)return void this.error("can't update geometry colors - quantized geometry is immutable");const t=this._state,s=t.colors;s?s.length===e.length?(s.set(e),t.colorsBuf&&t.colorsBuf.setData(s),this.glRedraw()):this.error("can't update geometry colors - new colors are wrong length"):this.error("can't update geometry colors - geometry has no colors")}get indices(){return this._state.indices}get aabb(){return this._aabbDirty&&(this._aabb||(this._aabb=p.AABB3()),p.positions3ToAABB3(this._state.positions,this._aabb,this._state.positionsDecodeMatrix),this._aabbDirty=!1),this._aabb}get obb(){return this._obbDirty&&(this._obb||(this._obb=p.OBB3()),p.positions3ToAABB3(this._state.positions,mi,this._state.positionsDecodeMatrix),p.AABB3ToOBB3(mi,this._obb),this._obbDirty=!1),this._obb}get numTriangles(){return this._numTriangles}_setAABBDirty(){this._aabbDirty||(this._aabbDirty=!0,this._aabbDirty=!0,this._obbDirty=!0)}_getState(){return this._state}destroy(){super.destroy();const e=this._state;e.indicesBuf&&e.indicesBuf.destroy(),e.positionsBuf&&e.positionsBuf.destroy(),e.normalsBuf&&e.normalsBuf.destroy(),e.uvBuf&&e.uvBuf.destroy(),e.colorsBuf&&e.colorsBuf.destroy(),this._edgeIndicesBuf&&this._edgeIndicesBuf.destroy(),this._pickTrianglePositionsBuf&&this._pickTrianglePositionsBuf.destroy(),this._pickTriangleColorsBuf&&this._pickTriangleColorsBuf.destroy(),this._pickVertexPositionsBuf&&this._pickVertexPositionsBuf.destroy(),this._pickVertexColorsBuf&&this._pickVertexColorsBuf.destroy(),e.destroy(),fi.meshes--}}function yi(e={}){let t=e.xSize||1;t<0&&(console.error("negative xSize not allowed - will invert"),t*=-1);let s=e.ySize||1;s<0&&(console.error("negative ySize not allowed - will invert"),s*=-1);let i=e.zSize||1;i<0&&(console.error("negative zSize not allowed - will invert"),i*=-1);const r=e.center,o=r?r[0]:0,n=r?r[1]:0,a=r?r[2]:0,l=-t+o,h=-s+n,c=-i+a,u=t+o,A=s+n,p=i+a;return y.apply(e,{positions:[u,A,p,l,A,p,l,h,p,u,h,p,u,A,p,u,h,p,u,h,c,u,A,c,u,A,p,u,A,c,l,A,c,l,A,p,l,A,p,l,A,c,l,h,c,l,h,p,l,h,c,u,h,c,u,h,p,l,h,p,u,h,c,l,h,c,l,A,c,u,A,c],normals:[0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1],uv:[1,0,0,0,0,1,1,1,0,0,0,1,1,1,1,0,1,1,1,0,0,0,0,1,1,0,0,0,0,1,1,1,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0],indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]})}class Ei extends x{get type(){return"Material"}constructor(e,t={}){super(e,t),d.memory.materials++}destroy(){super.destroy(),d.memory.materials--}}const vi={opaque:0,mask:1,blend:2},_i=["opaque","mask","blend"];class Ii extends Ei{get type(){return"PhongMaterial"}constructor(e,t={}){super(e,t),this._state=new Ze({type:"PhongMaterial",ambient:p.vec3([1,1,1]),diffuse:p.vec3([1,1,1]),specular:p.vec3([1,1,1]),emissive:p.vec3([0,0,0]),alpha:null,shininess:null,reflectivity:null,alphaMode:null,alphaCutoff:null,lineWidth:null,pointSize:null,backfaces:null,frontface:null,hash:null}),this.ambient=t.ambient,this.diffuse=t.diffuse,this.specular=t.specular,this.emissive=t.emissive,this.alpha=t.alpha,this.shininess=t.shininess,this.reflectivity=t.reflectivity,this.lineWidth=t.lineWidth,this.pointSize=t.pointSize,t.ambientMap&&(this._ambientMap=this._checkComponent("Texture",t.ambientMap)),t.diffuseMap&&(this._diffuseMap=this._checkComponent("Texture",t.diffuseMap)),t.specularMap&&(this._specularMap=this._checkComponent("Texture",t.specularMap)),t.emissiveMap&&(this._emissiveMap=this._checkComponent("Texture",t.emissiveMap)),t.alphaMap&&(this._alphaMap=this._checkComponent("Texture",t.alphaMap)),t.reflectivityMap&&(this._reflectivityMap=this._checkComponent("Texture",t.reflectivityMap)),t.normalMap&&(this._normalMap=this._checkComponent("Texture",t.normalMap)),t.occlusionMap&&(this._occlusionMap=this._checkComponent("Texture",t.occlusionMap)),t.diffuseFresnel&&(this._diffuseFresnel=this._checkComponent("Fresnel",t.diffuseFresnel)),t.specularFresnel&&(this._specularFresnel=this._checkComponent("Fresnel",t.specularFresnel)),t.emissiveFresnel&&(this._emissiveFresnel=this._checkComponent("Fresnel",t.emissiveFresnel)),t.alphaFresnel&&(this._alphaFresnel=this._checkComponent("Fresnel",t.alphaFresnel)),t.reflectivityFresnel&&(this._reflectivityFresnel=this._checkComponent("Fresnel",t.reflectivityFresnel)),this.alphaMode=t.alphaMode,this.alphaCutoff=t.alphaCutoff,this.backfaces=t.backfaces,this.frontface=t.frontface,this._makeHash()}_makeHash(){const e=this._state,t=["/p"];this._normalMap&&(t.push("/nm"),this._normalMap.hasMatrix&&t.push("/mat")),this._ambientMap&&(t.push("/am"),this._ambientMap.hasMatrix&&t.push("/mat"),t.push("/"+this._ambientMap.encoding)),this._diffuseMap&&(t.push("/dm"),this._diffuseMap.hasMatrix&&t.push("/mat"),t.push("/"+this._diffuseMap.encoding)),this._specularMap&&(t.push("/sm"),this._specularMap.hasMatrix&&t.push("/mat")),this._emissiveMap&&(t.push("/em"),this._emissiveMap.hasMatrix&&t.push("/mat"),t.push("/"+this._emissiveMap.encoding)),this._alphaMap&&(t.push("/opm"),this._alphaMap.hasMatrix&&t.push("/mat")),this._reflectivityMap&&(t.push("/rm"),this._reflectivityMap.hasMatrix&&t.push("/mat")),this._occlusionMap&&(t.push("/ocm"),this._occlusionMap.hasMatrix&&t.push("/mat")),this._diffuseFresnel&&t.push("/df"),this._specularFresnel&&t.push("/sf"),this._emissiveFresnel&&t.push("/ef"),this._alphaFresnel&&t.push("/of"),this._reflectivityFresnel&&t.push("/rf"),t.push(";"),e.hash=t.join("")}set ambient(e){let t=this._state.ambient;if(t){if(e&&t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2])return}else t=this._state.ambient=new Float32Array(3);e?(t[0]=e[0],t[1]=e[1],t[2]=e[2]):(t[0]=.2,t[1]=.2,t[2]=.2),this.glRedraw()}get ambient(){return this._state.ambient}set diffuse(e){let t=this._state.diffuse;if(t){if(e&&t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2])return}else t=this._state.diffuse=new Float32Array(3);e?(t[0]=e[0],t[1]=e[1],t[2]=e[2]):(t[0]=1,t[1]=1,t[2]=1),this.glRedraw()}get diffuse(){return this._state.diffuse}set specular(e){let t=this._state.specular;if(t){if(e&&t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2])return}else t=this._state.specular=new Float32Array(3);e?(t[0]=e[0],t[1]=e[1],t[2]=e[2]):(t[0]=1,t[1]=1,t[2]=1),this.glRedraw()}get specular(){return this._state.specular}set emissive(e){let t=this._state.emissive;if(t){if(e&&t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2])return}else t=this._state.emissive=new Float32Array(3);e?(t[0]=e[0],t[1]=e[1],t[2]=e[2]):(t[0]=0,t[1]=0,t[2]=0),this.glRedraw()}get emissive(){return this._state.emissive}set alpha(e){e=null!=e?e:1,this._state.alpha!==e&&(this._state.alpha=e,this.glRedraw())}get alpha(){return this._state.alpha}set shininess(e){this._state.shininess=void 0!==e?e:80,this.glRedraw()}get shininess(){return this._state.shininess}set lineWidth(e){this._state.lineWidth=e||1,this.glRedraw()}get lineWidth(){return this._state.lineWidth}set pointSize(e){this._state.pointSize=e||1,this.glRedraw()}get pointSize(){return this._state.pointSize}set reflectivity(e){this._state.reflectivity=void 0!==e?e:1,this.glRedraw()}get reflectivity(){return this._state.reflectivity}get normalMap(){return this._normalMap}get ambientMap(){return this._ambientMap}get diffuseMap(){return this._diffuseMap}get specularMap(){return this._specularMap}get emissiveMap(){return this._emissiveMap}get alphaMap(){return this._alphaMap}get reflectivityMap(){return this._reflectivityMap}get occlusionMap(){return this._occlusionMap}get diffuseFresnel(){return this._diffuseFresnel}get specularFresnel(){return this._specularFresnel}get emissiveFresnel(){return this._emissiveFresnel}get alphaFresnel(){return this._alphaFresnel}get reflectivityFresnel(){return this._reflectivityFresnel}set alphaMode(e){let t=vi[e=e||"opaque"];void 0===t&&(this.error("Unsupported value for 'alphaMode': "+e+" - defaulting to 'opaque'"),t="opaque"),this._state.alphaMode!==t&&(this._state.alphaMode=t,this.glRedraw())}get alphaMode(){return _i[this._state.alphaMode]}set alphaCutoff(e){null==e&&(e=.5),this._state.alphaCutoff!==e&&(this._state.alphaCutoff=e)}get alphaCutoff(){return this._state.alphaCutoff}set backfaces(e){e=!!e,this._state.backfaces!==e&&(this._state.backfaces=e,this.glRedraw())}get backfaces(){return this._state.backfaces}set frontface(e){e="cw"!==e,this._state.frontface!==e&&(this._state.frontface=e,this.glRedraw())}get frontface(){return this._state.frontface?"ccw":"cw"}destroy(){super.destroy(),this._state.destroy()}}const Ti={default:{fill:!0,fillColor:[.4,.4,.4],fillAlpha:.2,edges:!0,edgeColor:[.2,.2,.2],edgeAlpha:.5,edgeWidth:1},defaultWhiteBG:{fill:!0,fillColor:[1,1,1],fillAlpha:.6,edgeColor:[.2,.2,.2],edgeAlpha:1,edgeWidth:1},defaultLightBG:{fill:!0,fillColor:[.4,.4,.4],fillAlpha:.2,edges:!0,edgeColor:[.2,.2,.2],edgeAlpha:.5,edgeWidth:1},defaultDarkBG:{fill:!0,fillColor:[.4,.4,.4],fillAlpha:.2,edges:!0,edgeColor:[.5,.5,.5],edgeAlpha:.5,edgeWidth:1},phosphorous:{fill:!0,fillColor:[0,0,0],fillAlpha:.4,edges:!0,edgeColor:[.9,.9,.9],edgeAlpha:.5,edgeWidth:2},sunset:{fill:!0,fillColor:[.9,.9,.6],fillAlpha:.2,edges:!0,edgeColor:[.9,.9,.9],edgeAlpha:.5,edgeWidth:1},vectorscope:{fill:!0,fillColor:[0,0,0],fillAlpha:.7,edges:!0,edgeColor:[.2,1,.2],edgeAlpha:1,edgeWidth:2},battlezone:{fill:!0,fillColor:[0,0,0],fillAlpha:1,edges:!0,edgeColor:[.2,1,.2],edgeAlpha:1,edgeWidth:3},sepia:{fill:!0,fillColor:[.970588207244873,.7965892553329468,.6660899519920349],fillAlpha:.4,edges:!0,edgeColor:[.529411792755127,.4577854573726654,.4100345969200134],edgeAlpha:1,edgeWidth:1},yellowHighlight:{fill:!0,fillColor:[1,1,0],fillAlpha:.5,edges:!0,edgeColor:[.529411792755127,.4577854573726654,.4100345969200134],edgeAlpha:1,edgeWidth:1},greenSelected:{fill:!0,fillColor:[0,1,0],fillAlpha:.5,edges:!0,edgeColor:[.4577854573726654,.529411792755127,.4100345969200134],edgeAlpha:1,edgeWidth:1},gamegrid:{fill:!0,fillColor:[.2,.2,.7],fillAlpha:.9,edges:!0,edgeColor:[.4,.4,1.6],edgeAlpha:.8,edgeWidth:3}};class Pi extends Ei{get type(){return"EmphasisMaterial"}get presets(){return Ti}constructor(e,t={}){super(e,t),this._state=new Ze({type:"EmphasisMaterial",fill:null,fillColor:null,fillAlpha:null,edges:null,edgeColor:null,edgeAlpha:null,edgeWidth:null,backfaces:!0,glowThrough:!0}),this._preset="default",t.preset?(this.preset=t.preset,void 0!==t.fill&&(this.fill=t.fill),t.fillColor&&(this.fillColor=t.fillColor),void 0!==t.fillAlpha&&(this.fillAlpha=t.fillAlpha),void 0!==t.edges&&(this.edges=t.edges),t.edgeColor&&(this.edgeColor=t.edgeColor),void 0!==t.edgeAlpha&&(this.edgeAlpha=t.edgeAlpha),void 0!==t.edgeWidth&&(this.edgeWidth=t.edgeWidth),void 0!==t.backfaces&&(this.backfaces=t.backfaces),void 0!==t.glowThrough&&(this.glowThrough=t.glowThrough)):(this.fill=t.fill,this.fillColor=t.fillColor,this.fillAlpha=t.fillAlpha,this.edges=t.edges,this.edgeColor=t.edgeColor,this.edgeAlpha=t.edgeAlpha,this.edgeWidth=t.edgeWidth,this.backfaces=t.backfaces,this.glowThrough=t.glowThrough)}set fill(e){e=!1!==e,this._state.fill!==e&&(this._state.fill=e,this.glRedraw())}get fill(){return this._state.fill}set fillColor(e){let t=this._state.fillColor;if(t){if(e&&t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2])return}else t=this._state.fillColor=new Float32Array(3);e?(t[0]=e[0],t[1]=e[1],t[2]=e[2]):(t[0]=.4,t[1]=.4,t[2]=.4),this.glRedraw()}get fillColor(){return this._state.fillColor}set fillAlpha(e){e=null!=e?e:.2,this._state.fillAlpha!==e&&(this._state.fillAlpha=e,this.glRedraw())}get fillAlpha(){return this._state.fillAlpha}set edges(e){e=!1!==e,this._state.edges!==e&&(this._state.edges=e,this.glRedraw())}get edges(){return this._state.edges}set edgeColor(e){let t=this._state.edgeColor;if(t){if(e&&t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2])return}else t=this._state.edgeColor=new Float32Array(3);e?(t[0]=e[0],t[1]=e[1],t[2]=e[2]):(t[0]=.2,t[1]=.2,t[2]=.2),this.glRedraw()}get edgeColor(){return this._state.edgeColor}set edgeAlpha(e){e=null!=e?e:.5,this._state.edgeAlpha!==e&&(this._state.edgeAlpha=e,this.glRedraw())}get edgeAlpha(){return this._state.edgeAlpha}set edgeWidth(e){this._state.edgeWidth=e||1,this.glRedraw()}get edgeWidth(){return this._state.edgeWidth}set backfaces(e){e=!!e,this._state.backfaces!==e&&(this._state.backfaces=e,this.glRedraw())}get backfaces(){return this._state.backfaces}set glowThrough(e){e=!1!==e,this._state.glowThrough!==e&&(this._state.glowThrough=e,this.glRedraw())}get glowThrough(){return this._state.glowThrough}set preset(e){if(e=e||"default",this._preset===e)return;const t=Ti[e];t?(this.fill=t.fill,this.fillColor=t.fillColor,this.fillAlpha=t.fillAlpha,this.edges=t.edges,this.edgeColor=t.edgeColor,this.edgeAlpha=t.edgeAlpha,this.edgeWidth=t.edgeWidth,this.glowThrough=t.glowThrough,this._preset=e):this.error("unsupported preset: '"+e+"' - supported values are "+Object.keys(Ti).join(", "))}get preset(){return this._preset}destroy(){super.destroy(),this._state.destroy()}}const Di={default:{edgeColor:[0,0,0],edgeAlpha:1,edgeWidth:1},defaultWhiteBG:{edgeColor:[.2,.2,.2],edgeAlpha:1,edgeWidth:1},defaultLightBG:{edgeColor:[.2,.2,.2],edgeAlpha:1,edgeWidth:1},defaultDarkBG:{edgeColor:[.5,.5,.5],edgeAlpha:1,edgeWidth:1}};class bi extends Ei{get type(){return"EdgeMaterial"}get presets(){return Di}constructor(e,t={}){super(e,t),this._state=new Ze({type:"EdgeMaterial",edges:null,edgeColor:null,edgeAlpha:null,edgeWidth:null}),this._preset="default",t.preset?(this.preset=t.preset,t.edgeColor&&(this.edgeColor=t.edgeColor),void 0!==t.edgeAlpha&&(this.edgeAlpha=t.edgeAlpha),void 0!==t.edgeWidth&&(this.edgeWidth=t.edgeWidth)):(this.edgeColor=t.edgeColor,this.edgeAlpha=t.edgeAlpha,this.edgeWidth=t.edgeWidth),this.edges=!1!==t.edges}set edges(e){e=!1!==e,this._state.edges!==e&&(this._state.edges=e,this.glRedraw())}get edges(){return this._state.edges}set edgeColor(e){let t=this._state.edgeColor;if(t){if(e&&t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2])return}else t=this._state.edgeColor=new Float32Array(3);e?(t[0]=e[0],t[1]=e[1],t[2]=e[2]):(t[0]=.2,t[1]=.2,t[2]=.2),this.glRedraw()}get edgeColor(){return this._state.edgeColor}set edgeAlpha(e){e=null!=e?e:1,this._state.edgeAlpha!==e&&(this._state.edgeAlpha=e,this.glRedraw())}get edgeAlpha(){return this._state.edgeAlpha}set edgeWidth(e){this._state.edgeWidth=e||1,this.glRedraw()}get edgeWidth(){return this._state.edgeWidth}set preset(e){if(e=e||"default",this._preset===e)return;const t=Di[e];t?(this.edgeColor=t.edgeColor,this.edgeAlpha=t.edgeAlpha,this.edgeWidth=t.edgeWidth,this._preset=e):this.error("unsupported preset: '"+e+"' - supported values are "+Object.keys(Di).join(", "))}get preset(){return this._preset}destroy(){super.destroy(),this._state.destroy()}}const Ri={meters:{abbrev:"m"},metres:{abbrev:"m"},centimeters:{abbrev:"cm"},centimetres:{abbrev:"cm"},millimeters:{abbrev:"mm"},millimetres:{abbrev:"mm"},yards:{abbrev:"yd"},feet:{abbrev:"ft"},inches:{abbrev:"in"}};class Ci extends x{constructor(e,t={}){super(e,t),this._units="meters",this._scale=1,this._origin=p.vec3([0,0,0]),this.units=t.units,this.scale=t.scale,this.origin=t.origin}get unitsInfo(){return Ri}set units(e){e||(e="meters");Ri[e]||(this.error("Unsupported value for 'units': "+e+" defaulting to 'meters'"),e="meters"),this._units=e,this.fire("units",this._units)}get units(){return this._units}set scale(e){(e=e||1)<=0?this.error("scale value should be larger than zero"):(this._scale=e,this.fire("scale",this._scale))}get scale(){return this._scale}set origin(e){if(!e)return this._origin[0]=0,this._origin[1]=0,void(this._origin[2]=0);this._origin[0]=e[0],this._origin[1]=e[1],this._origin[2]=e[2],this.fire("origin",this._origin)}get origin(){return this._origin}worldToRealPos(e,t=p.vec3(3)){t[0]=this._origin[0]+this._scale*e[0],t[1]=this._origin[1]+this._scale*e[1],t[2]=this._origin[2]+this._scale*e[2]}realToWorldPos(e,t=p.vec3(3)){return t[0]=(e[0]-this._origin[0])/this._scale,t[1]=(e[1]-this._origin[1])/this._scale,t[2]=(e[2]-this._origin[2])/this._scale,t}}class xi extends x{constructor(e,t={}){super(e,t),this._supported=oe.SUPPORTED_EXTENSIONS.OES_standard_derivatives,this.enabled=t.enabled,this.kernelRadius=t.kernelRadius,this.intensity=t.intensity,this.bias=t.bias,this.scale=t.scale,this.minResolution=t.minResolution,this.numSamples=t.numSamples,this.blur=t.blur,this.blendCutoff=t.blendCutoff,this.blendFactor=t.blendFactor}get supported(){return this._supported}set enabled(e){e=!!e,this._enabled!==e&&(this._enabled=e,this.glRedraw())}get enabled(){return this._enabled}get possible(){if(!this._supported)return!1;if(!this._enabled)return!1;const e=this.scene.camera.projection;return"customProjection"!==e&&"frustum"!==e}get active(){return this._active}set kernelRadius(e){null==e&&(e=100),this._kernelRadius!==e&&(this._kernelRadius=e,this.glRedraw())}get kernelRadius(){return this._kernelRadius}set intensity(e){null==e&&(e=.15),this._intensity!==e&&(this._intensity=e,this.glRedraw())}get intensity(){return this._intensity}set bias(e){null==e&&(e=.5),this._bias!==e&&(this._bias=e,this.glRedraw())}get bias(){return this._bias}set scale(e){null==e&&(e=1),this._scale!==e&&(this._scale=e,this.glRedraw())}get scale(){return this._scale}set minResolution(e){null==e&&(e=0),this._minResolution!==e&&(this._minResolution=e,this.glRedraw())}get minResolution(){return this._minResolution}set numSamples(e){null==e&&(e=10),this._numSamples!==e&&(this._numSamples=e,this.glRedraw())}get numSamples(){return this._numSamples}set blur(e){e=!1!==e,this._blur!==e&&(this._blur=e,this.glRedraw())}get blur(){return this._blur}set blendCutoff(e){null==e&&(e=.3),this._blendCutoff!==e&&(this._blendCutoff=e,this.glRedraw())}get blendCutoff(){return this._blendCutoff}set blendFactor(e){null==e&&(e=1),this._blendFactor!==e&&(this._blendFactor=e,this.glRedraw())}get blendFactor(){return this._blendFactor}destroy(){super.destroy()}}const Ni={default:{pointSize:4,roundPoints:!0,perspectivePoints:!0},square:{pointSize:4,roundPoints:!1,perspectivePoints:!0},round:{pointSize:4,roundPoints:!0,perspectivePoints:!0}};class Oi extends Ei{get type(){return"PointsMaterial"}get presets(){return Ni}constructor(e,t={}){super(e,t),this._state=new Ze({type:"PointsMaterial",pointSize:null,roundPoints:null,perspectivePoints:null,minPerspectivePointSize:null,maxPerspectivePointSize:null,filterIntensity:null,minIntensity:null,maxIntensity:null}),t.preset?(this.preset=t.preset,void 0!==t.pointSize&&(this.pointSize=t.pointSize),void 0!==t.roundPoints&&(this.roundPoints=t.roundPoints),void 0!==t.perspectivePoints&&(this.perspectivePoints=t.perspectivePoints),void 0!==t.minPerspectivePointSize&&(this.minPerspectivePointSize=t.minPerspectivePointSize),void 0!==t.maxPerspectivePointSize&&(this.maxPerspectivePointSize=t.minPerspectivePointSize)):(this._preset="default",this.pointSize=t.pointSize,this.roundPoints=t.roundPoints,this.perspectivePoints=t.perspectivePoints,this.minPerspectivePointSize=t.minPerspectivePointSize,this.maxPerspectivePointSize=t.maxPerspectivePointSize),this.filterIntensity=t.filterIntensity,this.minIntensity=t.minIntensity,this.maxIntensity=t.maxIntensity}set pointSize(e){this._state.pointSize=e||2,this.glRedraw()}get pointSize(){return this._state.pointSize}set roundPoints(e){e=!1!==e,this._state.roundPoints!==e&&(this._state.roundPoints=e,this.scene._needRecompile=!0,this.glRedraw())}get roundPoints(){return this._state.roundPoints}set perspectivePoints(e){e=!1!==e,this._state.perspectivePoints!==e&&(this._state.perspectivePoints=e,this.scene._needRecompile=!0,this.glRedraw())}get perspectivePoints(){return this._state.perspectivePoints}set minPerspectivePointSize(e){this._state.minPerspectivePointSize=e||1,this.scene._needRecompile=!0,this.glRedraw()}get minPerspectivePointSize(){return this._state.minPerspectivePointSize}set maxPerspectivePointSize(e){this._state.maxPerspectivePointSize=e||6,this.scene._needRecompile=!0,this.glRedraw()}get maxPerspectivePointSize(){return this._state.maxPerspectivePointSize}set filterIntensity(e){e=!1!==e,this._state.filterIntensity!==e&&(this._state.filterIntensity=e,this.scene._needRecompile=!0,this.glRedraw())}get filterIntensity(){return this._state.filterIntensity}set minIntensity(e){this._state.minIntensity=null!=e?e:0,this.glRedraw()}get minIntensity(){return this._state.minIntensity}set maxIntensity(e){this._state.maxIntensity=null!=e?e:1,this.glRedraw()}get maxIntensity(){return this._state.maxIntensity}set preset(e){if(e=e||"default",this._preset===e)return;const t=Ni[e];t?(this.pointSize=t.pointSize,this.roundPoints=t.roundPoints,this.perspectivePoints=t.perspectivePoints,this.minPerspectivePointSize=t.minPerspectivePointSize,this.maxPerspectivePointSize=t.maxPerspectivePointSize,this._preset=e):this.error("unsupported preset: '"+e+"' - supported values are "+Object.keys(Ni).join(", "))}get preset(){return this._preset}get hash(){return[this.pointSize,this.roundPoints,this.perspectivePoints,this.minPerspectivePointSize,this.maxPerspectivePointSize,this.filterIntensity].join(";")}destroy(){super.destroy(),this._state.destroy()}}const Si={default:{lineWidth:1},thick:{lineWidth:2},thicker:{lineWidth:4}};class wi extends Ei{get type(){return"LinesMaterial"}get presets(){return Si}constructor(e,t={}){super(e,t),this._state=new Ze({type:"LinesMaterial",lineWidth:null}),t.preset?(this.preset=t.preset,void 0!==t.lineWidth&&(this.lineWidth=t.lineWidth)):(this._preset="default",this.lineWidth=t.lineWidth)}set lineWidth(e){this._state.lineWidth=e||1,this.glRedraw()}get lineWidth(){return this._state.lineWidth}set preset(e){if(e=e||"default",this._preset===e)return;const t=Si[e];t?(this.lineWidth=t.lineWidth,this._preset=e):this.error("unsupported preset: '"+e+"' - supported values are "+Object.keys(Si).join(", "))}get preset(){return this._preset}get hash(){return[""+this.lineWidth].join(";")}destroy(){super.destroy(),this._state.destroy()}}function Mi(e,t){const s={};let i,r;for(let o=0,n=t.length;o<n;o++)i=t[o],r=e.component[i],r?r.isEntity?s[i]=!0:e.warn("pick(): Component is not an Entity: "+i):e.warn("pick(): Component not found: "+i);return s}class Bi extends x{get type(){return"Scene"}constructor(e,t={}){super(null,t);const s=t.canvasElement||document.getElementById(t.canvasId);if(!(s instanceof HTMLCanvasElement))throw"Mandatory config expected: valid canvasId or canvasElement";const i=!!t.transparent,r=!!t.alphaDepthMask;this._aabbDirty=!0,this.viewer=e,this.occlusionTestCountdown=0,this.loading=0,this.startTime=(new Date).getTime(),this.models={},this.objects={},this._numObjects=0,this.visibleObjects={},this._numVisibleObjects=0,this.xrayedObjects={},this._numXRayedObjects=0,this.highlightedObjects={},this._numHighlightedObjects=0,this.selectedObjects={},this._numSelectedObjects=0,this.colorizedObjects={},this._numColorizedObjects=0,this.opacityObjects={},this._numOpacityObjects=0,this.offsetObjects={},this._numOffsetObjects=0,this._modelIds=null,this._objectIds=null,this._visibleObjectIds=null,this._xrayedObjectIds=null,this._highlightedObjectIds=null,this._selectedObjectIds=null,this._colorizedObjectIds=null,this._opacityObjectIds=null,this._offsetObjectIds=null,this._collidables={},this._compilables={},this._needRecompile=!1,this.types={},this.components={},this.sectionPlanes={},this.lights={},this.lightMaps={},this.reflectionMaps={},this.bitmaps={},this.lineSets={},this.realWorldOffset=t.realWorldOffset||new Float64Array([0,0,0]),this.canvas=new le(this,{dontClear:!0,canvas:s,spinnerElementId:t.spinnerElementId,transparent:i,webgl2:!1!==t.webgl2,contextAttr:t.contextAttr||{},backgroundColor:t.backgroundColor,backgroundColorFromAmbientLight:t.backgroundColorFromAmbientLight,premultipliedAlpha:t.premultipliedAlpha}),this.canvas.on("boundary",(()=>{this.glRedraw()})),this.canvas.on("webglContextFailed",(()=>{alert("xeokit failed to find WebGL!")})),this._renderer=new li(this,{transparent:i,alphaDepthMask:r}),this._sectionPlanesState=new function(){this.sectionPlanes=[],this.clippingCaps=!1;let e=null;this.getHash=function(){if(e)return e;const t=this.sectionPlanes;if(0===t.length)return this.hash=";";const s=[];for(let e=0,i=t.length;e<i;e++)s.push("cp");return s.push(";"),e=s.join(""),e},this.addSectionPlane=function(t){this.sectionPlanes.push(t),e=null},this.removeSectionPlane=function(t){for(let s=0,i=this.sectionPlanes.length;s<i;s++)if(this.sectionPlanes[s].id===t.id)return this.sectionPlanes.splice(s,1),void(e=null)}},this._lightsState=new function(){const e=p.vec4([0,0,0,0]),t=p.vec4();this.lights=[],this.reflectionMaps=[],this.lightMaps=[];let s=null,i=null;this.getHash=function(){if(s)return s;const e=[],t=this.lights;let i;for(let s=0,r=t.length;s<r;s++)i=t[s],e.push("/"),e.push(i.type),e.push("world"===i.space?"w":"v"),i.castsShadow&&e.push("sh");return this.lightMaps.length>0&&e.push("/lm"),this.reflectionMaps.length>0&&e.push("/rm"),e.push(";"),s=e.join(""),s},this.addLight=function(e){this.lights.push(e),i=null,s=null},this.removeLight=function(e){for(let t=0,r=this.lights.length;t<r;t++){if(this.lights[t].id===e.id)return this.lights.splice(t,1),i&&i.id===e.id&&(i=null),void(s=null)}},this.addReflectionMap=function(e){this.reflectionMaps.push(e),s=null},this.removeReflectionMap=function(e){for(let t=0,i=this.reflectionMaps.length;t<i;t++)if(this.reflectionMaps[t].id===e.id)return this.reflectionMaps.splice(t,1),void(s=null)},this.addLightMap=function(e){this.lightMaps.push(e),s=null},this.removeLightMap=function(e){for(let t=0,i=this.lightMaps.length;t<i;t++)if(this.lightMaps[t].id===e.id)return this.lightMaps.splice(t,1),void(s=null)},this.getAmbientColorAndIntensity=function(){if(!i)for(let e=0,t=this.lights.length;e<t;e++){const t=this.lights[e];if("ambient"===t.type){i=t;break}}if(i){const e=i.color,s=i.intensity;return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=s,t}return e}},this.input=new hi(this,{dontClear:!0,element:this.canvas.canvas,keyboardEventsElement:t.keyboardEventsElement}),this.metrics=new Ci(this,{units:t.units,scale:t.scale,origin:t.origin}),this.sao=new xi(this,{enabled:t.saoEnabled}),this.ticksPerRender=t.ticksPerRender,this.ticksPerOcclusionTest=t.ticksPerOcclusionTest,this.passes=t.passes,this.clearEachPass=t.clearEachPass,this.gammaInput=t.gammaInput,this.gammaOutput=t.gammaOutput,this.gammaFactor=t.gammaFactor,this._entityOffsetsEnabled=!!t.entityOffsetsEnabled,this._pickSurfacePrecisionEnabled=!!t.pickSurfacePrecisionEnabled,this._logarithmicDepthBufferEnabled=!!t.logarithmicDepthBufferEnabled,this._pbrEnabled=!!t.pbrEnabled,this._colorTextureEnabled=!1!==t.colorTextureEnabled,R._addScene(this),this._initDefaults(),this._viewport=new ci(this,{id:"default.viewport",autoBoundary:!0,dontClear:!0}),this._camera=new Tt(this,{id:"default.camera",dontClear:!0}),new pi(this,{color:[1,1,1],intensity:.7}),new Ai(this,{dir:[.8,-.5,-.5],color:[.67,.67,1],intensity:.7,space:"world"}),new Ai(this,{dir:[-.8,-1,.5],color:[1,1,.9],intensity:.9,space:"world"}),this._camera.on("dirty",(()=>{this._renderer.imageDirty()}))}_initDefaults(){}_addComponent(e){if(e.id&&this.components[e.id]&&(this.error("Component "+y.inQuotes(e.id)+" already exists in Scene - ignoring ID, will randomly-generate instead"),e.id=null),!e.id)for(void 0===window.nextID&&(window.nextID=0),e.id="__"+window.nextID++;this.components[e.id];)e.id=p.createUUID();this.components[e.id]=e;const t=e.type;let s=this.types[e.type];s||(s=this.types[t]={}),s[e.id]=e,e.compile&&(this._compilables[e.id]=e),e.isDrawable&&(this._renderer.addDrawable(e.id,e),this._collidables[e.id]=e)}_removeComponent(e){var t=e.id,s=e.type;delete this.components[t];const i=this.types[s];i&&(delete i[t],y.isEmptyObject(i)&&delete this.types[s]),e.compile&&delete this._compilables[e.id],e.isDrawable&&(this._renderer.removeDrawable(e.id),delete this._collidables[e.id])}_sectionPlaneCreated(e){this.sectionPlanes[e.id]=e,this.scene._sectionPlanesState.addSectionPlane(e._state),this.scene.fire("sectionPlaneCreated",e,!0),this._needRecompile=!0}_bitmapCreated(e){this.bitmaps[e.id]=e,this.scene.fire("bitmapCreated",e,!0)}_lineSetCreated(e){this.lineSets[e.id]=e,this.scene.fire("lineSetCreated",e,!0)}_lightCreated(e){this.lights[e.id]=e,this.scene._lightsState.addLight(e._state),this._needRecompile=!0}_lightMapCreated(e){this.lightMaps[e.id]=e,this.scene._lightsState.addLightMap(e._state),this._needRecompile=!0}_reflectionMapCreated(e){this.reflectionMaps[e.id]=e,this.scene._lightsState.addReflectionMap(e._state),this._needRecompile=!0}_sectionPlaneDestroyed(e){delete this.sectionPlanes[e.id],this.scene._sectionPlanesState.removeSectionPlane(e._state),this.scene.fire("sectionPlaneDestroyed",e,!0),this._needRecompile=!0}_bitmapDestroyed(e){delete this.bitmaps[e.id],this.scene.fire("bitmapDestroyed",e,!0)}_lineSetDestroyed(e){delete this.lineSets[e.id],this.scene.fire("lineSetDestroyed",e,!0)}_lightDestroyed(e){delete this.lights[e.id],this.scene._lightsState.removeLight(e._state),this._needRecompile=!0}_lightMapDestroyed(e){delete this.lightMaps[e.id],this.scene._lightsState.removeLightMap(e._state),this._needRecompile=!0}_reflectionMapDestroyed(e){delete this.reflectionMaps[e.id],this.scene._lightsState.removeReflectionMap(e._state),this._needRecompile=!0}_registerModel(e){this.models[e.id]=e,this._modelIds=null}_deregisterModel(e){const t=e.id;delete this.models[t],this._modelIds=null,this.fire("modelUnloaded",t)}_registerObject(e){this.objects[e.id]=e,this._numObjects++,this._objectIds=null}_deregisterObject(e){delete this.objects[e.id],this._numObjects--,this._objectIds=null}_objectVisibilityUpdated(e,t,s=!0){t?(this.visibleObjects[e.id]=e,this._numVisibleObjects++):(delete this.visibleObjects[e.id],this._numVisibleObjects--),this._visibleObjectIds=null,s&&this.fire("objectVisibility",e,!0)}_objectXRayedUpdated(e,t,s=!0){t?(this.xrayedObjects[e.id]=e,this._numXRayedObjects++):(delete this.xrayedObjects[e.id],this._numXRayedObjects--),this._xrayedObjectIds=null,s&&this.fire("objectXRayed",e,!0)}_objectHighlightedUpdated(e,t,s=!0){t?(this.highlightedObjects[e.id]=e,this._numHighlightedObjects++):(delete this.highlightedObjects[e.id],this._numHighlightedObjects--),this._highlightedObjectIds=null,s&&this.fire("objectHighlighted",e,!0)}_objectSelectedUpdated(e,t,s=!0){t?(this.selectedObjects[e.id]=e,this._numSelectedObjects++):(delete this.selectedObjects[e.id],this._numSelectedObjects--),this._selectedObjectIds=null,s&&this.fire("objectSelected",e,!0)}_objectColorizeUpdated(e,t){t?(this.colorizedObjects[e.id]=e,this._numColorizedObjects++):(delete this.colorizedObjects[e.id],this._numColorizedObjects--),this._colorizedObjectIds=null}_objectOpacityUpdated(e,t){t?(this.opacityObjects[e.id]=e,this._numOpacityObjects++):(delete this.opacityObjects[e.id],this._numOpacityObjects--),this._opacityObjectIds=null}_objectOffsetUpdated(e,t){!t||0===t[0]&&0===t[1]&&0===t[2]?(this.offsetObjects[e.id]=e,this._numOffsetObjects++):(delete this.offsetObjects[e.id],this._numOffsetObjects--),this._offsetObjectIds=null}_webglContextLost(){this.canvas.spinner.processes++;for(const e in this.components)if(this.components.hasOwnProperty(e)){const t=this.components[e];t._webglContextLost&&t._webglContextLost()}this._renderer.webglContextLost()}_webglContextRestored(){const e=this.canvas.gl;for(const t in this.components)if(this.components.hasOwnProperty(t)){const s=this.components[t];s._webglContextRestored&&s._webglContextRestored(e)}this._renderer.webglContextRestored(e),this.canvas.spinner.processes--}get capabilities(){return this._renderer.capabilities}get entityOffsetsEnabled(){return this._entityOffsetsEnabled}get pickSurfacePrecisionEnabled(){return this._pickSurfacePrecisionEnabled}get logarithmicDepthBufferEnabled(){return this._logarithmicDepthBufferEnabled}set pbrEnabled(e){this._pbrEnabled=!!e,this.glRedraw()}get pbrEnabled(){return this._pbrEnabled}set colorTextureEnabled(e){this._colorTextureEnabled=!!e,this.glRedraw()}get colorTextureEnabled(){return this._colorTextureEnabled}doOcclusionTest(){this._needRecompile&&(this._recompile(),this._needRecompile=!1),this._renderer.doOcclusionTest()}render(e){e&&R.runTasks();const t={sceneId:null,pass:0};if(this._needRecompile&&(this._recompile(),this._renderer.imageDirty(),this._needRecompile=!1),!e&&!this._renderer.needsRender())return;t.sceneId=this.id;const s=this._passes,i=this._clearEachPass;let r,o;for(r=0;r<s;r++)t.pass=r,this.fire("rendering",t,!0),o=i||0===r,this._renderer.render({pass:r,clear:o,force:e}),this.fire("rendered",t,!0);this._saveAmbientColor()}_recompile(){for(const e in this._compilables)this._compilables.hasOwnProperty(e)&&this._compilables[e].compile();this._renderer.shadowsDirty(),this.fire("compile",this,!0)}_saveAmbientColor(){const e=this.canvas;if(e.transparent||e.backgroundImage||e.backgroundColor)this._lastAmbientColor=null;else{const t=this._lightsState.getAmbientColorAndIntensity();this._lastAmbientColor&&this._lastAmbientColor[0]===t[0]&&this._lastAmbientColor[1]===t[1]&&this._lastAmbientColor[2]===t[2]&&this._lastAmbientColor[3]===t[3]||(e.backgroundColor=t,this._lastAmbientColor||(this._lastAmbientColor=p.vec4([0,0,0,1])),this._lastAmbientColor.set(t))}}get modelIds(){return this._modelIds||(this._modelIds=Object.keys(this.models)),this._modelIds}get numObjects(){return this._numObjects}get objectIds(){return this._objectIds||(this._objectIds=Object.keys(this.objects)),this._objectIds}get numVisibleObjects(){return this._numVisibleObjects}get visibleObjectIds(){return this._visibleObjectIds||(this._visibleObjectIds=Object.keys(this.visibleObjects)),this._visibleObjectIds}get numXRayedObjects(){return this._numXRayedObjects}get xrayedObjectIds(){return this._xrayedObjectIds||(this._xrayedObjectIds=Object.keys(this.xrayedObjects)),this._xrayedObjectIds}get numHighlightedObjects(){return this._numHighlightedObjects}get highlightedObjectIds(){return this._highlightedObjectIds||(this._highlightedObjectIds=Object.keys(this.highlightedObjects)),this._highlightedObjectIds}get numSelectedObjects(){return this._numSelectedObjects}get selectedObjectIds(){return this._selectedObjectIds||(this._selectedObjectIds=Object.keys(this.selectedObjects)),this._selectedObjectIds}get numColorizedObjects(){return this._numColorizedObjects}get colorizedObjectIds(){return this._colorizedObjectIds||(this._colorizedObjectIds=Object.keys(this.colorizedObjects)),this._colorizedObjectIds}get opacityObjectIds(){return this._opacityObjectIds||(this._opacityObjectIds=Object.keys(this.opacityObjects)),this._opacityObjectIds}get offsetObjectIds(){return this._offsetObjectIds||(this._offsetObjectIds=Object.keys(this.offsetObjects)),this._offsetObjectIds}set ticksPerRender(e){null==e?e=1:(!y.isNumeric(e)||e<=0)&&(this.error("Unsupported value for 'ticksPerRender': '"+e+"' - should be an integer greater than zero."),e=1),e!==this._ticksPerRender&&(this._ticksPerRender=e)}get ticksPerRender(){return this._ticksPerRender}set ticksPerOcclusionTest(e){null==e?e=20:(!y.isNumeric(e)||e<=0)&&(this.error("Unsupported value for 'ticksPerOcclusionTest': '"+e+"' - should be an integer greater than zero."),e=20),e!==this._ticksPerOcclusionTest&&(this._ticksPerOcclusionTest=e)}get ticksPerOcclusionTest(){return this._ticksPerOcclusionTest}set passes(e){null==e?e=1:(!y.isNumeric(e)||e<=0)&&(this.error("Unsupported value for 'passes': '"+e+"' - should be an integer greater than zero."),e=1),e!==this._passes&&(this._passes=e,this.glRedraw())}get passes(){return this._passes}set clearEachPass(e){(e=!!e)!==this._clearEachPass&&(this._clearEachPass=e,this.glRedraw())}get clearEachPass(){return this._clearEachPass}set gammaInput(e){(e=!1!==e)!==this._renderer.gammaInput&&(this._renderer.gammaInput=e,this._needRecompile=!0,this.glRedraw())}get gammaInput(){return this._renderer.gammaInput}set gammaOutput(e){(e=!!e)!==this._renderer.gammaOutput&&(this._renderer.gammaOutput=e,this._needRecompile=!0,this.glRedraw())}get gammaOutput(){return this._renderer.gammaOutput}set gammaFactor(e){(e=null==e?2.2:e)!==this._renderer.gammaFactor&&(this._renderer.gammaFactor=e,this.glRedraw())}get gammaFactor(){return this._renderer.gammaFactor}get geometry(){return this.components["default.geometry"]||yi(gi)}get material(){return this.components["default.material"]||new Ii(this,{id:"default.material",emissive:[.4,.4,.4],dontClear:!0})}get xrayMaterial(){return this.components["default.xrayMaterial"]||new Pi(this,{id:"default.xrayMaterial",preset:"sepia",dontClear:!0})}get highlightMaterial(){return this.components["default.highlightMaterial"]||new Pi(this,{id:"default.highlightMaterial",preset:"yellowHighlight",dontClear:!0})}get selectedMaterial(){return this.components["default.selectedMaterial"]||new Pi(this,{id:"default.selectedMaterial",preset:"greenSelected",dontClear:!0})}get edgeMaterial(){return this.components["default.edgeMaterial"]||new bi(this,{id:"default.edgeMaterial",preset:"default",edgeColor:[0,0,0],edgeAlpha:1,edgeWidth:1,dontClear:!0})}get pointsMaterial(){return this.components["default.pointsMaterial"]||new Oi(this,{id:"default.pointsMaterial",preset:"default",dontClear:!0})}get linesMaterial(){return this.components["default.linesMaterial"]||new wi(this,{id:"default.linesMaterial",preset:"default",dontClear:!0})}get viewport(){return this._viewport}get camera(){return this._camera}get center(){if(this._aabbDirty||!this._center){this._center&&this._center||(this._center=p.vec3());const e=this.aabb;this._center[0]=(e[0]+e[3])/2,this._center[1]=(e[1]+e[4])/2,this._center[2]=(e[2]+e[5])/2}return this._center}get aabb(){if(this._aabbDirty){this._aabb||(this._aabb=p.AABB3());let e,t=p.MAX_DOUBLE,s=p.MAX_DOUBLE,i=p.MAX_DOUBLE,r=p.MIN_DOUBLE,o=p.MIN_DOUBLE,n=p.MIN_DOUBLE;const a=this._collidables;let l,h=!1;for(const c in a)if(a.hasOwnProperty(c)){if(l=a[c],!1===l.collidable)continue;e=l.aabb,e[0]<t&&(t=e[0]),e[1]<s&&(s=e[1]),e[2]<i&&(i=e[2]),e[3]>r&&(r=e[3]),e[4]>o&&(o=e[4]),e[5]>n&&(n=e[5]),h=!0}h||(t=-100,s=-100,i=-100,r=100,o=100,n=100),this._aabb[0]=t,this._aabb[1]=s,this._aabb[2]=i,this._aabb[3]=r,this._aabb[4]=o,this._aabb[5]=n,this._aabbDirty=!1}return this._aabb}_setAABBDirty(){this._aabbDirty=!0,this.fire("boundary")}pick(e,t){if(0===this.canvas.boundary[2]||0===this.canvas.boundary[3])return this.error("Picking not allowed while canvas has zero width or height"),null;(e=e||{}).pickSurface=e.pickSurface||e.rayPick,e.canvasPos||e.matrix||e.origin&&e.direction||this.warn("picking without canvasPos, matrix, or ray origin and direction");const s=e.includeEntities||e.include;s&&(e.includeEntityIds=Mi(this,s));const i=e.excludeEntities||e.exclude;return i&&(e.excludeEntityIds=Mi(this,i)),this._needRecompile&&(this._recompile(),this._renderer.imageDirty(),this._needRecompile=!1),(t=this._renderer.pick(e,t))?(t.entity&&t.entity.fire&&t.entity.fire("picked",t),t):void 0}snapPick(e){return this._renderer.snapPick(e.canvasPos,e.snapRadius||30,e.snapType||"vertex")}clear(){var e;for(const t in this.components)this.components.hasOwnProperty(t)&&((e=this.components[t])._dontClear||e.destroy())}clearLights(){const e=Object.keys(this.lights);for(let t=0,s=e.length;t<s;t++)this.lights[e[t]].destroy()}clearSectionPlanes(){const e=Object.keys(this.sectionPlanes);for(let t=0,s=e.length;t<s;t++)this.sectionPlanes[e[t]].destroy()}clearBitmaps(){const e=Object.keys(this.bitmaps);for(let t=0,s=e.length;t<s;t++)this.bitmaps[e[t]].destroy()}clearLines(){const e=Object.keys(this.lineSets);for(let t=0,s=e.length;t<s;t++)this.lineSets[e[t]].destroy()}getAABB(e){if(void 0===e)return this.aabb;if(y.isString(e)){const t=this.objects[e];if(t&&t.aabb)return t.aabb;e=[e]}if(0===e.length)return this.aabb;let t,s=p.MAX_DOUBLE,i=p.MAX_DOUBLE,r=p.MAX_DOUBLE,o=p.MIN_DOUBLE,n=p.MIN_DOUBLE,a=p.MIN_DOUBLE;if(this.withObjects(e,(e=>{if(e.collidable){const l=e.aabb;l[0]<s&&(s=l[0]),l[1]<i&&(i=l[1]),l[2]<r&&(r=l[2]),l[3]>o&&(o=l[3]),l[4]>n&&(n=l[4]),l[5]>a&&(a=l[5]),t=!0}})),t){const e=p.AABB3();return e[0]=s,e[1]=i,e[2]=r,e[3]=o,e[4]=n,e[5]=a,e}return this.aabb}setObjectsVisible(e,t){return this.withObjects(e,(e=>{const s=e.visible!==t;return e.visible=t,s}))}setObjectsCollidable(e,t){return this.withObjects(e,(e=>{const s=e.collidable!==t;return e.collidable=t,s}))}setObjectsCulled(e,t){return this.withObjects(e,(e=>{const s=e.culled!==t;return e.culled=t,s}))}setObjectsSelected(e,t){return this.withObjects(e,(e=>{const s=e.selected!==t;return e.selected=t,s}))}setObjectsHighlighted(e,t){return this.withObjects(e,(e=>{const s=e.highlighted!==t;return e.highlighted=t,s}))}setObjectsXRayed(e,t){return this.withObjects(e,(e=>{const s=e.xrayed!==t;return e.xrayed=t,s}))}setObjectsEdges(e,t){return this.withObjects(e,(e=>{const s=e.edges!==t;return e.edges=t,s}))}setObjectsColorized(e,t){return this.withObjects(e,(e=>{e.colorize=t}))}setObjectsOpacity(e,t){return this.withObjects(e,(e=>{const s=e.opacity!==t;return e.opacity=t,s}))}setObjectsPickable(e,t){return this.withObjects(e,(e=>{const s=e.pickable!==t;return e.pickable=t,s}))}setObjectsOffset(e,t){this.withObjects(e,(e=>{e.offset=t}))}withObjects(e,t){y.isString(e)&&(e=[e]);let s=!1;for(let i=0,r=e.length;i<r;i++){const r=e[i];let o=this.objects[r];if(o)s=t(o)||s;else{const e=this.modelIds;for(let i=0,n=e.length;i<n;i++){const n=e[i],a=p.globalizeObjectId(n,r);o=this.objects[a],o&&(s=t(o)||s)}}}return s}destroy(){super.destroy();for(const e in this.components)this.components.hasOwnProperty(e)&&this.components[e].destroy();this.canvas.gl=null,this.components=null,this.models=null,this.objects=null,this.visibleObjects=null,this.xrayedObjects=null,this.highlightedObjects=null,this.selectedObjects=null,this.colorizedObjects=null,this.opacityObjects=null,this.sectionPlanes=null,this.lights=null,this.lightMaps=null,this.reflectionMaps=null,this._objectIds=null,this._visibleObjectIds=null,this._xrayedObjectIds=null,this._highlightedObjectIds=null,this._selectedObjectIds=null,this._colorizedObjectIds=null,this.types=null,this.components=null,this.canvas=null,this._renderer=null,this.input=null,this._viewport=null,this._camera=null}}const Fi=1e3,Li=1001,Ui=1002,Hi=1003,Gi=1004,Vi=1005,ki=1006,ji=1007,Qi=1008,Wi=1008,zi=1023,Ki=33776,Yi=33777,Xi=33778,Zi=33779,qi=35840,Ji=35842,$i=37492,er=37496,tr=37808,sr=36492,ir=3e3,rr=3001,or=function(e){"LambertMaterial"===e._material._state.type?(this.vertex=function(e){const t=e.scene,s=e.scene._sectionPlanesState,i=e.scene._lightsState,r=e._geometry._state,o=e._state.billboard,n=e._state.stationary,a=s.sectionPlanes.length>0,l=!!r.compressGeometry,h=[];h.push("#version 300 es"),h.push("// Lambertian drawing vertex shader"),h.push("in vec3 position;"),h.push("uniform mat4 modelMatrix;"),h.push("uniform mat4 viewMatrix;"),h.push("uniform mat4 projMatrix;"),h.push("uniform vec4 colorize;"),h.push("uniform vec3 offset;"),l&&h.push("uniform mat4 positionsDecodeMatrix;");t.logarithmicDepthBufferEnabled&&(h.push("uniform float logDepthBufFC;"),h.push("out float vFragDepth;"),h.push("bool isPerspectiveMatrix(mat4 m) {"),h.push("    return (m[2][3] == - 1.0);"),h.push("}"),h.push("out float isPerspective;"));a&&h.push("out vec4 vWorldPosition;");if(h.push("uniform vec4 lightAmbient;"),h.push("uniform vec4 materialColor;"),h.push("uniform vec3 materialEmissive;"),r.normalsBuf){h.push("in vec3 normal;"),h.push("uniform mat4 modelNormalMatrix;"),h.push("uniform mat4 viewNormalMatrix;");for(let e=0,t=i.lights.length;e<t;e++){const t=i.lights[e];"ambient"!==t.type&&(h.push("uniform vec4 lightColor"+e+";"),"dir"===t.type&&h.push("uniform vec3 lightDir"+e+";"),"point"===t.type&&h.push("uniform vec3 lightPos"+e+";"),"spot"===t.type&&(h.push("uniform vec3 lightPos"+e+";"),h.push("uniform vec3 lightDir"+e+";")))}l&&(h.push("vec3 octDecode(vec2 oct) {"),h.push("    vec3 v = vec3(oct.xy, 1.0 - abs(oct.x) - abs(oct.y));"),h.push("    if (v.z < 0.0) {"),h.push("        v.xy = (1.0 - abs(v.yx)) * vec2(v.x >= 0.0 ? 1.0 : -1.0, v.y >= 0.0 ? 1.0 : -1.0);"),h.push("    }"),h.push("    return normalize(v);"),h.push("}"))}h.push("out vec4 vColor;"),"points"===r.primitiveName&&h.push("uniform float pointSize;");"spherical"!==o&&"cylindrical"!==o||(h.push("void billboard(inout mat4 mat) {"),h.push("   mat[0][0] = 1.0;"),h.push("   mat[0][1] = 0.0;"),h.push("   mat[0][2] = 0.0;"),"spherical"===o&&(h.push("   mat[1][0] = 0.0;"),h.push("   mat[1][1] = 1.0;"),h.push("   mat[1][2] = 0.0;")),h.push("   mat[2][0] = 0.0;"),h.push("   mat[2][1] = 0.0;"),h.push("   mat[2][2] =1.0;"),h.push("}"));h.push("void main(void) {"),h.push("vec4 localPosition = vec4(position, 1.0); "),h.push("vec4 worldPosition;"),l&&h.push("localPosition = positionsDecodeMatrix * localPosition;");r.normalsBuf&&(l?h.push("vec4 localNormal = vec4(octDecode(normal.xy), 0.0); "):h.push("vec4 localNormal = vec4(normal, 0.0); "),h.push("mat4 modelNormalMatrix2 = modelNormalMatrix;"),h.push("mat4 viewNormalMatrix2 = viewNormalMatrix;"));h.push("mat4 viewMatrix2 = viewMatrix;"),h.push("mat4 modelMatrix2 = modelMatrix;"),n&&h.push("viewMatrix2[3][0] = viewMatrix2[3][1] = viewMatrix2[3][2] = 0.0;");"spherical"===o||"cylindrical"===o?(h.push("mat4 modelViewMatrix = viewMatrix2 * modelMatrix2;"),h.push("billboard(modelMatrix2);"),h.push("billboard(viewMatrix2);"),h.push("billboard(modelViewMatrix);"),r.normalsBuf&&(h.push("mat4 modelViewNormalMatrix =  viewNormalMatrix2 * modelNormalMatrix2;"),h.push("billboard(modelNormalMatrix2);"),h.push("billboard(viewNormalMatrix2);"),h.push("billboard(modelViewNormalMatrix);")),h.push("worldPosition = modelMatrix2 * localPosition;"),h.push("worldPosition.xyz = worldPosition.xyz + offset;"),h.push("vec4 viewPosition = modelViewMatrix * localPosition;")):(h.push("worldPosition = modelMatrix2 * localPosition;"),h.push("worldPosition.xyz = worldPosition.xyz + offset;"),h.push("vec4 viewPosition  = viewMatrix2 * worldPosition; "));r.normalsBuf&&h.push("vec3 viewNormal = normalize((viewNormalMatrix2 * modelNormalMatrix2 * localNormal).xyz);");if(h.push("vec3 reflectedColor = vec3(0.0, 0.0, 0.0);"),h.push("vec3 viewLightDir = vec3(0.0, 0.0, -1.0);"),h.push("float lambertian = 1.0;"),r.normalsBuf)for(let e=0,t=i.lights.length;e<t;e++){const t=i.lights[e];if("ambient"!==t.type){if("dir"===t.type)"view"===t.space?h.push("viewLightDir = normalize(lightDir"+e+");"):h.push("viewLightDir = normalize((viewMatrix2 * vec4(lightDir"+e+", 0.0)).xyz);");else if("point"===t.type)"view"===t.space?h.push("viewLightDir = -normalize(lightPos"+e+" - viewPosition.xyz);"):h.push("viewLightDir = -normalize((viewMatrix2 * vec4(lightPos"+e+", 0.0)).xyz);");else{if("spot"!==t.type)continue;"view"===t.space?h.push("viewLightDir = normalize(lightDir"+e+");"):h.push("viewLightDir = normalize((viewMatrix2 * vec4(lightDir"+e+", 0.0)).xyz);")}h.push("lambertian = max(dot(-viewNormal, viewLightDir), 0.0);"),h.push("reflectedColor += lambertian * (lightColor"+e+".rgb * lightColor"+e+".a);")}}h.push("vColor = vec4((lightAmbient.rgb * lightAmbient.a * materialColor.rgb) + materialEmissive.rgb + (reflectedColor * materialColor.rgb), materialColor.a) * colorize;"),a&&h.push("vWorldPosition = worldPosition;");"points"===r.primitiveName&&h.push("gl_PointSize = pointSize;");h.push("vec4 clipPos = projMatrix * viewPosition;"),t.logarithmicDepthBufferEnabled&&(h.push("vFragDepth = 1.0 + clipPos.w;"),h.push("isPerspective = float (isPerspectiveMatrix(projMatrix));"));return h.push("gl_Position = clipPos;"),h.push("}"),h}(e),this.fragment=function(e){const t=e.scene,s=t._sectionPlanesState;e._material._state;const i=e._geometry._state,r=s.sectionPlanes.length>0,o=t.gammaOutput,n=[];n.push("#version 300 es"),n.push("// Lambertian drawing fragment shader"),n.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),n.push("precision highp float;"),n.push("precision highp int;"),n.push("#else"),n.push("precision mediump float;"),n.push("precision mediump int;"),n.push("#endif"),t.logarithmicDepthBufferEnabled&&(n.push("in float isPerspective;"),n.push("uniform float logDepthBufFC;"),n.push("in float vFragDepth;"));if(r){n.push("in vec4 vWorldPosition;"),n.push("uniform bool clippable;");for(let e=0,t=s.sectionPlanes.length;e<t;e++)n.push("uniform bool sectionPlaneActive"+e+";"),n.push("uniform vec3 sectionPlanePos"+e+";"),n.push("uniform vec3 sectionPlaneDir"+e+";")}n.push("in vec4 vColor;"),o&&(n.push("uniform float gammaFactor;"),n.push("    vec4 linearToGamma( in vec4 value, in float gammaFactor ) {"),n.push("    return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );"),n.push("}"));if(n.push("out vec4 outColor;"),n.push("void main(void) {"),r){n.push("if (clippable) {"),n.push("  float dist = 0.0;");for(let e=0,t=s.sectionPlanes.length;e<t;e++)n.push("if (sectionPlaneActive"+e+") {"),n.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),n.push("}");n.push("  if (dist > 0.0) { discard; }"),n.push("}")}"points"===i.primitiveName&&(n.push("vec2 cxy = 2.0 * gl_PointCoord - 1.0;"),n.push("float r = dot(cxy, cxy);"),n.push("if (r > 1.0) {"),n.push("   discard;"),n.push("}"));t.logarithmicDepthBufferEnabled&&n.push("gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;");o?n.push("outColor = linearToGamma(vColor, gammaFactor);"):n.push("outColor = vColor;");return n.push("}"),n}(e)):(this.vertex=function(e){const t=e.scene;e._material;const s=e._state,i=t._sectionPlanesState,r=e._geometry._state,o=t._lightsState;let n;const a=s.billboard,l=s.background,h=s.stationary,c=function(e){if(!e._geometry._state.uvBuf)return!1;const t=e._material;return!!(t._ambientMap||t._occlusionMap||t._baseColorMap||t._diffuseMap||t._alphaMap||t._specularMap||t._glossinessMap||t._specularGlossinessMap||t._emissiveMap||t._metallicMap||t._roughnessMap||t._metallicRoughnessMap||t._reflectivityMap||t._normalMap)}(e),u=lr(e),A=i.sectionPlanes.length>0,p=ar(e),d=!!r.compressGeometry,f=[];f.push("#version 300 es"),f.push("// Drawing vertex shader"),f.push("in  vec3 position;"),d&&f.push("uniform mat4 positionsDecodeMatrix;");f.push("uniform  mat4 modelMatrix;"),f.push("uniform  mat4 viewMatrix;"),f.push("uniform  mat4 projMatrix;"),f.push("out  vec3 vViewPosition;"),f.push("uniform  vec3 offset;"),A&&f.push("out vec4 vWorldPosition;");t.logarithmicDepthBufferEnabled&&(f.push("uniform float logDepthBufFC;"),f.push("out float vFragDepth;"),f.push("bool isPerspectiveMatrix(mat4 m) {"),f.push("    return (m[2][3] == - 1.0);"),f.push("}"),f.push("out float isPerspective;"));o.lightMaps.length>0&&f.push("out    vec3 vWorldNormal;");if(u){f.push("in  vec3 normal;"),f.push("uniform    mat4 modelNormalMatrix;"),f.push("uniform    mat4 viewNormalMatrix;"),f.push("out    vec3 vViewNormal;");for(let e=0,t=o.lights.length;e<t;e++)n=o.lights[e],"ambient"!==n.type&&("dir"===n.type&&f.push("uniform vec3 lightDir"+e+";"),"point"===n.type&&f.push("uniform vec3 lightPos"+e+";"),"spot"===n.type&&(f.push("uniform vec3 lightPos"+e+";"),f.push("uniform vec3 lightDir"+e+";")),"dir"===n.type&&"view"===n.space||f.push("out vec4 vViewLightReverseDirAndDist"+e+";"));d&&(f.push("vec3 octDecode(vec2 oct) {"),f.push("    vec3 v = vec3(oct.xy, 1.0 - abs(oct.x) - abs(oct.y));"),f.push("    if (v.z < 0.0) {"),f.push("        v.xy = (1.0 - abs(v.yx)) * vec2(v.x >= 0.0 ? 1.0 : -1.0, v.y >= 0.0 ? 1.0 : -1.0);"),f.push("    }"),f.push("    return normalize(v);"),f.push("}"))}c&&(f.push("in vec2 uv;"),f.push("out vec2 vUV;"),d&&f.push("uniform mat3 uvDecodeMatrix;"));r.colors&&(f.push("in vec4 color;"),f.push("out vec4 vColor;"));"points"===r.primitiveName&&f.push("uniform float pointSize;");"spherical"!==a&&"cylindrical"!==a||(f.push("void billboard(inout mat4 mat) {"),f.push("   mat[0][0] = 1.0;"),f.push("   mat[0][1] = 0.0;"),f.push("   mat[0][2] = 0.0;"),"spherical"===a&&(f.push("   mat[1][0] = 0.0;"),f.push("   mat[1][1] = 1.0;"),f.push("   mat[1][2] = 0.0;")),f.push("   mat[2][0] = 0.0;"),f.push("   mat[2][1] = 0.0;"),f.push("   mat[2][2] =1.0;"),f.push("}"));if(p){f.push("const mat4 texUnitConverter = mat4(0.5, 0.0, 0.0, 0.0, 0.0, 0.5, 0.0, 0.0, 0.0, 0.0, 0.5, 0.0, 0.5, 0.5, 0.5, 1.0);");for(let e=0,t=o.lights.length;e<t;e++)o.lights[e].castsShadow&&(f.push("uniform mat4 shadowViewMatrix"+e+";"),f.push("uniform mat4 shadowProjMatrix"+e+";"),f.push("out vec4 vShadowPosFromLight"+e+";"))}f.push("void main(void) {"),f.push("vec4 localPosition = vec4(position, 1.0); "),f.push("vec4 worldPosition;"),d&&f.push("localPosition = positionsDecodeMatrix * localPosition;");u&&(d?f.push("vec4 localNormal = vec4(octDecode(normal.xy), 0.0); "):f.push("vec4 localNormal = vec4(normal, 0.0); "),f.push("mat4 modelNormalMatrix2    = modelNormalMatrix;"),f.push("mat4 viewNormalMatrix2     = viewNormalMatrix;"));f.push("mat4 viewMatrix2           = viewMatrix;"),f.push("mat4 modelMatrix2          = modelMatrix;"),h?f.push("viewMatrix2[3][0] = viewMatrix2[3][1] = viewMatrix2[3][2] = 0.0;"):l&&f.push("viewMatrix2[3] = vec4(0.0, 0.0, 0.0 ,1.0);");"spherical"===a||"cylindrical"===a?(f.push("mat4 modelViewMatrix = viewMatrix2 * modelMatrix2;"),f.push("billboard(modelMatrix2);"),f.push("billboard(viewMatrix2);"),f.push("billboard(modelViewMatrix);"),u&&(f.push("mat4 modelViewNormalMatrix =  viewNormalMatrix2 * modelNormalMatrix2;"),f.push("billboard(modelNormalMatrix2);"),f.push("billboard(viewNormalMatrix2);"),f.push("billboard(modelViewNormalMatrix);")),f.push("worldPosition = modelMatrix2 * localPosition;"),f.push("worldPosition.xyz = worldPosition.xyz + offset;"),f.push("vec4 viewPosition = modelViewMatrix * localPosition;")):(f.push("worldPosition = modelMatrix2 * localPosition;"),f.push("worldPosition.xyz = worldPosition.xyz + offset;"),f.push("vec4 viewPosition  = viewMatrix2 * worldPosition; "));if(u){f.push("vec3 worldNormal = (modelNormalMatrix2 * localNormal).xyz; "),o.lightMaps.length>0&&f.push("vWorldNormal = worldNormal;"),f.push("vViewNormal = normalize((viewNormalMatrix2 * vec4(worldNormal, 1.0)).xyz);"),f.push("vec3 tmpVec3;"),f.push("float lightDist;");for(let e=0,t=o.lights.length;e<t;e++)n=o.lights[e],"ambient"!==n.type&&("dir"===n.type&&"world"===n.space&&(f.push("tmpVec3 = vec3(viewMatrix2 * vec4(lightDir"+e+", 0.0) ).xyz;"),f.push("vViewLightReverseDirAndDist"+e+" = vec4(-tmpVec3, 0.0);")),"point"===n.type&&("world"===n.space?(f.push("tmpVec3 = (viewMatrix2 * vec4(lightPos"+e+", 1.0)).xyz - viewPosition.xyz;"),f.push("lightDist = abs(length(tmpVec3));")):(f.push("tmpVec3 = lightPos"+e+".xyz - viewPosition.xyz;"),f.push("lightDist = abs(length(tmpVec3));")),f.push("vViewLightReverseDirAndDist"+e+" = vec4(tmpVec3, lightDist);")))}c&&(d?f.push("vUV = (uvDecodeMatrix * vec3(uv, 1.0)).xy;"):f.push("vUV = uv;"));r.colors&&f.push("vColor = color;");"points"===r.primitiveName&&f.push("gl_PointSize = pointSize;");A&&f.push("vWorldPosition = worldPosition;");f.push("   vViewPosition = viewPosition.xyz;"),f.push("vec4 clipPos = projMatrix * viewPosition;"),t.logarithmicDepthBufferEnabled&&(f.push("vFragDepth = 1.0 + clipPos.w;"),f.push("isPerspective = float (isPerspectiveMatrix(projMatrix));"));l&&f.push("clipPos.z = clipPos.w;");if(f.push("gl_Position = clipPos;"),p){f.push("const mat4 texUnitConverter = mat4(0.5, 0.0, 0.0, 0.0, 0.0, 0.5, 0.0, 0.0, 0.0, 0.0, 0.5, 0.0, 0.5, 0.5, 0.5, 1.0);"),f.push("vec4 tempx; ");for(let e=0,t=o.lights.length;e<t;e++)o.lights[e].castsShadow&&f.push("vShadowPosFromLight"+e+" = texUnitConverter * shadowProjMatrix"+e+" * (shadowViewMatrix"+e+" * worldPosition); ")}return f.push("}"),f}(e),this.fragment=function(e){const t=e.scene;t.canvas.gl;const s=e._material,i=e._geometry._state,r=e.scene._sectionPlanesState,o=e.scene._lightsState,n=e._material._state,a=r.sectionPlanes.length>0,l=lr(e),h=i.uvBuf,c="PhongMaterial"===n.type,u="MetallicMaterial"===n.type,A="SpecularMaterial"===n.type,p=ar(e);t.gammaInput;const d=t.gammaOutput,f=[];f.push("#version 300 es"),f.push("// Drawing fragment shader"),f.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),f.push("precision highp float;"),f.push("precision highp int;"),f.push("#else"),f.push("precision mediump float;"),f.push("precision mediump int;"),f.push("#endif"),t.logarithmicDepthBufferEnabled&&(f.push("in float isPerspective;"),f.push("uniform float logDepthBufFC;"),f.push("in float vFragDepth;"));p&&(f.push("float unpackDepth (vec4 color) {"),f.push("  const vec4 bitShift = vec4(1.0, 1.0/256.0, 1.0/(256.0 * 256.0), 1.0/(256.0*256.0*256.0));"),f.push("  return dot(color, bitShift);"),f.push("}"));f.push("uniform float gammaFactor;"),f.push("vec4 linearToLinear( in vec4 value ) {"),f.push("  return value;"),f.push("}"),f.push("vec4 sRGBToLinear( in vec4 value ) {"),f.push("  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );"),f.push("}"),f.push("vec4 gammaToLinear( in vec4 value) {"),f.push("  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );"),f.push("}"),d&&(f.push("vec4 linearToGamma( in vec4 value, in float gammaFactor ) {"),f.push("  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );"),f.push("}"));if(a){f.push("in vec4 vWorldPosition;"),f.push("uniform bool clippable;");for(var m=0;m<r.sectionPlanes.length;m++)f.push("uniform bool sectionPlaneActive"+m+";"),f.push("uniform vec3 sectionPlanePos"+m+";"),f.push("uniform vec3 sectionPlaneDir"+m+";")}l&&(o.lightMaps.length>0&&(f.push("uniform samplerCube lightMap;"),f.push("uniform mat4 viewNormalMatrix;")),o.reflectionMaps.length>0&&f.push("uniform samplerCube reflectionMap;"),(o.lightMaps.length>0||o.reflectionMaps.length>0)&&f.push("uniform mat4 viewMatrix;"),f.push("#define PI 3.14159265359"),f.push("#define RECIPROCAL_PI 0.31830988618"),f.push("#define RECIPROCAL_PI2 0.15915494"),f.push("#define EPSILON 1e-6"),f.push("#define saturate(a) clamp( a, 0.0, 1.0 )"),f.push("vec3 inverseTransformDirection(in vec3 dir, in mat4 matrix) {"),f.push("   return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );"),f.push("}"),f.push("struct IncidentLight {"),f.push("   vec3 color;"),f.push("   vec3 direction;"),f.push("};"),f.push("struct ReflectedLight {"),f.push("   vec3 diffuse;"),f.push("   vec3 specular;"),f.push("};"),f.push("struct Geometry {"),f.push("   vec3 position;"),f.push("   vec3 viewNormal;"),f.push("   vec3 worldNormal;"),f.push("   vec3 viewEyeDir;"),f.push("};"),f.push("struct Material {"),f.push("   vec3    diffuseColor;"),f.push("   float   specularRoughness;"),f.push("   vec3    specularColor;"),f.push("   float   shine;"),f.push("};"),c&&((o.lightMaps.length>0||o.reflectionMaps.length>0)&&(f.push("void computePhongLightMapping(const in Geometry geometry, const in Material material, inout ReflectedLight reflectedLight) {"),o.lightMaps.length>0&&(f.push("   vec3 irradiance = "+nr[o.lightMaps[0].encoding]+"(texture(lightMap, geometry.worldNormal)).rgb;"),f.push("   irradiance *= PI;"),f.push("   vec3 diffuseBRDFContrib = (RECIPROCAL_PI * material.diffuseColor);"),f.push("   reflectedLight.diffuse += irradiance * diffuseBRDFContrib;")),o.reflectionMaps.length>0&&(f.push("   vec3 reflectVec             = reflect(-geometry.viewEyeDir, geometry.viewNormal);"),f.push("   vec3 radiance               = texture(reflectionMap, reflectVec).rgb * 0.2;"),f.push("   radiance *= PI;"),f.push("   reflectedLight.specular     += radiance;")),f.push("}")),f.push("void computePhongLighting(const in IncidentLight directLight, const in Geometry geometry, const in Material material, inout ReflectedLight reflectedLight) {"),f.push("   float dotNL     = saturate(dot(geometry.viewNormal, directLight.direction));"),f.push("   vec3 irradiance = dotNL * directLight.color * PI;"),f.push("   reflectedLight.diffuse  += irradiance * (RECIPROCAL_PI * material.diffuseColor);"),f.push("   reflectedLight.specular += directLight.color * material.specularColor * pow(max(dot(reflect(-directLight.direction, -geometry.viewNormal), geometry.viewEyeDir), 0.0), material.shine);"),f.push("}")),(u||A)&&(f.push("float GGXRoughnessToBlinnExponent(const in float ggxRoughness) {"),f.push("   float r = ggxRoughness + 0.0001;"),f.push("   return (2.0 / (r * r) - 2.0);"),f.push("}"),f.push("float getSpecularMIPLevel(const in float blinnShininessExponent, const in int maxMIPLevel) {"),f.push("   float maxMIPLevelScalar = float( maxMIPLevel );"),f.push("   float desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( ( blinnShininessExponent * blinnShininessExponent ) + 1.0 );"),f.push("   return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );"),f.push("}"),o.reflectionMaps.length>0&&(f.push("vec3 getLightProbeIndirectRadiance(const in vec3 reflectVec, const in float blinnShininessExponent, const in int maxMIPLevel) {"),f.push("   float mipLevel = 0.5 * getSpecularMIPLevel(blinnShininessExponent, maxMIPLevel);"),f.push("   vec3 envMapColor = "+nr[o.reflectionMaps[0].encoding]+"(texture(reflectionMap, reflectVec, mipLevel)).rgb;"),f.push("  return envMapColor;"),f.push("}")),f.push("vec3 F_Schlick(const in vec3 specularColor, const in float dotLH) {"),f.push("   float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );"),f.push("   return ( 1.0 - specularColor ) * fresnel + specularColor;"),f.push("}"),f.push("float G_GGX_Smith(const in float alpha, const in float dotNL, const in float dotNV) {"),f.push("   float a2 = ( alpha * alpha );"),f.push("   float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * ( dotNL * dotNL ) );"),f.push("   float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * ( dotNV * dotNV ) );"),f.push("   return 1.0 / ( gl * gv );"),f.push("}"),f.push("float G_GGX_SmithCorrelated(const in float alpha, const in float dotNL, const in float dotNV) {"),f.push("   float a2 = ( alpha * alpha );"),f.push("   float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * ( dotNV * dotNV ) );"),f.push("   float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * ( dotNL * dotNL ) );"),f.push("   return 0.5 / max( gv + gl, EPSILON );"),f.push("}"),f.push("float D_GGX(const in float alpha, const in float dotNH) {"),f.push("   float a2 = ( alpha * alpha );"),f.push("   float denom = ( dotNH * dotNH) * ( a2 - 1.0 ) + 1.0;"),f.push("   return RECIPROCAL_PI * a2 / ( denom * denom);"),f.push("}"),f.push("vec3 BRDF_Specular_GGX(const in IncidentLight incidentLight, const in Geometry geometry, const in vec3 specularColor, const in float roughness) {"),f.push("   float alpha = ( roughness * roughness );"),f.push("   vec3 halfDir = normalize( incidentLight.direction + geometry.viewEyeDir );"),f.push("   float dotNL = saturate( dot( geometry.viewNormal, incidentLight.direction ) );"),f.push("   float dotNV = saturate( dot( geometry.viewNormal, geometry.viewEyeDir ) );"),f.push("   float dotNH = saturate( dot( geometry.viewNormal, halfDir ) );"),f.push("   float dotLH = saturate( dot( incidentLight.direction, halfDir ) );"),f.push("   vec3  F = F_Schlick( specularColor, dotLH );"),f.push("   float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );"),f.push("   float D = D_GGX( alpha, dotNH );"),f.push("   return F * (G * D);"),f.push("}"),f.push("vec3 BRDF_Specular_GGX_Environment(const in Geometry geometry, const in vec3 specularColor, const in float roughness) {"),f.push("   float dotNV = saturate(dot(geometry.viewNormal, geometry.viewEyeDir));"),f.push("   const vec4 c0 = vec4( -1, -0.0275, -0.572,  0.022);"),f.push("   const vec4 c1 = vec4(  1,  0.0425,   1.04, -0.04);"),f.push("   vec4 r = roughness * c0 + c1;"),f.push("   float a004 = min(r.x * r.x, exp2(-9.28 * dotNV)) * r.x + r.y;"),f.push("   vec2 AB    = vec2(-1.04, 1.04) * a004 + r.zw;"),f.push("   return specularColor * AB.x + AB.y;"),f.push("}"),(o.lightMaps.length>0||o.reflectionMaps.length>0)&&(f.push("void computePBRLightMapping(const in Geometry geometry, const in Material material, inout ReflectedLight reflectedLight) {"),o.lightMaps.length>0&&(f.push("   vec3 irradiance = sRGBToLinear(texture(lightMap, geometry.worldNormal)).rgb;"),f.push("   irradiance *= PI;"),f.push("   vec3 diffuseBRDFContrib = (RECIPROCAL_PI * material.diffuseColor);"),f.push("   reflectedLight.diffuse += irradiance * diffuseBRDFContrib;")),o.reflectionMaps.length>0&&(f.push("   vec3 reflectVec             = reflect(-geometry.viewEyeDir, geometry.viewNormal);"),f.push("   reflectVec                  = inverseTransformDirection(reflectVec, viewMatrix);"),f.push("   float blinnExpFromRoughness = GGXRoughnessToBlinnExponent(material.specularRoughness);"),f.push("   vec3 radiance               = getLightProbeIndirectRadiance(reflectVec, blinnExpFromRoughness, 8);"),f.push("   vec3 specularBRDFContrib    = BRDF_Specular_GGX_Environment(geometry, material.specularColor, material.specularRoughness);"),f.push("   reflectedLight.specular     += radiance * specularBRDFContrib;")),f.push("}")),f.push("void computePBRLighting(const in IncidentLight incidentLight, const in Geometry geometry, const in Material material, inout ReflectedLight reflectedLight) {"),f.push("   float dotNL     = saturate(dot(geometry.viewNormal, incidentLight.direction));"),f.push("   vec3 irradiance = dotNL * incidentLight.color * PI;"),f.push("   reflectedLight.diffuse  += irradiance * (RECIPROCAL_PI * material.diffuseColor);"),f.push("   reflectedLight.specular += irradiance * BRDF_Specular_GGX(incidentLight, geometry, material.specularColor, material.specularRoughness);"),f.push("}")));f.push("in vec3 vViewPosition;"),i.colors&&f.push("in vec4 vColor;");h&&(l&&s._normalMap||s._ambientMap||s._baseColorMap||s._diffuseMap||s._emissiveMap||s._metallicMap||s._roughnessMap||s._metallicRoughnessMap||s._specularMap||s._glossinessMap||s._specularGlossinessMap||s._occlusionMap||s._alphaMap)&&f.push("in vec2 vUV;");l&&(o.lightMaps.length>0&&f.push("in vec3 vWorldNormal;"),f.push("in vec3 vViewNormal;"));n.ambient&&f.push("uniform vec3 materialAmbient;");n.baseColor&&f.push("uniform vec3 materialBaseColor;");void 0!==n.alpha&&null!==n.alpha&&f.push("uniform vec4 materialAlphaModeCutoff;");n.emissive&&f.push("uniform vec3 materialEmissive;");n.diffuse&&f.push("uniform vec3 materialDiffuse;");void 0!==n.glossiness&&null!==n.glossiness&&f.push("uniform float materialGlossiness;");void 0!==n.shininess&&null!==n.shininess&&f.push("uniform float materialShininess;");n.specular&&f.push("uniform vec3 materialSpecular;");void 0!==n.metallic&&null!==n.metallic&&f.push("uniform float materialMetallic;");void 0!==n.roughness&&null!==n.roughness&&f.push("uniform float materialRoughness;");void 0!==n.specularF0&&null!==n.specularF0&&f.push("uniform float materialSpecularF0;");h&&s._ambientMap&&(f.push("uniform sampler2D ambientMap;"),s._ambientMap._state.matrix&&f.push("uniform mat4 ambientMapMatrix;"));h&&s._baseColorMap&&(f.push("uniform sampler2D baseColorMap;"),s._baseColorMap._state.matrix&&f.push("uniform mat4 baseColorMapMatrix;"));h&&s._diffuseMap&&(f.push("uniform sampler2D diffuseMap;"),s._diffuseMap._state.matrix&&f.push("uniform mat4 diffuseMapMatrix;"));h&&s._emissiveMap&&(f.push("uniform sampler2D emissiveMap;"),s._emissiveMap._state.matrix&&f.push("uniform mat4 emissiveMapMatrix;"));l&&h&&s._metallicMap&&(f.push("uniform sampler2D metallicMap;"),s._metallicMap._state.matrix&&f.push("uniform mat4 metallicMapMatrix;"));l&&h&&s._roughnessMap&&(f.push("uniform sampler2D roughnessMap;"),s._roughnessMap._state.matrix&&f.push("uniform mat4 roughnessMapMatrix;"));l&&h&&s._metallicRoughnessMap&&(f.push("uniform sampler2D metallicRoughnessMap;"),s._metallicRoughnessMap._state.matrix&&f.push("uniform mat4 metallicRoughnessMapMatrix;"));l&&s._normalMap&&(f.push("uniform sampler2D normalMap;"),s._normalMap._state.matrix&&f.push("uniform mat4 normalMapMatrix;"),f.push("vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {"),f.push("      vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );"),f.push("      vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );"),f.push("      vec2 st0 = dFdx( uv.st );"),f.push("      vec2 st1 = dFdy( uv.st );"),f.push("      vec3 S = normalize( q0 * st1.t - q1 * st0.t );"),f.push("      vec3 T = normalize( -q0 * st1.s + q1 * st0.s );"),f.push("      vec3 N = normalize( surf_norm );"),f.push("      vec3 mapN = texture( normalMap, uv ).xyz * 2.0 - 1.0;"),f.push("      mat3 tsn = mat3( S, T, N );"),f.push("      return normalize( tsn * mapN );"),f.push("}"));h&&s._occlusionMap&&(f.push("uniform sampler2D occlusionMap;"),s._occlusionMap._state.matrix&&f.push("uniform mat4 occlusionMapMatrix;"));h&&s._alphaMap&&(f.push("uniform sampler2D alphaMap;"),s._alphaMap._state.matrix&&f.push("uniform mat4 alphaMapMatrix;"));l&&h&&s._specularMap&&(f.push("uniform sampler2D specularMap;"),s._specularMap._state.matrix&&f.push("uniform mat4 specularMapMatrix;"));l&&h&&s._glossinessMap&&(f.push("uniform sampler2D glossinessMap;"),s._glossinessMap._state.matrix&&f.push("uniform mat4 glossinessMapMatrix;"));l&&h&&s._specularGlossinessMap&&(f.push("uniform sampler2D materialSpecularGlossinessMap;"),s._specularGlossinessMap._state.matrix&&f.push("uniform mat4 materialSpecularGlossinessMapMatrix;"));l&&(s._diffuseFresnel||s._specularFresnel||s._alphaFresnel||s._emissiveFresnel||s._reflectivityFresnel)&&(f.push("float fresnel(vec3 eyeDir, vec3 normal, float edgeBias, float centerBias, float power) {"),f.push("    float fr = abs(dot(eyeDir, normal));"),f.push("    float finalFr = clamp((fr - edgeBias) / (centerBias - edgeBias), 0.0, 1.0);"),f.push("    return pow(finalFr, power);"),f.push("}"),s._diffuseFresnel&&(f.push("uniform float  diffuseFresnelCenterBias;"),f.push("uniform float  diffuseFresnelEdgeBias;"),f.push("uniform float  diffuseFresnelPower;"),f.push("uniform vec3   diffuseFresnelCenterColor;"),f.push("uniform vec3   diffuseFresnelEdgeColor;")),s._specularFresnel&&(f.push("uniform float  specularFresnelCenterBias;"),f.push("uniform float  specularFresnelEdgeBias;"),f.push("uniform float  specularFresnelPower;"),f.push("uniform vec3   specularFresnelCenterColor;"),f.push("uniform vec3   specularFresnelEdgeColor;")),s._alphaFresnel&&(f.push("uniform float  alphaFresnelCenterBias;"),f.push("uniform float  alphaFresnelEdgeBias;"),f.push("uniform float  alphaFresnelPower;"),f.push("uniform vec3   alphaFresnelCenterColor;"),f.push("uniform vec3   alphaFresnelEdgeColor;")),s._reflectivityFresnel&&(f.push("uniform float  materialSpecularF0FresnelCenterBias;"),f.push("uniform float  materialSpecularF0FresnelEdgeBias;"),f.push("uniform float  materialSpecularF0FresnelPower;"),f.push("uniform vec3   materialSpecularF0FresnelCenterColor;"),f.push("uniform vec3   materialSpecularF0FresnelEdgeColor;")),s._emissiveFresnel&&(f.push("uniform float  emissiveFresnelCenterBias;"),f.push("uniform float  emissiveFresnelEdgeBias;"),f.push("uniform float  emissiveFresnelPower;"),f.push("uniform vec3   emissiveFresnelCenterColor;"),f.push("uniform vec3   emissiveFresnelEdgeColor;")));if(f.push("uniform vec4   lightAmbient;"),l)for(let e=0,t=o.lights.length;e<t;e++){const t=o.lights[e];"ambient"!==t.type&&(f.push("uniform vec4 lightColor"+e+";"),"point"===t.type&&f.push("uniform vec3 lightAttenuation"+e+";"),"dir"===t.type&&"view"===t.space&&f.push("uniform vec3 lightDir"+e+";"),"point"===t.type&&"view"===t.space?f.push("uniform vec3 lightPos"+e+";"):f.push("in vec4 vViewLightReverseDirAndDist"+e+";"))}if(p)for(let e=0,t=o.lights.length;e<t;e++)o.lights[e].castsShadow&&(f.push("in vec4 vShadowPosFromLight"+e+";"),f.push("uniform sampler2D shadowMap"+e+";"));if(f.push("uniform vec4 colorize;"),f.push("out vec4 outColor;"),f.push("void main(void) {"),a){f.push("if (clippable) {"),f.push("  float dist = 0.0;");for(m=0;m<r.sectionPlanes.length;m++)f.push("if (sectionPlaneActive"+m+") {"),f.push("   dist += clamp(dot(-sectionPlaneDir"+m+".xyz, vWorldPosition.xyz - sectionPlanePos"+m+".xyz), 0.0, 1000.0);"),f.push("}");f.push("  if (dist > 0.0) { discard; }"),f.push("}")}"points"===i.primitiveName&&(f.push("vec2 cxy = 2.0 * gl_PointCoord - 1.0;"),f.push("float r = dot(cxy, cxy);"),f.push("if (r > 1.0) {"),f.push("   discard;"),f.push("}"));f.push("float occlusion = 1.0;"),n.ambient?f.push("vec3 ambientColor = materialAmbient;"):f.push("vec3 ambientColor = vec3(1.0, 1.0, 1.0);");n.diffuse?f.push("vec3 diffuseColor = materialDiffuse;"):n.baseColor?f.push("vec3 diffuseColor = materialBaseColor;"):f.push("vec3 diffuseColor = vec3(1.0, 1.0, 1.0);");i.colors&&f.push("diffuseColor *= vColor.rgb;");n.emissive?f.push("vec3 emissiveColor = materialEmissive;"):f.push("vec3  emissiveColor = vec3(0.0, 0.0, 0.0);");n.specular?f.push("vec3 specular = materialSpecular;"):f.push("vec3 specular = vec3(1.0, 1.0, 1.0);");void 0!==n.alpha?f.push("float alpha = materialAlphaModeCutoff[0];"):f.push("float alpha = 1.0;");i.colors&&f.push("alpha *= vColor.a;");void 0!==n.glossiness?f.push("float glossiness = materialGlossiness;"):f.push("float glossiness = 1.0;");void 0!==n.metallic?f.push("float metallic = materialMetallic;"):f.push("float metallic = 1.0;");void 0!==n.roughness?f.push("float roughness = materialRoughness;"):f.push("float roughness = 1.0;");void 0!==n.specularF0?f.push("float specularF0 = materialSpecularF0;"):f.push("float specularF0 = 1.0;");h&&(l&&s._normalMap||s._ambientMap||s._baseColorMap||s._diffuseMap||s._occlusionMap||s._emissiveMap||s._metallicMap||s._roughnessMap||s._metallicRoughnessMap||s._specularMap||s._glossinessMap||s._specularGlossinessMap||s._alphaMap)&&(f.push("vec4 texturePos = vec4(vUV.s, vUV.t, 1.0, 1.0);"),f.push("vec2 textureCoord;"));h&&s._ambientMap&&(s._ambientMap._state.matrix?f.push("textureCoord = (ambientMapMatrix * texturePos).xy;"):f.push("textureCoord = texturePos.xy;"),f.push("vec4 ambientTexel = texture(ambientMap, textureCoord).rgb;"),f.push("ambientTexel = "+nr[s._ambientMap._state.encoding]+"(ambientTexel);"),f.push("ambientColor *= ambientTexel.rgb;"));h&&s._diffuseMap&&(s._diffuseMap._state.matrix?f.push("textureCoord = (diffuseMapMatrix * texturePos).xy;"):f.push("textureCoord = texturePos.xy;"),f.push("vec4 diffuseTexel = texture(diffuseMap, textureCoord);"),f.push("diffuseTexel = "+nr[s._diffuseMap._state.encoding]+"(diffuseTexel);"),f.push("diffuseColor *= diffuseTexel.rgb;"),f.push("alpha *= diffuseTexel.a;"));h&&s._baseColorMap&&(s._baseColorMap._state.matrix?f.push("textureCoord = (baseColorMapMatrix * texturePos).xy;"):f.push("textureCoord = texturePos.xy;"),f.push("vec4 baseColorTexel = texture(baseColorMap, textureCoord);"),f.push("baseColorTexel = "+nr[s._baseColorMap._state.encoding]+"(baseColorTexel);"),f.push("diffuseColor *= baseColorTexel.rgb;"),f.push("alpha *= baseColorTexel.a;"));h&&s._emissiveMap&&(s._emissiveMap._state.matrix?f.push("textureCoord = (emissiveMapMatrix * texturePos).xy;"):f.push("textureCoord = texturePos.xy;"),f.push("vec4 emissiveTexel = texture(emissiveMap, textureCoord);"),f.push("emissiveTexel = "+nr[s._emissiveMap._state.encoding]+"(emissiveTexel);"),f.push("emissiveColor = emissiveTexel.rgb;"));h&&s._alphaMap&&(s._alphaMap._state.matrix?f.push("textureCoord = (alphaMapMatrix * texturePos).xy;"):f.push("textureCoord = texturePos.xy;"),f.push("alpha *= texture(alphaMap, textureCoord).r;"));h&&s._occlusionMap&&(s._occlusionMap._state.matrix?f.push("textureCoord = (occlusionMapMatrix * texturePos).xy;"):f.push("textureCoord = texturePos.xy;"),f.push("occlusion *= texture(occlusionMap, textureCoord).r;"));if(l&&(o.lights.length>0||o.lightMaps.length>0||o.reflectionMaps.length>0)){h&&s._normalMap?(s._normalMap._state.matrix?f.push("textureCoord = (normalMapMatrix * texturePos).xy;"):f.push("textureCoord = texturePos.xy;"),f.push("vec3 viewNormal = perturbNormal2Arb( vViewPosition, normalize(vViewNormal), textureCoord );")):f.push("vec3 viewNormal = normalize(vViewNormal);"),h&&s._specularMap&&(s._specularMap._state.matrix?f.push("textureCoord = (specularMapMatrix * texturePos).xy;"):f.push("textureCoord = texturePos.xy;"),f.push("specular *= texture(specularMap, textureCoord).rgb;")),h&&s._glossinessMap&&(s._glossinessMap._state.matrix?f.push("textureCoord = (glossinessMapMatrix * texturePos).xy;"):f.push("textureCoord = texturePos.xy;"),f.push("glossiness *= texture(glossinessMap, textureCoord).r;")),h&&s._specularGlossinessMap&&(s._specularGlossinessMap._state.matrix?f.push("textureCoord = (materialSpecularGlossinessMapMatrix * texturePos).xy;"):f.push("textureCoord = texturePos.xy;"),f.push("vec4 specGlossRGB = texture(materialSpecularGlossinessMap, textureCoord).rgba;"),f.push("specular *= specGlossRGB.rgb;"),f.push("glossiness *= specGlossRGB.a;")),h&&s._metallicMap&&(s._metallicMap._state.matrix?f.push("textureCoord = (metallicMapMatrix * texturePos).xy;"):f.push("textureCoord = texturePos.xy;"),f.push("metallic *= texture(metallicMap, textureCoord).r;")),h&&s._roughnessMap&&(s._roughnessMap._state.matrix?f.push("textureCoord = (roughnessMapMatrix * texturePos).xy;"):f.push("textureCoord = texturePos.xy;"),f.push("roughness *= texture(roughnessMap, textureCoord).r;")),h&&s._metallicRoughnessMap&&(s._metallicRoughnessMap._state.matrix?f.push("textureCoord = (metallicRoughnessMapMatrix * texturePos).xy;"):f.push("textureCoord = texturePos.xy;"),f.push("vec3 metalRoughRGB = texture(metallicRoughnessMap, textureCoord).rgb;"),f.push("metallic *= metalRoughRGB.b;"),f.push("roughness *= metalRoughRGB.g;")),f.push("vec3 viewEyeDir = normalize(-vViewPosition);"),s._diffuseFresnel&&(f.push("float diffuseFresnel = fresnel(viewEyeDir, viewNormal, diffuseFresnelEdgeBias, diffuseFresnelCenterBias, diffuseFresnelPower);"),f.push("diffuseColor *= mix(diffuseFresnelEdgeColor, diffuseFresnelCenterColor, diffuseFresnel);")),s._specularFresnel&&(f.push("float specularFresnel = fresnel(viewEyeDir, viewNormal, specularFresnelEdgeBias, specularFresnelCenterBias, specularFresnelPower);"),f.push("specular *= mix(specularFresnelEdgeColor, specularFresnelCenterColor, specularFresnel);")),s._alphaFresnel&&(f.push("float alphaFresnel = fresnel(viewEyeDir, viewNormal, alphaFresnelEdgeBias, alphaFresnelCenterBias, alphaFresnelPower);"),f.push("alpha *= mix(alphaFresnelEdgeColor.r, alphaFresnelCenterColor.r, alphaFresnel);")),s._emissiveFresnel&&(f.push("float emissiveFresnel = fresnel(viewEyeDir, viewNormal, emissiveFresnelEdgeBias, emissiveFresnelCenterBias, emissiveFresnelPower);"),f.push("emissiveColor *= mix(emissiveFresnelEdgeColor, emissiveFresnelCenterColor, emissiveFresnel);")),f.push("if (materialAlphaModeCutoff[1] == 1.0 && alpha < materialAlphaModeCutoff[2]) {"),f.push("   discard;"),f.push("}"),f.push("IncidentLight  light;"),f.push("Material       material;"),f.push("Geometry       geometry;"),f.push("ReflectedLight reflectedLight = ReflectedLight(vec3(0.0,0.0,0.0), vec3(0.0,0.0,0.0));"),f.push("vec3           viewLightDir;"),c&&(f.push("material.diffuseColor      = diffuseColor;"),f.push("material.specularColor     = specular;"),f.push("material.shine             = materialShininess;")),A&&(f.push("float oneMinusSpecularStrength = 1.0 - max(max(specular.r, specular.g ),specular.b);"),f.push("material.diffuseColor      = diffuseColor * oneMinusSpecularStrength;"),f.push("material.specularRoughness = clamp( 1.0 - glossiness, 0.04, 1.0 );"),f.push("material.specularColor     = specular;")),u&&(f.push("float dielectricSpecular = 0.16 * specularF0 * specularF0;"),f.push("material.diffuseColor      = diffuseColor * (1.0 - dielectricSpecular) * (1.0 - metallic);"),f.push("material.specularRoughness = clamp(roughness, 0.04, 1.0);"),f.push("material.specularColor     = mix(vec3(dielectricSpecular), diffuseColor, metallic);")),f.push("geometry.position      = vViewPosition;"),o.lightMaps.length>0&&f.push("geometry.worldNormal   = normalize(vWorldNormal);"),f.push("geometry.viewNormal    = viewNormal;"),f.push("geometry.viewEyeDir    = viewEyeDir;"),c&&(o.lightMaps.length>0||o.reflectionMaps.length>0)&&f.push("computePhongLightMapping(geometry, material, reflectedLight);"),(A||u)&&(o.lightMaps.length>0||o.reflectionMaps.length>0)&&f.push("computePBRLightMapping(geometry, material, reflectedLight);"),f.push("float shadow = 1.0;"),f.push("float shadowAcneRemover = 0.007;"),f.push("vec3 fragmentDepth;"),f.push("float texelSize = 1.0 / 1024.0;"),f.push("float amountInLight = 0.0;"),f.push("vec3 shadowCoord;"),f.push("vec4 rgbaDepth;"),f.push("float depth;");for(let e=0,t=o.lights.length;e<t;e++){const t=o.lights[e];"ambient"!==t.type&&("dir"===t.type&&"view"===t.space?f.push("viewLightDir = -normalize(lightDir"+e+");"):"point"===t.type&&"view"===t.space?f.push("viewLightDir = normalize(lightPos"+e+" - vViewPosition);"):f.push("viewLightDir = normalize(vViewLightReverseDirAndDist"+e+".xyz);"),p&&t.castsShadow?(f.push("shadow = 0.0;"),f.push("fragmentDepth = vShadowPosFromLight"+e+".xyz;"),f.push("fragmentDepth.z -= shadowAcneRemover;"),f.push("for (int x = -3; x <= 3; x++) {"),f.push("  for (int y = -3; y <= 3; y++) {"),f.push("      float texelDepth = unpackDepth(texture(shadowMap"+e+", fragmentDepth.xy + vec2(x, y) * texelSize));"),f.push("      if (fragmentDepth.z < texelDepth) {"),f.push("          shadow += 1.0;"),f.push("      }"),f.push("  }"),f.push("}"),f.push("shadow = shadow / 9.0;"),f.push("light.color =  lightColor"+e+".rgb * (lightColor"+e+".a * shadow);")):f.push("light.color =  lightColor"+e+".rgb * (lightColor"+e+".a );"),f.push("light.direction = viewLightDir;"),c&&f.push("computePhongLighting(light, geometry, material, reflectedLight);"),(A||u)&&f.push("computePBRLighting(light, geometry, material, reflectedLight);"))}c?f.push("vec3 outgoingLight = (lightAmbient.rgb * lightAmbient.a * diffuseColor) + ((occlusion * (( reflectedLight.diffuse + reflectedLight.specular)))) + emissiveColor;"):f.push("vec3 outgoingLight = (occlusion * (reflectedLight.diffuse)) + (occlusion * reflectedLight.specular) + emissiveColor;")}else f.push("ambientColor *= (lightAmbient.rgb * lightAmbient.a);"),f.push("vec3 outgoingLight = emissiveColor + ambientColor;");f.push("vec4 fragColor = vec4(outgoingLight, alpha) * colorize;"),d&&f.push("fragColor = linearToGamma(fragColor, gammaFactor);");f.push("outColor = fragColor;"),t.logarithmicDepthBufferEnabled&&f.push("gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;");return f.push("}"),f}(e))},nr={};function ar(e){if(!e.receivesShadow)return!1;const t=e.scene._lightsState.lights;if(!t||0===t.length)return!1;for(let e=0,s=t.length;e<s;e++)if(t[e].castsShadow)return!0;return!1}function lr(e){const t=e._geometry._state.primitiveName;return!(!e._geometry._state.autoVertexNormals&&!e._geometry._state.normalsBuf||"triangles"!==t&&"triangle-strip"!==t&&"triangle-fan"!==t)}nr[3e3]="linearToLinear",nr[3001]="sRGBToLinear";const hr=p.vec3(),cr=new t({}),ur=function(e,t){this.id=cr.addItem({}),this._hash=e,this._scene=t.scene,this._useCount=0,this._shaderSource=new or(t),this._allocate(t)},Ar={};ur.get=function(e){const t=e.scene,s=[t.canvas.canvas.id,(t.gammaInput?"gi;":";")+(t.gammaOutput?"go":""),t._lightsState.getHash(),t._sectionPlanesState.getHash(),e._geometry._state.hash,e._material._state.hash,e._state.drawHash].join(";");let i=Ar[s];if(!i){if(i=new ur(s,e),i.errors)return console.log(i.errors.join("\n")),null;Ar[s]=i,d.memory.programs++}return i._useCount++,i},ur.prototype.put=function(){0==--this._useCount&&(cr.removeItem(this.id),this._program&&this._program.destroy(),delete Ar[this._hash],d.memory.programs--)},ur.prototype.webglContextRestored=function(){this._program=null},ur.prototype.drawMesh=function(e,t){this._program||this._allocate(t);const s=oe.MAX_TEXTURE_UNITS,i=t.scene,r=t._material,o=i.canvas.gl,n=this._program,a=t._state,l=t._material._state,h=t._geometry._state,c=i.camera,u=t.origin,A=a.background;if(e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,A&&o.depthFunc(o.LEQUAL),this._bindProgram(e)),o.uniformMatrix4fv(this._uViewMatrix,!1,u?e.getRTCViewMatrix(a.originHash,u):c.viewMatrix),o.uniformMatrix4fv(this._uViewNormalMatrix,!1,c.viewNormalMatrix),a.clippable){const e=i._sectionPlanesState.sectionPlanes.length;if(e>0){const s=i._sectionPlanesState.sectionPlanes,r=t.renderFlags;for(let t=0;t<e;t++){const e=this._uSectionPlanes[t];if(e){const i=r.sectionPlanesActivePerLayer[t];if(o.uniform1i(e.active,i?1:0),i){const i=s[t];o.uniform3fv(e.pos,u?W(i.dist,i.dir,u,hr):i.pos),o.uniform3fv(e.dir,i.dir)}}}}}if(l.id!==this._lastMaterialId){e.textureUnit=this._baseTextureUnit;const t=l.backfaces;e.backfaces!==t&&(t?o.disable(o.CULL_FACE):o.enable(o.CULL_FACE),e.backfaces=t);const i=l.frontface;switch(e.frontface!==i&&(i?o.frontFace(o.CCW):o.frontFace(o.CW),e.frontface=i),e.lineWidth!==l.lineWidth&&(o.lineWidth(l.lineWidth),e.lineWidth=l.lineWidth),this._uPointSize&&o.uniform1f(this._uPointSize,l.pointSize),l.type){case"LambertMaterial":this._uMaterialAmbient&&o.uniform3fv(this._uMaterialAmbient,l.ambient),this._uMaterialColor&&o.uniform4f(this._uMaterialColor,l.color[0],l.color[1],l.color[2],l.alpha),this._uMaterialEmissive&&o.uniform3fv(this._uMaterialEmissive,l.emissive);break;case"PhongMaterial":this._uMaterialShininess&&o.uniform1f(this._uMaterialShininess,l.shininess),this._uMaterialAmbient&&o.uniform3fv(this._uMaterialAmbient,l.ambient),this._uMaterialDiffuse&&o.uniform3fv(this._uMaterialDiffuse,l.diffuse),this._uMaterialSpecular&&o.uniform3fv(this._uMaterialSpecular,l.specular),this._uMaterialEmissive&&o.uniform3fv(this._uMaterialEmissive,l.emissive),this._uAlphaModeCutoff&&o.uniform4f(this._uAlphaModeCutoff,1*l.alpha,1===l.alphaMode?1:0,l.alphaCutoff,0),r._ambientMap&&r._ambientMap._state.texture&&this._uMaterialAmbientMap&&(n.bindTexture(this._uMaterialAmbientMap,r._ambientMap._state.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%s,e.bindTexture++,this._uMaterialAmbientMapMatrix&&o.uniformMatrix4fv(this._uMaterialAmbientMapMatrix,!1,r._ambientMap._state.matrix)),r._diffuseMap&&r._diffuseMap._state.texture&&this._uDiffuseMap&&(n.bindTexture(this._uDiffuseMap,r._diffuseMap._state.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%s,e.bindTexture++,this._uDiffuseMapMatrix&&o.uniformMatrix4fv(this._uDiffuseMapMatrix,!1,r._diffuseMap._state.matrix)),r._specularMap&&r._specularMap._state.texture&&this._uSpecularMap&&(n.bindTexture(this._uSpecularMap,r._specularMap._state.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%s,e.bindTexture++,this._uSpecularMapMatrix&&o.uniformMatrix4fv(this._uSpecularMapMatrix,!1,r._specularMap._state.matrix)),r._emissiveMap&&r._emissiveMap._state.texture&&this._uEmissiveMap&&(n.bindTexture(this._uEmissiveMap,r._emissiveMap._state.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%s,e.bindTexture++,this._uEmissiveMapMatrix&&o.uniformMatrix4fv(this._uEmissiveMapMatrix,!1,r._emissiveMap._state.matrix)),r._alphaMap&&r._alphaMap._state.texture&&this._uAlphaMap&&(n.bindTexture(this._uAlphaMap,r._alphaMap._state.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%s,e.bindTexture++,this._uAlphaMapMatrix&&o.uniformMatrix4fv(this._uAlphaMapMatrix,!1,r._alphaMap._state.matrix)),r._reflectivityMap&&r._reflectivityMap._state.texture&&this._uReflectivityMap&&(n.bindTexture(this._uReflectivityMap,r._reflectivityMap._state.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%s,this._uReflectivityMapMatrix&&o.uniformMatrix4fv(this._uReflectivityMapMatrix,!1,r._reflectivityMap._state.matrix)),r._normalMap&&r._normalMap._state.texture&&this._uNormalMap&&(n.bindTexture(this._uNormalMap,r._normalMap._state.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%s,e.bindTexture++,this._uNormalMapMatrix&&o.uniformMatrix4fv(this._uNormalMapMatrix,!1,r._normalMap._state.matrix)),r._occlusionMap&&r._occlusionMap._state.texture&&this._uOcclusionMap&&(n.bindTexture(this._uOcclusionMap,r._occlusionMap._state.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%s,e.bindTexture++,this._uOcclusionMapMatrix&&o.uniformMatrix4fv(this._uOcclusionMapMatrix,!1,r._occlusionMap._state.matrix)),r._diffuseFresnel&&(this._uDiffuseFresnelEdgeBias&&o.uniform1f(this._uDiffuseFresnelEdgeBias,r._diffuseFresnel.edgeBias),this._uDiffuseFresnelCenterBias&&o.uniform1f(this._uDiffuseFresnelCenterBias,r._diffuseFresnel.centerBias),this._uDiffuseFresnelEdgeColor&&o.uniform3fv(this._uDiffuseFresnelEdgeColor,r._diffuseFresnel.edgeColor),this._uDiffuseFresnelCenterColor&&o.uniform3fv(this._uDiffuseFresnelCenterColor,r._diffuseFresnel.centerColor),this._uDiffuseFresnelPower&&o.uniform1f(this._uDiffuseFresnelPower,r._diffuseFresnel.power)),r._specularFresnel&&(this._uSpecularFresnelEdgeBias&&o.uniform1f(this._uSpecularFresnelEdgeBias,r._specularFresnel.edgeBias),this._uSpecularFresnelCenterBias&&o.uniform1f(this._uSpecularFresnelCenterBias,r._specularFresnel.centerBias),this._uSpecularFresnelEdgeColor&&o.uniform3fv(this._uSpecularFresnelEdgeColor,r._specularFresnel.edgeColor),this._uSpecularFresnelCenterColor&&o.uniform3fv(this._uSpecularFresnelCenterColor,r._specularFresnel.centerColor),this._uSpecularFresnelPower&&o.uniform1f(this._uSpecularFresnelPower,r._specularFresnel.power)),r._alphaFresnel&&(this._uAlphaFresnelEdgeBias&&o.uniform1f(this._uAlphaFresnelEdgeBias,r._alphaFresnel.edgeBias),this._uAlphaFresnelCenterBias&&o.uniform1f(this._uAlphaFresnelCenterBias,r._alphaFresnel.centerBias),this._uAlphaFresnelEdgeColor&&o.uniform3fv(this._uAlphaFresnelEdgeColor,r._alphaFresnel.edgeColor),this._uAlphaFresnelCenterColor&&o.uniform3fv(this._uAlphaFresnelCenterColor,r._alphaFresnel.centerColor),this._uAlphaFresnelPower&&o.uniform1f(this._uAlphaFresnelPower,r._alphaFresnel.power)),r._reflectivityFresnel&&(this._uReflectivityFresnelEdgeBias&&o.uniform1f(this._uReflectivityFresnelEdgeBias,r._reflectivityFresnel.edgeBias),this._uReflectivityFresnelCenterBias&&o.uniform1f(this._uReflectivityFresnelCenterBias,r._reflectivityFresnel.centerBias),this._uReflectivityFresnelEdgeColor&&o.uniform3fv(this._uReflectivityFresnelEdgeColor,r._reflectivityFresnel.edgeColor),this._uReflectivityFresnelCenterColor&&o.uniform3fv(this._uReflectivityFresnelCenterColor,r._reflectivityFresnel.centerColor),this._uReflectivityFresnelPower&&o.uniform1f(this._uReflectivityFresnelPower,r._reflectivityFresnel.power)),r._emissiveFresnel&&(this._uEmissiveFresnelEdgeBias&&o.uniform1f(this._uEmissiveFresnelEdgeBias,r._emissiveFresnel.edgeBias),this._uEmissiveFresnelCenterBias&&o.uniform1f(this._uEmissiveFresnelCenterBias,r._emissiveFresnel.centerBias),this._uEmissiveFresnelEdgeColor&&o.uniform3fv(this._uEmissiveFresnelEdgeColor,r._emissiveFresnel.edgeColor),this._uEmissiveFresnelCenterColor&&o.uniform3fv(this._uEmissiveFresnelCenterColor,r._emissiveFresnel.centerColor),this._uEmissiveFresnelPower&&o.uniform1f(this._uEmissiveFresnelPower,r._emissiveFresnel.power));break;case"MetallicMaterial":this._uBaseColor&&o.uniform3fv(this._uBaseColor,l.baseColor),this._uMaterialMetallic&&o.uniform1f(this._uMaterialMetallic,l.metallic),this._uMaterialRoughness&&o.uniform1f(this._uMaterialRoughness,l.roughness),this._uMaterialSpecularF0&&o.uniform1f(this._uMaterialSpecularF0,l.specularF0),this._uMaterialEmissive&&o.uniform3fv(this._uMaterialEmissive,l.emissive),this._uAlphaModeCutoff&&o.uniform4f(this._uAlphaModeCutoff,1*l.alpha,1===l.alphaMode?1:0,l.alphaCutoff,0);const t=r._baseColorMap;t&&t._state.texture&&this._uBaseColorMap&&(n.bindTexture(this._uBaseColorMap,t._state.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%s,e.bindTexture++,this._uBaseColorMapMatrix&&o.uniformMatrix4fv(this._uBaseColorMapMatrix,!1,t._state.matrix));const i=r._metallicMap;i&&i._state.texture&&this._uMetallicMap&&(n.bindTexture(this._uMetallicMap,i._state.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%s,e.bindTexture++,this._uMetallicMapMatrix&&o.uniformMatrix4fv(this._uMetallicMapMatrix,!1,i._state.matrix));const a=r._roughnessMap;a&&a._state.texture&&this._uRoughnessMap&&(n.bindTexture(this._uRoughnessMap,a._state.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%s,e.bindTexture++,this._uRoughnessMapMatrix&&o.uniformMatrix4fv(this._uRoughnessMapMatrix,!1,a._state.matrix));const h=r._metallicRoughnessMap;h&&h._state.texture&&this._uMetallicRoughnessMap&&(n.bindTexture(this._uMetallicRoughnessMap,h._state.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%s,e.bindTexture++,this._uMetallicRoughnessMapMatrix&&o.uniformMatrix4fv(this._uMetallicRoughnessMapMatrix,!1,h._state.matrix)),(p=r._emissiveMap)&&p._state.texture&&this._uEmissiveMap&&(n.bindTexture(this._uEmissiveMap,p._state.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%s,e.bindTexture++,this._uEmissiveMapMatrix&&o.uniformMatrix4fv(this._uEmissiveMapMatrix,!1,p._state.matrix)),(d=r._occlusionMap)&&r._occlusionMap._state.texture&&this._uOcclusionMap&&(n.bindTexture(this._uOcclusionMap,d._state.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%s,e.bindTexture++,this._uOcclusionMapMatrix&&o.uniformMatrix4fv(this._uOcclusionMapMatrix,!1,d._state.matrix)),(f=r._alphaMap)&&f._state.texture&&this._uAlphaMap&&(n.bindTexture(this._uAlphaMap,f._state.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%s,e.bindTexture++,this._uAlphaMapMatrix&&o.uniformMatrix4fv(this._uAlphaMapMatrix,!1,f._state.matrix)),(m=r._normalMap)&&m._state.texture&&this._uNormalMap&&(n.bindTexture(this._uNormalMap,m._state.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%s,e.bindTexture++,this._uNormalMapMatrix&&o.uniformMatrix4fv(this._uNormalMapMatrix,!1,m._state.matrix));break;case"SpecularMaterial":this._uMaterialDiffuse&&o.uniform3fv(this._uMaterialDiffuse,l.diffuse),this._uMaterialSpecular&&o.uniform3fv(this._uMaterialSpecular,l.specular),this._uMaterialGlossiness&&o.uniform1f(this._uMaterialGlossiness,l.glossiness),this._uMaterialReflectivity&&o.uniform1f(this._uMaterialReflectivity,l.reflectivity),this._uMaterialEmissive&&o.uniform3fv(this._uMaterialEmissive,l.emissive),this._uAlphaModeCutoff&&o.uniform4f(this._uAlphaModeCutoff,1*l.alpha,1===l.alphaMode?1:0,l.alphaCutoff,0);const c=r._diffuseMap;c&&c._state.texture&&this._uDiffuseMap&&(n.bindTexture(this._uDiffuseMap,c._state.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%s,e.bindTexture++,this._uDiffuseMapMatrix&&o.uniformMatrix4fv(this._uDiffuseMapMatrix,!1,c._state.matrix));const u=r._specularMap;u&&u._state.texture&&this._uSpecularMap&&(n.bindTexture(this._uSpecularMap,u._state.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%s,e.bindTexture++,this._uSpecularMapMatrix&&o.uniformMatrix4fv(this._uSpecularMapMatrix,!1,u._state.matrix));const A=r._glossinessMap;A&&A._state.texture&&this._uGlossinessMap&&(n.bindTexture(this._uGlossinessMap,A._state.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%s,e.bindTexture++,this._uGlossinessMapMatrix&&o.uniformMatrix4fv(this._uGlossinessMapMatrix,!1,A._state.matrix));const g=r._specularGlossinessMap;var p,d,f,m;g&&g._state.texture&&this._uSpecularGlossinessMap&&(n.bindTexture(this._uSpecularGlossinessMap,g._state.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%s,e.bindTexture++,this._uSpecularGlossinessMapMatrix&&o.uniformMatrix4fv(this._uSpecularGlossinessMapMatrix,!1,g._state.matrix)),(p=r._emissiveMap)&&p._state.texture&&this._uEmissiveMap&&(n.bindTexture(this._uEmissiveMap,p._state.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%s,e.bindTexture++,this._uEmissiveMapMatrix&&o.uniformMatrix4fv(this._uEmissiveMapMatrix,!1,p._state.matrix)),(d=r._occlusionMap)&&d._state.texture&&this._uOcclusionMap&&(n.bindTexture(this._uOcclusionMap,d._state.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%s,e.bindTexture++,this._uOcclusionMapMatrix&&o.uniformMatrix4fv(this._uOcclusionMapMatrix,!1,d._state.matrix)),(f=r._alphaMap)&&f._state.texture&&this._uAlphaMap&&(n.bindTexture(this._uAlphaMap,f._state.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%s,e.bindTexture++,this._uAlphaMapMatrix&&o.uniformMatrix4fv(this._uAlphaMapMatrix,!1,f._state.matrix)),(m=r._normalMap)&&m._state.texture&&this._uNormalMap&&(n.bindTexture(this._uNormalMap,m._state.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%s,e.bindTexture++,this._uNormalMapMatrix&&o.uniformMatrix4fv(this._uNormalMapMatrix,!1,m._state.matrix))}this._lastMaterialId=l.id}if(o.uniformMatrix4fv(this._uModelMatrix,o.FALSE,t.worldMatrix),this._uModelNormalMatrix&&o.uniformMatrix4fv(this._uModelNormalMatrix,o.FALSE,t.worldNormalMatrix),this._uClippable&&o.uniform1i(this._uClippable,a.clippable),this._uColorize){const e=a.colorize,t=this._lastColorize;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]||(o.uniform4fv(this._uColorize,e),t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3])}o.uniform3fv(this._uOffset,a.offset),h.id!==this._lastGeometryId&&(this._uPositionsDecodeMatrix&&o.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,h.positionsDecodeMatrix),this._uUVDecodeMatrix&&o.uniformMatrix3fv(this._uUVDecodeMatrix,!1,h.uvDecodeMatrix),this._aPosition&&(this._aPosition.bindArrayBuffer(h.positionsBuf),e.bindArray++),this._aNormal&&(this._aNormal.bindArrayBuffer(h.normalsBuf),e.bindArray++),this._aUV&&(this._aUV.bindArrayBuffer(h.uvBuf),e.bindArray++),this._aColor&&(this._aColor.bindArrayBuffer(h.colorsBuf),e.bindArray++),this._aFlags&&(this._aFlags.bindArrayBuffer(h.flagsBuf),e.bindArray++),h.indicesBuf&&(h.indicesBuf.bind(),e.bindArray++),this._lastGeometryId=h.id),h.indicesBuf?(o.drawElements(h.primitive,h.indicesBuf.numItems,h.indicesBuf.itemType,0),e.drawElements++):h.positions&&(o.drawArrays(o.TRIANGLES,0,h.positions.numItems),e.drawArrays++),A&&o.depthFunc(o.LESS)},ur.prototype._allocate=function(e){const t=e.scene,s=t.canvas.gl,i=e._material,r=t._lightsState,o=t._sectionPlanesState,n=e._material._state;if(this._program=new ge(s,this._shaderSource),this._program.errors)return void(this.errors=this._program.errors);const a=this._program;this._uPositionsDecodeMatrix=a.getLocation("positionsDecodeMatrix"),this._uUVDecodeMatrix=a.getLocation("uvDecodeMatrix"),this._uModelMatrix=a.getLocation("modelMatrix"),this._uModelNormalMatrix=a.getLocation("modelNormalMatrix"),this._uViewMatrix=a.getLocation("viewMatrix"),this._uViewNormalMatrix=a.getLocation("viewNormalMatrix"),this._uProjMatrix=a.getLocation("projMatrix"),this._uGammaFactor=a.getLocation("gammaFactor"),this._uLightAmbient=[],this._uLightColor=[],this._uLightDir=[],this._uLightPos=[],this._uLightAttenuation=[],this._uShadowViewMatrix=[],this._uShadowProjMatrix=[],t.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=a.getLocation("logDepthBufFC"));const l=r.lights;let h;for(var c=0,u=l.length;c<u;c++){switch(h=l[c],h.type){case"ambient":this._uLightAmbient[c]=a.getLocation("lightAmbient");break;case"dir":this._uLightColor[c]=a.getLocation("lightColor"+c),this._uLightPos[c]=null,this._uLightDir[c]=a.getLocation("lightDir"+c);break;case"point":this._uLightColor[c]=a.getLocation("lightColor"+c),this._uLightPos[c]=a.getLocation("lightPos"+c),this._uLightDir[c]=null,this._uLightAttenuation[c]=a.getLocation("lightAttenuation"+c);break;case"spot":this._uLightColor[c]=a.getLocation("lightColor"+c),this._uLightPos[c]=a.getLocation("lightPos"+c),this._uLightDir[c]=a.getLocation("lightDir"+c),this._uLightAttenuation[c]=a.getLocation("lightAttenuation"+c)}h.castsShadow&&(this._uShadowViewMatrix[c]=a.getLocation("shadowViewMatrix"+c),this._uShadowProjMatrix[c]=a.getLocation("shadowProjMatrix"+c))}r.lightMaps.length>0&&(this._uLightMap="lightMap"),r.reflectionMaps.length>0&&(this._uReflectionMap="reflectionMap"),this._uSectionPlanes=[];for(c=0,u=o.sectionPlanes.length;c<u;c++)this._uSectionPlanes.push({active:a.getLocation("sectionPlaneActive"+c),pos:a.getLocation("sectionPlanePos"+c),dir:a.getLocation("sectionPlaneDir"+c)});switch(this._uPointSize=a.getLocation("pointSize"),n.type){case"LambertMaterial":this._uMaterialColor=a.getLocation("materialColor"),this._uMaterialEmissive=a.getLocation("materialEmissive"),this._uAlphaModeCutoff=a.getLocation("materialAlphaModeCutoff");break;case"PhongMaterial":this._uMaterialAmbient=a.getLocation("materialAmbient"),this._uMaterialDiffuse=a.getLocation("materialDiffuse"),this._uMaterialSpecular=a.getLocation("materialSpecular"),this._uMaterialEmissive=a.getLocation("materialEmissive"),this._uAlphaModeCutoff=a.getLocation("materialAlphaModeCutoff"),this._uMaterialShininess=a.getLocation("materialShininess"),i._ambientMap&&(this._uMaterialAmbientMap="ambientMap",this._uMaterialAmbientMapMatrix=a.getLocation("ambientMapMatrix")),i._diffuseMap&&(this._uDiffuseMap="diffuseMap",this._uDiffuseMapMatrix=a.getLocation("diffuseMapMatrix")),i._specularMap&&(this._uSpecularMap="specularMap",this._uSpecularMapMatrix=a.getLocation("specularMapMatrix")),i._emissiveMap&&(this._uEmissiveMap="emissiveMap",this._uEmissiveMapMatrix=a.getLocation("emissiveMapMatrix")),i._alphaMap&&(this._uAlphaMap="alphaMap",this._uAlphaMapMatrix=a.getLocation("alphaMapMatrix")),i._reflectivityMap&&(this._uReflectivityMap="reflectivityMap",this._uReflectivityMapMatrix=a.getLocation("reflectivityMapMatrix")),i._normalMap&&(this._uNormalMap="normalMap",this._uNormalMapMatrix=a.getLocation("normalMapMatrix")),i._occlusionMap&&(this._uOcclusionMap="occlusionMap",this._uOcclusionMapMatrix=a.getLocation("occlusionMapMatrix")),i._diffuseFresnel&&(this._uDiffuseFresnelEdgeBias=a.getLocation("diffuseFresnelEdgeBias"),this._uDiffuseFresnelCenterBias=a.getLocation("diffuseFresnelCenterBias"),this._uDiffuseFresnelEdgeColor=a.getLocation("diffuseFresnelEdgeColor"),this._uDiffuseFresnelCenterColor=a.getLocation("diffuseFresnelCenterColor"),this._uDiffuseFresnelPower=a.getLocation("diffuseFresnelPower")),i._specularFresnel&&(this._uSpecularFresnelEdgeBias=a.getLocation("specularFresnelEdgeBias"),this._uSpecularFresnelCenterBias=a.getLocation("specularFresnelCenterBias"),this._uSpecularFresnelEdgeColor=a.getLocation("specularFresnelEdgeColor"),this._uSpecularFresnelCenterColor=a.getLocation("specularFresnelCenterColor"),this._uSpecularFresnelPower=a.getLocation("specularFresnelPower")),i._alphaFresnel&&(this._uAlphaFresnelEdgeBias=a.getLocation("alphaFresnelEdgeBias"),this._uAlphaFresnelCenterBias=a.getLocation("alphaFresnelCenterBias"),this._uAlphaFresnelEdgeColor=a.getLocation("alphaFresnelEdgeColor"),this._uAlphaFresnelCenterColor=a.getLocation("alphaFresnelCenterColor"),this._uAlphaFresnelPower=a.getLocation("alphaFresnelPower")),i._reflectivityFresnel&&(this._uReflectivityFresnelEdgeBias=a.getLocation("reflectivityFresnelEdgeBias"),this._uReflectivityFresnelCenterBias=a.getLocation("reflectivityFresnelCenterBias"),this._uReflectivityFresnelEdgeColor=a.getLocation("reflectivityFresnelEdgeColor"),this._uReflectivityFresnelCenterColor=a.getLocation("reflectivityFresnelCenterColor"),this._uReflectivityFresnelPower=a.getLocation("reflectivityFresnelPower")),i._emissiveFresnel&&(this._uEmissiveFresnelEdgeBias=a.getLocation("emissiveFresnelEdgeBias"),this._uEmissiveFresnelCenterBias=a.getLocation("emissiveFresnelCenterBias"),this._uEmissiveFresnelEdgeColor=a.getLocation("emissiveFresnelEdgeColor"),this._uEmissiveFresnelCenterColor=a.getLocation("emissiveFresnelCenterColor"),this._uEmissiveFresnelPower=a.getLocation("emissiveFresnelPower"));break;case"MetallicMaterial":this._uBaseColor=a.getLocation("materialBaseColor"),this._uMaterialMetallic=a.getLocation("materialMetallic"),this._uMaterialRoughness=a.getLocation("materialRoughness"),this._uMaterialSpecularF0=a.getLocation("materialSpecularF0"),this._uMaterialEmissive=a.getLocation("materialEmissive"),this._uAlphaModeCutoff=a.getLocation("materialAlphaModeCutoff"),i._baseColorMap&&(this._uBaseColorMap="baseColorMap",this._uBaseColorMapMatrix=a.getLocation("baseColorMapMatrix")),i._metallicMap&&(this._uMetallicMap="metallicMap",this._uMetallicMapMatrix=a.getLocation("metallicMapMatrix")),i._roughnessMap&&(this._uRoughnessMap="roughnessMap",this._uRoughnessMapMatrix=a.getLocation("roughnessMapMatrix")),i._metallicRoughnessMap&&(this._uMetallicRoughnessMap="metallicRoughnessMap",this._uMetallicRoughnessMapMatrix=a.getLocation("metallicRoughnessMapMatrix")),i._emissiveMap&&(this._uEmissiveMap="emissiveMap",this._uEmissiveMapMatrix=a.getLocation("emissiveMapMatrix")),i._occlusionMap&&(this._uOcclusionMap="occlusionMap",this._uOcclusionMapMatrix=a.getLocation("occlusionMapMatrix")),i._alphaMap&&(this._uAlphaMap="alphaMap",this._uAlphaMapMatrix=a.getLocation("alphaMapMatrix")),i._normalMap&&(this._uNormalMap="normalMap",this._uNormalMapMatrix=a.getLocation("normalMapMatrix"));break;case"SpecularMaterial":this._uMaterialDiffuse=a.getLocation("materialDiffuse"),this._uMaterialSpecular=a.getLocation("materialSpecular"),this._uMaterialGlossiness=a.getLocation("materialGlossiness"),this._uMaterialReflectivity=a.getLocation("reflectivityFresnel"),this._uMaterialEmissive=a.getLocation("materialEmissive"),this._uAlphaModeCutoff=a.getLocation("materialAlphaModeCutoff"),i._diffuseMap&&(this._uDiffuseMap="diffuseMap",this._uDiffuseMapMatrix=a.getLocation("diffuseMapMatrix")),i._specularMap&&(this._uSpecularMap="specularMap",this._uSpecularMapMatrix=a.getLocation("specularMapMatrix")),i._glossinessMap&&(this._uGlossinessMap="glossinessMap",this._uGlossinessMapMatrix=a.getLocation("glossinessMapMatrix")),i._specularGlossinessMap&&(this._uSpecularGlossinessMap="materialSpecularGlossinessMap",this._uSpecularGlossinessMapMatrix=a.getLocation("materialSpecularGlossinessMapMatrix")),i._emissiveMap&&(this._uEmissiveMap="emissiveMap",this._uEmissiveMapMatrix=a.getLocation("emissiveMapMatrix")),i._occlusionMap&&(this._uOcclusionMap="occlusionMap",this._uOcclusionMapMatrix=a.getLocation("occlusionMapMatrix")),i._alphaMap&&(this._uAlphaMap="alphaMap",this._uAlphaMapMatrix=a.getLocation("alphaMapMatrix")),i._normalMap&&(this._uNormalMap="normalMap",this._uNormalMapMatrix=a.getLocation("normalMapMatrix"))}this._aPosition=a.getAttribute("position"),this._aNormal=a.getAttribute("normal"),this._aUV=a.getAttribute("uv"),this._aColor=a.getAttribute("color"),this._aFlags=a.getAttribute("flags"),this._uClippable=a.getLocation("clippable"),this._uColorize=a.getLocation("colorize"),this._uOffset=a.getLocation("offset"),this._lastMaterialId=null,this._lastVertexBufsId=null,this._lastGeometryId=null,this._lastColorize=new Float32Array(4),this._baseTextureUnit=0},ur.prototype._bindProgram=function(e){const t=oe.MAX_TEXTURE_UNITS,s=this._scene,i=s.canvas.gl,r=s._lightsState,o=s.camera.project;let n;const a=this._program;if(a.bind(),e.useProgram++,e.textureUnit=0,this._lastMaterialId=null,this._lastVertexBufsId=null,this._lastGeometryId=null,this._lastColorize[0]=-1,this._lastColorize[1]=-1,this._lastColorize[2]=-1,this._lastColorize[3]=-1,i.uniformMatrix4fv(this._uProjMatrix,!1,o.matrix),s.logarithmicDepthBufferEnabled){const e=2/(Math.log(o.far+1)/Math.LN2);i.uniform1f(this._uLogDepthBufFC,e)}for(var l=0,h=r.lights.length;l<h;l++)if(n=r.lights[l],this._uLightAmbient[l])i.uniform4f(this._uLightAmbient[l],n.color[0],n.color[1],n.color[2],n.intensity);else if(this._uLightColor[l]&&i.uniform4f(this._uLightColor[l],n.color[0],n.color[1],n.color[2],n.intensity),this._uLightPos[l]&&(i.uniform3fv(this._uLightPos[l],n.pos),this._uLightAttenuation[l]&&i.uniform1f(this._uLightAttenuation[l],n.attenuation)),this._uLightDir[l]&&i.uniform3fv(this._uLightDir[l],n.dir),n.castsShadow){this._uShadowViewMatrix[l]&&i.uniformMatrix4fv(this._uShadowViewMatrix[l],!1,n.getShadowViewMatrix()),this._uShadowProjMatrix[l]&&i.uniformMatrix4fv(this._uShadowProjMatrix[l],!1,n.getShadowProjMatrix());const s=n.getShadowRenderBuf();s&&(a.bindTexture("shadowMap"+l,s.getTexture(),e.textureUnit),e.textureUnit=(e.textureUnit+1)%t,e.bindTexture++)}r.lightMaps.length>0&&r.lightMaps[0].texture&&this._uLightMap&&(a.bindTexture(this._uLightMap,r.lightMaps[0].texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%t,e.bindTexture++),r.reflectionMaps.length>0&&r.reflectionMaps[0].texture&&this._uReflectionMap&&(a.bindTexture(this._uReflectionMap,r.reflectionMaps[0].texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%t,e.bindTexture++),this._uGammaFactor&&i.uniform1f(this._uGammaFactor,s.gammaFactor),this._baseTextureUnit=e.textureUnit};class pr{constructor(e){this.vertex=function(e){const t=e.scene,s=t._lightsState,i=function(e){const t=e._geometry._state.primitiveName;if((e._geometry._state.autoVertexNormals||e._geometry._state.normalsBuf)&&("triangles"===t||"triangle-strip"===t||"triangle-fan"===t))return!0;return!1}(e),r=t._sectionPlanesState.sectionPlanes.length>0,o=!!e._geometry._state.compressGeometry,n=e._state.billboard,a=e._state.stationary,l=[];l.push("#version 300 es"),l.push("// EmphasisFillShaderSource vertex shader"),l.push("in vec3 position;"),l.push("uniform mat4 modelMatrix;"),l.push("uniform mat4 viewMatrix;"),l.push("uniform mat4 projMatrix;"),l.push("uniform vec4 colorize;"),l.push("uniform vec3 offset;"),o&&l.push("uniform mat4 positionsDecodeMatrix;");t.logarithmicDepthBufferEnabled&&(l.push("uniform float logDepthBufFC;"),l.push("out float vFragDepth;"),l.push("bool isPerspectiveMatrix(mat4 m) {"),l.push("    return (m[2][3] == - 1.0);"),l.push("}"),l.push("out float isPerspective;"));r&&l.push("out vec4 vWorldPosition;");if(l.push("uniform vec4   lightAmbient;"),l.push("uniform vec4   fillColor;"),i){l.push("in vec3 normal;"),l.push("uniform mat4 modelNormalMatrix;"),l.push("uniform mat4 viewNormalMatrix;");for(let e=0,t=s.lights.length;e<t;e++){const t=s.lights[e];"ambient"!==t.type&&(l.push("uniform vec4 lightColor"+e+";"),"dir"===t.type&&l.push("uniform vec3 lightDir"+e+";"),"point"===t.type&&l.push("uniform vec3 lightPos"+e+";"),"spot"===t.type&&l.push("uniform vec3 lightPos"+e+";"))}o&&(l.push("vec3 octDecode(vec2 oct) {"),l.push("    vec3 v = vec3(oct.xy, 1.0 - abs(oct.x) - abs(oct.y));"),l.push("    if (v.z < 0.0) {"),l.push("        v.xy = (1.0 - abs(v.yx)) * vec2(v.x >= 0.0 ? 1.0 : -1.0, v.y >= 0.0 ? 1.0 : -1.0);"),l.push("    }"),l.push("    return normalize(v);"),l.push("}"))}l.push("out vec4 vColor;"),("spherical"===n||"cylindrical"===n)&&(l.push("void billboard(inout mat4 mat) {"),l.push("   mat[0][0] = 1.0;"),l.push("   mat[0][1] = 0.0;"),l.push("   mat[0][2] = 0.0;"),"spherical"===n&&(l.push("   mat[1][0] = 0.0;"),l.push("   mat[1][1] = 1.0;"),l.push("   mat[1][2] = 0.0;")),l.push("   mat[2][0] = 0.0;"),l.push("   mat[2][1] = 0.0;"),l.push("   mat[2][2] =1.0;"),l.push("}"));l.push("void main(void) {"),l.push("vec4 localPosition = vec4(position, 1.0); "),l.push("vec4 worldPosition;"),o&&l.push("localPosition = positionsDecodeMatrix * localPosition;");i&&(o?l.push("vec4 localNormal = vec4(octDecode(normal.xy), 0.0); "):l.push("vec4 localNormal = vec4(normal, 0.0); "),l.push("mat4 modelNormalMatrix2 = modelNormalMatrix;"),l.push("mat4 viewNormalMatrix2 = viewNormalMatrix;"));l.push("mat4 viewMatrix2 = viewMatrix;"),l.push("mat4 modelMatrix2 = modelMatrix;"),a&&l.push("viewMatrix2[3][0] = viewMatrix2[3][1] = viewMatrix2[3][2] = 0.0;");"spherical"===n||"cylindrical"===n?(l.push("mat4 modelViewMatrix = viewMatrix2 * modelMatrix2;"),l.push("billboard(modelMatrix2);"),l.push("billboard(viewMatrix2);"),l.push("billboard(modelViewMatrix);"),i&&(l.push("mat4 modelViewNormalMatrix =  viewNormalMatrix2 * modelNormalMatrix2;"),l.push("billboard(modelNormalMatrix2);"),l.push("billboard(viewNormalMatrix2);"),l.push("billboard(modelViewNormalMatrix);")),l.push("worldPosition = modelMatrix2 * localPosition;"),l.push("vec4 viewPosition = modelViewMatrix * localPosition;")):(l.push("worldPosition = modelMatrix2 * localPosition;"),l.push("worldPosition.xyz = worldPosition.xyz + offset;"),l.push("vec4 viewPosition  = viewMatrix2 * worldPosition; "));i&&l.push("vec3 viewNormal = normalize((viewNormalMatrix2 * modelNormalMatrix2 * localNormal).xyz);");if(l.push("vec3 reflectedColor = vec3(0.0, 0.0, 0.0);"),l.push("vec3 viewLightDir = vec3(0.0, 0.0, -1.0);"),l.push("float lambertian = 1.0;"),i)for(let e=0,t=s.lights.length;e<t;e++){const t=s.lights[e];if("ambient"!==t.type){if("dir"===t.type)"view"===t.space?l.push("viewLightDir = normalize(lightDir"+e+");"):l.push("viewLightDir = normalize((viewMatrix2 * vec4(lightDir"+e+", 0.0)).xyz);");else{if("point"!==t.type)continue;"view"===t.space?l.push("viewLightDir = normalize(lightPos"+e+" - viewPosition.xyz);"):l.push("viewLightDir = normalize((viewMatrix2 * vec4(lightPos"+e+", 0.0)).xyz);")}l.push("lambertian = max(dot(-viewNormal, viewLightDir), 0.0);"),l.push("reflectedColor += lambertian * (lightColor"+e+".rgb * lightColor"+e+".a);")}}l.push("vColor = vec4(reflectedColor * fillColor.rgb, fillColor.a);"),r&&l.push("vWorldPosition = worldPosition;");"points"===e._geometry._state.primitiveName&&l.push("gl_PointSize = pointSize;");l.push("vec4 clipPos = projMatrix * viewPosition;"),t.logarithmicDepthBufferEnabled&&(l.push("vFragDepth = 1.0 + clipPos.w;"),l.push("isPerspective = float (isPerspectiveMatrix(projMatrix));"));return l.push("gl_Position = clipPos;"),l.push("}"),l}(e),this.fragment=function(e){const t=e.scene,s=e.scene._sectionPlanesState,i=e.scene.gammaOutput,r=s.sectionPlanes.length>0,o=[];o.push("#version 300 es"),o.push("// Lambertian drawing fragment shader"),o.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),o.push("precision highp float;"),o.push("precision highp int;"),o.push("#else"),o.push("precision mediump float;"),o.push("precision mediump int;"),o.push("#endif"),t.logarithmicDepthBufferEnabled&&(o.push("in float isPerspective;"),o.push("uniform float logDepthBufFC;"),o.push("in float vFragDepth;"));i&&(o.push("uniform float gammaFactor;"),o.push("vec4 linearToGamma( in vec4 value, in float gammaFactor ) {"),o.push("  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );"),o.push("}"));if(r){o.push("in vec4 vWorldPosition;"),o.push("uniform bool clippable;");for(let e=0,t=s.sectionPlanes.length;e<t;e++)o.push("uniform bool sectionPlaneActive"+e+";"),o.push("uniform vec3 sectionPlanePos"+e+";"),o.push("uniform vec3 sectionPlaneDir"+e+";")}if(o.push("in vec4 vColor;"),o.push("out vec4 outColor;"),o.push("void main(void) {"),r){o.push("if (clippable) {"),o.push("  float dist = 0.0;");for(let e=0,t=s.sectionPlanes.length;e<t;e++)o.push("if (sectionPlaneActive"+e+") {"),o.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),o.push("}");o.push("  if (dist > 0.0) { discard; }"),o.push("}")}"points"===e._geometry._state.primitiveName&&(o.push("vec2 cxy = 2.0 * gl_PointCoord - 1.0;"),o.push("float r = dot(cxy, cxy);"),o.push("if (r > 1.0) {"),o.push("   discard;"),o.push("}"));t.logarithmicDepthBufferEnabled&&o.push("gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;");i?o.push("outColor = linearToGamma(vColor, gammaFactor);"):o.push("outColor = vColor;");return o.push("}"),o}(e)}}const dr=new t({}),fr=p.vec3(),mr=function(e,t){this.id=dr.addItem({}),this._hash=e,this._scene=t.scene,this._useCount=0,this._shaderSource=new pr(t),this._allocate(t)},gr={};mr.get=function(e){const t=[e.scene.id,e.scene.gammaOutput?"go":"",e.scene._sectionPlanesState.getHash(),e._geometry._state.normalsBuf?"n":"",e._geometry._state.compressGeometry?"cp":"",e._state.hash].join(";");let s=gr[t];return s||(s=new mr(t,e),gr[t]=s,d.memory.programs++),s._useCount++,s},mr.prototype.put=function(){0==--this._useCount&&(dr.removeItem(this.id),this._program&&this._program.destroy(),delete gr[this._hash],d.memory.programs--)},mr.prototype.webglContextRestored=function(){this._program=null},mr.prototype.drawMesh=function(e,t,s){this._program||this._allocate(t);const i=this._scene,r=i.camera,o=i.canvas.gl,n=0===s?t._xrayMaterial._state:1===s?t._highlightMaterial._state:t._selectedMaterial._state,a=t._state,l=t._geometry._state,h=t.origin;if(e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram(e)),o.uniformMatrix4fv(this._uViewMatrix,!1,h?e.getRTCViewMatrix(a.originHash,h):r.viewMatrix),o.uniformMatrix4fv(this._uViewNormalMatrix,!1,r.viewNormalMatrix),a.clippable){const e=i._sectionPlanesState.sectionPlanes.length;if(e>0){const s=i._sectionPlanesState.sectionPlanes,r=t.renderFlags;for(let t=0;t<e;t++){const e=this._uSectionPlanes[t];if(e){const i=r.sectionPlanesActivePerLayer[t];if(o.uniform1i(e.active,i?1:0),i){const i=s[t];o.uniform3fv(e.pos,h?W(i.dist,i.dir,h,fr):i.pos),o.uniform3fv(e.dir,i.dir)}}}}}if(n.id!==this._lastMaterialId){const t=n.fillColor,s=n.backfaces;e.backfaces!==s&&(s?o.disable(o.CULL_FACE):o.enable(o.CULL_FACE),e.backfaces=s),o.uniform4f(this._uFillColor,t[0],t[1],t[2],n.fillAlpha),this._lastMaterialId=n.id}o.uniformMatrix4fv(this._uModelMatrix,o.FALSE,t.worldMatrix),this._uModelNormalMatrix&&o.uniformMatrix4fv(this._uModelNormalMatrix,o.FALSE,t.worldNormalMatrix),this._uClippable&&o.uniform1i(this._uClippable,a.clippable),o.uniform3fv(this._uOffset,a.offset),l.id!==this._lastGeometryId&&(this._uPositionsDecodeMatrix&&o.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,l.positionsDecodeMatrix),this._uUVDecodeMatrix&&o.uniformMatrix3fv(this._uUVDecodeMatrix,!1,l.uvDecodeMatrix),this._aPosition&&(this._aPosition.bindArrayBuffer(l.positionsBuf),e.bindArray++),this._aNormal&&(this._aNormal.bindArrayBuffer(l.normalsBuf),e.bindArray++),l.indicesBuf?(l.indicesBuf.bind(),e.bindArray++):l.positionsBuf,this._lastGeometryId=l.id),l.indicesBuf?(o.drawElements(l.primitive,l.indicesBuf.numItems,l.indicesBuf.itemType,0),e.drawElements++):l.positionsBuf&&(o.drawArrays(o.TRIANGLES,0,l.positionsBuf.numItems),e.drawArrays++)},mr.prototype._allocate=function(e){const t=e.scene,s=t._lightsState,i=t._sectionPlanesState,r=t.canvas.gl;if(this._program=new ge(r,this._shaderSource),this._program.errors)return void(this.errors=this._program.errors);const o=this._program;this._uPositionsDecodeMatrix=o.getLocation("positionsDecodeMatrix"),this._uModelMatrix=o.getLocation("modelMatrix"),this._uModelNormalMatrix=o.getLocation("modelNormalMatrix"),this._uViewMatrix=o.getLocation("viewMatrix"),this._uViewNormalMatrix=o.getLocation("viewNormalMatrix"),this._uProjMatrix=o.getLocation("projMatrix"),this._uLightAmbient=[],this._uLightColor=[],this._uLightDir=[],this._uLightPos=[],this._uLightAttenuation=[];for(let e=0,t=s.lights.length;e<t;e++){switch(s.lights[e].type){case"ambient":this._uLightAmbient[e]=o.getLocation("lightAmbient");break;case"dir":this._uLightColor[e]=o.getLocation("lightColor"+e),this._uLightPos[e]=null,this._uLightDir[e]=o.getLocation("lightDir"+e);break;case"point":this._uLightColor[e]=o.getLocation("lightColor"+e),this._uLightPos[e]=o.getLocation("lightPos"+e),this._uLightDir[e]=null,this._uLightAttenuation[e]=o.getLocation("lightAttenuation"+e)}}this._uSectionPlanes=[];for(let e=0,t=i.sectionPlanes.length;e<t;e++)this._uSectionPlanes.push({active:o.getLocation("sectionPlaneActive"+e),pos:o.getLocation("sectionPlanePos"+e),dir:o.getLocation("sectionPlaneDir"+e)});this._uFillColor=o.getLocation("fillColor"),this._aPosition=o.getAttribute("position"),this._aNormal=o.getAttribute("normal"),this._uClippable=o.getLocation("clippable"),this._uGammaFactor=o.getLocation("gammaFactor"),this._uOffset=o.getLocation("offset"),t.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=o.getLocation("logDepthBufFC")),this._lastMaterialId=null,this._lastVertexBufsId=null,this._lastGeometryId=null},mr.prototype._bindProgram=function(e){const t=this._scene,s=t.canvas.gl,i=t._lightsState,r=t.camera,o=r.project;if(this._program.bind(),e.useProgram++,e.textureUnit=0,this._lastMaterialId=null,this._lastVertexBufsId=null,this._lastGeometryId=null,this._lastIndicesBufId=null,s.uniformMatrix4fv(this._uViewNormalMatrix,!1,r.normalMatrix),s.uniformMatrix4fv(this._uProjMatrix,!1,o.matrix),t.logarithmicDepthBufferEnabled){const e=2/(Math.log(o.far+1)/Math.LN2);s.uniform1f(this._uLogDepthBufFC,e)}for(let e=0,t=i.lights.length;e<t;e++){const t=i.lights[e];this._uLightAmbient[e]?s.uniform4f(this._uLightAmbient[e],t.color[0],t.color[1],t.color[2],t.intensity):(this._uLightColor[e]&&s.uniform4f(this._uLightColor[e],t.color[0],t.color[1],t.color[2],t.intensity),this._uLightPos[e]&&(s.uniform3fv(this._uLightPos[e],t.pos),this._uLightAttenuation[e]&&s.uniform1f(this._uLightAttenuation[e],t.attenuation)),this._uLightDir[e]&&s.uniform3fv(this._uLightDir[e],t.dir))}this._uGammaFactor&&s.uniform1f(this._uGammaFactor,t.gammaFactor)};class yr{constructor(e){this.vertex=function(e){const t=e.scene,s=t._sectionPlanesState.sectionPlanes.length>0,i=!!e._geometry._state.compressGeometry,r=e._state.billboard,o=e._state.stationary,n=[];n.push("#version 300 es"),n.push("// Edges drawing vertex shader"),n.push("in vec3 position;"),n.push("uniform mat4 modelMatrix;"),n.push("uniform mat4 viewMatrix;"),n.push("uniform mat4 projMatrix;"),n.push("uniform vec4 edgeColor;"),n.push("uniform vec3 offset;"),i&&n.push("uniform mat4 positionsDecodeMatrix;");t.logarithmicDepthBufferEnabled&&(n.push("uniform float logDepthBufFC;"),n.push("out float vFragDepth;"),n.push("bool isPerspectiveMatrix(mat4 m) {"),n.push("    return (m[2][3] == - 1.0);"),n.push("}"),n.push("out float isPerspective;"));s&&n.push("out vec4 vWorldPosition;");n.push("out vec4 vColor;"),("spherical"===r||"cylindrical"===r)&&(n.push("void billboard(inout mat4 mat) {"),n.push("   mat[0][0] = 1.0;"),n.push("   mat[0][1] = 0.0;"),n.push("   mat[0][2] = 0.0;"),"spherical"===r&&(n.push("   mat[1][0] = 0.0;"),n.push("   mat[1][1] = 1.0;"),n.push("   mat[1][2] = 0.0;")),n.push("   mat[2][0] = 0.0;"),n.push("   mat[2][1] = 0.0;"),n.push("   mat[2][2] =1.0;"),n.push("}"));n.push("void main(void) {"),n.push("vec4 localPosition = vec4(position, 1.0); "),n.push("vec4 worldPosition;"),i&&n.push("localPosition = positionsDecodeMatrix * localPosition;");n.push("mat4 viewMatrix2 = viewMatrix;"),n.push("mat4 modelMatrix2 = modelMatrix;"),o&&n.push("viewMatrix2[3][0] = viewMatrix2[3][1] = viewMatrix2[3][2] = 0.0;");"spherical"===r||"cylindrical"===r?(n.push("mat4 modelViewMatrix = viewMatrix2 * modelMatrix2;"),n.push("billboard(modelMatrix2);"),n.push("billboard(viewMatrix2);"),n.push("billboard(modelViewMatrix);"),n.push("worldPosition = modelMatrix2 * localPosition;"),n.push("worldPosition.xyz = worldPosition.xyz + offset;"),n.push("vec4 viewPosition = modelViewMatrix * localPosition;")):(n.push("worldPosition = modelMatrix2 * localPosition;"),n.push("worldPosition.xyz = worldPosition.xyz + offset;"),n.push("vec4 viewPosition  = viewMatrix2 * worldPosition; "));n.push("vColor = edgeColor;"),s&&n.push("vWorldPosition = worldPosition;");n.push("vec4 clipPos = projMatrix * viewPosition;"),t.logarithmicDepthBufferEnabled&&(n.push("vFragDepth = 1.0 + clipPos.w;"),n.push("isPerspective = float (isPerspectiveMatrix(projMatrix));"));return n.push("gl_Position = clipPos;"),n.push("}"),n}(e),this.fragment=function(e){const t=e.scene,s=e.scene._sectionPlanesState,i=e.scene.gammaOutput,r=s.sectionPlanes.length>0,o=[];o.push("#version 300 es"),o.push("// Edges drawing fragment shader"),o.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),o.push("precision highp float;"),o.push("precision highp int;"),o.push("#else"),o.push("precision mediump float;"),o.push("precision mediump int;"),o.push("#endif"),t.logarithmicDepthBufferEnabled&&(o.push("in float isPerspective;"),o.push("uniform float logDepthBufFC;"),o.push("in float vFragDepth;"));i&&(o.push("uniform float gammaFactor;"),o.push("vec4 linearToGamma( in vec4 value, in float gammaFactor ) {"),o.push("  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );"),o.push("}"));if(r){o.push("in vec4 vWorldPosition;"),o.push("uniform bool clippable;");for(let e=0,t=s.sectionPlanes.length;e<t;e++)o.push("uniform bool sectionPlaneActive"+e+";"),o.push("uniform vec3 sectionPlanePos"+e+";"),o.push("uniform vec3 sectionPlaneDir"+e+";")}if(o.push("in vec4 vColor;"),o.push("out vec4 outColor;"),o.push("void main(void) {"),r){o.push("if (clippable) {"),o.push("  float dist = 0.0;");for(let e=0,t=s.sectionPlanes.length;e<t;e++)o.push("if (sectionPlaneActive"+e+") {"),o.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),o.push("}");o.push("  if (dist > 0.0) { discard; }"),o.push("}")}t.logarithmicDepthBufferEnabled&&o.push("gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;");i?o.push("outColor = linearToGamma(vColor, gammaFactor);"):o.push("outColor = vColor;");return o.push("}"),o}(e)}}const Er=new t({}),vr=p.vec3(),_r=function(e,t){this.id=Er.addItem({}),this._hash=e,this._scene=t.scene,this._useCount=0,this._shaderSource=new yr(t),this._allocate(t)},Ir={};_r.get=function(e){const t=[e.scene.id,e.scene.gammaOutput?"go":"",e.scene._sectionPlanesState.getHash(),e._geometry._state.compressGeometry?"cp":"",e._state.hash].join(";");let s=Ir[t];return s||(s=new _r(t,e),Ir[t]=s,d.memory.programs++),s._useCount++,s},_r.prototype.put=function(){0==--this._useCount&&(Er.removeItem(this.id),this._program&&this._program.destroy(),delete Ir[this._hash],d.memory.programs--)},_r.prototype.webglContextRestored=function(){this._program=null},_r.prototype.drawMesh=function(e,t,s){this._program||this._allocate(t);const i=this._scene,r=i.camera,o=i.canvas.gl;let n;const a=t._state,l=t._geometry,h=l._state,c=t.origin;if(e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram(e)),o.uniformMatrix4fv(this._uViewMatrix,!1,c?e.getRTCViewMatrix(a.originHash,c):r.viewMatrix),a.clippable){const e=i._sectionPlanesState.sectionPlanes.length;if(e>0){const s=i._sectionPlanesState.sectionPlanes,r=t.renderFlags;for(let t=0;t<e;t++){const e=this._uSectionPlanes[t];if(e){const i=r.sectionPlanesActivePerLayer[t];if(o.uniform1i(e.active,i?1:0),i){const i=s[t];o.uniform3fv(e.pos,c?W(i.dist,i.dir,c,vr):i.pos),o.uniform3fv(e.dir,i.dir)}}}}}switch(s){case 0:n=t._xrayMaterial._state;break;case 1:n=t._highlightMaterial._state;break;case 2:n=t._selectedMaterial._state;break;default:n=t._edgeMaterial._state}if(n.id!==this._lastMaterialId){const t=n.backfaces;if(e.backfaces!==t&&(t?o.disable(o.CULL_FACE):o.enable(o.CULL_FACE),e.backfaces=t),e.lineWidth!==n.edgeWidth&&(o.lineWidth(n.edgeWidth),e.lineWidth=n.edgeWidth),this._uEdgeColor){const e=n.edgeColor,t=n.edgeAlpha;o.uniform4f(this._uEdgeColor,e[0],e[1],e[2],t)}this._lastMaterialId=n.id}let u;o.uniformMatrix4fv(this._uModelMatrix,o.FALSE,t.worldMatrix),this._uClippable&&o.uniform1i(this._uClippable,a.clippable),o.uniform3fv(this._uOffset,a.offset),h.primitive===o.TRIANGLES?u=l._getEdgeIndices():h.primitive===o.LINES&&(u=h.indicesBuf),u&&(h.id!==this._lastGeometryId&&(this._uPositionsDecodeMatrix&&o.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,h.positionsDecodeMatrix),this._aPosition&&(this._aPosition.bindArrayBuffer(h.positionsBuf,h.compressGeometry?o.UNSIGNED_SHORT:o.FLOAT),e.bindArray++),u.bind(),e.bindArray++,this._lastGeometryId=h.id),o.drawElements(o.LINES,u.numItems,u.itemType,0),e.drawElements++)},_r.prototype._allocate=function(e){const t=e.scene,s=t.canvas.gl,i=t._sectionPlanesState;if(this._program=new ge(s,this._shaderSource),this._program.errors)return void(this.errors=this._program.errors);const r=this._program;this._uPositionsDecodeMatrix=r.getLocation("positionsDecodeMatrix"),this._uModelMatrix=r.getLocation("modelMatrix"),this._uViewMatrix=r.getLocation("viewMatrix"),this._uProjMatrix=r.getLocation("projMatrix"),this._uSectionPlanes=[];for(let e=0,t=i.sectionPlanes.length;e<t;e++)this._uSectionPlanes.push({active:r.getLocation("sectionPlaneActive"+e),pos:r.getLocation("sectionPlanePos"+e),dir:r.getLocation("sectionPlaneDir"+e)});this._uEdgeColor=r.getLocation("edgeColor"),this._aPosition=r.getAttribute("position"),this._uClippable=r.getLocation("clippable"),this._uGammaFactor=r.getLocation("gammaFactor"),this._uOffset=r.getLocation("offset"),t.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=r.getLocation("logDepthBufFC")),this._lastMaterialId=null,this._lastVertexBufsId=null,this._lastGeometryId=null},_r.prototype._bindProgram=function(e){const t=this._program,s=this._scene,i=s.canvas.gl,r=s.camera.project;if(t.bind(),e.useProgram++,this._lastMaterialId=null,this._lastVertexBufsId=null,this._lastGeometryId=null,i.uniformMatrix4fv(this._uProjMatrix,!1,r.matrix),s.logarithmicDepthBufferEnabled){const e=2/(Math.log(r.far+1)/Math.LN2);i.uniform1f(this._uLogDepthBufFC,e)}this._uGammaFactor&&i.uniform1f(this._uGammaFactor,s.gammaFactor)};class Tr{constructor(e){this.vertex=function(e){const t=e.scene,s=t._sectionPlanesState.sectionPlanes.length>0,i=!!e._geometry._state.compressGeometry,r=e._state.billboard,o=e._state.stationary,n=[];n.push("#version 300 es"),n.push("// Mesh picking vertex shader"),n.push("in vec3 position;"),n.push("uniform mat4 modelMatrix;"),n.push("uniform mat4 viewMatrix;"),n.push("uniform mat4 projMatrix;"),n.push("out vec4 vViewPosition;"),n.push("uniform vec3 offset;"),i&&n.push("uniform mat4 positionsDecodeMatrix;");s&&n.push("out vec4 vWorldPosition;");t.logarithmicDepthBufferEnabled&&(n.push("uniform float logDepthBufFC;"),n.push("out float vFragDepth;"),n.push("bool isPerspectiveMatrix(mat4 m) {"),n.push("    return (m[2][3] == - 1.0);"),n.push("}"),n.push("out float isPerspective;"));"spherical"!==r&&"cylindrical"!==r||(n.push("void billboard(inout mat4 mat) {"),n.push("   mat[0][0] = 1.0;"),n.push("   mat[0][1] = 0.0;"),n.push("   mat[0][2] = 0.0;"),"spherical"===r&&(n.push("   mat[1][0] = 0.0;"),n.push("   mat[1][1] = 1.0;"),n.push("   mat[1][2] = 0.0;")),n.push("   mat[2][0] = 0.0;"),n.push("   mat[2][1] = 0.0;"),n.push("   mat[2][2] =1.0;"),n.push("}"));n.push("void main(void) {"),n.push("vec4 localPosition = vec4(position, 1.0); "),i&&n.push("localPosition = positionsDecodeMatrix * localPosition;");n.push("mat4 viewMatrix2 = viewMatrix;"),n.push("mat4 modelMatrix2 = modelMatrix;"),o&&n.push("viewMatrix2[3][0] = viewMatrix2[3][1] = viewMatrix2[3][2] = 0.0;");"spherical"!==r&&"cylindrical"!==r||(n.push("mat4 modelViewMatrix = viewMatrix2 * modelMatrix2;"),n.push("billboard(modelMatrix2);"),n.push("billboard(viewMatrix2);"));n.push("   vec4 worldPosition = modelMatrix2 * localPosition;"),n.push("   worldPosition.xyz = worldPosition.xyz + offset;"),n.push("   vec4 viewPosition = viewMatrix2 * worldPosition;"),s&&n.push("   vWorldPosition = worldPosition;");n.push("vec4 clipPos = projMatrix * viewPosition;"),t.logarithmicDepthBufferEnabled&&(n.push("vFragDepth = 1.0 + clipPos.w;"),n.push("isPerspective = float (isPerspectiveMatrix(projMatrix));"));return n.push("gl_Position = clipPos;"),n.push("}"),n}(e),this.fragment=function(e){const t=e.scene,s=t._sectionPlanesState,i=s.sectionPlanes.length>0,r=[];r.push("#version 300 es"),r.push("// Mesh picking fragment shader"),r.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),r.push("precision highp float;"),r.push("precision highp int;"),r.push("#else"),r.push("precision mediump float;"),r.push("precision mediump int;"),r.push("#endif"),t.logarithmicDepthBufferEnabled&&(r.push("in float isPerspective;"),r.push("uniform float logDepthBufFC;"),r.push("in float vFragDepth;"));if(r.push("uniform vec4 pickColor;"),i){r.push("uniform bool clippable;"),r.push("in vec4 vWorldPosition;");for(var o=0;o<s.sectionPlanes.length;o++)r.push("uniform bool sectionPlaneActive"+o+";"),r.push("uniform vec3 sectionPlanePos"+o+";"),r.push("uniform vec3 sectionPlaneDir"+o+";")}if(r.push("out vec4 outColor;"),r.push("void main(void) {"),i){r.push("if (clippable) {"),r.push("  float dist = 0.0;");for(o=0;o<s.sectionPlanes.length;o++)r.push("if (sectionPlaneActive"+o+") {"),r.push("   dist += clamp(dot(-sectionPlaneDir"+o+".xyz, vWorldPosition.xyz - sectionPlanePos"+o+".xyz), 0.0, 1000.0);"),r.push("}");r.push("  if (dist > 0.0) { discard; }"),r.push("}")}t.logarithmicDepthBufferEnabled&&r.push("gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;");return r.push("   outColor = pickColor; "),r.push("}"),r}(e)}}const Pr=p.vec3(),Dr=function(e,t){this._hash=e,this._shaderSource=new Tr(t),this._scene=t.scene,this._useCount=0,this._allocate(t)},br={};Dr.get=function(e){const t=[e.scene.canvas.canvas.id,e.scene._sectionPlanesState.getHash(),e._geometry._state.hash,e._state.hash].join(";");let s=br[t];if(!s){if(s=new Dr(t,e),s.errors)return console.log(s.errors.join("\n")),null;br[t]=s,d.memory.programs++}return s._useCount++,s},Dr.prototype.put=function(){0==--this._useCount&&(this._program&&this._program.destroy(),delete br[this._hash],d.memory.programs--)},Dr.prototype.webglContextRestored=function(){this._program=null},Dr.prototype.drawMesh=function(e,t){this._program||this._allocate(t);const s=this._scene,i=s.canvas.gl,r=t._state,o=t._material._state,n=t._geometry._state,a=t.origin;if(e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram(e)),i.uniformMatrix4fv(this._uViewMatrix,!1,a?e.getRTCPickViewMatrix(r.originHash,a):e.pickViewMatrix),r.clippable){const e=s._sectionPlanesState.sectionPlanes.length;if(e>0){const r=s._sectionPlanesState.sectionPlanes,o=t.renderFlags;for(let t=0;t<e;t++){const e=this._uSectionPlanes[t];if(e){const s=o.sectionPlanesActivePerLayer[t];if(i.uniform1i(e.active,s?1:0),s){const s=r[t];i.uniform3fv(e.pos,a?W(s.dist,s.dir,a,Pr):s.pos),i.uniform3fv(e.dir,s.dir)}}}}}if(o.id!==this._lastMaterialId){const t=o.backfaces;e.backfaces!==t&&(t?i.disable(i.CULL_FACE):i.enable(i.CULL_FACE),e.backfaces=t);const s=o.frontface;e.frontface!==s&&(s?i.frontFace(i.CCW):i.frontFace(i.CW),e.frontface=s),this._lastMaterialId=o.id}i.uniformMatrix4fv(this._uProjMatrix,!1,e.pickProjMatrix),i.uniformMatrix4fv(this._uModelMatrix,!1,t.worldMatrix),this._uClippable&&i.uniform1i(this._uClippable,t._state.clippable),i.uniform3fv(this._uOffset,t._state.offset),n.id!==this._lastGeometryId&&(this._uPositionsDecodeMatrix&&i.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,n.positionsDecodeMatrix),this._aPosition&&(this._aPosition.bindArrayBuffer(n.positionsBuf,n.compressGeometry?i.UNSIGNED_SHORT:i.FLOAT),e.bindArray++),n.indicesBuf&&(n.indicesBuf.bind(),e.bindArray++),this._lastGeometryId=n.id);var l=t._state.pickID;const h=l>>24&255,c=l>>16&255,u=l>>8&255,A=255&l;i.uniform4f(this._uPickColor,A/255,u/255,c/255,h/255),n.indicesBuf?(i.drawElements(n.primitive,n.indicesBuf.numItems,n.indicesBuf.itemType,0),e.drawElements++):n.positions&&i.drawArrays(i.TRIANGLES,0,n.positions.numItems)},Dr.prototype._allocate=function(e){const t=e.scene,s=t.canvas.gl;if(this._program=new ge(s,this._shaderSource),this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uPositionsDecodeMatrix=i.getLocation("positionsDecodeMatrix"),this._uModelMatrix=i.getLocation("modelMatrix"),this._uViewMatrix=i.getLocation("viewMatrix"),this._uProjMatrix=i.getLocation("projMatrix"),this._uSectionPlanes=[];for(let e=0,s=t._sectionPlanesState.sectionPlanes.length;e<s;e++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+e),pos:i.getLocation("sectionPlanePos"+e),dir:i.getLocation("sectionPlaneDir"+e)});this._aPosition=i.getAttribute("position"),this._uClippable=i.getLocation("clippable"),this._uPickColor=i.getLocation("pickColor"),this._uOffset=i.getLocation("offset"),t.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=i.getLocation("logDepthBufFC")),this._lastMaterialId=null,this._lastGeometryId=null},Dr.prototype._bindProgram=function(e){const t=this._scene,s=t.canvas.gl,i=t.camera.project;if(this._program.bind(),e.useProgram++,t.logarithmicDepthBufferEnabled){const e=2/(Math.log(i.far+1)/Math.LN2);s.uniform1f(this._uLogDepthBufFC,e)}this._lastMaterialId=null,this._lastGeometryId=null};class Rr{constructor(e){this.vertex=function(e){const t=e.scene,s=t._sectionPlanesState.sectionPlanes.length>0,i=!!e._geometry._state.compressGeometry;e._state.billboard,e._state.stationary;const r=[];r.push("#version 300 es"),r.push("// Surface picking vertex shader"),r.push("in vec3 position;"),r.push("in vec4 color;"),r.push("uniform mat4 modelMatrix;"),r.push("uniform mat4 viewMatrix;"),r.push("uniform mat4 projMatrix;"),r.push("uniform vec3 offset;"),s&&(r.push("uniform bool clippable;"),r.push("out vec4 vWorldPosition;"));t.logarithmicDepthBufferEnabled&&(r.push("uniform float logDepthBufFC;"),r.push("out float vFragDepth;"),r.push("bool isPerspectiveMatrix(mat4 m) {"),r.push("    return (m[2][3] == - 1.0);"),r.push("}"),r.push("out float isPerspective;"));r.push("out vec4 vColor;"),i&&r.push("uniform mat4 positionsDecodeMatrix;");r.push("void main(void) {"),r.push("vec4 localPosition = vec4(position, 1.0); "),i&&r.push("localPosition = positionsDecodeMatrix * localPosition;");r.push("   vec4 worldPosition = modelMatrix * localPosition; "),r.push("   worldPosition.xyz = worldPosition.xyz + offset;"),r.push("   vec4 viewPosition = viewMatrix * worldPosition;"),s&&r.push("   vWorldPosition = worldPosition;");r.push("   vColor = color;"),r.push("vec4 clipPos = projMatrix * viewPosition;"),t.logarithmicDepthBufferEnabled&&(r.push("vFragDepth = 1.0 + clipPos.w;"),r.push("isPerspective = float (isPerspectiveMatrix(projMatrix));"));return r.push("gl_Position = clipPos;"),r.push("}"),r}(e),this.fragment=function(e){const t=e.scene,s=t._sectionPlanesState,i=s.sectionPlanes.length>0,r=[];r.push("#version 300 es"),r.push("// Surface picking fragment shader"),r.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),r.push("precision highp float;"),r.push("precision highp int;"),r.push("#else"),r.push("precision mediump float;"),r.push("precision mediump int;"),r.push("#endif"),r.push("in vec4 vColor;"),t.logarithmicDepthBufferEnabled&&(r.push("in float isPerspective;"),r.push("uniform float logDepthBufFC;"),r.push("in float vFragDepth;"));if(i){r.push("uniform bool clippable;"),r.push("in vec4 vWorldPosition;");for(let e=0;e<s.sectionPlanes.length;e++)r.push("uniform bool sectionPlaneActive"+e+";"),r.push("uniform vec3 sectionPlanePos"+e+";"),r.push("uniform vec3 sectionPlaneDir"+e+";")}if(r.push("out vec4 outColor;"),r.push("void main(void) {"),i){r.push("if (clippable) {"),r.push("  float dist = 0.0;");for(let e=0;e<s.sectionPlanes.length;e++)r.push("if (sectionPlaneActive"+e+") {"),r.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),r.push("}");r.push("  if (dist > 0.0) { discard; }"),r.push("}")}t.logarithmicDepthBufferEnabled&&r.push("gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;");return r.push("   outColor = vColor;"),r.push("}"),r}(e)}}const Cr=p.vec3(),xr=function(e,t){this._hash=e,this._scene=t.scene,this._useCount=0,this._shaderSource=new Rr(t),this._allocate(t)},Nr={};xr.get=function(e){const t=[e.scene.canvas.canvas.id,e.scene._sectionPlanesState.getHash(),e._geometry._state.compressGeometry?"cp":"",e._state.hash].join(";");let s=Nr[t];if(!s){if(s=new xr(t,e),s.errors)return console.log(s.errors.join("\n")),null;Nr[t]=s,d.memory.programs++}return s._useCount++,s},xr.prototype.put=function(){0==--this._useCount&&(this._program&&this._program.destroy(),delete Nr[this._hash],d.memory.programs--)},xr.prototype.webglContextRestored=function(){this._program=null},xr.prototype.drawMesh=function(e,t){this._program||this._allocate(t);const s=this._scene,i=s.canvas.gl,r=t._state,o=t._material._state,n=t._geometry,a=t._geometry._state,l=t.origin,h=o.backfaces,c=o.frontface,u=s.camera.project,A=n._getPickTrianglePositions(),p=n._getPickTriangleColors();if(this._program.bind(),e.useProgram++,s.logarithmicDepthBufferEnabled){const e=2/(Math.log(u.far+1)/Math.LN2);i.uniform1f(this._uLogDepthBufFC,e)}if(i.uniformMatrix4fv(this._uViewMatrix,!1,l?e.getRTCPickViewMatrix(r.originHash,l):e.pickViewMatrix),r.clippable){const e=s._sectionPlanesState.sectionPlanes.length;if(e>0){const r=s._sectionPlanesState.sectionPlanes,o=t.renderFlags;for(let t=0;t<e;t++){const e=this._uSectionPlanes[t];if(e){const s=o.sectionPlanesActivePerLayer[t];if(i.uniform1i(e.active,s?1:0),s){const s=r[t];i.uniform3fv(e.pos,l?W(s.dist,s.dir,l,Cr):s.pos),i.uniform3fv(e.dir,s.dir)}}}}}i.uniformMatrix4fv(this._uProjMatrix,!1,e.pickProjMatrix),s.logarithmicDepthBufferEnabled&&i.uniform1f(this._uZFar,s.camera.project.far),e.backfaces!==h&&(h?i.disable(i.CULL_FACE):i.enable(i.CULL_FACE),e.backfaces=h),e.frontface!==c&&(c?i.frontFace(i.CCW):i.frontFace(i.CW),e.frontface=c),i.uniformMatrix4fv(this._uModelMatrix,!1,t.worldMatrix),this._uClippable&&i.uniform1i(this._uClippable,t._state.clippable),i.uniform3fv(this._uOffset,t._state.offset),this._uPositionsDecodeMatrix?(i.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,a.positionsDecodeMatrix),this._aPosition.bindArrayBuffer(A,a.compressGeometry?i.UNSIGNED_SHORT:i.FLOAT)):this._aPosition.bindArrayBuffer(A),p.bind(),i.enableVertexAttribArray(this._aColor.location),i.vertexAttribPointer(this._aColor.location,p.itemSize,p.itemType,!0,0,0),i.drawArrays(a.primitive,0,A.numItems/3)},xr.prototype._allocate=function(e){const t=e.scene,s=t.canvas.gl;if(this._program=new ge(s,this._shaderSource),this._useCount=0,this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uPositionsDecodeMatrix=i.getLocation("positionsDecodeMatrix"),this._uModelMatrix=i.getLocation("modelMatrix"),this._uViewMatrix=i.getLocation("viewMatrix"),this._uProjMatrix=i.getLocation("projMatrix"),this._uSectionPlanes=[];for(let e=0,s=t._sectionPlanesState.sectionPlanes.length;e<s;e++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+e),pos:i.getLocation("sectionPlanePos"+e),dir:i.getLocation("sectionPlaneDir"+e)});this._aPosition=i.getAttribute("position"),this._aColor=i.getAttribute("color"),this._uClippable=i.getLocation("clippable"),this._uOffset=i.getLocation("offset"),t.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=i.getLocation("logDepthBufFC"))};class Or{constructor(e){this.vertex=function(e){const t=e.scene,s=t._sectionPlanesState.sectionPlanes.length>0,i=!!e._geometry._state.compressGeometry,r=e._state.billboard,o=e._state.stationary,n=[];n.push("#version 300 es"),n.push("// Mesh occlusion vertex shader"),n.push("in vec3 position;"),n.push("uniform mat4 modelMatrix;"),n.push("uniform mat4 viewMatrix;"),n.push("uniform mat4 projMatrix;"),n.push("uniform vec3 offset;"),i&&n.push("uniform mat4 positionsDecodeMatrix;");s&&n.push("out vec4 vWorldPosition;");t.logarithmicDepthBufferEnabled&&(n.push("uniform float logDepthBufFC;"),n.push("out float vFragDepth;"),n.push("bool isPerspectiveMatrix(mat4 m) {"),n.push("    return (m[2][3] == - 1.0);"),n.push("}"),n.push("out float isPerspective;"));"spherical"!==r&&"cylindrical"!==r||(n.push("void billboard(inout mat4 mat) {"),n.push("   mat[0][0] = 1.0;"),n.push("   mat[0][1] = 0.0;"),n.push("   mat[0][2] = 0.0;"),"spherical"===r&&(n.push("   mat[1][0] = 0.0;"),n.push("   mat[1][1] = 1.0;"),n.push("   mat[1][2] = 0.0;")),n.push("   mat[2][0] = 0.0;"),n.push("   mat[2][1] = 0.0;"),n.push("   mat[2][2] =1.0;"),n.push("}"));n.push("void main(void) {"),n.push("vec4 localPosition = vec4(position, 1.0); "),n.push("vec4 worldPosition;"),i&&n.push("localPosition = positionsDecodeMatrix * localPosition;");n.push("mat4 viewMatrix2 = viewMatrix;"),n.push("mat4 modelMatrix2 = modelMatrix;"),o&&n.push("viewMatrix2[3][0] = viewMatrix2[3][1] = viewMatrix2[3][2] = 0.0;");"spherical"===r||"cylindrical"===r?(n.push("mat4 modelViewMatrix = viewMatrix2 * modelMatrix2;"),n.push("billboard(modelMatrix2);"),n.push("billboard(viewMatrix2);"),n.push("billboard(modelViewMatrix);"),n.push("worldPosition = modelMatrix2 * localPosition;"),n.push("worldPosition.xyz = worldPosition.xyz + offset;"),n.push("vec4 viewPosition = modelViewMatrix * localPosition;")):(n.push("worldPosition = modelMatrix2 * localPosition;"),n.push("worldPosition.xyz = worldPosition.xyz + offset;"),n.push("vec4 viewPosition  = viewMatrix2 * worldPosition; "));s&&n.push("   vWorldPosition = worldPosition;");n.push("vec4 clipPos = projMatrix * viewPosition;"),t.logarithmicDepthBufferEnabled&&(n.push("vFragDepth = 1.0 + clipPos.w;"),n.push("isPerspective = float (isPerspectiveMatrix(projMatrix));"));return n.push("gl_Position = clipPos;"),n.push("}"),n}(e),this.fragment=function(e){const t=e.scene,s=t._sectionPlanesState,i=s.sectionPlanes.length>0,r=[];r.push("#version 300 es"),r.push("// Mesh occlusion fragment shader"),r.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),r.push("precision highp float;"),r.push("precision highp int;"),r.push("#else"),r.push("precision mediump float;"),r.push("precision mediump int;"),r.push("#endif"),t.logarithmicDepthBufferEnabled&&(r.push("in float isPerspective;"),r.push("uniform float logDepthBufFC;"),r.push("in float vFragDepth;"));if(i){r.push("uniform bool clippable;"),r.push("in vec4 vWorldPosition;");for(var o=0;o<s.sectionPlanes.length;o++)r.push("uniform bool sectionPlaneActive"+o+";"),r.push("uniform vec3 sectionPlanePos"+o+";"),r.push("uniform vec3 sectionPlaneDir"+o+";")}if(r.push("out vec4 outColor;"),r.push("void main(void) {"),i){r.push("if (clippable) {"),r.push("  float dist = 0.0;");for(o=0;o<s.sectionPlanes.length;o++)r.push("if (sectionPlaneActive"+o+") {"),r.push("   dist += clamp(dot(-sectionPlaneDir"+o+".xyz, vWorldPosition.xyz - sectionPlanePos"+o+".xyz), 0.0, 1000.0);"),r.push("}");r.push("  if (dist > 0.0) { discard; }"),r.push("}")}r.push("   outColor = vec4(0.0, 0.0, 1.0, 1.0); "),t.logarithmicDepthBufferEnabled&&r.push("gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;");return r.push("}"),r}(e)}}const Sr=p.vec3(),wr=function(e,t){this._hash=e,this._shaderSource=new Or(t),this._scene=t.scene,this._useCount=0,this._allocate(t)},Mr={};wr.get=function(e){const t=[e.scene.canvas.canvas.id,e.scene._sectionPlanesState.getHash(),e._geometry._state.hash,e._state.occlusionHash].join(";");let s=Mr[t];if(!s){if(s=new wr(t,e),s.errors)return console.log(s.errors.join("\n")),null;Mr[t]=s,d.memory.programs++}return s._useCount++,s},wr.prototype.put=function(){0==--this._useCount&&(this._program&&this._program.destroy(),delete Mr[this._hash],d.memory.programs--)},wr.prototype.webglContextRestored=function(){this._program=null},wr.prototype.drawMesh=function(e,t){this._program||this._allocate(t);const s=this._scene,i=s.canvas.gl,r=t._material._state,o=t._state,n=t._geometry._state,a=t.origin;if(e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram(e)),r.id!==this._lastMaterialId){const t=r.backfaces;e.backfaces!==t&&(t?i.disable(i.CULL_FACE):i.enable(i.CULL_FACE),e.backfaces=t);const s=r.frontface;e.frontface!==s&&(s?i.frontFace(i.CCW):i.frontFace(i.CW),e.frontface=s),this._lastMaterialId=r.id}const l=s.camera;if(i.uniformMatrix4fv(this._uViewMatrix,!1,a?e.getRTCViewMatrix(o.originHash,a):l.viewMatrix),o.clippable){const e=s._sectionPlanesState.sectionPlanes.length;if(e>0){const r=s._sectionPlanesState.sectionPlanes,o=t.renderFlags;for(let t=0;t<e;t++){const e=this._uSectionPlanes[t];if(e){const s=o.sectionPlanesActivePerLayer[t];if(i.uniform1i(e.active,s?1:0),s){const s=r[t];i.uniform3fv(e.pos,a?W(s.dist,s.dir,a,Sr):s.pos),i.uniform3fv(e.dir,s.dir)}}}}}i.uniformMatrix4fv(this._uProjMatrix,!1,l._project._state.matrix),i.uniformMatrix4fv(this._uModelMatrix,i.FALSE,t.worldMatrix),this._uClippable&&i.uniform1i(this._uClippable,t._state.clippable),i.uniform3fv(this._uOffset,t._state.offset),n.id!==this._lastGeometryId&&(this._uPositionsDecodeMatrix&&i.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,n.positionsDecodeMatrix),this._aPosition&&(this._aPosition.bindArrayBuffer(n.positionsBuf,n.compressGeometry?i.UNSIGNED_SHORT:i.FLOAT),e.bindArray++),n.indicesBuf&&(n.indicesBuf.bind(),e.bindArray++),this._lastGeometryId=n.id),n.indicesBuf?(i.drawElements(n.primitive,n.indicesBuf.numItems,n.indicesBuf.itemType,0),e.drawElements++):n.positions&&i.drawArrays(i.TRIANGLES,0,n.positions.numItems)},wr.prototype._allocate=function(e){const t=e.scene,s=t.canvas.gl;if(this._program=new ge(s,this._shaderSource),this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uPositionsDecodeMatrix=i.getLocation("positionsDecodeMatrix"),this._uModelMatrix=i.getLocation("modelMatrix"),this._uViewMatrix=i.getLocation("viewMatrix"),this._uProjMatrix=i.getLocation("projMatrix"),this._uSectionPlanes=[];for(let e=0,s=t._sectionPlanesState.sectionPlanes.length;e<s;e++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+e),pos:i.getLocation("sectionPlanePos"+e),dir:i.getLocation("sectionPlaneDir"+e)});this._aPosition=i.getAttribute("position"),this._uClippable=i.getLocation("clippable"),this._uOffset=i.getLocation("offset"),t.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=i.getLocation("logDepthBufFC")),this._lastMaterialId=null,this._lastVertexBufsId=null,this._lastGeometryId=null},wr.prototype._bindProgram=function(e){const t=this._scene,s=t.camera.project,i=t.canvas.gl;if(this._program.bind(),e.useProgram++,i.uniformMatrix4fv(this._uProjMatrix,!1,s.matrix),t.logarithmicDepthBufferEnabled){const e=2/(Math.log(s.far+1)/Math.LN2);i.uniform1f(this._uLogDepthBufFC,e)}this._lastMaterialId=null,this._lastVertexBufsId=null,this._lastGeometryId=null};class Br{constructor(e){this.vertex=function(e){const t=e.scene._sectionPlanesState.sectionPlanes.length>0,s=!!e._geometry._state.compressGeometry,i=[];i.push("// Mesh shadow vertex shader"),i.push("in vec3 position;"),i.push("uniform mat4 modelMatrix;"),i.push("uniform mat4 shadowViewMatrix;"),i.push("uniform mat4 shadowProjMatrix;"),i.push("uniform vec3 offset;"),s&&i.push("uniform mat4 positionsDecodeMatrix;");t&&i.push("out vec4 vWorldPosition;");i.push("void main(void) {"),i.push("vec4 localPosition = vec4(position, 1.0); "),i.push("vec4 worldPosition;"),s&&i.push("localPosition = positionsDecodeMatrix * localPosition;");i.push("worldPosition = modelMatrix * localPosition;"),i.push("worldPosition.xyz = worldPosition.xyz + offset;"),i.push("vec4 viewPosition  = shadowViewMatrix * worldPosition; "),t&&i.push("vWorldPosition = worldPosition;");return i.push("   gl_Position = shadowProjMatrix * viewPosition;"),i.push("}"),i}(e),this.fragment=function(e){const t=e.scene;t.canvas.gl;const s=t._sectionPlanesState,i=s.sectionPlanes.length>0,r=[];if(r.push("// Mesh shadow fragment shader"),r.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),r.push("precision highp float;"),r.push("precision highp int;"),r.push("#else"),r.push("precision mediump float;"),r.push("precision mediump int;"),r.push("#endif"),i){r.push("uniform bool clippable;"),r.push("in vec4 vWorldPosition;");for(var o=0;o<s.sectionPlanes.length;o++)r.push("uniform bool sectionPlaneActive"+o+";"),r.push("uniform vec3 sectionPlanePos"+o+";"),r.push("uniform vec3 sectionPlaneDir"+o+";")}if(r.push("vec4 encodeFloat( const in float depth ) {"),r.push("  const vec4 bitShift = vec4(256 * 256 * 256, 256 * 256, 256, 1.0);"),r.push("  const vec4 bitMask = vec4(0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0);"),r.push("  vec4 comp = fract(depth * bitShift);"),r.push("  comp -= comp.xxyz * bitMask;"),r.push("  return comp;"),r.push("}"),r.push("out vec4 outColor;"),r.push("void main(void) {"),i){r.push("if (clippable) {"),r.push("  float dist = 0.0;");for(o=0;o<s.sectionPlanes.length;o++)r.push("if (sectionPlaneActive"+o+") {"),r.push("   dist += clamp(dot(-sectionPlaneDir"+o+".xyz, vWorldPosition.xyz - sectionPlanePos"+o+".xyz), 0.0, 1000.0);"),r.push("}");r.push("  if (dist > 0.0) { discard; }"),r.push("}")}return r.push("outColor = encodeFloat(gl_FragCoord.z);"),r.push("}"),r}(e)}}const Fr=function(e,t){this._hash=e,this._shaderSource=new Br(t),this._scene=t.scene,this._useCount=0,this._allocate(t)},Lr={};Fr.get=function(e){const t=e.scene,s=[t.canvas.canvas.id,t._sectionPlanesState.getHash(),e._geometry._state.hash,e._state.hash].join(";");let i=Lr[s];if(!i){if(i=new Fr(s,e),i.errors)return console.log(i.errors.join("\n")),null;Lr[s]=i,d.memory.programs++}return i._useCount++,i},Fr.prototype.put=function(){0==--this._useCount&&(this._program&&this._program.destroy(),delete Lr[this._hash],d.memory.programs--)},Fr.prototype.webglContextRestored=function(){this._program=null},Fr.prototype.drawMesh=function(e,t){this._program||this._allocate(t);const s=this._scene.canvas.gl,i=t._material._state,r=t._geometry._state;if(e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram(e)),i.id!==this._lastMaterialId){const t=i.backfaces;e.backfaces!==t&&(t?s.disable(s.CULL_FACE):s.enable(s.CULL_FACE),e.backfaces=t);const r=i.frontface;e.frontface!==r&&(r?s.frontFace(s.CCW):s.frontFace(s.CW),e.frontface=r),e.lineWidth!==i.lineWidth&&(s.lineWidth(i.lineWidth),e.lineWidth=i.lineWidth),this._uPointSize&&s.uniform1i(this._uPointSize,i.pointSize),this._lastMaterialId=i.id}if(s.uniformMatrix4fv(this._uModelMatrix,s.FALSE,t.worldMatrix),r.combineGeometry){const i=t.vertexBufs;i.id!==this._lastVertexBufsId&&(i.positionsBuf&&this._aPosition&&(this._aPosition.bindArrayBuffer(i.positionsBuf,i.compressGeometry?s.UNSIGNED_SHORT:s.FLOAT),e.bindArray++),this._lastVertexBufsId=i.id)}this._uClippable&&s.uniform1i(this._uClippable,t._state.clippable),s.uniform3fv(this._uOffset,t._state.offset),r.id!==this._lastGeometryId&&(this._uPositionsDecodeMatrix&&s.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,r.positionsDecodeMatrix),r.combineGeometry?r.indicesBufCombined&&(r.indicesBufCombined.bind(),e.bindArray++):(this._aPosition&&(this._aPosition.bindArrayBuffer(r.positionsBuf,r.compressGeometry?s.UNSIGNED_SHORT:s.FLOAT),e.bindArray++),r.indicesBuf&&(r.indicesBuf.bind(),e.bindArray++)),this._lastGeometryId=r.id),r.combineGeometry?r.indicesBufCombined&&(s.drawElements(r.primitive,r.indicesBufCombined.numItems,r.indicesBufCombined.itemType,0),e.drawElements++):r.indicesBuf?(s.drawElements(r.primitive,r.indicesBuf.numItems,r.indicesBuf.itemType,0),e.drawElements++):r.positions&&(s.drawArrays(s.TRIANGLES,0,r.positions.numItems),e.drawArrays++)},Fr.prototype._allocate=function(e){const t=e.scene,s=t.canvas.gl;if(this._program=new ge(s,this._shaderSource),this._scene=t,this._useCount=0,this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uPositionsDecodeMatrix=i.getLocation("positionsDecodeMatrix"),this._uModelMatrix=i.getLocation("modelMatrix"),this._uShadowViewMatrix=i.getLocation("shadowViewMatrix"),this._uShadowProjMatrix=i.getLocation("shadowProjMatrix"),this._uSectionPlanes={};for(let e=0,s=t._sectionPlanesState.sectionPlanes.length;e<s;e++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+e),pos:i.getLocation("sectionPlanePos"+e),dir:i.getLocation("sectionPlaneDir"+e)});this._aPosition=i.getAttribute("position"),this._uClippable=i.getLocation("clippable"),this._uOffset=i.getLocation("offset"),this._lastMaterialId=null,this._lastVertexBufsId=null,this._lastGeometryId=null},Fr.prototype._bindProgram=function(e){this._program||this._allocate(mesh);const t=this._scene,s=t.canvas.gl,i=t._sectionPlanesState;if(this._program.bind(),e.useProgram++,s.uniformMatrix4fv(this._uShadowViewMatrix,!1,e.shadowViewMatrix),s.uniformMatrix4fv(this._uShadowProjMatrix,!1,e.shadowProjMatrix),this._lastMaterialId=null,this._lastVertexBufsId=null,this._lastGeometryId=null,i.sectionPlanes.length>0){let e,t,r,o,n;for(let a=0,l=this._uSectionPlanes.length;a<l;a++)e=this._uSectionPlanes[a],t=e.active,r=i.sectionPlanes[a],t&&s.uniform1i(t,r.active),o=e.pos,o&&s.uniform3fv(e.pos,r.pos),n=e.dir,n&&s.uniform3fv(e.dir,r.dir)}};const Ur=p.OBB3(),Hr=p.vec4(),Gr=p.vec4(),Vr=p.vec4(),kr=p.vec3([1,0,0]),jr=p.vec3([0,1,0]),Qr=p.vec3([0,0,1]),Wr=p.vec3(3),zr=p.vec3(3),Kr=p.identityMat4();class Yr extends x{constructor(e,t={}){super(e,t),this.originalSystemId=t.originalSystemId||this.id,this.renderFlags=new Ls,this._state=new Ze({visible:!0,culled:!1,pickable:null,clippable:null,collidable:null,occluder:!1!==t.occluder,castsShadow:null,receivesShadow:null,xrayed:!1,highlighted:!1,selected:!1,edges:!1,stationary:!!t.stationary,background:!!t.background,billboard:this._checkBillboard(t.billboard),layer:null,colorize:null,pickID:this.scene._renderer.getPickID(this),drawHash:"",pickHash:"",offset:p.vec3(),origin:null,originHash:null}),this._drawRenderer=null,this._shadowRenderer=null,this._emphasisFillRenderer=null,this._emphasisEdgesRenderer=null,this._pickMeshRenderer=null,this._pickTriangleRenderer=null,this._occlusionRenderer=null,this._geometry=t.geometry?this._checkComponent2(["ReadableGeometry","VBOGeometry"],t.geometry):this.scene.geometry,this._material=t.material?this._checkComponent2(["PhongMaterial","MetallicMaterial","SpecularMaterial","LambertMaterial"],t.material):this.scene.material,this._xrayMaterial=t.xrayMaterial?this._checkComponent("EmphasisMaterial",t.xrayMaterial):this.scene.xrayMaterial,this._highlightMaterial=t.highlightMaterial?this._checkComponent("EmphasisMaterial",t.highlightMaterial):this.scene.highlightMaterial,this._selectedMaterial=t.selectedMaterial?this._checkComponent("EmphasisMaterial",t.selectedMaterial):this.scene.selectedMaterial,this._edgeMaterial=t.edgeMaterial?this._checkComponent("EdgeMaterial",t.edgeMaterial):this.scene.edgeMaterial,this._parentNode=null,this._aabb=null,this._aabbDirty=!0,this._numTriangles=this._geometry?this._geometry.numTriangles:0,this.scene._aabbDirty=!0,this._scale=p.vec3(),this._quaternion=p.identityQuaternion(),this._rotation=p.vec3(),this._position=p.vec3(),this._worldMatrix=p.identityMat4(),this._worldNormalMatrix=p.identityMat4(),this._localMatrixDirty=!0,this._worldMatrixDirty=!0,this._worldNormalMatrixDirty=!0;const s=t.origin||t.rtcCenter;if(s&&(this._state.origin=p.vec3(s),this._state.originHash=s.join()),t.matrix?this.matrix=t.matrix:(this.scale=t.scale,this.position=t.position,t.quaternion||(this.rotation=t.rotation)),this._isObject=t.isObject,this._isObject&&this.scene._registerObject(this),this._isModel=t.isModel,this._isModel&&this.scene._registerModel(this),this.visible=t.visible,this.culled=t.culled,this.pickable=t.pickable,this.clippable=t.clippable,this.collidable=t.collidable,this.castsShadow=t.castsShadow,this.receivesShadow=t.receivesShadow,this.xrayed=t.xrayed,this.highlighted=t.highlighted,this.selected=t.selected,this.edges=t.edges,this.layer=t.layer,this.colorize=t.colorize,this.opacity=t.opacity,this.offset=t.offset,t.parentId){const e=this.scene.components[t.parentId];e?e.isNode?e.addChild(this):this.error("Parent is not a Node: '"+t.parentId+"'"):this.error("Parent not found: '"+t.parentId+"'"),this._parentNode=e}else t.parent&&(t.parent.isNode||this.error("Parent is not a Node"),t.parent.addChild(this),this._parentNode=t.parent);this.compile()}get type(){return"Mesh"}get isMesh(){return!0}get parent(){return this._parentNode}get geometry(){return this._geometry}get material(){return this._material}get position(){return this._position}set position(e){this._position.set(e||[0,0,0]),this._setLocalMatrixDirty(),this._setAABBDirty(),this.glRedraw()}get rotation(){return this._rotation}set rotation(e){this._rotation.set(e||[0,0,0]),p.eulerToQuaternion(this._rotation,"XYZ",this._quaternion),this._setLocalMatrixDirty(),this._setAABBDirty(),this.glRedraw()}get quaternion(){return this._quaternion}set quaternion(e){this._quaternion.set(e||[0,0,0,1]),p.quaternionToEuler(this._quaternion,"XYZ",this._rotation),this._setLocalMatrixDirty(),this._setAABBDirty(),this.glRedraw()}get scale(){return this._scale}set scale(e){this._scale.set(e||[1,1,1]),this._setLocalMatrixDirty(),this._setAABBDirty(),this.glRedraw()}get matrix(){return this._localMatrixDirty&&(this.__localMatrix||(this.__localMatrix=p.identityMat4()),p.composeMat4(this._position,this._quaternion,this._scale,this.__localMatrix),this._localMatrixDirty=!1),this.__localMatrix}set matrix(e){this.__localMatrix||(this.__localMatrix=p.identityMat4()),this.__localMatrix.set(e||Kr),p.decomposeMat4(this.__localMatrix,this._position,this._quaternion,this._scale),this._localMatrixDirty=!1,this._setWorldMatrixDirty(),this._setAABBDirty(),this.glRedraw()}get worldMatrix(){return this._worldMatrixDirty&&this._buildWorldMatrix(),this._worldMatrix}get worldNormalMatrix(){return this._worldNormalMatrixDirty&&this._buildWorldNormalMatrix(),this._worldNormalMatrix}get isEntity(){return!0}get isModel(){return this._isModel}get isObject(){return this._isObject}get aabb(){return this._aabbDirty&&this._updateAABB(),this._aabb}get origin(){return this._state.origin}set origin(e){e?(this._state.origin||(this._state.origin=p.vec3()),this._state.origin.set(e),this._state.originHash=e.join(),this._setAABBDirty(),this.scene._aabbDirty=!0):this._state.origin&&(this._state.origin=null,this._state.originHash=null,this._setAABBDirty(),this.scene._aabbDirty=!0)}get rtcCenter(){return this.origin}set rtcCenter(e){this.origin=e}get numTriangles(){return this._numTriangles}get visible(){return this._state.visible}set visible(e){e=!1!==e,this._state.visible=e,this._isObject&&this.scene._objectVisibilityUpdated(this,e),this.glRedraw()}get xrayed(){return this._state.xrayed}set xrayed(e){e=!!e,this._state.xrayed!==e&&(this._state.xrayed=e,this._isObject&&this.scene._objectXRayedUpdated(this,e),this.glRedraw())}get highlighted(){return this._state.highlighted}set highlighted(e){(e=!!e)!==this._state.highlighted&&(this._state.highlighted=e,this._isObject&&this.scene._objectHighlightedUpdated(this,e),this.glRedraw())}get selected(){return this._state.selected}set selected(e){(e=!!e)!==this._state.selected&&(this._state.selected=e,this._isObject&&this.scene._objectSelectedUpdated(this,e),this.glRedraw())}get edges(){return this._state.edges}set edges(e){(e=!!e)!==this._state.edges&&(this._state.edges=e,this.glRedraw())}get culled(){return this._state.culled}set culled(e){this._state.culled=!!e,this.glRedraw()}get clippable(){return this._state.clippable}set clippable(e){e=!1!==e,this._state.clippable!==e&&(this._state.clippable=e,this.glRedraw())}get collidable(){return this._state.collidable}set collidable(e){(e=!1!==e)!==this._state.collidable&&(this._state.collidable=e,this._setAABBDirty(),this.scene._aabbDirty=!0)}get pickable(){return this._state.pickable}set pickable(e){e=!1!==e,this._state.pickable!==e&&(this._state.pickable=e)}get castsShadow(){return this._state.castsShadow}set castsShadow(e){(e=!1!==e)!==this._state.castsShadow&&(this._state.castsShadow=e,this.glRedraw())}get receivesShadow(){return this._state.receivesShadow}set receivesShadow(e){(e=!1!==e)!==this._state.receivesShadow&&(this._state.receivesShadow=e,this._state.hash=e?"/mod/rs;":"/mod;",this.fire("dirty",this))}get saoEnabled(){return!1}get colorize(){return this._state.colorize}set colorize(e){let t=this._state.colorize;t||(t=this._state.colorize=new Float32Array(4),t[3]=1),e?(t[0]=e[0],t[1]=e[1],t[2]=e[2]):(t[0]=1,t[1]=1,t[2]=1);const s=!!e;this.scene._objectColorizeUpdated(this,s),this.glRedraw()}get opacity(){return this._state.colorize[3]}set opacity(e){let t=this._state.colorize;t||(t=this._state.colorize=new Float32Array(4),t[0]=1,t[1]=1,t[2]=1);const s=null!=e;t[3]=s?e:1,this.scene._objectOpacityUpdated(this,s),this.glRedraw()}get transparent(){return 2===this._material.alphaMode||this._state.colorize[3]<1}get layer(){return this._state.layer}set layer(e){e=e||0,(e=Math.round(e))!==this._state.layer&&(this._state.layer=e,this._renderer.needStateSort())}get stationary(){return this._state.stationary}get billboard(){return this._state.billboard}get offset(){return this._state.offset}set offset(e){this._state.offset.set(e||[0,0,0]),this._setAABBDirty(),this.glRedraw()}get isDrawable(){return!0}get isStateSortable(){return!0}get xrayMaterial(){return this._xrayMaterial}get highlightMaterial(){return this._highlightMaterial}get selectedMaterial(){return this._selectedMaterial}get edgeMaterial(){return this._edgeMaterial}_checkBillboard(e){return"spherical"!==(e=e||"none")&&"cylindrical"!==e&&"none"!==e&&(this.error("Unsupported value for 'billboard': "+e+" - accepted values are 'spherical', 'cylindrical' and 'none' - defaulting to 'none'."),e="none"),e}compile(){const e=this._makeDrawHash();this._state.drawHash!==e&&(this._state.drawHash=e,this._putDrawRenderers(),this._drawRenderer=ur.get(this),this._emphasisFillRenderer=mr.get(this),this._emphasisEdgesRenderer=_r.get(this));const t=this._makePickHash();if(this._state.pickHash!==t&&(this._state.pickHash=t,this._putPickRenderers(),this._pickMeshRenderer=Dr.get(this)),this._state.occluder){const e=this._makeOcclusionHash();this._state.occlusionHash!==e&&(this._state.occlusionHash=e,this._putOcclusionRenderer(),this._occlusionRenderer=wr.get(this))}}_setLocalMatrixDirty(){this._localMatrixDirty=!0,this._setWorldMatrixDirty()}_setWorldMatrixDirty(){this._worldMatrixDirty=!0,this._worldNormalMatrixDirty=!0}_buildWorldMatrix(){const e=this.matrix;if(this._parentNode)p.mulMat4(this._parentNode.worldMatrix,e,this._worldMatrix);else for(let t=0,s=e.length;t<s;t++)this._worldMatrix[t]=e[t];this._worldMatrixDirty=!1}_buildWorldNormalMatrix(){this._worldMatrixDirty&&this._buildWorldMatrix(),this._worldNormalMatrix||(this._worldNormalMatrix=p.mat4()),p.transposeMat4(this._worldMatrix,this._worldNormalMatrix),p.inverseMat4(this._worldNormalMatrix),this._worldNormalMatrixDirty=!1}_setAABBDirty(){if(this.collidable)for(let e=this;e;e=e._parentNode)e._aabbDirty=!0}_updateAABB(){this.scene._aabbDirty=!0,this._aabb||(this._aabb=p.AABB3()),this._buildAABB(this.worldMatrix,this._aabb),this._aabbDirty=!1}_webglContextRestored(){this._drawRenderer&&this._drawRenderer.webglContextRestored(),this._shadowRenderer&&this._shadowRenderer.webglContextRestored(),this._emphasisFillRenderer&&this._emphasisFillRenderer.webglContextRestored(),this._emphasisEdgesRenderer&&this._emphasisEdgesRenderer.webglContextRestored(),this._pickMeshRenderer&&this._pickMeshRenderer.webglContextRestored(),this._pickTriangleRenderer&&this._pickMeshRenderer.webglContextRestored(),this._occlusionRenderer&&this._occlusionRenderer.webglContextRestored()}_makeDrawHash(){const e=this.scene,t=[e.canvas.canvas.id,(e.gammaInput?"gi;":";")+(e.gammaOutput?"go":""),e._lightsState.getHash(),e._sectionPlanesState.getHash()],s=this._state;return s.stationary&&t.push("/s"),"none"===s.billboard?t.push("/n"):"spherical"===s.billboard?t.push("/s"):"cylindrical"===s.billboard&&t.push("/c"),s.receivesShadow&&t.push("/rs"),t.push(";"),t.join("")}_makePickHash(){const e=this.scene,t=[e.canvas.canvas.id,e._sectionPlanesState.getHash()],s=this._state;return s.stationary&&t.push("/s"),"none"===s.billboard?t.push("/n"):"spherical"===s.billboard?t.push("/s"):"cylindrical"===s.billboard&&t.push("/c"),t.push(";"),t.join("")}_makeOcclusionHash(){const e=this.scene,t=[e.canvas.canvas.id,e._sectionPlanesState.getHash()],s=this._state;return s.stationary&&t.push("/s"),"none"===s.billboard?t.push("/n"):"spherical"===s.billboard?t.push("/s"):"cylindrical"===s.billboard&&t.push("/c"),t.push(";"),t.join("")}_buildAABB(e,t){p.transformOBB3(e,this._geometry.obb,Ur),p.OBB3ToAABB3(Ur,t);const s=this._state.offset;if(t[0]+=s[0],t[1]+=s[1],t[2]+=s[2],t[3]+=s[0],t[4]+=s[1],t[5]+=s[2],this._state.origin){const e=this._state.origin;t[0]+=e[0],t[1]+=e[1],t[2]+=e[2],t[3]+=e[0],t[4]+=e[1],t[5]+=e[2]}}rotate(e,t){return Hr[0]=e[0],Hr[1]=e[1],Hr[2]=e[2],Hr[3]=t*p.DEGTORAD,p.angleAxisToQuaternion(Hr,Gr),p.mulQuaternions(this.quaternion,Gr,Vr),this.quaternion=Vr,this._setLocalMatrixDirty(),this._setAABBDirty(),this.glRedraw(),this}rotateOnWorldAxis(e,t){return Hr[0]=e[0],Hr[1]=e[1],Hr[2]=e[2],Hr[3]=t*p.DEGTORAD,p.angleAxisToQuaternion(Hr,Gr),p.mulQuaternions(Gr,this.quaternion,Gr),this}rotateX(e){return this.rotate(kr,e)}rotateY(e){return this.rotate(jr,e)}rotateZ(e){return this.rotate(Qr,e)}translate(e,t){return p.vec3ApplyQuaternion(this.quaternion,e,Wr),p.mulVec3Scalar(Wr,t,zr),p.addVec3(this.position,zr,this.position),this._setLocalMatrixDirty(),this._setAABBDirty(),this.glRedraw(),this}translateX(e){return this.translate(kr,e)}translateY(e){return this.translate(jr,e)}translateZ(e){return this.translate(Qr,e)}_putDrawRenderers(){this._drawRenderer&&(this._drawRenderer.put(),this._drawRenderer=null),this._shadowRenderer&&(this._shadowRenderer.put(),this._shadowRenderer=null),this._emphasisFillRenderer&&(this._emphasisFillRenderer.put(),this._emphasisFillRenderer=null),this._emphasisEdgesRenderer&&(this._emphasisEdgesRenderer.put(),this._emphasisEdgesRenderer=null)}_putPickRenderers(){this._pickMeshRenderer&&(this._pickMeshRenderer.put(),this._pickMeshRenderer=null),this._pickTriangleRenderer&&(this._pickTriangleRenderer.put(),this._pickTriangleRenderer=null)}_putOcclusionRenderer(){this._occlusionRenderer&&(this._occlusionRenderer.put(),this._occlusionRenderer=null)}stateSortCompare(e,t){return e._state.layer-t._state.layer||e._drawRenderer.id-t._drawRenderer.id||e._material._state.id-t._material._state.id||e._geometry._state.id-t._geometry._state.id}rebuildRenderFlags(){this.renderFlags.reset(),this._getActiveSectionPlanes()?(this.renderFlags.numLayers=1,this.renderFlags.numVisibleLayers=1,this.renderFlags.visibleLayers[0]=0,this._updateRenderFlags()):this.renderFlags.culled=!0}_updateRenderFlags(){const e=this.renderFlags,t=this._state;if(t.xrayed){const t=this._xrayMaterial._state;t.fill&&(t.fillAlpha<1?e.xrayedSilhouetteTransparent=!0:e.xrayedSilhouetteOpaque=!0),t.edges&&(t.edgeAlpha<1?e.xrayedEdgesTransparent=!0:e.xrayedEdgesOpaque=!0)}else{if(this._material._state.alpha<1||t.colorize[3]<1?e.colorTransparent=!0:e.colorOpaque=!0,t.edges){this._edgeMaterial._state.alpha<1?e.edgesTransparent=!0:e.edgesOpaque=!0}if(t.selected){const t=this._selectedMaterial._state;t.fill&&(t.fillAlpha<1?e.selectedSilhouetteTransparent=!0:e.selectedSilhouetteOpaque=!0),t.edges&&(t.edgeAlpha<1?e.selectedEdgesTransparent=!0:e.selectedEdgesOpaque=!0)}else if(t.highlighted){const t=this._highlightMaterial._state;t.fill&&(t.fillAlpha<1?e.highlightedSilhouetteTransparent=!0:e.highlightedSilhouetteOpaque=!0),t.edges&&(t.edgeAlpha<1?e.highlightedEdgesTransparent=!0:e.highlightedEdgesOpaque=!0)}}}_getActiveSectionPlanes(){if(this._state.clippable){const e=this.scene._sectionPlanesState.sectionPlanes,t=e.length;if(t>0)for(let s=0;s<t;s++){const t=e[s],i=this.renderFlags;if(t.active)if(this._state.origin){const e=p.planeAABB3Intersect(t.dir,t.dist,this.aabb);if(-1===e)return!1;const r=0===e;i.sectionPlanesActivePerLayer[s]=r}else i.sectionPlanesActivePerLayer[s]=!0;else i.sectionPlanesActivePerLayer[s]=!1}}return!0}drawColorOpaque(e){(this._drawRenderer||(this._drawRenderer=ur.get(this)))&&this._drawRenderer.drawMesh(e,this)}drawColorTransparent(e){(this._drawRenderer||(this._drawRenderer=ur.get(this)))&&this._drawRenderer.drawMesh(e,this)}drawSilhouetteXRayed(e){(this._emphasisFillRenderer||(this._emphasisFillRenderer=mr.get(this)))&&this._emphasisFillRenderer.drawMesh(e,this,0)}drawSilhouetteHighlighted(e){(this._emphasisFillRenderer||(this._emphasisFillRenderer=mr.get(this)))&&this._emphasisFillRenderer.drawMesh(e,this,1)}drawSilhouetteSelected(e){(this._emphasisFillRenderer||(this._emphasisFillRenderer=mr.get(this)))&&this._emphasisFillRenderer.drawMesh(e,this,2)}drawEdgesColorOpaque(e){(this._emphasisEdgesRenderer||(this._emphasisEdgesRenderer=_r.get(this)))&&this._emphasisEdgesRenderer.drawMesh(e,this,3)}drawEdgesColorTransparent(e){(this._emphasisEdgesRenderer||(this._emphasisEdgesRenderer=_r.get(this)))&&this._emphasisEdgesRenderer.drawMesh(e,this,3)}drawEdgesXRayed(e){(this._emphasisEdgesRenderer||(this._emphasisEdgesRenderer=_r.get(this)))&&this._emphasisEdgesRenderer.drawMesh(e,this,0)}drawEdgesHighlighted(e){(this._emphasisEdgesRenderer||(this._emphasisEdgesRenderer=_r.get(this)))&&this._emphasisEdgesRenderer.drawMesh(e,this,1)}drawEdgesSelected(e){(this._emphasisEdgesRenderer||(this._emphasisEdgesRenderer=_r.get(this)))&&this._emphasisEdgesRenderer.drawMesh(e,this,2)}drawOcclusion(e){(this._state.occluder&&this._occlusionRenderer||(this._occlusionRenderer=wr.get(this)))&&this._occlusionRenderer.drawMesh(e,this)}drawShadow(e){(this._shadowRenderer||(this._shadowRenderer=Fr.get(this)))&&this._shadowRenderer.drawMesh(e,this)}drawPickMesh(e){(this._pickMeshRenderer||(this._pickMeshRenderer=Dr.get(this)))&&this._pickMeshRenderer.drawMesh(e,this)}canPickTriangle(){return this._geometry.isReadableGeometry}drawPickTriangles(e){(this._pickTriangleRenderer||(this._pickTriangleRenderer=xr.get(this)))&&this._pickTriangleRenderer.drawMesh(e,this)}pickTriangleSurface(e,t,s){Xr(this,e,t,s)}drawPickVertices(e){}delegatePickedEntity(){return this}destroy(){super.destroy(),this._putDrawRenderers(),this._putPickRenderers(),this._putOcclusionRenderer(),this.scene._renderer.putPickID(this._state.pickID),this._isObject&&(this.scene._deregisterObject(this),this._visible&&this.scene._objectVisibilityUpdated(this,!1,!1),this._xrayed&&this.scene._objectXRayedUpdated(this,!1,!1),this._selected&&this.scene._objectSelectedUpdated(this,!1,!1),this._highlighted&&this.scene._objectHighlightedUpdated(this,!1,!1),this.scene._objectColorizeUpdated(this,!1),this.scene._objectOpacityUpdated(this,!1),this.offset.some((e=>0!==e))&&this.scene._objectOffsetUpdated(this,!1)),this._isModel&&this.scene._deregisterModel(this),this.glRedraw()}}const Xr=function(){const e=p.vec3(),t=p.vec3(),s=p.vec3(),i=p.vec3(),r=p.vec3(),o=p.vec3(),n=p.vec4(),a=p.vec3(),l=p.vec3(),h=p.vec3(),c=p.vec3(),u=p.vec3(),A=p.vec3(),d=p.vec3(),f=p.vec3(),m=p.vec3(),g=p.vec4(),y=p.vec4(),E=p.vec4(),v=p.vec3(),_=p.vec3(),I=p.vec3(),T=p.vec3(),P=p.vec3(),D=p.vec3(),b=p.vec3(),R=p.vec3(),C=p.vec3(),x=p.vec3(),N=p.vec3();return function(O,S,w,M){var B=M.primIndex;if(null!=B&&B>-1){const H=O.geometry._state,G=O.scene,V=G.camera,k=G.canvas;if("triangles"===H.primitiveName){M.primitive="triangle";const G=B,Q=H.indices,W=H.positions;let z,K,Y;if(Q){var F=Q[G+0],L=Q[G+1],U=Q[G+2];o[0]=F,o[1]=L,o[2]=U,M.indices=o,z=3*F,K=3*L,Y=3*U}else z=3*G,K=z+3,Y=K+3;if(s[0]=W[z+0],s[1]=W[z+1],s[2]=W[z+2],i[0]=W[K+0],i[1]=W[K+1],i[2]=W[K+2],r[0]=W[Y+0],r[1]=W[Y+1],r[2]=W[Y+2],H.compressGeometry){const e=H.positionsDecodeMatrix;e&&(it.decompressPosition(s,e,s),it.decompressPosition(i,e,i),it.decompressPosition(r,e,r))}M.canvasPos?p.canvasPosToLocalRay(k.canvas,O.origin?j(S,O.origin):S,w,O.worldMatrix,M.canvasPos,e,t):M.origin&&M.direction&&p.worldRayToLocalRay(O.worldMatrix,M.origin,M.direction,e,t),p.normalizeVec3(t),p.rayPlaneIntersect(e,t,s,i,r,n),M.localPos=n,M.position=n,g[0]=n[0],g[1]=n[1],g[2]=n[2],g[3]=1,p.transformVec4(O.worldMatrix,g,y),a[0]=y[0],a[1]=y[1],a[2]=y[2],M.canvasPos&&O.origin&&(a[0]+=O.origin[0],a[1]+=O.origin[1],a[2]+=O.origin[2]),M.worldPos=a,p.transformVec4(V.matrix,y,E),l[0]=E[0],l[1]=E[1],l[2]=E[2],M.viewPos=l,p.cartesianToBarycentric(n,s,i,r,h),M.bary=h;const X=H.normals;if(X){if(H.compressGeometry){const e=3*F,t=3*L,s=3*U;it.decompressNormal(X.subarray(e,e+2),c),it.decompressNormal(X.subarray(t,t+2),u),it.decompressNormal(X.subarray(s,s+2),A)}else c[0]=X[z],c[1]=X[z+1],c[2]=X[z+2],u[0]=X[K],u[1]=X[K+1],u[2]=X[K+2],A[0]=X[Y],A[1]=X[Y+1],A[2]=X[Y+2];const e=p.addVec3(p.addVec3(p.mulVec3Scalar(c,h[0],v),p.mulVec3Scalar(u,h[1],_),I),p.mulVec3Scalar(A,h[2],T),P);M.worldNormal=p.normalizeVec3(p.transformVec3(O.worldNormalMatrix,e,D))}const Z=H.uv;if(Z){if(d[0]=Z[2*F],d[1]=Z[2*F+1],f[0]=Z[2*L],f[1]=Z[2*L+1],m[0]=Z[2*U],m[1]=Z[2*U+1],H.compressGeometry){const e=H.uvDecodeMatrix;e&&(it.decompressUV(d,e,d),it.decompressUV(f,e,f),it.decompressUV(m,e,m))}M.uv=p.addVec3(p.addVec3(p.mulVec2Scalar(d,h[0],b),p.mulVec2Scalar(f,h[1],R),C),p.mulVec2Scalar(m,h[2],x),N)}}}}}();function Zr(e={}){let t=e.radiusTop||1;t<0&&(console.error("negative radiusTop not allowed - will invert"),t*=-1);let s=e.radiusBottom||1;s<0&&(console.error("negative radiusBottom not allowed - will invert"),s*=-1);let i=e.height||1;i<0&&(console.error("negative height not allowed - will invert"),i*=-1);let r=e.radialSegments||32;r<0&&(console.error("negative radialSegments not allowed - will invert"),r*=-1),r<3&&(r=3);let o=e.heightSegments||1;o<0&&(console.error("negative heightSegments not allowed - will invert"),o*=-1),o<1&&(o=1);const n=!!e.openEnded;let a=e.center;const l=a?a[0]:0,h=a?a[1]:0,c=a?a[2]:0,u=i/2,A=i/o,p=2*Math.PI/r,d=1/r,f=(t-s)/o,m=[],g=[],E=[],v=[];let _,I,T,P,D,b,R,C,x,N,O;const S=(90-180*Math.atan(i/(s-t))/Math.PI)/90;for(_=0;_<=o;_++)for(D=t-_*f,b=u-_*A,I=0;I<=r;I++)T=Math.sin(I*p),P=Math.cos(I*p),g.push(D*T),g.push(S),g.push(D*P),E.push(I*d),E.push(1*_/o),m.push(D*T+l),m.push(b+h),m.push(D*P+c);for(_=0;_<o;_++)for(I=0;I<=r;I++)R=_*(r+1)+I,C=R+r,v.push(R),v.push(C),v.push(C+1),v.push(R),v.push(C+1),v.push(R+1);if(!n&&t>0){for(x=m.length/3,g.push(0),g.push(1),g.push(0),E.push(.5),E.push(.5),m.push(0+l),m.push(u+h),m.push(0+c),I=0;I<=r;I++)T=Math.sin(I*p),P=Math.cos(I*p),N=.5*Math.sin(I*p)+.5,O=.5*Math.cos(I*p)+.5,g.push(t*T),g.push(1),g.push(t*P),E.push(N),E.push(O),m.push(t*T+l),m.push(u+h),m.push(t*P+c);for(I=0;I<r;I++)a=x,R=x+1+I,v.push(R),v.push(R+1),v.push(a)}if(!n&&s>0){for(x=m.length/3,g.push(0),g.push(-1),g.push(0),E.push(.5),E.push(.5),m.push(0+l),m.push(0-u+h),m.push(0+c),I=0;I<=r;I++)T=Math.sin(I*p),P=Math.cos(I*p),N=.5*Math.sin(I*p)+.5,O=.5*Math.cos(I*p)+.5,g.push(s*T),g.push(-1),g.push(s*P),E.push(N),E.push(O),m.push(s*T+l),m.push(0-u+h),m.push(s*P+c);for(I=0;I<r;I++)a=x,R=x+1+I,v.push(a),v.push(R+1),v.push(R)}return y.apply(e,{positions:m,normals:g,uv:E,indices:v})}function qr(e={}){const t=e.lod||1,s=e.center?e.center[0]:0,i=e.center?e.center[1]:0,r=e.center?e.center[2]:0;let o=e.radius||1;o<0&&(console.error("negative radius not allowed - will invert"),o*=-1);let n=e.heightSegments||18;n<0&&(console.error("negative heightSegments not allowed - will invert"),n*=-1),n=Math.floor(t*n),n<18&&(n=18);let a=e.widthSegments||18;a<0&&(console.error("negative widthSegments not allowed - will invert"),a*=-1),a=Math.floor(t*a),a<18&&(a=18);const l=[],h=[],c=[],u=[];let A,p,d,f,m,g,E,v,_,I,T,P,D,b,R;for(A=0;A<=n;A++)for(d=A*Math.PI/n,f=Math.sin(d),m=Math.cos(d),p=0;p<=a;p++)g=2*p*Math.PI/a,E=Math.sin(g),v=Math.cos(g),_=v*f,I=m,T=E*f,P=1-p/a,D=A/n,h.push(_),h.push(I),h.push(T),c.push(P),c.push(D),l.push(s+o*_),l.push(i+o*I),l.push(r+o*T);for(A=0;A<n;A++)for(p=0;p<a;p++)b=A*(a+1)+p,R=b+a+1,u.push(b+1),u.push(R+1),u.push(R),u.push(b+1),u.push(R),u.push(b);return y.apply(e,{positions:l,normals:h,uv:c,indices:u})}class Jr extends x{get type(){return"SectionPlane"}constructor(e,t={}){super(e,t),this._state=new Ze({active:!0,pos:p.vec3(),dir:p.vec3(),dist:0}),this.active=t.active,this.pos=t.pos,this.dir=t.dir,this.scene._sectionPlaneCreated(this)}set active(e){this._state.active=!1!==e,this.glRedraw(),this.fire("active",this._state.active)}get active(){return this._state.active}set pos(e){this._state.pos.set(e||[0,0,0]),this._state.dist=-p.dotVec3(this._state.pos,this._state.dir),this.fire("pos",this._state.pos)}get pos(){return this._state.pos}set dir(e){this._state.dir.set(e||[0,0,-1]),this._state.dist=-p.dotVec3(this._state.pos,this._state.dir),this.glRedraw(),this.fire("dir",this._state.dir)}get dir(){return this._state.dir}get dist(){return this._state.dist}flipDir(){const e=this._state.dir;e[0]*=-1,e[1]*=-1,e[2]*=-1,this._state.dist=-p.dotVec3(this._state.pos,this._state.dir),this.fire("dir",this._state.dir),this.glRedraw()}destroy(){this._state.destroy(),this.scene._sectionPlaneDestroyed(this),super.destroy()}}const $r=p.vec4(4),eo=p.vec4(),to=p.vec4(),so=p.vec3([1,0,0]),io=p.vec3([0,1,0]),ro=p.vec3([0,0,1]),oo=p.vec3(3),no=p.vec3(3),ao=p.identityMat4();class lo extends x{constructor(e,t={}){if(super(e,t),this._parentNode=null,this._children=[],this._aabb=null,this._aabbDirty=!0,this.scene._aabbDirty=!0,this._numTriangles=0,this._scale=p.vec3(),this._quaternion=p.identityQuaternion(),this._rotation=p.vec3(),this._position=p.vec3(),this._offset=p.vec3(),this._localMatrix=p.identityMat4(),this._worldMatrix=p.identityMat4(),this._localMatrixDirty=!0,this._worldMatrixDirty=!0,t.matrix?this.matrix=t.matrix:(this.scale=t.scale,this.position=t.position,t.quaternion||(this.rotation=t.rotation)),this._isModel=t.isModel,this._isModel&&this.scene._registerModel(this),this._isObject=t.isObject,this._isObject&&this.scene._registerObject(this),this.origin=t.origin,this.visible=t.visible,this.culled=t.culled,this.pickable=t.pickable,this.clippable=t.clippable,this.collidable=t.collidable,this.castsShadow=t.castsShadow,this.receivesShadow=t.receivesShadow,this.xrayed=t.xrayed,this.highlighted=t.highlighted,this.selected=t.selected,this.edges=t.edges,this.colorize=t.colorize,this.opacity=t.opacity,this.offset=t.offset,t.children){const e=t.children;for(let s=0,i=e.length;s<i;s++)this.addChild(e[s],t.inheritStates)}if(t.parentId){const e=this.scene.components[t.parentId];e?e.isNode?e.addChild(this):this.error("Parent is not a Node: '"+t.parentId+"'"):this.error("Parent not found: '"+t.parentId+"'")}else t.parent&&(t.parent.isNode||this.error("Parent is not a Node"),t.parent.addChild(this))}get isEntity(){return!0}get isModel(){return this._isModel}get isObject(){return this._isObject}get aabb(){return this._aabbDirty&&this._updateAABB(),this._aabb}set origin(e){e?(this._origin||(this._origin=p.vec3()),this._origin.set(e)):this._origin&&(this._origin=null);for(let t=0,s=this._children.length;t<s;t++)this._children[t].origin=e;this.glRedraw()}get origin(){return this._origin}set rtcCenter(e){this.origin=e}get rtcCenter(){return this.origin}get numTriangles(){return this._numTriangles}set visible(e){e=!1!==e,this._visible=e;for(let t=0,s=this._children.length;t<s;t++)this._children[t].visible=e;this._isObject&&this.scene._objectVisibilityUpdated(this,e)}get visible(){return this._visible}set xrayed(e){e=!!e,this._xrayed=e;for(let t=0,s=this._children.length;t<s;t++)this._children[t].xrayed=e;this._isObject&&this.scene._objectXRayedUpdated(this,e)}get xrayed(){return this._xrayed}set highlighted(e){e=!!e,this._highlighted=e;for(let t=0,s=this._children.length;t<s;t++)this._children[t].highlighted=e;this._isObject&&this.scene._objectHighlightedUpdated(this,e)}get highlighted(){return this._highlighted}set selected(e){e=!!e,this._selected=e;for(let t=0,s=this._children.length;t<s;t++)this._children[t].selected=e;this._isObject&&this.scene._objectSelectedUpdated(this,e)}get selected(){return this._selected}set edges(e){e=!!e,this._edges=e;for(let t=0,s=this._children.length;t<s;t++)this._children[t].edges=e}get edges(){return this._edges}set culled(e){e=!!e,this._culled=e;for(let t=0,s=this._children.length;t<s;t++)this._children[t].culled=e}get culled(){return this._culled}set clippable(e){e=!1!==e,this._clippable=e;for(let t=0,s=this._children.length;t<s;t++)this._children[t].clippable=e}get clippable(){return this._clippable}set collidable(e){e=!1!==e,this._collidable=e;for(let t=0,s=this._children.length;t<s;t++)this._children[t].collidable=e}get collidable(){return this._collidable}set pickable(e){e=!1!==e,this._pickable=e;for(let t=0,s=this._children.length;t<s;t++)this._children[t].pickable=e}get pickable(){return this._pickable}set colorize(e){let t=this._colorize;t||(t=this._colorize=new Float32Array(4),t[3]=1),e?(t[0]=e[0],t[1]=e[1],t[2]=e[2]):(t[0]=1,t[1]=1,t[2]=1);for(let e=0,s=this._children.length;e<s;e++)this._children[e].colorize=t;if(this._isObject){const t=!!e;this.scene._objectColorizeUpdated(this,t)}}get colorize(){return this._colorize.slice(0,3)}set opacity(e){let t=this._colorize;t||(t=this._colorize=new Float32Array(4),t[0]=1,t[1]=1,t[2]=1),t[3]=null!=e?e:1;for(let t=0,s=this._children.length;t<s;t++)this._children[t].opacity=e;if(this._isObject){const t=null!=e;this.scene._objectOpacityUpdated(this,t)}}get opacity(){return this._colorize[3]}set castsShadow(e){e=!!e,this._castsShadow=e;for(let t=0,s=this._children.length;t<s;t++)this._children[t].castsShadow=e}get castsShadow(){return this._castsShadow}set receivesShadow(e){e=!!e,this._receivesShadow=e;for(let t=0,s=this._children.length;t<s;t++)this._children[t].receivesShadow=e}get receivesShadow(){return this._receivesShadow}get saoEnabled(){return!1}set offset(e){e?(this._offset[0]=e[0],this._offset[1]=e[1],this._offset[2]=e[2]):(this._offset[0]=0,this._offset[1]=0,this._offset[2]=0);for(let e=0,t=this._children.length;e<t;e++)this._children[e].offset=this._offset;this._isObject&&this.scene._objectOffsetUpdated(this,e)}get offset(){return this._offset}get isNode(){return!0}_setLocalMatrixDirty(){this._localMatrixDirty=!0,this._setWorldMatrixDirty()}_setWorldMatrixDirty(){this._worldMatrixDirty=!0;for(let e=0,t=this._children.length;e<t;e++)this._children[e]._setWorldMatrixDirty()}_buildWorldMatrix(){const e=this.matrix;if(this._parentNode)p.mulMat4(this._parentNode.worldMatrix,e,this._worldMatrix);else for(let t=0,s=e.length;t<s;t++)this._worldMatrix[t]=e[t];this._worldMatrixDirty=!1}_setSubtreeAABBsDirty(e){if(e._aabbDirty=!0,e._children)for(let t=0,s=e._children.length;t<s;t++)this._setSubtreeAABBsDirty(e._children[t])}_setAABBDirty(){if(this._setSubtreeAABBsDirty(this),this.collidable)for(let e=this;e;e=e._parentNode)e._aabbDirty=!0}_updateAABB(){if(this.scene._aabbDirty=!0,this._aabb||(this._aabb=p.AABB3()),this._buildAABB)this._buildAABB(this.worldMatrix,this._aabb);else{let e;p.collapseAABB3(this._aabb);for(let t=0,s=this._children.length;t<s;t++)e=this._children[t],e.collidable&&p.expandAABB3(this._aabb,e.aabb)}this._aabbDirty=!1}addChild(e,t){if(y.isNumeric(e)||y.isString(e)){const t=e;if(!(e=this.scene.component[t]))return void this.warn("Component not found: "+y.inQuotes(t));if(!e.isNode&&!e.isMesh)return void this.error("Not a Node or Mesh: "+t)}else{if(!e.isNode&&!e.isMesh)return void this.error("Not a Node or Mesh: "+e.id);if(e._parentNode){if(e._parentNode.id===this.id)return void this.warn("Already a child: "+e.id);e._parentNode.removeChild(e)}}if(e.id,e.scene.id===this.scene.id)return this._children.push(e),e._parentNode=this,t&&(e.visible=this.visible,e.culled=this.culled,e.xrayed=this.xrayed,e.highlited=this.highlighted,e.selected=this.selected,e.edges=this.edges,e.clippable=this.clippable,e.pickable=this.pickable,e.collidable=this.collidable,e.castsShadow=this.castsShadow,e.receivesShadow=this.receivesShadow,e.colorize=this.colorize,e.opacity=this.opacity,e.offset=this.offset),e._setWorldMatrixDirty(),e._setAABBDirty(),this._numTriangles+=e.numTriangles,e;this.error("Child not in same Scene: "+e.id)}removeChild(e){for(let t=0,s=this._children.length;t<s;t++)if(this._children[t].id===e.id)return e._parentNode=null,this._children=this._children.splice(t,1),e._setWorldMatrixDirty(),e._setAABBDirty(),this._setAABBDirty(),void(this._numTriangles-=e.numTriangles)}removeChildren(){let e;for(let t=0,s=this._children.length;t<s;t++)e=this._children[t],e._parentNode=null,e._setWorldMatrixDirty(),e._setAABBDirty(),this._numTriangles-=e.numTriangles;this._children=[],this._setAABBDirty()}get numChildren(){return this._children.length}get children(){return this._children}set parent(e){if(y.isNumeric(e)||y.isString(e)){const t=e;if(!(e=this.scene.components[t]))return void this.warn("Node not found: "+y.inQuotes(t));if(!e.isNode)return void this.error("Not a Node: "+e.id)}e.scene.id===this.scene.id?this._parentNode&&this._parentNode.id===e.id?this.warn("Already a child of Node: "+e.id):e.addChild(this):this.error("Node not in same Scene: "+e.id)}get parent(){return this._parentNode}set position(e){this._position.set(e||[0,0,0]),this._setLocalMatrixDirty(),this._setAABBDirty(),this.glRedraw()}get position(){return this._position}set rotation(e){this._rotation.set(e||[0,0,0]),p.eulerToQuaternion(this._rotation,"XYZ",this._quaternion),this._setLocalMatrixDirty(),this._setAABBDirty(),this.glRedraw()}get rotation(){return this._rotation}set quaternion(e){this._quaternion.set(e||[0,0,0,1]),p.quaternionToEuler(this._quaternion,"XYZ",this._rotation),this._setLocalMatrixDirty(),this._setAABBDirty(),this.glRedraw()}get quaternion(){return this._quaternion}set scale(e){this._scale.set(e||[1,1,1]),this._setLocalMatrixDirty(),this._setAABBDirty(),this.glRedraw()}get scale(){return this._scale}set matrix(e){this._localMatrix||(this._localMatrix=p.identityMat4()),this._localMatrix.set(e||ao),p.decomposeMat4(this._localMatrix,this._position,this._quaternion,this._scale),this._localMatrixDirty=!1,this._setWorldMatrixDirty(),this._setAABBDirty(),this.glRedraw()}get matrix(){return this._localMatrixDirty&&(this._localMatrix||(this._localMatrix=p.identityMat4()),p.composeMat4(this._position,this._quaternion,this._scale,this._localMatrix),this._localMatrixDirty=!1),this._localMatrix}get worldMatrix(){return this._worldMatrixDirty&&this._buildWorldMatrix(),this._worldMatrix}rotate(e,t){return $r[0]=e[0],$r[1]=e[1],$r[2]=e[2],$r[3]=t*p.DEGTORAD,p.angleAxisToQuaternion($r,eo),p.mulQuaternions(this.quaternion,eo,to),this.quaternion=to,this._setLocalMatrixDirty(),this._setAABBDirty(),this.glRedraw(),this}rotateOnWorldAxis(e,t){return $r[0]=e[0],$r[1]=e[1],$r[2]=e[2],$r[3]=t*p.DEGTORAD,p.angleAxisToQuaternion($r,eo),p.mulQuaternions(eo,this.quaternion,eo),this}rotateX(e){return this.rotate(so,e)}rotateY(e){return this.rotate(io,e)}rotateZ(e){return this.rotate(ro,e)}translate(e,t){return p.vec3ApplyQuaternion(this.quaternion,e,oo),p.mulVec3Scalar(oo,t,no),p.addVec3(this.position,no,this.position),this._setLocalMatrixDirty(),this._setAABBDirty(),this.glRedraw(),this}translateX(e){return this.translate(so,e)}translateY(e){return this.translate(io,e)}translateZ(e){return this.translate(ro,e)}get type(){return"Node"}destroy(){if(super.destroy(),this._parentNode&&this._parentNode.removeChild(this),this._isObject&&(this.scene._deregisterObject(this),this._visible&&this.scene._objectVisibilityUpdated(this,!1,!1),this._xrayed&&this.scene._objectXRayedUpdated(this,!1,!1),this._selected&&this.scene._objectSelectedUpdated(this,!1,!1),this._highlighted&&this.scene._objectHighlightedUpdated(this,!1,!1),this.scene._objectColorizeUpdated(this,!1),this.scene._objectOpacityUpdated(this,!1),this.offset.some((e=>0!==e))&&this.scene._objectOffsetUpdated(this,!1)),this._isModel&&this.scene._deregisterModel(this),this._children.length){const e=this._children.splice();let t;for(let s=0,i=e.length;s<i;s++)t=e[s],t.destroy()}this._children=[],this._setAABBDirty(),this.scene._aabbDirty=!0}}function ho(e,t,s=null){let i;const r=t;if(1009===r)return e.UNSIGNED_BYTE;if(1017===r)return e.UNSIGNED_SHORT_4_4_4_4;if(1018===r)return e.UNSIGNED_SHORT_5_5_5_1;if(1010===r)return e.BYTE;if(1011===r)return e.SHORT;if(1012===r)return e.UNSIGNED_SHORT;if(1013===r)return e.INT;if(1014===r)return e.UNSIGNED_INT;if(1015===r)return e.FLOAT;if(1016===r)return e.HALF_FLOAT;if(1021===r)return e.ALPHA;if(r===zi)return e.RGBA;if(1024===r)return e.LUMINANCE;if(1025===r)return e.LUMINANCE_ALPHA;if(1026===r)return e.DEPTH_COMPONENT;if(1027===r)return e.DEPTH_STENCIL;if(1028===r)return e.RED;if(1022===r)return e.RGBA;if(1029===r)return e.RED_INTEGER;if(1030===r)return e.RG;if(1031===r)return e.RG_INTEGER;if(1033===r)return e.RGBA_INTEGER;if(r===Ki||r===Yi||r===Xi||r===Zi)if(s===rr){const t=Me(e,"WEBGL_compressed_texture_s3tc_srgb");if(null===t)return null;if(r===Ki)return t.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(r===Yi)return t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(r===Xi)return t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(r===Zi)return t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(i=Me(e,"WEBGL_compressed_texture_s3tc"),null===i)return null;if(r===Ki)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(r===Yi)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(r===Xi)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(r===Zi)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(r===qi||35841===r||r===Ji||35843===r){const t=Me(e,"WEBGL_compressed_texture_pvrtc");if(null===t)return null;if(r===qi)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===r)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(r===Ji)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===r)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===r){const t=Me(e,"WEBGL_compressed_texture_etc1");return null!==t?t.COMPRESSED_RGB_ETC1_WEBGL:null}if(r===$i||r===er){const t=Me(e,"WEBGL_compressed_texture_etc");if(null===t)return null;if(r===$i)return s===rr?t.COMPRESSED_SRGB8_ETC2:t.COMPRESSED_RGB8_ETC2;if(r===er)return s===rr?t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:t.COMPRESSED_RGBA8_ETC2_EAC}if(r===tr||37809===r||37810===r||37811===r||37812===r||37813===r||37814===r||37815===r||37816===r||37817===r||37818===r||37819===r||37820===r||37821===r){const t=Me(e,"WEBGL_compressed_texture_astc");if(null===t)return null;if(r===tr)return s===rr?t.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:t.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===r)return s===rr?t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:t.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===r)return s===rr?t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:t.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===r)return s===rr?t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:t.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===r)return s===rr?t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:t.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===r)return s===rr?t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:t.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===r)return s===rr?t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:t.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===r)return s===rr?t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:t.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===r)return s===rr?t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:t.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===r)return s===rr?t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:t.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===r)return s===rr?t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:t.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===r)return s===rr?t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:t.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===r)return s===rr?t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:t.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===r)return s===rr?t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:t.COMPRESSED_RGBA_ASTC_12x12_KHR}if(r===sr){const t=Me(e,"EXT_texture_compression_bptc");if(null===t)return null;if(r===sr)return s===rr?t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:t.COMPRESSED_RGBA_BPTC_UNORM_EXT}return 1020===r?e.UNSIGNED_INT_24_8:r===Fi?e.REPEAT:r===Li?e.CLAMP_TO_EDGE:r===Gi||r===Vi?e.NEAREST_MIPMAP_LINEAR:r===ji?e.LINEAR_MIPMAP_NEAREST:r===Wi?e.LINEAR_MIPMAP_LINEAR:r===Hi?e.NEAREST:r===ki?e.LINEAR:null}const co=new Uint8Array([0,0,0,1]);class uo{constructor({gl:e,target:t,format:s,type:i,wrapS:r,wrapT:o,wrapR:n,encoding:a,preloadColor:l,premultiplyAlpha:h,flipY:c}){this.gl=e,this.target=t||e.TEXTURE_2D,this.format=s||zi,this.type=i||1009,this.internalFormat=null,this.premultiplyAlpha=!!h,this.flipY=!!c,this.unpackAlignment=4,this.wrapS=r||Fi,this.wrapT=o||Fi,this.wrapR=n||Fi,this.encoding=a||rr,this.texture=e.createTexture(),l&&this.setPreloadColor(l),this.allocated=!0}setPreloadColor(e){e?(co[0]=Math.floor(255*e[0]),co[1]=Math.floor(255*e[1]),co[2]=Math.floor(255*e[2]),co[3]=Math.floor(255*(void 0!==e[3]?e[3]:1))):(co[0]=0,co[1]=0,co[2]=0,co[3]=255);const t=this.gl;if(t.bindTexture(this.target,this.texture),this.target===t.TEXTURE_CUBE_MAP){const e=[t.TEXTURE_CUBE_MAP_POSITIVE_X,t.TEXTURE_CUBE_MAP_NEGATIVE_X,t.TEXTURE_CUBE_MAP_POSITIVE_Y,t.TEXTURE_CUBE_MAP_NEGATIVE_Y,t.TEXTURE_CUBE_MAP_POSITIVE_Z,t.TEXTURE_CUBE_MAP_NEGATIVE_Z];for(let s=0,i=e.length;s<i;s++)t.texImage2D(e[s],0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,co)}else t.texImage2D(this.target,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,co);t.bindTexture(this.target,null)}setTarget(e){this.target=e||this.gl.TEXTURE_2D}setImage(e,t={}){const s=this.gl;void 0!==t.format&&(this.format=t.format),void 0!==t.internalFormat&&(this.internalFormat=t.internalFormat),void 0!==t.encoding&&(this.encoding=t.encoding),void 0!==t.type&&(this.type=t.type),void 0!==t.flipY&&(this.flipY=t.flipY),void 0!==t.premultiplyAlpha&&(this.premultiplyAlpha=t.premultiplyAlpha),void 0!==t.unpackAlignment&&(this.unpackAlignment=t.unpackAlignment),void 0!==t.minFilter&&(this.minFilter=t.minFilter),void 0!==t.magFilter&&(this.magFilter=t.magFilter),void 0!==t.wrapS&&(this.wrapS=t.wrapS),void 0!==t.wrapT&&(this.wrapT=t.wrapT),void 0!==t.wrapR&&(this.wrapR=t.wrapR);let i=!1;s.bindTexture(this.target,this.texture);const r=s.getParameter(s.UNPACK_FLIP_Y_WEBGL);s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,this.flipY);const o=s.getParameter(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL);s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);const n=s.getParameter(s.UNPACK_ALIGNMENT);s.pixelStorei(s.UNPACK_ALIGNMENT,this.unpackAlignment);const a=s.getParameter(s.UNPACK_COLORSPACE_CONVERSION_WEBGL);s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,s.NONE);const l=ho(s,this.minFilter);s.texParameteri(this.target,s.TEXTURE_MIN_FILTER,l),l!==s.NEAREST_MIPMAP_NEAREST&&l!==s.LINEAR_MIPMAP_NEAREST&&l!==s.NEAREST_MIPMAP_LINEAR&&l!==s.LINEAR_MIPMAP_LINEAR||(i=!0);const h=ho(s,this.magFilter);h&&s.texParameteri(this.target,s.TEXTURE_MAG_FILTER,h);const c=ho(s,this.wrapS);c&&s.texParameteri(this.target,s.TEXTURE_WRAP_S,c);const u=ho(s,this.wrapT);u&&s.texParameteri(this.target,s.TEXTURE_WRAP_T,u);const A=ho(s,this.format,this.encoding),p=ho(s,this.type),d=Ao(s,this.internalFormat,A,p,this.encoding,!1);if(this.target===s.TEXTURE_CUBE_MAP){if(y.isArray(e)){const t=e,i=[s.TEXTURE_CUBE_MAP_POSITIVE_X,s.TEXTURE_CUBE_MAP_NEGATIVE_X,s.TEXTURE_CUBE_MAP_POSITIVE_Y,s.TEXTURE_CUBE_MAP_NEGATIVE_Y,s.TEXTURE_CUBE_MAP_POSITIVE_Z,s.TEXTURE_CUBE_MAP_NEGATIVE_Z];for(let e=0,r=i.length;e<r;e++)s.texImage2D(i[e],0,d,A,p,t[e])}}else s.texImage2D(s.TEXTURE_2D,0,d,A,p,e);i&&s.generateMipmap(this.target),s.bindTexture(this.target,null),s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,r),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),s.pixelStorei(s.UNPACK_ALIGNMENT,n),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,a)}setCompressedData({mipmaps:e,props:t={}}){const s=this.gl,i=e.length;void 0!==t.format&&(this.format=t.format),void 0!==t.internalFormat&&(this.internalFormat=t.internalFormat),void 0!==t.encoding&&(this.encoding=t.encoding),void 0!==t.type&&(this.type=t.type),void 0!==t.flipY&&(this.flipY=t.flipY),void 0!==t.premultiplyAlpha&&(this.premultiplyAlpha=t.premultiplyAlpha),void 0!==t.unpackAlignment&&(this.unpackAlignment=t.unpackAlignment),void 0!==t.minFilter&&(this.minFilter=t.minFilter),void 0!==t.magFilter&&(this.magFilter=t.magFilter),void 0!==t.wrapS&&(this.wrapS=t.wrapS),void 0!==t.wrapT&&(this.wrapT=t.wrapT),void 0!==t.wrapR&&(this.wrapR=t.wrapR),s.activeTexture(s.TEXTURE0+0),s.bindTexture(this.target,this.texture);let r=e.length>1;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,this.flipY),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),s.pixelStorei(s.UNPACK_ALIGNMENT,this.unpackAlignment),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,s.NONE);const o=ho(s,this.wrapS);o&&s.texParameteri(this.target,s.TEXTURE_WRAP_S,o);const n=ho(s,this.wrapT);if(n&&s.texParameteri(this.target,s.TEXTURE_WRAP_T,n),this.type===s.TEXTURE_3D||this.type===s.TEXTURE_2D_ARRAY){const e=ho(s,this.wrapR);e&&s.texParameteri(this.target,s.TEXTURE_WRAP_R,e),s.texParameteri(this.type,s.TEXTURE_WRAP_R,e)}r?(s.texParameteri(this.target,s.TEXTURE_MIN_FILTER,po(s,this.minFilter)),s.texParameteri(this.target,s.TEXTURE_MAG_FILTER,po(s,this.magFilter))):(s.texParameteri(this.target,s.TEXTURE_MIN_FILTER,ho(s,this.minFilter)),s.texParameteri(this.target,s.TEXTURE_MAG_FILTER,ho(s,this.magFilter)));const a=ho(s,this.format,this.encoding),l=ho(s,this.type),h=Ao(s,this.internalFormat,a,l,this.encoding,!1);s.texStorage2D(s.TEXTURE_2D,i,h,e[0].width,e[0].height);for(let t=0,i=e.length;t<i;t++){const i=e[t];this.format!==zi?null!==a?s.compressedTexSubImage2D(s.TEXTURE_2D,t,0,0,i.width,i.height,a,i.data):console.warn("Attempt to load unsupported compressed texture format in .setCompressedData()"):s.texSubImage2D(s.TEXTURE_2D,t,0,0,i.width,i.height,a,l,i.data)}s.bindTexture(this.target,null)}setProps(e){const t=this.gl;t.bindTexture(this.target,this.texture),this._uploadProps(e),t.bindTexture(this.target,null)}_uploadProps(e){const t=this.gl;if(void 0!==e.format&&(this.format=e.format),void 0!==e.internalFormat&&(this.internalFormat=e.internalFormat),void 0!==e.encoding&&(this.encoding=e.encoding),void 0!==e.type&&(this.type=e.type),void 0!==e.minFilter){const s=ho(t,e.minFilter);s&&(this.minFilter=e.minFilter,t.texParameteri(this.target,t.TEXTURE_MIN_FILTER,s),s!==t.NEAREST_MIPMAP_NEAREST&&s!==t.LINEAR_MIPMAP_NEAREST&&s!==t.NEAREST_MIPMAP_LINEAR&&s!==t.LINEAR_MIPMAP_LINEAR||t.generateMipmap(this.target))}if(void 0!==e.magFilter){const s=ho(t,e.magFilter);s&&(this.magFilter=e.magFilter,t.texParameteri(this.target,t.TEXTURE_MAG_FILTER,s))}if(void 0!==e.wrapS){const s=ho(t,e.wrapS);s&&(this.wrapS=e.wrapS,t.texParameteri(this.target,t.TEXTURE_WRAP_S,s))}if(void 0!==e.wrapT){const s=ho(t,e.wrapT);s&&(this.wrapT=e.wrapT,t.texParameteri(this.target,t.TEXTURE_WRAP_T,s))}}bind(e){if(this.allocated){if(this.texture){const t=this.gl;return t.activeTexture(t["TEXTURE"+e]),t.bindTexture(this.target,this.texture),!0}return!1}}unbind(e){if(this.allocated&&this.texture){const t=this.gl;t.activeTexture(t["TEXTURE"+e]),t.bindTexture(this.target,null)}}destroy(){this.allocated&&this.texture&&(this.gl.deleteTexture(this.texture),this.texture=null)}}function Ao(e,t,s,i,r,o=!1){if(null!==t){if(void 0!==e[t])return e[t];console.warn("Attempt to use non-existing WebGL internal format '"+t+"'")}let n=s;return s===e.RED&&(i===e.FLOAT&&(n=e.R32F),i===e.HALF_FLOAT&&(n=e.R16F),i===e.UNSIGNED_BYTE&&(n=e.R8)),s===e.RG&&(i===e.FLOAT&&(n=e.RG32F),i===e.HALF_FLOAT&&(n=e.RG16F),i===e.UNSIGNED_BYTE&&(n=e.RG8)),s===e.RGBA&&(i===e.FLOAT&&(n=e.RGBA32F),i===e.HALF_FLOAT&&(n=e.RGBA16F),i===e.UNSIGNED_BYTE&&(n=r===rr&&!1===o?e.SRGB8_ALPHA8:e.RGBA8),i===e.UNSIGNED_SHORT_4_4_4_4&&(n=e.RGBA4),i===e.UNSIGNED_SHORT_5_5_5_1&&(n=e.RGB5_A1)),n!==e.R16F&&n!==e.R32F&&n!==e.RG16F&&n!==e.RG32F&&n!==e.RGBA16F&&n!==e.RGBA32F||Me(e,"EXT_color_buffer_float"),n}function po(e,t){return t===Hi||1004===t||1005===t?e.NEAREST:e.LINEAR}function fo(e){if(!mo(e.width)||!mo(e.height)){const t=document.createElement("canvas");t.width=go(e.width),t.height=go(e.height);t.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t.width,t.height),e=t}return e}function mo(e){return 0==(e&e-1)}function go(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}class yo extends x{get type(){return"Texture"}constructor(e,t={}){super(e,t),this._state=new Ze({texture:new uo({gl:this.scene.canvas.gl}),matrix:p.identityMat4(),hasMatrix:t.translate&&(0!==t.translate[0]||0!==t.translate[1])||!!t.rotate||t.scale&&(0!==t.scale[0]||0!==t.scale[1]),minFilter:this._checkMinFilter(t.minFilter),magFilter:this._checkMagFilter(t.magFilter),wrapS:this._checkWrapS(t.wrapS),wrapT:this._checkWrapT(t.wrapT),flipY:this._checkFlipY(t.flipY),encoding:this._checkEncoding(t.encoding)}),this._src=null,this._image=null,this._translate=p.vec2([0,0]),this._scale=p.vec2([1,1]),this._rotate=p.vec2([0,0]),this._matrixDirty=!1,this.translate=t.translate,this.scale=t.scale,this.rotate=t.rotate,t.src?this.src=t.src:t.image&&(this.image=t.image),d.memory.textures++}_checkMinFilter(e){return(e=e||Wi)!==ki&&e!==ji&&e!==Wi&&e!==Vi&&e!==Gi&&(this.error("Unsupported value for 'minFilter' - supported values are LinearFilter, LinearMipMapNearestFilter, NearestMipMapNearestFilter, NearestMipMapLinearFilter and LinearMipMapLinearFilter. Defaulting to LinearMipMapLinearFilter."),e=Wi),e}_checkMagFilter(e){return(e=e||ki)!==ki&&e!==Hi&&(this.error("Unsupported value for 'magFilter' - supported values are LinearFilter and NearestFilter. Defaulting to LinearFilter."),e=ki),e}_checkWrapS(e){return(e=e||Fi)!==Li&&e!==Ui&&e!==Fi&&(this.error("Unsupported value for 'wrapS' - supported values are ClampToEdgeWrapping, MirroredRepeatWrapping and RepeatWrapping. Defaulting to RepeatWrapping."),e=Fi),e}_checkWrapT(e){return(e=e||Fi)!==Li&&e!==Ui&&e!==Fi&&(this.error("Unsupported value for 'wrapT' - supported values are ClampToEdgeWrapping, MirroredRepeatWrapping and RepeatWrapping. Defaulting to RepeatWrapping."),e=Fi),e}_checkFlipY(e){return!!e}_checkEncoding(e){return(e=e||ir)!==ir&&e!==rr&&(this.error("Unsupported value for 'encoding' - supported values are LinearEncoding and sRGBEncoding. Defaulting to LinearEncoding."),e=ir),e}_webglContextRestored(){this._state.texture=new uo({gl:this.scene.canvas.gl}),this._image?this.image=this._image:this._src&&(this.src=this._src)}_update(){const e=this._state;if(this._matrixDirty){let t,s;0===this._translate[0]&&0===this._translate[1]||(t=p.translationMat4v([this._translate[0],this._translate[1],0],this._state.matrix)),1===this._scale[0]&&1===this._scale[1]||(s=p.scalingMat4v([this._scale[0],this._scale[1],1]),t=t?p.mulMat4(t,s):s),0!==this._rotate&&(s=p.rotationMat4v(.0174532925*this._rotate,[0,0,1]),t=t?p.mulMat4(t,s):s),t&&(e.matrix=t),this._matrixDirty=!1}this.glRedraw()}set image(e){this._image=fo(e),this._image.crossOrigin="Anonymous",this._state.texture.setImage(this._image,this._state),this._src=null,this.glRedraw()}get image(){return this._image}set src(e){this.scene.loading++,this.scene.canvas.spinner.processes++;const t=this;let s=new Image;s.onload=function(){s=fo(s),t._state.texture.setImage(s,t._state),t.scene.loading--,t.glRedraw(),t.scene.canvas.spinner.processes--},s.src=e,this._src=e,this._image=null}get src(){return this._src}set translate(e){this._translate.set(e||[0,0]),this._matrixDirty=!0,this._needUpdate()}get translate(){return this._translate}set scale(e){this._scale.set(e||[1,1]),this._matrixDirty=!0,this._needUpdate()}get scale(){return this._scale}set rotate(e){e=e||0,this._rotate!==e&&(this._rotate=e,this._matrixDirty=!0,this._needUpdate())}get rotate(){return this._rotate}get minFilter(){return this._state.minFilter}get magFilter(){return this._state.magFilter}get wrapS(){return this._state.wrapS}get wrapT(){return this._state.wrapT}get flipY(){return this._state.flipY}get encoding(){return this._state.encoding}destroy(){super.destroy(),this._state.texture&&this._state.texture.destroy(),this._state.destroy(),d.memory.textures--}}const Eo=d.memory,vo=p.AABB3();class _o extends di{get type(){return"VBOGeometry"}get isVBOGeometry(){return!0}constructor(e,t={}){super(e,t),this._state=new Ze({compressGeometry:!0,primitive:null,primitiveName:null,positionsDecodeMatrix:null,uvDecodeMatrix:null,positionsBuf:null,normalsBuf:null,colorsbuf:null,uvBuf:null,indicesBuf:null,hash:""}),this._numTriangles=0,this._edgeThreshold=t.edgeThreshold||10,this._aabb=null,this._obb=p.OBB3();const s=this._state,i=this.scene.canvas.gl;switch(t.primitive=t.primitive||"triangles",t.primitive){case"points":s.primitive=i.POINTS,s.primitiveName=t.primitive;break;case"lines":s.primitive=i.LINES,s.primitiveName=t.primitive;break;case"line-loop":s.primitive=i.LINE_LOOP,s.primitiveName=t.primitive;break;case"line-strip":s.primitive=i.LINE_STRIP,s.primitiveName=t.primitive;break;case"triangles":s.primitive=i.TRIANGLES,s.primitiveName=t.primitive;break;case"triangle-strip":s.primitive=i.TRIANGLE_STRIP,s.primitiveName=t.primitive;break;case"triangle-fan":s.primitive=i.TRIANGLE_FAN,s.primitiveName=t.primitive;break;default:this.error("Unsupported value for 'primitive': '"+t.primitive+"' - supported values are 'points', 'lines', 'line-loop', 'line-strip', 'triangles', 'triangle-strip' and 'triangle-fan'. Defaulting to 'triangles'."),s.primitive=i.TRIANGLES,s.primitiveName=t.primitive}if(t.positions)if(t.indices){var r;if(t.positionsDecodeMatrix);else{const e=it.getPositionsBounds(t.positions),o=it.compressPositions(t.positions,e.min,e.max);r=o.quantized,s.positionsDecodeMatrix=o.decodeMatrix,s.positionsBuf=new ye(i,i.ARRAY_BUFFER,r,r.length,3,i.STATIC_DRAW),Eo.positions+=s.positionsBuf.numItems,p.positions3ToAABB3(t.positions,this._aabb),p.positions3ToAABB3(r,vo,s.positionsDecodeMatrix),p.AABB3ToOBB3(vo,this._obb)}if(t.colors){const e=t.colors.constructor===Float32Array?t.colors:new Float32Array(t.colors);s.colorsBuf=new ye(i,i.ARRAY_BUFFER,e,e.length,4,i.STATIC_DRAW),Eo.colors+=s.colorsBuf.numItems}if(t.uv){const e=it.getUVBounds(t.uv),r=it.compressUVs(t.uv,e.min,e.max),o=r.quantized;s.uvDecodeMatrix=r.decodeMatrix,s.uvBuf=new ye(i,i.ARRAY_BUFFER,o,o.length,2,i.STATIC_DRAW),Eo.uvs+=s.uvBuf.numItems}if(t.normals){const e=it.compressNormals(t.normals);let r=s.compressGeometry;s.normalsBuf=new ye(i,i.ARRAY_BUFFER,e,e.length,3,i.STATIC_DRAW,r),Eo.normals+=s.normalsBuf.numItems}{const e=t.indices.constructor===Uint32Array||t.indices.constructor===Uint16Array?t.indices:new Uint32Array(t.indices);s.indicesBuf=new ye(i,i.ELEMENT_ARRAY_BUFFER,e,e.length,1,i.STATIC_DRAW),Eo.indices+=s.indicesBuf.numItems;const o=Be(r,e,s.positionsDecodeMatrix,this._edgeThreshold);this._edgeIndicesBuf=new ye(i,i.ELEMENT_ARRAY_BUFFER,o,o.length,1,i.STATIC_DRAW),"triangles"===this._state.primitiveName&&(this._numTriangles=t.indices.length/3)}this._buildHash(),Eo.meshes++}else this.error("Config expected: indices");else this.error("Config expected: positions")}_buildHash(){const e=this._state,t=["/g"];t.push("/"+e.primitive+";"),e.positionsBuf&&t.push("p"),e.colorsBuf&&t.push("c"),(e.normalsBuf||e.autoVertexNormals)&&t.push("n"),e.uvBuf&&t.push("u"),t.push("cp"),t.push(";"),e.hash=t.join("")}_getEdgeIndices(){return this._edgeIndicesBuf}get primitive(){return this._state.primitiveName}get aabb(){return this._aabb}get obb(){return this._obb}get numTriangles(){return this._numTriangles}_getState(){return this._state}destroy(){super.destroy();const e=this._state;e.indicesBuf&&e.indicesBuf.destroy(),e.positionsBuf&&e.positionsBuf.destroy(),e.normalsBuf&&e.normalsBuf.destroy(),e.uvBuf&&e.uvBuf.destroy(),e.colorsBuf&&e.colorsBuf.destroy(),this._edgeIndicesBuf&&this._edgeIndicesBuf.destroy(),e.destroy(),Eo.meshes--}}var Io={};function To(e={}){let t=e.xSize||1;t<0&&(console.error("negative xSize not allowed - will invert"),t*=-1);let s=e.zSize||1;s<0&&(console.error("negative zSize not allowed - will invert"),s*=-1);let i=e.xSegments||1;i<0&&(console.error("negative xSegments not allowed - will invert"),i*=-1),i<1&&(i=1);let r=e.xSegments||1;r<0&&(console.error("negative zSegments not allowed - will invert"),r*=-1),r<1&&(r=1);const o=e.center,n=o?o[0]:0,a=o?o[1]:0,l=o?o[2]:0,h=t/2,c=s/2,u=Math.floor(i)||1,A=Math.floor(r)||1,p=u+1,d=A+1,f=t/u,m=s/A,g=new Float32Array(p*d*3),E=new Float32Array(p*d*3),v=new Float32Array(p*d*2);let _,I,T,P,D,b,R,C=0,x=0;for(_=0;_<d;_++){const e=_*m-c;for(I=0;I<p;I++)T=I*f-h,g[C]=T+n,g[C+1]=a,g[C+2]=-e+l,E[C+2]=-1,v[x]=I/u,v[x+1]=(A-_)/A,C+=3,x+=2}C=0;const N=new(g.length/3>65535?Uint32Array:Uint16Array)(u*A*6);for(_=0;_<A;_++)for(I=0;I<u;I++)P=I+p*_,D=I+p*(_+1),b=I+1+p*(_+1),R=I+1+p*_,N[C]=R,N[C+1]=D,N[C+2]=P,N[C+3]=R,N[C+4]=b,N[C+5]=D,C+=6;return y.apply(e,{positions:g,normals:E,uv:v,indices:N})}function Po(e={}){let t=e.radius||1;t<0&&(console.error("negative radius not allowed - will invert"),t*=-1),t*=.5;let s=e.tube||.3;s<0&&(console.error("negative tube not allowed - will invert"),s*=-1);let i=e.radialSegments||32;i<0&&(console.error("negative radialSegments not allowed - will invert"),i*=-1),i<4&&(i=4);let r=e.tubeSegments||24;r<0&&(console.error("negative tubeSegments not allowed - will invert"),r*=-1),r<4&&(r=4);let o=e.arc||2*Math.PI;o<0&&(console.warn("negative arc not allowed - will invert"),o*=-1),o>360&&(o=360);const n=e.center;let a=n?n[0]:0,l=n?n[1]:0;const h=n?n[2]:0,c=[],u=[],A=[],d=[];let f,m,g,E,v,_,I,T,P,D,b,R;for(T=0;T<=r;T++)for(I=0;I<=i;I++)f=I/i*o,m=.785398+T/r*Math.PI*2,a=t*Math.cos(f),l=t*Math.sin(f),g=(t+s*Math.cos(m))*Math.cos(f),E=(t+s*Math.cos(m))*Math.sin(f),v=s*Math.sin(m),c.push(g+a),c.push(E+l),c.push(v+h),A.push(1-I/i),A.push(T/r),_=p.normalizeVec3(p.subVec3([g,E,v],[a,l,h],[]),[]),u.push(_[0]),u.push(_[1]),u.push(_[2]);for(T=1;T<=r;T++)for(I=1;I<=i;I++)P=(i+1)*T+I-1,D=(i+1)*(T-1)+I-1,b=(i+1)*(T-1)+I,R=(i+1)*T+I,d.push(P),d.push(D),d.push(b),d.push(b),d.push(R),d.push(P);return y.apply(e,{positions:c,normals:u,uv:A,indices:d})}Io.load=function(e,t){var s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="arraybuffer",s.onload=function(e){t(e.target.response)},s.send()},Io.save=function(e,t){var s="data:application/octet-stream;base64,"+btoa(Io.parse._buffToStr(e));window.location.href=s},Io.clone=function(e){return JSON.parse(JSON.stringify(e))},Io.bin={},Io.bin.f=new Float32Array(1),Io.bin.fb=new Uint8Array(Io.bin.f.buffer),Io.bin.rf=function(e,t){for(var s=Io.bin.f,i=Io.bin.fb,r=0;r<4;r++)i[r]=e[t+r];return s[0]},Io.bin.rsl=function(e,t){return e[t]|e[t+1]<<8},Io.bin.ril=function(e,t){return e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24},Io.bin.rASCII0=function(e,t){for(var s="";0!=e[t];)s+=String.fromCharCode(e[t++]);return s},Io.bin.wf=function(e,t,s){new Float32Array(e.buffer,t,1)[0]=s},Io.bin.wsl=function(e,t,s){e[t]=s,e[t+1]=s>>8},Io.bin.wil=function(e,t,s){e[t]=s,e[t+1]=s>>8,e[t+2]=s>>16,e[t+3]},Io.parse={},Io.parse._buffToStr=function(e){for(var t=new Uint8Array(e),s="",i=0;i<t.length;i++)s=s.concat(String.fromCharCode(t[i]));return s},Io.parse._strToBuff=function(e){for(var t=new ArrayBuffer(e.length),s=new Uint8Array(t),i=0;i<e.length;i++)s[i]=e.charCodeAt(i);return t},Io.parse._readLine=function(e,t){for(var s="";10!=e[t];)s+=String.fromCharCode(e[t++]);return s},Io.parse.fromJSON=function(e){return JSON.parse(Io.parse._buffToStr(e))},Io.parse.toJSON=function(e){var t=JSON.stringify(e);return Io.parse._strToBuff(t)},Io.parse.fromOBJ=function(e){for(var t={groups:{},c_verts:[],c_uvt:[],c_norms:[],i_verts:[],i_uvt:[],i_norms:[]},s={from:0,to:0},i=0,r=new Uint8Array(e);i<r.length;){var o=Io.parse._readLine(r,i);i+=o.length+1;var n=(o=(o=o.replace(/ +(?= )/g,"")).replace(/(^\s+|\s+$)/g,"")).split(" ");if("g"==n[0]&&(s.to=t.i_verts.length,null==t.groups[n[1]]&&(t.groups[n[1]]={from:t.i_verts.length,to:0}),s=t.groups[n[1]]),"v"==n[0]){var a=parseFloat(n[1]),l=parseFloat(n[2]),h=parseFloat(n[3]);t.c_verts.push(a,l,h)}if("vt"==n[0]){a=parseFloat(n[1]),l=1-parseFloat(n[2]);t.c_uvt.push(a,l)}if("vn"==n[0]){a=parseFloat(n[1]),l=parseFloat(n[2]),h=parseFloat(n[3]);t.c_norms.push(a,l,h)}if("f"==n[0]){var c=n[1].split("/"),u=n[2].split("/"),A=n[3].split("/"),p=parseInt(c[0])-1,d=parseInt(u[0])-1,f=parseInt(A[0])-1,m=parseInt(c[1])-1,g=parseInt(u[1])-1,y=parseInt(A[1])-1,E=parseInt(c[2])-1,v=parseInt(u[2])-1,_=parseInt(A[2])-1,I=t.c_verts.length/3,T=t.c_uvt.length/2,P=t.c_norms.length/3;if(p<0&&(p=I+p+1),d<0&&(d=I+d+1),f<0&&(f=I+f+1),m<0&&(m=T+m+1),g<0&&(g=T+g+1),y<0&&(y=T+y+1),E<0&&(E=P+E+1),v<0&&(v=P+v+1),_<0&&(_=P+_+1),t.i_verts.push(p,d,f),t.i_uvt.push(m,g,y),t.i_norms.push(E,v,_),5==n.length){var D=n[4].split("/"),b=parseInt(D[0])-1,R=parseInt(D[1])-1,C=parseInt(D[2])-1;b<0&&(b=I+b+1),R<0&&(R=T+R+1),C<0&&(C=P+C+1),t.i_verts.push(p,f,b),t.i_uvt.push(m,y,R),t.i_norms.push(E,_,C)}}}return s.to=t.i_verts.length,t},Io.parse.fromMD2=function(e){e=new Uint8Array(e);var t={},s={};s.ident=Io.bin.ril(e,0),s.version=Io.bin.ril(e,4),s.skinwidth=Io.bin.ril(e,8),s.skinheight=Io.bin.ril(e,12),s.framesize=Io.bin.ril(e,16),s.num_skins=Io.bin.ril(e,20),s.num_vertices=Io.bin.ril(e,24),s.num_st=Io.bin.ril(e,28),s.num_tris=Io.bin.ril(e,32),s.num_glcmds=Io.bin.ril(e,36),s.num_frames=Io.bin.ril(e,40),s.offset_skins=Io.bin.ril(e,44),s.offset_st=Io.bin.ril(e,48),s.offset_tris=Io.bin.ril(e,52),s.offset_frames=Io.bin.ril(e,56),s.offset_glcmds=Io.bin.ril(e,60),s.offset_end=Io.bin.ril(e,64);var i=s.offset_st;t.c_uvt=[];for(var r=0;r<s.num_st;r++){var o=Io.bin.rsl(e,i)/s.skinwidth,n=Io.bin.rsl(e,i+2)/s.skinheight;t.c_uvt.push(o,n),i+=4}i=s.offset_tris;var a=[],l=[];t.i_verts=a,t.i_uvt=l;for(r=0;r<s.num_tris;r++)a.push(Io.bin.rsl(e,i),Io.bin.rsl(e,i+2),Io.bin.rsl(e,i+4)),l.push(Io.bin.rsl(e,i+6),Io.bin.rsl(e,i+8),Io.bin.rsl(e,i+10)),i+=12;i=s.offset_skins;t.skins=[];for(r=0;r<s.num_skins;r++)t.skins.push(Io.bin.rASCII0(e,i)),i+=64;i=s.offset_frames;t.frames=[];var h=Io.parse.fromMD2._normals;for(r=0;r<s.num_frames;r++){var c={},u=Io.bin.rf(e,i),A=Io.bin.rf(e,i+4),p=Io.bin.rf(e,i+8);i+=12;var d=Io.bin.rf(e,i),f=Io.bin.rf(e,i+4),m=Io.bin.rf(e,i+8);i+=12,c.name=Io.bin.rASCII0(e,i),i+=16,c.verts=[],c.norms=[];for(var g=0;g<s.num_vertices;g++)c.verts.push(e[i]*u+d,e[i+1]*A+f,e[i+2]*p+m),c.norms.push(h[3*e[i+3]],h[3*e[i+3]+1],h[3*e[i+3]+2]),i+=4;t.frames.push(c)}return t},Io.parse.fromMD2._normals=[-.525731,0,.850651,-.442863,.238856,.864188,-.295242,0,.955423,-.309017,.5,.809017,-.16246,.262866,.951056,0,0,1,0,.850651,.525731,-.147621,.716567,.681718,.147621,.716567,.681718,0,.525731,.850651,.309017,.5,.809017,.525731,0,.850651,.295242,0,.955423,.442863,.238856,.864188,.16246,.262866,.951056,-.681718,.147621,.716567,-.809017,.309017,.5,-.587785,.425325,.688191,-.850651,.525731,0,-.864188,.442863,.238856,-.716567,.681718,.147621,-.688191,.587785,.425325,-.5,.809017,.309017,-.238856,.864188,.442863,-.425325,.688191,.587785,-.716567,.681718,-.147621,-.5,.809017,-.309017,-.525731,.850651,0,0,.850651,-.525731,-.238856,.864188,-.442863,0,.955423,-.295242,-.262866,.951056,-.16246,0,1,0,0,.955423,.295242,-.262866,.951056,.16246,.238856,.864188,.442863,.262866,.951056,.16246,.5,.809017,.309017,.238856,.864188,-.442863,.262866,.951056,-.16246,.5,.809017,-.309017,.850651,.525731,0,.716567,.681718,.147621,.716567,.681718,-.147621,.525731,.850651,0,.425325,.688191,.587785,.864188,.442863,.238856,.688191,.587785,.425325,.809017,.309017,.5,.681718,.147621,.716567,.587785,.425325,.688191,.955423,.295242,0,1,0,0,.951056,.16246,.262866,.850651,-.525731,0,.955423,-.295242,0,.864188,-.442863,.238856,.951056,-.16246,.262866,.809017,-.309017,.5,.681718,-.147621,.716567,.850651,0,.525731,.864188,.442863,-.238856,.809017,.309017,-.5,.951056,.16246,-.262866,.525731,0,-.850651,.681718,.147621,-.716567,.681718,-.147621,-.716567,.850651,0,-.525731,.809017,-.309017,-.5,.864188,-.442863,-.238856,.951056,-.16246,-.262866,.147621,.716567,-.681718,.309017,.5,-.809017,.425325,.688191,-.587785,.442863,.238856,-.864188,.587785,.425325,-.688191,.688191,.587785,-.425325,-.147621,.716567,-.681718,-.309017,.5,-.809017,0,.525731,-.850651,-.525731,0,-.850651,-.442863,.238856,-.864188,-.295242,0,-.955423,-.16246,.262866,-.951056,0,0,-1,.295242,0,-.955423,.16246,.262866,-.951056,-.442863,-.238856,-.864188,-.309017,-.5,-.809017,-.16246,-.262866,-.951056,0,-.850651,-.525731,-.147621,-.716567,-.681718,.147621,-.716567,-.681718,0,-.525731,-.850651,.309017,-.5,-.809017,.442863,-.238856,-.864188,.16246,-.262866,-.951056,.238856,-.864188,-.442863,.5,-.809017,-.309017,.425325,-.688191,-.587785,.716567,-.681718,-.147621,.688191,-.587785,-.425325,.587785,-.425325,-.688191,0,-.955423,-.295242,0,-1,0,.262866,-.951056,-.16246,0,-.850651,.525731,0,-.955423,.295242,.238856,-.864188,.442863,.262866,-.951056,.16246,.5,-.809017,.309017,.716567,-.681718,.147621,.525731,-.850651,0,-.238856,-.864188,-.442863,-.5,-.809017,-.309017,-.262866,-.951056,-.16246,-.850651,-.525731,0,-.716567,-.681718,-.147621,-.716567,-.681718,.147621,-.525731,-.850651,0,-.5,-.809017,.309017,-.238856,-.864188,.442863,-.262866,-.951056,.16246,-.864188,-.442863,.238856,-.809017,-.309017,.5,-.688191,-.587785,.425325,-.681718,-.147621,.716567,-.442863,-.238856,.864188,-.587785,-.425325,.688191,-.309017,-.5,.809017,-.147621,-.716567,.681718,-.425325,-.688191,.587785,-.16246,-.262866,.951056,.442863,-.238856,.864188,.16246,-.262866,.951056,.309017,-.5,.809017,.147621,-.716567,.681718,0,-.525731,.850651,.425325,-.688191,.587785,.587785,-.425325,.688191,.688191,-.587785,.425325,-.955423,.295242,0,-.951056,.16246,.262866,-1,0,0,-.850651,0,.525731,-.955423,-.295242,0,-.951056,-.16246,.262866,-.864188,.442863,-.238856,-.951056,.16246,-.262866,-.809017,.309017,-.5,-.864188,-.442863,-.238856,-.951056,-.16246,-.262866,-.809017,-.309017,-.5,-.681718,.147621,-.716567,-.681718,-.147621,-.716567,-.850651,0,-.525731,-.688191,.587785,-.425325,-.587785,.425325,-.688191,-.425325,.688191,-.587785,-.425325,-.688191,-.587785,-.587785,-.425325,-.688191,-.688191,-.587785,-.425325],Io.parse.fromCollada=function(e){var t=Io.parse._buffToStr(e),s=(new DOMParser).parseFromString(t,"text/xml"),i={},r=(s=s.childNodes[0]).getElementsByTagName("asset")[0],o=s.getElementsByTagName("library_geometries")[0],n=s.getElementsByTagName("library_images")[0],a=s.getElementsByTagName("library_materials")[0],l=s.getElementsByTagName("library_effects")[0];return r&&(i.asset=Io.parse.fromCollada._asset(r)),o&&(i.geometries=Io.parse.fromCollada._libGeometries(o)),n&&(i.images=Io.parse.fromCollada._libImages(n)),a&&(i.materials=Io.parse.fromCollada._libMaterials(a)),l&&(i.effects=Io.parse.fromCollada._libEffects(l)),i},Io.parse.fromCollada._asset=function(e){return{created:e.getElementsByTagName("created")[0].textContent,modified:e.getElementsByTagName("modified")[0].textContent,up_axis:e.getElementsByTagName("up_axis")[0].textContent}},Io.parse.fromCollada._libGeometries=function(e){e=e.getElementsByTagName("geometry");for(var t=[],s=0;s<e.length;s++){var i=e[s],r=Io.parse.fromCollada._getMesh(i.getElementsByTagName("mesh")[0]);t.push(r)}return t},Io.parse.fromCollada._getMesh=function(e){for(var t={},s=e.getElementsByTagName("source"),i=t.sources={},r=0;r<s.length;r++){for(var o=s[r].getElementsByTagName("float_array")[0].textContent.split(" "),n=o.length-(""==o[o.length-1]?1:0),a=new Array(n),l=0;l<n;l++)a[l]=parseFloat(o[l]);i[s[r].getAttribute("id")]=a}t.triangles=[];var h=e.getElementsByTagName("triangles");if(null==h)return t;for(r=0;r<h.length;r++){var c={},u=h[r];c.material=u.getAttribute("material");var A=u.getElementsByTagName("input"),p=[];for(l=0;l<A.length;l++){var d=A[l];a=[];p[parseInt(d.getAttribute("offset"))]=a;var f=d.getAttribute("semantic");c["s_"+f]="VERTEX"==f?e.getElementsByTagName("vertices")[0].getElementsByTagName("input")[0].getAttribute("source").substring(1):d.getAttribute("source").substring(1),c["i_"+f]=a,i[c["s_"+f]]}var m=u.getElementsByTagName("p")[0].textContent.split(" "),g=3*Math.floor(m.length/3);for(l=0;l<g;l++)p[l%A.length].push(parseInt(m[l]));t.triangles.push(c)}return t},Io.parse.fromCollada._libImages=function(e){e=e.getElementsByTagName("image");for(var t={},s=0;s<e.length;s++)t[e[s].getAttribute("id")]=e[s].getElementsByTagName("init_from")[0].textContent;return t},Io.parse.fromCollada._libMaterials=function(e){e=e.getElementsByTagName("material");for(var t={},s=0;s<e.length;s++)t[e[s].getAttribute("name")]=e[s].getElementsByTagName("instance_effect")[0].getAttribute("url").substring(1);return t},Io.parse.fromCollada._libEffects=function(e){e=e.getElementsByTagName("effect");for(var t={},s=0;s<e.length;s++){for(var i={},r=e[s].getElementsByTagName("newparam"),o=0;o<r.length;o++){var n=r[o].getElementsByTagName("surface")[0];n&&(i.surface=n.getElementsByTagName("init_from")[0].textContent)}t[e[s].getAttribute("id")]=i}return t},Io.parse.from3DS=function(e){e=new Uint8Array(e);var t={};if(19789!=Io.bin.rsl(e,0))return null;for(var s=Io.bin.ril(e,2),i=6;i<s;){var r=Io.bin.rsl(e,i),o=Io.bin.ril(e,i+2);15677==r&&(t.edit=Io.parse.from3DS._edit3ds(e,i,o)),45056==r&&(t.keyf=Io.parse.from3DS._keyf3ds(e,i,o)),i+=o}return t},Io.parse.from3DS._edit3ds=function(e,t,s){for(var i={},r=t+6;r<t+s;){var o=Io.bin.rsl(e,r),n=Io.bin.ril(e,r+2);16384==o&&(null==i.objects&&(i.objects=[]),i.objects.push(Io.parse.from3DS._edit_object(e,r,n))),r+=n}return i},Io.parse.from3DS._keyf3ds=function(e,t,s){for(var i={},r=t+6;r<t+s;){var o=Io.bin.rsl(e,r),n=Io.bin.ril(e,r+2);45058==o&&(null==i.desc&&(i.desc=[]),i.desc.push(Io.parse.from3DS._keyf_objdes(e,r,n))),r+=n}return i},Io.parse.from3DS._keyf_objdes=function(e,t,s){for(var i={},r=t+6;r<t+s;){var o=Io.bin.rsl(e,r),n=Io.bin.ril(e,r+2);45072==o&&(i.hierarchy=Io.parse.from3DS._keyf_objhierarch(e,r,n)),45073==o&&(i.dummy_name=Io.bin.rASCII0(e,r+6)),r+=n}return i},Io.parse.from3DS._keyf_objhierarch=function(e,t,s){var i={},r=t+6;return i.name=Io.bin.rASCII0(e,r),r+=i.name.length+1,i.hierarchy=Io.bin.rsl(e,r+4),i},Io.parse.from3DS._edit_object=function(e,t,s){var i={},r=t+6;for(i.name=Io.bin.rASCII0(e,r),r+=i.name.length+1;r<t+s;){var o=Io.bin.rsl(e,r),n=Io.bin.ril(e,r+2);16640==o&&(i.mesh=Io.parse.from3DS._obj_trimesh(e,r,n)),r+=n}return i},Io.parse.from3DS._obj_trimesh=function(e,t,s){for(var i={},r=t+6;r<t+s;){var o=Io.bin.rsl(e,r),n=Io.bin.ril(e,r+2);16656==o&&(i.vertices=Io.parse.from3DS._tri_vertexl(e,r,n)),16672==o&&(i.indices=Io.parse.from3DS._tri_facel1(e,r,n)),16704==o&&(i.uvt=Io.parse.from3DS._tri_mappingcoors(e,r,n)),16736==o&&(i.local=Io.parse.from3DS._tri_local(e,r,n)),r+=n}return i},Io.parse.from3DS._tri_vertexl=function(e,t,s){var i=[],r=t+6,o=Io.bin.rsl(e,r);r+=2;for(var n=0;n<o;n++)i.push(Io.bin.rf(e,r)),i.push(Io.bin.rf(e,r+4)),i.push(Io.bin.rf(e,r+8)),r+=12;return i},Io.parse.from3DS._tri_facel1=function(e,t,s){var i=[],r=t+6,o=Io.bin.rsl(e,r);r+=2;for(var n=0;n<o;n++)i.push(Io.bin.rsl(e,r)),i.push(Io.bin.rsl(e,r+2)),i.push(Io.bin.rsl(e,r+4)),r+=8;return i},Io.parse.from3DS._tri_mappingcoors=function(e,t,s){var i=[],r=t+6,o=Io.bin.rsl(e,r);r+=2;for(var n=0;n<o;n++)i.push(Io.bin.rf(e,r)),i.push(1-Io.bin.rf(e,r+4)),r+=8;return i},Io.parse.from3DS._tri_local=function(e,t,s){var i={},r=t+6;return i.X=[Io.bin.rf(e,r),Io.bin.rf(e,r+4),Io.bin.rf(e,r+8)],r+=12,i.Y=[Io.bin.rf(e,r),Io.bin.rf(e,r+4),Io.bin.rf(e,r+8)],r+=12,i.Z=[Io.bin.rf(e,r),Io.bin.rf(e,r+4),Io.bin.rf(e,r+8)],r+=12,i.C=[Io.bin.rf(e,r),Io.bin.rf(e,r+4),Io.bin.rf(e,r+8)],r+=12,i},Io.parse.fromBIV=function(e){e=new Uint8Array(e);var t={},s={};return s.id=Io.bin.ril(e,0),s.verS=Io.bin.ril(e,4),s.texS=Io.bin.ril(e,8),s.indS=Io.bin.ril(e,12),s.verO=Io.bin.ril(e,16),s.verL=Io.bin.ril(e,20),s.texO=Io.bin.ril(e,24),s.texL=Io.bin.ril(e,28),s.indO=Io.bin.ril(e,32),s.indL=Io.bin.ril(e,36),0!=s.verO&&(t.vertices=Io.parse.fromBIV._readFloats(e,s.verO,s.verL)),0!=s.texO&&(t.uvt=Io.parse.fromBIV._readFloats(e,s.texO,s.texL)),0!=s.indO&&(t.indices=Io.parse.fromBIV._readInts(e,s.indO,s.indL,s.indS)),t},Io.parse.toBIV=function(e){for(var t=0,s=0;s<e.indices.length;s++)t=Math.max(t,e.indices[s]);var i=32;t<=65535&&(i=16);var r=40;e.vertices&&(r+=4*e.vertices.length),e.uvt&&(r+=4*e.uvt.length),e.indices&&(r+=e.indices.length*i/8);var o=new Uint8Array(r);Io.bin.wil(o,0,1769365870),Io.bin.wil(o,4,32),Io.bin.wil(o,8,32),Io.bin.wil(o,12,i);var n=40;return e.vertices&&(Io.bin.wil(o,16,n),Io.bin.wil(o,20,4*e.vertices.length),Io.parse.fromBIV._writeFloats(o,n,e.vertices),n+=4*e.vertices.length),e.uvt&&(Io.bin.wil(o,24,n),Io.bin.wil(o,28,4*e.uvt.length),Io.parse.fromBIV._writeFloats(o,n,e.uvt),n+=4*e.uvt.length),e.indices&&(Io.bin.wil(o,32,n),Io.bin.wil(o,36,4*e.indices.length),Io.parse.fromBIV._writeInts(o,n,e.indices,i)),o.buffer},Io.parse.fromBIV._readFloats=function(e,t,s){for(var i=[],r=0;r<s/4;r++)i.push(Io.bin.rf(e,t+4*r));return i},Io.parse.fromBIV._writeFloats=function(e,t,s){for(var i=0;i<s.length;i++)Io.bin.wf(e,t+4*i,s[i])},Io.parse.fromBIV._readInts=function(e,t,s,i){for(var r=[],o=0;o<s/4;o++)16==i&&r.push(Io.bin.rsl(e,t+2*o)),32==i&&r.push(Io.bin.ril(e,t+4*o));return r},Io.parse.fromBIV._writeInts=function(e,t,s,i){for(var r=0;r<s.length;r++)16==i&&Io.bin.wsl(e,t+2*r,s[r]),32==i&&Io.bin.wil(e,t+4*r,s[r])},Io.gen={},Io.gen.Plane=function(e,t,s,i){s||(s=1),i||(i=1);for(var r={verts:[],inds:[],uvt:[]},o=e+1,n=t+1,a=0;a<n;a++)for(var l=0;l<o;l++){var h=l*(2/e)-1,c=a*(2/t)-1;r.verts.push(h,c,0),r.uvt.push(s*l/e,i*a/t),a<t&&l<e&&r.inds.push(a*o+l,a*o+l+1,(a+1)*o+l,a*o+l+1,(a+1)*o+l,(a+1)*o+l+1)}return r},Io.gen.Cube=function(){return{verts:[-1,1,-1,1,1,-1,-1,-1,-1,1,-1,-1,-1,1,1,1,1,1,-1,-1,1,1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,-1,1,1,1,1,1,-1,1,-1,1,1,-1,-1,-1,1,-1,1,1,-1,-1,1,1,1,1,1,-1,-1,-1,1,-1,-1,-1,-1,1,1,-1,1],inds:[0,1,2,1,2,3,4,5,6,5,6,7,8,9,10,9,10,11,12,13,14,13,14,15,16,17,18,17,18,19,20,21,22,21,22,23],uvt:[1/4,1/4,.5,1/4,1/4,.5,.5,.5,1,1/4,3/4,1/4,1,.5,3/4,.5,0,1/4,1/4,1/4,0,.5,1/4,.5,3/4,1/4,.5,1/4,3/4,.5,.5,.5,1/4,1/4,.5,1/4,1/4,0,.5,0,1/4,.5,.5,.5,1/4,3/4,.5,3/4]}},Io.gen.Sphere=function(e,t){for(var s={verts:[],inds:[],uvt:[]},i=e+1,r=t+1,o=0;o<r;o++)for(var n=0;n<i;n++){var a=-Math.PI/2+o*Math.PI/t,l=2*n*Math.PI/e,h=Math.cos(a)*Math.cos(l),c=Math.sin(a),u=Math.cos(a)*Math.sin(l);s.verts.push(h,c,u),s.uvt.push(n/e,o/t),o<t&&n<e&&s.inds.push(i*o+n,i*o+n+1,i*(o+1)+n,i*o+n+1,i*(o+1)+n,i*(o+1)+n+1)}return s},Io.mat={},Io.mat.scale=function(e,t,s){return[e,0,0,0,0,t,0,0,0,0,s,0,0,0,0,1]},Io.mat.translate=function(e,t,s){return[1,0,0,0,0,1,0,0,0,0,1,0,e,t,s,1]},Io.mat.rotateDeg=function(e,t,s){var i=Math.PI/180;return Io.mat.rotate(e*i,t*i,s*i)},Io.mat.rotate=function(e,t,s){var i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],r=e,o=t,n=s,a=Math.cos(r),l=Math.cos(o),h=Math.cos(n),c=Math.sin(r),u=Math.sin(o),A=Math.sin(n);return i[0]=l*h,i[1]=-l*A,i[2]=u,i[4]=a*A+c*u*h,i[5]=a*h-c*u*A,i[6]=-c*l,i[8]=c*A-a*u*h,i[9]=c*h+a*u*A,i[10]=a*l,i},Io.edit={},Io.edit.interpolate=function(e,t,s,i){for(var r=0;r<e.length;r++)s[r]=e[r]+i*(t[r]-e[r])},Io.edit.transform=function(e,t){for(var s=0;s<e.length;s+=3){var i=e[s],r=e[s+1],o=e[s+2];e[s+0]=t[0]*i+t[4]*r+t[8]*o+t[12],e[s+1]=t[1]*i+t[5]*r+t[9]*o+t[13],e[s+2]=t[2]*i+t[6]*r+t[10]*o+t[14]}},Io.edit.unwrap=function(e,t,s){for(var i=new Array(Math.floor(e.length/3)*s),r=0;r<e.length;r++)for(var o=0;o<s;o++)i[r*s+o]=t[e[r]*s+o];return i},Io.edit.remap=function(e,t,s,i){for(var r=new Array(s.length),o=0;o<e.length;o++)for(var n=0;n<i;n++)r[t[o]*i+n]=s[e[o]*i+n];return r},Io.utils={},Io.utils.getAABB=function(e){var t,s,i,r,o,n;r=o=n=-(t=s=i=999999999);for(var a=0;a<e.length;a+=3){var l=e[a+0],h=e[a+1],c=e[a+2];l<t&&(t=l),l>r&&(r=l),h<s&&(s=h),h>o&&(o=h),c<i&&(i=c),h>n&&(n=c)}return{min:{x:t,y:s,z:i},max:{x:r,y:o,z:n}}};class Do extends x{constructor(e,t={}){super(e,t),this._type=t.type||(t.src?t.src.split(".").pop():null)||"jpg",this._pos=p.vec3(t.pos||[0,0,0]),this._up=p.vec3(t.up||[0,1,0]),this._normal=p.vec3(t.normal||[0,0,1]),this._height=t.height||1,this._origin=p.vec3(),this._rtcPos=p.vec3(),this._imageSize=p.vec2(),this._texture=new yo(this),this._image=new Image,"jpg"!==this._type&&"png"!==this._type&&(this.error('Unsupported type - defaulting to "jpg"'),this._type="jpg"),this._node=new lo(this,{matrix:p.inverseMat4(p.lookAtMat4v(this._pos,p.subVec3(this._pos,this._normal,p.mat4()),this._up,p.mat4())),children:[this._bitmapMesh=new Yr(this,{scale:[1,1,1],rotation:[-90,0,0],collidable:t.collidable,pickable:t.pickable,opacity:t.opacity,clippable:t.clippable,geometry:new gi(this,To({center:[0,0,0],xSize:1,zSize:1,xSegments:2,zSegments:2})),material:new Ii(this,{diffuse:[0,0,0],ambient:[0,0,0],specular:[0,0,0],diffuseMap:this._texture,emissiveMap:this._texture,backfaces:!0})})]}),t.image?this.image=t.image:t.src?this.src=t.src:t.imageData&&(this.imageData=t.imageData),this.scene._bitmapCreated(this)}set visible(e){this._bitmapMesh.visible=e}get visible(){return this._bitmapMesh.visible}set image(e){this._image=e,this._image&&(this._texture.image=this._image,this._imageSize[0]=this._image.width,this._imageSize[1]=this._image.height,this._updateBitmapMeshScale())}get image(){return this._image}set src(e){if(e){this._image.onload=()=>{this._texture.image=this._image,this._imageSize[0]=this._image.width,this._imageSize[1]=this._image.height,this._updateBitmapMeshScale()},this._image.src=e;switch(e.split(".").pop()){case"jpeg":case"jpg":this._type="jpg";break;case"png":this._type="png"}}}get src(){return this._image.src}set imageData(e){this._image.onload=()=>{this._texture.image=image,this._imageSize[0]=image.width,this._imageSize[1]=image.height,this._updateBitmapMeshScale()},this._image.src=e}get imageData(){const e=document.createElement("canvas"),t=e.getContext("2d");return e.width=this._image.width,e.height=this._image.height,t.drawImage(this._image,0,0),e.toDataURL("jpg"===this._type?"image/jpeg":"image/png")}set type(e){"png"===(e=e||"jpg")&&"jpg"===e||(this.error("Unsupported value for `type` - supported types are `jpg` and `png` - defaulting to `jpg`"),e="jpg"),this._type=e}get type(){return this._type}get pos(){return this._pos}get normal(){return this._normal}get up(){return this._up}set height(e){this._height=null==e?1:e,this._image&&this._updateBitmapMeshScale()}get height(){return this._height}set collidable(e){this._bitmapMesh.collidable=!1!==e}get collidable(){return this._bitmapMesh.collidable}set clippable(e){this._bitmapMesh.clippable=!1!==e}get clippable(){return this._bitmapMesh.clippable}set pickable(e){this._bitmapMesh.pickable=!1!==e}get pickable(){return this._bitmapMesh.pickable}set opacity(e){this._bitmapMesh.opacity=e}get opacity(){return this._bitmapMesh.opacity}destroy(){super.destroy(),this.scene._bitmapDestroyed(this)}_updateBitmapMeshScale(){const e=this._imageSize[1]/this._imageSize[0];this._bitmapMesh.scale=[this._height*e,1,this._height]}}class bo extends x{constructor(e,t={}){if(super(e,t),this._positions=t.positions||[],this._origin=p.vec3(t.origin||[0,0,0]),t.indices)this._indices=t.indices;else{this._indices=[];for(let e=0,t=this._positions.length/3-1;e<t;e+=2)this._indices.push(e),this._indices.push(e+1)}this._mesh=new Yr(this,{visible:t.visible,clippable:t.clippable,collidable:t.collidable,geometry:new _o(this,{primitive:"lines",positions:this._positions,indices:this._indices,origin:t.origin}),material:new Ii(this,{diffuse:t.color||[0,0,0],emissive:t.color||[0,0,0]})}),this.scene._lineSetCreated(this)}set visible(e){this._mesh.visible=e}get visible(){return this._mesh.visible}get positions(){return this._positions}get indices(){return this._indices}destroy(){super.destroy(),this.scene._lineSetDestroyed(this)}}const Ro=p.vec3(),Co=p.vec3(),xo=p.vec3(),No=p.vec3();class Oo extends a{constructor(e,t={}){super("BCFViewpoints",e,t),this.originatingSystem=t.originatingSystem||"xeokit.io",this.authoringTool=t.authoringTool||"xeokit.io"}getViewpoint(e={}){const t=this.viewer.scene,s=t.camera,i=t.realWorldOffset,r=!0===e.reverseClippingPlanes;let o={},n=p.normalizeVec3(p.subVec3(s.look,s.eye,p.vec3())),a=s.eye,l=s.up;s.yUp&&(n=Mo(n),a=Mo(a),l=Mo(l));const h=So(p.addVec3(a,i));"ortho"===s.projection?o.orthogonal_camera={camera_view_point:h,camera_direction:So(n),camera_up_vector:So(l),view_to_world_scale:s.ortho.scale}:o.perspective_camera={camera_view_point:h,camera_direction:So(n),camera_up_vector:So(l),field_of_view:s.perspective.fov};const c=t.sectionPlanes;for(let e in c)if(c.hasOwnProperty(e)){let t=c[e];if(!t.active)continue;let n,a=t.pos;n=r?p.negateVec3(t.dir,p.vec3()):t.dir,s.yUp&&(a=Mo(a),n=Mo(n)),p.addVec3(a,i),a=So(a),n=So(n),o.clipping_planes||(o.clipping_planes=[]),o.clipping_planes.push({location:a,direction:n})}const u=t.lineSets;for(let e in u)if(u.hasOwnProperty(e)){const t=u[e];o.lines||(o.lines=[]);const s=t.positions,i=t.indices;for(let e=0,t=i.length/2;e<t;e++){const t=i[2*e],r=i[2*e+1];o.lines.push({start_point:{x:s[3*t+0],y:s[3*t+1],z:s[3*t+2]},end_point:{x:s[3*r+0],y:s[3*r+1],z:s[3*r+2]}})}}const A=t.bitmaps;for(let e in A)if(A.hasOwnProperty(e)){let t=A[e],r=t.pos,n=t.normal,a=t.up;s.yUp&&(r=Mo(r),n=Mo(n),a=Mo(a)),p.addVec3(r,i),o.bitmaps||(o.bitmaps=[]),o.bitmaps.push({bitmap_type:t.type,bitmap_data:t.imageData,location:So(r),normal:So(n),up:So(a),height:t.height})}o.components={visibility:{view_setup_hints:{spaces_visible:!!e.spacesVisible,space_boundaries_visible:!!e.spaceBoundariesVisible,openings_visible:!!e.openingsVisible}}};const d=new Set(t.opacityObjectIds),f=new Set(t.xrayedObjectIds),m=new Set(t.colorizedObjectIds),g=Object.values(t.objects).filter((e=>d.has(e.id)||m.has(e.id)||f.has(e.id))).reduce(((e,s)=>{let i,r=function(e){let t="";return t+=Math.round(255*e[0]).toString(16).padStart(2,"0"),t+=Math.round(255*e[1]).toString(16).padStart(2,"0"),t+=Math.round(255*e[2]).toString(16).padStart(2,"0"),t}(s.colorize);s.xrayed?(i=0===t.xrayMaterial.fillAlpha&&0!==t.xrayMaterial.edgeAlpha?.1:t.xrayMaterial.fillAlpha,i=Math.round(255*i).toString(16).padStart(2,"0"),r=i+r):d.has(s.id)&&(i=Math.round(255*s.opacity).toString(16).padStart(2,"0"),r=i+r),e[r]||(e[r]=[]);const o=s.id,n=s.originalSystemId,a={ifc_guid:n,originating_system:this.originatingSystem};return n!==o&&(a.authoring_tool_id=o),e[r].push(a),e}),{}),y=Object.entries(g).map((([e,t])=>({color:e,components:t})));o.components.coloring=y;const E=t.objectIds,v=t.visibleObjects,_=t.visibleObjectIds,I=E.filter((e=>!v[e])),T=t.selectedObjectIds;return e.defaultInvisible||_.length<I.length?(o.components.visibility.exceptions=this._createBCFComponents(_),o.components.visibility.default_visibility=!1):(o.components.visibility.exceptions=this._createBCFComponents(I),o.components.visibility.default_visibility=!0),o.components.selection=this._createBCFComponents(T),!1!==e.snapshot&&(o.snapshot={snapshot_type:"png",snapshot_data:this.viewer.getSnapshot({format:"png"})}),o}_createBCFComponents(e){const t=this.viewer.scene,s=[];for(let i=0,r=e.length;i<r;i++){const r=e[i],o=t.objects[r];if(o){const e={ifc_guid:o.originalSystemId,originating_system:this.originatingSystem};o.originalSystemId!==r&&(e.authoring_tool_id=r),s.push(e)}}return s}setViewpoint(e,t={}){if(!e)return;const s=this.viewer,i=s.scene,r=i.camera,o=!1!==t.rayCast,n=!1!==t.immediate,a=!1!==t.reset,l=i.realWorldOffset,h=!0===t.reverseClippingPlanes;if(i.clearSectionPlanes(),e.clipping_planes&&e.clipping_planes.forEach((function(e){let t=wo(e.location,Ro),s=wo(e.direction,Ro);h&&p.negateVec3(s),p.subVec3(t,l),r.yUp&&(t=Bo(t),s=Bo(s)),new Jr(i,{pos:t,dir:s})})),i.clearLines(),e.lines){const t=[],s=[];let r=0;e.lines.forEach((e=>{e.start_point&&e.end_point&&(t.push(e.start_point.x),t.push(e.start_point.y),t.push(e.start_point.z),t.push(e.end_point.x),t.push(e.end_point.y),t.push(e.end_point.z),s.push(r++),s.push(r++))})),new bo(i,{positions:t,indices:s,clippable:!1,collidable:!0})}if(i.clearBitmaps(),e.bitmaps&&e.bitmaps.forEach((function(e){const t=e.bitmap_type||"jpg",s=e.bitmap_data;let o=wo(e.location,Co),n=wo(e.normal,xo),a=wo(e.up,No),l=e.height||1;t&&s&&o&&n&&a&&(r.yUp&&(o=Bo(o),n=Bo(n),a=Bo(a)),new Do(i,{src:s,type:t,pos:o,normal:n,up:a,clippable:!1,collidable:!0,height:l}))})),a&&(i.setObjectsXRayed(i.xrayedObjectIds,!1),i.setObjectsHighlighted(i.highlightedObjectIds,!1),i.setObjectsSelected(i.selectedObjectIds,!1)),e.components){if(e.components.visibility){e.components.visibility.default_visibility?(i.setObjectsVisible(i.objectIds,!0),e.components.visibility.exceptions&&e.components.visibility.exceptions.forEach((e=>this._withBCFComponent(t,e,(e=>e.visible=!1))))):(i.setObjectsVisible(i.objectIds,!1),e.components.visibility.exceptions&&e.components.visibility.exceptions.forEach((e=>this._withBCFComponent(t,e,(e=>e.visible=!0)))));const r=e.components.visibility.view_setup_hints;r&&(!1===r.spaces_visible&&i.setObjectsVisible(s.metaScene.getObjectIDsByType("IfcSpace"),!1),!1===r.openings_visible&&i.setObjectsVisible(s.metaScene.getObjectIDsByType("IfcOpening"),!1),r.space_boundaries_visible)}e.components.selection&&(i.setObjectsSelected(i.selectedObjectIds,!1),e.components.selection.forEach((e=>this._withBCFComponent(t,e,(e=>e.selected=!0))))),e.components.coloring&&e.components.coloring.forEach((e=>{let s=e.color,i=0,r=!1;8===s.length&&(i=parseInt(s.substring(0,2),16)/256,i<=1&&i>=.95&&(i=1),s=s.substring(2),r=!0);const o=[parseInt(s.substring(0,2),16)/256,parseInt(s.substring(2,4),16)/256,parseInt(s.substring(4,6),16)/256];e.components.map((e=>this._withBCFComponent(t,e,(e=>{e.colorize=o,r&&(e.opacity=i)}))))}))}if(e.perspective_camera||e.orthogonal_camera){let a,h,c,u;if(e.perspective_camera?(a=wo(e.perspective_camera.camera_view_point,Ro),h=wo(e.perspective_camera.camera_direction,Ro),c=wo(e.perspective_camera.camera_up_vector,Ro),r.perspective.fov=e.perspective_camera.field_of_view,u="perspective"):(a=wo(e.orthogonal_camera.camera_view_point,Ro),h=wo(e.orthogonal_camera.camera_direction,Ro),c=wo(e.orthogonal_camera.camera_up_vector,Ro),r.ortho.scale=e.orthogonal_camera.view_to_world_scale,u="ortho"),p.subVec3(a,l),r.yUp&&(a=Bo(a),h=Bo(h),c=Bo(c)),o){const e=i.pick({pickSurface:!0,origin:a,direction:h});h=e?e.worldPos:p.addVec3(a,h,Ro)}else h=p.addVec3(a,h,Ro);n?(r.eye=a,r.look=h,r.up=c,r.projection=u):s.cameraFlight.flyTo({eye:a,look:h,up:c,duration:t.duration,projection:u})}}_withBCFComponent(e,t,s){const i=this.viewer,r=i.scene;if(t.authoring_tool_id&&t.originating_system===this.originatingSystem){const o=t.authoring_tool_id,n=r.objects[o];if(n)return void s(n);if(e.updateCompositeObjects){if(i.metaScene.metaObjects[o])return void r.withObjects(i.metaScene.getObjectIDsInSubtree(o),s)}}if(t.ifc_guid){const o=t.ifc_guid,n=r.objects[o];if(n)return void s(n);if(e.updateCompositeObjects){if(i.metaScene.metaObjects[o])return void r.withObjects(i.metaScene.getObjectIDsInSubtree(o),s)}Object.keys(r.models).forEach((t=>{const n=p.globalizeObjectId(t,o),a=r.objects[n];if(a)s(a);else if(e.updateCompositeObjects){i.metaScene.metaObjects[n]&&r.withObjects(i.metaScene.getObjectIDsInSubtree(n),s)}}))}}destroy(){super.destroy()}}function So(e){return{x:e[0],y:e[1],z:e[2]}}function wo(e,t){return(t=new Float64Array(3))[0]=e.x,t[1]=e.y,t[2]=e.z,t}function Mo(e){return new Float64Array([e[0],-e[2],e[1]])}function Bo(e){return new Float64Array([e[0],e[2],-e[1]])}p.vec3();class Fo{constructor(e={}){this._eventSubIDMap=null,this._eventSubEvents=null,this._eventSubs=null,this._events=null,this._locale="en",this._messages={},this._locales=[],this._locale="en",this.messages=e.messages,this.locale=e.locale}set messages(e){this._messages=e||{},this._locales=Object.keys(this._messages),this.fire("updated",this)}loadMessages(e={}){for(let t in e)this._messages[t]=e[t];this.messages=this._messages}clearMessages(){this.messages={}}get locales(){return this._locales}set locale(e){e=e||"de",this._locale!==e&&(this._locale=e,this.fire("updated",e))}get locale(){return this._locale}translate(e,t){const s=this._messages[this._locale];if(!s)return null;const i=Lo(e,s);return i?t?Uo(i,t):i:null}translatePlurals(e,t,s){const i=this._messages[this._locale];if(!i)return null;let r=Lo(e,i);return r=0===(t=parseInt(""+t,10))?r.zero:t>1?r.other:r.one,r?(r=Uo(r,[t]),s&&(r=Uo(r,s)),r):null}fire(e,t,s){this._events||(this._events={}),this._eventSubs||(this._eventSubs={}),!0!==s&&(this._events[e]=t||!0);const i=this._eventSubs[e];if(i)for(const e in i)if(i.hasOwnProperty(e)){i[e].callback(t)}}on(e,s){this._events||(this._events={}),this._eventSubIDMap||(this._eventSubIDMap=new t),this._eventSubEvents||(this._eventSubEvents={}),this._eventSubs||(this._eventSubs={});let i=this._eventSubs[e];i||(i={},this._eventSubs[e]=i);const r=this._eventSubIDMap.addItem();i[r]={callback:s},this._eventSubEvents[r]=e;const o=this._events[e];return void 0!==o&&s(o),r}off(e){if(null==e)return;if(!this._eventSubEvents)return;const t=this._eventSubEvents[e];if(t){delete this._eventSubEvents[e];const s=this._eventSubs[t];s&&delete s[e],this._eventSubIDMap.removeItem(e)}}}function Lo(e,t){if(t[e])return t[e];const s=e.split(".");let i=t;for(let e=0,t=s.length;i&&e<t;e++){i=i[s[e]]}return i}function Uo(e,t=[]){return e.replace(/\{\{|\}\}|\{(\d+)\}/g,(function(e,s){return"{{"===e?"{":"}}"===e?"}":t[s]}))}p.vec3();const Ho=p.vec3(),Go=p.vec3(),Vo=p.vec3(),ko=p.vec3(),jo=p.vec3();class Qo extends x{get type(){return"CameraFlightAnimation"}constructor(e,t={}){super(e,t),this._look1=p.vec3(),this._eye1=p.vec3(),this._up1=p.vec3(),this._look2=p.vec3(),this._eye2=p.vec3(),this._up2=p.vec3(),this._orthoScale1=1,this._orthoScale2=1,this._flying=!1,this._flyEyeLookUp=!1,this._flyingEye=!1,this._flyingLook=!1,this._callback=null,this._callbackScope=null,this._time1=null,this._time2=null,this.easing=!1!==t.easing,this.duration=t.duration,this.fit=t.fit,this.fitFOV=t.fitFOV,this.trail=t.trail}flyTo(e,t,s){e=e||this.scene,this._flying&&this.stop(),this._flying=!1,this._flyingEye=!1,this._flyingLook=!1,this._flyingEyeLookUp=!1,this._callback=t,this._callbackScope=s;const i=this.scene.camera,r=!!e.projection&&e.projection!==i.projection;let o,n,a,l,h;if(this._eye1[0]=i.eye[0],this._eye1[1]=i.eye[1],this._eye1[2]=i.eye[2],this._look1[0]=i.look[0],this._look1[1]=i.look[1],this._look1[2]=i.look[2],this._up1[0]=i.up[0],this._up1[1]=i.up[1],this._up1[2]=i.up[2],this._orthoScale1=i.ortho.scale,this._orthoScale2=e.orthoScale||this._orthoScale1,e.aabb)o=e.aabb;else if(6===e.length)o=e;else if(e.eye&&e.look||e.up)n=e.eye,a=e.look,l=e.up;else if(e.eye)n=e.eye;else if(e.look)a=e.look;else{let i=e;if((y.isNumeric(i)||y.isString(i))&&(h=i,i=this.scene.components[h],!i))return this.error("Component not found: "+y.inQuotes(h)),void(t&&(s?t.call(s):t()));r||(o=i.aabb||this.scene.aabb)}const c=e.poi;if(o){if(o[3]<o[0]||o[4]<o[1]||o[5]<o[2])return;if(o[3]===o[0]&&o[4]===o[1]&&o[5]===o[2])return;o=o.slice();const t=p.getAABB3Center(o);this._look2=c||t;const s=p.subVec3(this._eye1,this._look1,Ho),i=p.normalizeVec3(s),r=c?p.getAABB3DiagPoint(o,c):p.getAABB3Diag(o),n=e.fitFOV||this._fitFOV,a=Math.abs(r/Math.tan(n*p.DEGTORAD));this._orthoScale2=1.1*r,this._eye2[0]=this._look2[0]+i[0]*a,this._eye2[1]=this._look2[1]+i[1]*a,this._eye2[2]=this._look2[2]+i[2]*a,this._up2[0]=this._up1[0],this._up2[1]=this._up1[1],this._up2[2]=this._up1[2],this._flyingEyeLookUp=!0}else(n||a||l)&&(this._flyingEyeLookUp=!!n&&!!a&&!!l,this._flyingEye=!!n&&!a,this._flyingLook=!!a&&!n,n&&(this._eye2[0]=n[0],this._eye2[1]=n[1],this._eye2[2]=n[2]),a&&(this._look2[0]=a[0],this._look2[1]=a[1],this._look2[2]=a[2]),l&&(this._up2[0]=l[0],this._up2[1]=l[1],this._up2[2]=l[2]));r?("ortho"===e.projection&&"ortho"!==i.projection&&(this._projection2="ortho",this._projMatrix1=i.projMatrix.slice(),this._projMatrix2=i.ortho.matrix.slice(),i.projection="customProjection"),"perspective"===e.projection&&"perspective"!==i.projection&&(this._projection2="perspective",this._projMatrix1=i.projMatrix.slice(),this._projMatrix2=i.perspective.matrix.slice(),i.projection="customProjection")):this._projection2=null,this.fire("started",e,!0),this._time1=Date.now(),this._time2=this._time1+(e.duration?1e3*e.duration:this._duration),this._flying=!0,R.scheduleTask(this._update,this)}jumpTo(e){this._jumpTo(e)}_jumpTo(e){this._flying&&this.stop();const t=this.scene.camera;var s,i,r,o,n;if(e.aabb)s=e.aabb;else if(6===e.length)s=e;else if(e.eye||e.look||e.up)r=e.eye,o=e.look,n=e.up;else{let t=e;if((y.isNumeric(t)||y.isString(t))&&(i=t,t=this.scene.components[i],!t))return void this.error("Component not found: "+y.inQuotes(i));s=t.aabb||this.scene.aabb}const a=e.poi;if(s){if(s[3]<=s[0]||s[4]<=s[1]||s[5]<=s[2])return;var l=a?p.getAABB3DiagPoint(s,a):p.getAABB3Diag(s);let i;o=a||p.getAABB3Center(s,o),this._trail?p.subVec3(t.look,o,jo):p.subVec3(t.eye,t.look,jo),p.normalizeVec3(jo);i=(void 0!==e.fit?e.fit:this._fit)?Math.abs(l/Math.tan((e.fitFOV||this._fitFOV)*p.DEGTORAD)):p.lenVec3(p.subVec3(t.eye,t.look,Ho)),p.mulVec3Scalar(jo,i),t.eye=p.addVec3(o,jo,Ho),t.look=o,this.scene.camera.ortho.scale=1.1*l}else(r||o||n)&&(r&&(t.eye=r),o&&(t.look=o),n&&(t.up=n));e.projection&&(t.projection=e.projection)}_update(){if(!this._flying)return;let e=(Date.now()-this._time1)/(this._time2-this._time1);const t=e>=1;e>1&&(e=1);const s=this.easing?Qo._ease(e,0,1,1):e,i=this.scene.camera;if(this._flyingEye||this._flyingLook?this._flyingEye?(p.subVec3(i.eye,i.look,jo),i.eye=p.lerpVec3(s,0,1,this._eye1,this._eye2,Vo),i.look=p.subVec3(Vo,jo,Go)):this._flyingLook&&(i.look=p.lerpVec3(s,0,1,this._look1,this._look2,Go),i.up=p.lerpVec3(s,0,1,this._up1,this._up2,ko)):this._flyingEyeLookUp&&(i.eye=p.lerpVec3(s,0,1,this._eye1,this._eye2,Vo),i.look=p.lerpVec3(s,0,1,this._look1,this._look2,Go),i.up=p.lerpVec3(s,0,1,this._up1,this._up2,ko)),this._projection2){const t="ortho"===this._projection2?Qo._easeOutExpo(e,0,1,1):Qo._easeInCubic(e,0,1,1);i.customProjection.matrix=p.lerpMat4(t,0,1,this._projMatrix1,this._projMatrix2)}else i.ortho.scale=this._orthoScale1+e*(this._orthoScale2-this._orthoScale1);if(t)return i.ortho.scale=this._orthoScale2,void this.stop();R.scheduleTask(this._update,this)}static _ease(e,t,s,i){return-s*(e/=i)*(e-2)+t}static _easeInCubic(e,t,s,i){return s*(e/=i)*e*e+t}static _easeOutExpo(e,t,s,i){return s*(1-Math.pow(2,-10*e/i))+t}stop(){if(!this._flying)return;this._flying=!1,this._time1=null,this._time2=null,this._projection2&&(this.scene.camera.projection=this._projection2);const e=this._callback;e&&(this._callback=null,this._callbackScope?e.call(this._callbackScope):e()),this.fire("stopped",!0,!0)}cancel(){this._flying&&(this._flying=!1,this._time1=null,this._time2=null,this._callback&&(this._callback=null),this.fire("canceled",!0,!0))}set duration(e){this._duration=e?1e3*e:500,this.stop()}get duration(){return this._duration/1e3}set fit(e){this._fit=!1!==e}get fit(){return this._fit}set fitFOV(e){this._fitFOV=e||45}get fitFOV(){return this._fitFOV}set trail(e){this._trail=!!e}get trail(){return this._trail}destroy(){this.stop(),super.destroy()}}class Wo extends x{get type(){return"CameraPathAnimation"}constructor(e,t={}){super(e,t),this._cameraFlightAnimation=new Qo(this),this._t=0,this.state=Wo.SCRUBBING,this._playingFromT=0,this._playingToT=0,this._playingRate=t.playingRate||1,this._playingDir=1,this._lastTime=null,this.cameraPath=t.cameraPath,this._tick=this.scene.on("tick",this._updateT,this)}_updateT(){const e=this._cameraPath;if(!e)return;let t,s;const i=performance.now(),r=this._lastTime?.001*(i-this._lastTime):0;if(this._lastTime=i,0!==r)switch(this.state){case Wo.SCRUBBING:return;case Wo.PLAYING:if(this._t+=this._playingRate*r,t=this._cameraPath.frames.length,0===t||this._playingDir<0&&this._t<=0||this._playingDir>0&&this._t>=this._cameraPath.frames[t-1].t)return this.state=Wo.SCRUBBING,this._t=this._cameraPath.frames[t-1].t,void this.fire("stopped");e.loadFrame(this._t);break;case Wo.PLAYING_TO:s=this._t+this._playingRate*r*this._playingDir,(this._playingDir<0&&s<=this._playingToT||this._playingDir>0&&s>=this._playingToT)&&(s=this._playingToT,this.state=Wo.SCRUBBING,this.fire("stopped")),this._t=s,e.loadFrame(this._t)}}_ease(e,t,s,i){return-s*(e/=i)*(e-2)+t}set cameraPath(e){this._cameraPath=e}get cameraPath(){return this._cameraPath}set rate(e){this._playingRate=e}get rate(){return this._playingRate}play(){this._cameraPath&&(this._lastTime=null,this.state=Wo.PLAYING)}playToT(e){this._cameraPath&&(this._playingFromT=this._t,this._playingToT=e,this._playingDir=this._playingToT-this._playingFromT<0?-1:1,this._lastTime=null,this.state=Wo.PLAYING_TO)}playToFrame(e){const t=this._cameraPath;if(!t)return;const s=t.frames[e];s?this.playToT(s.t):this.error("playToFrame - frame index out of range: "+e)}flyToFrame(e,t){const s=this._cameraPath;if(!s)return;const i=s.frames[e];i?(this.state=Wo.SCRUBBING,this._cameraFlightAnimation.flyTo(i,t)):this.error("flyToFrame - frame index out of range: "+e)}scrubToT(e){const t=this._cameraPath;if(!t)return;this.scene.camera&&(this._t=e,t.loadFrame(this._t),this.state=Wo.SCRUBBING)}scrubToFrame(e){const t=this._cameraPath;if(!t)return;if(!this.scene.camera)return;t.frames[e]?(t.loadFrame(this._t),this.state=Wo.SCRUBBING):this.error("playToFrame - frame index out of range: "+e)}stop(){this.state=Wo.SCRUBBING,this.fire("stopped")}destroy(){super.destroy(),this.scene.off(this._tick)}}Wo.STOPPED=0,Wo.SCRUBBING=1,Wo.PLAYING=2,Wo.PLAYING_TO=3,p.vec3(),p.vec3(),p.vec3(),p.vec3([0,-1,0]),p.vec4([0,0,0,1]);const zo=p.vec3(),Ko=p.vec3(),Yo=p.mat4();class Xo{constructor(){this.normal=p.vec3(),this.offset=0,this.testVertex=p.vec3()}set(e,t,s,i){const r=1/Math.sqrt(e*e+t*t+s*s);this.normal[0]=e*r,this.normal[1]=t*r,this.normal[2]=s*r,this.offset=i*r,this.testVertex[0]=this.normal[0]>=0?1:0,this.testVertex[1]=this.normal[1]>=0?1:0,this.testVertex[2]=this.normal[2]>=0?1:0}}class Zo{constructor(){this.planes=[new Xo,new Xo,new Xo,new Xo,new Xo,new Xo]}}function qo(e,t){let s=Zo.INSIDE;const i=zo,r=Ko;i[0]=t[0],i[1]=t[1],i[2]=t[2],r[0]=t[3],r[1]=t[4],r[2]=t[5];const o=[i,r];for(let t=0;t<6;++t){const i=e.planes[t];if(i.normal[0]*o[i.testVertex[0]][0]+i.normal[1]*o[i.testVertex[1]][1]+i.normal[2]*o[i.testVertex[2]][2]+i.offset<0)return Zo.OUTSIDE;i.normal[0]*o[1-i.testVertex[0]][0]+i.normal[1]*o[1-i.testVertex[1]][1]+i.normal[2]*o[1-i.testVertex[2]][2]+i.offset<0&&(s=Zo.INTERSECT)}return s}Zo.INSIDE=0,Zo.INTERSECT=1,Zo.OUTSIDE=2;const Jo=p.vec3();class $o{constructor(e){if(this.objectsVisible=[],this.objectsEdges=[],this.objectsXrayed=[],this.objectsHighlighted=[],this.objectsSelected=[],this.objectsClippable=[],this.objectsPickable=[],this.objectsColorize=[],this.objectsOpacity=[],this.numObjects=0,e){const t=e.metaScene.scene;this.saveObjects(t,e)}}saveObjects(e,t,s){const i=t.rootMetaObject;if(!i)return;const r=i.getObjectIDsInSubtree();this.numObjects=0,this._mask=s?y.apply(s,{}):null;const o=e.objects,n=!s||s.visible,a=!s||s.edges,l=!s||s.xrayed,h=!s||s.highlighted,c=!s||s.selected,u=!s||s.clippable,A=!s||s.pickable,p=!s||s.colorize,d=!s||s.opacity;for(var f=0,m=r.length;f<m;f++){const e=o[r[f]];if(e){if(n&&(this.objectsVisible[f]=e.visible),a&&(this.objectsEdges[f]=e.edges),l&&(this.objectsXrayed[f]=e.xrayed),h&&(this.objectsHighlighted[f]=e.highlighted),c&&(this.objectsSelected[f]=e.selected),u&&(this.objectsClippable[f]=e.clippable),A&&(this.objectsPickable[f]=e.pickable),p){const t=e.colorize;this.objectsColorize[3*f+0]=t[0],this.objectsColorize[3*f+1]=t[1],this.objectsColorize[3*f+2]=t[2]}d&&(this.objectsOpacity[f]=e.opacity),this.numObjects++}}}restoreObjects(e,t){const s=t.rootMetaObject;if(!s)return;const i=s.getObjectIDsInSubtree(),r=this._mask,o=!r||r.visible,n=!r||r.edges,a=!r||r.xrayed,l=!r||r.highlighted,h=!r||r.selected,c=!r||r.clippable,u=!r||r.pickable,A=!r||r.colorize,p=!r||r.opacity,d=e.objects;for(var f=0,m=i.length;f<m;f++){const e=d[i[f]];e&&(o&&(e.visible=this.objectsVisible[f]),n&&(e.edges=this.objectsEdges[f]),a&&(e.xrayed=this.objectsXrayed[f]),l&&(e.highlighted=this.objectsHighlighted[f]),h&&(e.selected=this.objectsSelected[f]),c&&(e.clippable=this.objectsClippable[f]),u&&(e.pickable=this.objectsPickable[f]),A&&(Jo[0]=this.objectsColorize[3*f+0],Jo[1]=this.objectsColorize[3*f+1],Jo[2]=this.objectsColorize[3*f+2],e.colorize=Jo),p&&(e.opacity=this.objectsOpacity[f]))}}}p.vec3();class en{constructor(e,t,s,i,r=null,o=0){this.model=e,this.object=null,this.parent=null,this.id=t,this.pickId=this.model.scene._renderer.getPickID(this),this.aabb=p.AABB3(),this._layer=r,this._portionId=o,this._color=[s[0],s[1],s[2],i],this._colorize=[s[0],s[1],s[2],i],this._colorizing=!1,this._transparent=i<255,this.numTriangles=0,this.origin=null}_finalize(e){this._layer.initFlags(this._portionId,e,this._transparent)}_finalize2(){this._layer.flushInitFlags&&this._layer.flushInitFlags()}_setVisible(e){this._layer.setVisible(this._portionId,e,this._transparent)}_setColor(e){this._color[0]=e[0],this._color[1]=e[1],this._color[2]=e[2],this._colorizing||this._layer.setColor(this._portionId,this._color,!1)}_setColorize(e){e?(this._colorize[0]=e[0],this._colorize[1]=e[1],this._colorize[2]=e[2],this._layer.setColor(this._portionId,this._colorize,false),this._colorizing=!0):(this._layer.setColor(this._portionId,this._color,false),this._colorizing=!1)}_setOpacity(e,t){const s=e<255,i=this._transparent!==s;this._color[3]=e,this._colorize[3]=e,this._transparent=s,this._colorizing?this._layer.setColor(this._portionId,this._colorize):this._layer.setColor(this._portionId,this._color),i&&this._layer.setTransparent(this._portionId,t,s)}_setOffset(e){this._layer.setOffset(this._portionId,e)}_setHighlighted(e){this._layer.setHighlighted(this._portionId,e,this._transparent)}_setXRayed(e){this._layer.setXRayed(this._portionId,e,this._transparent)}_setSelected(e){this._layer.setSelected(this._portionId,e,this._transparent)}_setEdges(e){this._layer.setEdges(this._portionId,e,this._transparent)}_setClippable(e){this._layer.setClippable(this._portionId,e,this._transparent)}_setCollidable(e){this._layer.setCollidable(this._portionId,e)}_setPickable(e){this._layer.setPickable(this._portionId,e,this._transparent)}_setCulled(e){this._layer.setCulled(this._portionId,e,this._transparent)}canPickTriangle(){return!1}drawPickTriangles(e,t){}pickTriangleSurface(e){}precisionRayPickSurface(e,t,s,i){return!!this._layer.precisionRayPickSurface&&this._layer.precisionRayPickSurface(this._portionId,e,t,s,i)}canPickWorldPos(){return!0}drawPickDepths(e){this.model.drawPickDepths(e)}drawPickNormals(e){this.model.drawPickNormals(e)}delegatePickedEntity(){return this.parent}getEachVertex(e){this._layer.getEachVertex(this._portionId,e)}_destroy(){this.model.scene._renderer.putPickID(this.pickId)}}const tn=new class{constructor(){this._uint8Arrays={},this._float32Arrays={}}_clear(){this._uint8Arrays={},this._float32Arrays={}}getUInt8Array(e){let t=this._uint8Arrays[e];return t||(t=new Uint8Array(e),this._uint8Arrays[e]=t),t}getFloat32Array(e){let t=this._float32Arrays[e];return t||(t=new Float32Array(e),this._float32Arrays[e]=t),t}};let sn=0;const rn=0,on=1,nn=2,an=3,ln=4,hn=5,cn=6,un=7,An=8,pn=9,dn=10,fn=11,mn=p.vec4(),gn=p.vec3();class yn{constructor(e,t){this._scene=e,this._withSAO=t,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){const e=this._scene;return[e._lightsState.getHash(),e._sectionPlanesState.getHash(),this._withSAO?"sao":"nosao"].join(";")}drawLayer(e,t,s){const i=this._scene,r=i.camera,o=t.model,n=i.canvas.gl,a=t._state,l=t._state.origin;if(!this._program&&(this._allocate(),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram(e)),n.uniform1i(this._uRenderPass,s),n.uniformMatrix4fv(this._uViewMatrix,!1,l?j(r.viewMatrix,l):r.viewMatrix),n.uniformMatrix4fv(this._uViewNormalMatrix,!1,r.viewNormalMatrix),n.uniformMatrix4fv(this._uWorldMatrix,!1,o.worldMatrix),n.uniformMatrix4fv(this._uWorldNormalMatrix,!1,o.worldNormalMatrix);const h=i._sectionPlanesState.sectionPlanes.length;if(h>0){const e=i._sectionPlanesState.sectionPlanes,s=t.layerIndex*h,r=o.renderFlags;for(let t=0;t<h;t++){const i=this._uSectionPlanes[t];if(i){const o=r.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,o?1:0),o){const s=e[t];if(l){const e=W(s.dist,s.dir,l,gn);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,t._state.positionsDecodeMatrix),this._aPosition.bindArrayBuffer(a.positionsBuf),this._aNormal&&this._aNormal.bindArrayBuffer(a.normalsBuf),this._aColor&&this._aColor.bindArrayBuffer(a.colorsBuf),this._aFlags&&this._aFlags.bindArrayBuffer(a.flagsBuf),this._aOffset&&this._aOffset.bindArrayBuffer(a.offsetsBuf),a.indicesBuf.bind(),n.drawElements(n.TRIANGLES,a.indicesBuf.numItems,a.indicesBuf.itemType,0),e.drawElements++}_allocate(){const e=this._scene,t=e.canvas.gl,s=e._lightsState;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uRenderPass=i.getLocation("renderPass"),this._uPositionsDecodeMatrix=i.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=i.getLocation("worldMatrix"),this._uWorldNormalMatrix=i.getLocation("worldNormalMatrix"),this._uViewMatrix=i.getLocation("viewMatrix"),this._uViewNormalMatrix=i.getLocation("viewNormalMatrix"),this._uProjMatrix=i.getLocation("projMatrix"),this._uLightAmbient=i.getLocation("lightAmbient"),this._uLightColor=[],this._uLightDir=[],this._uLightPos=[],this._uLightAttenuation=[];const r=s.lights;let o;for(let e=0,t=r.length;e<t;e++)switch(o=r[e],o.type){case"dir":this._uLightColor[e]=i.getLocation("lightColor"+e),this._uLightPos[e]=null,this._uLightDir[e]=i.getLocation("lightDir"+e);break;case"point":this._uLightColor[e]=i.getLocation("lightColor"+e),this._uLightPos[e]=i.getLocation("lightPos"+e),this._uLightDir[e]=null,this._uLightAttenuation[e]=i.getLocation("lightAttenuation"+e);break;case"spot":this._uLightColor[e]=i.getLocation("lightColor"+e),this._uLightPos[e]=i.getLocation("lightPos"+e),this._uLightDir[e]=i.getLocation("lightDir"+e),this._uLightAttenuation[e]=i.getLocation("lightAttenuation"+e)}this._uSectionPlanes=[];for(let t=0,s=e._sectionPlanesState.sectionPlanes.length;t<s;t++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+t),pos:i.getLocation("sectionPlanePos"+t),dir:i.getLocation("sectionPlaneDir"+t)});this._aPosition=i.getAttribute("position"),this._aOffset=i.getAttribute("offset"),this._aNormal=i.getAttribute("normal"),this._aColor=i.getAttribute("color"),this._aFlags=i.getAttribute("flags"),this._withSAO&&(this._uOcclusionTexture="uOcclusionTexture",this._uSAOParams=i.getLocation("uSAOParams")),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=i.getLocation("logDepthBufFC"))}_bindProgram(e){const t=this._scene,s=t.canvas.gl,i=this._program,r=t._lightsState.lights,o=t.camera.project;i.bind(),s.uniformMatrix4fv(this._uProjMatrix,!1,o.matrix),this._uLightAmbient&&s.uniform4fv(this._uLightAmbient,t._lightsState.getAmbientColorAndIntensity());for(let e=0,t=r.length;e<t;e++){const t=r[e];this._uLightColor[e]&&s.uniform4f(this._uLightColor[e],t.color[0],t.color[1],t.color[2],t.intensity),this._uLightPos[e]&&(s.uniform3fv(this._uLightPos[e],t.pos),this._uLightAttenuation[e]&&s.uniform1f(this._uLightAttenuation[e],t.attenuation)),this._uLightDir[e]&&s.uniform3fv(this._uLightDir[e],t.dir)}if(this._withSAO){const i=t.sao;if(i.possible){const t=s.drawingBufferWidth,r=s.drawingBufferHeight;mn[0]=t,mn[1]=r,mn[2]=i.blendCutoff,mn[3]=i.blendFactor,s.uniform4fv(this._uSAOParams,mn),this._program.bindTexture(this._uOcclusionTexture,e.occlusionTexture,0)}}if(t.logarithmicDepthBufferEnabled){const e=2/(Math.log(o.far+1)/Math.LN2);s.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState,s=e._lightsState,i=t.sectionPlanes.length>0;let r;const o=[];o.push("#version 300 es"),o.push("// Triangles batching draw vertex shader"),o.push("uniform int renderPass;"),o.push("in vec3 position;"),o.push("in vec3 normal;"),o.push("in vec4 color;"),o.push("in float flags;"),e.entityOffsetsEnabled&&o.push("in vec3 offset;"),o.push("uniform mat4 worldMatrix;"),o.push("uniform mat4 worldNormalMatrix;"),o.push("uniform mat4 viewMatrix;"),o.push("uniform mat4 projMatrix;"),o.push("uniform mat4 viewNormalMatrix;"),o.push("uniform mat4 positionsDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(o.push("uniform float logDepthBufFC;"),o.push("out float vFragDepth;"),o.push("bool isPerspectiveMatrix(mat4 m) {"),o.push("    return (m[2][3] == - 1.0);"),o.push("}"),o.push("out float isPerspective;")),o.push("uniform vec4 lightAmbient;");for(let e=0,t=s.lights.length;e<t;e++)r=s.lights[e],"ambient"!==r.type&&(o.push("uniform vec4 lightColor"+e+";"),"dir"===r.type&&o.push("uniform vec3 lightDir"+e+";"),"point"===r.type&&o.push("uniform vec3 lightPos"+e+";"),"spot"===r.type&&(o.push("uniform vec3 lightPos"+e+";"),o.push("uniform vec3 lightDir"+e+";")));o.push("vec3 octDecode(vec2 oct) {"),o.push("    vec3 v = vec3(oct.xy, 1.0 - abs(oct.x) - abs(oct.y));"),o.push("    if (v.z < 0.0) {"),o.push("        v.xy = (1.0 - abs(v.yx)) * vec2(v.x >= 0.0 ? 1.0 : -1.0, v.y >= 0.0 ? 1.0 : -1.0);"),o.push("    }"),o.push("    return normalize(v);"),o.push("}"),i&&(o.push("out vec4 vWorldPosition;"),o.push("out float vFlags;")),o.push("out vec4 vColor;"),o.push("void main(void) {"),o.push("int colorFlag = int(flags) & 0xF;"),o.push("if (colorFlag != renderPass) {"),o.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),o.push("} else {"),o.push("vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),e.entityOffsetsEnabled&&o.push("worldPosition.xyz = worldPosition.xyz + offset;"),o.push("vec4 viewPosition  = viewMatrix * worldPosition; "),o.push("vec4 worldNormal =  worldNormalMatrix * vec4(octDecode(normal.xy), 0.0); "),o.push("vec3 viewNormal = normalize((viewNormalMatrix * worldNormal).xyz);"),o.push("vec3 reflectedColor = vec3(0.0, 0.0, 0.0);"),o.push("vec3 viewLightDir = vec3(0.0, 0.0, -1.0);"),o.push("float lambertian = 1.0;");for(let e=0,t=s.lights.length;e<t;e++)if(r=s.lights[e],"ambient"!==r.type){if("dir"===r.type)"view"===r.space?o.push("viewLightDir = normalize(lightDir"+e+");"):o.push("viewLightDir = normalize((viewMatrix * vec4(lightDir"+e+", 0.0)).xyz);");else if("point"===r.type)"view"===r.space?o.push("viewLightDir = -normalize(lightPos"+e+" - viewPosition.xyz);"):o.push("viewLightDir = -normalize((viewMatrix * vec4(lightPos"+e+", 0.0)).xyz);");else{if("spot"!==r.type)continue;"view"===r.space?o.push("viewLightDir = normalize(lightDir"+e+");"):o.push("viewLightDir = normalize((viewMatrix * vec4(lightDir"+e+", 0.0)).xyz);")}o.push("lambertian = max(dot(-viewNormal, viewLightDir), 0.0);"),o.push("reflectedColor += lambertian * (lightColor"+e+".rgb * lightColor"+e+".a);")}return o.push("vec3 rgb = (vec3(float(color.r) / 255.0, float(color.g) / 255.0, float(color.b) / 255.0));"),o.push("vColor =  vec4((lightAmbient.rgb * lightAmbient.a * rgb) + (reflectedColor * rgb), float(color.a) / 255.0);"),o.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(o.push("vFragDepth = 1.0 + clipPos.w;"),o.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),i&&(o.push("vWorldPosition = worldPosition;"),o.push("vFlags = flags;")),o.push("gl_Position = clipPos;"),o.push("}"),o.push("}"),o}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Triangles batching draw fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("in float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),this._withSAO&&(i.push("uniform sampler2D uOcclusionTexture;"),i.push("uniform vec4      uSAOParams;"),i.push("const float       packUpscale = 256. / 255.;"),i.push("const float       unpackDownScale = 255. / 256.;"),i.push("const vec3        packFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );"),i.push("const vec4        unPackFactors = unpackDownScale / vec4( packFactors, 1. );"),i.push("float unpackRGBToFloat( const in vec4 v ) {"),i.push("    return dot( v, unPackFactors );"),i.push("}")),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("in vec4 vColor;"),i.push("out vec4 outColor;"),i.push("void main(void) {"),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("  float dist = 0.0;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("if (sectionPlaneActive"+e+") {"),i.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("}");i.push("  if (dist > 0.0) { "),i.push("      discard;"),i.push("  }"),i.push("}")}return e.logarithmicDepthBufferEnabled&&i.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),this._withSAO?(i.push("   float viewportWidth     = uSAOParams[0];"),i.push("   float viewportHeight    = uSAOParams[1];"),i.push("   float blendCutoff       = uSAOParams[2];"),i.push("   float blendFactor       = uSAOParams[3];"),i.push("   vec2 uv                 = vec2(gl_FragCoord.x / viewportWidth, gl_FragCoord.y / viewportHeight);"),i.push("   float ambient           = smoothstep(blendCutoff, 1.0, unpackRGBToFloat(texture(uOcclusionTexture, uv))) * blendFactor;"),i.push("   outColor            = vec4(vColor.rgb * ambient, 1.0);")):i.push("   outColor            = vColor;"),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const En=p.vec4(),vn=p.vec3();class _n{constructor(e,t){this._scene=e,this._withSAO=t,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){const e=this._scene;return[e._lightsState.getHash(),e._sectionPlanesState.getHash(),this._withSAO?"sao":"nosao"].join(";")}drawLayer(e,t,s){const i=this._scene,r=i.camera,o=t.model,n=i.canvas.gl,a=t._state,l=t._state.origin;if(!this._program&&(this._allocate(),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram(e)),n.uniform1i(this._uRenderPass,s),n.uniformMatrix4fv(this._uViewMatrix,!1,l?j(r.viewMatrix,l):r.viewMatrix),n.uniformMatrix4fv(this._uWorldMatrix,!1,o.worldMatrix);const h=i._sectionPlanesState.sectionPlanes.length;if(h>0){const e=i._sectionPlanesState.sectionPlanes,s=t.layerIndex*h,r=o.renderFlags;for(let t=0;t<h;t++){const i=this._uSectionPlanes[t],o=r.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,o?1:0),o){const s=e[t];if(l){const e=W(s.dist,s.dir,l,vn);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,t._state.positionsDecodeMatrix),this._aPosition.bindArrayBuffer(a.positionsBuf),this._aColor&&this._aColor.bindArrayBuffer(a.colorsBuf),this._aFlags&&this._aFlags.bindArrayBuffer(a.flagsBuf),this._aOffset&&this._aOffset.bindArrayBuffer(a.offsetsBuf),a.indicesBuf.bind(),n.drawElements(n.TRIANGLES,a.indicesBuf.numItems,a.indicesBuf.itemType,0)}_allocate(){const e=this._scene,t=e.canvas.gl,s=e._lightsState;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uRenderPass=i.getLocation("renderPass"),this._uPositionsDecodeMatrix=i.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=i.getLocation("worldMatrix"),this._uViewMatrix=i.getLocation("viewMatrix"),this._uProjMatrix=i.getLocation("projMatrix"),this._uLightAmbient=i.getLocation("lightAmbient"),this._uLightColor=[],this._uLightDir=[],this._uLightPos=[],this._uLightAttenuation=[];const r=s.lights;let o;for(let e=0,t=r.length;e<t;e++)switch(o=r[e],o.type){case"dir":this._uLightColor[e]=i.getLocation("lightColor"+e),this._uLightPos[e]=null,this._uLightDir[e]=i.getLocation("lightDir"+e);break;case"point":this._uLightColor[e]=i.getLocation("lightColor"+e),this._uLightPos[e]=i.getLocation("lightPos"+e),this._uLightDir[e]=null,this._uLightAttenuation[e]=i.getLocation("lightAttenuation"+e);break;case"spot":this._uLightColor[e]=i.getLocation("lightColor"+e),this._uLightPos[e]=i.getLocation("lightPos"+e),this._uLightDir[e]=i.getLocation("lightDir"+e),this._uLightAttenuation[e]=i.getLocation("lightAttenuation"+e)}this._uSectionPlanes=[];for(let t=0,s=e._sectionPlanesState.sectionPlanes.length;t<s;t++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+t),pos:i.getLocation("sectionPlanePos"+t),dir:i.getLocation("sectionPlaneDir"+t)});this._aPosition=i.getAttribute("position"),this._aOffset=i.getAttribute("offset"),this._aColor=i.getAttribute("color"),this._aFlags=i.getAttribute("flags"),this._withSAO&&(this._uOcclusionTexture="uOcclusionTexture",this._uSAOParams=i.getLocation("uSAOParams")),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=i.getLocation("logDepthBufFC"))}_bindProgram(e){const t=this._scene,s=t.canvas.gl,i=this._program,r=t._lightsState.lights,o=t.camera.project;i.bind(),s.uniformMatrix4fv(this._uProjMatrix,!1,o.matrix),this._uLightAmbient&&s.uniform4fv(this._uLightAmbient,t._lightsState.getAmbientColorAndIntensity());for(let e=0,t=r.length;e<t;e++){const t=r[e];this._uLightColor[e]&&s.uniform4f(this._uLightColor[e],t.color[0],t.color[1],t.color[2],t.intensity),this._uLightPos[e]&&(s.uniform3fv(this._uLightPos[e],t.pos),this._uLightAttenuation[e]&&s.uniform1f(this._uLightAttenuation[e],t.attenuation)),this._uLightDir[e]&&s.uniform3fv(this._uLightDir[e],t.dir)}if(this._withSAO){const i=t.sao;if(i.possible){const t=s.drawingBufferWidth,r=s.drawingBufferHeight;En[0]=t,En[1]=r,En[2]=i.blendCutoff,En[3]=i.blendFactor,s.uniform4fv(this._uSAOParams,En),this._program.bindTexture(this._uOcclusionTexture,e.occlusionTexture,0)}}if(t.logarithmicDepthBufferEnabled){const e=2/(Math.log(o.far+1)/Math.LN2);s.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Triangles batching flat-shading draw vertex shader"),s.push("uniform int renderPass;"),s.push("in vec3 position;"),s.push("in vec4 color;"),s.push("in float flags;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("uniform mat4 worldMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("out float isPerspective;")),t&&(s.push("out vec4 vWorldPosition;"),s.push("out float vFlags;")),s.push("out vec4 vViewPosition;"),s.push("out vec4 vColor;"),s.push("void main(void) {"),s.push("int colorFlag = int(flags) & 0xF;"),s.push("if (colorFlag != renderPass) {"),s.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("} else {"),s.push("vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),e.entityOffsetsEnabled&&s.push("worldPosition.xyz = worldPosition.xyz + offset;"),s.push("vec4 viewPosition  = viewMatrix * worldPosition; "),s.push("vViewPosition = viewPosition;"),s.push("vColor = vec4(float(color.r) / 255.0, float(color.g) / 255.0, float(color.b) / 255.0, float(color.a) / 255.0);"),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),t&&(s.push("vWorldPosition = worldPosition;"),s.push("vFlags = flags;")),s.push("gl_Position = clipPos;"),s.push("}"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._lightsState,s=e._sectionPlanesState,i=s.sectionPlanes.length>0,r=[];if(r.push("#version 300 es"),r.push("// Triangles batching flat-shading draw fragment shader"),r.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),r.push("precision highp float;"),r.push("precision highp int;"),r.push("#else"),r.push("precision mediump float;"),r.push("precision mediump int;"),r.push("#endif"),e.logarithmicDepthBufferEnabled&&(r.push("in float isPerspective;"),r.push("uniform float logDepthBufFC;"),r.push("in float vFragDepth;")),this._withSAO&&(r.push("uniform sampler2D uOcclusionTexture;"),r.push("uniform vec4      uSAOParams;"),r.push("const float       packUpscale = 256. / 255.;"),r.push("const float       unpackDownScale = 255. / 256.;"),r.push("const vec3        packFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );"),r.push("const vec4        unPackFactors = unpackDownScale / vec4( packFactors, 1. );"),r.push("float unpackRGBToFloat( const in vec4 v ) {"),r.push("    return dot( v, unPackFactors );"),r.push("}")),i){r.push("in vec4 vWorldPosition;"),r.push("in float vFlags;");for(let e=0,t=s.sectionPlanes.length;e<t;e++)r.push("uniform bool sectionPlaneActive"+e+";"),r.push("uniform vec3 sectionPlanePos"+e+";"),r.push("uniform vec3 sectionPlaneDir"+e+";")}r.push("uniform mat4 viewMatrix;"),r.push("uniform vec4 lightAmbient;");for(let e=0,s=t.lights.length;e<s;e++){const s=t.lights[e];"ambient"!==s.type&&(r.push("uniform vec4 lightColor"+e+";"),"dir"===s.type&&r.push("uniform vec3 lightDir"+e+";"),"point"===s.type&&r.push("uniform vec3 lightPos"+e+";"),"spot"===s.type&&(r.push("uniform vec3 lightPos"+e+";"),r.push("uniform vec3 lightDir"+e+";")))}if(r.push("in vec4 vViewPosition;"),r.push("in vec4 vColor;"),r.push("out vec4 outColor;"),r.push("void main(void) {"),i){r.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),r.push("  if (clippable) {"),r.push("  float dist = 0.0;");for(let e=0,t=s.sectionPlanes.length;e<t;e++)r.push("if (sectionPlaneActive"+e+") {"),r.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),r.push("}");r.push("  if (dist > 0.0) { "),r.push("      discard;"),r.push("  }"),r.push("}")}r.push("vec3 reflectedColor = vec3(0.0, 0.0, 0.0);"),r.push("vec3 viewLightDir = vec3(0.0, 0.0, -1.0);"),r.push("float lambertian = 1.0;"),r.push("vec3 xTangent = dFdx( vViewPosition.xyz );"),r.push("vec3 yTangent = dFdy( vViewPosition.xyz );"),r.push("vec3 viewNormal = normalize( cross( xTangent, yTangent ) );");for(let e=0,s=t.lights.length;e<s;e++){const s=t.lights[e];if("ambient"!==s.type){if("dir"===s.type)"view"===s.space?r.push("viewLightDir = normalize(lightDir"+e+");"):r.push("viewLightDir = normalize((viewMatrix * vec4(lightDir"+e+", 0.0)).xyz);");else if("point"===s.type)"view"===s.space?r.push("viewLightDir = -normalize(lightPos"+e+" - viewPosition.xyz);"):r.push("viewLightDir = -normalize((viewMatrix * vec4(lightPos"+e+", 0.0)).xyz);");else{if("spot"!==s.type)continue;"view"===s.space?r.push("viewLightDir = normalize(lightDir"+e+");"):r.push("viewLightDir = normalize((viewMatrix * vec4(lightDir"+e+", 0.0)).xyz);")}r.push("lambertian = max(dot(-viewNormal, viewLightDir), 0.0);"),r.push("reflectedColor += lambertian * (lightColor"+e+".rgb * lightColor"+e+".a);")}}return r.push("vec4 fragColor =  vec4((lightAmbient.rgb * lightAmbient.a * vColor.rgb) + (reflectedColor * vColor.rgb), vColor.a);"),this._withSAO?(r.push("   float viewportWidth     = uSAOParams[0];"),r.push("   float viewportHeight    = uSAOParams[1];"),r.push("   float blendCutoff       = uSAOParams[2];"),r.push("   float blendFactor       = uSAOParams[3];"),r.push("   vec2 uv                 = vec2(gl_FragCoord.x / viewportWidth, gl_FragCoord.y / viewportHeight);"),r.push("   float ambient           = smoothstep(blendCutoff, 1.0, unpackRGBToFloat(texture(uOcclusionTexture, uv))) * blendFactor;"),r.push("   outColor            = vec4(fragColor.rgb * ambient, 1.0);")):r.push("   outColor            = fragColor;"),e.logarithmicDepthBufferEnabled&&r.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),r.push("}"),r}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const In=new Float32Array([1,1,1]),Tn=p.vec3();class Pn{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=t._state.origin;if(!this._program&&(this._allocate(),this.errors))return;if(e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),n.uniform1i(this._uRenderPass,s),s===hn){const e=r.xrayMaterial._state,t=e.fillColor,s=e.fillAlpha;n.uniform4f(this._uSilhouetteColor,t[0],t[1],t[2],s)}else if(s===an){const e=r.highlightMaterial._state,t=e.fillColor,s=e.fillAlpha;n.uniform4f(this._uSilhouetteColor,t[0],t[1],t[2],s)}else if(s===ln){const e=r.selectedMaterial._state,t=e.fillColor,s=e.fillAlpha;n.uniform4f(this._uSilhouetteColor,t[0],t[1],t[2],s)}else n.uniform4fv(this._uSilhouetteColor,In);const h=l?j(o.viewMatrix,l):o.viewMatrix;n.uniformMatrix4fv(this._uViewMatrix,!1,h),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix);const c=r._sectionPlanesState.sectionPlanes.length;if(c>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*c,o=i.renderFlags;for(let t=0;t<c;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(l){const e=W(s.dist,s.dir,l,Tn);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,t._state.positionsDecodeMatrix),this._aPosition.bindArrayBuffer(a.positionsBuf),this._aOffset&&this._aOffset.bindArrayBuffer(a.offsetsBuf),this._aFlags&&this._aFlags.bindArrayBuffer(a.flagsBuf),this._aColor&&this._aColor.bindArrayBuffer(a.colorsBuf),a.indicesBuf.bind(),n.drawElements(n.TRIANGLES,a.indicesBuf.numItems,a.indicesBuf.itemType,0)}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uPositionsDecodeMatrix=s.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=s.getLocation("worldMatrix"),this._uViewMatrix=s.getLocation("viewMatrix"),this._uProjMatrix=s.getLocation("projMatrix"),this._uSilhouetteColor=s.getLocation("silhouetteColor"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});this._aPosition=s.getAttribute("position"),this._aOffset=s.getAttribute("offset"),this._aFlags=s.getAttribute("flags"),this._aColor=s.getAttribute("color"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC"))}_bindProgram(){const e=this._scene,t=e.canvas.gl,s=e.camera.project;if(this._program.bind(),t.uniformMatrix4fv(this._uProjMatrix,!1,s.matrix),e.logarithmicDepthBufferEnabled){const e=2/(Math.log(s.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Triangles batching silhouette vertex shader"),s.push("uniform int renderPass;"),s.push("in vec3 position;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("in float flags;"),s.push("in vec4 color;"),s.push("uniform mat4 worldMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),s.push("uniform vec4 silhouetteColor;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("out float isPerspective;")),t&&(s.push("out vec4 vWorldPosition;"),s.push("out float vFlags;")),s.push("out vec4 vColor;"),s.push("void main(void) {"),s.push("int silhouetteFlag = int(flags) >> 4 & 0xF;"),s.push("if (silhouetteFlag != renderPass) {"),s.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("} else {"),s.push("      vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("vec4 viewPosition  = viewMatrix * worldPosition; "),t&&(s.push("vWorldPosition = worldPosition;"),s.push("vFlags = flags;")),s.push("vColor = vec4(silhouetteColor.r, silhouetteColor.g, silhouetteColor.b, min(silhouetteColor.a, float(color.a) / 255.0));"),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),s.push("gl_Position = clipPos;"),s.push("}"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState;let s,i;const r=t.sectionPlanes.length>0,o=[];if(o.push("#version 300 es"),o.push("// Triangles batching silhouette fragment shader"),o.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),o.push("precision highp float;"),o.push("precision highp int;"),o.push("#else"),o.push("precision mediump float;"),o.push("precision mediump int;"),o.push("#endif"),e.logarithmicDepthBufferEnabled&&(o.push("in float isPerspective;"),o.push("uniform float logDepthBufFC;"),o.push("in float vFragDepth;")),r)for(o.push("in vec4 vWorldPosition;"),o.push("in float vFlags;"),s=0,i=t.sectionPlanes.length;s<i;s++)o.push("uniform bool sectionPlaneActive"+s+";"),o.push("uniform vec3 sectionPlanePos"+s+";"),o.push("uniform vec3 sectionPlaneDir"+s+";");if(o.push("in vec4 vColor;"),o.push("out vec4 outColor;"),o.push("void main(void) {"),r){for(o.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),o.push("  if (clippable) {"),o.push("  float dist = 0.0;"),s=0,i=t.sectionPlanes.length;s<i;s++)o.push("if (sectionPlaneActive"+s+") {"),o.push("   dist += clamp(dot(-sectionPlaneDir"+s+".xyz, vWorldPosition.xyz - sectionPlanePos"+s+".xyz), 0.0, 1000.0);"),o.push("}");o.push("  if (dist > 0.0) { discard; }"),o.push("}")}return e.logarithmicDepthBufferEnabled&&o.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),o.push("outColor = vColor;"),o.push("}"),o}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Dn=p.vec3(),bn=new Float32Array([0,0,0,1]);class Rn{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=t._state.origin;if(!this._program&&(this._allocate(t),this.errors))return;if(e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),n.uniform1i(this._uRenderPass,s),s===dn){const e=r.xrayMaterial._state,t=e.edgeColor,s=e.edgeAlpha;n.uniform4f(this._uColor,t[0],t[1],t[2],s)}else if(s===An){const e=r.highlightMaterial._state,t=e.edgeColor,s=e.edgeAlpha;n.uniform4f(this._uColor,t[0],t[1],t[2],s)}else if(s===pn){const e=r.selectedMaterial._state,t=e.edgeColor,s=e.edgeAlpha;n.uniform4f(this._uColor,t[0],t[1],t[2],s)}else n.uniform4fv(this._uColor,bn);n.uniformMatrix4fv(this._uViewMatrix,!1,l?j(o.viewMatrix,l):o.viewMatrix),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix);const h=r._sectionPlanesState.sectionPlanes.length;if(h>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*h,o=i.renderFlags;for(let t=0;t<h;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(l){const e=W(s.dist,s.dir,l,Dn);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,t._state.positionsDecodeMatrix),this._aPosition.bindArrayBuffer(a.positionsBuf),this._aOffset&&this._aOffset.bindArrayBuffer(a.offsetsBuf),this._aFlags&&this._aFlags.bindArrayBuffer(a.flagsBuf),a.edgeIndicesBuf.bind(),n.drawElements(n.LINES,a.edgeIndicesBuf.numItems,a.edgeIndicesBuf.itemType,0)}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uColor=s.getLocation("color"),this._uPositionsDecodeMatrix=s.getLocation("positionsDecodeMatrix"),this._uViewMatrix=s.getLocation("viewMatrix"),this._uWorldMatrix=s.getLocation("worldMatrix"),this._uProjMatrix=s.getLocation("projMatrix"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});this._aPosition=s.getAttribute("position"),this._aOffset=s.getAttribute("offset"),this._aFlags=s.getAttribute("flags"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC"))}_bindProgram(){const e=this._scene,t=e.canvas.gl,s=this._program,i=e.camera.project;if(s.bind(),t.uniformMatrix4fv(this._uProjMatrix,!1,i.matrix),e.logarithmicDepthBufferEnabled){const e=2/(Math.log(i.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Batched geometry edges drawing vertex shader"),s.push("uniform int renderPass;"),s.push("uniform vec4 color;"),s.push("in vec3 position;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("in float flags;"),s.push("uniform mat4 worldMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("out float isPerspective;")),t&&(s.push("out vec4 vWorldPosition;"),s.push("out float vFlags;")),s.push("out vec4 vColor;"),s.push("void main(void) {"),s.push("int edgeFlag = int(flags) >> 8 & 0xF;"),s.push("if (edgeFlag != renderPass) {"),s.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("} else {"),s.push("      vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("      vec4 viewPosition  = viewMatrix * worldPosition; "),t&&(s.push("  vWorldPosition = worldPosition;"),s.push("  vFlags = flags;")),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),s.push("gl_Position = clipPos;"),s.push("vColor = vec4(color.r, color.g, color.b, color.a);"),s.push("}"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Batched geometry edges drawing fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("in float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("in vec4 vColor;"),i.push("out vec4 outColor;"),i.push("void main(void) {"),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("  float dist = 0.0;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("if (sectionPlaneActive"+e+") {"),i.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("}");i.push("  if (dist > 0.0) { discard; }"),i.push("}")}return e.logarithmicDepthBufferEnabled&&i.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("outColor = vColor;"),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Cn=p.vec3();class xn{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=t._state.origin;if(!this._program&&(this._allocate(t),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),n.uniform1i(this._uRenderPass,s),n.uniformMatrix4fv(this._uViewMatrix,!1,l?j(o.viewMatrix,l):o.viewMatrix),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix);const h=r._sectionPlanesState.sectionPlanes.length;if(h>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*h,o=i.renderFlags;for(let t=0;t<h;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(l){const e=W(s.dist,s.dir,l,Cn);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,t._state.positionsDecodeMatrix),this._aPosition.bindArrayBuffer(a.positionsBuf),this._aColor.bindArrayBuffer(a.colorsBuf),this._aOffset&&this._aOffset.bindArrayBuffer(a.offsetsBuf),this._aFlags&&this._aFlags.bindArrayBuffer(a.flagsBuf),a.edgeIndicesBuf.bind(),n.drawElements(n.LINES,a.edgeIndicesBuf.numItems,a.edgeIndicesBuf.itemType,0)}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uPositionsDecodeMatrix=s.getLocation("positionsDecodeMatrix"),this._uViewMatrix=s.getLocation("viewMatrix"),this._uWorldMatrix=s.getLocation("worldMatrix"),this._uProjMatrix=s.getLocation("projMatrix"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});this._aPosition=s.getAttribute("position"),this._aColor=s.getAttribute("color"),this._aOffset=s.getAttribute("offset"),this._aFlags=s.getAttribute("flags"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC"))}_bindProgram(){const e=this._scene,t=e.canvas.gl,s=this._program,i=e.camera.project;if(s.bind(),t.uniformMatrix4fv(this._uProjMatrix,!1,i.matrix),e.logarithmicDepthBufferEnabled){const e=2/(Math.log(i.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Batched geometry edges drawing vertex shader"),s.push("uniform int renderPass;"),s.push("in vec3 position;"),s.push("in vec4 color;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("in float flags;"),s.push("uniform mat4 worldMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("out float isPerspective;")),t&&(s.push("out vec4 vWorldPosition;"),s.push("out float vFlags;")),s.push("out vec4 vColor;"),s.push("void main(void) {"),s.push("int edgeFlag = int(flags) >> 8 & 0xF;"),s.push("if (edgeFlag != renderPass) {"),s.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("} else {"),s.push("      vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("      vec4 viewPosition  = viewMatrix * worldPosition; "),t&&(s.push("  vWorldPosition = worldPosition;"),s.push("  vFlags = flags;")),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),s.push("gl_Position = clipPos;"),s.push("vColor = vec4(float(color.r*0.5) / 255.0, float(color.g*0.5) / 255.0, float(color.b*0.5) / 255.0, float(color.a) / 255.0);"),s.push("}"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Batched geometry edges drawing fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("in float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("in vec4 vColor;"),i.push("out vec4 outColor;"),i.push("void main(void) {"),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("  float dist = 0.0;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("if (sectionPlaneActive"+e+") {"),i.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("}");i.push("  if (dist > 0.0) { discard; }"),i.push("}")}return e.logarithmicDepthBufferEnabled&&i.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("outColor = vColor;"),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Nn=p.vec3();class On{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=t._state.origin;this._program||this._allocate(t),e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram(e)),n.uniform1i(this._uRenderPass,s),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix);const h=e.pickViewMatrix||o.viewMatrix,c=l?j(h,l):h;if(n.uniformMatrix4fv(this._uProjMatrix,!1,e.pickProjMatrix),n.uniformMatrix4fv(this._uViewMatrix,!1,c),r.logarithmicDepthBufferEnabled){const e=2/(Math.log(o.project.far+1)/Math.LN2);n.uniform1f(this._uLogDepthBufFC,e)}const u=r._sectionPlanesState.sectionPlanes.length;if(u>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*u,o=i.renderFlags;for(let t=0;t<u;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(l){const e=W(s.dist,s.dir,l,Nn);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,t._state.positionsDecodeMatrix),this._aPosition.bindArrayBuffer(a.positionsBuf),this._aOffset&&this._aOffset.bindArrayBuffer(a.offsetsBuf),this._aFlags&&this._aFlags.bindArrayBuffer(a.flagsBuf),this._aPickColor&&this._aPickColor.bindArrayBuffer(a.pickColorsBuf),a.indicesBuf.bind(),n.drawElements(n.TRIANGLES,a.indicesBuf.numItems,a.indicesBuf.itemType,0)}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uPickInvisible=s.getLocation("pickInvisible"),this._uPositionsDecodeMatrix=s.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=s.getLocation("worldMatrix"),this._uViewMatrix=s.getLocation("viewMatrix"),this._uProjMatrix=s.getLocation("projMatrix"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});this._aPosition=s.getAttribute("position"),this._aOffset=s.getAttribute("offset"),this._aPickColor=s.getAttribute("pickColor"),this._aFlags=s.getAttribute("flags"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC"))}_bindProgram(e){const t=this._scene.canvas.gl;this._program.bind(),t.uniform1i(this._uPickInvisible,e.pickInvisible)}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Batched geometry picking vertex shader"),s.push("uniform int renderPass;"),s.push("in vec3 position;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("in float flags;"),s.push("in vec4 pickColor;"),s.push("uniform bool pickInvisible;"),s.push("uniform mat4 worldMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("out float isPerspective;")),t&&(s.push("out vec4 vWorldPosition;"),s.push("out float vFlags;")),s.push("out vec4 vPickColor;"),s.push("void main(void) {"),s.push("int pickFlag = int(flags) >> 12 & 0xF;"),s.push("if (pickFlag != renderPass) {"),s.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("  } else {"),s.push("      vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("      vec4 viewPosition  = viewMatrix * worldPosition; "),s.push("      vPickColor = vec4(float(pickColor.r) / 255.0, float(pickColor.g) / 255.0, float(pickColor.b) / 255.0, float(pickColor.a) / 255.0);"),t&&(s.push("      vWorldPosition = worldPosition;"),s.push("      vFlags = flags;")),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),s.push("gl_Position = clipPos;"),s.push("  }"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Batched geometry picking fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("in float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(var r=0;r<t.sectionPlanes.length;r++)i.push("uniform bool sectionPlaneActive"+r+";"),i.push("uniform vec3 sectionPlanePos"+r+";"),i.push("uniform vec3 sectionPlaneDir"+r+";")}if(i.push("in vec4 vPickColor;"),i.push("out vec4 outColor;"),i.push("void main(void) {"),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("      float dist = 0.0;");for(let e=0;e<t.sectionPlanes.length;e++)i.push("      if (sectionPlaneActive"+e+") {"),i.push("          dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("      }");i.push("      if (dist > 0.0) { discard; }"),i.push("  }")}return e.logarithmicDepthBufferEnabled&&i.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("   outColor = vPickColor; "),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Sn=p.vec3();class wn{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=t._state.origin;this._program||this._allocate(),e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),n.uniform1i(this._uRenderPass,s),n.uniform1i(this._uPickInvisible,e.pickInvisible);const h=e.pickViewMatrix||o.viewMatrix,c=l?j(h,l):h;if(n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix),n.uniformMatrix4fv(this._uViewMatrix,!1,c),n.uniformMatrix4fv(this._uProjMatrix,!1,e.pickProjMatrix),n.uniform1f(this._uPickZNear,e.pickZNear),n.uniform1f(this._uPickZFar,e.pickZFar),r.logarithmicDepthBufferEnabled){const t=2/(Math.log(e.pickZFar+1)/Math.LN2);n.uniform1f(this._uLogDepthBufFC,t)}const u=r._sectionPlanesState.sectionPlanes.length;if(u>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*u,o=i.renderFlags;for(let t=0;t<u;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(l){const e=W(s.dist,s.dir,l,Sn);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,t._state.positionsDecodeMatrix),this._aPosition.bindArrayBuffer(a.positionsBuf),this._aOffset&&this._aOffset.bindArrayBuffer(a.offsetsBuf),this._aFlags&&this._aFlags.bindArrayBuffer(a.flagsBuf),a.indicesBuf.bind();const A=e.pickElementsCount||a.indicesBuf.numItems,p=e.pickElementsOffset?e.pickElementsOffset*a.indicesBuf.itemByteSize:0;n.drawElements(n.TRIANGLES,A,a.indicesBuf.itemType,p)}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uPickInvisible=s.getLocation("pickInvisible"),this._uPositionsDecodeMatrix=s.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=s.getLocation("worldMatrix"),this._uViewMatrix=s.getLocation("viewMatrix"),this._uProjMatrix=s.getLocation("projMatrix"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});this._aPosition=s.getAttribute("position"),this._aOffset=s.getAttribute("offset"),this._aFlags=s.getAttribute("flags"),this._uPickZNear=s.getLocation("pickZNear"),this._uPickZFar=s.getLocation("pickZFar"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC"))}_bindProgram(){this._program.bind()}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Triangles batching pick depth vertex shader"),s.push("uniform int renderPass;"),s.push("in vec3 position;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("in float flags;"),s.push("uniform bool pickInvisible;"),s.push("uniform mat4 worldMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("out float isPerspective;")),t&&(s.push("out vec4 vWorldPosition;"),s.push("out float vFlags;")),s.push("out vec4 vViewPosition;"),s.push("void main(void) {"),s.push("int pickFlag = int(flags) >> 12 & 0xF;"),s.push("if (pickFlag != renderPass) {"),s.push("      gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("  } else {"),s.push("      vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("      vec4 viewPosition  = viewMatrix * worldPosition; "),t&&(s.push("      vWorldPosition = worldPosition;"),s.push("      vFlags = flags;")),s.push("vViewPosition = viewPosition;"),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),s.push("gl_Position = clipPos;"),s.push("  }"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Triangles batching pick depth fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("in float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),i.push("uniform float pickZNear;"),i.push("uniform float pickZFar;"),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(var r=0;r<t.sectionPlanes.length;r++)i.push("uniform bool sectionPlaneActive"+r+";"),i.push("uniform vec3 sectionPlanePos"+r+";"),i.push("uniform vec3 sectionPlaneDir"+r+";")}if(i.push("in vec4 vViewPosition;"),i.push("vec4 packDepth(const in float depth) {"),i.push("  const vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);"),i.push("  const vec4 bitMask  = vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);"),i.push("  vec4 res = fract(depth * bitShift);"),i.push("  res -= res.xxyz * bitMask;"),i.push("  return res;"),i.push("}"),i.push("out vec4 outColor;"),i.push("void main(void) {"),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("      float dist = 0.0;");for(let e=0;e<t.sectionPlanes.length;e++)i.push("      if (sectionPlaneActive"+e+") {"),i.push("          dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("      }");i.push("      if (dist > 0.0) { discard; }"),i.push("  }")}return e.logarithmicDepthBufferEnabled&&i.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("    float zNormalizedDepth = abs((pickZNear + vViewPosition.z) / (pickZFar - pickZNear));"),i.push("    outColor = packDepth(zNormalizedDepth); "),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Mn=p.vec3();class Bn{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=t._state.origin;this._program||this._allocate(t),e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),n.uniform1i(this._uRenderPass,s),n.uniform1i(this._uPickInvisible,e.pickInvisible),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix);const h=e.pickViewMatrix||o.viewMatrix,c=l?j(h,l):h;if(n.uniformMatrix4fv(this._uViewMatrix,!1,c),n.uniformMatrix4fv(this._uProjMatrix,!1,e.pickProjMatrix),r.logarithmicDepthBufferEnabled){const e=2/(Math.log(o.project.far+1)/Math.LN2);n.uniform1f(this._uLogDepthBufFC,e)}const u=r._sectionPlanesState.sectionPlanes.length;if(u>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*u,o=i.renderFlags;for(let t=0;t<u;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(l){const e=W(s.dist,s.dir,l,Mn);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,t._state.positionsDecodeMatrix),this._aPosition.bindArrayBuffer(a.positionsBuf),this._aOffset&&this._aOffset.bindArrayBuffer(a.offsetsBuf),this._aNormal&&this._aNormal.bindArrayBuffer(a.normalsBuf),this._aFlags&&this._aFlags.bindArrayBuffer(a.flagsBuf),a.indicesBuf.bind();const A=e.pickElementsCount||a.indicesBuf.numItems,p=e.pickElementsOffset?e.pickElementsOffset*a.indicesBuf.itemByteSize:0;n.drawElements(n.TRIANGLES,A,a.indicesBuf.itemType,p)}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uPickInvisible=s.getLocation("pickInvisible"),this._uPositionsDecodeMatrix=s.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=s.getLocation("worldMatrix"),this._uViewMatrix=s.getLocation("viewMatrix"),this._uProjMatrix=s.getLocation("projMatrix"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});this._aPosition=s.getAttribute("position"),this._aOffset=s.getAttribute("offset"),this._aNormal=s.getAttribute("normal"),this._aFlags=s.getAttribute("flags"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC"))}_bindProgram(){this._program.bind()}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Triangles batching pick normals vertex shader"),s.push("uniform int renderPass;"),s.push("in vec3 position;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("in vec3 normal;"),s.push("in float flags;"),s.push("uniform bool pickInvisible;"),s.push("uniform mat4 worldMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("out float isPerspective;")),s.push("vec3 octDecode(vec2 oct) {"),s.push("    vec3 v = vec3(oct.xy, 1.0 - abs(oct.x) - abs(oct.y));"),s.push("    if (v.z < 0.0) {"),s.push("        v.xy = (1.0 - abs(v.yx)) * vec2(v.x >= 0.0 ? 1.0 : -1.0, v.y >= 0.0 ? 1.0 : -1.0);"),s.push("    }"),s.push("    return normalize(v);"),s.push("}"),t&&(s.push("out vec4 vWorldPosition;"),s.push("out float vFlags;")),s.push("out vec3 vWorldNormal;"),s.push("out vec4 outColor;"),s.push("void main(void) {"),s.push("int pickFlag = int(flags) >> 12 & 0xF;"),s.push("if (pickFlag != renderPass) {"),s.push("      gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("  } else {"),s.push("      vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("      vec4 viewPosition  = viewMatrix * worldPosition; "),s.push("      vec3 worldNormal =  octDecode(normal.xy); "),s.push("      vWorldNormal = worldNormal;"),t&&(s.push("      vWorldPosition = worldPosition;"),s.push("      vFlags = flags;")),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),s.push("gl_Position = clipPos;"),s.push("  }"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Triangles batching pick normals fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("in float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(var r=0;r<t.sectionPlanes.length;r++)i.push("uniform bool sectionPlaneActive"+r+";"),i.push("uniform vec3 sectionPlanePos"+r+";"),i.push("uniform vec3 sectionPlaneDir"+r+";")}if(i.push("in vec3 vWorldNormal;"),i.push("out vec4 outColor;"),i.push("void main(void) {"),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("      float dist = 0.0;");for(let e=0;e<t.sectionPlanes.length;e++)i.push("      if (sectionPlaneActive"+e+") {"),i.push("          dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("      }");i.push("      if (dist > 0.0) { discard; }"),i.push("  }")}return e.logarithmicDepthBufferEnabled&&i.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("    outColor = vec4((vWorldNormal * 0.5) + 0.5, 1.0);"),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Fn=p.vec3();class Ln{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.canvas.gl,n=t._state,a=r.camera,l=t._state.origin;if(!this._program&&(this._allocate(t),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),o.uniform1i(this._uRenderPass,s),o.uniformMatrix4fv(this._uViewMatrix,!1,l?j(a.viewMatrix,l):a.viewMatrix),o.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix);const h=r._sectionPlanesState.sectionPlanes.length;if(h>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*h,n=i.renderFlags;for(let t=0;t<h;t++){const i=this._uSectionPlanes[t];if(i){const r=n.sectionPlanesActivePerLayer[s+t];if(o.uniform1i(i.active,r?1:0),r){const s=e[t];if(l){const e=W(s.dist,s.dir,l,Fn);o.uniform3fv(i.pos,e)}else o.uniform3fv(i.pos,s.pos);o.uniform3fv(i.dir,s.dir)}}}}o.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,t._state.positionsDecodeMatrix),this._aPosition.bindArrayBuffer(n.positionsBuf),this._aOffset&&this._aOffset.bindArrayBuffer(n.offsetsBuf),this._aColor&&this._aColor.bindArrayBuffer(n.colorsBuf),this._aFlags.bindArrayBuffer(n.flagsBuf),n.indicesBuf.bind(),o.drawElements(o.TRIANGLES,n.indicesBuf.numItems,n.indicesBuf.itemType,0)}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uPositionsDecodeMatrix=s.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=s.getLocation("worldMatrix"),this._uViewMatrix=s.getLocation("viewMatrix"),this._uProjMatrix=s.getLocation("projMatrix"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});this._aPosition=s.getAttribute("position"),this._aOffset=s.getAttribute("offset"),this._aColor=s.getAttribute("color"),this._aFlags=s.getAttribute("flags"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC"))}_bindProgram(){const e=this._scene,t=e.canvas.gl,s=e.camera.project;if(this._program.bind(),t.uniformMatrix4fv(this._uProjMatrix,!1,s.matrix),e.logarithmicDepthBufferEnabled){const e=2/(Math.log(s.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Triangles batching occlusion vertex shader"),s.push("uniform int renderPass;"),s.push("in vec3 position;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("in vec4 color;"),s.push("in float flags;"),s.push("uniform mat4 worldMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("out float isPerspective;")),t&&(s.push("out vec4 vWorldPosition;"),s.push("out float vFlags;")),s.push("void main(void) {"),s.push("int colorFlag = int(flags) & 0xF;"),s.push("if (colorFlag != renderPass) {"),s.push("      gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("  } else {"),s.push("      vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("      vec4 viewPosition  = viewMatrix * worldPosition; "),t&&(s.push("      vWorldPosition = worldPosition;"),s.push("      vFlags = flags;")),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),s.push("gl_Position = clipPos;"),s.push("  }"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Triangles batching occlusion fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("in float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(let e=0;e<t.sectionPlanes.length;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("out vec4 outColor;"),i.push("void main(void) {"),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("      float dist = 0.0;");for(let e=0;e<t.sectionPlanes.length;e++)i.push("      if (sectionPlaneActive"+e+") {"),i.push("          dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("      }");i.push("      if (dist > 0.0) { discard; }"),i.push("  }")}return e.logarithmicDepthBufferEnabled&&i.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("   outColor = vec4(0.0, 0.0, 1.0, 1.0); "),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Un=p.vec3();class Hn{constructor(e){this._scene=e,this._allocate(),this._hash=this._getHash()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=t._state.origin;if(!this._program&&(this._allocate(),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),n.uniform1i(this._uRenderPass,s),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix),n.uniformMatrix4fv(this._uViewMatrix,!1,l?j(o.viewMatrix,l):o.viewMatrix);const h=r._sectionPlanesState.sectionPlanes.length;if(h>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*h,o=i.renderFlags;for(let t=0;t<h;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(l){const e=W(s.dist,s.dir,l,Un);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,t._state.positionsDecodeMatrix),this._aPosition.bindArrayBuffer(a.positionsBuf),this._aOffset&&this._aOffset.bindArrayBuffer(a.offsetsBuf),this._aFlags.bindArrayBuffer(a.flagsBuf),a.indicesBuf.bind(),n.drawElements(n.TRIANGLES,a.indicesBuf.numItems,a.indicesBuf.itemType,0)}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uPositionsDecodeMatrix=s.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=s.getLocation("worldMatrix"),this._uViewMatrix=s.getLocation("viewMatrix"),this._uProjMatrix=s.getLocation("projMatrix"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});this._aPosition=s.getAttribute("position"),this._aOffset=s.getAttribute("offset"),this._aFlags=s.getAttribute("flags"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC"))}_bindProgram(){const e=this._scene,t=e.canvas.gl,s=e.camera.project;if(this._program.bind(),t.uniformMatrix4fv(this._uProjMatrix,!1,s.matrix),e.logarithmicDepthBufferEnabled){const e=2/(Math.log(s.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Triangles batching depth vertex shader"),s.push("uniform int renderPass;"),s.push("in vec3 position;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("in float flags;"),s.push("uniform mat4 worldMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("out float isPerspective;")),t&&(s.push("out vec4 vWorldPosition;"),s.push("out float vFlags;")),s.push("out vec2 vHighPrecisionZW;"),s.push("void main(void) {"),s.push("int colorFlag = int(flags) & 0xF;"),s.push("if (colorFlag != renderPass) {"),s.push("      gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("  } else {"),s.push("      vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("      vec4 viewPosition  = viewMatrix * worldPosition; "),t&&(s.push("      vWorldPosition = worldPosition;"),s.push("      vFlags = flags;")),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),s.push("gl_Position = clipPos;"),s.push("vHighPrecisionZW = gl_Position.zw;"),s.push("  }"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Triangles batching depth fragment shader"),i.push("precision highp float;"),i.push("precision highp int;"),e.logarithmicDepthBufferEnabled&&(i.push("in float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(let e=0;e<t.sectionPlanes.length;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("const float   packUpScale = 256. / 255.;"),i.push("const float   unpackDownscale = 255. / 256.;"),i.push("const vec3    packFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );"),i.push("const vec4    unpackFactors = unpackDownscale / vec4( packFactors, 1. );"),i.push("const float   shiftRight8 = 1.0 / 256.;"),i.push("vec4 packDepthToRGBA( const in float v ) {"),i.push("    vec4 r = vec4( fract( v * packFactors ), v );"),i.push("    r.yzw -= r.xyz * shiftRight8;"),i.push("    return r * packUpScale;"),i.push("}"),i.push("in vec2 vHighPrecisionZW;"),i.push("out vec4 outColor;"),i.push("void main(void) {"),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("      float dist = 0.0;");for(var r=0;r<t.sectionPlanes.length;r++)i.push("      if (sectionPlaneActive"+r+") {"),i.push("          dist += clamp(dot(-sectionPlaneDir"+r+".xyz, vWorldPosition.xyz - sectionPlanePos"+r+".xyz), 0.0, 1000.0);"),i.push("      }");i.push("      if (dist > 0.0) { discard; }"),i.push("  }")}return e.logarithmicDepthBufferEnabled&&i.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;"),i.push("    outColor = vec4(vec3(1.0 - fragCoordZ), 1.0); "),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null,d.memory.programs--}}const Gn=p.vec3();class Vn{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=t._state.origin;if(!this._program&&(this._allocate(t),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram(t)),n.uniform1i(this._uRenderPass,s),n.uniformMatrix4fv(this._uViewMatrix,!1,l?j(o.viewMatrix,l):o.viewMatrix),n.uniformMatrix4fv(this._uViewNormalMatrix,!1,o.viewNormalMatrix),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix),n.uniformMatrix4fv(this._uWorldNormalMatrix,!1,i.worldNormalMatrix);const h=r._sectionPlanesState.sectionPlanes.length;if(h>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*h,o=i.renderFlags;for(let t=0;t<h;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(l){const e=W(s.dist,s.dir,l,Gn);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,t._state.positionsDecodeMatrix),this._aPosition.bindArrayBuffer(a.positionsBuf),this._aOffset.bindArrayBuffer(a.offsetsBuf),this._aNormal.bindArrayBuffer(a.normalsBuf),this._aColor.bindArrayBuffer(a.colorsBuf),this._aFlags.bindArrayBuffer(a.flagsBuf),a.indicesBuf.bind(),n.drawElements(n.TRIANGLES,a.indicesBuf.numItems,a.indicesBuf.itemType,0)}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uPositionsDecodeMatrix=s.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=s.getLocation("worldMatrix"),this._uWorldNormalMatrix=s.getLocation("worldNormalMatrix"),this._uViewMatrix=s.getLocation("viewMatrix"),this._uViewNormalMatrix=s.getLocation("viewNormalMatrix"),this._uProjMatrix=s.getLocation("projMatrix"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});this._aPosition=s.getAttribute("position"),this._aOffset=s.getAttribute("offset"),this._aNormal=s.getAttribute("normal"),this._aColor=s.getAttribute("color"),this._aFlags=s.getAttribute("flags"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC"))}_bindProgram(){const e=this._scene,t=e.canvas.gl,s=e.camera.project;if(this._program.bind(),t.uniformMatrix4fv(this._uProjMatrix,!1,s.matrix),e.logarithmicDepthBufferEnabled){const e=2/(Math.log(s.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Batched geometry normals vertex shader"),s.push("uniform int renderPass;"),s.push("in vec3 position;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("in vec3 normal;"),s.push("in vec4 color;"),s.push("in float flags;"),s.push("uniform mat4 worldMatrix;"),s.push("uniform mat4 worldNormalMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),s.push("uniform mat4 viewNormalMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("out float isPerspective;")),s.push("vec3 octDecode(vec2 oct) {"),s.push("    vec3 v = vec3(oct.xy, 1.0 - abs(oct.x) - abs(oct.y));"),s.push("    if (v.z < 0.0) {"),s.push("        v.xy = (1.0 - abs(v.yx)) * vec2(v.x >= 0.0 ? 1.0 : -1.0, v.y >= 0.0 ? 1.0 : -1.0);"),s.push("    }"),s.push("    return normalize(v);"),s.push("}"),t&&(s.push("out vec4 vWorldPosition;"),s.push("out float vFlags;")),s.push("out vec3 vViewNormal;"),s.push("void main(void) {"),s.push("int colorFlag = int(flags) & 0xF;"),s.push("if (colorFlag != renderPass) {"),s.push("      gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("  } else {"),s.push("      vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("      vec4 viewPosition   = viewMatrix * worldPosition; "),s.push("      vec4 worldNormal    = worldNormalMatrix * vec4(octDecode(normal.xy), 0.0); "),s.push("      vec3 viewNormal     = normalize((viewNormalMatrix * worldNormal).xyz);"),t&&(s.push("      vWorldPosition  = worldPosition;"),s.push("      vFlags         = flags;")),s.push("      vViewNormal = viewNormal;"),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),s.push("gl_Position = clipPos;"),s.push("  }"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Batched geometry normals fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("in float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(let e=0;e<t.sectionPlanes.length;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("in vec3 vViewNormal;"),i.push("vec3 packNormalToRGB( const in vec3 normal ) {"),i.push("    return normalize( normal ) * 0.5 + 0.5;"),i.push("}"),i.push("out vec4 outColor;"),i.push("void main(void) {"),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("      float dist = 0.0;");for(var r=0;r<t.sectionPlanes.length;r++)i.push("      if (sectionPlaneActive"+r+") {"),i.push("          dist += clamp(dot(-sectionPlaneDir"+r+".xyz, vWorldPosition.xyz - sectionPlanePos"+r+".xyz), 0.0, 1000.0);"),i.push("      }");i.push("      if (dist > 0.0) { discard; }"),i.push("  }")}return e.logarithmicDepthBufferEnabled&&i.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("    outColor = vec4(packNormalToRGB(vViewNormal), 1.0); "),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const kn=p.vec3();class jn{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t){const s=this._scene,i=s.canvas.gl,r=t._state;this._program||this._allocate(),e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram(e)),i.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,t._state.positionsDecodeMatrix),s.logarithmicDepthBufferEnabled&&i.uniform1f(this._uZFar,s.camera.project.far),this._aPosition.bindArrayBuffer(r.positionsBuf),this._aColor&&this._aColor.bindArrayBuffer(r.colorsBuf),this._aFlags&&this._aFlags.bindArrayBuffer(r.flagsBuf),this._aOffset&&this._aOffset.bindArrayBuffer(r.offsetsBuf),r.indicesBuf.bind();const o=s._sectionPlanesState.sectionPlanes.length;if(o>0){const e=s._sectionPlanesState.sectionPlanes,r=t.layerIndex*o,n=t.model.renderFlags,a=t._state.origin;for(let t=0;t<o;t++){const s=this._uSectionPlanes[t];if(s){const o=n.sectionPlanesActivePerLayer[r+t];if(i.uniform1i(s.active,o?1:0),o){const r=e[t];if(a){const e=W(r.dist,r.dir,a,kn);i.uniform3fv(s.pos,e)}else i.uniform3fv(s.pos,r.pos);i.uniform3fv(s.dir,r.dir)}}}}i.drawElements(i.TRIANGLES,r.indicesBuf.numItems,r.indicesBuf.itemType,0)}_allocate(){const e=this._scene,t=e.canvas.gl,s=e._sectionPlanesState;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uPositionsDecodeMatrix=i.getLocation("positionsDecodeMatrix"),this._uShadowViewMatrix=i.getLocation("shadowViewMatrix"),this._uShadowProjMatrix=i.getLocation("shadowProjMatrix"),e.logarithmicDepthBufferEnabled&&(this._uZFar=i.getLocation("zFar")),this._uSectionPlanes=[];for(let e=0,t=s.sectionPlanes.length;e<t;e++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+e),pos:i.getLocation("sectionPlanePos"+e),dir:i.getLocation("sectionPlaneDir"+e)});this._aPosition=i.getAttribute("position"),this._aOffset=i.getAttribute("offset"),this._aColor=i.getAttribute("color"),this._aFlags=i.getAttribute("flags")}_bindProgram(e){const t=this._scene.canvas.gl;this._program.bind(),t.uniformMatrix4fv(this._uShadowViewMatrix,!1,e.shadowViewMatrix),t.uniformMatrix4fv(this._uShadowProjMatrix,!1,e.shadowProjMatrix),this._lastLightId=null}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Batched geometry shadow vertex shader"),s.push("in vec3 position;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("in vec4 color;"),s.push("in float flags;"),s.push("uniform mat4 shadowViewMatrix;"),s.push("uniform mat4 shadowProjMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),t&&(s.push("out vec4 vWorldPosition;"),s.push("out float vFlags;")),s.push("out vec4 vViewPosition;"),s.push("out vec4 outColor;"),s.push("void main(void) {"),s.push("  int colorFlag = int(flags) & 0xF;"),s.push("  bool visible        = (colorFlag > 0);"),s.push("  bool transparent    = ((float(color.a) / 255.0) < 1.0);"),s.push("  if (!visible || transparent) {"),s.push("      gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("  } else {"),s.push("      vec4 worldPosition = positionsDecodeMatrix * vec4(position, 1.0); "),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("      vec4 viewPosition  = shadowViewMatrix * worldPosition; "),t&&(s.push("      vWorldPosition = worldPosition;"),s.push("      vFlags = flags;")),s.push("      vViewPosition = viewPosition;"),s.push("      gl_Position = shadowProjMatrix * viewPosition;"),s.push("  }"),s.push("}"),s}_buildFragmentShader(){const e=this._scene._sectionPlanesState,t=e.sectionPlanes.length>0,s=[];if(s.push("#version 300 es"),s.push("// Batched geometry shadow fragment shader"),s.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),s.push("precision highp float;"),s.push("precision highp int;"),s.push("#else"),s.push("precision mediump float;"),s.push("precision mediump int;"),s.push("#endif"),t){s.push("in vec4 vWorldPosition;"),s.push("in float vFlags;");for(let t=0;t<e.sectionPlanes.length;t++)s.push("uniform bool sectionPlaneActive"+t+";"),s.push("uniform vec3 sectionPlanePos"+t+";"),s.push("uniform vec3 sectionPlaneDir"+t+";")}if(s.push("in vec4 vViewPosition;"),s.push("vec4 encodeFloat( const in float v ) {"),s.push("  const vec4 bitShift = vec4(256 * 256 * 256, 256 * 256, 256, 1.0);"),s.push("  const vec4 bitMask = vec4(0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0);"),s.push("  vec4 comp = fract(v * bitShift);"),s.push("  comp -= comp.xxyz * bitMask;"),s.push("  return comp;"),s.push("}"),s.push("out vec4 outColor;"),s.push("void main(void) {"),t){s.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),s.push("  if (clippable) {"),s.push("      float dist = 0.0;");for(var i=0;i<e.sectionPlanes.length;i++)s.push("      if (sectionPlaneActive"+i+") {"),s.push("          dist += clamp(dot(-sectionPlaneDir"+i+".xyz, vWorldPosition.xyz - sectionPlanePos"+i+".xyz), 0.0, 1000.0);"),s.push("      }");s.push("      if (dist > 0.0) { discard; }"),s.push("  }")}return s.push("    outColor = encodeFloat( gl_FragCoord.z); "),s.push("}"),s}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Qn=p.vec4(),Wn=p.vec3();class zn{constructor(e,t){this._scene=e,this._withSAO=t,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){const e=this._scene;return[e.gammaOutput,e._lightsState.getHash(),e._sectionPlanesState.getHash(),this._withSAO?"sao":"nosao"].join(";")}drawLayer(e,t,s){const i=oe.MAX_TEXTURE_IMAGE_UNITS,r=this._scene,o=r.camera,n=t.model,a=r.canvas.gl,l=t._state,h=t._state.origin,c=l.textureSet,u=r._lightsState;if(!this._program&&(this._allocate(),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram(e)),a.uniform1i(this._uRenderPass,s),a.uniformMatrix4fv(this._uViewMatrix,!1,h?j(o.viewMatrix,h):o.viewMatrix),a.uniformMatrix4fv(this._uViewNormalMatrix,!1,o.viewNormalMatrix),a.uniformMatrix4fv(this._uWorldMatrix,!1,n.worldMatrix),a.uniformMatrix4fv(this._uWorldNormalMatrix,!1,n.worldNormalMatrix);const A=r._sectionPlanesState.sectionPlanes.length;if(A>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*A,i=n.renderFlags;for(let t=0;t<A;t++){const r=this._uSectionPlanes[t];if(r){const o=i.sectionPlanesActivePerLayer[s+t];if(a.uniform1i(r.active,o?1:0),o){const s=e[t];if(h){const e=W(s.dist,s.dir,h,Wn);a.uniform3fv(r.pos,e)}else a.uniform3fv(r.pos,s.pos);a.uniform3fv(r.dir,s.dir)}}}}if(a.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,l.positionsDecodeMatrix),this._uUVDecodeMatrix&&a.uniformMatrix3fv(this._uUVDecodeMatrix,!1,l.uvDecodeMatrix),this._aPosition.bindArrayBuffer(l.positionsBuf),this._aNormal&&this._aNormal.bindArrayBuffer(l.normalsBuf),this._aUV&&this._aUV.bindArrayBuffer(l.uvBuf),this._aColor&&this._aColor.bindArrayBuffer(l.colorsBuf),this._aMetallicRoughness&&this._aMetallicRoughness.bindArrayBuffer(l.metallicRoughnessBuf),this._aFlags&&this._aFlags.bindArrayBuffer(l.flagsBuf),this._aOffset&&this._aOffset.bindArrayBuffer(l.offsetsBuf),u.reflectionMaps.length>0&&u.reflectionMaps[0].texture&&this._uReflectionMap&&(this._program.bindTexture(this._uReflectionMap,u.reflectionMaps[0].texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%i,e.bindTexture++),u.lightMaps.length>0&&u.lightMaps[0].texture&&this._uLightMap&&(this._program.bindTexture(this._uLightMap,u.lightMaps[0].texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%i,e.bindTexture++),this._withSAO){const t=r.sao;if(t.possible){const s=a.drawingBufferWidth,r=a.drawingBufferHeight;Qn[0]=s,Qn[1]=r,Qn[2]=t.blendCutoff,Qn[3]=t.blendFactor,a.uniform4fv(this._uSAOParams,Qn),this._program.bindTexture(this._uOcclusionTexture,e.occlusionTexture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%i,e.bindTexture++}}this._program.bindTexture(this._uBaseColorMap,c.colorTexture.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%i,this._program.bindTexture(this._uMetallicRoughMap,c.metallicRoughnessTexture.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%i,this._program.bindTexture(this._uEmissiveMap,c.emissiveTexture.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%i,this._program.bindTexture(this._uNormalMap,c.normalsTexture.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%i,this._program.bindTexture(this._uAOMap,c.occlusionTexture.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%i,l.indicesBuf.bind(),a.drawElements(a.TRIANGLES,l.indicesBuf.numItems,l.indicesBuf.itemType,0),e.drawElements++}_allocate(){const e=this._scene,t=e.canvas.gl,s=e._lightsState;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uRenderPass=i.getLocation("renderPass"),this._uPositionsDecodeMatrix=i.getLocation("positionsDecodeMatrix"),this._uUVDecodeMatrix=i.getLocation("uvDecodeMatrix"),this._uWorldMatrix=i.getLocation("worldMatrix"),this._uWorldNormalMatrix=i.getLocation("worldNormalMatrix"),this._uViewMatrix=i.getLocation("viewMatrix"),this._uViewNormalMatrix=i.getLocation("viewNormalMatrix"),this._uProjMatrix=i.getLocation("projMatrix"),this._uGammaFactor=i.getLocation("gammaFactor"),this._uLightAmbient=i.getLocation("lightAmbient"),this._uLightColor=[],this._uLightDir=[],this._uLightPos=[],this._uLightAttenuation=[];const r=s.lights;let o;for(let e=0,t=r.length;e<t;e++)switch(o=r[e],o.type){case"dir":this._uLightColor[e]=i.getLocation("lightColor"+e),this._uLightPos[e]=null,this._uLightDir[e]=i.getLocation("lightDir"+e);break;case"point":this._uLightColor[e]=i.getLocation("lightColor"+e),this._uLightPos[e]=i.getLocation("lightPos"+e),this._uLightDir[e]=null,this._uLightAttenuation[e]=i.getLocation("lightAttenuation"+e);break;case"spot":this._uLightColor[e]=i.getLocation("lightColor"+e),this._uLightPos[e]=i.getLocation("lightPos"+e),this._uLightDir[e]=i.getLocation("lightDir"+e),this._uLightAttenuation[e]=i.getLocation("lightAttenuation"+e)}s.reflectionMaps.length>0&&(this._uReflectionMap="reflectionMap"),s.lightMaps.length>0&&(this._uLightMap="lightMap"),this._uSectionPlanes=[];for(let t=0,s=e._sectionPlanesState.sectionPlanes.length;t<s;t++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+t),pos:i.getLocation("sectionPlanePos"+t),dir:i.getLocation("sectionPlaneDir"+t)});this._aPosition=i.getAttribute("position"),this._aOffset=i.getAttribute("offset"),this._aNormal=i.getAttribute("normal"),this._aUV=i.getAttribute("uv"),this._aColor=i.getAttribute("color"),this._aMetallicRoughness=i.getAttribute("metallicRoughness"),this._aFlags=i.getAttribute("flags"),this._uBaseColorMap="uBaseColorMap",this._uMetallicRoughMap="uMetallicRoughMap",this._uEmissiveMap="uEmissiveMap",this._uNormalMap="uNormalMap",this._uAOMap="uAOMap",this._withSAO&&(this._uOcclusionTexture="uOcclusionTexture",this._uSAOParams=i.getLocation("uSAOParams")),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=i.getLocation("logDepthBufFC"))}_bindProgram(){const e=this._scene,t=e.canvas.gl,s=this._program,i=e._lightsState.lights,r=e.camera.project;s.bind(),t.uniformMatrix4fv(this._uProjMatrix,!1,r.matrix),this._uLightAmbient&&t.uniform4fv(this._uLightAmbient,e._lightsState.getAmbientColorAndIntensity());for(let e=0,s=i.length;e<s;e++){const s=i[e];this._uLightColor[e]&&t.uniform4f(this._uLightColor[e],s.color[0],s.color[1],s.color[2],s.intensity),this._uLightPos[e]&&(t.uniform3fv(this._uLightPos[e],s.pos),this._uLightAttenuation[e]&&t.uniform1f(this._uLightAttenuation[e],s.attenuation)),this._uLightDir[e]&&t.uniform3fv(this._uLightDir[e],s.dir)}if(e.logarithmicDepthBufferEnabled){const e=2/(Math.log(r.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}this._uGammaFactor&&t.uniform1f(this._uGammaFactor,e.gammaFactor)}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState,s=e._lightsState,i=t.sectionPlanes.length>0,r=t.clippingCaps,o=[];return o.push("#version 300 es"),o.push("// Triangles batching quality draw vertex shader"),o.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),o.push("precision highp float;"),o.push("precision highp int;"),o.push("precision highp usampler2D;"),o.push("precision highp isampler2D;"),o.push("precision highp sampler2D;"),o.push("#else"),o.push("precision mediump float;"),o.push("precision mediump int;"),o.push("precision mediump usampler2D;"),o.push("precision mediump isampler2D;"),o.push("precision mediump sampler2D;"),o.push("#endif"),o.push("uniform int renderPass;"),o.push("in vec3 position;"),o.push("in vec3 normal;"),o.push("in vec4 color;"),o.push("in vec2 uv;"),o.push("in vec2 metallicRoughness;"),o.push("in float flags;"),e.entityOffsetsEnabled&&o.push("in vec3 offset;"),o.push("uniform mat4 worldMatrix;"),o.push("uniform mat4 worldNormalMatrix;"),o.push("uniform mat4 viewMatrix;"),o.push("uniform mat4 projMatrix;"),o.push("uniform mat4 viewNormalMatrix;"),o.push("uniform mat4 positionsDecodeMatrix;"),o.push("uniform mat3 uvDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(o.push("uniform float logDepthBufFC;"),o.push("out float vFragDepth;"),o.push("bool isPerspectiveMatrix(mat4 m) {"),o.push("    return (m[2][3] == - 1.0);"),o.push("}"),o.push("out float isPerspective;")),o.push("vec3 octDecode(vec2 oct) {"),o.push("    vec3 v = vec3(oct.xy, 1.0 - abs(oct.x) - abs(oct.y));"),o.push("    if (v.z < 0.0) {"),o.push("        v.xy = (1.0 - abs(v.yx)) * vec2(v.x >= 0.0 ? 1.0 : -1.0, v.y >= 0.0 ? 1.0 : -1.0);"),o.push("    }"),o.push("    return normalize(v);"),o.push("}"),o.push("out vec4 vViewPosition;"),o.push("out vec3 vViewNormal;"),o.push("out vec4 vColor;"),o.push("out vec2 vUV;"),o.push("out vec2 vMetallicRoughness;"),s.lightMaps.length>0&&o.push("out vec3 vWorldNormal;"),i&&(o.push("out vec4 vWorldPosition;"),o.push("out float vFlags;"),r&&o.push("out vec4 vClipPosition;")),o.push("void main(void) {"),o.push("int colorFlag = int(flags) & 0xF;"),o.push("if (colorFlag != renderPass) {"),o.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),o.push("} else {"),o.push("vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),e.entityOffsetsEnabled&&o.push("worldPosition.xyz = worldPosition.xyz + offset;"),o.push("vec4 viewPosition  = viewMatrix * worldPosition; "),o.push("vec4 worldNormal =  worldNormalMatrix * vec4(octDecode(normal.xy), 0.0); "),o.push("vec3 viewNormal = normalize((viewNormalMatrix * worldNormal).xyz);"),o.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(o.push("isPerspective = float (isPerspectiveMatrix(projMatrix));"),o.push("vFragDepth = 1.0 + clipPos.w;")),i&&(o.push("vWorldPosition = worldPosition;"),o.push("vFlags = flags;"),r&&o.push("vClipPosition = clipPos;")),o.push("vViewPosition = viewPosition;"),o.push("vViewNormal = viewNormal;"),o.push("vColor = color;"),o.push("vUV = (uvDecodeMatrix * vec3(uv, 1.0)).xy;"),o.push("vMetallicRoughness = metallicRoughness;"),s.lightMaps.length>0&&o.push("vWorldNormal = worldNormal.xyz;"),o.push("gl_Position = clipPos;"),o.push("}"),o.push("}"),o}_buildFragmentShader(){const e=this._scene,t=e.gammaOutput,s=e._sectionPlanesState,i=e._lightsState,r=s.sectionPlanes.length>0,o=s.clippingCaps,n=[];n.push("#version 300 es"),n.push("// Triangles batching quality draw fragment shader"),n.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),n.push("precision highp float;"),n.push("precision highp int;"),n.push("#else"),n.push("precision mediump float;"),n.push("precision mediump int;"),n.push("#endif"),e.logarithmicDepthBufferEnabled&&(n.push("in float isPerspective;"),n.push("uniform float logDepthBufFC;"),n.push("in float vFragDepth;")),n.push("uniform sampler2D uBaseColorMap;"),n.push("uniform sampler2D uMetallicRoughMap;"),n.push("uniform sampler2D uEmissiveMap;"),n.push("uniform sampler2D uNormalMap;"),n.push("uniform sampler2D uAOMap;"),n.push("in vec4 vViewPosition;"),n.push("in vec3 vViewNormal;"),n.push("in vec4 vColor;"),n.push("in vec2 vUV;"),n.push("in vec2 vMetallicRoughness;"),i.lightMaps.length>0&&n.push("in vec3 vWorldNormal;"),n.push("uniform mat4 viewMatrix;"),i.reflectionMaps.length>0&&n.push("uniform samplerCube reflectionMap;"),i.lightMaps.length>0&&n.push("uniform samplerCube lightMap;"),n.push("uniform vec4 lightAmbient;");for(let e=0,t=i.lights.length;e<t;e++){const t=i.lights[e];"ambient"!==t.type&&(n.push("uniform vec4 lightColor"+e+";"),"dir"===t.type&&n.push("uniform vec3 lightDir"+e+";"),"point"===t.type&&n.push("uniform vec3 lightPos"+e+";"),"spot"===t.type&&(n.push("uniform vec3 lightPos"+e+";"),n.push("uniform vec3 lightDir"+e+";")))}if(this._withSAO&&(n.push("uniform sampler2D uOcclusionTexture;"),n.push("uniform vec4      uSAOParams;"),n.push("const float       packUpscale = 256. / 255.;"),n.push("const float       unpackDownScale = 255. / 256.;"),n.push("const vec3        packFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );"),n.push("const vec4        unPackFactors = unpackDownScale / vec4( packFactors, 1. );"),n.push("float unpackRGBToFloat( const in vec4 v ) {"),n.push("    return dot( v, unPackFactors );"),n.push("}")),n.push("uniform float gammaFactor;"),n.push("vec4 linearToLinear( in vec4 value ) {"),n.push("  return value;"),n.push("}"),n.push("vec4 sRGBToLinear( in vec4 value ) {"),n.push("  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );"),n.push("}"),n.push("vec4 gammaToLinear( in vec4 value) {"),n.push("  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );"),n.push("}"),t&&(n.push("vec4 linearToGamma( in vec4 value, in float gammaFactor ) {"),n.push("  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );"),n.push("}")),r){n.push("in vec4 vWorldPosition;"),n.push("in float vFlags;"),o&&n.push("in vec4 vClipPosition;");for(let e=0,t=s.sectionPlanes.length;e<t;e++)n.push("uniform bool sectionPlaneActive"+e+";"),n.push("uniform vec3 sectionPlanePos"+e+";"),n.push("uniform vec3 sectionPlaneDir"+e+";")}if(n.push("#define PI 3.14159265359"),n.push("#define RECIPROCAL_PI 0.31830988618"),n.push("#define RECIPROCAL_PI2 0.15915494"),n.push("#define EPSILON 1e-6"),n.push("#define saturate(a) clamp( a, 0.0, 1.0 )"),n.push("vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {"),n.push("       vec3 texel = texture( uNormalMap, uv ).xyz;"),n.push("       if (texel.x == 0.0 && texel.y == 0.0 && texel.z == 0.0) {"),n.push("              return surf_norm;"),n.push("       }"),n.push("      vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );"),n.push("      vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );"),n.push("      vec2 st0 = dFdx( uv.st );"),n.push("      vec2 st1 = dFdy( uv.st );"),n.push("      vec3 S = normalize( q0 * st1.t - q1 * st0.t );"),n.push("      vec3 T = normalize( -q0 * st1.s + q1 * st0.s );"),n.push("      vec3 N = normalize( surf_norm );"),n.push("      vec3 mapN = texel.xyz * 2.0 - 1.0;"),n.push("      mat3 tsn = mat3( S, T, N );"),n.push("      return normalize( tsn * mapN );"),n.push("}"),n.push("vec3 inverseTransformDirection(in vec3 dir, in mat4 matrix) {"),n.push("   return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );"),n.push("}"),n.push("struct IncidentLight {"),n.push("   vec3 color;"),n.push("   vec3 direction;"),n.push("};"),n.push("struct ReflectedLight {"),n.push("   vec3 diffuse;"),n.push("   vec3 specular;"),n.push("};"),n.push("struct Geometry {"),n.push("   vec3 position;"),n.push("   vec3 viewNormal;"),n.push("   vec3 worldNormal;"),n.push("   vec3 viewEyeDir;"),n.push("};"),n.push("struct Material {"),n.push("   vec3  diffuseColor;"),n.push("   float specularRoughness;"),n.push("   vec3  specularColor;"),n.push("   float shine;"),n.push("};"),n.push("float GGXRoughnessToBlinnExponent(const in float ggxRoughness) {"),n.push("   float r = ggxRoughness + 0.0001;"),n.push("   return (2.0 / (r * r) - 2.0);"),n.push("}"),n.push("float getSpecularMIPLevel(const in float blinnShininessExponent, const in int maxMIPLevel) {"),n.push("   float maxMIPLevelScalar = float( maxMIPLevel );"),n.push("   float desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( ( blinnShininessExponent * blinnShininessExponent ) + 1.0 );"),n.push("   return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );"),n.push("}"),i.reflectionMaps.length>0&&(n.push("vec3 getLightProbeIndirectRadiance(const in vec3 reflectVec, const in float blinnShininessExponent, const in int maxMIPLevel) {"),n.push("   float mipLevel = 0.5 * getSpecularMIPLevel(blinnShininessExponent, maxMIPLevel);"),n.push("   vec3 envMapColor = sRGBToLinear(texture(reflectionMap, reflectVec, mipLevel)).rgb;"),n.push("  return envMapColor;"),n.push("}")),n.push("vec3 F_Schlick(const in vec3 specularColor, const in float dotLH) {"),n.push("   float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );"),n.push("   return ( 1.0 - specularColor ) * fresnel + specularColor;"),n.push("}"),n.push("float G_GGX_Smith(const in float alpha, const in float dotNL, const in float dotNV) {"),n.push("   float a2 = ( alpha * alpha );"),n.push("   float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * ( dotNL * dotNL ) );"),n.push("   float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * ( dotNV * dotNV ) );"),n.push("   return 1.0 / ( gl * gv );"),n.push("}"),n.push("float G_GGX_SmithCorrelated(const in float alpha, const in float dotNL, const in float dotNV) {"),n.push("   float a2 = ( alpha * alpha );"),n.push("   float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * ( dotNV * dotNV ) );"),n.push("   float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * ( dotNL * dotNL ) );"),n.push("   return 0.5 / max( gv + gl, EPSILON );"),n.push("}"),n.push("float D_GGX(const in float alpha, const in float dotNH) {"),n.push("   float a2 = ( alpha * alpha );"),n.push("   float denom = ( dotNH * dotNH) * ( a2 - 1.0 ) + 1.0;"),n.push("   return RECIPROCAL_PI * a2 / ( denom * denom);"),n.push("}"),n.push("vec3 BRDF_Specular_GGX(const in IncidentLight incidentLight, const in Geometry geometry, const in vec3 specularColor, const in float roughness) {"),n.push("   float alpha = ( roughness * roughness );"),n.push("   vec3 halfDir = normalize( incidentLight.direction + geometry.viewEyeDir );"),n.push("   float dotNL = saturate( dot( geometry.viewNormal, incidentLight.direction ) );"),n.push("   float dotNV = saturate( dot( geometry.viewNormal, geometry.viewEyeDir ) );"),n.push("   float dotNH = saturate( dot( geometry.viewNormal, halfDir ) );"),n.push("   float dotLH = saturate( dot( incidentLight.direction, halfDir ) );"),n.push("   vec3  F = F_Schlick( specularColor, dotLH );"),n.push("   float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );"),n.push("   float D = D_GGX( alpha, dotNH );"),n.push("   return F * (G * D);"),n.push("}"),n.push("vec3 BRDF_Specular_GGX_Environment(const in Geometry geometry, const in vec3 specularColor, const in float roughness) {"),n.push("   float dotNV = saturate(dot(geometry.viewNormal, geometry.viewEyeDir));"),n.push("   const vec4 c0 = vec4( -1, -0.0275, -0.572,  0.022);"),n.push("   const vec4 c1 = vec4(  1,  0.0425,   1.04, -0.04);"),n.push("   vec4 r = roughness * c0 + c1;"),n.push("   float a004 = min(r.x * r.x, exp2(-9.28 * dotNV)) * r.x + r.y;"),n.push("   vec2 AB    = vec2(-1.04, 1.04) * a004 + r.zw;"),n.push("   return specularColor * AB.x + AB.y;"),n.push("}"),(i.lightMaps.length>0||i.reflectionMaps.length>0)&&(n.push("void computePBRLightMapping(const in Geometry geometry, const in Material material, inout ReflectedLight reflectedLight) {"),i.lightMaps.length>0&&(n.push("   vec3 irradiance = sRGBToLinear(texture(lightMap, geometry.worldNormal)).rgb;"),n.push("   irradiance *= PI;"),n.push("   vec3 diffuseBRDFContrib = (RECIPROCAL_PI * material.diffuseColor);"),n.push("   reflectedLight.diffuse +=  irradiance * diffuseBRDFContrib;")),i.reflectionMaps.length>0&&(n.push("   vec3 reflectVec             = reflect(geometry.viewEyeDir, geometry.viewNormal);"),n.push("   reflectVec                  = inverseTransformDirection(reflectVec, viewMatrix);"),n.push("   float blinnExpFromRoughness = GGXRoughnessToBlinnExponent(material.specularRoughness);"),n.push("   vec3 radiance               = getLightProbeIndirectRadiance(reflectVec, blinnExpFromRoughness, 8);"),n.push("   vec3 specularBRDFContrib    = BRDF_Specular_GGX_Environment(geometry, material.specularColor, material.specularRoughness);"),n.push("   reflectedLight.specular     += radiance * specularBRDFContrib;")),n.push("}")),n.push("void computePBRLighting(const in IncidentLight incidentLight, const in Geometry geometry, const in Material material, inout ReflectedLight reflectedLight) {"),n.push("   float dotNL     = saturate(dot(geometry.viewNormal, incidentLight.direction));"),n.push("   vec3 irradiance = dotNL * incidentLight.color * PI;"),n.push("   reflectedLight.diffuse  += irradiance * (RECIPROCAL_PI * material.diffuseColor);"),n.push("   reflectedLight.specular += irradiance * BRDF_Specular_GGX(incidentLight, geometry, material.specularColor, material.specularRoughness);"),n.push("}"),n.push("out vec4 outColor;"),n.push("void main(void) {"),r){n.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),n.push("  if (clippable) {"),n.push("  float dist = 0.0;");for(let e=0,t=s.sectionPlanes.length;e<t;e++)n.push("if (sectionPlaneActive"+e+") {"),n.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),n.push("}");o?(n.push("  if (dist > (0.002 * vClipPosition.w)) {"),n.push("      discard;"),n.push("  }"),n.push("  if (dist > 0.0) { "),n.push("      outColor=vec4(1.0, 0.0, 0.0, 1.0);"),e.logarithmicDepthBufferEnabled&&n.push("  gl_FragDepth = log2( vFragDepth ) * logDepthBufFC * 0.5;"),n.push("  return;"),n.push("}")):(n.push("  if (dist > 0.0) { "),n.push("      discard;"),n.push("  }")),n.push("}")}n.push("IncidentLight  light;"),n.push("Material       material;"),n.push("Geometry       geometry;"),n.push("ReflectedLight reflectedLight = ReflectedLight(vec3(0.0,0.0,0.0), vec3(0.0,0.0,0.0));"),n.push("vec3 rgb = (vec3(float(vColor.r) / 255.0, float(vColor.g) / 255.0, float(vColor.b) / 255.0));"),n.push("float opacity = float(vColor.a) / 255.0;"),n.push("vec3  baseColor = rgb;"),n.push("float specularF0 = 1.0;"),n.push("float metallic = float(vMetallicRoughness.r) / 255.0;"),n.push("float roughness = float(vMetallicRoughness.g) / 255.0;"),n.push("float dielectricSpecular = 0.16 * specularF0 * specularF0;"),n.push("vec4 baseColorTexel = sRGBToLinear(texture(uBaseColorMap, vUV));"),n.push("baseColor *= baseColorTexel.rgb;"),n.push("vec3 metalRoughTexel = texture(uMetallicRoughMap, vUV).rgb;"),n.push("metallic *= metalRoughTexel.b;"),n.push("roughness *= metalRoughTexel.g;"),n.push("vec3 viewNormal = perturbNormal2Arb(vViewPosition.xyz, normalize(vViewNormal), vUV );"),n.push("material.diffuseColor      = baseColor * (1.0 - dielectricSpecular) * (1.0 - metallic);"),n.push("material.specularRoughness = clamp(roughness, 0.04, 1.0);"),n.push("material.specularColor     = mix(vec3(dielectricSpecular), baseColor, metallic);"),n.push("geometry.position      = vViewPosition.xyz;"),n.push("geometry.viewNormal    = -normalize(viewNormal);"),n.push("geometry.viewEyeDir    = normalize(vViewPosition.xyz);"),i.lightMaps.length>0&&n.push("geometry.worldNormal   = normalize(vWorldNormal);"),(i.lightMaps.length>0||i.reflectionMaps.length>0)&&n.push("computePBRLightMapping(geometry, material, reflectedLight);");for(let e=0,t=i.lights.length;e<t;e++){const t=i.lights[e];if("ambient"!==t.type){if("dir"===t.type)"view"===t.space?n.push("light.direction =  normalize(lightDir"+e+");"):n.push("light.direction =  normalize((viewMatrix * vec4(lightDir"+e+", 0.0)).xyz);");else if("point"===t.type)"view"===t.space?n.push("light.direction =  normalize(lightPos"+e+" - vViewPosition.xyz);"):n.push("light.direction =  normalize((viewMatrix * vec4(lightPos"+e+", 0.0)).xyz);");else{if("spot"!==t.type)continue;"view"===t.space?n.push("light.direction =  normalize(lightDir"+e+");"):n.push("light.direction =  normalize((viewMatrix * vec4(lightDir"+e+", 0.0)).xyz);")}n.push("light.color =  lightColor"+e+".rgb * lightColor"+e+".a;"),n.push("computePBRLighting(light, geometry, material, reflectedLight);")}}return n.push("vec3 emissiveColor = sRGBToLinear(texture(uEmissiveMap, vUV)).rgb;"),n.push("float aoFactor = texture(uAOMap, vUV).r;"),n.push("vec3 outgoingLight = (lightAmbient.rgb * lightAmbient.a * baseColor * opacity * rgb) + (reflectedLight.diffuse) + (reflectedLight.specular) + emissiveColor;"),n.push("vec4 fragColor;"),this._withSAO?(n.push("   float viewportWidth     = uSAOParams[0];"),n.push("   float viewportHeight    = uSAOParams[1];"),n.push("   float blendCutoff       = uSAOParams[2];"),n.push("   float blendFactor       = uSAOParams[3];"),n.push("   vec2 uv                 = vec2(gl_FragCoord.x / viewportWidth, gl_FragCoord.y / viewportHeight);"),n.push("   float ambient           = smoothstep(blendCutoff, 1.0, unpackRGBToFloat(texture(uOcclusionTexture, uv))) * blendFactor;"),n.push("   fragColor               = vec4(outgoingLight.rgb * ambient * aoFactor, opacity);")):n.push("   fragColor            = vec4(outgoingLight.rgb * aoFactor, opacity);"),t&&n.push("fragColor = linearToGamma(fragColor, gammaFactor);"),n.push("outColor = fragColor;"),e.logarithmicDepthBufferEnabled&&n.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),n.push("}"),n}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Kn=p.vec3();class Yn{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=t._state.origin;this._program||this._allocate(t),e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),n.uniform1i(this._uRenderPass,s),n.uniform1i(this._uPickInvisible,e.pickInvisible),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix);const h=e.pickViewMatrix||o.viewMatrix,c=l?j(h,l):h;if(n.uniformMatrix4fv(this._uViewMatrix,!1,c),n.uniformMatrix4fv(this._uProjMatrix,!1,e.pickProjMatrix),r.logarithmicDepthBufferEnabled){const e=2/(Math.log(o.project.far+1)/Math.LN2);n.uniform1f(this._uLogDepthBufFC,e)}const u=r._sectionPlanesState.sectionPlanes.length;if(u>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*u,o=i.renderFlags;for(let t=0;t<u;t++){const i=this._uSectionPlanes[t],r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(l){const e=W(s.dist,s.dir,l,Kn);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,t._state.positionsDecodeMatrix),this._aPosition.bindArrayBuffer(a.positionsBuf),this._aOffset&&this._aOffset.bindArrayBuffer(a.offsetsBuf),this._aFlags&&this._aFlags.bindArrayBuffer(a.flagsBuf),a.indicesBuf.bind();const A=e.pickElementsCount||a.indicesBuf.numItems,p=e.pickElementsOffset?e.pickElementsOffset*a.indicesBuf.itemByteSize:0;n.drawElements(n.TRIANGLES,A,a.indicesBuf.itemType,p)}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uPickInvisible=s.getLocation("pickInvisible"),this._uPositionsDecodeMatrix=s.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=s.getLocation("worldMatrix"),this._uViewMatrix=s.getLocation("viewMatrix"),this._uProjMatrix=s.getLocation("projMatrix"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});this._aPosition=s.getAttribute("position"),this._aOffset=s.getAttribute("offset"),this._aFlags=s.getAttribute("flags"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC"))}_bindProgram(){this._program.bind()}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Triangles batching pick flat normals vertex shader"),s.push("uniform int renderPass;"),s.push("in vec3 position;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("in float flags;"),s.push("uniform bool pickInvisible;"),s.push("uniform mat4 worldMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("out float isPerspective;")),s.push("out vec4 vWorldPosition;"),t&&s.push("out float vFlags;"),s.push("void main(void) {"),s.push("int pickFlag = int(flags) >> 12 & 0xF;"),s.push("if (pickFlag != renderPass) {"),s.push("      gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("  } else {"),s.push("      vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("      vec4 viewPosition  = viewMatrix * worldPosition; "),s.push("      vWorldPosition = worldPosition;"),t&&s.push("      vFlags = flags;"),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),s.push("gl_Position = clipPos;"),s.push("  }"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Triangles batching pick flat normals fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("in float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),i.push("in vec4 vWorldPosition;"),s){i.push("in float vFlags;");for(var r=0;r<t.sectionPlanes.length;r++)i.push("uniform bool sectionPlaneActive"+r+";"),i.push("uniform vec3 sectionPlanePos"+r+";"),i.push("uniform vec3 sectionPlaneDir"+r+";")}if(i.push("out vec4 outColor;"),i.push("void main(void) {"),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("      float dist = 0.0;");for(let e=0;e<t.sectionPlanes.length;e++)i.push("      if (sectionPlaneActive"+e+") {"),i.push("          dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("      }");i.push("      if (dist > 0.0) { discard; }"),i.push("  }")}return e.logarithmicDepthBufferEnabled&&i.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("  vec3 xTangent = dFdx( vWorldPosition.xyz );"),i.push("  vec3 yTangent = dFdy( vWorldPosition.xyz );"),i.push("  vec3 worldNormal = normalize( cross( xTangent, yTangent ) );"),i.push("  outColor = vec4((worldNormal * 0.5) + 0.5, 1.0);"),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Xn=p.vec4(),Zn=p.vec3();class qn{constructor(e,t){this._scene=e,this._withSAO=t,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){const e=this._scene;return[e.gammaOutput,e._lightsState.getHash(),e._sectionPlanesState.getHash(),this._withSAO?"sao":"nosao"].join(";")}drawLayer(e,t,s){const i=oe.MAX_TEXTURE_IMAGE_UNITS,r=this._scene,o=r.camera,n=t.model,a=r.canvas.gl,l=t._state,h=t._state.origin,c=l.textureSet;if(!this._program&&(this._allocate(),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram(e)),a.uniform1i(this._uRenderPass,s),a.uniformMatrix4fv(this._uViewMatrix,!1,h?j(o.viewMatrix,h):o.viewMatrix),a.uniformMatrix4fv(this._uWorldMatrix,!1,n.worldMatrix);const u=r._sectionPlanesState.sectionPlanes.length;if(u>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*u,i=n.renderFlags;for(let t=0;t<u;t++){const r=this._uSectionPlanes[t];if(r){const o=i.sectionPlanesActivePerLayer[s+t];if(a.uniform1i(r.active,o?1:0),o){const s=e[t];if(h){const e=W(s.dist,s.dir,h,Zn);a.uniform3fv(r.pos,e)}else a.uniform3fv(r.pos,s.pos);a.uniform3fv(r.dir,s.dir)}}}}if(a.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,l.positionsDecodeMatrix),this._uUVDecodeMatrix&&a.uniformMatrix3fv(this._uUVDecodeMatrix,!1,l.uvDecodeMatrix),this._aPosition.bindArrayBuffer(l.positionsBuf),this._aUV&&this._aUV.bindArrayBuffer(l.uvBuf),this._aColor&&this._aColor.bindArrayBuffer(l.colorsBuf),this._aFlags&&this._aFlags.bindArrayBuffer(l.flagsBuf),this._aOffset&&this._aOffset.bindArrayBuffer(l.offsetsBuf),c&&c.colorTexture&&(this._program.bindTexture(this._uColorMap,c.colorTexture.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%i),this._withSAO){const t=r.sao;if(t.possible){const s=a.drawingBufferWidth,r=a.drawingBufferHeight;Xn[0]=s,Xn[1]=r,Xn[2]=t.blendCutoff,Xn[3]=t.blendFactor,a.uniform4fv(this._uSAOParams,Xn),this._program.bindTexture(this._uOcclusionTexture,e.occlusionTexture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%i,e.bindTexture++}}l.indicesBuf.bind(),a.drawElements(a.TRIANGLES,l.indicesBuf.numItems,l.indicesBuf.itemType,0),e.drawElements++}_allocate(){const e=this._scene,t=e.canvas.gl,s=e._lightsState;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uRenderPass=i.getLocation("renderPass"),this._uPositionsDecodeMatrix=i.getLocation("positionsDecodeMatrix"),this._uUVDecodeMatrix=i.getLocation("uvDecodeMatrix"),this._uWorldMatrix=i.getLocation("worldMatrix"),this._uViewMatrix=i.getLocation("viewMatrix"),this._uProjMatrix=i.getLocation("projMatrix"),this._uGammaFactor=i.getLocation("gammaFactor"),this._uLightAmbient=i.getLocation("lightAmbient"),this._uLightColor=[],this._uLightDir=[],this._uLightPos=[],this._uLightAttenuation=[];const r=s.lights;let o;for(let e=0,t=r.length;e<t;e++)switch(o=r[e],o.type){case"dir":this._uLightColor[e]=i.getLocation("lightColor"+e),this._uLightPos[e]=null,this._uLightDir[e]=i.getLocation("lightDir"+e);break;case"point":this._uLightColor[e]=i.getLocation("lightColor"+e),this._uLightPos[e]=i.getLocation("lightPos"+e),this._uLightDir[e]=null,this._uLightAttenuation[e]=i.getLocation("lightAttenuation"+e);break;case"spot":this._uLightColor[e]=i.getLocation("lightColor"+e),this._uLightPos[e]=i.getLocation("lightPos"+e),this._uLightDir[e]=i.getLocation("lightDir"+e),this._uLightAttenuation[e]=i.getLocation("lightAttenuation"+e)}this._uSectionPlanes=[];for(let t=0,s=e._sectionPlanesState.sectionPlanes.length;t<s;t++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+t),pos:i.getLocation("sectionPlanePos"+t),dir:i.getLocation("sectionPlaneDir"+t)});this._aPosition=i.getAttribute("position"),this._aOffset=i.getAttribute("offset"),this._aUV=i.getAttribute("uv"),this._aColor=i.getAttribute("color"),this._aFlags=i.getAttribute("flags"),this._uColorMap="uColorMap",this._withSAO&&(this._uOcclusionTexture="uOcclusionTexture",this._uSAOParams=i.getLocation("uSAOParams")),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=i.getLocation("logDepthBufFC"))}_bindProgram(){const e=this._scene,t=e.canvas.gl,s=this._program,i=e._lightsState.lights,r=e.camera.project;s.bind(),t.uniformMatrix4fv(this._uProjMatrix,!1,r.matrix),this._uLightAmbient&&t.uniform4fv(this._uLightAmbient,e._lightsState.getAmbientColorAndIntensity());for(let e=0,s=i.length;e<s;e++){const s=i[e];this._uLightColor[e]&&t.uniform4f(this._uLightColor[e],s.color[0],s.color[1],s.color[2],s.intensity),this._uLightPos[e]&&(t.uniform3fv(this._uLightPos[e],s.pos),this._uLightAttenuation[e]&&t.uniform1f(this._uLightAttenuation[e],s.attenuation)),this._uLightDir[e]&&t.uniform3fv(this._uLightDir[e],s.dir)}if(e.logarithmicDepthBufferEnabled){const e=2/(Math.log(r.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}this._uGammaFactor&&t.uniform1f(this._uGammaFactor,e.gammaFactor)}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Triangles batching color texture vertex shader"),s.push("uniform int renderPass;"),s.push("in vec3 position;"),s.push("in vec4 color;"),s.push("in vec2 uv;"),s.push("in float flags;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("uniform mat4 worldMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),s.push("uniform mat3 uvDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("out float isPerspective;")),t&&(s.push("out vec4 vWorldPosition;"),s.push("out float vFlags;")),s.push("out vec4 vViewPosition;"),s.push("out vec4 vColor;"),s.push("out vec2 vUV;"),s.push("void main(void) {"),s.push("int colorFlag = int(flags) & 0xF;"),s.push("if (colorFlag != renderPass) {"),s.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("} else {"),s.push("vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),e.entityOffsetsEnabled&&s.push("worldPosition.xyz = worldPosition.xyz + offset;"),s.push("vec4 viewPosition  = viewMatrix * worldPosition; "),s.push("vViewPosition = viewPosition;"),s.push("vColor = vec4(float(color.r) / 255.0, float(color.g) / 255.0, float(color.b) / 255.0, float(color.a) / 255.0);"),s.push("vUV = (uvDecodeMatrix * vec3(uv, 1.0)).xy;"),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),t&&(s.push("vWorldPosition = worldPosition;"),s.push("vFlags = flags;")),s.push("gl_Position = clipPos;"),s.push("}"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e.gammaOutput,s=e._lightsState,i=e._sectionPlanesState,r=i.sectionPlanes.length>0,o=[];if(o.push("#version 300 es"),o.push("// Triangles batching color texture fragment shader"),o.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),o.push("precision highp float;"),o.push("precision highp int;"),o.push("#else"),o.push("precision mediump float;"),o.push("precision mediump int;"),o.push("#endif"),e.logarithmicDepthBufferEnabled&&(o.push("in float isPerspective;"),o.push("uniform float logDepthBufFC;"),o.push("in float vFragDepth;")),o.push("uniform sampler2D uColorMap;"),this._withSAO&&(o.push("uniform sampler2D uOcclusionTexture;"),o.push("uniform vec4      uSAOParams;"),o.push("const float       packUpscale = 256. / 255.;"),o.push("const float       unpackDownScale = 255. / 256.;"),o.push("const vec3        packFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );"),o.push("const vec4        unPackFactors = unpackDownScale / vec4( packFactors, 1. );"),o.push("float unpackRGBToFloat( const in vec4 v ) {"),o.push("    return dot( v, unPackFactors );"),o.push("}")),o.push("uniform float gammaFactor;"),o.push("vec4 linearToLinear( in vec4 value ) {"),o.push("  return value;"),o.push("}"),o.push("vec4 sRGBToLinear( in vec4 value ) {"),o.push("  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );"),o.push("}"),o.push("vec4 gammaToLinear( in vec4 value) {"),o.push("  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );"),o.push("}"),t&&(o.push("vec4 linearToGamma( in vec4 value, in float gammaFactor ) {"),o.push("  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );"),o.push("}")),r){o.push("in vec4 vWorldPosition;"),o.push("in float vFlags;");for(let e=0,t=i.sectionPlanes.length;e<t;e++)o.push("uniform bool sectionPlaneActive"+e+";"),o.push("uniform vec3 sectionPlanePos"+e+";"),o.push("uniform vec3 sectionPlaneDir"+e+";")}o.push("uniform mat4 viewMatrix;"),o.push("uniform vec4 lightAmbient;");for(let e=0,t=s.lights.length;e<t;e++){const t=s.lights[e];"ambient"!==t.type&&(o.push("uniform vec4 lightColor"+e+";"),"dir"===t.type&&o.push("uniform vec3 lightDir"+e+";"),"point"===t.type&&o.push("uniform vec3 lightPos"+e+";"),"spot"===t.type&&(o.push("uniform vec3 lightPos"+e+";"),o.push("uniform vec3 lightDir"+e+";")))}if(o.push("in vec4 vViewPosition;"),o.push("in vec4 vColor;"),o.push("in vec2 vUV;"),o.push("out vec4 outColor;"),o.push("void main(void) {"),r){o.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),o.push("  if (clippable) {"),o.push("  float dist = 0.0;");for(let e=0,t=i.sectionPlanes.length;e<t;e++)o.push("if (sectionPlaneActive"+e+") {"),o.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),o.push("}");o.push("  if (dist > 0.0) { "),o.push("      discard;"),o.push("  }"),o.push("}")}o.push("vec3 reflectedColor = vec3(0.0, 0.0, 0.0);"),o.push("vec3 viewLightDir = vec3(0.0, 0.0, -1.0);"),o.push("float lambertian = 1.0;"),o.push("vec3 xTangent = dFdx( vViewPosition.xyz );"),o.push("vec3 yTangent = dFdy( vViewPosition.xyz );"),o.push("vec3 viewNormal = normalize( cross( xTangent, yTangent ) );");for(let e=0,t=s.lights.length;e<t;e++){const t=s.lights[e];if("ambient"!==t.type){if("dir"===t.type)"view"===t.space?o.push("viewLightDir = normalize(lightDir"+e+");"):o.push("viewLightDir = normalize((viewMatrix * vec4(lightDir"+e+", 0.0)).xyz);");else if("point"===t.type)"view"===t.space?o.push("viewLightDir = -normalize(lightPos"+e+" - viewPosition.xyz);"):o.push("viewLightDir = -normalize((viewMatrix * vec4(lightPos"+e+", 0.0)).xyz);");else{if("spot"!==t.type)continue;"view"===t.space?o.push("viewLightDir = normalize(lightDir"+e+");"):o.push("viewLightDir = normalize((viewMatrix * vec4(lightDir"+e+", 0.0)).xyz);")}o.push("lambertian = max(dot(-viewNormal, viewLightDir), 0.0);"),o.push("reflectedColor += lambertian * (lightColor"+e+".rgb * lightColor"+e+".a);")}}return o.push("vec4 color =  vec4((lightAmbient.rgb * lightAmbient.a * vColor.rgb) + (reflectedColor * vColor.rgb), vColor.a);"),t?o.push("vec4 colorTexel = color * sRGBToLinear(texture(uColorMap, vUV));"):o.push("vec4 colorTexel = color * texture(uColorMap, vUV);"),o.push("float opacity = color.a;"),this._withSAO?(o.push("   float viewportWidth     = uSAOParams[0];"),o.push("   float viewportHeight    = uSAOParams[1];"),o.push("   float blendCutoff       = uSAOParams[2];"),o.push("   float blendFactor       = uSAOParams[3];"),o.push("   vec2 uv                 = vec2(gl_FragCoord.x / viewportWidth, gl_FragCoord.y / viewportHeight);"),o.push("   float ambient           = smoothstep(blendCutoff, 1.0, unpackRGBToFloat(texture(uOcclusionTexture, uv))) * blendFactor;"),o.push("   outColor                = vec4(colorTexel.rgb * ambient, opacity);")):o.push("   outColor                = vec4(colorTexel.rgb, opacity);"),t&&o.push("outColor = linearToGamma(outColor, gammaFactor);"),e.logarithmicDepthBufferEnabled&&o.push("gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),o.push("}"),o}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}class Jn{constructor(e){this._scene=e}_compile(){this._colorRenderer&&!this._colorRenderer.getValid()&&(this._colorRenderer.destroy(),this._colorRenderer=null),this._colorRendererWithSAO&&!this._colorRendererWithSAO.getValid()&&(this._colorRendererWithSAO.destroy(),this._colorRendererWithSAO=null),this._flatColorRenderer&&!this._flatColorRenderer.getValid()&&(this._flatColorRenderer.destroy(),this._flatColorRenderer=null),this._flatColorRendererWithSAO&&!this._flatColorRendererWithSAO.getValid()&&(this._flatColorRendererWithSAO.destroy(),this._flatColorRendererWithSAO=null),this._colorTextureRenderer&&!this._colorTextureRenderer.getValid()&&(this._colorTextureRenderer.destroy(),this._colorTextureRenderer=null),this._colorTextureRendererWithSAO&&!this._colorTextureRendererWithSAO.getValid()&&(this._colorTextureRendererWithSAO.destroy(),this._colorTextureRendererWithSAO=null),this._pbrRenderer&&!this._pbrRenderer.getValid()&&(this._pbrRenderer.destroy(),this._pbrRenderer=null),this._pbrRendererWithSAO&&!this._pbrRendererWithSAO.getValid()&&(this._pbrRendererWithSAO.destroy(),this._pbrRendererWithSAO=null),this._depthRenderer&&!this._depthRenderer.getValid()&&(this._depthRenderer.destroy(),this._depthRenderer=null),this._normalsRenderer&&!this._normalsRenderer.getValid()&&(this._normalsRenderer.destroy(),this._normalsRenderer=null),this._silhouetteRenderer&&!this._silhouetteRenderer.getValid()&&(this._silhouetteRenderer.destroy(),this._silhouetteRenderer=null),this._edgesRenderer&&!this._edgesRenderer.getValid()&&(this._edgesRenderer.destroy(),this._edgesRenderer=null),this._edgesColorRenderer&&!this._edgesColorRenderer.getValid()&&(this._edgesColorRenderer.destroy(),this._edgesColorRenderer=null),this._pickMeshRenderer&&!this._pickMeshRenderer.getValid()&&(this._pickMeshRenderer.destroy(),this._pickMeshRenderer=null),this._pickDepthRenderer&&!this._pickDepthRenderer.getValid()&&(this._pickDepthRenderer.destroy(),this._pickDepthRenderer=null),this._pickNormalsRenderer&&!1===this._pickNormalsRenderer.getValid()&&(this._pickNormalsRenderer.destroy(),this._pickNormalsRenderer=null),this._pickNormalsFlatRenderer&&!1===this._pickNormalsFlatRenderer.getValid()&&(this._pickNormalsFlatRenderer.destroy(),this._pickNormalsFlatRenderer=null),this._occlusionRenderer&&!1===this._occlusionRenderer.getValid()&&(this._occlusionRenderer.destroy(),this._occlusionRenderer=null),this._shadowRenderer&&!this._shadowRenderer.getValid()&&(this._shadowRenderer.destroy(),this._shadowRenderer=null)}get colorRenderer(){return this._colorRenderer||(this._colorRenderer=new yn(this._scene,!1)),this._colorRenderer}get colorRendererWithSAO(){return this._colorRendererWithSAO||(this._colorRendererWithSAO=new yn(this._scene,!0)),this._colorRendererWithSAO}get flatColorRenderer(){return this._flatColorRenderer||(this._flatColorRenderer=new _n(this._scene,!1)),this._flatColorRenderer}get flatColorRendererWithSAO(){return this._flatColorRendererWithSAO||(this._flatColorRendererWithSAO=new _n(this._scene,!0)),this._flatColorRendererWithSAO}get colorTextureRenderer(){return this._colorTextureRenderer||(this._colorTextureRenderer=new qn(this._scene,!1)),this._colorTextureRenderer}get colorTextureRendererWithSAO(){return this._colorTextureRendererWithSAO||(this._colorTextureRendererWithSAO=new qn(this._scene,!0)),this._colorTextureRendererWithSAO}get pbrRenderer(){return this._pbrRenderer||(this._pbrRenderer=new zn(this._scene,!1)),this._pbrRenderer}get pbrRendererWithSAO(){return this._pbrRendererWithSAO||(this._pbrRendererWithSAO=new zn(this._scene,!0)),this._pbrRendererWithSAO}get silhouetteRenderer(){return this._silhouetteRenderer||(this._silhouetteRenderer=new Pn(this._scene)),this._silhouetteRenderer}get depthRenderer(){return this._depthRenderer||(this._depthRenderer=new Hn(this._scene)),this._depthRenderer}get normalsRenderer(){return this._normalsRenderer||(this._normalsRenderer=new Vn(this._scene)),this._normalsRenderer}get edgesRenderer(){return this._edgesRenderer||(this._edgesRenderer=new Rn(this._scene)),this._edgesRenderer}get edgesColorRenderer(){return this._edgesColorRenderer||(this._edgesColorRenderer=new xn(this._scene)),this._edgesColorRenderer}get pickMeshRenderer(){return this._pickMeshRenderer||(this._pickMeshRenderer=new On(this._scene)),this._pickMeshRenderer}get pickNormalsRenderer(){return this._pickNormalsRenderer||(this._pickNormalsRenderer=new Bn(this._scene)),this._pickNormalsRenderer}get pickNormalsFlatRenderer(){return this._pickNormalsFlatRenderer||(this._pickNormalsFlatRenderer=new Yn(this._scene)),this._pickNormalsFlatRenderer}get pickDepthRenderer(){return this._pickDepthRenderer||(this._pickDepthRenderer=new wn(this._scene)),this._pickDepthRenderer}get occlusionRenderer(){return this._occlusionRenderer||(this._occlusionRenderer=new Ln(this._scene)),this._occlusionRenderer}get shadowRenderer(){return this._shadowRenderer||(this._shadowRenderer=new jn(this._scene)),this._shadowRenderer}_destroy(){this._colorRenderer&&this._colorRenderer.destroy(),this._colorRendererWithSAO&&this._colorRendererWithSAO.destroy(),this._flatColorRenderer&&this._flatColorRenderer.destroy(),this._flatColorRendererWithSAO&&this._flatColorRendererWithSAO.destroy(),this._colorTextureRenderer&&this._colorTextureRenderer.destroy(),this._colorTextureRendererWithSAO&&this._colorTextureRendererWithSAO.destroy(),this._pbrRenderer&&this._pbrRenderer.destroy(),this._pbrRendererWithSAO&&this._pbrRendererWithSAO.destroy(),this._depthRenderer&&this._depthRenderer.destroy(),this._normalsRenderer&&this._normalsRenderer.destroy(),this._silhouetteRenderer&&this._silhouetteRenderer.destroy(),this._edgesRenderer&&this._edgesRenderer.destroy(),this._edgesColorRenderer&&this._edgesColorRenderer.destroy(),this._pickMeshRenderer&&this._pickMeshRenderer.destroy(),this._pickDepthRenderer&&this._pickDepthRenderer.destroy(),this._pickNormalsRenderer&&this._pickNormalsRenderer.destroy(),this._pickNormalsFlatRenderer&&this._pickNormalsFlatRenderer.destroy(),this._occlusionRenderer&&this._occlusionRenderer.destroy(),this._shadowRenderer&&this._shadowRenderer.destroy()}}const $n={};class ea{constructor(e=5e6){e>5e6&&(e=5e6),this.maxVerts=e,this.maxIndices=3*e,this.positions=[],this.colors=[],this.uv=[],this.metallicRoughness=[],this.normals=[],this.pickColors=[],this.offsets=[],this.indices=[],this.edgeIndices=[]}}const ta=p.mat4(),sa=p.mat4();function ia(e,t,s){const i=e.length,r=new Uint16Array(i),o=t[0],n=t[1],a=t[2],l=t[3]-o,h=t[4]-n,c=t[5]-a,u=65525,A=u/l,d=u/h,f=u/c,m=e=>e>=0?e:0;for(let t=0;t<i;t+=3)r[t+0]=Math.floor(m(e[t+0]-o)*A),r[t+1]=Math.floor(m(e[t+1]-n)*d),r[t+2]=Math.floor(m(e[t+2]-a)*f);return p.identityMat4(ta),p.translationMat4v(t,ta),p.identityMat4(sa),p.scalingMat4v([l/u,h/u,c/u],sa),p.mulMat4(ta,sa,s),r}function ra(e,t,s){let i=e[0]/(Math.abs(e[0])+Math.abs(e[1])+Math.abs(e[2])),r=e[1]/(Math.abs(e[0])+Math.abs(e[1])+Math.abs(e[2]));if(e[2]<0){let e=i,t=r;e=(1-Math.abs(r))*(i>=0?1:-1),t=(1-Math.abs(i))*(r>=0?1:-1),i=e,r=t}return new Int8Array([Math[t](127.5*i+(i<0?-1:0)),Math[s](127.5*r+(r<0?-1:0))])}function oa(e,t,s,i){let r=e[t]/(Math.abs(e[t])+Math.abs(e[t+1])+Math.abs(e[t+2])),o=e[t+1]/(Math.abs(e[t])+Math.abs(e[t+1])+Math.abs(e[t+2]));if(e[t+2]<0){let e=(1-Math.abs(o))*(r>=0?1:-1),t=(1-Math.abs(r))*(o>=0?1:-1);r=e,o=t}return new Int8Array([Math[s](127.5*r+(r<0?-1:0)),Math[i](127.5*o+(o<0?-1:0))])}function na(e){let t=e[0],s=e[1];t/=t<0?127:128,s/=s<0?127:128;const i=1-Math.abs(t)-Math.abs(s);i<0&&(t=(1-Math.abs(s))*(t>=0?1:-1),s=(1-Math.abs(t))*(s>=0?1:-1));const r=Math.sqrt(t*t+s*s+i*i);return[t/r,s/r,i/r]}function aa(e,t,s){return e[t]*s[0]+e[t+1]*s[1]+e[t+2]*s[2]}const la=p.mat4(),ha=p.mat4(),ca=p.vec4([0,0,0,1]),ua=p.vec4([0,0,0,1]),Aa=p.vec4([0,0,0,1]);p.vec2([0,0]);const pa=p.OBB3(),da=p.vec3(),fa=p.vec3(),ma=p.vec3(),ga=p.vec3(),ya=p.vec3(),Ea=p.vec3(),va=p.vec3();class _a{constructor(e){this.model=e.model,this.sortId="TrianglesBatchingLayer"+(e.solid?"-solid":"-surface")+(e.autoNormals?"-autonormals":"-normals")+(e.textureSet&&e.textureSet.colorTexture?"-colorTexture":"")+(e.textureSet&&e.textureSet.metallicRoughnessTexture?"-metallicRoughnessTexture":""),this.layerIndex=e.layerIndex,this._batchingRenderers=function(e){const t=e.id;let s=$n[t];return s||(s=new Jn(e),$n[t]=s,s._compile(),e.on("compile",(()=>{s._compile()})),e.on("destroyed",(()=>{delete $n[t],s._destroy()}))),s}(e.model.scene),this._buffer=new ea(e.maxGeometryBatchSize),this._scratchMemory=e.scratchMemory,this._state=new Ze({origin:p.vec3(),positionsBuf:null,offsetsBuf:null,normalsBuf:null,colorsBuf:null,uvBuf:null,metallicRoughnessBuf:null,flagsBuf:null,indicesBuf:null,edgeIndicesBuf:null,positionsDecodeMatrix:p.mat4(),uvDecodeMatrix:null,textureSet:e.textureSet,pbrSupported:!1}),this._numPortions=0,this._numVisibleLayerPortions=0,this._numTransparentLayerPortions=0,this._numXRayedLayerPortions=0,this._numSelectedLayerPortions=0,this._numHighlightedLayerPortions=0,this._numClippableLayerPortions=0,this._numEdgesLayerPortions=0,this._numPickableLayerPortions=0,this._numCulledLayerPortions=0,this._modelAABB=p.collapseAABB3(),this._portions=[],this._numVerts=0,this._finalized=!1,e.positionsDecodeMatrix?(this._state.positionsDecodeMatrix.set(e.positionsDecodeMatrix),this._preCompressedPositionsExpected=!0):this._preCompressedPositionsExpected=!1,e.uvDecodeMatrix?(this._state.uvDecodeMatrix=p.mat3(e.uvDecodeMatrix),this._preCompressedNormalsExpected=!0):this._preCompressedNormalsExpected=!1,e.origin&&this._state.origin.set(e.origin),this.aabb=p.collapseAABB3(),this.solid=!!e.solid}canCreatePortion(e,t){if(this._finalized)throw"Already finalized";return this._buffer.positions.length+e<3*this._buffer.maxVerts&&this._buffer.indices.length+t<this._buffer.maxIndices}createPortion(e){if(this._finalized)throw"Already finalized";const t=e.positions,s=e.positionsCompressed,i=e.normals,r=e.normalsCompressed,o=e.uv,n=e.uvCompressed,a=e.colors,l=e.colorsCompressed,h=e.indices,c=e.edgeIndices,u=e.color,A=e.metallic,d=e.roughness,f=e.opacity,m=e.meshMatrix,g=e.worldMatrix,y=e.worldAABB,E=e.pickColor,v=this.model.scene,_=this._buffer,I=_.positions.length/3;let T;if(this._preCompressedPositionsExpected){if(!s)throw"positionsCompressed expected";T=s.length/3;for(let e=0,t=s.length;e<t;e++)_.positions.push(s[e]);const e=it.getPositionsBounds(s),t=it.decompressPosition(e.min,this._state.positionsDecodeMatrix,[]),i=it.decompressPosition(e.max,this._state.positionsDecodeMatrix,[]);y[0]=t[0],y[1]=t[1],y[2]=t[2],y[3]=i[0],y[4]=i[1],y[5]=i[2],g&&(p.AABB3ToOBB3(y,pa),p.transformOBB3(g,pa),p.OBB3ToAABB3(pa,y))}else{if(!t)throw"positions expected";T=t.length/3;const e=t.length,s=_.positions.length;for(let e=0,s=t.length;e<s;e++)_.positions.push(t[e]);if(m)for(let t=s,i=s+e;t<i;t+=3)ca[0]=_.positions[t+0],ca[1]=_.positions[t+1],ca[2]=_.positions[t+2],p.transformPoint4(m,ca,ua),_.positions[t+0]=ua[0],_.positions[t+1]=ua[1],_.positions[t+2]=ua[2],p.expandAABB3Point3(this._modelAABB,ua),g?(p.transformPoint4(g,ua,Aa),p.expandAABB3Point3(y,Aa)):p.expandAABB3Point3(y,ua);else for(let t=s,i=s+e;t<i;t+=3)ca[0]=_.positions[t+0],ca[1]=_.positions[t+1],ca[2]=_.positions[t+2],p.expandAABB3Point3(this._modelAABB,ca),g?(p.transformPoint4(g,ca,ua),p.expandAABB3Point3(y,ua)):p.expandAABB3Point3(y,ca)}if(this._state.origin){const e=this._state.origin;y[0]+=e[0],y[1]+=e[1],y[2]+=e[2],y[3]+=e[0],y[4]+=e[1],y[5]+=e[2]}if(p.expandAABB3(this.aabb,y),r&&r.length>0)for(let e=0,t=r.length;e<t;e++)_.normals.push(r[e]);else if(i&&i.length>0){const e=la;m?p.inverseMat4(p.transposeMat4(m,ha),e):p.identityMat4(e,e),function(e,t,s,i,r){function o(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}let n,a,l,h,c,u,A=new Float32Array([0,0,0,0]),d=new Float32Array([0,0,0,0]);for(u=0;u<s;u+=3)A[0]=t[u],A[1]=t[u+1],A[2]=t[u+2],p.transformVec3(e,A,d),p.normalizeVec3(d,d),l=n=ra(d,"floor","floor"),a=na(n),h=c=o(d,a),n=ra(d,"ceil","floor"),a=na(n),h=o(d,a),h>c&&(l=n,c=h),n=ra(d,"floor","ceil"),a=na(n),h=o(d,a),h>c&&(l=n,c=h),n=ra(d,"ceil","ceil"),a=na(n),h=o(d,a),h>c&&(l=n,c=h),i[r+u+0]=l[0],i[r+u+1]=l[1],i[r+u+2]=0}(e,i,i.length,_.normals,_.normals.length)}if(a)for(let e=0,t=a.length;e<t;e+=3)_.colors.push(255*a[e]),_.colors.push(255*a[e+1]),_.colors.push(255*a[e+2]),_.colors.push(255);else if(l)for(let e=0,t=a.length;e<t;e+=3)_.colors.push(a[e]),_.colors.push(a[e+1]),_.colors.push(a[e+2]),_.colors.push(255);else if(u){const e=u[0],t=u[1],s=u[2],i=f;for(let r=0;r<T;r++)_.colors.push(e),_.colors.push(t),_.colors.push(s),_.colors.push(i)}const P=null!=A?A:0,D=null!=d?d:255;for(let e=0;e<T;e++)_.metallicRoughness.push(P),_.metallicRoughness.push(D);if(o&&o.length>0)for(let e=0,t=o.length;e<t;e++)_.uv.push(o[e]);else if(n&&n.length>0)for(let e=0,t=n.length;e<t;e++)_.uv.push(n[e]);for(let e=0,t=h.length;e<t;e++)_.indices.push(I+h[e]);if(c)for(let e=0,t=c.length;e<t;e++)_.edgeIndices.push(I+c[e]);{const e=_.pickColors.length;for(let t=e,s=e+4*T;t<s;t+=4)_.pickColors.push(E[0]),_.pickColors.push(E[1]),_.pickColors.push(E[2]),_.pickColors.push(E[3])}if(v.entityOffsetsEnabled)for(let e=0;e<T;e++)_.offsets.push(0),_.offsets.push(0),_.offsets.push(0);const b=this._portions.length,R={vertsBaseIndex:I,numVerts:T,indicesBaseIndex:_.indices.length-h.length,numIndices:h.length};return v.pickSurfacePrecisionEnabled&&(R.indices=h,v.entityOffsetsEnabled&&(R.offset=new Float32Array(3))),this._portions.push(R),this._numPortions++,this.model.numPortions++,this._numVerts+=R.numVerts,b}finalize(){if(this._finalized)return void this.model.error("Already finalized");const e=this._state,t=this.model.scene.canvas.gl,s=this._buffer;if(s.positions.length>0){const i=this._preCompressedPositionsExpected?new Uint16Array(s.positions):ia(s.positions,this._modelAABB,e.positionsDecodeMatrix);if(e.positionsBuf=new ye(t,t.ARRAY_BUFFER,i,i.length,3,t.STATIC_DRAW),this.model.scene.pickSurfacePrecisionEnabled)for(let e=0,t=this._portions.length;e<t;e++){const t=this._portions[e],s=3*t.vertsBaseIndex,r=s+3*t.numVerts;t.quantizedPositions=i.slice(s,r)}}if(s.normals.length>0){const i=new Int8Array(s.normals);let r=!0;e.normalsBuf=new ye(t,t.ARRAY_BUFFER,i,s.normals.length,3,t.STATIC_DRAW,r)}if(s.colors.length>0){const i=new Uint8Array(s.colors);let r=!1;e.colorsBuf=new ye(t,t.ARRAY_BUFFER,i,s.colors.length,4,t.DYNAMIC_DRAW,r)}if(s.uv.length>0)if(e.uvDecodeMatrix){let i=!1;e.uvBuf=new ye(t,t.ARRAY_BUFFER,s.uv,s.uv.length,2,t.STATIC_DRAW,i)}else{const i=it.getUVBounds(s.uv),r=it.compressUVs(s.uv,i.min,i.max),o=r.quantized;let n=!1;e.uvDecodeMatrix=p.mat3(r.decodeMatrix),e.uvBuf=new ye(t,t.ARRAY_BUFFER,o,o.length,2,t.STATIC_DRAW,n)}if(s.metallicRoughness.length>0){const i=new Uint8Array(s.metallicRoughness);let r=!1;e.metallicRoughnessBuf=new ye(t,t.ARRAY_BUFFER,i,s.metallicRoughness.length,2,t.STATIC_DRAW,r)}if(s.positions.length>0){const i=s.positions.length/3,r=new Float32Array(i),o=!1;e.flagsBuf=new ye(t,t.ARRAY_BUFFER,r,r.length,1,t.DYNAMIC_DRAW,o)}if(s.pickColors.length>0){const i=new Uint8Array(s.pickColors);let r=!1;e.pickColorsBuf=new ye(t,t.ARRAY_BUFFER,i,s.pickColors.length,4,t.STATIC_DRAW,r)}if(this.model.scene.entityOffsetsEnabled&&s.offsets.length>0){const i=new Float32Array(s.offsets);e.offsetsBuf=new ye(t,t.ARRAY_BUFFER,i,s.offsets.length,3,t.DYNAMIC_DRAW)}if(s.indices.length>0){const i=new Uint32Array(s.indices);e.indicesBuf=new ye(t,t.ELEMENT_ARRAY_BUFFER,i,s.indices.length,1,t.STATIC_DRAW)}if(s.edgeIndices.length>0){const i=new Uint32Array(s.edgeIndices);e.edgeIndicesBuf=new ye(t,t.ELEMENT_ARRAY_BUFFER,i,s.edgeIndices.length,1,t.STATIC_DRAW)}this._state.pbrSupported=!!(e.metallicRoughnessBuf&&e.uvBuf&&e.normalsBuf&&e.textureSet&&e.textureSet.colorTexture&&e.textureSet.metallicRoughnessTexture),this._state.colorTextureSupported=!!e.uvBuf&&!!e.textureSet&&!!e.textureSet.colorTexture,this._buffer=null,this._finalized=!0}isEmpty(){return!this._state.indicesBuf}initFlags(e,t,s){t&N&&(this._numVisibleLayerPortions++,this.model.numVisibleLayerPortions++),t&F&&(this._numHighlightedLayerPortions++,this.model.numHighlightedLayerPortions++),t&B&&(this._numXRayedLayerPortions++,this.model.numXRayedLayerPortions++),t&L&&(this._numSelectedLayerPortions++,this.model.numSelectedLayerPortions++),t&w&&(this._numClippableLayerPortions++,this.model.numClippableLayerPortions++),t&U&&(this._numEdgesLayerPortions++,this.model.numEdgesLayerPortions++),t&S&&(this._numPickableLayerPortions++,this.model.numPickableLayerPortions++),t&O&&(this._numCulledLayerPortions++,this.model.numCulledLayerPortions++),s&&(this._numTransparentLayerPortions++,this.model.numTransparentLayerPortions++);this._setFlags(e,t,s,!0)}flushInitFlags(){this._setDeferredFlags()}setVisible(e,t,s){if(!this._finalized)throw"Not finalized";t&N?(this._numVisibleLayerPortions++,this.model.numVisibleLayerPortions++):(this._numVisibleLayerPortions--,this.model.numVisibleLayerPortions--),this._setFlags(e,t,s)}setHighlighted(e,t,s){if(!this._finalized)throw"Not finalized";t&F?(this._numHighlightedLayerPortions++,this.model.numHighlightedLayerPortions++):(this._numHighlightedLayerPortions--,this.model.numHighlightedLayerPortions--),this._setFlags(e,t,s)}setXRayed(e,t,s){if(!this._finalized)throw"Not finalized";t&B?(this._numXRayedLayerPortions++,this.model.numXRayedLayerPortions++):(this._numXRayedLayerPortions--,this.model.numXRayedLayerPortions--),this._setFlags(e,t,s)}setSelected(e,t,s){if(!this._finalized)throw"Not finalized";t&L?(this._numSelectedLayerPortions++,this.model.numSelectedLayerPortions++):(this._numSelectedLayerPortions--,this.model.numSelectedLayerPortions--),this._setFlags(e,t,s)}setEdges(e,t,s){if(!this._finalized)throw"Not finalized";t&U?(this._numEdgesLayerPortions++,this.model.numEdgesLayerPortions++):(this._numEdgesLayerPortions--,this.model.numEdgesLayerPortions--),this._setFlags(e,t,s)}setClippable(e,t){if(!this._finalized)throw"Not finalized";t&w?(this._numClippableLayerPortions++,this.model.numClippableLayerPortions++):(this._numClippableLayerPortions--,this.model.numClippableLayerPortions--),this._setFlags(e,t)}setCulled(e,t,s){if(!this._finalized)throw"Not finalized";t&O?(this._numCulledLayerPortions++,this.model.numCulledLayerPortions++):(this._numCulledLayerPortions--,this.model.numCulledLayerPortions--),this._setFlags(e,t,s)}setCollidable(e,t){if(!this._finalized)throw"Not finalized"}setPickable(e,t,s){if(!this._finalized)throw"Not finalized";t&S?(this._numPickableLayerPortions++,this.model.numPickableLayerPortions++):(this._numPickableLayerPortions--,this.model.numPickableLayerPortions--),this._setFlags(e,t,s)}setColor(e,t){if(!this._finalized)throw"Not finalized";const s=e,i=this._portions[s],r=4*i.vertsBaseIndex,o=4*i.numVerts,n=this._scratchMemory.getUInt8Array(o),a=t[0],l=t[1],h=t[2],c=t[3];for(let e=0;e<o;e+=4)n[e+0]=a,n[e+1]=l,n[e+2]=h,n[e+3]=c;this._state.colorsBuf&&this._state.colorsBuf.setData(n,r,o)}setTransparent(e,t,s){s?(this._numTransparentLayerPortions++,this.model.numTransparentLayerPortions++):(this._numTransparentLayerPortions--,this.model.numTransparentLayerPortions--),this._setFlags(e,t,s)}_setFlags(e,t,s,i=!1){if(!this._finalized)throw"Not finalized";const r=e,o=this._portions[r],n=o.vertsBaseIndex,a=o.numVerts,l=!!(t&N),h=!!(t&B),c=!!(t&F),u=!!(t&L),A=!!(t&U),p=!!(t&S),d=!!(t&O);let f,m;f=!l||d||h||c&&!this.model.scene.highlightMaterial.glowThrough||u&&!this.model.scene.selectedMaterial.glowThrough?rn:s?nn:on,m=!l||d?rn:u?ln:c?an:h?hn:rn;let g=0;g=!l||d?rn:u?pn:c?An:h?dn:A?s?un:cn:rn;let y=l&&!d&&p?fn:rn;const E=t&w?1:0;if(i){this._deferredFlagValues||(this._deferredFlagValues=new Float32Array(this._numVerts));for(let e=n,t=n+a;e<t;e++){let t=0;t|=f,t|=m<<4,t|=g<<8,t|=y<<12,t|=E<<16,this._deferredFlagValues[e]=t}}else if(this._state.flagsBuf){const e=this._scratchMemory.getFloat32Array(a);for(let t=0;t<a;t++){let s=0;s|=f,s|=m<<4,s|=g<<8,s|=y<<12,s|=E<<16,e[t]=s}this._state.flagsBuf.setData(e,n,a)}}_setDeferredFlags(){this._deferredFlagValues&&(this._state.flagsBuf.setData(this._deferredFlagValues),this._deferredFlagValues=null)}setOffset(e,t){if(!this._finalized)throw"Not finalized";if(!this.model.scene.entityOffsetsEnabled)return void this.model.error("Entity#offset not enabled for this Viewer");const s=e,i=this._portions[s],r=3*i.vertsBaseIndex,o=3*i.numVerts,n=this._scratchMemory.getFloat32Array(o),a=t[0],l=t[1],h=t[2];for(let e=0;e<o;e+=3)n[e+0]=a,n[e+1]=l,n[e+2]=h;this._state.offsetsBuf&&this._state.offsetsBuf.setData(n,r,o),this.model.scene.pickSurfacePrecisionEnabled&&(i.offset[0]=t[0],i.offset[1]=t[1],i.offset[2]=t[2])}getEachVertex(e,t){if(!this.model.scene.pickSurfacePrecisionEnabled)return;const s=this._state,i=this._portions[e];if(!i)return void this.model.error("portion not found: "+e);const r=i.quantizedPositions,o=s.origin,n=i.offset,a=o[0]+n[0],l=o[1]+n[1],h=o[2]+n[2],c=ca;for(let e=0,i=r.length;e<i;e+=3)c[0]=r[e],c[1]=r[e+1],c[2]=r[e+2],c[3]=1,p.decompressPosition(c,s.positionsDecodeMatrix),p.transformPoint4(this.model.worldMatrix,c),c[0]+=a,c[1]+=l,c[2]+=h,t(c)}getElementsCountAndOffset(e){let t=null,s=null;const i=this._portions[e];return i&&(t=i.numIndices,s=i.indicesBaseIndex),{count:t,offset:s}}drawColorOpaque(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&this._numTransparentLayerPortions!==this._numPortions&&this._numXRayedLayerPortions!==this._numPortions&&(this._updateBackfaceCull(e,t),t.withSAO&&this.model.saoEnabled?t.pbrEnabled&&this.model.pbrEnabled&&this._state.pbrSupported?this._batchingRenderers.pbrRendererWithSAO&&this._batchingRenderers.pbrRendererWithSAO.drawLayer(t,this,on):t.colorTextureEnabled&&this.model.colorTextureEnabled&&this._state.colorTextureSupported?this._batchingRenderers.colorTextureRendererWithSAO&&this._batchingRenderers.colorTextureRendererWithSAO.drawLayer(t,this,on):this._state.normalsBuf?this._batchingRenderers.colorRendererWithSAO&&this._batchingRenderers.colorRendererWithSAO.drawLayer(t,this,on):this._batchingRenderers.flatColorRendererWithSAO&&this._batchingRenderers.flatColorRendererWithSAO.drawLayer(t,this,on):t.pbrEnabled&&this.model.pbrEnabled&&this._state.pbrSupported?this._batchingRenderers.pbrRenderer&&this._batchingRenderers.pbrRenderer.drawLayer(t,this,on):t.colorTextureEnabled&&this.model.colorTextureEnabled&&this._state.colorTextureSupported?this._batchingRenderers.colorTextureRenderer&&this._batchingRenderers.colorTextureRenderer.drawLayer(t,this,on):this._state.normalsBuf?this._batchingRenderers.colorRenderer&&this._batchingRenderers.colorRenderer.drawLayer(t,this,on):this._batchingRenderers.flatColorRenderer&&this._batchingRenderers.flatColorRenderer.drawLayer(t,this,on))}_updateBackfaceCull(e,t){const s=this.model.backfaces||!this.solid||e.sectioned;if(t.backfaces!==s){const e=t.gl;s?e.disable(e.CULL_FACE):e.enable(e.CULL_FACE),t.backfaces=s}}drawColorTransparent(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numTransparentLayerPortions&&this._numXRayedLayerPortions!==this._numPortions&&(this._updateBackfaceCull(e,t),t.pbrEnabled&&this.model.pbrEnabled&&this._state.pbrSupported?this._batchingRenderers.pbrRenderer&&this._batchingRenderers.pbrRenderer.drawLayer(t,this,nn):t.colorTextureEnabled&&this.model.colorTextureEnabled&&this._state.colorTextureSupported?this._batchingRenderers.colorTextureRenderer&&this._batchingRenderers.colorTextureRenderer.drawLayer(t,this,nn):this._state.normalsBuf?this._batchingRenderers.colorRenderer&&this._batchingRenderers.colorRenderer.drawLayer(t,this,nn):this._batchingRenderers.flatColorRenderer&&this._batchingRenderers.flatColorRenderer.drawLayer(t,this,nn))}drawDepth(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&this._numTransparentLayerPortions!==this._numPortions&&this._numXRayedLayerPortions!==this._numPortions&&(this._updateBackfaceCull(e,t),this._batchingRenderers.depthRenderer&&this._batchingRenderers.depthRenderer.drawLayer(t,this,on))}drawNormals(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&this._numTransparentLayerPortions!==this._numPortions&&this._numXRayedLayerPortions!==this._numPortions&&(this._updateBackfaceCull(e,t),this._batchingRenderers.normalsRenderer&&this._batchingRenderers.normalsRenderer.drawLayer(t,this,on))}drawSilhouetteXRayed(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numXRayedLayerPortions&&(this._updateBackfaceCull(e,t),this._batchingRenderers.silhouetteRenderer&&this._batchingRenderers.silhouetteRenderer.drawLayer(t,this,hn))}drawSilhouetteHighlighted(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numHighlightedLayerPortions&&(this._updateBackfaceCull(e,t),this._batchingRenderers.silhouetteRenderer&&this._batchingRenderers.silhouetteRenderer.drawLayer(t,this,an))}drawSilhouetteSelected(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numSelectedLayerPortions&&(this._updateBackfaceCull(e,t),this._batchingRenderers.silhouetteRenderer&&this._batchingRenderers.silhouetteRenderer.drawLayer(t,this,ln))}drawEdgesColorOpaque(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numEdgesLayerPortions&&this._batchingRenderers.edgesColorRenderer&&this._batchingRenderers.edgesColorRenderer.drawLayer(t,this,cn)}drawEdgesColorTransparent(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numEdgesLayerPortions&&0!==this._numTransparentLayerPortions&&this._batchingRenderers.edgesColorRenderer&&this._batchingRenderers.edgesColorRenderer.drawLayer(t,this,un)}drawEdgesHighlighted(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numHighlightedLayerPortions&&this._batchingRenderers.edgesRenderer&&this._batchingRenderers.edgesRenderer.drawLayer(t,this,An)}drawEdgesSelected(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numSelectedLayerPortions&&this._batchingRenderers.edgesRenderer&&this._batchingRenderers.edgesRenderer.drawLayer(t,this,pn)}drawEdgesXRayed(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numXRayedLayerPortions&&this._batchingRenderers.edgesRenderer&&this._batchingRenderers.edgesRenderer.drawLayer(t,this,dn)}drawOcclusion(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&(this._updateBackfaceCull(e,t),this._batchingRenderers.occlusionRenderer&&this._batchingRenderers.occlusionRenderer.drawLayer(t,this,on))}drawShadow(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&(this._updateBackfaceCull(e,t),this._batchingRenderers.shadowRenderer&&this._batchingRenderers.shadowRenderer.drawLayer(t,this,on))}drawPickMesh(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&(this._updateBackfaceCull(e,t),this._batchingRenderers.pickMeshRenderer&&this._batchingRenderers.pickMeshRenderer.drawLayer(t,this,fn))}drawPickDepths(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&(this._updateBackfaceCull(e,t),this._batchingRenderers.pickDepthRenderer&&this._batchingRenderers.pickDepthRenderer.drawLayer(t,this,fn))}drawPickNormals(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&(this._updateBackfaceCull(e,t),this._batchingRenderers.pickNormalsFlatRenderer&&this._batchingRenderers.pickNormalsFlatRenderer.drawLayer(t,this,fn))}precisionRayPickSurface(e,t,s,i,r){if(!this.model.scene.pickSurfacePrecisionEnabled)return!1;const o=this._state,n=this._portions[e];if(!n)return this.model.error("portion not found: "+e),!1;const a=n.quantizedPositions,l=n.indices,h=o.origin,c=n.offset,u=da,A=fa;u.set(h?p.subVec3(t,h,ma):t),A.set(s),c&&p.subVec3(u,c),p.transformRay(this.model.worldNormalMatrix,u,A,u,A);const d=ga,f=ya,m=Ea;let g=!1,y=0;const E=va;for(let e=0,s=l.length;e<s;e+=3){const s=3*l[e],n=3*l[e+1],v=3*l[e+2];if(d[0]=a[s],d[1]=a[s+1],d[2]=a[s+2],f[0]=a[n],f[1]=a[n+1],f[2]=a[n+2],m[0]=a[v],m[1]=a[v+1],m[2]=a[v+2],p.decompressPosition(d,o.positionsDecodeMatrix),p.decompressPosition(f,o.positionsDecodeMatrix),p.decompressPosition(m,o.positionsDecodeMatrix),p.rayTriangleIntersect(u,A,d,f,m,E)){p.transformPoint3(this.model.worldMatrix,E,E),c&&p.addVec3(E,c),h&&p.addVec3(E,h);const e=Math.abs(p.lenVec3(p.subVec3(E,t,[])));(!g||e>y)&&(y=e,i.set(E),r&&p.triangleNormal(d,f,m,r),g=!0)}}return g&&r&&(p.transformVec3(this.model.worldNormalMatrix,r,r),p.normalizeVec3(r)),g}destroy(){const e=this._state;e.positionsBuf&&(e.positionsBuf.destroy(),e.positionsBuf=null),e.offsetsBuf&&(e.offsetsBuf.destroy(),e.offsetsBuf=null),e.normalsBuf&&(e.normalsBuf.destroy(),e.normalsBuf=null),e.colorsBuf&&(e.colorsBuf.destroy(),e.colorsBuf=null),e.metallicRoughnessBuf&&(e.metallicRoughnessBuf.destroy(),e.metallicRoughnessBuf=null),e.flagsBuf&&(e.flagsBuf.destroy(),e.flagsBuf=null),e.pickColorsBuf&&(e.pickColorsBuf.destroy(),e.pickColorsBuf=null),e.indicesBuf&&(e.indicesBuf.destroy(),e.indicessBuf=null),e.edgeIndicesBuf&&(e.edgeIndicesBuf.destroy(),e.edgeIndicessBuf=null),e.destroy()}}const Ia=p.vec4(),Ta=p.vec3();class Pa{constructor(e,t){this._scene=e,this._withSAO=t,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){const e=this._scene;return[e._lightsState.getHash(),e._sectionPlanesState.getHash(),this._withSAO?"sao":"nosao"].join(";")}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=a.geometry,h=t._state.origin;if(!this._program&&(this._allocate(),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram(e)),n.uniform1i(this._uRenderPass,s),n.uniformMatrix4fv(this._uViewMatrix,!1,h?j(o.viewMatrix,h):o.viewMatrix),n.uniformMatrix4fv(this._uViewNormalMatrix,!1,o.viewNormalMatrix),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix),n.uniformMatrix4fv(this._uWorldNormalMatrix,!1,i.worldNormalMatrix);const c=r._sectionPlanesState.sectionPlanes.length;if(c>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*c,o=i.renderFlags;for(let t=0;t<c;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(h){const e=W(s.dist,s.dir,h,Ta);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,l.positionsDecodeMatrix),this._aModelMatrixCol0.bindArrayBuffer(a.modelMatrixCol0Buf),this._aModelMatrixCol1.bindArrayBuffer(a.modelMatrixCol1Buf),this._aModelMatrixCol2.bindArrayBuffer(a.modelMatrixCol2Buf),n.vertexAttribDivisor(this._aModelMatrixCol0.location,1),n.vertexAttribDivisor(this._aModelMatrixCol1.location,1),n.vertexAttribDivisor(this._aModelMatrixCol2.location,1),this._aModelNormalMatrixCol0.bindArrayBuffer(a.modelNormalMatrixCol0Buf),this._aModelNormalMatrixCol1.bindArrayBuffer(a.modelNormalMatrixCol1Buf),this._aModelNormalMatrixCol2.bindArrayBuffer(a.modelNormalMatrixCol2Buf),n.vertexAttribDivisor(this._aModelNormalMatrixCol0.location,1),n.vertexAttribDivisor(this._aModelNormalMatrixCol1.location,1),n.vertexAttribDivisor(this._aModelNormalMatrixCol2.location,1),this._aPosition.bindArrayBuffer(l.positionsBuf),this._aNormal.bindArrayBuffer(l.normalsBuf),this._aColor.bindArrayBuffer(a.colorsBuf),n.vertexAttribDivisor(this._aColor.location,1),this._aFlags.bindArrayBuffer(a.flagsBuf),n.vertexAttribDivisor(this._aFlags.location,1),this._aOffset&&(this._aOffset.bindArrayBuffer(a.offsetsBuf),n.vertexAttribDivisor(this._aOffset.location,1)),l.indicesBuf.bind(),n.drawElementsInstanced(n.TRIANGLES,l.indicesBuf.numItems,l.indicesBuf.itemType,0,a.numInstances),e.drawElements++,n.vertexAttribDivisor(this._aModelMatrixCol0.location,0),n.vertexAttribDivisor(this._aModelMatrixCol1.location,0),n.vertexAttribDivisor(this._aModelMatrixCol2.location,0),n.vertexAttribDivisor(this._aModelNormalMatrixCol0.location,0),n.vertexAttribDivisor(this._aModelNormalMatrixCol1.location,0),n.vertexAttribDivisor(this._aModelNormalMatrixCol2.location,0),n.vertexAttribDivisor(this._aColor.location,0),n.vertexAttribDivisor(this._aFlags.location,0),this._aOffset&&n.vertexAttribDivisor(this._aOffset.location,0)}_allocate(){const e=this._scene,t=e.canvas.gl,s=e._lightsState;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uRenderPass=i.getLocation("renderPass"),this._uPositionsDecodeMatrix=i.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=i.getLocation("worldMatrix"),this._uWorldNormalMatrix=i.getLocation("worldNormalMatrix"),this._uViewMatrix=i.getLocation("viewMatrix"),this._uViewNormalMatrix=i.getLocation("viewNormalMatrix"),this._uProjMatrix=i.getLocation("projMatrix"),this._uLightAmbient=i.getLocation("lightAmbient"),this._uLightColor=[],this._uLightDir=[],this._uLightPos=[],this._uLightAttenuation=[];const r=s.lights;let o;for(let e=0,t=r.length;e<t;e++)switch(o=r[e],o.type){case"dir":this._uLightColor[e]=i.getLocation("lightColor"+e),this._uLightPos[e]=null,this._uLightDir[e]=i.getLocation("lightDir"+e);break;case"point":this._uLightColor[e]=i.getLocation("lightColor"+e),this._uLightPos[e]=i.getLocation("lightPos"+e),this._uLightDir[e]=null,this._uLightAttenuation[e]=i.getLocation("lightAttenuation"+e);break;case"spot":this._uLightColor[e]=i.getLocation("lightColor"+e),this._uLightPos[e]=i.getLocation("lightPos"+e),this._uLightDir[e]=i.getLocation("lightDir"+e),this._uLightAttenuation[e]=i.getLocation("lightAttenuation"+e)}this._uSectionPlanes=[];for(let t=0,s=e._sectionPlanesState.sectionPlanes.length;t<s;t++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+t),pos:i.getLocation("sectionPlanePos"+t),dir:i.getLocation("sectionPlaneDir"+t)});this._aPosition=i.getAttribute("position"),this._aNormal=i.getAttribute("normal"),this._aColor=i.getAttribute("color"),this._aFlags=i.getAttribute("flags"),this._aOffset=i.getAttribute("offset"),this._aModelMatrixCol0=i.getAttribute("modelMatrixCol0"),this._aModelMatrixCol1=i.getAttribute("modelMatrixCol1"),this._aModelMatrixCol2=i.getAttribute("modelMatrixCol2"),this._aModelNormalMatrixCol0=i.getAttribute("modelNormalMatrixCol0"),this._aModelNormalMatrixCol1=i.getAttribute("modelNormalMatrixCol1"),this._aModelNormalMatrixCol2=i.getAttribute("modelNormalMatrixCol2"),this._uOcclusionTexture="uOcclusionTexture",this._uSAOParams=i.getLocation("uSAOParams"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=i.getLocation("logDepthBufFC"))}_bindProgram(e){const t=this._scene,s=t.canvas.gl,i=t._lightsState.lights,r=t.camera.project;this._program.bind(),s.uniformMatrix4fv(this._uProjMatrix,!1,r.matrix),this._uLightAmbient&&s.uniform4fv(this._uLightAmbient,t._lightsState.getAmbientColorAndIntensity());for(let e=0,t=i.length;e<t;e++){const t=i[e];this._uLightColor[e]&&s.uniform4f(this._uLightColor[e],t.color[0],t.color[1],t.color[2],t.intensity),this._uLightPos[e]&&(s.uniform3fv(this._uLightPos[e],t.pos),this._uLightAttenuation[e]&&s.uniform1f(this._uLightAttenuation[e],t.attenuation)),this._uLightDir[e]&&s.uniform3fv(this._uLightDir[e],t.dir)}if(this._withSAO){const i=t.sao;if(i.possible){const t=s.drawingBufferWidth,r=s.drawingBufferHeight;Ia[0]=t,Ia[1]=r,Ia[2]=i.blendCutoff,Ia[3]=i.blendFactor,s.uniform4fv(this._uSAOParams,Ia),this._program.bindTexture(this._uOcclusionTexture,e.occlusionTexture,0)}}if(t.logarithmicDepthBufferEnabled){const e=2/(Math.log(r.far+1)/Math.LN2);s.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState,s=e._lightsState,i=t.sectionPlanes.length>0;let r,o,n;const a=[];for(a.push("#version 300 es"),a.push("// Instancing geometry drawing vertex shader"),a.push("uniform int renderPass;"),a.push("in vec3 position;"),a.push("in vec2 normal;"),a.push("in vec4 color;"),a.push("in float flags;"),e.entityOffsetsEnabled&&a.push("in vec3 offset;"),a.push("in vec4 modelMatrixCol0;"),a.push("in vec4 modelMatrixCol1;"),a.push("in vec4 modelMatrixCol2;"),a.push("in vec4 modelNormalMatrixCol0;"),a.push("in vec4 modelNormalMatrixCol1;"),a.push("in vec4 modelNormalMatrixCol2;"),a.push("uniform mat4 worldMatrix;"),a.push("uniform mat4 worldNormalMatrix;"),a.push("uniform mat4 viewMatrix;"),a.push("uniform mat4 viewNormalMatrix;"),a.push("uniform mat4 projMatrix;"),a.push("uniform mat4 positionsDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(a.push("uniform float logDepthBufFC;"),a.push("out float vFragDepth;"),a.push("bool isPerspectiveMatrix(mat4 m) {"),a.push("    return (m[2][3] == - 1.0);"),a.push("}"),a.push("out float isPerspective;")),a.push("uniform vec4 lightAmbient;"),r=0,o=s.lights.length;r<o;r++)n=s.lights[r],"ambient"!==n.type&&(a.push("uniform vec4 lightColor"+r+";"),"dir"===n.type&&a.push("uniform vec3 lightDir"+r+";"),"point"===n.type&&a.push("uniform vec3 lightPos"+r+";"),"spot"===n.type&&(a.push("uniform vec3 lightPos"+r+";"),a.push("uniform vec3 lightDir"+r+";")));for(a.push("vec3 octDecode(vec2 oct) {"),a.push("    vec3 v = vec3(oct.xy, 1.0 - abs(oct.x) - abs(oct.y));"),a.push("    if (v.z < 0.0) {"),a.push("        v.xy = (1.0 - abs(v.yx)) * vec2(v.x >= 0.0 ? 1.0 : -1.0, v.y >= 0.0 ? 1.0 : -1.0);"),a.push("    }"),a.push("    return normalize(v);"),a.push("}"),i&&(a.push("out vec4 vWorldPosition;"),a.push("out float vFlags;")),a.push("out vec4 vColor;"),a.push("void main(void) {"),a.push("int colorFlag = int(flags) & 0xF;"),a.push("if (colorFlag != renderPass) {"),a.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),a.push("} else {"),a.push("vec4 worldPosition =  positionsDecodeMatrix * vec4(position, 1.0); "),a.push("worldPosition = worldMatrix * vec4(dot(worldPosition, modelMatrixCol0), dot(worldPosition, modelMatrixCol1), dot(worldPosition, modelMatrixCol2), 1.0);"),e.entityOffsetsEnabled&&a.push("      worldPosition.xyz = worldPosition.xyz + offset;"),a.push("vec4 viewPosition  = viewMatrix * worldPosition; "),a.push("vec4 modelNormal = vec4(octDecode(normal.xy), 0.0); "),a.push("vec4 worldNormal = worldNormalMatrix * vec4(dot(modelNormal, modelNormalMatrixCol0), dot(modelNormal, modelNormalMatrixCol1), dot(modelNormal, modelNormalMatrixCol2), 0.0);"),a.push("vec3 viewNormal = normalize(vec4(viewNormalMatrix * worldNormal).xyz);"),a.push("vec3 reflectedColor = vec3(0.0, 0.0, 0.0);"),a.push("vec3 viewLightDir = vec3(0.0, 0.0, -1.0);"),a.push("float lambertian = 1.0;"),r=0,o=s.lights.length;r<o;r++)if(n=s.lights[r],"ambient"!==n.type){if("dir"===n.type)"view"===n.space?a.push("viewLightDir = normalize(lightDir"+r+");"):a.push("viewLightDir = normalize((viewMatrix * vec4(lightDir"+r+", 0.0)).xyz);");else if("point"===n.type)"view"===n.space?a.push("viewLightDir = -normalize(lightPos"+r+" - viewPosition.xyz);"):a.push("viewLightDir = -normalize((viewMatrix * vec4(lightPos"+r+", 0.0)).xyz);");else{if("spot"!==n.type)continue;"view"===n.space?a.push("viewLightDir = normalize(lightDir"+r+");"):a.push("viewLightDir = normalize((viewMatrix * vec4(lightDir"+r+", 0.0)).xyz);")}a.push("lambertian = max(dot(-viewNormal, viewLightDir), 0.0);"),a.push("reflectedColor += lambertian * (lightColor"+r+".rgb * lightColor"+r+".a);")}return a.push("vec3 rgb = (vec3(float(color.r) / 255.0, float(color.g) / 255.0, float(color.b) / 255.0));"),a.push("vColor =  vec4((lightAmbient.rgb * lightAmbient.a * rgb) + (reflectedColor * rgb), float(color.a) / 255.0);"),a.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(a.push("vFragDepth = 1.0 + clipPos.w;"),a.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),i&&(a.push("vWorldPosition = worldPosition;"),a.push("vFlags = flags;")),a.push("gl_Position = clipPos;"),a.push("}"),a.push("}"),a}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Instancing geometry drawing fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("in float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),this._withSAO&&(i.push("uniform sampler2D uOcclusionTexture;"),i.push("uniform vec4      uSAOParams;"),i.push("const float       packUpscale = 256. / 255.;"),i.push("const float       unpackDownScale = 255. / 256.;"),i.push("const vec3        packFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );"),i.push("const vec4        unPackFactors = unpackDownScale / vec4( packFactors, 1. );"),i.push("float unpackRGBToFloat( const in vec4 v ) {"),i.push("    return dot( v, unPackFactors );"),i.push("}")),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("in vec4 vColor;"),i.push("out vec4 outColor;"),i.push("void main(void) {"),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("  float dist = 0.0;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("if (sectionPlaneActive"+e+") {"),i.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("}");i.push("  if (dist > 0.0) { "),i.push("      discard;"),i.push("  }"),i.push("}")}return e.logarithmicDepthBufferEnabled&&i.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),this._withSAO?(i.push("   float viewportWidth     = uSAOParams[0];"),i.push("   float viewportHeight    = uSAOParams[1];"),i.push("   float blendCutoff       = uSAOParams[2];"),i.push("   float blendFactor       = uSAOParams[3];"),i.push("   vec2 uv                 = vec2(gl_FragCoord.x / viewportWidth, gl_FragCoord.y / viewportHeight);"),i.push("   float ambient           = smoothstep(blendCutoff, 1.0, unpackRGBToFloat(texture(uOcclusionTexture, uv))) * blendFactor;"),i.push("   outColor                = vec4(vColor.rgb * ambient, 1.0);")):i.push("    outColor           = vColor;"),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Da=p.vec4(),ba=p.vec3();class Ra{constructor(e,t){this._scene=e,this._withSAO=t,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){const e=this._scene;return[e._lightsState.getHash(),e._sectionPlanesState.getHash(),this._withSAO?"sao":"nosao"].join(";")}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=a.geometry,h=t._state.origin;if(!this._program&&(this._allocate(),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram(e)),n.uniform1i(this._uRenderPass,s),n.uniformMatrix4fv(this._uViewMatrix,!1,h?j(o.viewMatrix,h):o.viewMatrix),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix);const c=r._sectionPlanesState.sectionPlanes.length;if(c>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*c,o=i.renderFlags;for(let t=0;t<c;t++){const i=this._uSectionPlanes[t],r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(h){const e=W(s.dist,s.dir,h,ba);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,l.positionsDecodeMatrix),this._aModelMatrixCol0.bindArrayBuffer(a.modelMatrixCol0Buf),this._aModelMatrixCol1.bindArrayBuffer(a.modelMatrixCol1Buf),this._aModelMatrixCol2.bindArrayBuffer(a.modelMatrixCol2Buf),n.vertexAttribDivisor(this._aModelMatrixCol0.location,1),n.vertexAttribDivisor(this._aModelMatrixCol1.location,1),n.vertexAttribDivisor(this._aModelMatrixCol2.location,1),this._aPosition.bindArrayBuffer(l.positionsBuf),this._aColor.bindArrayBuffer(a.colorsBuf),n.vertexAttribDivisor(this._aColor.location,1),this._aFlags.bindArrayBuffer(a.flagsBuf),n.vertexAttribDivisor(this._aFlags.location,1),this._aOffset&&(this._aOffset.bindArrayBuffer(a.offsetsBuf),n.vertexAttribDivisor(this._aOffset.location,1)),l.indicesBuf.bind(),n.drawElementsInstanced(n.TRIANGLES,l.indicesBuf.numItems,l.indicesBuf.itemType,0,a.numInstances),n.vertexAttribDivisor(this._aModelMatrixCol0.location,0),n.vertexAttribDivisor(this._aModelMatrixCol1.location,0),n.vertexAttribDivisor(this._aModelMatrixCol2.location,0),n.vertexAttribDivisor(this._aColor.location,0),n.vertexAttribDivisor(this._aFlags.location,0),this._aOffset&&n.vertexAttribDivisor(this._aOffset.location,0)}_allocate(){const e=this._scene,t=e.canvas.gl,s=e._lightsState;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uRenderPass=i.getLocation("renderPass"),this._uPositionsDecodeMatrix=i.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=i.getLocation("worldMatrix"),this._uViewMatrix=i.getLocation("viewMatrix"),this._uProjMatrix=i.getLocation("projMatrix"),this._uLightAmbient=i.getLocation("lightAmbient"),this._uLightColor=[],this._uLightDir=[],this._uLightPos=[],this._uLightAttenuation=[];const r=s.lights;let o;for(let e=0,t=r.length;e<t;e++)switch(o=r[e],o.type){case"dir":this._uLightColor[e]=i.getLocation("lightColor"+e),this._uLightPos[e]=null,this._uLightDir[e]=i.getLocation("lightDir"+e);break;case"point":this._uLightColor[e]=i.getLocation("lightColor"+e),this._uLightPos[e]=i.getLocation("lightPos"+e),this._uLightDir[e]=null,this._uLightAttenuation[e]=i.getLocation("lightAttenuation"+e);break;case"spot":this._uLightColor[e]=i.getLocation("lightColor"+e),this._uLightPos[e]=i.getLocation("lightPos"+e),this._uLightDir[e]=i.getLocation("lightDir"+e),this._uLightAttenuation[e]=i.getLocation("lightAttenuation"+e)}this._uSectionPlanes=[];for(let t=0,s=e._sectionPlanesState.sectionPlanes.length;t<s;t++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+t),pos:i.getLocation("sectionPlanePos"+t),dir:i.getLocation("sectionPlaneDir"+t)});this._aPosition=i.getAttribute("position"),this._aColor=i.getAttribute("color"),this._aFlags=i.getAttribute("flags"),this._aOffset=i.getAttribute("offset"),this._aModelMatrixCol0=i.getAttribute("modelMatrixCol0"),this._aModelMatrixCol1=i.getAttribute("modelMatrixCol1"),this._aModelMatrixCol2=i.getAttribute("modelMatrixCol2"),this._uOcclusionTexture="uOcclusionTexture",this._uSAOParams=i.getLocation("uSAOParams"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=i.getLocation("logDepthBufFC"))}_bindProgram(e){const t=this._scene,s=t.canvas.gl,i=t._lightsState.lights,r=t.camera.project;this._program.bind(),s.uniformMatrix4fv(this._uProjMatrix,!1,r.matrix),this._uLightAmbient&&s.uniform4fv(this._uLightAmbient,t._lightsState.getAmbientColorAndIntensity());for(let e=0,t=i.length;e<t;e++){const t=i[e];this._uLightColor[e]&&s.uniform4f(this._uLightColor[e],t.color[0],t.color[1],t.color[2],t.intensity),this._uLightPos[e]&&(s.uniform3fv(this._uLightPos[e],t.pos),this._uLightAttenuation[e]&&s.uniform1f(this._uLightAttenuation[e],t.attenuation)),this._uLightDir[e]&&s.uniform3fv(this._uLightDir[e],t.dir)}if(this._withSAO){const i=t.sao;if(i.possible){const t=s.drawingBufferWidth,r=s.drawingBufferHeight;Da[0]=t,Da[1]=r,Da[2]=i.blendCutoff,Da[3]=i.blendFactor,s.uniform4fv(this._uSAOParams,Da),this._program.bindTexture(this._uOcclusionTexture,e.occlusionTexture,0)}}if(t.logarithmicDepthBufferEnabled){const e=2/(Math.log(r.far+1)/Math.LN2);s.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Instancing geometry flat-shading drawing vertex shader"),s.push("uniform int renderPass;"),s.push("in vec3 position;"),s.push("in vec4 color;"),s.push("in float flags;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("in vec4 modelMatrixCol0;"),s.push("in vec4 modelMatrixCol1;"),s.push("in vec4 modelMatrixCol2;"),s.push("uniform mat4 worldMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("out float isPerspective;")),t&&(s.push("out vec4 vWorldPosition;"),s.push("out float vFlags;")),s.push("out vec4 vViewPosition;"),s.push("out vec4 vColor;"),s.push("void main(void) {"),s.push("int colorFlag = int(flags) & 0xF;"),s.push("if (colorFlag != renderPass) {"),s.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("} else {"),s.push("vec4 worldPosition =  positionsDecodeMatrix * vec4(position, 1.0); "),s.push("worldPosition = worldMatrix * vec4(dot(worldPosition, modelMatrixCol0), dot(worldPosition, modelMatrixCol1), dot(worldPosition, modelMatrixCol2), 1.0);"),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("vec4 viewPosition  = viewMatrix * worldPosition; "),s.push("vViewPosition = viewPosition;"),s.push("vColor = vec4(float(color.r) / 255.0, float(color.g) / 255.0, float(color.b) / 255.0, float(color.a) / 255.0);"),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),t&&(s.push("vWorldPosition = worldPosition;"),s.push("vFlags = flags;")),s.push("gl_Position = clipPos;"),s.push("}"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=e._lightsState;let i,r;const o=t.sectionPlanes.length>0,n=[];if(n.push("#version 300 es"),n.push("// Instancing geometry flat-shading drawing fragment shader"),n.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),n.push("precision highp float;"),n.push("precision highp int;"),n.push("#else"),n.push("precision mediump float;"),n.push("precision mediump int;"),n.push("#endif"),e.logarithmicDepthBufferEnabled&&(n.push("in float isPerspective;"),n.push("uniform float logDepthBufFC;"),n.push("in float vFragDepth;")),this._withSAO&&(n.push("uniform sampler2D uOcclusionTexture;"),n.push("uniform vec4      uSAOParams;"),n.push("const float       packUpscale = 256. / 255.;"),n.push("const float       unpackDownScale = 255. / 256.;"),n.push("const vec3        packFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );"),n.push("const vec4        unPackFactors = unpackDownScale / vec4( packFactors, 1. );"),n.push("float unpackRGBToFloat( const in vec4 v ) {"),n.push("    return dot( v, unPackFactors );"),n.push("}")),o){n.push("in vec4 vWorldPosition;"),n.push("in float vFlags;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)n.push("uniform bool sectionPlaneActive"+e+";"),n.push("uniform vec3 sectionPlanePos"+e+";"),n.push("uniform vec3 sectionPlaneDir"+e+";")}for(n.push("uniform mat4 viewMatrix;"),n.push("uniform vec4 lightAmbient;"),i=0,r=s.lights.length;i<r;i++){const e=s.lights[i];"ambient"!==e.type&&(n.push("uniform vec4 lightColor"+i+";"),"dir"===e.type&&n.push("uniform vec3 lightDir"+i+";"),"point"===e.type&&n.push("uniform vec3 lightPos"+i+";"),"spot"===e.type&&(n.push("uniform vec3 lightPos"+i+";"),n.push("uniform vec3 lightDir"+i+";")))}if(n.push("in vec4 vViewPosition;"),n.push("in vec4 vColor;"),n.push("out vec4 outColor;"),n.push("void main(void) {"),o){n.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),n.push("  if (clippable) {"),n.push("  float dist = 0.0;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)n.push("if (sectionPlaneActive"+e+") {"),n.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),n.push("}");n.push("  if (dist > 0.0) { "),n.push("      discard;"),n.push("  }"),n.push("}")}for(n.push("vec3 reflectedColor = vec3(0.0, 0.0, 0.0);"),n.push("vec3 viewLightDir = vec3(0.0, 0.0, -1.0);"),n.push("float lambertian = 1.0;"),n.push("vec3 xTangent = dFdx( vViewPosition.xyz );"),n.push("vec3 yTangent = dFdy( vViewPosition.xyz );"),n.push("vec3 viewNormal = normalize( cross( xTangent, yTangent ) );"),i=0,r=s.lights.length;i<r;i++){const e=s.lights[i];if("ambient"!==e.type){if("dir"===e.type)"view"===e.space?n.push("viewLightDir = normalize(lightDir"+i+");"):n.push("viewLightDir = normalize((viewMatrix * vec4(lightDir"+i+", 0.0)).xyz);");else if("point"===e.type)"view"===e.space?n.push("viewLightDir = -normalize(lightPos"+i+" - viewPosition.xyz);"):n.push("viewLightDir = -normalize((viewMatrix * vec4(lightPos"+i+", 0.0)).xyz);");else{if("spot"!==e.type)continue;"view"===e.space?n.push("viewLightDir = normalize(lightDir"+i+");"):n.push("viewLightDir = normalize((viewMatrix * vec4(lightDir"+i+", 0.0)).xyz);")}n.push("lambertian = max(dot(-viewNormal, viewLightDir), 0.0);"),n.push("reflectedColor += lambertian * (lightColor"+i+".rgb * lightColor"+i+".a);")}}return n.push("vec4 fragColor = vec4((lightAmbient.rgb * lightAmbient.a * vColor.rgb) + (reflectedColor * vColor.rgb), vColor.a);"),this._withSAO?(n.push("   float viewportWidth     = uSAOParams[0];"),n.push("   float viewportHeight    = uSAOParams[1];"),n.push("   float blendCutoff       = uSAOParams[2];"),n.push("   float blendFactor       = uSAOParams[3];"),n.push("   vec2 uv                 = vec2(gl_FragCoord.x / viewportWidth, gl_FragCoord.y / viewportHeight);"),n.push("   float ambient           = smoothstep(blendCutoff, 1.0, unpackRGBToFloat(texture(uOcclusionTexture, uv))) * blendFactor;"),n.push("   outColor            = vec4(fragColor.rgb * ambient, 1.0);")):n.push("    outColor           = fragColor;"),e.logarithmicDepthBufferEnabled&&n.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),n.push("}"),n}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Ca=p.vec3();class xa{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=a.geometry,h=t._state.origin;if(!this._program&&(this._allocate(t.model.scene),this.errors))return;if(e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),n.uniform1i(this._uRenderPass,s),s===hn){const e=r.xrayMaterial._state,t=e.fillColor,s=e.fillAlpha;n.uniform4f(this._uSilhouetteColor,t[0],t[1],t[2],s)}else if(s===an){const e=r.highlightMaterial._state,t=e.fillColor,s=e.fillAlpha;n.uniform4f(this._uSilhouetteColor,t[0],t[1],t[2],s)}else if(s===ln){const e=r.selectedMaterial._state,t=e.fillColor,s=e.fillAlpha;n.uniform4f(this._uSilhouetteColor,t[0],t[1],t[2],s)}else n.uniform4fv(this._uSilhouetteColor,p.vec3([1,1,1]));n.uniformMatrix4fv(this._uViewMatrix,!1,h?j(o.viewMatrix,h):o.viewMatrix),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix);const c=r._sectionPlanesState.sectionPlanes.length;if(c>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*c,o=i.renderFlags;for(let t=0;t<c;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(h){const e=W(s.dist,s.dir,h,Ca);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,l.positionsDecodeMatrix),this._aModelMatrixCol0.bindArrayBuffer(a.modelMatrixCol0Buf),this._aModelMatrixCol1.bindArrayBuffer(a.modelMatrixCol1Buf),this._aModelMatrixCol2.bindArrayBuffer(a.modelMatrixCol2Buf),n.vertexAttribDivisor(this._aModelMatrixCol0.location,1),n.vertexAttribDivisor(this._aModelMatrixCol1.location,1),n.vertexAttribDivisor(this._aModelMatrixCol2.location,1),this._aPosition.bindArrayBuffer(l.positionsBuf),this._aFlags.bindArrayBuffer(a.flagsBuf,n.UNSIGNED_BYTE,!0),n.vertexAttribDivisor(this._aFlags.location,1),this._aOffset&&(this._aOffset.bindArrayBuffer(a.offsetsBuf),n.vertexAttribDivisor(this._aOffset.location,1)),this._aColor&&(this._aColor.bindArrayBuffer(a.colorsBuf),n.vertexAttribDivisor(this._aColor.location,1)),l.indicesBuf.bind(),n.drawElementsInstanced(n.TRIANGLES,l.indicesBuf.numItems,l.indicesBuf.itemType,0,a.numInstances),n.vertexAttribDivisor(this._aModelMatrixCol0.location,0),n.vertexAttribDivisor(this._aModelMatrixCol1.location,0),n.vertexAttribDivisor(this._aModelMatrixCol2.location,0),n.vertexAttribDivisor(this._aFlags.location,0),this._aOffset&&n.vertexAttribDivisor(this._aOffset.location,0),this._aColor&&n.vertexAttribDivisor(this._aColor.location,0)}_allocate(){const e=this._scene,t=e.canvas.gl,s=e._sectionPlanesState;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uRenderPass=i.getLocation("renderPass"),this._uPositionsDecodeMatrix=i.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=i.getLocation("worldMatrix"),this._uViewMatrix=i.getLocation("viewMatrix"),this._uProjMatrix=i.getLocation("projMatrix"),this._uSilhouetteColor=i.getLocation("silhouetteColor"),this._uSectionPlanes=[];for(let e=0,t=s.sectionPlanes.length;e<t;e++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+e),pos:i.getLocation("sectionPlanePos"+e),dir:i.getLocation("sectionPlaneDir"+e)});this._aPosition=i.getAttribute("position"),this._aOffset=i.getAttribute("offset"),this._aFlags=i.getAttribute("flags"),this._aColor=i.getAttribute("color"),this._aModelMatrixCol0=i.getAttribute("modelMatrixCol0"),this._aModelMatrixCol1=i.getAttribute("modelMatrixCol1"),this._aModelMatrixCol2=i.getAttribute("modelMatrixCol2"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=i.getLocation("logDepthBufFC"))}_bindProgram(){const e=this._scene,t=e.canvas.gl,s=e.camera.project;if(this._program.bind(),t.uniformMatrix4fv(this._uProjMatrix,!1,s.matrix),e.logarithmicDepthBufferEnabled){const e=2/(Math.log(s.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Instancing silhouette vertex shader"),s.push("uniform int renderPass;"),s.push("in vec3 position;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("in float flags;"),s.push("in vec4 color;"),s.push("in vec4 modelMatrixCol0;"),s.push("in vec4 modelMatrixCol1;"),s.push("in vec4 modelMatrixCol2;"),s.push("uniform mat4 worldMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),s.push("uniform vec4 silhouetteColor;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("out float isPerspective;")),t&&(s.push("out vec4 vWorldPosition;"),s.push("out float vFlags;")),s.push("out vec4 vColor;"),s.push("void main(void) {"),s.push("int silhouetteFlag = int(flags) >> 4 & 0xF;"),s.push("if (silhouetteFlag != renderPass) {"),s.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("} else {"),s.push("vec4 worldPosition = positionsDecodeMatrix * vec4(position, 1.0); "),s.push("worldPosition = worldMatrix * vec4(dot(worldPosition, modelMatrixCol0), dot(worldPosition, modelMatrixCol1), dot(worldPosition, modelMatrixCol2), 1.0);"),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("vec4 viewPosition  = viewMatrix * worldPosition; "),t&&(s.push("vWorldPosition = worldPosition;"),s.push("vFlags = flags;")),s.push("vColor = vec4(silhouetteColor.r, silhouetteColor.g, silhouetteColor.b, min(silhouetteColor.a, float(color.a) / 255.0));"),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),s.push("gl_Position = clipPos;"),s.push("}"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Instancing fill fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("in float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("in vec4 vColor;"),i.push("out vec4 outColor;"),i.push("void main(void) {"),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("  float dist = 0.0;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("if (sectionPlaneActive"+e+") {"),i.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("}");i.push("if (dist > 0.0) { discard; }"),i.push("}")}return e.logarithmicDepthBufferEnabled&&i.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("outColor = vColor;"),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Na=p.vec3(),Oa=new Float32Array([0,0,0,1]);class Sa{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=a.geometry,h=t._state.origin;if(!this._program&&(this._allocate(t),this.errors))return;if(e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),n.uniform1i(this._uRenderPass,s),s===dn){const e=r.xrayMaterial._state,t=e.edgeColor,s=e.edgeAlpha;n.uniform4f(this._uColor,t[0],t[1],t[2],s)}else if(s===An){const e=r.highlightMaterial._state,t=e.edgeColor,s=e.edgeAlpha;n.uniform4f(this._uColor,t[0],t[1],t[2],s)}else if(s===pn){const e=r.selectedMaterial._state,t=e.edgeColor,s=e.edgeAlpha;n.uniform4f(this._uColor,t[0],t[1],t[2],s)}else n.uniform4fv(this._uColor,Oa);n.uniformMatrix4fv(this._uViewMatrix,!1,h?j(o.viewMatrix,h):o.viewMatrix),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix);const c=r._sectionPlanesState.sectionPlanes.length;if(c>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*c,o=i.renderFlags;for(let t=0;t<c;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(h){const e=W(s.dist,s.dir,h,Na);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,l.positionsDecodeMatrix),this._aModelMatrixCol0.bindArrayBuffer(a.modelMatrixCol0Buf),this._aModelMatrixCol1.bindArrayBuffer(a.modelMatrixCol1Buf),this._aModelMatrixCol2.bindArrayBuffer(a.modelMatrixCol2Buf),n.vertexAttribDivisor(this._aModelMatrixCol0.location,1),n.vertexAttribDivisor(this._aModelMatrixCol1.location,1),n.vertexAttribDivisor(this._aModelMatrixCol2.location,1),this._aPosition.bindArrayBuffer(l.positionsBuf),this._aFlags&&(this._aFlags.bindArrayBuffer(a.flagsBuf,n.UNSIGNED_BYTE,!0),n.vertexAttribDivisor(this._aFlags.location,1)),this._aOffset&&(this._aOffset.bindArrayBuffer(a.offsetsBuf),n.vertexAttribDivisor(this._aOffset.location,1)),l.edgeIndicesBuf.bind(),n.drawElementsInstanced(n.LINES,l.edgeIndicesBuf.numItems,l.edgeIndicesBuf.itemType,0,a.numInstances),n.vertexAttribDivisor(this._aModelMatrixCol0.location,0),n.vertexAttribDivisor(this._aModelMatrixCol1.location,0),n.vertexAttribDivisor(this._aModelMatrixCol2.location,0),this._aOffset&&n.vertexAttribDivisor(this._aOffset.location,0),this._aFlags&&n.vertexAttribDivisor(this._aFlags.location,0)}_allocate(){const e=this._scene,t=e.canvas.gl,s=e._sectionPlanesState;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uRenderPass=i.getLocation("renderPass"),this._uColor=i.getLocation("color"),this._uPositionsDecodeMatrix=i.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=i.getLocation("worldMatrix"),this._uViewMatrix=i.getLocation("viewMatrix"),this._uProjMatrix=i.getLocation("projMatrix"),this._uSectionPlanes=[];for(let e=0,t=s.sectionPlanes.length;e<t;e++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+e),pos:i.getLocation("sectionPlanePos"+e),dir:i.getLocation("sectionPlaneDir"+e)});this._aPosition=i.getAttribute("position"),this._aOffset=i.getAttribute("offset"),this._aFlags=i.getAttribute("flags"),this._aModelMatrixCol0=i.getAttribute("modelMatrixCol0"),this._aModelMatrixCol1=i.getAttribute("modelMatrixCol1"),this._aModelMatrixCol2=i.getAttribute("modelMatrixCol2"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=i.getLocation("logDepthBufFC"))}_bindProgram(){const e=this._scene,t=e.canvas.gl,s=e.camera.project;if(this._program.bind(),t.uniformMatrix4fv(this._uProjMatrix,!1,s.matrix),e.logarithmicDepthBufferEnabled){const e=2/(Math.log(s.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Triangles instancing edges vertex shader"),s.push("uniform int renderPass;"),s.push("uniform vec4 color;"),s.push("in vec3 position;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("in float flags;"),s.push("in vec4 modelMatrixCol0;"),s.push("in vec4 modelMatrixCol1;"),s.push("in vec4 modelMatrixCol2;"),s.push("uniform mat4 worldMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("out float isPerspective;")),t&&(s.push("out vec4 vWorldPosition;"),s.push("out float vFlags;")),s.push("out vec4 vColor;"),s.push("void main(void) {"),s.push("int edgeFlag = int(flags) >> 8 & 0xF;"),s.push("if (edgeFlag != renderPass) {"),s.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("} else {"),s.push("vec4 worldPosition = positionsDecodeMatrix * vec4(position, 1.0); "),s.push("worldPosition = worldMatrix * vec4(dot(worldPosition, modelMatrixCol0), dot(worldPosition, modelMatrixCol1), dot(worldPosition, modelMatrixCol2), 1.0);"),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("vec4 viewPosition  = viewMatrix * worldPosition; "),t&&(s.push("vWorldPosition = worldPosition;"),s.push("vFlags = flags;")),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),s.push("gl_Position = clipPos;"),s.push("vColor = vec4(color.r, color.g, color.b, color.a);"),s.push("}"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Batched geometry edges drawing fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("in float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("in vec4 vColor;"),i.push("out vec4 outColor;"),i.push("void main(void) {"),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("  float dist = 0.0;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("if (sectionPlaneActive"+e+") {"),i.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("}");i.push("  if (dist > 0.0) { discard; }"),i.push("}")}return e.logarithmicDepthBufferEnabled&&i.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("outColor = vColor;"),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const wa=p.vec3();class Ma{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=a.geometry,h=t._state.origin;if(!this._program&&(this._allocate(t),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),n.uniform1i(this._uRenderPass,s),n.uniformMatrix4fv(this._uViewMatrix,!1,h?j(o.viewMatrix,h):o.viewMatrix),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix);const c=r._sectionPlanesState.sectionPlanes.length;if(c>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*c,o=i.renderFlags;for(let t=0;t<c;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(h){const e=W(s.dist,s.dir,h,wa);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,l.positionsDecodeMatrix),this._aModelMatrixCol0.bindArrayBuffer(a.modelMatrixCol0Buf),this._aModelMatrixCol1.bindArrayBuffer(a.modelMatrixCol1Buf),this._aModelMatrixCol2.bindArrayBuffer(a.modelMatrixCol2Buf),n.vertexAttribDivisor(this._aModelMatrixCol0.location,1),n.vertexAttribDivisor(this._aModelMatrixCol1.location,1),n.vertexAttribDivisor(this._aModelMatrixCol2.location,1),this._aPosition.bindArrayBuffer(l.positionsBuf),this._aColor.bindArrayBuffer(a.colorsBuf),n.vertexAttribDivisor(this._aColor.location,1),this._aFlags&&(this._aFlags.bindArrayBuffer(a.flagsBuf,n.UNSIGNED_BYTE,!0),n.vertexAttribDivisor(this._aFlags.location,1)),this._aOffset&&(this._aOffset.bindArrayBuffer(a.offsetsBuf),n.vertexAttribDivisor(this._aOffset.location,1)),l.edgeIndicesBuf.bind(),n.drawElementsInstanced(n.LINES,l.edgeIndicesBuf.numItems,l.edgeIndicesBuf.itemType,0,a.numInstances),n.vertexAttribDivisor(this._aModelMatrixCol0.location,0),n.vertexAttribDivisor(this._aModelMatrixCol1.location,0),n.vertexAttribDivisor(this._aModelMatrixCol2.location,0),n.vertexAttribDivisor(this._aColor.location,0),this._aOffset&&n.vertexAttribDivisor(this._aOffset.location,0),this._aFlags&&n.vertexAttribDivisor(this._aFlags.location,0)}_allocate(){const e=this._scene,t=e.canvas.gl,s=e._sectionPlanesState;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uRenderPass=i.getLocation("renderPass"),this._uPositionsDecodeMatrix=i.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=i.getLocation("worldMatrix"),this._uViewMatrix=i.getLocation("viewMatrix"),this._uProjMatrix=i.getLocation("projMatrix"),this._uSectionPlanes=[];for(let e=0,t=s.sectionPlanes.length;e<t;e++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+e),pos:i.getLocation("sectionPlanePos"+e),dir:i.getLocation("sectionPlaneDir"+e)});this._aPosition=i.getAttribute("position"),this._aColor=i.getAttribute("color"),this._aOffset=i.getAttribute("offset"),this._aFlags=i.getAttribute("flags"),this._aModelMatrixCol0=i.getAttribute("modelMatrixCol0"),this._aModelMatrixCol1=i.getAttribute("modelMatrixCol1"),this._aModelMatrixCol2=i.getAttribute("modelMatrixCol2"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=i.getLocation("logDepthBufFC"))}_bindProgram(){const e=this._scene,t=e.canvas.gl,s=e.camera.project;if(this._program.bind(),t.uniformMatrix4fv(this._uProjMatrix,!1,s.matrix),e.logarithmicDepthBufferEnabled){const e=2/(Math.log(s.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Triangles instancing edges vertex shader"),s.push("uniform int renderPass;"),s.push("in vec3 position;"),s.push("in vec4 color;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("in float flags;"),s.push("in vec4 modelMatrixCol0;"),s.push("in vec4 modelMatrixCol1;"),s.push("in vec4 modelMatrixCol2;"),s.push("uniform mat4 worldMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("out float isPerspective;")),t&&(s.push("out vec4 vWorldPosition;"),s.push("out float vFlags;")),s.push("out vec4 vColor;"),s.push("void main(void) {"),s.push("int edgeFlag = int(flags) >> 8 & 0xF;"),s.push("if (edgeFlag != renderPass) {"),s.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("} else {"),s.push("vec4 worldPosition = positionsDecodeMatrix * vec4(position, 1.0); "),s.push("worldPosition = worldMatrix * vec4(dot(worldPosition, modelMatrixCol0), dot(worldPosition, modelMatrixCol1), dot(worldPosition, modelMatrixCol2), 1.0);"),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("vec4 viewPosition  = viewMatrix * worldPosition; "),t&&(s.push("vWorldPosition = worldPosition;"),s.push("vFlags = flags;")),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),s.push("gl_Position = clipPos;"),s.push("vColor = vec4(float(color.r*0.5) / 255.0, float(color.g*0.5) / 255.0, float(color.b*0.5) / 255.0, float(color.a) / 255.0);"),s.push("}"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Batched geometry edges drawing fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("in float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("in vec4 vColor;"),i.push("out vec4 outColor;"),i.push("void main(void) {"),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("  float dist = 0.0;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("if (sectionPlaneActive"+e+") {"),i.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("}");i.push("  if (dist > 0.0) { discard; }"),i.push("}")}return e.logarithmicDepthBufferEnabled&&i.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("outColor = vColor;"),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Ba=p.vec3();class Fa{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=a.geometry,h=t._state.origin;if(!this._program&&(this._allocate(),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram(e)),n.uniform1i(this._uRenderPass,s);const c=e.pickViewMatrix||o.viewMatrix,u=h?j(c,h):c;if(n.uniformMatrix4fv(this._uViewMatrix,!1,u),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix),n.uniformMatrix4fv(this._uProjMatrix,!1,e.pickProjMatrix),r.logarithmicDepthBufferEnabled){const e=2/(Math.log(o.project.far+1)/Math.LN2);n.uniform1f(this._uLogDepthBufFC,e)}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,l.positionsDecodeMatrix),this._aModelMatrixCol0.bindArrayBuffer(a.modelMatrixCol0Buf),this._aModelMatrixCol1.bindArrayBuffer(a.modelMatrixCol1Buf),this._aModelMatrixCol2.bindArrayBuffer(a.modelMatrixCol2Buf),n.vertexAttribDivisor(this._aModelMatrixCol0.location,1),n.vertexAttribDivisor(this._aModelMatrixCol1.location,1),n.vertexAttribDivisor(this._aModelMatrixCol2.location,1),this._aPickColor.bindArrayBuffer(a.pickColorsBuf),n.vertexAttribDivisor(this._aPickColor.location,1),this._aPosition.bindArrayBuffer(l.positionsBuf),this._aFlags.bindArrayBuffer(a.flagsBuf),n.vertexAttribDivisor(this._aFlags.location,1),this._aOffset&&(this._aOffset.bindArrayBuffer(a.offsetsBuf),n.vertexAttribDivisor(this._aOffset.location,1)),l.indicesBuf.bind();const A=r._sectionPlanesState.sectionPlanes.length;if(A>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*A,o=i.renderFlags;for(let t=0;t<A;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(h){const e=W(s.dist,s.dir,h,Ba);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}n.drawElementsInstanced(n.TRIANGLES,l.indicesBuf.numItems,l.indicesBuf.itemType,0,a.numInstances),n.vertexAttribDivisor(this._aModelMatrixCol0.location,0),n.vertexAttribDivisor(this._aModelMatrixCol1.location,0),n.vertexAttribDivisor(this._aModelMatrixCol2.location,0),n.vertexAttribDivisor(this._aPickColor.location,0),n.vertexAttribDivisor(this._aFlags.location,0),this._aOffset&&n.vertexAttribDivisor(this._aOffset.location,0)}_allocate(){const e=this._scene,t=e.canvas.gl,s=e._sectionPlanesState;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uPickInvisible=i.getLocation("pickInvisible"),this._uPositionsDecodeMatrix=i.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=i.getLocation("worldMatrix"),this._uViewMatrix=i.getLocation("viewMatrix"),this._uProjMatrix=i.getLocation("projMatrix"),this._uSectionPlanes=[];for(let e=0,t=s.sectionPlanes.length;e<t;e++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+e),pos:i.getLocation("sectionPlanePos"+e),dir:i.getLocation("sectionPlaneDir"+e)});this._uRenderPass=i.getLocation("renderPass"),this._aPosition=i.getAttribute("position"),this._aOffset=i.getAttribute("offset"),this._aPickColor=i.getAttribute("pickColor"),this._aFlags=i.getAttribute("flags"),this._aModelMatrixCol0=i.getAttribute("modelMatrixCol0"),this._aModelMatrixCol1=i.getAttribute("modelMatrixCol1"),this._aModelMatrixCol2=i.getAttribute("modelMatrixCol2"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=i.getLocation("logDepthBufFC"))}_bindProgram(e){const t=this._scene.canvas.gl;this._program.bind(),t.uniform1i(this._uPickInvisible,e.pickInvisible)}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Instancing geometry picking vertex shader"),s.push("uniform int renderPass;"),s.push("in vec3 position;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("in float flags;"),s.push("in vec4 pickColor;"),s.push("in vec4 modelMatrixCol0;"),s.push("in vec4 modelMatrixCol1;"),s.push("in vec4 modelMatrixCol2;"),s.push("uniform bool pickInvisible;"),s.push("uniform mat4 worldMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("out float isPerspective;")),t&&(s.push("out vec4 vWorldPosition;"),s.push("out float vFlags;")),s.push("out vec4 vPickColor;"),s.push("void main(void) {"),s.push("int pickFlag = int(flags) >> 12 & 0xF;"),s.push("if (pickFlag != renderPass) {"),s.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("} else {"),s.push("  vec4 worldPosition = positionsDecodeMatrix * vec4(position, 1.0); "),s.push("  worldPosition = worldMatrix * vec4(dot(worldPosition, modelMatrixCol0), dot(worldPosition, modelMatrixCol1), dot(worldPosition, modelMatrixCol2), 1.0);"),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("  vec4 viewPosition  = viewMatrix * worldPosition; "),s.push("  vPickColor = vec4(float(pickColor.r) / 255.0, float(pickColor.g) / 255.0, float(pickColor.b) / 255.0, float(pickColor.a) / 255.0);"),t&&(s.push("  vWorldPosition = worldPosition;"),s.push("  vFlags = flags;")),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),s.push("gl_Position = clipPos;"),s.push("}"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Batched geometry picking fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("in float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(let e=0;e<t.sectionPlanes.length;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("in vec4 vPickColor;"),i.push("out vec4 outColor;"),i.push("void main(void) {"),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("  float dist = 0.0;");for(let e=0;e<t.sectionPlanes.length;e++)i.push("if (sectionPlaneActive"+e+") {"),i.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("}");i.push("if (dist > 0.0) { discard; }"),i.push("}")}return e.logarithmicDepthBufferEnabled&&i.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("outColor = vPickColor; "),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const La=p.vec3();class Ua{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.canvas.gl,n=t._state,a=n.geometry,l=t._state.origin;if(!this._program&&(this._allocate(t),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram());const h=r.camera;o.uniform1i(this._uRenderPass,s),o.uniform1i(this._uPickInvisible,e.pickInvisible);const c=e.pickViewMatrix||h.viewMatrix,u=l?j(c,l):c;if(o.uniformMatrix4fv(this._uViewMatrix,!1,u),o.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix),o.uniformMatrix4fv(this._uProjMatrix,!1,e.pickProjMatrix),o.uniform1f(this._uPickZNear,e.pickZNear),o.uniform1f(this._uPickZFar,e.pickZFar),r.logarithmicDepthBufferEnabled){const t=2/(Math.log(e.pickZFar+1)/Math.LN2);o.uniform1f(this._uLogDepthBufFC,t)}const A=r._sectionPlanesState.sectionPlanes.length;if(A>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*A,n=i.renderFlags;for(let t=0;t<A;t++){const i=this._uSectionPlanes[t];if(i){const r=n.sectionPlanesActivePerLayer[s+t];if(o.uniform1i(i.active,r?1:0),r){const s=e[t];if(l){const e=W(s.dist,s.dir,l,La);o.uniform3fv(i.pos,e)}else o.uniform3fv(i.pos,s.pos);o.uniform3fv(i.dir,s.dir)}}}}o.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,a.positionsDecodeMatrix),this._aModelMatrixCol0.bindArrayBuffer(n.modelMatrixCol0Buf),this._aModelMatrixCol1.bindArrayBuffer(n.modelMatrixCol1Buf),this._aModelMatrixCol2.bindArrayBuffer(n.modelMatrixCol2Buf),o.vertexAttribDivisor(this._aModelMatrixCol0.location,1),o.vertexAttribDivisor(this._aModelMatrixCol1.location,1),o.vertexAttribDivisor(this._aModelMatrixCol2.location,1),this._aPosition.bindArrayBuffer(a.positionsBuf),this._aFlags.bindArrayBuffer(n.flagsBuf),o.vertexAttribDivisor(this._aFlags.location,1),this._aOffset&&(this._aOffset.bindArrayBuffer(n.offsetsBuf),o.vertexAttribDivisor(this._aOffset.location,1)),a.indicesBuf.bind(),o.drawElementsInstanced(o.TRIANGLES,a.indicesBuf.numItems,a.indicesBuf.itemType,0,n.numInstances),o.vertexAttribDivisor(this._aModelMatrixCol0.location,0),o.vertexAttribDivisor(this._aModelMatrixCol1.location,0),o.vertexAttribDivisor(this._aModelMatrixCol2.location,0),o.vertexAttribDivisor(this._aFlags.location,0),this._aOffset&&o.vertexAttribDivisor(this._aOffset.location,0)}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uPickInvisible=s.getLocation("pickInvisible"),this._uPositionsDecodeMatrix=s.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=s.getLocation("worldMatrix"),this._uViewMatrix=s.getLocation("viewMatrix"),this._uProjMatrix=s.getLocation("projMatrix"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});this._aPosition=s.getAttribute("position"),this._aOffset=s.getAttribute("offset"),this._aFlags=s.getAttribute("flags"),this._aModelMatrixCol0=s.getAttribute("modelMatrixCol0"),this._aModelMatrixCol1=s.getAttribute("modelMatrixCol1"),this._aModelMatrixCol2=s.getAttribute("modelMatrixCol2"),this._uPickZNear=s.getLocation("pickZNear"),this._uPickZFar=s.getLocation("pickZFar"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC"))}_bindProgram(){this._program.bind()}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Instancing geometry depth vertex shader"),s.push("uniform int renderPass;"),s.push("in vec3 position;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("in float flags;"),s.push("in vec4 modelMatrixCol0;"),s.push("in vec4 modelMatrixCol1;"),s.push("in vec4 modelMatrixCol2;"),s.push("uniform bool pickInvisible;"),s.push("uniform mat4 worldMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("out float isPerspective;")),t&&(s.push("out vec4 vWorldPosition;"),s.push("out float vFlags;")),s.push("out vec4 vViewPosition;"),s.push("void main(void) {"),s.push("int pickFlag = int(flags) >> 12 & 0xF;"),s.push("if (pickFlag != renderPass) {"),s.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("} else {"),s.push("  vec4 worldPosition = positionsDecodeMatrix * vec4(position, 1.0); "),s.push("  worldPosition = worldMatrix * vec4(dot(worldPosition, modelMatrixCol0), dot(worldPosition, modelMatrixCol1), dot(worldPosition, modelMatrixCol2), 1.0);"),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("  vec4 viewPosition  = viewMatrix * worldPosition; "),t&&(s.push("  vWorldPosition = worldPosition;"),s.push("  vFlags = flags;")),s.push("  vViewPosition = viewPosition;"),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),s.push("gl_Position = clipPos;"),s.push("}"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Batched geometry depth fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("in float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),i.push("uniform float pickZNear;"),i.push("uniform float pickZFar;"),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(let e=0;e<t.sectionPlanes.length;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("in vec4 vViewPosition;"),i.push("vec4 packDepth(const in float depth) {"),i.push("  const vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);"),i.push("  const vec4 bitMask  = vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);"),i.push("  vec4 res = fract(depth * bitShift);"),i.push("  res -= res.xxyz * bitMask;"),i.push("  return res;"),i.push("}"),i.push("out vec4 outColor;"),i.push("void main(void) {"),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("  float dist = 0.0;");for(let e=0;e<t.sectionPlanes.length;e++)i.push("if (sectionPlaneActive"+e+") {"),i.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("}");i.push("if (dist > 0.0) { discard; }"),i.push("}")}return e.logarithmicDepthBufferEnabled&&i.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("    float zNormalizedDepth = abs((pickZNear + vViewPosition.z) / (pickZFar - pickZNear));"),i.push("    outColor = packDepth(zNormalizedDepth); "),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Ha=p.vec3();class Ga{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=a.geometry,h=t._state.origin;if(!this._program&&(this._allocate(t),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),n.uniform1i(this._uRenderPass,s),n.uniform1i(this._uPickInvisible,e.pickInvisible);const c=e.pickViewMatrix||o.viewMatrix,u=h?j(c,h):c;if(n.uniformMatrix4fv(this._uViewMatrix,!1,u),n.uniformMatrix4fv(this._uProjMatrix,!1,e.pickProjMatrix),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix),n.uniformMatrix4fv(this._uWorldNormalMatrix,!1,i.worldNormalMatrix),r.logarithmicDepthBufferEnabled){const e=2/(Math.log(o.project.far+1)/Math.LN2);n.uniform1f(this._uLogDepthBufFC,e)}const A=r._sectionPlanesState.sectionPlanes.length;if(A>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*A,o=i.renderFlags;for(let t=0;t<A;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(h){const e=W(s.dist,s.dir,h,Ha);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,l.positionsDecodeMatrix),this._aModelMatrixCol0.bindArrayBuffer(a.modelMatrixCol0Buf),this._aModelMatrixCol1.bindArrayBuffer(a.modelMatrixCol1Buf),this._aModelMatrixCol2.bindArrayBuffer(a.modelMatrixCol2Buf),n.vertexAttribDivisor(this._aModelMatrixCol0.location,1),n.vertexAttribDivisor(this._aModelMatrixCol1.location,1),n.vertexAttribDivisor(this._aModelMatrixCol2.location,1),this._aModelNormalMatrixCol0.bindArrayBuffer(a.modelNormalMatrixCol0Buf),this._aModelNormalMatrixCol1.bindArrayBuffer(a.modelNormalMatrixCol1Buf),this._aModelNormalMatrixCol2.bindArrayBuffer(a.modelNormalMatrixCol2Buf),n.vertexAttribDivisor(this._aModelNormalMatrixCol0.location,1),n.vertexAttribDivisor(this._aModelNormalMatrixCol1.location,1),n.vertexAttribDivisor(this._aModelNormalMatrixCol2.location,1),this._aPosition.bindArrayBuffer(l.positionsBuf),this._aNormal.bindArrayBuffer(l.normalsBuf),this._aFlags.bindArrayBuffer(a.flagsBuf),n.vertexAttribDivisor(this._aFlags.location,1),this._aOffset&&(this._aOffset.bindArrayBuffer(a.offsetsBuf),n.vertexAttribDivisor(this._aOffset.location,1)),l.indicesBuf.bind(),n.drawElementsInstanced(n.TRIANGLES,l.indicesBuf.numItems,l.indicesBuf.itemType,0,a.numInstances),n.vertexAttribDivisor(this._aModelMatrixCol0.location,0),n.vertexAttribDivisor(this._aModelMatrixCol1.location,0),n.vertexAttribDivisor(this._aModelMatrixCol2.location,0),n.vertexAttribDivisor(this._aModelNormalMatrixCol0.location,0),n.vertexAttribDivisor(this._aModelNormalMatrixCol1.location,0),n.vertexAttribDivisor(this._aModelNormalMatrixCol2.location,0),n.vertexAttribDivisor(this._aFlags.location,0),this._aOffset&&n.vertexAttribDivisor(this._aOffset.location,0)}_allocate(){const e=this._scene,t=e.canvas.gl,s=e._sectionPlanesState;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uRenderPass=i.getLocation("renderPass"),this._uPickInvisible=i.getLocation("pickInvisible"),this._uPositionsDecodeMatrix=i.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=i.getLocation("worldMatrix"),this._uWorldNormalMatrix=i.getLocation("worldNormalMatrix"),this._uViewMatrix=i.getLocation("viewMatrix"),this._uViewNormalMatrix=i.getLocation("viewNormalMatrix"),this._uProjMatrix=i.getLocation("projMatrix"),this._uSectionPlanes=[];for(let e=0,t=s.sectionPlanes.length;e<t;e++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+e),pos:i.getLocation("sectionPlanePos"+e),dir:i.getLocation("sectionPlaneDir"+e)});this._aPosition=i.getAttribute("position"),this._aOffset=i.getAttribute("offset"),this._aNormal=i.getAttribute("normal"),this._aFlags=i.getAttribute("flags"),this._aModelMatrixCol0=i.getAttribute("modelMatrixCol0"),this._aModelMatrixCol1=i.getAttribute("modelMatrixCol1"),this._aModelMatrixCol2=i.getAttribute("modelMatrixCol2"),this._aModelNormalMatrixCol0=i.getAttribute("modelNormalMatrixCol0"),this._aModelNormalMatrixCol1=i.getAttribute("modelNormalMatrixCol1"),this._aModelNormalMatrixCol2=i.getAttribute("modelNormalMatrixCol2"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=i.getLocation("logDepthBufFC"))}_bindProgram(){this._program.bind()}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Instancing geometry normals vertex shader"),s.push("uniform int renderPass;"),s.push("in vec3 position;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("in vec2 normal;"),s.push("in float flags;"),s.push("in vec4 modelMatrixCol0;"),s.push("in vec4 modelMatrixCol1;"),s.push("in vec4 modelMatrixCol2;"),s.push("in vec4 modelNormalMatrixCol0;"),s.push("in vec4 modelNormalMatrixCol1;"),s.push("in vec4 modelNormalMatrixCol2;"),s.push("uniform bool pickInvisible;"),s.push("uniform mat4 worldMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("out float isPerspective;")),s.push("vec3 octDecode(vec2 oct) {"),s.push("    vec3 v = vec3(oct.xy, 1.0 - abs(oct.x) - abs(oct.y));"),s.push("    if (v.z < 0.0) {"),s.push("        v.xy = (1.0 - abs(v.yx)) * vec2(v.x >= 0.0 ? 1.0 : -1.0, v.y >= 0.0 ? 1.0 : -1.0);"),s.push("    }"),s.push("    return normalize(v);"),s.push("}"),t&&(s.push("out vec4 vWorldPosition;"),s.push("out float vFlags;")),s.push("out vec3 vWorldNormal;"),s.push("void main(void) {"),s.push("int pickFlag = int(flags) >> 12 & 0xF;"),s.push("if (pickFlag != renderPass) {"),s.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("} else {"),s.push("  vec4 worldPosition = positionsDecodeMatrix * vec4(position, 1.0); "),s.push("  worldPosition = worldMatrix * vec4(dot(worldPosition, modelMatrixCol0), dot(worldPosition, modelMatrixCol1), dot(worldPosition, modelMatrixCol2), 1.0);"),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("  vec4 viewPosition  = viewMatrix * worldPosition; "),s.push("  vec4 modelNormal = vec4(octDecode(normal.xy), 0.0); "),s.push("  vec3 worldNormal = vec3(dot(modelNormal, modelNormalMatrixCol0), dot(modelNormal, modelNormalMatrixCol1), dot(modelNormal, modelNormalMatrixCol2));"),s.push("  vWorldNormal = worldNormal;"),t&&(s.push("  vWorldPosition = worldPosition;"),s.push("vFlags = flags;")),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),s.push("gl_Position = clipPos;"),s.push("}"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Batched geometry normals fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("in float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(let e=0;e<t.sectionPlanes.length;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("in vec3 vWorldNormal;"),i.push("out vec4 outColor;"),i.push("void main(void) {"),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("  float dist = 0.0;");for(var r=0;r<t.sectionPlanes.length;r++)i.push("if (sectionPlaneActive"+r+") {"),i.push("   dist += clamp(dot(-sectionPlaneDir"+r+".xyz, vWorldPosition.xyz - sectionPlanePos"+r+".xyz), 0.0, 1000.0);"),i.push("}");i.push("if (dist > 0.0) { discard; }"),i.push("}")}return e.logarithmicDepthBufferEnabled&&i.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("    outColor = vec4((vWorldNormal * 0.5) + 0.5, 1.0);"),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Va=p.vec3();class ka{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=a.geometry,h=t._state.origin;if(!this._program&&(this._allocate(),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),n.uniform1i(this._uRenderPass,s),n.uniformMatrix4fv(this._uViewMatrix,!1,h?j(o.viewMatrix,h):o.viewMatrix),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix);const c=r._sectionPlanesState.sectionPlanes.length;if(c>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*c,o=i.renderFlags;for(let t=0;t<c;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(h){const e=W(s.dist,s.dir,h,Va);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,l.positionsDecodeMatrix),this._aModelMatrixCol0.bindArrayBuffer(a.modelMatrixCol0Buf),this._aModelMatrixCol1.bindArrayBuffer(a.modelMatrixCol1Buf),this._aModelMatrixCol2.bindArrayBuffer(a.modelMatrixCol2Buf),n.vertexAttribDivisor(this._aModelMatrixCol0.location,1),n.vertexAttribDivisor(this._aModelMatrixCol1.location,1),n.vertexAttribDivisor(this._aModelMatrixCol2.location,1),this._aColor&&(this._aColor.bindArrayBuffer(a.colorsBuf),n.vertexAttribDivisor(this._aColor.location,1)),this._aPosition.bindArrayBuffer(l.positionsBuf),this._aOffset&&(this._aOffset.bindArrayBuffer(a.offsetsBuf),n.vertexAttribDivisor(this._aOffset.location,1)),this._aFlags.bindArrayBuffer(a.flagsBuf),n.vertexAttribDivisor(this._aFlags.location,1),l.indicesBuf.bind(),n.drawElementsInstanced(n.TRIANGLES,l.indicesBuf.numItems,l.indicesBuf.itemType,0,a.numInstances),n.vertexAttribDivisor(this._aModelMatrixCol0.location,0),n.vertexAttribDivisor(this._aModelMatrixCol1.location,0),n.vertexAttribDivisor(this._aModelMatrixCol2.location,0),this._aColor&&n.vertexAttribDivisor(this._aColor.location,0),n.vertexAttribDivisor(this._aFlags.location,0),this._aOffset&&n.vertexAttribDivisor(this._aOffset.location,0)}_allocate(){const e=this._scene,t=e.canvas.gl,s=e._sectionPlanesState;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uRenderPass=i.getLocation("renderPass"),this._uPositionsDecodeMatrix=i.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=i.getLocation("worldMatrix"),this._uViewMatrix=i.getLocation("viewMatrix"),this._uProjMatrix=i.getLocation("projMatrix"),this._uSectionPlanes=[];for(let e=0,t=s.sectionPlanes.length;e<t;e++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+e),pos:i.getLocation("sectionPlanePos"+e),dir:i.getLocation("sectionPlaneDir"+e)});this._aPosition=i.getAttribute("position"),this._aOffset=i.getAttribute("offset"),this._aColor=i.getAttribute("color"),this._aFlags=i.getAttribute("flags"),this._aModelMatrixCol0=i.getAttribute("modelMatrixCol0"),this._aModelMatrixCol1=i.getAttribute("modelMatrixCol1"),this._aModelMatrixCol2=i.getAttribute("modelMatrixCol2"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=i.getLocation("logDepthBufFC"))}_bindProgram(){const e=this._scene,t=e.canvas.gl,s=e.camera.project;if(this._program.bind(),t.uniformMatrix4fv(this._uProjMatrix,!1,s.matrix),e.logarithmicDepthBufferEnabled){const e=2/(Math.log(s.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Instancing occlusion vertex shader"),s.push("uniform int renderPass;"),s.push("in vec3 position;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("in vec4 color;"),s.push("in float flags;"),s.push("in vec4 modelMatrixCol0;"),s.push("in vec4 modelMatrixCol1;"),s.push("in vec4 modelMatrixCol2;"),s.push("uniform mat4 worldMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("in float isPerspective;")),t&&(s.push("out vec4 vWorldPosition;"),s.push("out float vFlags;")),s.push("void main(void) {"),s.push("int colorFlag = int(flags) & 0xF;"),s.push("if (colorFlag != renderPass) {"),s.push("      gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("} else {"),s.push("  vec4 worldPosition = positionsDecodeMatrix * vec4(position, 1.0); "),s.push("  worldPosition = worldMatrix * vec4(dot(worldPosition, modelMatrixCol0), dot(worldPosition, modelMatrixCol1), dot(worldPosition, modelMatrixCol2), 1.0);"),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("  vec4 viewPosition  = viewMatrix * worldPosition; "),t&&(s.push("  vWorldPosition = worldPosition;"),s.push("vFlags = flags;")),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),s.push("gl_Position = clipPos;"),s.push("}"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Instancing occlusion fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("in float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(let e=0;e<t.sectionPlanes.length;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("out vec4 outColor;"),i.push("void main(void) {"),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("  float dist = 0.0;");for(let e=0;e<t.sectionPlanes.length;e++)i.push("if (sectionPlaneActive"+e+") {"),i.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("}");i.push("if (dist > 0.0) { discard; }"),i.push("}")}return i.push("   outColor = vec4(0.0, 0.0, 1.0, 1.0); "),e.logarithmicDepthBufferEnabled&&i.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const ja=p.vec3();class Qa{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=a.geometry,h=t._state.origin;if(!this._program&&(this._allocate(),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),n.uniform1i(this._uRenderPass,s),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix),n.uniformMatrix4fv(this._uViewMatrix,!1,h?j(o.viewMatrix,h):o.viewMatrix);const c=r._sectionPlanesState.sectionPlanes.length;if(c>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*c,o=i.renderFlags;for(let t=0;t<c;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(h){const e=W(s.dist,s.dir,h,ja);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}this._aModelMatrixCol0.bindArrayBuffer(a.modelMatrixCol0Buf),this._aModelMatrixCol1.bindArrayBuffer(a.modelMatrixCol1Buf),this._aModelMatrixCol2.bindArrayBuffer(a.modelMatrixCol2Buf),n.vertexAttribDivisor(this._aModelMatrixCol0.location,1),n.vertexAttribDivisor(this._aModelMatrixCol1.location,1),n.vertexAttribDivisor(this._aModelMatrixCol2.location,1),n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,l.positionsDecodeMatrix),this._aPosition.bindArrayBuffer(l.positionsBuf),this._aOffset&&(this._aOffset.bindArrayBuffer(a.offsetsBuf),n.vertexAttribDivisor(this._aOffset.location,1)),this._aFlags.bindArrayBuffer(a.flagsBuf),n.vertexAttribDivisor(this._aFlags.location,1),l.indicesBuf.bind(),n.drawElementsInstanced(n.TRIANGLES,l.indicesBuf.numItems,l.indicesBuf.itemType,0,a.numInstances),n.vertexAttribDivisor(this._aModelMatrixCol0.location,0),n.vertexAttribDivisor(this._aModelMatrixCol1.location,0),n.vertexAttribDivisor(this._aModelMatrixCol2.location,0),n.vertexAttribDivisor(this._aFlags.location,0),this._aOffset&&n.vertexAttribDivisor(this._aOffset.location,0)}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uPositionsDecodeMatrix=s.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=s.getLocation("worldMatrix"),this._uViewMatrix=s.getLocation("viewMatrix"),this._uProjMatrix=s.getLocation("projMatrix"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});this._aPosition=s.getAttribute("position"),this._aOffset=s.getAttribute("offset"),this._aFlags=s.getAttribute("flags"),this._aModelMatrixCol0=s.getAttribute("modelMatrixCol0"),this._aModelMatrixCol1=s.getAttribute("modelMatrixCol1"),this._aModelMatrixCol2=s.getAttribute("modelMatrixCol2"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC"))}_bindProgram(){const e=this._scene,t=e.canvas.gl,s=e.camera.project;if(this._program.bind(),t.uniformMatrix4fv(this._uProjMatrix,!1,s.matrix),e.logarithmicDepthBufferEnabled){const e=2/(Math.log(s.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Instancing geometry depth drawing vertex shader"),s.push("uniform int renderPass;"),s.push("in vec3 position;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("in float flags;"),s.push("in vec4 modelMatrixCol0;"),s.push("in vec4 modelMatrixCol1;"),s.push("in vec4 modelMatrixCol2;"),s.push("uniform mat4 worldMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("out float isPerspective;")),t&&(s.push("out vec4 vWorldPosition;"),s.push("out float vFlags;")),s.push("out vec2 vHighPrecisionZW;"),s.push("void main(void) {"),s.push("int colorFlag = int(flags) & 0xF;"),s.push("if (colorFlag != renderPass) {"),s.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("} else {"),s.push("  vec4 worldPosition = positionsDecodeMatrix * vec4(position, 1.0); "),s.push("  worldPosition = worldMatrix * vec4(dot(worldPosition, modelMatrixCol0), dot(worldPosition, modelMatrixCol1), dot(worldPosition, modelMatrixCol2), 1.0);"),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("  vec4 viewPosition  = viewMatrix * worldPosition; "),t&&(s.push("vWorldPosition = worldPosition;"),s.push("vFlags = flags;")),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),s.push("gl_Position = clipPos;"),s.push("vHighPrecisionZW = gl_Position.zw;"),s.push("}"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState;let s,i;const r=t.sectionPlanes.length>0,o=[];if(o.push("#version 300 es"),o.push("// Instancing geometry depth drawing fragment shader"),o.push("precision highp float;"),o.push("precision highp int;"),e.logarithmicDepthBufferEnabled&&(o.push("in float isPerspective;"),o.push("uniform float logDepthBufFC;"),o.push("in float vFragDepth;")),r)for(o.push("in vec4 vWorldPosition;"),o.push("in float vFlags;"),s=0,i=t.sectionPlanes.length;s<i;s++)o.push("uniform bool sectionPlaneActive"+s+";"),o.push("uniform vec3 sectionPlanePos"+s+";"),o.push("uniform vec3 sectionPlaneDir"+s+";");if(o.push("in vec2 vHighPrecisionZW;"),o.push("out vec4 outColor;"),o.push("void main(void) {"),r){for(o.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),o.push("  if (clippable) {"),o.push("  float dist = 0.0;"),s=0,i=t.sectionPlanes.length;s<i;s++)o.push("if (sectionPlaneActive"+s+") {"),o.push("   dist += clamp(dot(-sectionPlaneDir"+s+".xyz, vWorldPosition.xyz - sectionPlanePos"+s+".xyz), 0.0, 1000.0);"),o.push("}");o.push("if (dist > 0.0) { discard; }"),o.push("}")}return e.logarithmicDepthBufferEnabled&&o.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),o.push("float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;"),o.push("    outColor = vec4(vec3(1.0 - fragCoordZ), 1.0); "),o.push("}"),o}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Wa=p.vec3();class za{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=a.geometry,h=t._state.origin;if(!this._program&&(this._allocate(t),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),n.uniform1i(this._uRenderPass,s),n.uniformMatrix4fv(this._uViewMatrix,!1,h?j(o.viewMatrix,h):o.viewMatrix),n.uniformMatrix4fv(this._uViewNormalMatrix,!1,o.viewNormalMatrix),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix),n.uniformMatrix4fv(this._uWorldNormalMatrix,!1,i.worldNormalMatrix);const c=r._sectionPlanesState.sectionPlanes.length;if(c>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*c,o=i.renderFlags;for(let t=0;t<c;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(h){const e=W(s.dist,s.dir,h,Wa);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,l.positionsDecodeMatrix),this._aModelMatrixCol0.bindArrayBuffer(a.modelMatrixCol0Buf),this._aModelMatrixCol1.bindArrayBuffer(a.modelMatrixCol1Buf),this._aModelMatrixCol2.bindArrayBuffer(a.modelMatrixCol2Buf),n.vertexAttribDivisor(this._aModelMatrixCol0.location,1),n.vertexAttribDivisor(this._aModelMatrixCol1.location,1),n.vertexAttribDivisor(this._aModelMatrixCol2.location,1),this._aPosition.bindArrayBuffer(l.positionsBuf),this._aNormal.bindArrayBuffer(l.normalsBuf),this._aOffset&&(this._aOffset.bindArrayBuffer(a.offsetsBuf),n.vertexAttribDivisor(this._aOffset.location,1)),this._aColor.bindArrayBuffer(a.colorsBuf),n.vertexAttribDivisor(this._aColor.location,1),this._aFlags.bindArrayBuffer(a.flagsBuf),n.vertexAttribDivisor(this._aFlags.location,1),l.indicesBuf.bind(),n.drawElementsInstanced(n.TRIANGLES,l.indicesBuf.numItems,l.indicesBuf.itemType,0,a.numInstances),n.vertexAttribDivisor(this._aModelMatrixCol0.location,0),n.vertexAttribDivisor(this._aModelMatrixCol1.location,0),n.vertexAttribDivisor(this._aModelMatrixCol2.location,0),n.vertexAttribDivisor(this._aColor.location,0),n.vertexAttribDivisor(this._aFlags.location,0),this._aOffset&&n.vertexAttribDivisor(this._aOffset.location,0)}_allocate(){const e=this._scene,t=e.canvas.gl,s=e._sectionPlanesState;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uRenderPass=i.getLocation("renderPass"),this._uPositionsDecodeMatrix=i.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=i.getLocation("worldMatrix"),this._uWorldNormalMatrix=i.getLocation("worldNormalMatrix"),this._uViewMatrix=i.getLocation("viewMatrix"),this._uViewNormalMatrix=i.getLocation("viewNormalMatrix"),this._uProjMatrix=i.getLocation("projMatrix"),this._uSectionPlanes=[];for(let e=0,t=s.sectionPlanes.length;e<t;e++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+e),pos:i.getLocation("sectionPlanePos"+e),dir:i.getLocation("sectionPlaneDir"+e)});this._aPosition=i.getAttribute("position"),this._aOffset=i.getAttribute("offset"),this._aNormal=i.getAttribute("normal"),this._aColor=i.getAttribute("color"),this._aFlags=i.getAttribute("flags"),this._aModelMatrixCol0=i.getAttribute("modelMatrixCol0"),this._aModelMatrixCol1=i.getAttribute("modelMatrixCol1"),this._aModelMatrixCol2=i.getAttribute("modelMatrixCol2"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=i.getLocation("logDepthBufFC"))}_bindProgram(){const e=this._scene,t=e.canvas.gl,s=e.camera.project;if(this._program.bind(),t.uniformMatrix4fv(this._uProjMatrix,!1,s.matrix),e.logarithmicDepthBufferEnabled){const e=2/(Math.log(s.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Instancing geometry normals drawing vertex shader"),s.push("uniform int renderPass;"),s.push("in vec3 position;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("in vec3 normal;"),s.push("in vec4 color;"),s.push("in float flags;"),s.push("in vec4 modelMatrixCol0;"),s.push("in vec4 modelMatrixCol1;"),s.push("in vec4 modelMatrixCol2;"),s.push("uniform mat4 worldMatrix;"),s.push("uniform mat4 worldNormalMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),s.push("uniform mat4 viewNormalMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("out float isPerspective;")),s.push("vec3 octDecode(vec2 oct) {"),s.push("    vec3 v = vec3(oct.xy, 1.0 - abs(oct.x) - abs(oct.y));"),s.push("    if (v.z < 0.0) {"),s.push("        v.xy = (1.0 - abs(v.yx)) * vec2(v.x >= 0.0 ? 1.0 : -1.0, v.y >= 0.0 ? 1.0 : -1.0);"),s.push("    }"),s.push("    return normalize(v);"),s.push("}"),t&&(s.push("out vec4 vWorldPosition;"),s.push("out float vFlags;")),s.push("out vec3 vViewNormal;"),s.push("void main(void) {"),s.push("int colorFlag = int(flags) & 0xF;"),s.push("if (colorFlag != renderPass) {"),s.push("      gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("} else {"),s.push("  vec4 worldPosition = positionsDecodeMatrix * vec4(position, 1.0); "),s.push("  worldPosition = worldMatrix * vec4(dot(worldPosition, modelMatrixCol0), dot(worldPosition, modelMatrixCol1), dot(worldPosition, modelMatrixCol2), 1.0);"),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("  vec4 viewPosition  = viewMatrix * worldPosition; "),s.push("  vec4 worldNormal    = worldNormalMatrix * vec4(octDecode(normal.xy), 0.0); "),s.push("  vec3 viewNormal     = normalize((viewNormalMatrix * worldNormal).xyz);"),t&&(s.push("vWorldPosition = worldPosition;"),s.push("vFlags = flags;")),s.push("  vViewNormal = viewNormal;"),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),s.push("gl_Position = clipPos;"),s.push("}"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Instancing geometry depth drawing fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("in float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("in vec3 vViewNormal;"),i.push("vec3 packNormalToRGB( const in vec3 normal ) {"),i.push("    return normalize( normal ) * 0.5 + 0.5;"),i.push("}"),i.push("out vec4 outColor;"),i.push("void main(void) {"),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("  float dist = 0.0;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("if (sectionPlaneActive"+e+") {"),i.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("}");i.push("if (dist > 0.0) { discard; }"),i.push("}")}return e.logarithmicDepthBufferEnabled&&i.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("    outColor = vec4(packNormalToRGB(vViewNormal), 1.0); "),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Ka=p.vec3();class Ya{constructor(e){this._scene=e,this._hash=this._getHash(),this._lastLightId=null,this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t){const s=t.model,i=s.scene,r=i.canvas.gl,o=t._state,n=o.geometry;if(!this._program&&(this._allocate(),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram(e,t)),r.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,n.positionsDecodeMatrix),this._aModelMatrixCol0.bindArrayBuffer(o.modelMatrixCol0Buf),this._aModelMatrixCol1.bindArrayBuffer(o.modelMatrixCol1Buf),this._aModelMatrixCol2.bindArrayBuffer(o.modelMatrixCol2Buf),r.vertexAttribDivisor(this._aModelMatrixCol0.location,1),r.vertexAttribDivisor(this._aModelMatrixCol1.location,1),r.vertexAttribDivisor(this._aModelMatrixCol2.location,1),this._aPosition.bindArrayBuffer(n.positionsBuf),this._aOffset&&(this._aOffset.bindArrayBuffer(o.offsetsBuf),r.vertexAttribDivisor(this._aOffset.location,1)),this._aColor.bindArrayBuffer(o.colorsBuf),r.vertexAttribDivisor(this._aColor.location,1),this._aFlags.bindArrayBuffer(o.flagsBuf),r.vertexAttribDivisor(this._aFlags.location,1);const a=i._sectionPlanesState.sectionPlanes.length;if(a>0){const e=i._sectionPlanesState.sectionPlanes,o=t.layerIndex*a,n=s.renderFlags,l=t._state.origin;for(let t=0;t<a;t++){const s=this._uSectionPlanes[t];if(s){const i=n.sectionPlanesActivePerLayer[o+t];if(r.uniform1i(s.active,i?1:0),i){const i=e[t];if(l){const e=W(i.dist,i.dir,l,Ka);r.uniform3fv(s.pos,e)}else r.uniform3fv(s.pos,i.pos);r.uniform3fv(s.dir,i.dir)}}}}n.indicesBuf.bind(),r.drawElementsInstanced(r.TRIANGLES,n.indicesBuf.numItems,n.indicesBuf.itemType,0,o.numInstances),r.vertexAttribDivisor(this._aModelMatrixCol0.location,0),r.vertexAttribDivisor(this._aModelMatrixCol1.location,0),r.vertexAttribDivisor(this._aModelMatrixCol2.location,0),r.vertexAttribDivisor(this._aColor.location,0),r.vertexAttribDivisor(this._aFlags.location,0),this._aOffset&&r.vertexAttribDivisor(this._aOffset.location,0)}_allocate(){const e=this._scene,t=e.canvas.gl,s=e._sectionPlanesState;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uPositionsDecodeMatrix=i.getLocation("positionsDecodeMatrix"),this._uShadowViewMatrix=i.getLocation("shadowViewMatrix"),this._uShadowProjMatrix=i.getLocation("shadowProjMatrix"),this._uSectionPlanes=[];for(let e=0,t=s.sectionPlanes.length;e<t;e++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+e),pos:i.getLocation("sectionPlanePos"+e),dir:i.getLocation("sectionPlaneDir"+e)});this._aPosition=i.getAttribute("position"),this._aOffset=i.getAttribute("offset"),this._aColor=i.getAttribute("color"),this._aFlags=i.getAttribute("flags"),this._aModelMatrixCol0=i.getAttribute("modelMatrixCol0"),this._aModelMatrixCol1=i.getAttribute("modelMatrixCol1"),this._aModelMatrixCol2=i.getAttribute("modelMatrixCol2")}_bindProgram(e){const t=this._scene.canvas.gl;this._program.bind(),t.uniformMatrix4fv(this._uShadowViewMatrix,!1,e.shadowViewMatrix),t.uniformMatrix4fv(this._uShadowProjMatrix,!1,e.shadowProjMatrix),this._lastLightId=null}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Instancing geometry shadow drawing vertex shader"),s.push("in vec3 position;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("in vec4 color;"),s.push("in float flags;"),s.push("in vec4 modelMatrixCol0;"),s.push("in vec4 modelMatrixCol1;"),s.push("in vec4 modelMatrixCol2;"),s.push("uniform mat4 shadowViewMatrix;"),s.push("uniform mat4 shadowProjMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),t&&(s.push("out vec4 vWorldPosition;"),s.push("out float vFlags;")),s.push("void main(void) {"),s.push("int colorFlag = int(flags) & 0xF;"),s.push("bool visible = (colorFlag > 0);"),s.push("bool transparent  = ((float(color.a) / 255.0) < 1.0);"),s.push("if (!visible || transparent) {"),s.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("} else {"),s.push("  vec4 worldPosition = positionsDecodeMatrix * vec4(position, 1.0); "),s.push("  worldPosition = vec4(dot(worldPosition, modelMatrixCol0), dot(worldPosition, modelMatrixCol1), dot(worldPosition, modelMatrixCol2), 1.0);"),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("  vec4 viewPosition  = shadowViewMatrix * worldPosition; "),t&&(s.push("vWorldPosition = worldPosition;"),s.push("vFlags = flags;")),s.push("  gl_Position = shadowProjMatrix * viewPosition;"),s.push("}"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Instancing geometry depth drawing fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("in vec3 vViewNormal;"),i.push("vec3 packNormalToRGB( const in vec3 normal ) {"),i.push("    return normalize( normal ) * 0.5 + 0.5;"),i.push("}"),i.push("out vec4 outColor;"),i.push("void main(void) {"),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("  float dist = 0.0;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("if (sectionPlaneActive"+e+") {"),i.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("}");i.push("if (dist > 0.0) { discard; }"),i.push("}")}return e.logarithmicDepthBufferEnabled&&i.push("gl_FragDepth = log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("    outColor = vec4(packNormalToRGB(vViewNormal), 1.0); "),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Xa=p.vec4(),Za=p.vec3(),qa={3e3:"linearToLinear",3001:"sRGBToLinear"};class Ja{constructor(e,t){this._scene=e,this._withSAO=t,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){const e=this._scene;return[e.gammaOutput,e._lightsState.getHash(),e._sectionPlanesState.getHash(),this._withSAO?"sao":"nosao"].join(";")}drawLayer(e,t,s){const i=oe.MAX_TEXTURE_IMAGE_UNITS,r=t.model,o=this._scene,n=o.camera,a=o.canvas.gl,l=t._state,h=l.origin,c=l.textureSet,u=l.geometry,A=o._lightsState;if(!this._program&&(this._allocate(),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram(e)),a.uniform1i(this._uRenderPass,s),a.uniformMatrix4fv(this._uViewMatrix,!1,h?j(n.viewMatrix,h):n.viewMatrix),a.uniformMatrix4fv(this._uViewNormalMatrix,!1,n.viewNormalMatrix),a.uniformMatrix4fv(this._uWorldMatrix,!1,r.worldMatrix),a.uniformMatrix4fv(this._uWorldNormalMatrix,!1,r.worldNormalMatrix);const p=o._sectionPlanesState.sectionPlanes.length;if(p>0){const e=o._sectionPlanesState.sectionPlanes,s=t.layerIndex*p,i=r.renderFlags;for(let t=0;t<p;t++){const r=this._uSectionPlanes[t];if(r){const o=i.sectionPlanesActivePerLayer[s+t];if(a.uniform1i(r.active,o?1:0),o){const s=e[t];if(h){const e=W(s.dist,s.dir,h,Za);a.uniform3fv(r.pos,e)}else a.uniform3fv(r.pos,s.pos);a.uniform3fv(r.dir,s.dir)}}}}if(a.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,u.positionsDecodeMatrix),this._uUVDecodeMatrix&&a.uniformMatrix3fv(this._uUVDecodeMatrix,!1,u.uvDecodeMatrix),this._aModelMatrixCol0.bindArrayBuffer(l.modelMatrixCol0Buf),this._aModelMatrixCol1.bindArrayBuffer(l.modelMatrixCol1Buf),this._aModelMatrixCol2.bindArrayBuffer(l.modelMatrixCol2Buf),a.vertexAttribDivisor(this._aModelMatrixCol0.location,1),a.vertexAttribDivisor(this._aModelMatrixCol1.location,1),a.vertexAttribDivisor(this._aModelMatrixCol2.location,1),this._aModelNormalMatrixCol0.bindArrayBuffer(l.modelNormalMatrixCol0Buf),this._aModelNormalMatrixCol1.bindArrayBuffer(l.modelNormalMatrixCol1Buf),this._aModelNormalMatrixCol2.bindArrayBuffer(l.modelNormalMatrixCol2Buf),a.vertexAttribDivisor(this._aModelNormalMatrixCol0.location,1),a.vertexAttribDivisor(this._aModelNormalMatrixCol1.location,1),a.vertexAttribDivisor(this._aModelNormalMatrixCol2.location,1),this._aPosition.bindArrayBuffer(u.positionsBuf),this._aNormal.bindArrayBuffer(u.normalsBuf),this._aUV&&this._aUV.bindArrayBuffer(u.uvBuf),this._aColor.bindArrayBuffer(l.colorsBuf),a.vertexAttribDivisor(this._aColor.location,1),this._aMetallicRoughness.bindArrayBuffer(l.metallicRoughnessBuf),a.vertexAttribDivisor(this._aMetallicRoughness.location,1),this._aFlags.bindArrayBuffer(l.flagsBuf),a.vertexAttribDivisor(this._aFlags.location,1),this._aOffset&&(this._aOffset.bindArrayBuffer(l.offsetsBuf),a.vertexAttribDivisor(this._aOffset.location,1)),A.reflectionMaps.length>0&&A.reflectionMaps[0].texture&&this._uReflectionMap&&(this._program.bindTexture(this._uReflectionMap,A.reflectionMaps[0].texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%i,e.bindTexture++),A.lightMaps.length>0&&A.lightMaps[0].texture&&this._uLightMap&&(this._program.bindTexture(this._uLightMap,A.lightMaps[0].texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%i,e.bindTexture++),this._withSAO){const t=o.sao;if(t.possible){const s=a.drawingBufferWidth,r=a.drawingBufferHeight;Xa[0]=s,Xa[1]=r,Xa[2]=t.blendCutoff,Xa[3]=t.blendFactor,a.uniform4fv(this._uSAOParams,Xa),this._program.bindTexture(this._uOcclusionTexture,e.occlusionTexture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%i,e.bindTexture++}}c&&(this._program.bindTexture(this._uBaseColorMap,c.colorTexture.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%i,this._program.bindTexture(this._uMetallicRoughMap,c.metallicRoughnessTexture.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%i,this._program.bindTexture(this._uEmissiveMap,c.emissiveTexture.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%i,this._program.bindTexture(this._uNormalMap,c.normalsTexture.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%i),u.indicesBuf.bind(),a.drawElementsInstanced(a.TRIANGLES,u.indicesBuf.numItems,u.indicesBuf.itemType,0,l.numInstances),e.drawElements++,a.vertexAttribDivisor(this._aModelMatrixCol0.location,0),a.vertexAttribDivisor(this._aModelMatrixCol1.location,0),a.vertexAttribDivisor(this._aModelMatrixCol2.location,0),a.vertexAttribDivisor(this._aModelNormalMatrixCol0.location,0),a.vertexAttribDivisor(this._aModelNormalMatrixCol1.location,0),a.vertexAttribDivisor(this._aModelNormalMatrixCol2.location,0),a.vertexAttribDivisor(this._aColor.location,0),a.vertexAttribDivisor(this._aMetallicRoughness.location,0),a.vertexAttribDivisor(this._aFlags.location,0),this._aOffset&&a.vertexAttribDivisor(this._aOffset.location,0)}_allocate(){const e=this._scene,t=e.canvas.gl,s=e._lightsState;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uRenderPass=i.getLocation("renderPass"),this._uPositionsDecodeMatrix=i.getLocation("positionsDecodeMatrix"),this._uUVDecodeMatrix=i.getLocation("uvDecodeMatrix"),this._uWorldMatrix=i.getLocation("worldMatrix"),this._uWorldNormalMatrix=i.getLocation("worldNormalMatrix"),this._uViewMatrix=i.getLocation("viewMatrix"),this._uViewNormalMatrix=i.getLocation("viewNormalMatrix"),this._uProjMatrix=i.getLocation("projMatrix"),this._uGammaFactor=i.getLocation("gammaFactor"),this._uLightAmbient=i.getLocation("lightAmbient"),this._uLightColor=[],this._uLightDir=[],this._uLightPos=[],this._uLightAttenuation=[];const r=s.lights;let o;for(var n=0,a=r.length;n<a;n++)switch(o=r[n],o.type){case"dir":this._uLightColor[n]=i.getLocation("lightColor"+n),this._uLightPos[n]=null,this._uLightDir[n]=i.getLocation("lightDir"+n);break;case"point":this._uLightColor[n]=i.getLocation("lightColor"+n),this._uLightPos[n]=i.getLocation("lightPos"+n),this._uLightDir[n]=null,this._uLightAttenuation[n]=i.getLocation("lightAttenuation"+n);break;case"spot":this._uLightColor[n]=i.getLocation("lightColor"+n),this._uLightPos[n]=i.getLocation("lightPos"+n),this._uLightDir[n]=i.getLocation("lightDir"+n),this._uLightAttenuation[n]=i.getLocation("lightAttenuation"+n)}s.reflectionMaps.length>0&&(this._uReflectionMap="reflectionMap"),s.lightMaps.length>0&&(this._uLightMap="lightMap"),this._uSectionPlanes=[];for(let t=0,s=e._sectionPlanesState.sectionPlanes.length;t<s;t++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+t),pos:i.getLocation("sectionPlanePos"+t),dir:i.getLocation("sectionPlaneDir"+t)});this._aPosition=i.getAttribute("position"),this._aNormal=i.getAttribute("normal"),this._aUV=i.getAttribute("uv"),this._aColor=i.getAttribute("color"),this._aMetallicRoughness=i.getAttribute("metallicRoughness"),this._aFlags=i.getAttribute("flags"),this._aOffset=i.getAttribute("offset"),this._uBaseColorMap="uBaseColorMap",this._uMetallicRoughMap="uMetallicRoughMap",this._uEmissiveMap="uEmissiveMap",this._uNormalMap="uNormalMap",this._aModelMatrixCol0=i.getAttribute("modelMatrixCol0"),this._aModelMatrixCol1=i.getAttribute("modelMatrixCol1"),this._aModelMatrixCol2=i.getAttribute("modelMatrixCol2"),this._aModelNormalMatrixCol0=i.getAttribute("modelNormalMatrixCol0"),this._aModelNormalMatrixCol1=i.getAttribute("modelNormalMatrixCol1"),this._aModelNormalMatrixCol2=i.getAttribute("modelNormalMatrixCol2"),this._uOcclusionTexture="uOcclusionTexture",this._uSAOParams=i.getLocation("uSAOParams"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=i.getLocation("logDepthBufFC"))}_bindProgram(){const e=this._scene,t=e.canvas.gl,s=e._lightsState.lights,i=e.camera.project;this._program.bind(),t.uniformMatrix4fv(this._uProjMatrix,!1,i.matrix),this._uLightAmbient&&t.uniform4fv(this._uLightAmbient,e._lightsState.getAmbientColorAndIntensity());for(let e=0,i=s.length;e<i;e++){const i=s[e];this._uLightColor[e]&&t.uniform4f(this._uLightColor[e],i.color[0],i.color[1],i.color[2],i.intensity),this._uLightPos[e]&&(t.uniform3fv(this._uLightPos[e],i.pos),this._uLightAttenuation[e]&&t.uniform1f(this._uLightAttenuation[e],i.attenuation)),this._uLightDir[e]&&t.uniform3fv(this._uLightDir[e],i.dir)}if(e.logarithmicDepthBufferEnabled){const e=2/(Math.log(i.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}this._uGammaFactor&&t.uniform1f(this._uGammaFactor,e.gammaFactor)}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState,s=e._lightsState,i=t.sectionPlanes.length>0,r=t.clippingCaps,o=[];return o.push("#version 300 es"),o.push("// Instancing geometry quality drawing vertex shader"),o.push("uniform int renderPass;"),o.push("in vec3 position;"),o.push("in vec3 normal;"),o.push("in vec4 color;"),o.push("in vec2 uv;"),o.push("in vec2 metallicRoughness;"),o.push("in float flags;"),e.entityOffsetsEnabled&&o.push("in vec3 offset;"),o.push("in vec4 modelMatrixCol0;"),o.push("in vec4 modelMatrixCol1;"),o.push("in vec4 modelMatrixCol2;"),o.push("in vec4 modelNormalMatrixCol0;"),o.push("in vec4 modelNormalMatrixCol1;"),o.push("in vec4 modelNormalMatrixCol2;"),o.push("uniform mat4 worldMatrix;"),o.push("uniform mat4 worldNormalMatrix;"),o.push("uniform mat4 viewMatrix;"),o.push("uniform mat4 viewNormalMatrix;"),o.push("uniform mat4 projMatrix;"),o.push("uniform mat4 positionsDecodeMatrix;"),o.push("uniform mat3 uvDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(o.push("uniform float logDepthBufFC;"),o.push("out float vFragDepth;"),o.push("bool isPerspectiveMatrix(mat4 m) {"),o.push("    return (m[2][3] == - 1.0);"),o.push("}"),o.push("out float isPerspective;")),o.push("vec3 octDecode(vec2 oct) {"),o.push("    vec3 v = vec3(oct.xy, 1.0 - abs(oct.x) - abs(oct.y));"),o.push("    if (v.z < 0.0) {"),o.push("        v.xy = (1.0 - abs(v.yx)) * vec2(v.x >= 0.0 ? 1.0 : -1.0, v.y >= 0.0 ? 1.0 : -1.0);"),o.push("    }"),o.push("    return normalize(v);"),o.push("}"),o.push("out vec4 vViewPosition;"),o.push("out vec3 vViewNormal;"),o.push("out vec4 vColor;"),o.push("out vec2 vUV;"),o.push("out vec2 vMetallicRoughness;"),s.lightMaps.length>0&&o.push("out vec3 vWorldNormal;"),i&&(o.push("out vec4 vWorldPosition;"),o.push("out float vFlags;"),r&&o.push("out vec4 vClipPosition;")),o.push("void main(void) {"),o.push("int colorFlag = int(flags) & 0xF;"),o.push("if (colorFlag != renderPass) {"),o.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),o.push("} else {"),o.push("vec4 worldPosition =  positionsDecodeMatrix * vec4(position, 1.0); "),o.push("worldPosition = worldMatrix * vec4(dot(worldPosition, modelMatrixCol0), dot(worldPosition, modelMatrixCol1), dot(worldPosition, modelMatrixCol2), 1.0);"),e.entityOffsetsEnabled&&o.push("      worldPosition.xyz = worldPosition.xyz + offset;"),o.push("vec4 viewPosition  = viewMatrix * worldPosition; "),o.push("vec4 modelNormal = vec4(octDecode(normal.xy), 0.0); "),o.push("vec4 worldNormal = worldNormalMatrix * vec4(dot(modelNormal, modelNormalMatrixCol0), dot(modelNormal, modelNormalMatrixCol1), dot(modelNormal, modelNormalMatrixCol2), 1.0);"),o.push("vec3 viewNormal = vec4(viewNormalMatrix * worldNormal).xyz;"),o.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(o.push("vFragDepth = 1.0 + clipPos.w;"),o.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),i&&(o.push("vWorldPosition = worldPosition;"),o.push("vFlags = flags;"),r&&o.push("vClipPosition = clipPos;")),o.push("vViewPosition = viewPosition;"),o.push("vViewNormal = viewNormal;"),o.push("vColor = color;"),o.push("vUV = (uvDecodeMatrix * vec3(uv, 1.0)).xy;"),o.push("vMetallicRoughness = metallicRoughness;"),s.lightMaps.length>0&&o.push("vWorldNormal = worldNormal.xyz;"),o.push("gl_Position = clipPos;"),o.push("}"),o.push("}"),o}_buildFragmentShader(){const e=this._scene,t=e.gammaOutput,s=e._sectionPlanesState,i=e._lightsState,r=s.sectionPlanes.length>0,o=s.clippingCaps,n=[];n.push("#version 300 es"),n.push("// Instancing geometry quality drawing fragment shader"),n.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),n.push("precision highp float;"),n.push("precision highp int;"),n.push("#else"),n.push("precision mediump float;"),n.push("precision mediump int;"),n.push("#endif"),e.logarithmicDepthBufferEnabled&&(n.push("in float isPerspective;"),n.push("uniform float logDepthBufFC;"),n.push("in float vFragDepth;")),n.push("uniform sampler2D uBaseColorMap;"),n.push("uniform sampler2D uMetallicRoughMap;"),n.push("uniform sampler2D uEmissiveMap;"),n.push("uniform sampler2D uNormalMap;"),this._withSAO&&(n.push("uniform sampler2D uOcclusionTexture;"),n.push("uniform vec4      uSAOParams;"),n.push("const float       packUpscale = 256. / 255.;"),n.push("const float       unpackDownScale = 255. / 256.;"),n.push("const vec3        packFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );"),n.push("const vec4        unPackFactors = unpackDownScale / vec4( packFactors, 1. );"),n.push("float unpackRGBToFloat( const in vec4 v ) {"),n.push("    return dot( v, unPackFactors );"),n.push("}")),i.reflectionMaps.length>0&&n.push("uniform samplerCube reflectionMap;"),i.lightMaps.length>0&&n.push("uniform samplerCube lightMap;"),n.push("uniform vec4 lightAmbient;");for(let e=0,t=i.lights.length;e<t;e++){const t=i.lights[e];"ambient"!==t.type&&(n.push("uniform vec4 lightColor"+e+";"),"dir"===t.type&&n.push("uniform vec3 lightDir"+e+";"),"point"===t.type&&n.push("uniform vec3 lightPos"+e+";"),"spot"===t.type&&(n.push("uniform vec3 lightPos"+e+";"),n.push("uniform vec3 lightDir"+e+";")))}if(n.push("uniform float gammaFactor;"),n.push("vec4 linearToLinear( in vec4 value ) {"),n.push("  return value;"),n.push("}"),n.push("vec4 sRGBToLinear( in vec4 value ) {"),n.push("  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );"),n.push("}"),n.push("vec4 gammaToLinear( in vec4 value) {"),n.push("  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );"),n.push("}"),t&&(n.push("vec4 linearToGamma( in vec4 value, in float gammaFactor ) {"),n.push("  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );"),n.push("}")),r){n.push("in vec4 vWorldPosition;"),n.push("in float vFlags;"),o&&n.push("in vec4 vClipPosition;");for(let e=0,t=s.sectionPlanes.length;e<t;e++)n.push("uniform bool sectionPlaneActive"+e+";"),n.push("uniform vec3 sectionPlanePos"+e+";"),n.push("uniform vec3 sectionPlaneDir"+e+";")}if(n.push("in vec4 vViewPosition;"),n.push("in vec3 vViewNormal;"),n.push("in vec4 vColor;"),n.push("in vec2 vUV;"),n.push("in vec2 vMetallicRoughness;"),i.lightMaps.length>0&&n.push("in vec3 vWorldNormal;"),n.push("uniform mat4 viewMatrix;"),n.push("#define PI 3.14159265359"),n.push("#define RECIPROCAL_PI 0.31830988618"),n.push("#define RECIPROCAL_PI2 0.15915494"),n.push("#define EPSILON 1e-6"),n.push("#define saturate(a) clamp( a, 0.0, 1.0 )"),n.push("vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {"),n.push("       vec3 texel = texture( uNormalMap, uv ).xyz;"),n.push("       if (texel.r == 0.0 && texel.g == 0.0 && texel.b == 0.0) {"),n.push("              return normalize(surf_norm );"),n.push("       }"),n.push("      vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );"),n.push("      vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );"),n.push("      vec2 st0 = dFdx( uv.st );"),n.push("      vec2 st1 = dFdy( uv.st );"),n.push("      vec3 S = normalize( q0 * st1.t - q1 * st0.t );"),n.push("      vec3 T = normalize( -q0 * st1.s + q1 * st0.s );"),n.push("      vec3 N = normalize( surf_norm );"),n.push("      vec3 mapN = texel.xyz * 2.0 - 1.0;"),n.push("      mat3 tsn = mat3( S, T, N );"),n.push("      return normalize( tsn * mapN );"),n.push("}"),n.push("vec3 inverseTransformDirection(in vec3 dir, in mat4 matrix) {"),n.push("   return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );"),n.push("}"),n.push("struct IncidentLight {"),n.push("   vec3 color;"),n.push("   vec3 direction;"),n.push("};"),n.push("struct ReflectedLight {"),n.push("   vec3 diffuse;"),n.push("   vec3 specular;"),n.push("};"),n.push("struct Geometry {"),n.push("   vec3 position;"),n.push("   vec3 viewNormal;"),n.push("   vec3 worldNormal;"),n.push("   vec3 viewEyeDir;"),n.push("};"),n.push("struct Material {"),n.push("   vec3    diffuseColor;"),n.push("   float   specularRoughness;"),n.push("   vec3    specularColor;"),n.push("   float   shine;"),n.push("};"),n.push("float GGXRoughnessToBlinnExponent(const in float ggxRoughness) {"),n.push("   float r = ggxRoughness + 0.0001;"),n.push("   return (2.0 / (r * r) - 2.0);"),n.push("}"),n.push("float getSpecularMIPLevel(const in float blinnShininessExponent, const in int maxMIPLevel) {"),n.push("   float maxMIPLevelScalar = float( maxMIPLevel );"),n.push("   float desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( ( blinnShininessExponent * blinnShininessExponent ) + 1.0 );"),n.push("   return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );"),n.push("}"),i.reflectionMaps.length>0&&(n.push("vec3 getLightProbeIndirectRadiance(const in vec3 reflectVec, const in float blinnShininessExponent, const in int maxMIPLevel) {"),n.push("   float mipLevel = 0.5 * getSpecularMIPLevel(blinnShininessExponent, maxMIPLevel);"),n.push("   vec3 envMapColor = "+qa[i.reflectionMaps[0].encoding]+"(texture(reflectionMap, reflectVec, mipLevel)).rgb;"),n.push("  return envMapColor;"),n.push("}")),n.push("vec3 F_Schlick(const in vec3 specularColor, const in float dotLH) {"),n.push("   float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );"),n.push("   return ( 1.0 - specularColor ) * fresnel + specularColor;"),n.push("}"),n.push("float G_GGX_Smith(const in float alpha, const in float dotNL, const in float dotNV) {"),n.push("   float a2 = ( alpha * alpha );"),n.push("   float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * ( dotNL * dotNL ) );"),n.push("   float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * ( dotNV * dotNV ) );"),n.push("   return 1.0 / ( gl * gv );"),n.push("}"),n.push("float G_GGX_SmithCorrelated(const in float alpha, const in float dotNL, const in float dotNV) {"),n.push("   float a2 = ( alpha * alpha );"),n.push("   float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * ( dotNV * dotNV ) );"),n.push("   float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * ( dotNL * dotNL ) );"),n.push("   return 0.5 / max( gv + gl, EPSILON );"),n.push("}"),n.push("float D_GGX(const in float alpha, const in float dotNH) {"),n.push("   float a2 = ( alpha * alpha );"),n.push("   float denom = ( dotNH * dotNH) * ( a2 - 1.0 ) + 1.0;"),n.push("   return RECIPROCAL_PI * a2 / ( denom * denom);"),n.push("}"),n.push("vec3 BRDF_Specular_GGX(const in IncidentLight incidentLight, const in Geometry geometry, const in vec3 specularColor, const in float roughness) {"),n.push("   float alpha = ( roughness * roughness );"),n.push("   vec3 halfDir = normalize( incidentLight.direction + geometry.viewEyeDir );"),n.push("   float dotNL = saturate( dot( geometry.viewNormal, incidentLight.direction ) );"),n.push("   float dotNV = saturate( dot( geometry.viewNormal, geometry.viewEyeDir ) );"),n.push("   float dotNH = saturate( dot( geometry.viewNormal, halfDir ) );"),n.push("   float dotLH = saturate( dot( incidentLight.direction, halfDir ) );"),n.push("   vec3  F = F_Schlick( specularColor, dotLH );"),n.push("   float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );"),n.push("   float D = D_GGX( alpha, dotNH );"),n.push("   return F * (G * D);"),n.push("}"),n.push("vec3 BRDF_Specular_GGX_Environment(const in Geometry geometry, const in vec3 specularColor, const in float roughness) {"),n.push("   float dotNV = saturate(dot(geometry.viewNormal, geometry.viewEyeDir));"),n.push("   const vec4 c0 = vec4( -1, -0.0275, -0.572,  0.022);"),n.push("   const vec4 c1 = vec4(  1,  0.0425,   1.04, -0.04);"),n.push("   vec4 r = roughness * c0 + c1;"),n.push("   float a004 = min(r.x * r.x, exp2(-9.28 * dotNV)) * r.x + r.y;"),n.push("   vec2 AB    = vec2(-1.04, 1.04) * a004 + r.zw;"),n.push("   return specularColor * AB.x + AB.y;"),n.push("}"),(i.lightMaps.length>0||i.reflectionMaps.length>0)&&(n.push("void computePBRLightMapping(const in Geometry geometry, const in Material material, inout ReflectedLight reflectedLight) {"),i.lightMaps.length>0&&(n.push("   vec3 irradiance = "+qa[i.lightMaps[0].encoding]+"(texture(lightMap, geometry.worldNormal)).rgb;"),n.push("   irradiance *= PI;"),n.push("   vec3 diffuseBRDFContrib = (RECIPROCAL_PI * material.diffuseColor);"),n.push("   reflectedLight.diffuse += irradiance * diffuseBRDFContrib;")),i.reflectionMaps.length>0&&(n.push("   vec3 reflectVec             = reflect(geometry.viewEyeDir, geometry.viewNormal);"),n.push("   reflectVec                  = inverseTransformDirection(reflectVec, viewMatrix);"),n.push("   float blinnExpFromRoughness = GGXRoughnessToBlinnExponent(material.specularRoughness);"),n.push("   vec3 radiance               = getLightProbeIndirectRadiance(reflectVec, blinnExpFromRoughness, 8);"),n.push("   vec3 specularBRDFContrib    = BRDF_Specular_GGX_Environment(geometry, material.specularColor, material.specularRoughness);"),n.push("   reflectedLight.specular     += radiance * specularBRDFContrib;")),n.push("}")),n.push("void computePBRLighting(const in IncidentLight incidentLight, const in Geometry geometry, const in Material material, inout ReflectedLight reflectedLight) {"),n.push("   float dotNL     = saturate(dot(geometry.viewNormal, incidentLight.direction));"),n.push("   vec3 irradiance = dotNL * incidentLight.color * PI;"),n.push("   reflectedLight.diffuse  += irradiance * (RECIPROCAL_PI * material.diffuseColor);"),n.push("   reflectedLight.specular += irradiance * BRDF_Specular_GGX(incidentLight, geometry, material.specularColor, material.specularRoughness);"),n.push("}"),n.push("out vec4 outColor;"),n.push("void main(void) {"),r){n.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),n.push("  if (clippable) {"),n.push("  float dist = 0.0;");for(let e=0,t=s.sectionPlanes.length;e<t;e++)n.push("if (sectionPlaneActive"+e+") {"),n.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),n.push("}");o?(n.push("  if (dist > (0.002 * vClipPosition.w)) {"),n.push("      discard;"),n.push("  }"),n.push("  if (dist > 0.0) { "),n.push("      outColor=vec4(1.0, 0.0, 0.0, 1.0);"),e.logarithmicDepthBufferEnabled&&n.push("  gl_FragDepth = log2( vFragDepth ) * logDepthBufFC * 0.5;"),n.push("  return;"),n.push("}")):(n.push("  if (dist > 0.0) { "),n.push("      discard;"),n.push("  }")),n.push("}")}n.push("IncidentLight  light;"),n.push("Material       material;"),n.push("Geometry       geometry;"),n.push("ReflectedLight reflectedLight = ReflectedLight(vec3(0.0,0.0,0.0), vec3(0.0,0.0,0.0));"),n.push("vec3 rgb = (vec3(float(vColor.r) / 255.0, float(vColor.g) / 255.0, float(vColor.b) / 255.0));"),n.push("float opacity = float(vColor.a) / 255.0;"),n.push("vec3  baseColor = rgb;"),n.push("float specularF0 = 1.0;"),n.push("float metallic = float(vMetallicRoughness.r) / 255.0;"),n.push("float roughness = float(vMetallicRoughness.g) / 255.0;"),n.push("float dielectricSpecular = 0.16 * specularF0 * specularF0;"),n.push("vec4 baseColorTexel = sRGBToLinear(texture(uBaseColorMap, vUV));"),n.push("baseColor *= baseColorTexel.rgb;"),n.push("vec3 metalRoughTexel = texture(uMetallicRoughMap, vUV).rgb;"),n.push("metallic *= metalRoughTexel.b;"),n.push("roughness *= metalRoughTexel.g;"),n.push("vec3 viewNormal = perturbNormal2Arb( vViewPosition.xyz, normalize(vViewNormal), vUV );"),n.push("material.diffuseColor      = baseColor * (1.0 - dielectricSpecular) * (1.0 - metallic);"),n.push("material.specularRoughness = clamp(roughness, 0.04, 1.0);"),n.push("material.specularColor     = mix(vec3(dielectricSpecular), baseColor, metallic);"),n.push("geometry.position      = vViewPosition.xyz;"),n.push("geometry.viewNormal    = -normalize(viewNormal);"),n.push("geometry.viewEyeDir    = normalize(vViewPosition.xyz);"),i.lightMaps.length>0&&n.push("geometry.worldNormal   = normalize(vWorldNormal);"),(i.lightMaps.length>0||i.reflectionMaps.length>0)&&n.push("computePBRLightMapping(geometry, material, reflectedLight);");for(let e=0,t=i.lights.length;e<t;e++){const t=i.lights[e];if("ambient"!==t.type){if("dir"===t.type)"view"===t.space?n.push("light.direction = normalize(lightDir"+e+");"):n.push("light.direction = normalize((viewMatrix * vec4(lightDir"+e+", 0.0)).xyz);");else if("point"===t.type)"view"===t.space?n.push("light.direction = normalize(lightPos"+e+" - vViewPosition.xyz);"):n.push("light.direction = normalize((viewMatrix * vec4(lightPos"+e+", 0.0)).xyz);");else{if("spot"!==t.type)continue;"view"===t.space?n.push("light.direction = normalize(lightDir"+e+");"):n.push("light.direction = normalize((viewMatrix * vec4(lightDir"+e+", 0.0)).xyz);")}n.push("light.color =  lightColor"+e+".rgb * lightColor"+e+".a;"),n.push("computePBRLighting(light, geometry, material, reflectedLight);")}}return n.push("vec3 emissiveColor = sRGBToLinear(texture(uEmissiveMap, vUV)).rgb;"),n.push("vec3 outgoingLight = (lightAmbient.rgb * lightAmbient.a * baseColor * opacity * rgb) + (reflectedLight.diffuse) + (reflectedLight.specular) + emissiveColor;"),n.push("vec4 fragColor;"),this._withSAO?(n.push("   float viewportWidth     = uSAOParams[0];"),n.push("   float viewportHeight    = uSAOParams[1];"),n.push("   float blendCutoff       = uSAOParams[2];"),n.push("   float blendFactor       = uSAOParams[3];"),n.push("   vec2 uv                 = vec2(gl_FragCoord.x / viewportWidth, gl_FragCoord.y / viewportHeight);"),n.push("   float ambient           = smoothstep(blendCutoff, 1.0, unpackRGBToFloat(texture(uOcclusionTexture, uv))) * blendFactor;"),n.push("   fragColor            = vec4(outgoingLight.rgb * ambient, opacity);")):n.push("   fragColor            = vec4(outgoingLight.rgb, opacity);"),t&&n.push("fragColor = linearToGamma(fragColor, gammaFactor);"),n.push("outColor = fragColor;"),e.logarithmicDepthBufferEnabled&&n.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),n.push("}"),n}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const $a=p.vec3();class el{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=a.geometry,h=t._state.origin;if(!this._program&&(this._allocate(t),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),n.uniform1i(this._uRenderPass,s),n.uniform1i(this._uPickInvisible,e.pickInvisible);const c=e.pickViewMatrix||o.viewMatrix,u=h?j(c,h):c;if(n.uniformMatrix4fv(this._uViewMatrix,!1,u),n.uniformMatrix4fv(this._uProjMatrix,!1,e.pickProjMatrix),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix),r.logarithmicDepthBufferEnabled){const e=2/(Math.log(o.project.far+1)/Math.LN2);n.uniform1f(this._uLogDepthBufFC,e)}const A=r._sectionPlanesState.sectionPlanes.length;if(A>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*A,o=i.renderFlags;for(let t=0;t<A;t++){const i=this._uSectionPlanes[t],r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(h){const e=W(s.dist,s.dir,h,$a);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,l.positionsDecodeMatrix),this._aModelMatrixCol0.bindArrayBuffer(a.modelMatrixCol0Buf),this._aModelMatrixCol1.bindArrayBuffer(a.modelMatrixCol1Buf),this._aModelMatrixCol2.bindArrayBuffer(a.modelMatrixCol2Buf),n.vertexAttribDivisor(this._aModelMatrixCol0.location,1),n.vertexAttribDivisor(this._aModelMatrixCol1.location,1),n.vertexAttribDivisor(this._aModelMatrixCol2.location,1),this._aPosition.bindArrayBuffer(l.positionsBuf),this._aFlags.bindArrayBuffer(a.flagsBuf),n.vertexAttribDivisor(this._aFlags.location,1),this._aOffset&&(this._aOffset.bindArrayBuffer(a.offsetsBuf),n.vertexAttribDivisor(this._aOffset.location,1)),l.indicesBuf.bind(),n.drawElementsInstanced(n.TRIANGLES,l.indicesBuf.numItems,l.indicesBuf.itemType,0,a.numInstances),n.vertexAttribDivisor(this._aModelMatrixCol0.location,0),n.vertexAttribDivisor(this._aModelMatrixCol1.location,0),n.vertexAttribDivisor(this._aModelMatrixCol2.location,0),n.vertexAttribDivisor(this._aFlags.location,0),this._aOffset&&n.vertexAttribDivisor(this._aOffset.location,0)}_allocate(){const e=this._scene,t=e.canvas.gl,s=e._sectionPlanesState;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uRenderPass=i.getLocation("renderPass"),this._uPickInvisible=i.getLocation("pickInvisible"),this._uPositionsDecodeMatrix=i.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=i.getLocation("worldMatrix"),this._uViewMatrix=i.getLocation("viewMatrix"),this._uProjMatrix=i.getLocation("projMatrix"),this._uSectionPlanes=[];for(let e=0,t=s.sectionPlanes.length;e<t;e++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+e),pos:i.getLocation("sectionPlanePos"+e),dir:i.getLocation("sectionPlaneDir"+e)});this._aPosition=i.getAttribute("position"),this._aOffset=i.getAttribute("offset"),this._aFlags=i.getAttribute("flags"),this._aModelMatrixCol0=i.getAttribute("modelMatrixCol0"),this._aModelMatrixCol1=i.getAttribute("modelMatrixCol1"),this._aModelMatrixCol2=i.getAttribute("modelMatrixCol2"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=i.getLocation("logDepthBufFC"))}_bindProgram(){this._program.bind()}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Instancing geometry normals vertex shader"),s.push("uniform int renderPass;"),s.push("in vec3 position;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("in float flags;"),s.push("in vec4 modelMatrixCol0;"),s.push("in vec4 modelMatrixCol1;"),s.push("in vec4 modelMatrixCol2;"),s.push("uniform bool pickInvisible;"),s.push("uniform mat4 worldMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("out float isPerspective;")),t&&s.push("out float vFlags;"),s.push("out vec4 vWorldPosition;"),s.push("void main(void) {"),s.push("int pickFlag = int(flags) >> 12 & 0xF;"),s.push("if (pickFlag != renderPass) {"),s.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("} else {"),s.push("  vec4 worldPosition = positionsDecodeMatrix * vec4(position, 1.0); "),s.push("  worldPosition = worldMatrix * vec4(dot(worldPosition, modelMatrixCol0), dot(worldPosition, modelMatrixCol1), dot(worldPosition, modelMatrixCol2), 1.0);"),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("  vec4 viewPosition  = viewMatrix * worldPosition; "),s.push("  vWorldPosition = worldPosition;"),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),t&&s.push("vFlags = flags;"),s.push("gl_Position = clipPos;"),s.push("}"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Batched geometry normals fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("in float isPerspective;"),i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),i.push("in vec4 vWorldPosition;"),s){i.push("in float vFlags;");for(let e=0;e<t.sectionPlanes.length;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("in vec3 vWorldNormal;"),i.push("out vec4 outColor;"),i.push("void main(void) {"),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("  float dist = 0.0;");for(var r=0;r<t.sectionPlanes.length;r++)i.push("if (sectionPlaneActive"+r+") {"),i.push("   dist += clamp(dot(-sectionPlaneDir"+r+".xyz, vWorldPosition.xyz - sectionPlanePos"+r+".xyz), 0.0, 1000.0);"),i.push("}");i.push("if (dist > 0.0) { discard; }"),i.push("}")}return e.logarithmicDepthBufferEnabled&&i.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("  vec3 xTangent = dFdx( vWorldPosition.xyz );"),i.push("  vec3 yTangent = dFdy( vWorldPosition.xyz );"),i.push("  vec3 worldNormal = normalize( cross( xTangent, yTangent ) );"),i.push("  outColor = vec4((worldNormal * 0.5) + 0.5, 1.0);"),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const tl=p.vec4(),sl=p.vec3();class il{constructor(e,t){this._scene=e,this._withSAO=t,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){const e=this._scene;return[e.gammaOutput,e._lightsState.getHash(),e._sectionPlanesState.getHash(),this._withSAO?"sao":"nosao"].join(";")}drawLayer(e,t,s){const i=oe.MAX_TEXTURE_IMAGE_UNITS,r=t.model,o=r.scene,n=o.camera,a=o.canvas.gl,l=t._state,h=l.geometry,c=t._state.origin,u=l.textureSet;if(!this._program&&(this._allocate(),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram(e)),a.uniform1i(this._uRenderPass,s),a.uniformMatrix4fv(this._uViewMatrix,!1,c?j(n.viewMatrix,c):n.viewMatrix),a.uniformMatrix4fv(this._uWorldMatrix,!1,r.worldMatrix);const A=o._sectionPlanesState.sectionPlanes.length;if(A>0){const e=o._sectionPlanesState.sectionPlanes,s=t.layerIndex*A,i=r.renderFlags;for(let t=0;t<A;t++){const r=this._uSectionPlanes[t];if(r){const o=i.sectionPlanesActivePerLayer[s+t];if(a.uniform1i(r.active,o?1:0),o){const s=e[t];if(c){const e=W(s.dist,s.dir,c,sl);a.uniform3fv(r.pos,e)}else a.uniform3fv(r.pos,s.pos);a.uniform3fv(r.dir,s.dir)}}}}if(a.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,h.positionsDecodeMatrix),this._uUVDecodeMatrix&&a.uniformMatrix3fv(this._uUVDecodeMatrix,!1,h.uvDecodeMatrix),this._aModelMatrixCol0.bindArrayBuffer(l.modelMatrixCol0Buf),this._aModelMatrixCol1.bindArrayBuffer(l.modelMatrixCol1Buf),this._aModelMatrixCol2.bindArrayBuffer(l.modelMatrixCol2Buf),a.vertexAttribDivisor(this._aModelMatrixCol0.location,1),a.vertexAttribDivisor(this._aModelMatrixCol1.location,1),a.vertexAttribDivisor(this._aModelMatrixCol2.location,1),this._aPosition.bindArrayBuffer(h.positionsBuf),this._aUV.bindArrayBuffer(h.uvBuf),this._aColor.bindArrayBuffer(l.colorsBuf),a.vertexAttribDivisor(this._aColor.location,1),this._aFlags.bindArrayBuffer(l.flagsBuf),a.vertexAttribDivisor(this._aFlags.location,1),this._aOffset&&(this._aOffset.bindArrayBuffer(l.offsetsBuf),a.vertexAttribDivisor(this._aOffset.location,1)),h.indicesBuf.bind(),a.drawElementsInstanced(a.TRIANGLES,h.indicesBuf.numItems,h.indicesBuf.itemType,0,l.numInstances),e.drawElements++,a.vertexAttribDivisor(this._aModelMatrixCol0.location,0),a.vertexAttribDivisor(this._aModelMatrixCol1.location,0),a.vertexAttribDivisor(this._aModelMatrixCol2.location,0),a.vertexAttribDivisor(this._aColor.location,0),a.vertexAttribDivisor(this._aFlags.location,0),this._aOffset&&a.vertexAttribDivisor(this._aOffset.location,0),u&&u.colorTexture&&(this._program.bindTexture(this._uColorMap,u.colorTexture.texture,e.textureUnit),e.textureUnit=(e.textureUnit+1)%i),this._withSAO){const t=o.sao;if(t.possible){const s=a.drawingBufferWidth,i=a.drawingBufferHeight;tl[0]=s,tl[1]=i,tl[2]=t.blendCutoff,tl[3]=t.blendFactor,a.uniform4fv(this._uSAOParams,tl),this._program.bindTexture(this._uOcclusionTexture,e.occlusionTexture,0)}}}_allocate(){const e=this._scene,t=e.canvas.gl,s=e._lightsState;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uRenderPass=i.getLocation("renderPass"),this._uPositionsDecodeMatrix=i.getLocation("positionsDecodeMatrix"),this._uUVDecodeMatrix=i.getLocation("uvDecodeMatrix"),this._uWorldMatrix=i.getLocation("worldMatrix"),this._uViewMatrix=i.getLocation("viewMatrix"),this._uProjMatrix=i.getLocation("projMatrix"),this._uGammaFactor=i.getLocation("gammaFactor"),this._uLightAmbient=i.getLocation("lightAmbient"),this._uLightColor=[],this._uLightDir=[],this._uLightPos=[],this._uLightAttenuation=[];const r=s.lights;let o;for(let e=0,t=r.length;e<t;e++)switch(o=r[e],o.type){case"dir":this._uLightColor[e]=i.getLocation("lightColor"+e),this._uLightPos[e]=null,this._uLightDir[e]=i.getLocation("lightDir"+e);break;case"point":this._uLightColor[e]=i.getLocation("lightColor"+e),this._uLightPos[e]=i.getLocation("lightPos"+e),this._uLightDir[e]=null,this._uLightAttenuation[e]=i.getLocation("lightAttenuation"+e);break;case"spot":this._uLightColor[e]=i.getLocation("lightColor"+e),this._uLightPos[e]=i.getLocation("lightPos"+e),this._uLightDir[e]=i.getLocation("lightDir"+e),this._uLightAttenuation[e]=i.getLocation("lightAttenuation"+e)}this._uSectionPlanes=[];for(let t=0,s=e._sectionPlanesState.sectionPlanes.length;t<s;t++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+t),pos:i.getLocation("sectionPlanePos"+t),dir:i.getLocation("sectionPlaneDir"+t)});this._aPosition=i.getAttribute("position"),this._aColor=i.getAttribute("color"),this._aUV=i.getAttribute("uv"),this._aFlags=i.getAttribute("flags"),this._aOffset=i.getAttribute("offset"),this._aModelMatrixCol0=i.getAttribute("modelMatrixCol0"),this._aModelMatrixCol1=i.getAttribute("modelMatrixCol1"),this._aModelMatrixCol2=i.getAttribute("modelMatrixCol2"),this._uColorMap="uColorMap",this._uOcclusionTexture="uOcclusionTexture",this._uSAOParams=i.getLocation("uSAOParams"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=i.getLocation("logDepthBufFC"))}_bindProgram(){const e=this._scene,t=e.canvas.gl,s=e._lightsState.lights,i=e.camera.project;this._program.bind(),t.uniformMatrix4fv(this._uProjMatrix,!1,i.matrix),this._uLightAmbient&&t.uniform4fv(this._uLightAmbient,e._lightsState.getAmbientColorAndIntensity());for(let e=0,i=s.length;e<i;e++){const i=s[e];this._uLightColor[e]&&t.uniform4f(this._uLightColor[e],i.color[0],i.color[1],i.color[2],i.intensity),this._uLightPos[e]&&(t.uniform3fv(this._uLightPos[e],i.pos),this._uLightAttenuation[e]&&t.uniform1f(this._uLightAttenuation[e],i.attenuation)),this._uLightDir[e]&&t.uniform3fv(this._uLightDir[e],i.dir)}if(e.logarithmicDepthBufferEnabled){const e=2/(Math.log(i.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}this._uGammaFactor&&t.uniform1f(this._uGammaFactor,e.gammaFactor)}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Instancing geometry drawing vertex shader"),s.push("uniform int renderPass;"),s.push("in vec3 position;"),s.push("in vec4 color;"),s.push("in vec2 uv;"),s.push("in float flags;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("in vec4 modelMatrixCol0;"),s.push("in vec4 modelMatrixCol1;"),s.push("in vec4 modelMatrixCol2;"),s.push("uniform mat4 worldMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),s.push("uniform mat3 uvDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;"),s.push("bool isPerspectiveMatrix(mat4 m) {"),s.push("    return (m[2][3] == - 1.0);"),s.push("}"),s.push("out float isPerspective;")),t&&(s.push("out vec4 vWorldPosition;"),s.push("out float vFlags;")),s.push("out vec4 vViewPosition;"),s.push("out vec4 vColor;"),s.push("out vec2 vUV;"),s.push("void main(void) {"),s.push("int colorFlag = int(flags) & 0xF;"),s.push("if (colorFlag != renderPass) {"),s.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("} else {"),s.push("vec4 worldPosition =  positionsDecodeMatrix * vec4(position, 1.0); "),s.push("worldPosition = worldMatrix * vec4(dot(worldPosition, modelMatrixCol0), dot(worldPosition, modelMatrixCol1), dot(worldPosition, modelMatrixCol2), 1.0);"),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("vec4 viewPosition  = viewMatrix * worldPosition; "),s.push("vViewPosition = viewPosition;"),s.push("vColor = vec4(float(color.r) / 255.0, float(color.g) / 255.0, float(color.b) / 255.0, float(color.a) / 255.0);"),s.push("vUV = (uvDecodeMatrix * vec3(uv, 1.0)).xy;"),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&(s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("isPerspective = float (isPerspectiveMatrix(projMatrix));")),t&&(s.push("vWorldPosition = worldPosition;"),s.push("vFlags = flags;")),s.push("gl_Position = clipPos;"),s.push("}"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e.gammaOutput,s=e._sectionPlanesState,i=e._lightsState;let r,o;const n=s.sectionPlanes.length>0,a=[];if(a.push("#version 300 es"),a.push("// Instancing geometry drawing fragment shader"),a.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),a.push("precision highp float;"),a.push("precision highp int;"),a.push("#else"),a.push("precision mediump float;"),a.push("precision mediump int;"),a.push("#endif"),e.logarithmicDepthBufferEnabled&&(a.push("in float isPerspective;"),a.push("uniform float logDepthBufFC;"),a.push("in float vFragDepth;")),a.push("uniform sampler2D uColorMap;"),this._withSAO&&(a.push("uniform sampler2D uOcclusionTexture;"),a.push("uniform vec4      uSAOParams;"),a.push("const float       packUpscale = 256. / 255.;"),a.push("const float       unpackDownScale = 255. / 256.;"),a.push("const vec3        packFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );"),a.push("const vec4        unPackFactors = unpackDownScale / vec4( packFactors, 1. );"),a.push("float unpackRGBToFloat( const in vec4 v ) {"),a.push("    return dot( v, unPackFactors );"),a.push("}")),a.push("uniform float gammaFactor;"),a.push("vec4 linearToLinear( in vec4 value ) {"),a.push("  return value;"),a.push("}"),a.push("vec4 sRGBToLinear( in vec4 value ) {"),a.push("  return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );"),a.push("}"),a.push("vec4 gammaToLinear( in vec4 value) {"),a.push("  return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );"),a.push("}"),t&&(a.push("vec4 linearToGamma( in vec4 value, in float gammaFactor ) {"),a.push("  return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );"),a.push("}")),n){a.push("in vec4 vWorldPosition;"),a.push("in float vFlags;");for(let e=0,t=s.sectionPlanes.length;e<t;e++)a.push("uniform bool sectionPlaneActive"+e+";"),a.push("uniform vec3 sectionPlanePos"+e+";"),a.push("uniform vec3 sectionPlaneDir"+e+";")}for(a.push("uniform mat4 viewMatrix;"),a.push("uniform vec4 lightAmbient;"),r=0,o=i.lights.length;r<o;r++){const e=i.lights[r];"ambient"!==e.type&&(a.push("uniform vec4 lightColor"+r+";"),"dir"===e.type&&a.push("uniform vec3 lightDir"+r+";"),"point"===e.type&&a.push("uniform vec3 lightPos"+r+";"),"spot"===e.type&&(a.push("uniform vec3 lightPos"+r+";"),a.push("uniform vec3 lightDir"+r+";")))}if(a.push("in vec4 vViewPosition;"),a.push("in vec4 vColor;"),a.push("in vec2 vUV;"),a.push("out vec4 outColor;"),a.push("void main(void) {"),n){a.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),a.push("  if (clippable) {"),a.push("  float dist = 0.0;");for(let e=0,t=s.sectionPlanes.length;e<t;e++)a.push("if (sectionPlaneActive"+e+") {"),a.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),a.push("}");a.push("  if (dist > 0.0) { "),a.push("      discard;"),a.push("  }"),a.push("}")}for(a.push("vec3 reflectedColor = vec3(0.0, 0.0, 0.0);"),a.push("vec3 viewLightDir = vec3(0.0, 0.0, -1.0);"),a.push("float lambertian = 1.0;"),a.push("vec3 xTangent = dFdx( vViewPosition.xyz );"),a.push("vec3 yTangent = dFdy( vViewPosition.xyz );"),a.push("vec3 viewNormal = normalize( cross( xTangent, yTangent ) );"),r=0,o=i.lights.length;r<o;r++){const e=i.lights[r];if("ambient"!==e.type){if("dir"===e.type)"view"===e.space?a.push("viewLightDir = normalize(lightDir"+r+");"):a.push("viewLightDir = normalize((viewMatrix * vec4(lightDir"+r+", 0.0)).xyz);");else if("point"===e.type)"view"===e.space?a.push("viewLightDir = -normalize(lightPos"+r+" - viewPosition.xyz);"):a.push("viewLightDir = -normalize((viewMatrix * vec4(lightPos"+r+", 0.0)).xyz);");else{if("spot"!==e.type)continue;"view"===e.space?a.push("viewLightDir = normalize(lightDir"+r+");"):a.push("viewLightDir = normalize((viewMatrix * vec4(lightDir"+r+", 0.0)).xyz);")}a.push("lambertian = max(dot(-viewNormal, viewLightDir), 0.0);"),a.push("reflectedColor += lambertian * (lightColor"+r+".rgb * lightColor"+r+".a);")}}return a.push("vec4 color =  vec4((lightAmbient.rgb * lightAmbient.a * vColor.rgb) + (reflectedColor * vColor.rgb), vColor.a);"),t?a.push("vec4 colorTexel = color * sRGBToLinear(texture(uColorMap, vUV));"):a.push("vec4 colorTexel = color * texture(uColorMap, vUV);"),a.push("float opacity = color.a;"),this._withSAO?(a.push("   float viewportWidth     = uSAOParams[0];"),a.push("   float viewportHeight    = uSAOParams[1];"),a.push("   float blendCutoff       = uSAOParams[2];"),a.push("   float blendFactor       = uSAOParams[3];"),a.push("   vec2 uv                 = vec2(gl_FragCoord.x / viewportWidth, gl_FragCoord.y / viewportHeight);"),a.push("   float ambient           = smoothstep(blendCutoff, 1.0, unpackRGBToFloat(texture(uOcclusionTexture, uv))) * blendFactor;"),a.push("   outColor                = vec4(vColor.rgb * colorTexel.rgb * ambient, opacity);")):a.push("   outColor                = vec4(vColor.rgb * colorTexel.rgb, opacity);"),t&&a.push("outColor = linearToGamma(outColor, gammaFactor);"),e.logarithmicDepthBufferEnabled&&a.push("    gl_FragDepth = isPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;"),a.push("}"),a}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}class rl{constructor(e){this._scene=e}_compile(){this._colorRenderer&&!this._colorRenderer.getValid()&&(this._colorRenderer.destroy(),this._colorRenderer=null),this._colorRendererWithSAO&&!this._colorRendererWithSAO.getValid()&&(this._colorRendererWithSAO.destroy(),this._colorRendererWithSAO=null),this._flatColorRenderer&&!this._flatColorRenderer.getValid()&&(this._flatColorRenderer.destroy(),this._flatColorRenderer=null),this._flatColorRendererWithSAO&&!this._flatColorRendererWithSAO.getValid()&&(this._flatColorRendererWithSAO.destroy(),this._flatColorRendererWithSAO=null),this._pbrRenderer&&!this._pbrRenderer.getValid()&&(this._pbrRenderer.destroy(),this._pbrRenderer=null),this._pbrRendererWithSAO&&!this._pbrRendererWithSAO.getValid()&&(this._pbrRendererWithSAO.destroy(),this._pbrRendererWithSAO=null),this._colorTextureRenderer&&!this._colorTextureRenderer.getValid()&&(this._colorTextureRenderer.destroy(),this._colorTextureRenderer=null),this._colorTextureRendererWithSAO&&!this._colorTextureRendererWithSAO.getValid()&&(this._colorTextureRendererWithSAO.destroy(),this._colorTextureRendererWithSAO=null),this._depthRenderer&&!this._depthRenderer.getValid()&&(this._depthRenderer.destroy(),this._depthRenderer=null),this._normalsRenderer&&!this._normalsRenderer.getValid()&&(this._normalsRenderer.destroy(),this._normalsRenderer=null),this._silhouetteRenderer&&!this._silhouetteRenderer.getValid()&&(this._silhouetteRenderer.destroy(),this._silhouetteRenderer=null),this._edgesRenderer&&!this._edgesRenderer.getValid()&&(this._edgesRenderer.destroy(),this._edgesRenderer=null),this._edgesColorRenderer&&!this._edgesColorRenderer.getValid()&&(this._edgesColorRenderer.destroy(),this._edgesColorRenderer=null),this._pickMeshRenderer&&!this._pickMeshRenderer.getValid()&&(this._pickMeshRenderer.destroy(),this._pickMeshRenderer=null),this._pickDepthRenderer&&!this._pickDepthRenderer.getValid()&&(this._pickDepthRenderer.destroy(),this._pickDepthRenderer=null),this._pickNormalsRenderer&&!1===this._pickNormalsRenderer.getValid()&&(this._pickNormalsRenderer.destroy(),this._pickNormalsRenderer=null),this._pickNormalsFlatRenderer&&!this._pickNormalsFlatRenderer.getValid()&&(this._pickNormalsFlatRenderer.destroy(),this._pickNormalsFlatRenderer=null),this._occlusionRenderer&&!1===this._occlusionRenderer.getValid()&&(this._occlusionRenderer.destroy(),this._occlusionRenderer=null),this._shadowRenderer&&!this._shadowRenderer.getValid()&&(this._shadowRenderer.destroy(),this._shadowRenderer=null)}get colorRenderer(){return this._colorRenderer||(this._colorRenderer=new Pa(this._scene,!1)),this._colorRenderer}get colorRendererWithSAO(){return this._colorRendererWithSAO||(this._colorRendererWithSAO=new Pa(this._scene,!0)),this._colorRendererWithSAO}get flatColorRenderer(){return this._flatColorRenderer||(this._flatColorRenderer=new Ra(this._scene,!1)),this._flatColorRenderer}get flatColorRendererWithSAO(){return this._flatColorRendererWithSAO||(this._flatColorRendererWithSAO=new Ra(this._scene,!0)),this._flatColorRendererWithSAO}get pbrRenderer(){return this._pbrRenderer||(this._pbrRenderer=new Ja(this._scene,!1)),this._pbrRenderer}get pbrRendererWithSAO(){return this._pbrRendererWithSAO||(this._pbrRendererWithSAO=new Ja(this._scene,!0)),this._pbrRendererWithSAO}get colorTextureRenderer(){return this._colorTextureRenderer||(this._colorTextureRenderer=new il(this._scene,!1)),this._colorTextureRenderer}get colorTextureRendererWithSAO(){return this._colorTextureRendererWithSAO||(this._colorTextureRendererWithSAO=new il(this._scene,!0)),this._colorTextureRendererWithSAO}get silhouetteRenderer(){return this._silhouetteRenderer||(this._silhouetteRenderer=new xa(this._scene)),this._silhouetteRenderer}get depthRenderer(){return this._depthRenderer||(this._depthRenderer=new Qa(this._scene)),this._depthRenderer}get normalsRenderer(){return this._normalsRenderer||(this._normalsRenderer=new za(this._scene)),this._normalsRenderer}get edgesRenderer(){return this._edgesRenderer||(this._edgesRenderer=new Sa(this._scene)),this._edgesRenderer}get edgesColorRenderer(){return this._edgesColorRenderer||(this._edgesColorRenderer=new Ma(this._scene)),this._edgesColorRenderer}get pickMeshRenderer(){return this._pickMeshRenderer||(this._pickMeshRenderer=new Fa(this._scene)),this._pickMeshRenderer}get pickNormalsRenderer(){return this._pickNormalsRenderer||(this._pickNormalsRenderer=new Ga(this._scene)),this._pickNormalsRenderer}get pickNormalsFlatRenderer(){return this._pickNormalsFlatRenderer||(this._pickNormalsFlatRenderer=new el(this._scene)),this._pickNormalsFlatRenderer}get pickDepthRenderer(){return this._pickDepthRenderer||(this._pickDepthRenderer=new Ua(this._scene)),this._pickDepthRenderer}get occlusionRenderer(){return this._occlusionRenderer||(this._occlusionRenderer=new ka(this._scene)),this._occlusionRenderer}get shadowRenderer(){return this._shadowRenderer||(this._shadowRenderer=new Ya(this._scene)),this._shadowRenderer}_destroy(){this._colorRenderer&&this._colorRenderer.destroy(),this._colorRendererWithSAO&&this._colorRendererWithSAO.destroy(),this._flatColorRenderer&&this._flatColorRenderer.destroy(),this._flatColorRendererWithSAO&&this._flatColorRendererWithSAO.destroy(),this._pbrRenderer&&this._pbrRenderer.destroy(),this._pbrRendererWithSAO&&this._pbrRendererWithSAO.destroy(),this._colorTextureRenderer&&this._colorTextureRenderer.destroy(),this._colorTextureRendererWithSAO&&this._colorTextureRendererWithSAO.destroy(),this._depthRenderer&&this._depthRenderer.destroy(),this._normalsRenderer&&this._normalsRenderer.destroy(),this._silhouetteRenderer&&this._silhouetteRenderer.destroy(),this._edgesRenderer&&this._edgesRenderer.destroy(),this._edgesColorRenderer&&this._edgesColorRenderer.destroy(),this._pickMeshRenderer&&this._pickMeshRenderer.destroy(),this._pickDepthRenderer&&this._pickDepthRenderer.destroy(),this._pickNormalsRenderer&&this._pickNormalsRenderer.destroy(),this._pickNormalsFlatRenderer&&this._pickNormalsFlatRenderer.destroy(),this._occlusionRenderer&&this._occlusionRenderer.destroy(),this._shadowRenderer&&this._shadowRenderer.destroy()}}const ol={};const nl=new Uint8Array(4),al=new Float32Array(1),ll=p.vec4([0,0,0,1]),hl=p.vec4([0,0,0,1]),cl=p.vec4([0,0,0,1]),ul=new Float32Array(3),Al=p.vec3(),pl=p.vec3(),dl=p.vec3(),fl=p.vec3(),ml=p.vec3(),gl=p.vec3(),yl=p.vec3();class El{constructor(e){this.model=e.model,this.sortId="TrianglesInstancingLayer"+(e.solid?"-solid":"-surface")+(e.normals?"-normals":"-autoNormals"),this.layerIndex=e.layerIndex,this._instancingRenderers=function(e){const t=e.id;let s=ol[t];return s||(s=new rl(e),ol[t]=s,s._compile(),e.on("compile",(()=>{s._compile()})),e.on("destroyed",(()=>{delete ol[t],s._destroy()}))),s}(e.model.scene),this._aabb=p.collapseAABB3();const t={numInstances:0,obb:p.OBB3(),origin:p.vec3(),geometry:e.geometry,textureSet:e.textureSet,pbrSupported:!1};this._state=new Ze(t),this._numPortions=0,this._numVisibleLayerPortions=0,this._numTransparentLayerPortions=0,this._numXRayedLayerPortions=0,this._numHighlightedLayerPortions=0,this._numSelectedLayerPortions=0,this._numClippableLayerPortions=0,this._numEdgesLayerPortions=0,this._numPickableLayerPortions=0,this._numCulledLayerPortions=0,this.numIndices=e.geometry.numIndices,this._colors=[],this._metallicRoughness=[],this._pickColors=[],this._offsets=[],this._modelMatrixCol0=[],this._modelMatrixCol1=[],this._modelMatrixCol2=[],this._modelNormalMatrixCol0=[],this._modelNormalMatrixCol1=[],this._modelNormalMatrixCol2=[],this._portions=[],e.origin&&this._state.origin.set(e.origin),this._finalized=!1,this.aabb=p.collapseAABB3(),this.solid=!!e.solid}createPortion(e){const t=e.color,s=e.metallic,i=e.roughness,r=e.opacity,o=e.meshMatrix,n=e.worldMatrix,a=e.aabb,l=e.pickColor;if(this._finalized)throw"Already finalized";const h=t[0],c=t[1],u=t[2];if(t[3],this._colors.push(h),this._colors.push(c),this._colors.push(u),this._colors.push(r),this._metallicRoughness.push(null!=s?s:0),this._metallicRoughness.push(null!=i?i:255),this.model.scene.entityOffsetsEnabled&&(this._offsets.push(0),this._offsets.push(0),this._offsets.push(0)),this._modelMatrixCol0.push(o[0]),this._modelMatrixCol0.push(o[4]),this._modelMatrixCol0.push(o[8]),this._modelMatrixCol0.push(o[12]),this._modelMatrixCol1.push(o[1]),this._modelMatrixCol1.push(o[5]),this._modelMatrixCol1.push(o[9]),this._modelMatrixCol1.push(o[13]),this._modelMatrixCol2.push(o[2]),this._modelMatrixCol2.push(o[6]),this._modelMatrixCol2.push(o[10]),this._modelMatrixCol2.push(o[14]),this._state.geometry.normalsBuf){let e=p.transposeMat4(o,p.mat4()),t=p.inverseMat4(e);this._modelNormalMatrixCol0.push(t[0]),this._modelNormalMatrixCol0.push(t[4]),this._modelNormalMatrixCol0.push(t[8]),this._modelNormalMatrixCol0.push(t[12]),this._modelNormalMatrixCol1.push(t[1]),this._modelNormalMatrixCol1.push(t[5]),this._modelNormalMatrixCol1.push(t[9]),this._modelNormalMatrixCol1.push(t[13]),this._modelNormalMatrixCol2.push(t[2]),this._modelNormalMatrixCol2.push(t[6]),this._modelNormalMatrixCol2.push(t[10]),this._modelNormalMatrixCol2.push(t[14])}this._pickColors.push(l[0]),this._pickColors.push(l[1]),this._pickColors.push(l[2]),this._pickColors.push(l[3]),p.collapseAABB3(a);const A=this._state.geometry.obb,d=A.length;for(let e=0;e<d;e+=4)ll[0]=A[e+0],ll[1]=A[e+1],ll[2]=A[e+2],p.transformPoint4(o,ll,hl),n?(p.transformPoint4(n,hl,cl),p.expandAABB3Point3(a,cl)):p.expandAABB3Point3(a,hl);if(this._state.origin){const e=this._state.origin;a[0]+=e[0],a[1]+=e[1],a[2]+=e[2],a[3]+=e[0],a[4]+=e[1],a[5]+=e[2]}p.expandAABB3(this.aabb,a),this._state.numInstances++;const f=this._portions.length,m={};return this.model.scene.pickSurfacePrecisionEnabled&&(m.matrix=o.slice(),m.inverseMatrix=null,m.normalMatrix=null),this._portions.push(m),this._numPortions++,this.model.numPortions++,f}finalize(){if(this._finalized)throw"Already finalized";const e=this._state,t=e.geometry,s=e.textureSet,i=this.model.scene.canvas.gl,r=this._colors.length,o=r/4;if(r>0){let e=!1;this._state.colorsBuf=new ye(i,i.ARRAY_BUFFER,new Uint8Array(this._colors),this._colors.length,4,i.DYNAMIC_DRAW,e),this._colors=[]}if(this._metallicRoughness.length>0){const e=new Uint8Array(this._metallicRoughness);let t=!1;this._state.metallicRoughnessBuf=new ye(i,i.ARRAY_BUFFER,e,this._metallicRoughness.length,2,i.STATIC_DRAW,t)}if(o>0){let e=!1;this._state.flagsBuf=new ye(i,i.ARRAY_BUFFER,new Float32Array(o),o,1,i.DYNAMIC_DRAW,e)}if(this.model.scene.entityOffsetsEnabled&&this._offsets.length>0){const e=!1;this._state.offsetsBuf=new ye(i,i.ARRAY_BUFFER,new Float32Array(this._offsets),this._offsets.length,3,i.DYNAMIC_DRAW,e),this._offsets=[]}if(this._modelMatrixCol0.length>0){const e=!1;this._state.modelMatrixCol0Buf=new ye(i,i.ARRAY_BUFFER,new Float32Array(this._modelMatrixCol0),this._modelMatrixCol0.length,4,i.STATIC_DRAW,e),this._state.modelMatrixCol1Buf=new ye(i,i.ARRAY_BUFFER,new Float32Array(this._modelMatrixCol1),this._modelMatrixCol1.length,4,i.STATIC_DRAW,e),this._state.modelMatrixCol2Buf=new ye(i,i.ARRAY_BUFFER,new Float32Array(this._modelMatrixCol2),this._modelMatrixCol2.length,4,i.STATIC_DRAW,e),this._modelMatrixCol0=[],this._modelMatrixCol1=[],this._modelMatrixCol2=[],this._state.geometry.normalsBuf&&(this._state.modelNormalMatrixCol0Buf=new ye(i,i.ARRAY_BUFFER,new Float32Array(this._modelNormalMatrixCol0),this._modelNormalMatrixCol0.length,4,i.STATIC_DRAW,e),this._state.modelNormalMatrixCol1Buf=new ye(i,i.ARRAY_BUFFER,new Float32Array(this._modelNormalMatrixCol1),this._modelNormalMatrixCol1.length,4,i.STATIC_DRAW,e),this._state.modelNormalMatrixCol2Buf=new ye(i,i.ARRAY_BUFFER,new Float32Array(this._modelNormalMatrixCol2),this._modelNormalMatrixCol2.length,4,i.STATIC_DRAW,e),this._modelNormalMatrixCol0=[],this._modelNormalMatrixCol1=[],this._modelNormalMatrixCol2=[])}if(this._pickColors.length>0){const e=!1;this._state.pickColorsBuf=new ye(i,i.ARRAY_BUFFER,new Uint8Array(this._pickColors),this._pickColors.length,4,i.STATIC_DRAW,e),this._pickColors=[]}this._state.pbrSupported=!!(e.metallicRoughnessBuf&&t.uvBuf&&t.normalsBuf&&s&&s.colorTexture&&s.metallicRoughnessTexture),this._state.colorTextureSupported=!!t.uvBuf&&!!s&&!!s.colorTexture,this._finalized=!0}initFlags(e,t,s){t&N&&(this._numVisibleLayerPortions++,this.model.numVisibleLayerPortions++),t&F&&(this._numHighlightedLayerPortions++,this.model.numHighlightedLayerPortions++),t&B&&(this._numXRayedLayerPortions++,this.model.numXRayedLayerPortions++),t&L&&(this._numSelectedLayerPortions++,this.model.numSelectedLayerPortions++),t&w&&(this._numClippableLayerPortions++,this.model.numClippableLayerPortions++),t&U&&(this._numEdgesLayerPortions++,this.model.numEdgesLayerPortions++),t&S&&(this._numPickableLayerPortions++,this.model.numPickableLayerPortions++),t&O&&(this._numCulledLayerPortions++,this.model.numCulledLayerPortions++),s&&(this._numTransparentLayerPortions++,this.model.numTransparentLayerPortions++),this._setFlags(e,t,s)}setVisible(e,t,s){if(!this._finalized)throw"Not finalized";t&N?(this._numVisibleLayerPortions++,this.model.numVisibleLayerPortions++):(this._numVisibleLayerPortions--,this.model.numVisibleLayerPortions--),this._setFlags(e,t,s)}setHighlighted(e,t,s){if(!this._finalized)throw"Not finalized";t&F?(this._numHighlightedLayerPortions++,this.model.numHighlightedLayerPortions++):(this._numHighlightedLayerPortions--,this.model.numHighlightedLayerPortions--),this._setFlags(e,t,s)}setXRayed(e,t,s){if(!this._finalized)throw"Not finalized";t&B?(this._numXRayedLayerPortions++,this.model.numXRayedLayerPortions++):(this._numXRayedLayerPortions--,this.model.numXRayedLayerPortions--),this._setFlags(e,t,s)}setSelected(e,t,s){if(!this._finalized)throw"Not finalized";t&L?(this._numSelectedLayerPortions++,this.model.numSelectedLayerPortions++):(this._numSelectedLayerPortions--,this.model.numSelectedLayerPortions--),this._setFlags(e,t,s)}setEdges(e,t,s){if(!this._finalized)throw"Not finalized";t&U?(this._numEdgesLayerPortions++,this.model.numEdgesLayerPortions++):(this._numEdgesLayerPortions--,this.model.numEdgesLayerPortions--),this._setFlags(e,t,s)}setClippable(e,t){if(!this._finalized)throw"Not finalized";t&w?(this._numClippableLayerPortions++,this.model.numClippableLayerPortions++):(this._numClippableLayerPortions--,this.model.numClippableLayerPortions--),this._setFlags(e,t)}setCollidable(e,t){if(!this._finalized)throw"Not finalized"}setPickable(e,t,s){if(!this._finalized)throw"Not finalized";t&S?(this._numPickableLayerPortions++,this.model.numPickableLayerPortions++):(this._numPickableLayerPortions--,this.model.numPickableLayerPortions--),this._setFlags(e,t,s)}setCulled(e,t,s){if(!this._finalized)throw"Not finalized";t&O?(this._numCulledLayerPortions++,this.model.numCulledLayerPortions++):(this._numCulledLayerPortions--,this.model.numCulledLayerPortions--),this._setFlags(e,t,s)}setColor(e,t){if(!this._finalized)throw"Not finalized";nl[0]=t[0],nl[1]=t[1],nl[2]=t[2],nl[3]=t[3],this._state.colorsBuf&&this._state.colorsBuf.setData(nl,4*e)}setTransparent(e,t,s){s?(this._numTransparentLayerPortions++,this.model.numTransparentLayerPortions++):(this._numTransparentLayerPortions--,this.model.numTransparentLayerPortions--),this._setFlags(e,t,s)}_setFlags(e,t,s){if(!this._finalized)throw"Not finalized";const i=!!(t&N),r=!!(t&B),o=!!(t&F),n=!!(t&L),a=!!(t&U),l=!!(t&S),h=!!(t&O);let c,u;c=!i||h||r||o&&!this.model.scene.highlightMaterial.glowThrough||n&&!this.model.scene.selectedMaterial.glowThrough?rn:s?nn:on,u=!i||h?rn:n?ln:o?an:r?hn:rn;let A=0;A=!i||h?rn:n?pn:o?An:r?dn:a?s?un:cn:rn;let p=0;p|=c,p|=u<<4,p|=A<<8,p|=(i&&!h&&l?fn:rn)<<12,p|=(t&w?1:0)<<16,al[0]=p,this._state.flagsBuf&&this._state.flagsBuf.setData(al,e)}setOffset(e,t){if(!this._finalized)throw"Not finalized";this.model.scene.entityOffsetsEnabled?(ul[0]=t[0],ul[1]=t[1],ul[2]=t[2],this._state.offsetsBuf&&this._state.offsetsBuf.setData(ul,3*e)):this.model.error("Entity#offset not enabled for this Viewer")}getEachVertex(e,t){if(!this.model.scene.pickSurfacePrecisionEnabled)return!1;const s=this._state,i=s.geometry,r=this._portions[e];if(!r)return void this.model.error("portion not found: "+e);const o=i.quantizedPositions,n=s.origin,a=r.offset,l=n[0]+a[0],h=n[1]+a[1],c=n[2]+a[2],u=ll,A=r.matrix,d=this.model.worldMatrix,f=i.positionsDecodeMatrix;for(let e=0,s=o.length;e<s;e+=3)u[0]=o[e],u[1]=o[e+1],u[2]=o[e+2],p.decompressPosition(u,f),p.transformPoint3(A,u),p.transformPoint3(d,u),u[0]+=l,u[1]+=h,u[2]+=c,t(u)}drawColorOpaque(e,t){if(this._numCulledLayerPortions===this._numPortions||0===this._numVisibleLayerPortions||this._numTransparentLayerPortions===this._numPortions||this._numXRayedLayerPortions===this._numPortions)return;this._updateBackfaceCull(e,t);const s=this._state.geometry;t.withSAO&&this.model.saoEnabled?t.pbrEnabled&&this.model.pbrEnabled&&this._state.pbrSupported?this._instancingRenderers.pbrRendererWithSAO&&this._instancingRenderers.pbrRendererWithSAO.drawLayer(t,this,on):t.colorTextureEnabled&&this.model.colorTextureEnabled&&this._state.colorTextureSupported?this._instancingRenderers.colorTextureRendererWithSAO&&this._instancingRenderers.colorTextureRendererWithSAO.drawLayer(t,this,on):s.normalsBuf?this._instancingRenderers.colorRendererWithSAO&&this._instancingRenderers.colorRendererWithSAO.drawLayer(t,this,on):this._instancingRenderers.flatColorRendererWithSAO&&this._instancingRenderers.flatColorRendererWithSAO.drawLayer(t,this,on):t.pbrEnabled&&this.model.pbrEnabled&&this._state.pbrSupported?this._instancingRenderers.pbrRenderer&&this._instancingRenderers.pbrRenderer.drawLayer(t,this,on):t.colorTextureEnabled&&this.model.colorTextureEnabled&&this._state.colorTextureSupported?this._instancingRenderers.colorTextureRenderer&&this._instancingRenderers.colorTextureRenderer.drawLayer(t,this,on):s.normalsBuf?this._instancingRenderers.colorRenderer&&this._instancingRenderers.colorRenderer.drawLayer(t,this,on):this._instancingRenderers.flatColorRenderer&&this._instancingRenderers.flatColorRenderer.drawLayer(t,this,on)}_updateBackfaceCull(e,t){const s=this.model.backfaces||!this.solid||e.sectioned;if(t.backfaces!==s){const e=t.gl;s?e.disable(e.CULL_FACE):e.enable(e.CULL_FACE),t.backfaces=s}}drawColorTransparent(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numTransparentLayerPortions&&this._numXRayedLayerPortions!==this._numPortions&&(this._updateBackfaceCull(e,t),t.pbrEnabled&&this.model.pbrEnabled&&this._state.pbrSupported?this._instancingRenderers.pbrRenderer&&this._instancingRenderers.pbrRenderer.drawLayer(t,this,nn):t.colorTextureEnabled&&this.model.colorTextureEnabled&&this._state.colorTextureSupported?this._instancingRenderers.colorTextureRenderer&&this._instancingRenderers.colorTextureRenderer.drawLayer(t,this,nn):this._state.normalsBuf?this._instancingRenderers.colorRenderer&&this._instancingRenderers.colorRenderer.drawLayer(t,this,nn):this._instancingRenderers.flatColorRenderer&&this._instancingRenderers.flatColorRenderer.drawLayer(t,this,nn))}drawDepth(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&this._numTransparentLayerPortions!==this._numPortions&&this._numXRayedLayerPortions!==this._numPortions&&(this._updateBackfaceCull(e,t),this._instancingRenderers.depthRenderer&&this._instancingRenderers.depthRenderer.drawLayer(t,this,on))}drawNormals(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&this._numTransparentLayerPortions!==this._numPortions&&this._numXRayedLayerPortions!==this._numPortions&&(this._updateBackfaceCull(e,t),this._instancingRenderers.normalsRenderer&&this._instancingRenderers.normalsRenderer.drawLayer(t,this,on))}drawSilhouetteXRayed(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numXRayedLayerPortions&&(this._updateBackfaceCull(e,t),this._instancingRenderers.silhouetteRenderer&&this._instancingRenderers.silhouetteRenderer.drawLayer(t,this,hn))}drawSilhouetteHighlighted(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numHighlightedLayerPortions&&(this._updateBackfaceCull(e,t),this._instancingRenderers.silhouetteRenderer&&this._instancingRenderers.silhouetteRenderer.drawLayer(t,this,an))}drawSilhouetteSelected(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numSelectedLayerPortions&&(this._updateBackfaceCull(e,t),this._instancingRenderers.silhouetteRenderer&&this._instancingRenderers.silhouetteRenderer.drawLayer(t,this,ln))}drawEdgesColorOpaque(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numEdgesLayerPortions&&this._instancingRenderers.edgesColorRenderer&&this._instancingRenderers.edgesColorRenderer.drawLayer(t,this,cn)}drawEdgesColorTransparent(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numEdgesLayerPortions&&this._instancingRenderers.edgesColorRenderer&&this._instancingRenderers.edgesColorRenderer.drawLayer(t,this,un)}drawEdgesXRayed(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numXRayedLayerPortions&&this._instancingRenderers.edgesRenderer&&this._instancingRenderers.edgesRenderer.drawLayer(t,this,dn)}drawEdgesHighlighted(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numHighlightedLayerPortions&&this._instancingRenderers.edgesRenderer&&this._instancingRenderers.edgesRenderer.drawLayer(t,this,An)}drawEdgesSelected(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numSelectedLayerPortions&&this._instancingRenderers.edgesRenderer&&this._instancingRenderers.edgesRenderer.drawLayer(t,this,pn)}drawOcclusion(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&(this._updateBackfaceCull(e,t),this._instancingRenderers.occlusionRenderer&&this._instancingRenderers.occlusionRenderer.drawLayer(t,this,on))}drawShadow(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&(this._updateBackfaceCull(e,t),this._instancingRenderers.shadowRenderer&&this._instancingRenderers.shadowRenderer.drawLayer(t,this,on))}drawPickMesh(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&(this._updateBackfaceCull(e,t),this._instancingRenderers.pickMeshRenderer&&this._instancingRenderers.pickMeshRenderer.drawLayer(t,this,fn))}drawPickDepths(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&(this._updateBackfaceCull(e,t),this._instancingRenderers.pickDepthRenderer&&this._instancingRenderers.pickDepthRenderer.drawLayer(t,this,fn))}drawPickNormals(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&(this._updateBackfaceCull(e,t),this._instancingRenderers.pickNormalsRenderer&&this._instancingRenderers.pickNormalsRenderer.drawLayer(t,this,fn))}precisionRayPickSurface(e,t,s,i,r){if(!this.model.scene.pickSurfacePrecisionEnabled)return!1;const o=this._state.geometry,n=this._state,a=this._portions[e];if(!a)return this.model.error("portion not found: "+e),!1;a.inverseMatrix||(a.inverseMatrix=p.inverseMat4(a.matrix,p.mat4())),r&&!a.normalMatrix&&(a.normalMatrix=p.transposeMat4(a.inverseMatrix,p.mat4()));const l=o.quantizedPositions,h=o.indices,c=n.origin,u=a.offset,A=Al,d=pl;A.set(c?p.subVec3(t,c,dl):t),d.set(s),u&&p.subVec3(A,u),p.transformRay(this.model.worldNormalMatrix,A,d,A,d),p.transformRay(a.inverseMatrix,A,d,A,d);const f=fl,m=ml,g=gl;let y=!1,E=0;const v=yl;for(let e=0,s=h.length;e<s;e+=3){const s=3*h[e+0],o=3*h[e+1],_=3*h[e+2];f[0]=l[s],f[1]=l[s+1],f[2]=l[s+2],m[0]=l[o],m[1]=l[o+1],m[2]=l[o+2],g[0]=l[_],g[1]=l[_+1],g[2]=l[_+2];const{positionsDecodeMatrix:I}=n.geometry;if(p.decompressPosition(f,I),p.decompressPosition(m,I),p.decompressPosition(g,I),p.rayTriangleIntersect(A,d,f,m,g,v)){p.transformPoint3(a.matrix,v,v),p.transformPoint3(this.model.worldMatrix,v,v),u&&p.addVec3(v,u),c&&p.addVec3(v,c);const e=Math.abs(p.lenVec3(p.subVec3(v,t,[])));(!y||e>E)&&(E=e,i.set(v),r&&p.triangleNormal(f,m,g,r),y=!0)}}return y&&r&&(p.transformVec3(a.normalMatrix,r,r),p.transformVec3(this.model.worldNormalMatrix,r,r),p.normalizeVec3(r)),y}destroy(){const e=this._state;e.colorsBuf&&(e.colorsBuf.destroy(),e.colorsBuf=null),e.metallicRoughnessBuf&&(e.metallicRoughnessBuf.destroy(),e.metallicRoughnessBuf=null),e.flagsBuf&&(e.flagsBuf.destroy(),e.flagsBuf=null),e.offsetsBuf&&(e.offsetsBuf.destroy(),e.offsetsBuf=null),e.modelMatrixCol0Buf&&(e.modelMatrixCol0Buf.destroy(),e.modelMatrixCol0Buf=null),e.modelMatrixCol1Buf&&(e.modelMatrixCol1Buf.destroy(),e.modelMatrixCol1Buf=null),e.modelMatrixCol2Buf&&(e.modelMatrixCol2Buf.destroy(),e.modelMatrixCol2Buf=null),e.modelNormalMatrixCol0Buf&&(e.modelNormalMatrixCol0Buf.destroy(),e.modelNormalMatrixCol0Buf=null),e.modelNormalMatrixCol1Buf&&(e.modelNormalMatrixCol1Buf.destroy(),e.modelNormalMatrixCol1Buf=null),e.modelNormalMatrixCol2Buf&&(e.modelNormalMatrixCol2Buf.destroy(),e.modelNormalMatrixCol2Buf=null),e.pickColorsBuf&&(e.pickColorsBuf.destroy(),e.pickColorsBuf=null),e.destroy()}}const vl=p.vec3();class _l{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=this._scene,r=i.camera,o=t.model,n=i.canvas.gl,a=t._state,l=t._state.origin;if(!this._program&&(this._allocate(),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram(e)),n.uniform1i(this._uRenderPass,s),n.uniformMatrix4fv(this._uViewMatrix,!1,l?j(r.viewMatrix,l):r.viewMatrix),n.uniformMatrix4fv(this._uWorldMatrix,!1,o.worldMatrix),n.lineWidth(i.linesMaterial.lineWidth);const h=i._sectionPlanesState.sectionPlanes.length;if(h>0){const e=i._sectionPlanesState.sectionPlanes,s=t.layerIndex*h,r=o.renderFlags;for(let t=0;t<h;t++){const i=this._uSectionPlanes[t];if(i){const o=r.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,o?1:0),o){const s=e[t];if(l){const e=W(s.dist,s.dir,l,vl);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,t._state.positionsDecodeMatrix),this._aPosition.bindArrayBuffer(a.positionsBuf),this._aColor&&this._aColor.bindArrayBuffer(a.colorsBuf),this._aFlags&&this._aFlags.bindArrayBuffer(a.flagsBuf),this._aOffset&&this._aOffset.bindArrayBuffer(a.offsetsBuf),a.indicesBuf.bind(),n.drawElements(n.LINES,a.indicesBuf.numItems,a.indicesBuf.itemType,0),e.drawElements++}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uPositionsDecodeMatrix=s.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=s.getLocation("worldMatrix"),this._uViewMatrix=s.getLocation("viewMatrix"),this._uProjMatrix=s.getLocation("projMatrix"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});this._aPosition=s.getAttribute("position"),this._aOffset=s.getAttribute("offset"),this._aColor=s.getAttribute("color"),this._aFlags=s.getAttribute("flags"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC"))}_bindProgram(){const e=this._scene,t=e.canvas.gl,s=this._program,i=e.camera.project;if(s.bind(),t.uniformMatrix4fv(this._uProjMatrix,!1,i.matrix),e.logarithmicDepthBufferEnabled){const e=2/(Math.log(i.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Lines batching color vertex shader"),s.push("uniform int renderPass;"),s.push("in vec3 position;"),s.push("in vec4 color;"),s.push("in float flags;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("uniform mat4 worldMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;")),t&&(s.push("out vec4 vWorldPosition;"),s.push("out float vFlags;")),s.push("out vec4 vColor;"),s.push("void main(void) {"),s.push("int colorFlag = int(flags) & 0xF;"),s.push("if (colorFlag != renderPass) {"),s.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("} else {"),s.push("vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),e.entityOffsetsEnabled&&s.push("worldPosition.xyz = worldPosition.xyz + offset;"),s.push("vec4 viewPosition  = viewMatrix * worldPosition; "),s.push("vColor = vec4(float(color.r) / 255.0, float(color.g) / 255.0, float(color.b) / 255.0, float(color.a) / 255.0);"),t&&(s.push("vWorldPosition = worldPosition;"),s.push("vFlags = flags;")),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("gl_Position = clipPos;"),s.push("}"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Lines batching color fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("in vec4 vColor;"),i.push("out vec4 outColor;"),i.push("void main(void) {"),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("  float dist = 0.0;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("if (sectionPlaneActive"+e+") {"),i.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("}");i.push("  if (dist > 0.0) { discard; }"),i.push("}")}return i.push("   outColor            = vColor;"),e.logarithmicDepthBufferEnabled&&i.push("gl_FragDepth = log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Il=new Float32Array([1,1,1]),Tl=p.vec3();class Pl{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=t._state.origin;if(!this._program&&(this._allocate(),this.errors))return;if(e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),n.uniform1i(this._uRenderPass,s),s===hn){const e=r.xrayMaterial._state,t=e.fillColor,s=e.fillAlpha;n.uniform4f(this._uColor,t[0],t[1],t[2],s)}else if(s===an){const e=r.highlightMaterial._state,t=e.fillColor,s=e.fillAlpha;n.uniform4f(this._uColor,t[0],t[1],t[2],s)}else if(s===ln){const e=r.selectedMaterial._state,t=e.fillColor,s=e.fillAlpha;n.uniform4f(this._uColor,t[0],t[1],t[2],s)}else n.uniform4fv(this._uColor,Il);const h=l?j(o.viewMatrix,l):o.viewMatrix;n.uniformMatrix4fv(this._uViewMatrix,!1,h),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix),n.lineWidth(r.linesMaterial.lineWidth);const c=r._sectionPlanesState.sectionPlanes.length;if(c>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*c,o=i.renderFlags;for(let t=0;t<c;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(l){const e=W(s.dist,s.dir,l,Tl);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,t._state.positionsDecodeMatrix),this._aPosition.bindArrayBuffer(a.positionsBuf),this._aOffset&&this._aOffset.bindArrayBuffer(a.offsetsBuf),this._aFlags&&this._aFlags.bindArrayBuffer(a.flagsBuf),a.indicesBuf.bind(),n.drawElements(n.LINES,a.indicesBuf.numItems,a.indicesBuf.itemType,0)}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uPositionsDecodeMatrix=s.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=s.getLocation("worldMatrix"),this._uViewMatrix=s.getLocation("viewMatrix"),this._uProjMatrix=s.getLocation("projMatrix"),this._uColor=s.getLocation("color"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});this._aPosition=s.getAttribute("position"),this._aOffset=s.getAttribute("offset"),this._aFlags=s.getAttribute("flags"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC"))}_bindProgram(){const e=this._scene,t=e.canvas.gl,s=e.camera.project;if(this._program.bind(),t.uniformMatrix4fv(this._uProjMatrix,!1,s.matrix),e.logarithmicDepthBufferEnabled){const e=2/(Math.log(s.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Lines batching silhouette vertex shader"),s.push("uniform int renderPass;"),s.push("in vec3 position;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("in float flags;"),s.push("uniform mat4 worldMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),s.push("uniform vec4 color;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;")),t&&(s.push("out vec4 vWorldPosition;"),s.push("out float vFlags;")),s.push("void main(void) {"),s.push("int silhouetteFlag = int(flags) >> 4 & 0xF;"),s.push("if (silhouetteFlag != renderPass) {"),s.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("} else {"),s.push("      vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("vec4 viewPosition  = viewMatrix * worldPosition; "),t&&(s.push("vWorldPosition = worldPosition;"),s.push("vFlags = flags;")),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("gl_Position = clipPos;"),s.push("}"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Lines batching silhouette fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("uniform vec4 color;"),i.push("out vec4 outColor;"),i.push("void main(void) {"),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("  float dist = 0.0;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("if (sectionPlaneActive"+e+") {"),i.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("}");i.push("  if (dist > 0.0) { discard; }"),i.push("}")}return e.logarithmicDepthBufferEnabled&&i.push("gl_FragDepth = log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("outColor = color;"),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}class Dl{constructor(e){this._scene=e}_compile(){this._colorRenderer&&!this._colorRenderer.getValid()&&(this._colorRenderer.destroy(),this._colorRenderer=null),this._silhouetteRenderer&&!this._silhouetteRenderer.getValid()&&(this._silhouetteRenderer.destroy(),this._silhouetteRenderer=null)}get colorRenderer(){return this._colorRenderer||(this._colorRenderer=new _l(this._scene,!1)),this._colorRenderer}get silhouetteRenderer(){return this._silhouetteRenderer||(this._silhouetteRenderer=new Pl(this._scene)),this._silhouetteRenderer}_destroy(){this._colorRenderer&&this._colorRenderer.destroy(),this._silhouetteRenderer&&this._silhouetteRenderer.destroy()}}const bl={};class Rl{constructor(e=5e6){e>5e6&&(e=5e6),this.maxVerts=e,this.maxIndices=3*e,this.positions=[],this.colors=[],this.offsets=[],this.indices=[]}}const Cl=p.vec4([0,0,0,1]),xl=p.vec4([0,0,0,1]),Nl=p.vec4([0,0,0,1]),Ol=p.OBB3();class Sl{constructor(e){this.layerIndex=e.layerIndex,this._batchingRenderers=function(e){const t=e.id;let s=bl[t];return s||(s=new Dl(e),bl[t]=s,s._compile(),e.on("compile",(()=>{s._compile()})),e.on("destroyed",(()=>{delete bl[t],s._destroy()}))),s}(e.model.scene),this.model=e.model,this._buffer=new Rl(e.maxGeometryBatchSize),this._scratchMemory=e.scratchMemory,this._state=new Ze({positionsBuf:null,offsetsBuf:null,colorsBuf:null,flagsBuf:null,indicesBuf:null,positionsDecodeMatrix:p.mat4(),origin:null}),this._numPortions=0,this._numVisibleLayerPortions=0,this._numTransparentLayerPortions=0,this._numXRayedLayerPortions=0,this._numSelectedLayerPortions=0,this._numHighlightedLayerPortions=0,this._numClippableLayerPortions=0,this._numEdgesLayerPortions=0,this._numPickableLayerPortions=0,this._numCulledLayerPortions=0,this._modelAABB=p.collapseAABB3(),this._portions=[],this._numVerts=0,this._finalized=!1,e.positionsDecodeMatrix?(this._state.positionsDecodeMatrix.set(e.positionsDecodeMatrix),this._preCompressedPositionsExpected=!0):this._preCompressedPositionsExpected=!1,e.origin&&(this._state.origin=p.vec3(e.origin)),this.aabb=p.collapseAABB3()}canCreatePortion(e,t){if(this._finalized)throw"Already finalized";return this._buffer.positions.length+e<3*this._buffer.maxVerts&&this._buffer.indices.length+t<this._buffer.maxIndices}createPortion(e){if(this._finalized)throw"Already finalized";const t=e.positions,s=e.positionsCompressed,i=e.indices,r=e.color,o=e.opacity,n=e.meshMatrix,a=e.worldMatrix,l=e.worldAABB;e.pickColor;const h=this._buffer,c=h.positions.length/3;let u;if(this._preCompressedPositionsExpected){if(!s)throw"positionsCompressed expected";u=s.length/3;for(let e=0,t=s.length;e<t;e++)h.positions.push(s[e]);const e=it.getPositionsBounds(s),t=it.decompressPosition(e.min,this._state.positionsDecodeMatrix,[]),i=it.decompressPosition(e.max,this._state.positionsDecodeMatrix,[]);l[0]=t[0],l[1]=t[1],l[2]=t[2],l[3]=i[0],l[4]=i[1],l[5]=i[2],a&&(p.AABB3ToOBB3(l,Ol),p.transformOBB3(a,Ol),p.OBB3ToAABB3(Ol,l))}else{if(!t)throw"positions expected";u=t.length/3;const e=t.length,s=h.positions.length;for(let e=0,s=t.length;e<s;e++)h.positions.push(t[e]);if(n)for(let t=s,i=s+e;t<i;t+=3)Cl[0]=h.positions[t+0],Cl[1]=h.positions[t+1],Cl[2]=h.positions[t+2],p.transformPoint4(n,Cl,xl),h.positions[t+0]=xl[0],h.positions[t+1]=xl[1],h.positions[t+2]=xl[2],p.expandAABB3Point3(this._modelAABB,xl),a?(p.transformPoint4(a,xl,Nl),p.expandAABB3Point3(l,Nl)):p.expandAABB3Point3(l,xl);else for(let t=s,i=s+e;t<i;t+=3)Cl[0]=h.positions[t+0],Cl[1]=h.positions[t+1],Cl[2]=h.positions[t+2],p.expandAABB3Point3(this._modelAABB,Cl),a?(p.transformPoint4(a,Cl,xl),p.expandAABB3Point3(l,xl)):p.expandAABB3Point3(l,Cl)}if(this._state.origin){const e=this._state.origin;l[0]+=e[0],l[1]+=e[1],l[2]+=e[2],l[3]+=e[0],l[4]+=e[1],l[5]+=e[2]}if(p.expandAABB3(this.aabb,l),r){const e=r[0],t=r[1],s=r[2],i=o;for(let r=0;r<u;r++)h.colors.push(e),h.colors.push(t),h.colors.push(s),h.colors.push(i)}if(i)for(let e=0,t=i.length;e<t;e++)h.indices.push(i[e]+c);if(this.model.scene.entityOffsetsEnabled)for(let e=0;e<u;e++)h.offsets.push(0),h.offsets.push(0),h.offsets.push(0);const A=this._portions.length/2;return this._portions.push(c),this._portions.push(u),this._numPortions++,this.model.numPortions++,this._numVerts+=u,A}finalize(){if(this._finalized)return void this.model.error("Already finalized");const e=this._state,t=this.model.scene.canvas.gl,s=this._buffer;if(s.positions.length>0)if(this._preCompressedPositionsExpected){const i=new Uint16Array(s.positions);e.positionsBuf=new ye(t,t.ARRAY_BUFFER,i,s.positions.length,3,t.STATIC_DRAW)}else{const i=ia(new Float32Array(s.positions),this._modelAABB,e.positionsDecodeMatrix);e.positionsBuf=new ye(t,t.ARRAY_BUFFER,i,s.positions.length,3,t.STATIC_DRAW)}if(s.colors.length>0){const i=new Uint8Array(s.colors);let r=!1;e.colorsBuf=new ye(t,t.ARRAY_BUFFER,i,s.colors.length,4,t.DYNAMIC_DRAW,r)}if(s.colors.length>0){const i=s.colors.length/4,r=new Float32Array(i);let o=!1;e.flagsBuf=new ye(t,t.ARRAY_BUFFER,r,r.length,1,t.DYNAMIC_DRAW,o)}if(this.model.scene.entityOffsetsEnabled&&s.offsets.length>0){const i=new Float32Array(s.offsets);e.offsetsBuf=new ye(t,t.ARRAY_BUFFER,i,s.offsets.length,3,t.DYNAMIC_DRAW)}if(s.indices.length>0){const i=new Uint32Array(s.indices);e.indicesBuf=new ye(t,t.ELEMENT_ARRAY_BUFFER,i,s.indices.length,1,t.STATIC_DRAW)}this._buffer=null,this._finalized=!0}initFlags(e,t,s){t&N&&(this._numVisibleLayerPortions++,this.model.numVisibleLayerPortions++),t&F&&(this._numHighlightedLayerPortions++,this.model.numHighlightedLayerPortions++),t&B&&(this._numXRayedLayerPortions++,this.model.numXRayedLayerPortions++),t&L&&(this._numSelectedLayerPortions++,this.model.numSelectedLayerPortions++),t&w&&(this._numClippableLayerPortions++,this.model.numClippableLayerPortions++),t&U&&(this._numEdgesLayerPortions++,this.model.numEdgesLayerPortions++),t&S&&(this._numPickableLayerPortions++,this.model.numPickableLayerPortions++),t&O&&(this._numCulledLayerPortions++,this.model.numCulledLayerPortions++),s&&(this._numTransparentLayerPortions++,this.model.numTransparentLayerPortions++);this._setFlags(e,t,s,!0)}flushInitFlags(){this._setDeferredFlags()}setVisible(e,t,s){if(!this._finalized)throw"Not finalized";t&N?(this._numVisibleLayerPortions++,this.model.numVisibleLayerPortions++):(this._numVisibleLayerPortions--,this.model.numVisibleLayerPortions--),this._setFlags(e,t,s)}setHighlighted(e,t,s){if(!this._finalized)throw"Not finalized";t&F?(this._numHighlightedLayerPortions++,this.model.numHighlightedLayerPortions++):(this._numHighlightedLayerPortions--,this.model.numHighlightedLayerPortions--),this._setFlags(e,t,s)}setXRayed(e,t,s){if(!this._finalized)throw"Not finalized";t&B?(this._numXRayedLayerPortions++,this.model.numXRayedLayerPortions++):(this._numXRayedLayerPortions--,this.model.numXRayedLayerPortions--),this._setFlags(e,t,s)}setSelected(e,t,s){if(!this._finalized)throw"Not finalized";t&L?(this._numSelectedLayerPortions++,this.model.numSelectedLayerPortions++):(this._numSelectedLayerPortions--,this.model.numSelectedLayerPortions--),this._setFlags(e,t,s)}setEdges(e,t,s){if(!this._finalized)throw"Not finalized";t&U?(this._numEdgesLayerPortions++,this.model.numEdgesLayerPortions++):(this._numEdgesLayerPortions--,this.model.numEdgesLayerPortions--),this._setFlags(e,t,s)}setClippable(e,t){if(!this._finalized)throw"Not finalized";t&w?(this._numClippableLayerPortions++,this.model.numClippableLayerPortions++):(this._numClippableLayerPortions--,this.model.numClippableLayerPortions--),this._setFlags(e,t)}setCulled(e,t,s){if(!this._finalized)throw"Not finalized";t&O?(this._numCulledLayerPortions++,this.model.numCulledLayerPortions++):(this._numCulledLayerPortions--,this.model.numCulledLayerPortions--),this._setFlags(e,t,s)}setCollidable(e,t){if(!this._finalized)throw"Not finalized"}setPickable(e,t,s){if(!this._finalized)throw"Not finalized";t&S?(this._numPickableLayerPortions++,this.model.numPickableLayerPortions++):(this._numPickableLayerPortions--,this.model.numPickableLayerPortions--),this._setFlags(e,t,s)}setColor(e,t){if(!this._finalized)throw"Not finalized";const s=2*e,i=4*this._portions[s],r=4*this._portions[s+1],o=this._scratchMemory.getUInt8Array(r),n=t[0],a=t[1],l=t[2],h=t[3];for(let e=0;e<r;e+=4)o[e+0]=n,o[e+1]=a,o[e+2]=l,o[e+3]=h;this._state.colorsBuf.setData(o,i,r)}setTransparent(e,t,s){s?(this._numTransparentLayerPortions++,this.model.numTransparentLayerPortions++):(this._numTransparentLayerPortions--,this.model.numTransparentLayerPortions--),this._setFlags(e,t,s)}_setFlags(e,t,s,i=!1){if(!this._finalized)throw"Not finalized";const r=2*e,o=this._portions[r],n=this._portions[r+1],a=!!(t&N),l=!!(t&B),h=!!(t&F),c=!!(t&L),u=!!(t&S),A=!!(t&O);let p,d;p=!a||A||l||h&&!this.model.scene.highlightMaterial.glowThrough||c&&!this.model.scene.selectedMaterial.glowThrough?rn:s?nn:on,d=!a||A?rn:c?ln:h?an:l?hn:rn;let f=a&&!A&&u?fn:rn;const m=t&w?1:0;if(i){this._deferredFlagValues||(this._deferredFlagValues=new Float32Array(this._numVerts));for(let e=o,t=o+n;e<t;e++){let t=0;t|=p,t|=d<<4,t|=f<<12,t|=m<<16,this._deferredFlagValues[e]=t}}else if(this._state.flagsBuf){const e=this._scratchMemory.getFloat32Array(n);for(let t=0;t<n;t++){let s=0;s|=p,s|=d<<4,s|=f<<12,s|=m<<16,e[t]=s}this._state.flagsBuf.setData(e,o,n)}}_setDeferredFlags(){this._deferredFlagValues&&(this._state.flagsBuf.setData(this._deferredFlagValues),this._deferredFlagValues=null)}setOffset(e,t){if(!this._finalized)throw"Not finalized";if(!this.model.scene.entityOffsetsEnabled)return void this.model.error("Entity#offset not enabled for this Viewer");const s=2*e,i=3*this._portions[s],r=3*this._portions[s+1],o=this._scratchMemory.getFloat32Array(r),n=t[0],a=t[1],l=t[2];for(let e=0;e<r;e+=3)o[e+0]=n,o[e+1]=a,o[e+2]=l;this._state.offsetsBuf.setData(o,i,r)}drawColorOpaque(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&this._numTransparentLayerPortions!==this._numPortions&&this._numXRayedLayerPortions!==this._numPortions&&this._batchingRenderers.colorRenderer&&this._batchingRenderers.colorRenderer.drawLayer(t,this,on)}drawColorTransparent(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numTransparentLayerPortions&&this._numXRayedLayerPortions!==this._numPortions&&this._batchingRenderers.colorRenderer&&this._batchingRenderers.colorRenderer.drawLayer(t,this,nn)}drawDepth(e,t){}drawNormals(e,t){}drawSilhouetteXRayed(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numXRayedLayerPortions&&this._batchingRenderers.silhouetteRenderer&&this._batchingRenderers.silhouetteRenderer.drawLayer(t,this,hn)}drawSilhouetteHighlighted(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numHighlightedLayerPortions&&this._batchingRenderers.silhouetteRenderer&&this._batchingRenderers.silhouetteRenderer.drawLayer(t,this,an)}drawSilhouetteSelected(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numSelectedLayerPortions&&this._batchingRenderers.silhouetteRenderer&&this._batchingRenderers.silhouetteRenderer.drawLayer(t,this,ln)}drawEdgesColorOpaque(e,t){}drawEdgesColorTransparent(e,t){}drawEdgesHighlighted(e,t){}drawEdgesSelected(e,t){}drawEdgesXRayed(e,t){}drawPickMesh(e){}drawPickDepths(e){}drawPickNormals(e){}drawOcclusion(e){}drawShadow(e){}destroy(){const e=this._state;e.positionsBuf&&(e.positionsBuf.destroy(),e.positionsBuf=null),e.offsetsBuf&&(e.offsetsBuf.destroy(),e.offsetsBuf=null),e.colorsBuf&&(e.colorsBuf.destroy(),e.colorsBuf=null),e.flagsBuf&&(e.flagsBuf.destroy(),e.flagsBuf=null),e.indicesBuf&&(e.indicesBuf.destroy(),e.indicesBuf=null),e.destroy()}}const wl=p.vec3();class Ml{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=t._state.origin,h=t.geometry;if(!this._program&&(this._allocate(),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram(e)),n.uniform1i(this._uRenderPass,s),n.uniformMatrix4fv(this._uViewMatrix,!1,l?j(o.viewMatrix,l):o.viewMatrix),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix),n.lineWidth(r.linesMaterial.lineWidth);const c=r._sectionPlanesState.sectionPlanes.length;if(c>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*c,o=i.renderFlags;for(let t=0;t<c;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(l){const e=W(s.dist,s.dir,l,wl);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,h.positionsDecodeMatrix),this._aModelMatrixCol0.bindArrayBuffer(a.modelMatrixCol0Buf),this._aModelMatrixCol1.bindArrayBuffer(a.modelMatrixCol1Buf),this._aModelMatrixCol2.bindArrayBuffer(a.modelMatrixCol2Buf),n.vertexAttribDivisor(this._aModelMatrixCol0.location,1),n.vertexAttribDivisor(this._aModelMatrixCol1.location,1),n.vertexAttribDivisor(this._aModelMatrixCol2.location,1),this._aPosition.bindArrayBuffer(h.positionsBuf),this._aColor.bindArrayBuffer(a.colorsBuf),n.vertexAttribDivisor(this._aColor.location,1),this._aFlags.bindArrayBuffer(a.flagsBuf),n.vertexAttribDivisor(this._aFlags.location,1),this._aOffset&&(this._aOffset.bindArrayBuffer(a.offsetsBuf),n.vertexAttribDivisor(this._aOffset.location,1)),h.indicesBuf.bind(),n.drawElementsInstanced(n.LINES,h.indicesBuf.numItems,h.indicesBuf.itemType,0,a.numInstances),e.drawElements++,n.vertexAttribDivisor(this._aModelMatrixCol0.location,0),n.vertexAttribDivisor(this._aModelMatrixCol1.location,0),n.vertexAttribDivisor(this._aModelMatrixCol2.location,0),n.vertexAttribDivisor(this._aColor.location,0),n.vertexAttribDivisor(this._aFlags.location,0),this._aOffset&&n.vertexAttribDivisor(this._aOffset.location,0)}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uPositionsDecodeMatrix=s.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=s.getLocation("worldMatrix"),this._uViewMatrix=s.getLocation("viewMatrix"),this._uProjMatrix=s.getLocation("projMatrix"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});this._aPosition=s.getAttribute("position"),this._aColor=s.getAttribute("color"),this._aFlags=s.getAttribute("flags"),this._aOffset=s.getAttribute("offset"),this._aModelMatrixCol0=s.getAttribute("modelMatrixCol0"),this._aModelMatrixCol1=s.getAttribute("modelMatrixCol1"),this._aModelMatrixCol2=s.getAttribute("modelMatrixCol2"),this._uOcclusionTexture="uOcclusionTexture",e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC"))}_bindProgram(){const e=this._scene,t=e.canvas.gl,s=e.camera.project;if(this._program.bind(),t.uniformMatrix4fv(this._uProjMatrix,!1,s.matrix),e.logarithmicDepthBufferEnabled){const e=2/(Math.log(s.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Lines instancing color vertex shader"),s.push("uniform int renderPass;"),s.push("in vec3 position;"),s.push("in vec4 color;"),s.push("in float flags;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("in vec4 modelMatrixCol0;"),s.push("in vec4 modelMatrixCol1;"),s.push("in vec4 modelMatrixCol2;"),s.push("uniform mat4 worldMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;")),s.push("uniform vec4 lightAmbient;"),t&&(s.push("out vec4 vWorldPosition;"),s.push("out float vFlags;")),s.push("out vec4 vColor;"),s.push("void main(void) {"),s.push("int colorFlag = int(flags) & 0xF;"),s.push("if (colorFlag != renderPass) {"),s.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("} else {"),s.push("vec4 worldPosition =  positionsDecodeMatrix * vec4(position, 1.0); "),s.push("worldPosition = worldMatrix * vec4(dot(worldPosition, modelMatrixCol0), dot(worldPosition, modelMatrixCol1), dot(worldPosition, modelMatrixCol2), 1.0);"),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("vec4 viewPosition  = viewMatrix * worldPosition; "),s.push("vColor = vec4(float(color.r) / 255.0, float(color.g) / 255.0, float(color.b) / 255.0,  float(color.a) / 255.0);"),t&&(s.push("vWorldPosition = worldPosition;"),s.push("vFlags = flags;")),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("gl_Position = clipPos;"),s.push("}"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState;let s,i;const r=t.sectionPlanes.length>0,o=[];if(o.push("#version 300 es"),o.push("// Lines instancing color fragment shader"),o.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),o.push("precision highp float;"),o.push("precision highp int;"),o.push("#else"),o.push("precision mediump float;"),o.push("precision mediump int;"),o.push("#endif"),e.logarithmicDepthBufferEnabled&&(o.push("uniform float logDepthBufFC;"),o.push("in float vFragDepth;")),r)for(o.push("in vec4 vWorldPosition;"),o.push("in float vFlags;"),s=0,i=t.sectionPlanes.length;s<i;s++)o.push("uniform bool sectionPlaneActive"+s+";"),o.push("uniform vec3 sectionPlanePos"+s+";"),o.push("uniform vec3 sectionPlaneDir"+s+";");if(o.push("in vec4 vColor;"),o.push("out vec4 outColor;"),o.push("void main(void) {"),r){for(o.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),o.push("  if (clippable) {"),o.push("  float dist = 0.0;"),s=0,i=t.sectionPlanes.length;s<i;s++)o.push("if (sectionPlaneActive"+s+") {"),o.push("   dist += clamp(dot(-sectionPlaneDir"+s+".xyz, vWorldPosition.xyz - sectionPlanePos"+s+".xyz), 0.0, 1000.0);"),o.push("}");o.push("if (dist > 0.0) { discard; }"),o.push("}")}return this._withSAO?(o.push("   float viewportWidth     = uSAOParams[0];"),o.push("   float viewportHeight    = uSAOParams[1];"),o.push("   float blendCutoff       = uSAOParams[2];"),o.push("   float blendFactor       = uSAOParams[3];"),o.push("   vec2 uv                 = vec2(gl_FragCoord.x / viewportWidth, gl_FragCoord.y / viewportHeight);"),o.push("   float ambient           = smoothstep(blendCutoff, 1.0, unpackRGBAToDepth(texture(uOcclusionTexture, uv))) * blendFactor;"),o.push("   outColor            = vec4(vColor.rgb * ambient, vColor.a);")):o.push("    outColor           = vColor;"),e.logarithmicDepthBufferEnabled&&o.push("gl_FragDepth = log2( vFragDepth ) * logDepthBufFC * 0.5;"),o.push("}"),o}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Bl=p.vec3();class Fl{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=t._state.origin,h=t.geometry;if(!this._program&&(this._allocate(t.model.scene),this.errors))return;if(e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),n.uniform1i(this._uRenderPass,s),s===hn){const e=r.xrayMaterial._state,t=e.fillColor,s=e.fillAlpha;n.uniform4f(this._uColor,t[0],t[1],t[2],s)}else if(s===an){const e=r.highlightMaterial._state,t=e.fillColor,s=e.fillAlpha;n.uniform4f(this._uColor,t[0],t[1],t[2],s)}else if(s===ln){const e=r.selectedMaterial._state,t=e.fillColor,s=e.fillAlpha;n.uniform4f(this._uColor,t[0],t[1],t[2],s)}else n.uniform4fv(this._uColor,p.vec3([1,1,1]));n.uniformMatrix4fv(this._uViewMatrix,!1,l?j(o.viewMatrix,l):o.viewMatrix),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix),n.lineWidth(r.linesMaterial.lineWidth);const c=r._sectionPlanesState.sectionPlanes.length;if(c>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*c,o=i.renderFlags;for(let t=0;t<c;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(l){const e=W(s.dist,s.dir,l,Bl);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,h.positionsDecodeMatrix),this._aModelMatrixCol0.bindArrayBuffer(a.modelMatrixCol0Buf),this._aModelMatrixCol1.bindArrayBuffer(a.modelMatrixCol1Buf),this._aModelMatrixCol2.bindArrayBuffer(a.modelMatrixCol2Buf),n.vertexAttribDivisor(this._aModelMatrixCol0.location,1),n.vertexAttribDivisor(this._aModelMatrixCol1.location,1),n.vertexAttribDivisor(this._aModelMatrixCol2.location,1),this._aPosition.bindArrayBuffer(a.positionsBuf),this._aFlags.bindArrayBuffer(a.flagsBuf,n.UNSIGNED_BYTE,!0),n.vertexAttribDivisor(this._aFlags.location,1),this._aOffset&&(this._aOffset.bindArrayBuffer(a.offsetsBuf),n.vertexAttribDivisor(this._aOffset.location,1)),h.indicesBuf.bind(),n.drawElementsInstanced(n.LINES,h.indicesBuf.numItems,h.indicesBuf.itemType,0,a.numInstances),n.vertexAttribDivisor(this._aModelMatrixCol0.location,0),n.vertexAttribDivisor(this._aModelMatrixCol1.location,0),n.vertexAttribDivisor(this._aModelMatrixCol2.location,0),n.vertexAttribDivisor(this._aFlags.location,0),this._aOffset&&n.vertexAttribDivisor(this._aOffset.location,0)}_allocate(){const e=this._scene,t=e.canvas.gl,s=e._sectionPlanesState;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uRenderPass=i.getLocation("renderPass"),this._uPositionsDecodeMatrix=i.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=i.getLocation("worldMatrix"),this._uViewMatrix=i.getLocation("viewMatrix"),this._uProjMatrix=i.getLocation("projMatrix"),this._uColor=i.getLocation("color"),this._uSectionPlanes=[];for(let e=0,t=s.sectionPlanes.length;e<t;e++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+e),pos:i.getLocation("sectionPlanePos"+e),dir:i.getLocation("sectionPlaneDir"+e)});this._aPosition=i.getAttribute("position"),this._aOffset=i.getAttribute("offset"),this._aFlags=i.getAttribute("flags"),this._aModelMatrixCol0=i.getAttribute("modelMatrixCol0"),this._aModelMatrixCol1=i.getAttribute("modelMatrixCol1"),this._aModelMatrixCol2=i.getAttribute("modelMatrixCol2"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=i.getLocation("logDepthBufFC"))}_bindProgram(){const e=this._scene,t=e.canvas.gl,s=e.camera.project;if(this._program.bind(),t.uniformMatrix4fv(this._uProjMatrix,!1,s.matrix),e.logarithmicDepthBufferEnabled){const e=2/(Math.log(s.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Lines instancing silhouette vertex shader"),s.push("uniform int renderPass;"),s.push("in vec3 position;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("in float flags;"),s.push("in vec4 modelMatrixCol0;"),s.push("in vec4 modelMatrixCol1;"),s.push("in vec4 modelMatrixCol2;"),s.push("uniform mat4 worldMatrix;"),s.push("uniform mat4 viewMatrix;"),s.push("uniform mat4 projMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),e.logarithmicDepthBufferEnabled&&(s.push("uniform float logDepthBufFC;"),s.push("out float vFragDepth;")),s.push("uniform vec4 color;"),t&&(s.push("out vec4 vWorldPosition;"),s.push("out float vFlags;")),s.push("void main(void) {"),s.push("int silhouetteFlag = int(flags) >> 4 & 0xF;"),s.push("if (silhouetteFlag != renderPass) {"),s.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("} else {"),s.push("vec4 worldPosition = positionsDecodeMatrix * vec4(position, 1.0); "),s.push("worldPosition = worldMatrix * vec4(dot(worldPosition, modelMatrixCol0), dot(worldPosition, modelMatrixCol1), dot(worldPosition, modelMatrixCol2), 1.0);"),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("vec4 viewPosition  = viewMatrix * worldPosition; "),t&&(s.push("vWorldPosition = worldPosition;"),s.push("vFlags = flags;")),s.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&s.push("vFragDepth = 1.0 + clipPos.w;"),s.push("gl_Position = clipPos;"),s.push("}"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Lines instancing silhouette fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("uniform vec4 color;"),i.push("out vec4 outColor;"),i.push("void main(void) {"),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("  float dist = 0.0;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("if (sectionPlaneActive"+e+") {"),i.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("}");i.push("if (dist > 0.0) { discard; }"),i.push("}")}return e.logarithmicDepthBufferEnabled&&i.push("gl_FragDepth = log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("outColor = color;"),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}class Ll{constructor(e){this._scene=e}_compile(){this._colorRenderer&&!this._colorRenderer.getValid()&&(this._colorRenderer.destroy(),this._colorRenderer=null),this._silhouetteRenderer&&!this._silhouetteRenderer.getValid()&&(this._silhouetteRenderer.destroy(),this._silhouetteRenderer=null)}get colorRenderer(){return this._colorRenderer||(this._colorRenderer=new Ml(this._scene)),this._colorRenderer}get silhouetteRenderer(){return this._silhouetteRenderer||(this._silhouetteRenderer=new Fl(this._scene)),this._silhouetteRenderer}_destroy(){this._colorRenderer&&this._colorRenderer.destroy(),this._silhouetteRenderer&&this._silhouetteRenderer.destroy()}}const Ul={};const Hl=new Uint8Array(4),Gl=new Float32Array(1),Vl=p.vec4([0,0,0,1]),kl=p.vec4([0,0,0,1]),jl=p.vec4([0,0,0,1]),Ql=new Float32Array(3);class Wl{constructor(e){this.model=e.model,this.geometry=e.geometry,this.material=e.material,this.sortId="LinesInstancingLayer",this.layerIndex=e.layerIndex,this._linesInstancingRenderers=function(e){const t=e.id;let s=Ul[t];return s||(s=new Ll(e),Ul[t]=s,s._compile(),e.on("compile",(()=>{s._compile()})),e.on("destroyed",(()=>{delete Ul[t],s._destroy()}))),s}(e.model.scene),this._aabb=p.collapseAABB3(),this._state=new Ze({obb:p.OBB3(),numInstances:0,origin:null}),this._numPortions=0,this._numVisibleLayerPortions=0,this._numTransparentLayerPortions=0,this._numXRayedLayerPortions=0,this._numHighlightedLayerPortions=0,this._numSelectedLayerPortions=0,this._numClippableLayerPortions=0,this._numEdgesLayerPortions=0,this._numPickableLayerPortions=0,this._numCulledLayerPortions=0,this.numIndices=e.geometry.numIndices,this._colors=[],this._offsets=[],this._modelMatrixCol0=[],this._modelMatrixCol1=[],this._modelMatrixCol2=[],this._portions=[],e.origin&&(this._state.origin=p.vec3(e.origin)),this._finalized=!1,this.aabb=p.collapseAABB3()}createPortion(e){const t=e.color,s=e.opacity,i=e.meshMatrix,r=e.worldMatrix,o=e.aabb;if(this._finalized)throw"Already finalized";const n=t[0],a=t[1],l=t[2];t[3],this._colors.push(n),this._colors.push(a),this._colors.push(l),this._colors.push(s),this.model.scene.entityOffsetsEnabled&&(this._offsets.push(0),this._offsets.push(0),this._offsets.push(0)),this._modelMatrixCol0.push(i[0]),this._modelMatrixCol0.push(i[4]),this._modelMatrixCol0.push(i[8]),this._modelMatrixCol0.push(i[12]),this._modelMatrixCol1.push(i[1]),this._modelMatrixCol1.push(i[5]),this._modelMatrixCol1.push(i[9]),this._modelMatrixCol1.push(i[13]),this._modelMatrixCol2.push(i[2]),this._modelMatrixCol2.push(i[6]),this._modelMatrixCol2.push(i[10]),this._modelMatrixCol2.push(i[14]),p.collapseAABB3(o);const h=this._state.obb,c=h.length;for(let e=0;e<c;e+=4)Vl[0]=h[e+0],Vl[1]=h[e+1],Vl[2]=h[e+2],p.transformPoint4(i,Vl,kl),r?(p.transformPoint4(r,kl,jl),p.expandAABB3Point3(o,jl)):p.expandAABB3Point3(o,kl);if(this._state.origin){const e=this._state.origin;o[0]+=e[0],o[1]+=e[1],o[2]+=e[2],o[3]+=e[0],o[4]+=e[1],o[5]+=e[2]}p.expandAABB3(this.aabb,o),this._state.numInstances++;const u=this._portions.length;return this._portions.push({}),this._numPortions++,this.model.numPortions++,u}finalize(){if(this._finalized)throw"Already finalized";const e=this.model.scene.canvas.gl,t=this._colors.length,s=t/4;if(t>0){let t=!1;this._state.colorsBuf=new ye(e,e.ARRAY_BUFFER,new Uint8Array(this._colors),this._colors.length,4,e.DYNAMIC_DRAW,t),this._colors=[]}if(s>0){let t=!1;this._state.flagsBuf=new ye(e,e.ARRAY_BUFFER,new Float32Array(s),s,1,e.DYNAMIC_DRAW,t)}if(this.model.scene.entityOffsetsEnabled&&this._offsets.length>0){const t=!1;this._state.offsetsBuf=new ye(e,e.ARRAY_BUFFER,new Float32Array(this._offsets),this._offsets.length,3,e.DYNAMIC_DRAW,t),this._offsets=[]}if(this._modelMatrixCol0.length>0){const t=!1;this._state.modelMatrixCol0Buf=new ye(e,e.ARRAY_BUFFER,new Float32Array(this._modelMatrixCol0),this._modelMatrixCol0.length,4,e.STATIC_DRAW,t),this._state.modelMatrixCol1Buf=new ye(e,e.ARRAY_BUFFER,new Float32Array(this._modelMatrixCol1),this._modelMatrixCol1.length,4,e.STATIC_DRAW,t),this._state.modelMatrixCol2Buf=new ye(e,e.ARRAY_BUFFER,new Float32Array(this._modelMatrixCol2),this._modelMatrixCol2.length,4,e.STATIC_DRAW,t),this._modelMatrixCol0=[],this._modelMatrixCol1=[],this._modelMatrixCol2=[]}this._finalized=!0}initFlags(e,t,s){t&N&&(this._numVisibleLayerPortions++,this.model.numVisibleLayerPortions++),t&F&&(this._numHighlightedLayerPortions++,this.model.numHighlightedLayerPortions++),t&B&&(this._numXRayedLayerPortions++,this.model.numXRayedLayerPortions++),t&L&&(this._numSelectedLayerPortions++,this.model.numSelectedLayerPortions++),t&w&&(this._numClippableLayerPortions++,this.model.numClippableLayerPortions++),t&U&&(this._numEdgesLayerPortions++,this.model.numEdgesLayerPortions++),t&S&&(this._numPickableLayerPortions++,this.model.numPickableLayerPortions++),t&O&&(this._numCulledLayerPortions++,this.model.numCulledLayerPortions++),s&&(this._numTransparentLayerPortions++,this.model.numTransparentLayerPortions++),this._setFlags(e,t,s)}setVisible(e,t,s){if(!this._finalized)throw"Not finalized";t&N?(this._numVisibleLayerPortions++,this.model.numVisibleLayerPortions++):(this._numVisibleLayerPortions--,this.model.numVisibleLayerPortions--),this._setFlags(e,t,s)}setHighlighted(e,t,s){if(!this._finalized)throw"Not finalized";t&F?(this._numHighlightedLayerPortions++,this.model.numHighlightedLayerPortions++):(this._numHighlightedLayerPortions--,this.model.numHighlightedLayerPortions--),this._setFlags(e,t,s)}setXRayed(e,t,s){if(!this._finalized)throw"Not finalized";t&B?(this._numXRayedLayerPortions++,this.model.numXRayedLayerPortions++):(this._numXRayedLayerPortions--,this.model.numXRayedLayerPortions--),this._setFlags(e,t,s)}setSelected(e,t,s){if(!this._finalized)throw"Not finalized";t&L?(this._numSelectedLayerPortions++,this.model.numSelectedLayerPortions++):(this._numSelectedLayerPortions--,this.model.numSelectedLayerPortions--),this._setFlags(e,t,s)}setEdges(e,t,s){if(!this._finalized)throw"Not finalized";t&U?(this._numEdgesLayerPortions++,this.model.numEdgesLayerPortions++):(this._numEdgesLayerPortions--,this.model.numEdgesLayerPortions--),this._setFlags(e,t,s)}setClippable(e,t){if(!this._finalized)throw"Not finalized";t&w?(this._numClippableLayerPortions++,this.model.numClippableLayerPortions++):(this._numClippableLayerPortions--,this.model.numClippableLayerPortions--),this._setFlags(e,t)}setCollidable(e,t){if(!this._finalized)throw"Not finalized"}setPickable(e,t,s){if(!this._finalized)throw"Not finalized";t&S?(this._numPickableLayerPortions++,this.model.numPickableLayerPortions++):(this._numPickableLayerPortions--,this.model.numPickableLayerPortions--),this._setFlags(e,t,s)}setCulled(e,t,s){if(!this._finalized)throw"Not finalized";t&O?(this._numCulledLayerPortions++,this.model.numCulledLayerPortions++):(this._numCulledLayerPortions--,this.model.numCulledLayerPortions--),this._setFlags(e,t,s)}setColor(e,t){if(!this._finalized)throw"Not finalized";Hl[0]=t[0],Hl[1]=t[1],Hl[2]=t[2],Hl[3]=t[3],this._state.colorsBuf.setData(Hl,4*e,4)}setTransparent(e,t,s){s?(this._numTransparentLayerPortions++,this.model.numTransparentLayerPortions++):(this._numTransparentLayerPortions--,this.model.numTransparentLayerPortions--),this._setFlags(e,t,s)}_setFlags(e,t,s){if(!this._finalized)throw"Not finalized";const i=!!(t&N),r=!!(t&B),o=!!(t&F),n=!!(t&L),a=!!(t&U),l=!!(t&S),h=!!(t&O);let c,u;c=!i||h||r||o&&!this.model.scene.highlightMaterial.glowThrough||n&&!this.model.scene.selectedMaterial.glowThrough?rn:s?nn:on,u=!i||h?rn:n?ln:o?an:r?hn:rn;let A=0;A=!i||h?rn:n?pn:o?An:r?dn:a?s?un:cn:rn;let p=0;p|=c,p|=u<<4,p|=A<<8,p|=(i&&!h&&l?fn:rn)<<12,p|=(t&w?255:0)<<16,Gl[0]=p,this._state.flagsBuf.setData(Gl,e)}setOffset(e,t){if(!this._finalized)throw"Not finalized";this.model.scene.entityOffsetsEnabled?(Ql[0]=t[0],Ql[1]=t[1],Ql[2]=t[2],this._state.offsetsBuf.setData(Ql,3*e,3)):this.model.error("Entity#offset not enabled for this Viewer")}drawColorOpaque(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&this._numTransparentLayerPortions!==this._numPortions&&this._numXRayedLayerPortions!==this._numPortions&&this._linesInstancingRenderers.colorRenderer&&this._linesInstancingRenderers.colorRenderer.drawLayer(t,this,on)}drawColorTransparent(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numTransparentLayerPortions&&this._numXRayedLayerPortions!==this._numPortions&&this._linesInstancingRenderers.colorRenderer&&this._linesInstancingRenderers.colorRenderer.drawLayer(t,this,nn)}drawDepth(e,t){}drawNormals(e,t){}drawSilhouetteXRayed(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numXRayedLayerPortions&&this._linesInstancingRenderers.silhouetteRenderer&&this._linesInstancingRenderers.silhouetteRenderer.drawLayer(t,this,hn)}drawSilhouetteHighlighted(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numHighlightedLayerPortions&&this._linesInstancingRenderers.silhouetteRenderer&&this._linesInstancingRenderers.silhouetteRenderer.drawLayer(t,this,an)}drawSilhouetteSelected(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numSelectedLayerPortions&&this._linesInstancingRenderers.silhouetteRenderer&&this._linesInstancingRenderers.silhouetteRenderer.drawLayer(t,this,ln)}drawEdgesColorOpaque(e,t){}drawEdgesColorTransparent(e,t){}drawEdgesXRayed(e,t){}drawEdgesHighlighted(e,t){}drawEdgesSelected(e,t){}drawOcclusion(e,t){}drawShadow(e,t){}drawPickMesh(e,t){}drawPickDepths(e,t){}drawPickNormals(e,t){}destroy(){const e=this._state;e.positionsBuf&&(e.positionsBuf.destroy(),e.positionsBuf=null),e.colorsBuf&&(e.colorsBuf.destroy(),e.colorsBuf=null),e.flagsBuf&&(e.flagsBuf.destroy(),e.flagsBuf=null),e.offsetsBuf&&(e.offsetsBuf.destroy(),e.offsetsBuf=null),e.modelMatrixCol0Buf&&(e.modelMatrixCol0Buf.destroy(),e.modelMatrixCol0Buf=null),e.modelMatrixCol1Buf&&(e.modelMatrixCol1Buf.destroy(),e.modelMatrixCol1Buf=null),e.modelMatrixCol2Buf&&(e.modelMatrixCol2Buf.destroy(),e.modelMatrixCol2Buf=null),e.destroy()}}const zl=p.vec3();class Kl{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()+this._scene.pointsMaterial.hash}drawLayer(e,t,s){const i=this._scene,r=i.camera,o=t.model,n=i.canvas.gl,a=t._state,l=t._state.origin,h=i.pointsMaterial;if(!this._program&&(this._allocate(),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),n.uniform1i(this._uRenderPass,s),n.uniformMatrix4fv(this._uViewMatrix,!1,l?j(r.viewMatrix,l):r.viewMatrix),n.uniformMatrix4fv(this._uWorldMatrix,!1,o.worldMatrix);const c=i._sectionPlanesState.sectionPlanes.length;if(c>0){const e=i._sectionPlanesState.sectionPlanes,s=t.layerIndex*c,r=o.renderFlags;for(let t=0;t<c;t++){const i=this._uSectionPlanes[t];if(i){const o=r.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,o?1:0),o){const s=e[t];if(l){const e=W(s.dist,s.dir,l,zl);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,t._state.positionsDecodeMatrix),this._aPosition.bindArrayBuffer(a.positionsBuf),this._aColor&&this._aColor.bindArrayBuffer(a.colorsBuf),h.filterIntensity&&n.uniform2f(this._uIntensityRange,h.minIntensity,h.maxIntensity),this._aFlags&&this._aFlags.bindArrayBuffer(a.flagsBuf),this._aOffset&&this._aOffset.bindArrayBuffer(a.offsetsBuf),n.uniform1f(this._uPointSize,h.pointSize);const u="ortho"===i.camera.projection?1:n.drawingBufferHeight/(2*Math.tan(.5*i.camera.perspective.fov*Math.PI/180));n.uniform1f(this._uNearPlaneHeight,u),n.drawArrays(n.POINTS,0,a.positionsBuf.numItems),e.drawArrays++}_allocate(){const e=this._scene,t=e.pointsMaterial._state,s=e.canvas.gl;if(this._program=new ge(s,this._buildShader(e)),this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uRenderPass=i.getLocation("renderPass"),this._uPositionsDecodeMatrix=i.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=i.getLocation("worldMatrix"),this._uViewMatrix=i.getLocation("viewMatrix"),this._uProjMatrix=i.getLocation("projMatrix"),this._uSectionPlanes=[];for(let t=0,s=e._sectionPlanesState.sectionPlanes.length;t<s;t++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+t),pos:i.getLocation("sectionPlanePos"+t),dir:i.getLocation("sectionPlaneDir"+t)});this._aPosition=i.getAttribute("position"),this._aOffset=i.getAttribute("offset"),this._aColor=i.getAttribute("color"),this._aFlags=i.getAttribute("flags"),this._uPointSize=i.getLocation("pointSize"),this._uNearPlaneHeight=i.getLocation("nearPlaneHeight"),t.filterIntensity&&(this._uIntensityRange=i.getLocation("intensityRange")),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=i.getLocation("logDepthBufFC"))}_bindProgram(){const e=this._scene,t=e.canvas.gl,s=this._program,i=e.camera.project;if(s.bind(),t.uniformMatrix4fv(this._uProjMatrix,!1,i.matrix),e.logarithmicDepthBufferEnabled){const e=2/(Math.log(i.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=e.pointsMaterial,i=[];return i.push("#version 300 es"),i.push("// Points batching color vertex shader"),i.push("uniform int renderPass;"),i.push("in vec3 position;"),i.push("in vec4 color;"),i.push("in float flags;"),e.entityOffsetsEnabled&&i.push("in vec3 offset;"),i.push("uniform mat4 worldMatrix;"),i.push("uniform mat4 viewMatrix;"),i.push("uniform mat4 projMatrix;"),i.push("uniform mat4 positionsDecodeMatrix;"),i.push("uniform float pointSize;"),s.perspectivePoints&&i.push("uniform float nearPlaneHeight;"),s.filterIntensity&&i.push("uniform vec2 intensityRange;"),e.logarithmicDepthBufferEnabled&&(i.push("uniform float logDepthBufFC;"),i.push("out float vFragDepth;")),t&&(i.push("out vec4 vWorldPosition;"),i.push("out float vFlags;")),i.push("out vec4 vColor;"),i.push("void main(void) {"),i.push("int colorFlag = int(flags) & 0xF;"),i.push("if (colorFlag != renderPass) {"),i.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),i.push("} else {"),s.filterIntensity&&(i.push("float intensity = float(color.a) / 255.0;"),i.push("if (intensity < intensityRange[0] || intensity > intensityRange[1]) {"),i.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),i.push("} else {")),i.push("vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),e.entityOffsetsEnabled&&i.push("worldPosition.xyz = worldPosition.xyz + offset;"),i.push("vec4 viewPosition  = viewMatrix * worldPosition; "),i.push("vColor = vec4(float(color.r) / 255.0, float(color.g) / 255.0, float(color.b) / 255.0, 1.0);"),t&&(i.push("vWorldPosition = worldPosition;"),i.push("vFlags = flags;")),i.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&i.push("vFragDepth = 1.0 + clipPos.w;"),i.push("gl_Position = clipPos;"),s.perspectivePoints?(i.push("gl_PointSize = (nearPlaneHeight * pointSize) / clipPos.w;"),i.push("gl_PointSize = max(gl_PointSize, "+Math.floor(s.minPerspectivePointSize)+".0);"),i.push("gl_PointSize = min(gl_PointSize, "+Math.floor(s.maxPerspectivePointSize)+".0);")):i.push("gl_PointSize = pointSize;"),i.push("}"),s.filterIntensity&&i.push("}"),i.push("}"),i}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Points batching color fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("in vec4 vColor;"),i.push("out vec4 outColor;"),i.push("void main(void) {"),e.pointsMaterial.roundPoints&&(i.push("  vec2 cxy = 2.0 * gl_PointCoord - 1.0;"),i.push("  float r = dot(cxy, cxy);"),i.push("  if (r > 1.0) {"),i.push("       discard;"),i.push("  }")),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("  float dist = 0.0;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("if (sectionPlaneActive"+e+") {"),i.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("}");i.push("  if (dist > 0.0) { discard; }"),i.push("}")}return i.push("   outColor = vColor;"),e.logarithmicDepthBufferEnabled&&i.push("gl_FragDepth = log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Yl=new Float32Array([1,1,1]),Xl=p.vec3();class Zl{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()+this._scene.pointsMaterial.hash}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=t._state.origin,h=r.pointsMaterial._state;if(!this._program&&(this._allocate(),this.errors))return;if(e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),n.uniform1i(this._uRenderPass,s),s===hn){const e=r.xrayMaterial._state,t=e.fillColor,s=e.fillAlpha;n.uniform4f(this._uColor,t[0],t[1],t[2],s)}else if(s===an){const e=r.highlightMaterial._state,t=e.fillColor,s=e.fillAlpha;n.uniform4f(this._uColor,t[0],t[1],t[2],s)}else if(s===ln){const e=r.selectedMaterial._state,t=e.fillColor,s=e.fillAlpha;n.uniform4f(this._uColor,t[0],t[1],t[2],s)}else n.uniform4fv(this._uColor,Yl);const c=l?j(o.viewMatrix,l):o.viewMatrix;n.uniformMatrix4fv(this._uViewMatrix,!1,c),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix);const u=r._sectionPlanesState.sectionPlanes.length;if(u>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*u,o=i.renderFlags;for(let t=0;t<u;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(l){const e=W(s.dist,s.dir,l,Xl);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,t._state.positionsDecodeMatrix),this._aPosition.bindArrayBuffer(a.positionsBuf),this._aOffset&&this._aOffset.bindArrayBuffer(a.offsetsBuf),this._aFlags&&this._aFlags.bindArrayBuffer(a.flagsBuf),n.uniform1f(this._uPointSize,h.pointSize);const A="ortho"===r.camera.projection?1:n.drawingBufferHeight/(2*Math.tan(.5*r.camera.perspective.fov*Math.PI/180));n.uniform1f(this._uNearPlaneHeight,A),n.drawArrays(n.POINTS,0,a.positionsBuf.numItems)}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uPositionsDecodeMatrix=s.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=s.getLocation("worldMatrix"),this._uViewMatrix=s.getLocation("viewMatrix"),this._uProjMatrix=s.getLocation("projMatrix"),this._uColor=s.getLocation("color"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});this._aPosition=s.getAttribute("position"),this._aOffset=s.getAttribute("offset"),this._aFlags=s.getAttribute("flags"),this._uPointSize=s.getLocation("pointSize"),this._uNearPlaneHeight=s.getLocation("nearPlaneHeight"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC"))}_bindProgram(){const e=this._scene,t=e.canvas.gl,s=e.camera.project;if(this._program.bind(),t.uniformMatrix4fv(this._uProjMatrix,!1,s.matrix),e.logarithmicDepthBufferEnabled){const e=2/(Math.log(s.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=e.pointsMaterial._state,i=[];return i.push("#version 300 es"),i.push("// Points batching silhouette vertex shader"),i.push("uniform int renderPass;"),i.push("in vec3 position;"),e.entityOffsetsEnabled&&i.push("in vec3 offset;"),i.push("in float flags;"),i.push("uniform mat4 worldMatrix;"),i.push("uniform mat4 viewMatrix;"),i.push("uniform mat4 projMatrix;"),i.push("uniform mat4 positionsDecodeMatrix;"),i.push("uniform vec4 color;"),i.push("uniform float pointSize;"),s.perspectivePoints&&i.push("uniform float nearPlaneHeight;"),e.logarithmicDepthBufferEnabled&&(i.push("uniform float logDepthBufFC;"),i.push("out float vFragDepth;")),t&&(i.push("out vec4 vWorldPosition;"),i.push("out float vFlags;")),i.push("void main(void) {"),i.push("int silhouetteFlag = int(flags) >> 4 & 0xF;"),i.push("if (silhouetteFlag != renderPass) {"),i.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),i.push("} else {"),i.push("      vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),e.entityOffsetsEnabled&&i.push("      worldPosition.xyz = worldPosition.xyz + offset;"),i.push("vec4 viewPosition  = viewMatrix * worldPosition; "),t&&(i.push("vWorldPosition = worldPosition;"),i.push("vFlags = flags;")),i.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&i.push("vFragDepth = 1.0 + clipPos.w;"),i.push("gl_Position = clipPos;"),s.perspectivePoints?(i.push("gl_PointSize = (nearPlaneHeight * pointSize) / clipPos.w;"),i.push("gl_PointSize = max(gl_PointSize, "+Math.floor(s.minPerspectivePointSize)+".0);"),i.push("gl_PointSize = min(gl_PointSize, "+Math.floor(s.maxPerspectivePointSize)+".0);")):i.push("gl_PointSize = pointSize;"),i.push("}"),i.push("}"),i}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState;let s,i;const r=t.sectionPlanes.length>0,o=[];if(o.push("#version 300 es"),o.push("// Points batching silhouette vertex shader"),o.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),o.push("precision highp float;"),o.push("precision highp int;"),o.push("#else"),o.push("precision mediump float;"),o.push("precision mediump int;"),o.push("#endif"),e.logarithmicDepthBufferEnabled&&(o.push("uniform float logDepthBufFC;"),o.push("in float vFragDepth;")),r)for(o.push("in vec4 vWorldPosition;"),o.push("in float vFlags;"),s=0,i=t.sectionPlanes.length;s<i;s++)o.push("uniform bool sectionPlaneActive"+s+";"),o.push("uniform vec3 sectionPlanePos"+s+";"),o.push("uniform vec3 sectionPlaneDir"+s+";");if(o.push("uniform vec4 color;"),o.push("out vec4 outColor;"),o.push("void main(void) {"),e.pointsMaterial.roundPoints&&(o.push("  vec2 cxy = 2.0 * gl_PointCoord - 1.0;"),o.push("  float r = dot(cxy, cxy);"),o.push("  if (r > 1.0) {"),o.push("       discard;"),o.push("  }")),r){for(o.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),o.push("  if (clippable) {"),o.push("  float dist = 0.0;"),s=0,i=t.sectionPlanes.length;s<i;s++)o.push("if (sectionPlaneActive"+s+") {"),o.push("   dist += clamp(dot(-sectionPlaneDir"+s+".xyz, vWorldPosition.xyz - sectionPlanePos"+s+".xyz), 0.0, 1000.0);"),o.push("}");o.push("  if (dist > 0.0) { discard; }"),o.push("}")}return e.logarithmicDepthBufferEnabled&&o.push("gl_FragDepth = log2( vFragDepth ) * logDepthBufFC * 0.5;"),o.push("outColor = color;"),o.push("}"),o}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const ql=p.vec3();class Jl{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()+this._scene.pointsMaterial.hash}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=t._state.origin,h=r.pointsMaterial._state;this._program||this._allocate(t),e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram(e)),n.uniform1i(this._uRenderPass,s),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix);const c=e.pickViewMatrix||o.viewMatrix,u=l?j(c,l):c;if(n.uniformMatrix4fv(this._uProjMatrix,!1,e.pickProjMatrix),n.uniformMatrix4fv(this._uViewMatrix,!1,u),r.logarithmicDepthBufferEnabled){const e=2/(Math.log(o.project.far+1)/Math.LN2);n.uniform1f(this._uLogDepthBufFC,e)}const A=r._sectionPlanesState.sectionPlanes.length;if(A>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*A,o=i.renderFlags;for(let t=0;t<A;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(l){const e=W(s.dist,s.dir,l,ql);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,t._state.positionsDecodeMatrix),this._aPosition.bindArrayBuffer(a.positionsBuf),this._aOffset&&this._aOffset.bindArrayBuffer(a.offsetsBuf),this._aFlags&&this._aFlags.bindArrayBuffer(a.flagsBuf),this._aPickColor&&this._aPickColor.bindArrayBuffer(a.pickColorsBuf),n.uniform1f(this._uPointSize,h.pointSize);const p="ortho"===r.camera.projection?1:n.drawingBufferHeight/(2*Math.tan(.5*r.camera.perspective.fov*Math.PI/180));n.uniform1f(this._uNearPlaneHeight,p),n.drawArrays(n.POINTS,0,a.positionsBuf.numItems)}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uPickInvisible=s.getLocation("pickInvisible"),this._uPositionsDecodeMatrix=s.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=s.getLocation("worldMatrix"),this._uViewMatrix=s.getLocation("viewMatrix"),this._uProjMatrix=s.getLocation("projMatrix"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});this._aPosition=s.getAttribute("position"),this._aOffset=s.getAttribute("offset"),this._aPickColor=s.getAttribute("pickColor"),this._aFlags=s.getAttribute("flags"),this._uPointSize=s.getLocation("pointSize"),this._uNearPlaneHeight=s.getLocation("nearPlaneHeight"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC"))}_bindProgram(e){const t=this._scene.canvas.gl;this._program.bind(),t.uniform1i(this._uPickInvisible,e.pickInvisible)}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=e.pointsMaterial._state,i=[];return i.push("#version 300 es"),i.push("// Points batching pick mesh vertex shader"),i.push("uniform int renderPass;"),i.push("in vec3 position;"),e.entityOffsetsEnabled&&i.push("in vec3 offset;"),i.push("in float flags;"),i.push("in vec4 pickColor;"),i.push("uniform bool pickInvisible;"),i.push("uniform mat4 worldMatrix;"),i.push("uniform mat4 viewMatrix;"),i.push("uniform mat4 projMatrix;"),i.push("uniform mat4 positionsDecodeMatrix;"),i.push("uniform float pointSize;"),s.perspectivePoints&&i.push("uniform float nearPlaneHeight;"),e.logarithmicDepthBufferEnabled&&(i.push("uniform float logDepthBufFC;"),i.push("out float vFragDepth;")),t&&(i.push("out vec4 vWorldPosition;"),i.push("out float vFlags;")),i.push("out vec4 vPickColor;"),i.push("void main(void) {"),i.push("int pickFlag = int(flags) >> 12 & 0xF;"),i.push("if (pickFlag != renderPass) {"),i.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),i.push("  } else {"),i.push("      vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),e.entityOffsetsEnabled&&i.push("      worldPosition.xyz = worldPosition.xyz + offset;"),i.push("      vec4 viewPosition  = viewMatrix * worldPosition; "),i.push("      vPickColor = vec4(float(pickColor.r) / 255.0, float(pickColor.g) / 255.0, float(pickColor.b) / 255.0, float(pickColor.a) / 255.0);"),t&&(i.push("      vWorldPosition = worldPosition;"),i.push("      vFlags = flags;")),i.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&i.push("vFragDepth = 1.0 + clipPos.w;"),i.push("gl_Position = clipPos;"),s.perspectivePoints?(i.push("gl_PointSize = (nearPlaneHeight * pointSize) / clipPos.w;"),i.push("gl_PointSize = max(gl_PointSize, "+Math.floor(s.minPerspectivePointSize)+".0);"),i.push("gl_PointSize = min(gl_PointSize, "+Math.floor(s.maxPerspectivePointSize)+".0);")):i.push("gl_PointSize = pointSize;"),i.push("gl_PointSize += 10.0;"),i.push("  }"),i.push("}"),i}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Points batching pick mesh vertex shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(var r=0;r<t.sectionPlanes.length;r++)i.push("uniform bool sectionPlaneActive"+r+";"),i.push("uniform vec3 sectionPlanePos"+r+";"),i.push("uniform vec3 sectionPlaneDir"+r+";")}if(i.push("in vec4 vPickColor;"),i.push("out vec4 outColor;"),i.push("void main(void) {"),e.pointsMaterial.roundPoints&&(i.push("  vec2 cxy = 2.0 * gl_PointCoord - 1.0;"),i.push("  float r = dot(cxy, cxy);"),i.push("  if (r > 1.0) {"),i.push("       discard;"),i.push("  }")),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("      float dist = 0.0;");for(let e=0;e<t.sectionPlanes.length;e++)i.push("      if (sectionPlaneActive"+e+") {"),i.push("          dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("      }");i.push("      if (dist > 0.0) { discard; }"),i.push("  }")}return e.logarithmicDepthBufferEnabled&&i.push("gl_FragDepth = log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("   outColor = vPickColor; "),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const $l=p.vec3();class eh{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()+this._scene.pointsMaterial.hash}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=t._state.origin,h=r.pointsMaterial._state;this._program||this._allocate(),e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),n.uniform1i(this._uRenderPass,s),n.uniform1i(this._uPickInvisible,e.pickInvisible);const c=e.pickViewMatrix||o.viewMatrix,u=l?j(c,l):c;if(n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix),n.uniformMatrix4fv(this._uViewMatrix,!1,u),n.uniformMatrix4fv(this._uProjMatrix,!1,e.pickProjMatrix),n.uniform1f(this._uPickZNear,e.pickZNear),n.uniform1f(this._uPickZFar,e.pickZFar),r.logarithmicDepthBufferEnabled){const t=2/(Math.log(e.pickZFar+1)/Math.LN2);n.uniform1f(this._uLogDepthBufFC,t)}const A=r._sectionPlanesState.sectionPlanes.length;if(A>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*A,o=i.renderFlags;for(let t=0;t<A;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(l){const e=W(s.dist,s.dir,l,$l);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,t._state.positionsDecodeMatrix),this._aPosition.bindArrayBuffer(a.positionsBuf),this._aOffset&&this._aOffset.bindArrayBuffer(a.offsetsBuf),this._aFlags&&this._aFlags.bindArrayBuffer(a.flagsBuf),n.uniform1f(this._uPointSize,h.pointSize);const p="ortho"===r.camera.projection?1:n.drawingBufferHeight/(2*Math.tan(.5*r.camera.perspective.fov*Math.PI/180));n.uniform1f(this._uNearPlaneHeight,p),n.drawArrays(n.POINTS,0,a.positionsBuf.numItems)}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uPickInvisible=s.getLocation("pickInvisible"),this._uPositionsDecodeMatrix=s.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=s.getLocation("worldMatrix"),this._uViewMatrix=s.getLocation("viewMatrix"),this._uProjMatrix=s.getLocation("projMatrix"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});this._aPosition=s.getAttribute("position"),this._aOffset=s.getAttribute("offset"),this._aFlags=s.getAttribute("flags"),this._uPickZNear=s.getLocation("pickZNear"),this._uPickZFar=s.getLocation("pickZFar"),this._uPointSize=s.getLocation("pointSize"),this._uNearPlaneHeight=s.getLocation("nearPlaneHeight"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC"))}_bindProgram(){this._program.bind()}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=e.pointsMaterial._state,i=[];return i.push("#version 300 es"),i.push("// Points batched pick depth vertex shader"),i.push("uniform int renderPass;"),i.push("in vec3 position;"),e.entityOffsetsEnabled&&i.push("in vec3 offset;"),i.push("in float flags;"),i.push("uniform bool pickInvisible;"),i.push("uniform mat4 worldMatrix;"),i.push("uniform mat4 viewMatrix;"),i.push("uniform mat4 projMatrix;"),i.push("uniform mat4 positionsDecodeMatrix;"),i.push("uniform float pointSize;"),s.perspectivePoints&&i.push("uniform float nearPlaneHeight;"),e.logarithmicDepthBufferEnabled&&(i.push("uniform float logDepthBufFC;"),i.push("out float vFragDepth;")),t&&(i.push("out vec4 vWorldPosition;"),i.push("out float vFlags;")),i.push("out vec4 vViewPosition;"),i.push("void main(void) {"),i.push("int pickFlag = int(flags) >> 12 & 0xF;"),i.push("if (pickFlag != renderPass) {"),i.push("      gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),i.push("  } else {"),i.push("      vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),e.entityOffsetsEnabled&&i.push("      worldPosition.xyz = worldPosition.xyz + offset;"),i.push("      vec4 viewPosition  = viewMatrix * worldPosition; "),t&&(i.push("      vWorldPosition = worldPosition;"),i.push("      vFlags = flags;")),i.push("vViewPosition = viewPosition;"),i.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&i.push("vFragDepth = 1.0 + clipPos.w;"),i.push("gl_Position = clipPos;"),s.perspectivePoints?(i.push("gl_PointSize = (nearPlaneHeight * pointSize) / clipPos.w;"),i.push("gl_PointSize = max(gl_PointSize, "+Math.floor(s.minPerspectivePointSize)+".0);"),i.push("gl_PointSize = min(gl_PointSize, "+Math.floor(s.maxPerspectivePointSize)+".0);")):i.push("gl_PointSize = pointSize;"),i.push("gl_PointSize += 10.0;"),i.push("  }"),i.push("}"),i}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Points batched pick depth fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),i.push("uniform float pickZNear;"),i.push("uniform float pickZFar;"),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(let e=0;e<t.sectionPlanes.length;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("in vec4 vViewPosition;"),i.push("vec4 packDepth(const in float depth) {"),i.push("  const vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);"),i.push("  const vec4 bitMask  = vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);"),i.push("  vec4 res = fract(depth * bitShift);"),i.push("  res -= res.xxyz * bitMask;"),i.push("  return res;"),i.push("}"),i.push("out vec4 outColor;"),i.push("void main(void) {"),e.pointsMaterial.roundPoints&&(i.push("  vec2 cxy = 2.0 * gl_PointCoord - 1.0;"),i.push("  float r = dot(cxy, cxy);"),i.push("  if (r > 1.0) {"),i.push("       discard;"),i.push("  }")),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("      float dist = 0.0;");for(var r=0;r<t.sectionPlanes.length;r++)i.push("      if (sectionPlaneActive"+r+") {"),i.push("          dist += clamp(dot(-sectionPlaneDir"+r+".xyz, vWorldPosition.xyz - sectionPlanePos"+r+".xyz), 0.0, 1000.0);"),i.push("      }");i.push("      if (dist > 0.0) { discard; }"),i.push("  }")}return e.logarithmicDepthBufferEnabled&&i.push("gl_FragDepth = log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("    float zNormalizedDepth = abs((pickZNear + vViewPosition.z) / (pickZFar - pickZNear));"),i.push("    outColor = packDepth(zNormalizedDepth); "),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const th=p.vec3();class sh{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()+this._scene.pointsMaterial.hash}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.canvas.gl,n=t._state,a=r.camera,l=t._state.origin,h=r.pointsMaterial._state;if(!this._program&&(this._allocate(t),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),o.uniform1i(this._uRenderPass,s),o.uniformMatrix4fv(this._uViewMatrix,!1,l?j(a.viewMatrix,l):a.viewMatrix),o.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix);const c=r._sectionPlanesState.sectionPlanes.length;if(c>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*c,n=i.renderFlags;for(let t=0;t<c;t++){const i=this._uSectionPlanes[t];if(i){const r=n.sectionPlanesActivePerLayer[s+t];if(o.uniform1i(i.active,r?1:0),r){const s=e[t];if(l){const e=W(s.dist,s.dir,l,th);o.uniform3fv(i.pos,e)}else o.uniform3fv(i.pos,s.pos);o.uniform3fv(i.dir,s.dir)}}}}o.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,t._state.positionsDecodeMatrix),this._aPosition.bindArrayBuffer(n.positionsBuf),this._aOffset&&this._aOffset.bindArrayBuffer(n.offsetsBuf),this._aFlags.bindArrayBuffer(n.flagsBuf),o.uniform1f(this._uPointSize,h.pointSize);const u="ortho"===r.camera.projection?1:o.drawingBufferHeight/(2*Math.tan(.5*r.camera.perspective.fov*Math.PI/180));o.uniform1f(this._uNearPlaneHeight,u),o.drawArrays(o.POINTS,0,n.positionsBuf.numItems)}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uPositionsDecodeMatrix=s.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=s.getLocation("worldMatrix"),this._uViewMatrix=s.getLocation("viewMatrix"),this._uProjMatrix=s.getLocation("projMatrix"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});this._aPosition=s.getAttribute("position"),this._aOffset=s.getAttribute("offset"),this._aFlags=s.getAttribute("flags"),this._uPointSize=s.getLocation("pointSize"),this._uNearPlaneHeight=s.getLocation("nearPlaneHeight"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC"))}_bindProgram(){const e=this._scene,t=e.canvas.gl,s=e.camera.project;if(this._program.bind(),t.uniformMatrix4fv(this._uProjMatrix,!1,s.matrix),e.logarithmicDepthBufferEnabled){const e=2/(Math.log(s.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=e.pointsMaterial._state,i=[];return i.push("#version 300 es"),i.push("// Points batching occlusion vertex shader"),i.push("uniform int renderPass;"),i.push("in vec3 position;"),e.entityOffsetsEnabled&&i.push("in vec3 offset;"),i.push("in float flags;"),i.push("uniform mat4 worldMatrix;"),i.push("uniform mat4 viewMatrix;"),i.push("uniform mat4 projMatrix;"),i.push("uniform mat4 positionsDecodeMatrix;"),i.push("uniform float pointSize;"),s.perspectivePoints&&i.push("uniform float nearPlaneHeight;"),e.logarithmicDepthBufferEnabled&&(i.push("uniform float logDepthBufFC;"),i.push("out float vFragDepth;")),t&&(i.push("out vec4 vWorldPosition;"),i.push("out float vFlags;")),i.push("void main(void) {"),i.push("int colorFlag = int(flags) & 0xF;"),i.push("if (colorFlag != renderPass) {"),i.push("      gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),i.push("  } else {"),i.push("      vec4 worldPosition = worldMatrix * (positionsDecodeMatrix * vec4(position, 1.0)); "),e.entityOffsetsEnabled&&i.push("      worldPosition.xyz = worldPosition.xyz + offset;"),i.push("      vec4 viewPosition  = viewMatrix * worldPosition; "),t&&(i.push("      vWorldPosition = worldPosition;"),i.push("      vFlags = flags;")),i.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&i.push("vFragDepth = 1.0 + clipPos.w;"),i.push("  gl_Position = clipPos;"),s.perspectivePoints?(i.push("gl_PointSize = (nearPlaneHeight * pointSize) / clipPos.w;"),i.push("gl_PointSize = max(gl_PointSize, "+Math.floor(s.minPerspectivePointSize)+".0);"),i.push("gl_PointSize = min(gl_PointSize, "+Math.floor(s.maxPerspectivePointSize)+".0);")):i.push("gl_PointSize = pointSize;"),i.push("  }"),i.push("}"),i}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Points batching occlusion fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(let e=0;e<t.sectionPlanes.length;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("out vec4 outColor;"),i.push("void main(void) {"),e.pointsMaterial.roundPoints&&(i.push("  vec2 cxy = 2.0 * gl_PointCoord - 1.0;"),i.push("  float r = dot(cxy, cxy);"),i.push("  if (r > 1.0) {"),i.push("       discard;"),i.push("  }")),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("      float dist = 0.0;");for(let e=0;e<t.sectionPlanes.length;e++)i.push("      if (sectionPlaneActive"+e+") {"),i.push("          dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("      }");i.push("      if (dist > 0.0) { discard; }"),i.push("  }")}return e.logarithmicDepthBufferEnabled&&i.push("gl_FragDepth = log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("   outColor = vec4(0.0, 0.0, 1.0, 1.0); "),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}class ih{constructor(e){this._scene=e}_compile(){this._colorRenderer&&!this._colorRenderer.getValid()&&(this._colorRenderer.destroy(),this._colorRenderer=null),this._silhouetteRenderer&&!this._silhouetteRenderer.getValid()&&(this._silhouetteRenderer.destroy(),this._silhouetteRenderer=null),this._pickMeshRenderer&&!this._pickMeshRenderer.getValid()&&(this._pickMeshRenderer.destroy(),this._pickMeshRenderer=null),this._pickDepthRenderer&&!this._pickDepthRenderer.getValid()&&(this._pickDepthRenderer.destroy(),this._pickDepthRenderer=null),this._occlusionRenderer&&!1===this._occlusionRenderer.getValid()&&(this._occlusionRenderer.destroy(),this._occlusionRenderer=null)}get colorRenderer(){return this._colorRenderer||(this._colorRenderer=new Kl(this._scene)),this._colorRenderer}get silhouetteRenderer(){return this._silhouetteRenderer||(this._silhouetteRenderer=new Zl(this._scene)),this._silhouetteRenderer}get pickMeshRenderer(){return this._pickMeshRenderer||(this._pickMeshRenderer=new Jl(this._scene)),this._pickMeshRenderer}get pickDepthRenderer(){return this._pickDepthRenderer||(this._pickDepthRenderer=new eh(this._scene)),this._pickDepthRenderer}get occlusionRenderer(){return this._occlusionRenderer||(this._occlusionRenderer=new sh(this._scene)),this._occlusionRenderer}_destroy(){this._colorRenderer&&this._colorRenderer.destroy(),this._silhouetteRenderer&&this._silhouetteRenderer.destroy(),this._pickMeshRenderer&&this._pickMeshRenderer.destroy(),this._pickDepthRenderer&&this._pickDepthRenderer.destroy(),this._occlusionRenderer&&this._occlusionRenderer.destroy()}}const rh={};class oh{constructor(e=5e6){e>5e6&&(e=5e6),this.maxVerts=e,this.maxIndices=3*e,this.positions=[],this.colors=[],this.intensities=[],this.pickColors=[],this.offsets=[]}}const nh=p.vec4(),ah=p.vec4(),lh=p.vec4([0,0,0,1]),hh=p.vec4([0,0,0,1]),ch=p.vec4([0,0,0,1]),uh=p.OBB3();class Ah{constructor(e){this.model=e.model,this.sortId="PointsBatchingLayer",this.layerIndex=e.layerIndex,this._pointsBatchingRenderers=function(e){const t=e.id;let s=rh[t];return s||(s=new ih(e),rh[t]=s,s._compile(),e.on("compile",(()=>{s._compile()})),e.on("destroyed",(()=>{delete rh[t],s._destroy()}))),s}(e.model.scene),this._buffer=new oh(e.maxGeometryBatchSize),this._scratchMemory=e.scratchMemory,this._state=new Ze({positionsBuf:null,offsetsBuf:null,colorsBuf:null,flagsBuf:null,positionsDecodeMatrix:p.mat4(),origin:null}),this._numPortions=0,this._numVisibleLayerPortions=0,this._numTransparentLayerPortions=0,this._numXRayedLayerPortions=0,this._numSelectedLayerPortions=0,this._numHighlightedLayerPortions=0,this._numClippableLayerPortions=0,this._numPickableLayerPortions=0,this._numCulledLayerPortions=0,this._modelAABB=p.collapseAABB3(),this._portions=[],this._finalized=!1,e.positionsDecodeMatrix?(this._state.positionsDecodeMatrix.set(e.positionsDecodeMatrix),this._preCompressedPositionsExpected=!0):this._preCompressedPositionsExpected=!1,e.origin&&(this._state.origin=p.vec3(e.origin)),this.aabb=p.collapseAABB3()}canCreatePortion(e){if(this._finalized)throw"Already finalized";return this._buffer.positions.length+e<3*this._buffer.maxVerts}createPortion(e){if(this._finalized)throw"Already finalized";const t=e.positions,s=e.positionsCompressed,i=e.color,r=e.colorsCompressed,o=e.colors,n=e.meshMatrix,a=e.worldMatrix,l=e.worldAABB,h=e.pickColor,c=this._buffer,u=c.positions.length/3;let A;if(this._preCompressedPositionsExpected){if(!s)throw"positionsCompressed expected";for(let e=0,t=s.length;e<t;e++)c.positions.push(s[e]);const e=it.getPositionsBounds(s),t=it.decompressPosition(e.min,this._state.positionsDecodeMatrix,nh),i=it.decompressPosition(e.max,this._state.positionsDecodeMatrix,ah);l[0]=t[0],l[1]=t[1],l[2]=t[2],l[3]=i[0],l[4]=i[1],l[5]=i[2],a&&(p.AABB3ToOBB3(l,uh),p.transformOBB3(a,uh),p.OBB3ToAABB3(uh,l)),A=s.length/3}else{if(!t)throw"positions expected";A=t.length/3;const e=t.length,s=c.positions.length;for(let e=0,s=t.length;e<s;e++)c.positions.push(t[e]);if(n)for(let t=s,i=s+e;t<i;t+=3)lh[0]=c.positions[t+0],lh[1]=c.positions[t+1],lh[2]=c.positions[t+2],p.transformPoint4(n,lh,hh),c.positions[t+0]=hh[0],c.positions[t+1]=hh[1],c.positions[t+2]=hh[2],p.expandAABB3Point3(this._modelAABB,hh),a?(p.transformPoint4(a,hh,ch),p.expandAABB3Point3(l,ch)):p.expandAABB3Point3(l,hh);else for(let t=s,i=s+e;t<i;t+=3)lh[0]=c.positions[t+0],lh[1]=c.positions[t+1],lh[2]=c.positions[t+2],p.expandAABB3Point3(this._modelAABB,lh),a?(p.transformPoint4(a,lh,hh),p.expandAABB3Point3(l,hh)):p.expandAABB3Point3(l,lh)}if(this._state.origin){const e=this._state.origin;l[0]+=e[0],l[1]+=e[1],l[2]+=e[2],l[3]+=e[0],l[4]+=e[1],l[5]+=e[2]}if(p.expandAABB3(this.aabb,l),r)for(let e=0,t=r.length;e<t;e++)c.colors.push(r[e]);else if(o)for(let e=0,t=o.length;e<t;e++)c.colors.push(255*o[e]);else if(i){const e=i[0],t=i[1],s=i[2],r=1;for(let i=0;i<A;i++)c.colors.push(e),c.colors.push(t),c.colors.push(s),c.colors.push(r)}{const e=c.pickColors.length;for(let t=e,s=e+4*A;t<s;t+=4)c.pickColors.push(h[0]),c.pickColors.push(h[1]),c.pickColors.push(h[2]),c.pickColors.push(h[3])}if(this.model.scene.entityOffsetsEnabled)for(let e=0;e<A;e++)c.offsets.push(0),c.offsets.push(0),c.offsets.push(0);const d=this._portions.length/2;return this._portions.push(u),this._portions.push(A),this._numPortions++,this.model.numPortions++,d}finalize(){if(this._finalized)return void this.model.error("Already finalized");const e=this._state,t=this.model.scene.canvas.gl,s=this._buffer;if(s.positions.length>0)if(this._preCompressedPositionsExpected){const i=new Uint16Array(s.positions);e.positionsBuf=new ye(t,t.ARRAY_BUFFER,i,s.positions.length,3,t.STATIC_DRAW)}else{const i=ia(new Float32Array(s.positions),this._modelAABB,e.positionsDecodeMatrix);e.positionsBuf=new ye(t,t.ARRAY_BUFFER,i,s.positions.length,3,t.STATIC_DRAW)}if(s.colors.length>0){const i=new Uint8Array(s.colors);let r=!1;e.colorsBuf=new ye(t,t.ARRAY_BUFFER,i,s.colors.length,4,t.STATIC_DRAW,r)}if(s.positions.length>0){const i=s.positions.length/3,r=new Float32Array(i);let o=!1;e.flagsBuf=new ye(t,t.ARRAY_BUFFER,r,r.length,1,t.DYNAMIC_DRAW,o)}if(s.pickColors.length>0){const i=new Uint8Array(s.pickColors);let r=!1;e.pickColorsBuf=new ye(t,t.ARRAY_BUFFER,i,s.pickColors.length,4,t.STATIC_DRAW,r)}if(this.model.scene.entityOffsetsEnabled&&s.offsets.length>0){const i=new Float32Array(s.offsets);e.offsetsBuf=new ye(t,t.ARRAY_BUFFER,i,s.offsets.length,3,t.DYNAMIC_DRAW)}this._buffer=null,this._finalized=!0}initFlags(e,t,s){t&N&&(this._numVisibleLayerPortions++,this.model.numVisibleLayerPortions++),t&F&&(this._numHighlightedLayerPortions++,this.model.numHighlightedLayerPortions++),t&B&&(this._numXRayedLayerPortions++,this.model.numXRayedLayerPortions++),t&L&&(this._numSelectedLayerPortions++,this.model.numSelectedLayerPortions++),t&w&&(this._numClippableLayerPortions++,this.model.numClippableLayerPortions++),t&S&&(this._numPickableLayerPortions++,this.model.numPickableLayerPortions++),t&O&&(this._numCulledLayerPortions++,this.model.numCulledLayerPortions++),s&&(this._numTransparentLayerPortions++,this.model.numTransparentLayerPortions++),this._setFlags(e,t,s)}setVisible(e,t,s){if(!this._finalized)throw"Not finalized";t&N?(this._numVisibleLayerPortions++,this.model.numVisibleLayerPortions++):(this._numVisibleLayerPortions--,this.model.numVisibleLayerPortions--),this._setFlags(e,t,s)}setHighlighted(e,t,s){if(!this._finalized)throw"Not finalized";t&F?(this._numHighlightedLayerPortions++,this.model.numHighlightedLayerPortions++):(this._numHighlightedLayerPortions--,this.model.numHighlightedLayerPortions--),this._setFlags(e,t,s)}setXRayed(e,t,s){if(!this._finalized)throw"Not finalized";t&B?(this._numXRayedLayerPortions++,this.model.numXRayedLayerPortions++):(this._numXRayedLayerPortions--,this.model.numXRayedLayerPortions--),this._setFlags(e,t,s)}setSelected(e,t,s){if(!this._finalized)throw"Not finalized";t&L?(this._numSelectedLayerPortions++,this.model.numSelectedLayerPortions++):(this._numSelectedLayerPortions--,this.model.numSelectedLayerPortions--),this._setFlags(e,t,s)}setEdges(e,t,s){if(!this._finalized)throw"Not finalized"}setClippable(e,t){if(!this._finalized)throw"Not finalized";t&w?(this._numClippableLayerPortions++,this.model.numClippableLayerPortions++):(this._numClippableLayerPortions--,this.model.numClippableLayerPortions--),this._setFlags(e,t)}setCulled(e,t,s){if(!this._finalized)throw"Not finalized";t&O?(this._numCulledLayerPortions++,this.model.numCulledLayerPortions++):(this._numCulledLayerPortions--,this.model.numCulledLayerPortions--),this._setFlags(e,t,s)}setCollidable(e,t){if(!this._finalized)throw"Not finalized"}setPickable(e,t,s){if(!this._finalized)throw"Not finalized";t&S?(this._numPickableLayerPortions++,this.model.numPickableLayerPortions++):(this._numPickableLayerPortions--,this.model.numPickableLayerPortions--),this._setFlags(e,t,s)}setColor(e,t){if(!this._finalized)throw"Not finalized";const s=2*e,i=4*this._portions[s],r=4*this._portions[s+1],o=this._scratchMemory.getUInt8Array(r),n=t[0],a=t[1],l=t[2];for(let e=0;e<r;e+=4)o[e+0]=n,o[e+1]=a,o[e+2]=l;this._state.colorsBuf.setData(o,i,r)}setTransparent(e,t,s){s?(this._numTransparentLayerPortions++,this.model.numTransparentLayerPortions++):(this._numTransparentLayerPortions--,this.model.numTransparentLayerPortions--),this._setFlags(e,t,s)}_setFlags(e,t,s){if(!this._finalized)throw"Not finalized";const i=2*e,r=this._portions[i],o=this._portions[i+1],n=this._scratchMemory.getFloat32Array(o),a=!!(t&N),l=!!(t&B),h=!!(t&F),c=!!(t&L),u=!!(t&S),A=!!(t&O);let p,d;p=!a||A||l||h&&!this.model.scene.highlightMaterial.glowThrough||c&&!this.model.scene.selectedMaterial.glowThrough?rn:s?nn:on,d=!a||A?rn:c?ln:h?an:l?hn:rn;let f=a&&!A&&u?fn:rn;const m=t&w?1:0;for(let e=0;e<o;e++){let t=0;t|=p,t|=d<<4,t|=f<<12,t|=m<<16,n[e]=t}this._state.flagsBuf.setData(n,r)}setOffset(e,t){if(!this._finalized)throw"Not finalized";if(!this.model.scene.entityOffsetsEnabled)return void this.model.error("Entity#offset not enabled for this Viewer");const s=2*e,i=3*this._portions[s],r=3*this._portions[s+1],o=this._scratchMemory.getFloat32Array(r),n=t[0],a=t[1],l=t[2];for(let e=0;e<r;e+=3)o[e+0]=n,o[e+1]=a,o[e+2]=l;this._state.offsetsBuf.setData(o,i,r)}drawColorOpaque(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&this._numTransparentLayerPortions!==this._numPortions&&this._numXRayedLayerPortions!==this._numPortions&&this._pointsBatchingRenderers.colorRenderer&&this._pointsBatchingRenderers.colorRenderer.drawLayer(t,this,on)}drawColorTransparent(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numTransparentLayerPortions&&this._numXRayedLayerPortions!==this._numPortions&&this._pointsBatchingRenderers.colorRenderer&&this._pointsBatchingRenderers.colorRenderer.drawLayer(t,this,nn)}drawDepth(e,t){}drawNormals(e,t){}drawSilhouetteXRayed(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numXRayedLayerPortions&&this._pointsBatchingRenderers.silhouetteRenderer&&this._pointsBatchingRenderers.silhouetteRenderer.drawLayer(t,this,hn)}drawSilhouetteHighlighted(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numHighlightedLayerPortions&&this._pointsBatchingRenderers.silhouetteRenderer&&this._pointsBatchingRenderers.silhouetteRenderer.drawLayer(t,this,an)}drawSilhouetteSelected(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numSelectedLayerPortions&&this._pointsBatchingRenderers.silhouetteRenderer&&this._pointsBatchingRenderers.silhouetteRenderer.drawLayer(t,this,ln)}drawEdgesColorOpaque(e,t){}drawEdgesColorTransparent(e,t){}drawEdgesHighlighted(e,t){}drawEdgesSelected(e,t){}drawEdgesXRayed(e,t){}drawPickMesh(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&this._pointsBatchingRenderers.pickMeshRenderer&&this._pointsBatchingRenderers.pickMeshRenderer.drawLayer(t,this,fn)}drawPickDepths(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&this._pointsBatchingRenderers.pickDepthRenderer&&this._pointsBatchingRenderers.pickDepthRenderer.drawLayer(t,this,fn)}drawPickNormals(e,t){}drawOcclusion(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&this._pointsBatchingRenderers.occlusionRenderer&&this._pointsBatchingRenderers.occlusionRenderer.drawLayer(t,this,on)}drawShadow(e,t){}destroy(){const e=this._state;e.positionsBuf&&(e.positionsBuf.destroy(),e.positionsBuf=null),e.offsetsBuf&&(e.offsetsBuf.destroy(),e.offsetsBuf=null),e.colorsBuf&&(e.colorsBuf.destroy(),e.colorsBuf=null),e.flagsBuf&&(e.flagsBuf.destroy(),e.flagsBuf=null),e.pickColorsBuf&&(e.pickColorsBuf.destroy(),e.pickColorsBuf=null),e.destroy()}}const ph=p.vec3();class dh{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()+this._scene.pointsMaterial.hash}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=t._state.origin,h=r.pointsMaterial._state,c=t.geometry;if(!this._program&&(this._allocate(),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),n.uniform1i(this._uRenderPass,s),n.uniformMatrix4fv(this._uViewMatrix,!1,l?j(o.viewMatrix,l):o.viewMatrix),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix),this._aPosition.bindArrayBuffer(c.positionsBuf),this._aColor.bindArrayBuffer(c.colorsBuf),h.filterIntensity&&n.uniform2f(this._uIntensityRange,h.minIntensity,h.maxIntensity);const u=r._sectionPlanesState.sectionPlanes.length;if(u>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*u,o=i.renderFlags;for(let t=0;t<u;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(l){const e=W(s.dist,s.dir,l,ph);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,c.positionsDecodeMatrix),this._aModelMatrixCol0.bindArrayBuffer(a.modelMatrixCol0Buf),this._aModelMatrixCol1.bindArrayBuffer(a.modelMatrixCol1Buf),this._aModelMatrixCol2.bindArrayBuffer(a.modelMatrixCol2Buf),n.vertexAttribDivisor(this._aModelMatrixCol0.location,1),n.vertexAttribDivisor(this._aModelMatrixCol1.location,1),n.vertexAttribDivisor(this._aModelMatrixCol2.location,1),this._aFlags.bindArrayBuffer(a.flagsBuf),n.vertexAttribDivisor(this._aFlags.location,1),this._aOffset&&(this._aOffset.bindArrayBuffer(a.offsetsBuf),n.vertexAttribDivisor(this._aOffset.location,1)),n.uniform1f(this._uPointSize,h.pointSize);const A="ortho"===r.camera.projection?1:n.drawingBufferHeight/(2*Math.tan(.5*r.camera.perspective.fov*Math.PI/180));n.uniform1f(this._uNearPlaneHeight,A),n.drawArraysInstanced(n.POINTS,0,c.positionsBuf.numItems,a.numInstances),e.drawArrays++,n.vertexAttribDivisor(this._aModelMatrixCol0.location,0),n.vertexAttribDivisor(this._aModelMatrixCol1.location,0),n.vertexAttribDivisor(this._aModelMatrixCol2.location,0),n.vertexAttribDivisor(this._aFlags.location,0),this._aOffset&&n.vertexAttribDivisor(this._aOffset.location,0)}_allocate(){const e=this._scene,t=e.pointsMaterial._state,s=e.canvas.gl;if(this._program=new ge(s,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uRenderPass=i.getLocation("renderPass"),this._uPositionsDecodeMatrix=i.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=i.getLocation("worldMatrix"),this._uViewMatrix=i.getLocation("viewMatrix"),this._uProjMatrix=i.getLocation("projMatrix"),this._uSectionPlanes=[];for(let t=0,s=e._sectionPlanesState.sectionPlanes.length;t<s;t++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+t),pos:i.getLocation("sectionPlanePos"+t),dir:i.getLocation("sectionPlaneDir"+t)});this._aPosition=i.getAttribute("position"),this._aColor=i.getAttribute("color"),this._aFlags=i.getAttribute("flags"),this._aOffset=i.getAttribute("offset"),this._aModelMatrixCol0=i.getAttribute("modelMatrixCol0"),this._aModelMatrixCol1=i.getAttribute("modelMatrixCol1"),this._aModelMatrixCol2=i.getAttribute("modelMatrixCol2"),this._uOcclusionTexture="uOcclusionTexture",this._uPointSize=i.getLocation("pointSize"),this._uNearPlaneHeight=i.getLocation("nearPlaneHeight"),t.filterIntensity&&(this._uIntensityRange=i.getLocation("intensityRange")),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=i.getLocation("logDepthBufFC"))}_bindProgram(){const e=this._scene,t=e.canvas.gl,s=e.camera.project;if(this._program.bind(),t.uniformMatrix4fv(this._uProjMatrix,!1,s.matrix),e.logarithmicDepthBufferEnabled){const e=2/(Math.log(s.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=e.pointsMaterial._state,i=[];return i.push("#version 300 es"),i.push("// Points instancing color vertex shader"),i.push("uniform int renderPass;"),i.push("in vec3 position;"),i.push("in vec4 color;"),i.push("in float flags;"),e.entityOffsetsEnabled&&i.push("in vec3 offset;"),i.push("in vec4 modelMatrixCol0;"),i.push("in vec4 modelMatrixCol1;"),i.push("in vec4 modelMatrixCol2;"),i.push("uniform mat4 worldMatrix;"),i.push("uniform mat4 viewMatrix;"),i.push("uniform mat4 projMatrix;"),i.push("uniform mat4 positionsDecodeMatrix;"),i.push("uniform float pointSize;"),s.perspectivePoints&&i.push("uniform float nearPlaneHeight;"),s.filterIntensity&&i.push("uniform vec2 intensityRange;"),e.logarithmicDepthBufferEnabled&&(i.push("uniform float logDepthBufFC;"),i.push("out float vFragDepth;")),t&&(i.push("out vec4 vWorldPosition;"),i.push("out float vFlags;")),i.push("out vec4 vColor;"),i.push("void main(void) {"),i.push("int colorFlag = int(flags) & 0xF;"),i.push("if (colorFlag != renderPass) {"),i.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),i.push("} else {"),s.filterIntensity&&(i.push("float intensity = float(color.a) / 255.0;"),i.push("if (intensity < intensityRange[0] || intensity > intensityRange[1]) {"),i.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),i.push("} else {")),i.push("vec4 worldPosition =  positionsDecodeMatrix * vec4(position, 1.0); "),i.push("worldPosition = worldMatrix * vec4(dot(worldPosition, modelMatrixCol0), dot(worldPosition, modelMatrixCol1), dot(worldPosition, modelMatrixCol2), 1.0);"),e.entityOffsetsEnabled&&i.push("      worldPosition.xyz = worldPosition.xyz + offset;"),i.push("vec4 viewPosition  = viewMatrix * worldPosition; "),i.push("vColor = vec4(float(color.r) / 255.0, float(color.g) / 255.0, float(color.b) / 255.0, 1.0);"),t&&(i.push("vWorldPosition = worldPosition;"),i.push("vFlags = flags;")),i.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&i.push("vFragDepth = 1.0 + clipPos.w;"),i.push("gl_Position = clipPos;"),s.perspectivePoints?(i.push("gl_PointSize = (nearPlaneHeight * pointSize) / clipPos.w;"),i.push("gl_PointSize = max(gl_PointSize, "+Math.floor(s.minPerspectivePointSize)+".0);"),i.push("gl_PointSize = min(gl_PointSize, "+Math.floor(s.maxPerspectivePointSize)+".0);")):i.push("gl_PointSize = pointSize;"),i.push("}"),s.filterIntensity&&i.push("}"),i.push("}"),i}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Points instancing color fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("in vec4 vColor;"),i.push("out vec4 outColor;"),i.push("void main(void) {"),e.pointsMaterial.roundPoints&&(i.push("  vec2 cxy = 2.0 * gl_PointCoord - 1.0;"),i.push("  float r = dot(cxy, cxy);"),i.push("  if (r > 1.0) {"),i.push("       discard;"),i.push("  }")),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("  float dist = 0.0;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("if (sectionPlaneActive"+e+") {"),i.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("}");i.push("if (dist > 0.0) { discard; }"),i.push("}")}return i.push("   outColor = vColor;"),e.logarithmicDepthBufferEnabled&&i.push("gl_FragDepth = log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const fh=p.vec3();class mh{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()+this._scene.pointsMaterial.hash}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=t._state.origin,h=r.pointsMaterial._state,c=t.geometry;if(!this._program&&(this._allocate(t.model.scene),this.errors))return;if(e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),n.uniform1i(this._uRenderPass,s),s===hn){const e=r.xrayMaterial._state,t=e.fillColor,s=e.fillAlpha;n.uniform4f(this._uColor,t[0],t[1],t[2],s)}else if(s===an){const e=r.highlightMaterial._state,t=e.fillColor,s=e.fillAlpha;n.uniform4f(this._uColor,t[0],t[1],t[2],s)}else if(s===ln){const e=r.selectedMaterial._state,t=e.fillColor,s=e.fillAlpha;n.uniform4f(this._uColor,t[0],t[1],t[2],s)}else n.uniform4fv(this._uColor,p.vec3([1,1,1]));n.uniformMatrix4fv(this._uViewMatrix,!1,l?j(o.viewMatrix,l):o.viewMatrix),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix);const u=r._sectionPlanesState.sectionPlanes.length;if(u>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*u,o=i.renderFlags;for(let t=0;t<u;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(l){const e=W(s.dist,s.dir,l,fh);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,c.positionsDecodeMatrix),this._aModelMatrixCol0.bindArrayBuffer(a.modelMatrixCol0Buf),this._aModelMatrixCol1.bindArrayBuffer(a.modelMatrixCol1Buf),this._aModelMatrixCol2.bindArrayBuffer(a.modelMatrixCol2Buf),n.vertexAttribDivisor(this._aModelMatrixCol0.location,1),n.vertexAttribDivisor(this._aModelMatrixCol1.location,1),n.vertexAttribDivisor(this._aModelMatrixCol2.location,1),this._aPosition.bindArrayBuffer(c.positionsBuf),this._aFlags.bindArrayBuffer(a.flagsBuf,n.UNSIGNED_BYTE,!0),n.vertexAttribDivisor(this._aFlags.location,1),this._aOffset&&(this._aOffset.bindArrayBuffer(a.offsetsBuf),n.vertexAttribDivisor(this._aOffset.location,1)),n.uniform1f(this._uPointSize,h.pointSize);const A="ortho"===r.camera.projection?1:n.drawingBufferHeight/(2*Math.tan(.5*r.camera.perspective.fov*Math.PI/180));n.uniform1f(this._uNearPlaneHeight,A),n.drawArraysInstanced(n.POINTS,0,c.positionsBuf.numItems,a.numInstances),n.vertexAttribDivisor(this._aModelMatrixCol0.location,0),n.vertexAttribDivisor(this._aModelMatrixCol1.location,0),n.vertexAttribDivisor(this._aModelMatrixCol2.location,0),n.vertexAttribDivisor(this._aFlags.location,0),this._aOffset&&n.vertexAttribDivisor(this._aOffset.location,0)}_allocate(){const e=this._scene,t=e.canvas.gl,s=e._sectionPlanesState;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uRenderPass=i.getLocation("renderPass"),this._uPositionsDecodeMatrix=i.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=i.getLocation("worldMatrix"),this._uViewMatrix=i.getLocation("viewMatrix"),this._uProjMatrix=i.getLocation("projMatrix"),this._uColor=i.getLocation("silhouetteColor"),this._uSectionPlanes=[];for(let e=0,t=s.sectionPlanes.length;e<t;e++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+e),pos:i.getLocation("sectionPlanePos"+e),dir:i.getLocation("sectionPlaneDir"+e)});this._aPosition=i.getAttribute("position"),this._aOffset=i.getAttribute("offset"),this._aFlags=i.getAttribute("flags"),this._aModelMatrixCol0=i.getAttribute("modelMatrixCol0"),this._aModelMatrixCol1=i.getAttribute("modelMatrixCol1"),this._aModelMatrixCol2=i.getAttribute("modelMatrixCol2"),this._uPointSize=i.getLocation("pointSize"),this._uNearPlaneHeight=i.getLocation("nearPlaneHeight"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=i.getLocation("logDepthBufFC"))}_bindProgram(){const e=this._scene,t=e.canvas.gl,s=e.camera.project;if(this._program.bind(),t.uniformMatrix4fv(this._uProjMatrix,!1,s.matrix),e.logarithmicDepthBufferEnabled){const e=2/(Math.log(s.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=e.pointsMaterial._state,i=[];return i.push("#version 300 es"),i.push("// Points instancing silhouette vertex shader"),i.push("uniform int renderPass;"),i.push("in vec3 position;"),e.entityOffsetsEnabled&&i.push("in vec3 offset;"),i.push("in float flags;"),i.push("in vec4 color;"),i.push("in vec4 modelMatrixCol0;"),i.push("in vec4 modelMatrixCol1;"),i.push("in vec4 modelMatrixCol2;"),i.push("uniform mat4 worldMatrix;"),i.push("uniform mat4 viewMatrix;"),i.push("uniform mat4 projMatrix;"),i.push("uniform mat4 positionsDecodeMatrix;"),i.push("uniform float pointSize;"),s.perspectivePoints&&i.push("uniform float nearPlaneHeight;"),e.logarithmicDepthBufferEnabled&&(i.push("uniform float logDepthBufFC;"),i.push("out float vFragDepth;")),i.push("uniform vec4 silhouetteColor;"),t&&(i.push("out vec4 vWorldPosition;"),i.push("out float vFlags;")),i.push("out vec4 vColor;"),i.push("void main(void) {"),i.push("int silhouetteFlag = int(flags) >> 4 & 0xF;"),i.push("if (silhouetteFlag != renderPass) {"),i.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),i.push("} else {"),i.push("vec4 worldPosition = positionsDecodeMatrix * vec4(position, 1.0); "),i.push("worldPosition = worldMatrix * vec4(dot(worldPosition, modelMatrixCol0), dot(worldPosition, modelMatrixCol1), dot(worldPosition, modelMatrixCol2), 1.0);"),e.entityOffsetsEnabled&&i.push("      worldPosition.xyz = worldPosition.xyz + offset;"),i.push("vec4 viewPosition  = viewMatrix * worldPosition; "),t&&(i.push("vWorldPosition = worldPosition;"),i.push("vFlags = flags;")),i.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&i.push("vFragDepth = 1.0 + clipPos.w;"),i.push("vColor = vec4(float(silhouetteColor.r) / 255.0, float(silhouetteColor.g) / 255.0, float(silhouetteColor.b) / 255.0, float(color.a) / 255.0);"),i.push("gl_Position = clipPos;"),s.perspectivePoints?(i.push("gl_PointSize = (nearPlaneHeight * pointSize) / clipPos.w;"),i.push("gl_PointSize = max(gl_PointSize, "+Math.floor(s.minPerspectivePointSize)+".0);"),i.push("gl_PointSize = min(gl_PointSize, "+Math.floor(s.maxPerspectivePointSize)+".0);")):i.push("gl_PointSize = pointSize;"),i.push("}"),i.push("}"),i}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Points instancing silhouette fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("in vec4 vColor;"),i.push("out vec4 outColor;"),i.push("void main(void) {"),e.pointsMaterial.roundPoints&&(i.push("  vec2 cxy = 2.0 * gl_PointCoord - 1.0;"),i.push("  float r = dot(cxy, cxy);"),i.push("  if (r > 1.0) {"),i.push("       discard;"),i.push("  }")),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("  float dist = 0.0;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("if (sectionPlaneActive"+e+") {"),i.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("}");i.push("if (dist > 0.0) { discard; }"),i.push("}")}return e.logarithmicDepthBufferEnabled&&i.push("gl_FragDepth = log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("outColor = vColor;"),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const gh=p.vec3();class yh{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()+this._scene.pointsMaterial.hash}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=t._state.origin,h=r.pointsMaterial._state,c=t.geometry;if(!this._program&&(this._allocate(),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram(e)),n.uniform1i(this._uRenderPass,s);const u=e.pickViewMatrix||o.viewMatrix,A=l?j(u,l):u;if(n.uniformMatrix4fv(this._uViewMatrix,!1,A),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix),n.uniformMatrix4fv(this._uProjMatrix,!1,e.pickProjMatrix),r.logarithmicDepthBufferEnabled){const e=2/(Math.log(o.project.far+1)/Math.LN2);n.uniform1f(this._uLogDepthBufFC,e)}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,c.positionsDecodeMatrix),this._aModelMatrixCol0.bindArrayBuffer(a.modelMatrixCol0Buf),this._aModelMatrixCol1.bindArrayBuffer(a.modelMatrixCol1Buf),this._aModelMatrixCol2.bindArrayBuffer(a.modelMatrixCol2Buf),n.vertexAttribDivisor(this._aModelMatrixCol0.location,1),n.vertexAttribDivisor(this._aModelMatrixCol1.location,1),n.vertexAttribDivisor(this._aModelMatrixCol2.location,1),this._aPickColor.bindArrayBuffer(a.pickColorsBuf),n.vertexAttribDivisor(this._aPickColor.location,1),this._aPosition.bindArrayBuffer(c.positionsBuf),this._aFlags.bindArrayBuffer(a.flagsBuf),n.vertexAttribDivisor(this._aFlags.location,1),this._aOffset&&(this._aOffset.bindArrayBuffer(a.offsetsBuf),n.vertexAttribDivisor(this._aOffset.location,1)),n.uniform1f(this._uPointSize,h.pointSize);const p="ortho"===r.camera.projection?1:n.drawingBufferHeight/(2*Math.tan(.5*r.camera.perspective.fov*Math.PI/180));n.uniform1f(this._uNearPlaneHeight,p);const d=r._sectionPlanesState.sectionPlanes.length;if(d>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*d,o=i.renderFlags;for(let t=0;t<d;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(l){const e=W(s.dist,s.dir,l,gh);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}n.drawArraysInstanced(n.POINTS,0,c.positionsBuf.numItems,a.numInstances),n.vertexAttribDivisor(this._aModelMatrixCol0.location,0),n.vertexAttribDivisor(this._aModelMatrixCol1.location,0),n.vertexAttribDivisor(this._aModelMatrixCol2.location,0),n.vertexAttribDivisor(this._aPickColor.location,0),n.vertexAttribDivisor(this._aFlags.location,0),this._aOffset&&n.vertexAttribDivisor(this._aOffset.location,0)}_allocate(){const e=this._scene,t=e.canvas.gl,s=e._sectionPlanesState;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uPickInvisible=i.getLocation("pickInvisible"),this._uPositionsDecodeMatrix=i.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=i.getLocation("worldMatrix"),this._uViewMatrix=i.getLocation("viewMatrix"),this._uProjMatrix=i.getLocation("projMatrix"),this._uSectionPlanes=[];for(let e=0,t=s.sectionPlanes.length;e<t;e++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+e),pos:i.getLocation("sectionPlanePos"+e),dir:i.getLocation("sectionPlaneDir"+e)});this._uRenderPass=i.getLocation("renderPass"),this._aPosition=i.getAttribute("position"),this._aOffset=i.getAttribute("offset"),this._aPickColor=i.getAttribute("pickColor"),this._aFlags=i.getAttribute("flags"),this._aModelMatrixCol0=i.getAttribute("modelMatrixCol0"),this._aModelMatrixCol1=i.getAttribute("modelMatrixCol1"),this._aModelMatrixCol2=i.getAttribute("modelMatrixCol2"),this._uPointSize=i.getLocation("pointSize"),this._uNearPlaneHeight=i.getLocation("nearPlaneHeight"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=i.getLocation("logDepthBufFC"))}_bindProgram(e){const t=this._scene.canvas.gl;this._program.bind(),t.uniform1i(this._uPickInvisible,e.pickInvisible)}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=e.pointsMaterial._state,i=[];return i.push("#version 300 es"),i.push("// Points instancing pick mesh vertex shader"),i.push("uniform int renderPass;"),i.push("in vec3 position;"),e.entityOffsetsEnabled&&i.push("in vec3 offset;"),i.push("in float flags;"),i.push("in vec4 pickColor;"),i.push("in vec4 modelMatrixCol0;"),i.push("in vec4 modelMatrixCol1;"),i.push("in vec4 modelMatrixCol2;"),i.push("uniform bool pickInvisible;"),i.push("uniform mat4 worldMatrix;"),i.push("uniform mat4 viewMatrix;"),i.push("uniform mat4 projMatrix;"),i.push("uniform mat4 positionsDecodeMatrix;"),i.push("uniform float pointSize;"),s.perspectivePoints&&i.push("uniform float nearPlaneHeight;"),e.logarithmicDepthBufferEnabled&&(i.push("uniform float logDepthBufFC;"),i.push("out float vFragDepth;")),t&&(i.push("out vec4 vWorldPosition;"),i.push("out float vFlags;")),i.push("out vec4 vPickColor;"),i.push("void main(void) {"),i.push("int pickFlag = int(flags) >> 12 & 0xF;"),i.push("if (pickFlag != renderPass) {"),i.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),i.push("} else {"),i.push("  vec4 worldPosition = positionsDecodeMatrix * vec4(position, 1.0); "),i.push("  worldPosition = worldMatrix * vec4(dot(worldPosition, modelMatrixCol0), dot(worldPosition, modelMatrixCol1), dot(worldPosition, modelMatrixCol2), 1.0);"),e.entityOffsetsEnabled&&i.push("      worldPosition.xyz = worldPosition.xyz + offset;"),i.push("  vec4 viewPosition  = viewMatrix * worldPosition; "),i.push("  vPickColor = vec4(float(pickColor.r) / 255.0, float(pickColor.g) / 255.0, float(pickColor.b) / 255.0, float(pickColor.a) / 255.0);"),t&&(i.push("  vWorldPosition = worldPosition;"),i.push("  vFlags = flags;")),i.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&i.push("vFragDepth = 1.0 + clipPos.w;"),s.perspectivePoints?(i.push("gl_PointSize = (nearPlaneHeight * pointSize) / clipPos.w;"),i.push("gl_PointSize = max(gl_PointSize, "+Math.floor(s.minPerspectivePointSize)+".0);"),i.push("gl_PointSize = min(gl_PointSize, "+Math.floor(s.maxPerspectivePointSize)+".0);")):i.push("gl_PointSize = pointSize;"),i.push("}"),i.push("}"),i}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Points instancing pick mesh fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(let e=0;e<t.sectionPlanes.length;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("in vec4 vPickColor;"),i.push("out vec4 outColor;"),i.push("void main(void) {"),e.pointsMaterial.roundPoints&&(i.push("  vec2 cxy = 2.0 * gl_PointCoord - 1.0;"),i.push("  float r = dot(cxy, cxy);"),i.push("  if (r > 1.0) {"),i.push("       discard;"),i.push("  }")),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("  float dist = 0.0;");for(let e=0;e<t.sectionPlanes.length;e++)i.push("if (sectionPlaneActive"+e+") {"),i.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("}");i.push("if (dist > 0.0) { discard; }"),i.push("}")}return e.logarithmicDepthBufferEnabled&&i.push("gl_FragDepth = log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("outColor = vPickColor; "),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Eh=p.vec3();class vh{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()+this._scene.pointsMaterial.hash}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.canvas.gl,n=t._state,a=t._state.origin,l=r.pointsMaterial._state,h=t.geometry;if(!this._program&&(this._allocate(t),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram());const c=r.camera;o.uniform1i(this._uRenderPass,s),o.uniform1i(this._uPickInvisible,e.pickInvisible);const u=e.pickViewMatrix||c.viewMatrix,A=a?j(u,a):u;if(o.uniformMatrix4fv(this._uViewMatrix,!1,A),o.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix),o.uniformMatrix4fv(this._uProjMatrix,!1,e.pickProjMatrix),o.uniform1f(this._uPickZNear,e.pickZNear),o.uniform1f(this._uPickZFar,e.pickZFar),r.logarithmicDepthBufferEnabled){const t=2/(Math.log(e.pickZFar+1)/Math.LN2);o.uniform1f(this._uLogDepthBufFC,t)}const p=r._sectionPlanesState.sectionPlanes.length;if(p>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*p,n=i.renderFlags;for(let t=0;t<p;t++){const i=this._uSectionPlanes[t];if(i){const r=n.sectionPlanesActivePerLayer[s+t];if(o.uniform1i(i.active,r?1:0),r){const s=e[t];if(a){const e=W(s.dist,s.dir,a,Eh);o.uniform3fv(i.pos,e)}else o.uniform3fv(i.pos,s.pos);o.uniform3fv(i.dir,s.dir)}}}}o.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,h.positionsDecodeMatrix),this._aModelMatrixCol0.bindArrayBuffer(n.modelMatrixCol0Buf),this._aModelMatrixCol1.bindArrayBuffer(n.modelMatrixCol1Buf),this._aModelMatrixCol2.bindArrayBuffer(n.modelMatrixCol2Buf),o.vertexAttribDivisor(this._aModelMatrixCol0.location,1),o.vertexAttribDivisor(this._aModelMatrixCol1.location,1),o.vertexAttribDivisor(this._aModelMatrixCol2.location,1),this._aPosition.bindArrayBuffer(h.positionsBuf),this._aFlags.bindArrayBuffer(n.flagsBuf),o.vertexAttribDivisor(this._aFlags.location,1),this._aOffset&&(this._aOffset.bindArrayBuffer(n.offsetsBuf),o.vertexAttribDivisor(this._aOffset.location,1)),o.uniform1f(this._uPointSize,l.pointSize);const d="ortho"===r.camera.projection?1:o.drawingBufferHeight/(2*Math.tan(.5*r.camera.perspective.fov*Math.PI/180));o.uniform1f(this._uNearPlaneHeight,d),o.drawArraysInstanced(o.POINTS,0,h.positionsBuf.numItems,n.numInstances),o.vertexAttribDivisor(this._aModelMatrixCol0.location,0),o.vertexAttribDivisor(this._aModelMatrixCol1.location,0),o.vertexAttribDivisor(this._aModelMatrixCol2.location,0),o.vertexAttribDivisor(this._aFlags.location,0),this._aOffset&&o.vertexAttribDivisor(this._aOffset.location,0)}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uPickInvisible=s.getLocation("pickInvisible"),this._uPositionsDecodeMatrix=s.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=s.getLocation("worldMatrix"),this._uViewMatrix=s.getLocation("viewMatrix"),this._uProjMatrix=s.getLocation("projMatrix"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});this._aPosition=s.getAttribute("position"),this._aOffset=s.getAttribute("offset"),this._aFlags=s.getAttribute("flags"),this._aModelMatrixCol0=s.getAttribute("modelMatrixCol0"),this._aModelMatrixCol1=s.getAttribute("modelMatrixCol1"),this._aModelMatrixCol2=s.getAttribute("modelMatrixCol2"),this._uPickZNear=s.getLocation("pickZNear"),this._uPickZFar=s.getLocation("pickZFar"),this._uPointSize=s.getLocation("pointSize"),this._uNearPlaneHeight=s.getLocation("nearPlaneHeight"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC"))}_bindProgram(){this._program.bind()}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=e.pointsMaterial._state,i=[];return i.push("#version 300 es"),i.push("// Points instancing pick depth vertex shader"),i.push("uniform int renderPass;"),i.push("in vec3 position;"),e.entityOffsetsEnabled&&i.push("in vec3 offset;"),i.push("in float flags;"),i.push("in vec4 modelMatrixCol0;"),i.push("in vec4 modelMatrixCol1;"),i.push("in vec4 modelMatrixCol2;"),i.push("uniform bool pickInvisible;"),i.push("uniform mat4 worldMatrix;"),i.push("uniform mat4 viewMatrix;"),i.push("uniform mat4 projMatrix;"),i.push("uniform mat4 positionsDecodeMatrix;"),i.push("uniform float pointSize;"),s.perspectivePoints&&i.push("uniform float nearPlaneHeight;"),e.logarithmicDepthBufferEnabled&&(i.push("uniform float logDepthBufFC;"),i.push("out float vFragDepth;")),t&&(i.push("out vec4 vWorldPosition;"),i.push("out float vFlags;")),i.push("out vec4 vViewPosition;"),i.push("void main(void) {"),i.push("int pickFlag = int(flags) >> 12 & 0xF;"),i.push("if (pickFlag != renderPass) {"),i.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),i.push("} else {"),i.push("  vec4 worldPosition = positionsDecodeMatrix * vec4(position, 1.0); "),i.push("  worldPosition = worldMatrix * vec4(dot(worldPosition, modelMatrixCol0), dot(worldPosition, modelMatrixCol1), dot(worldPosition, modelMatrixCol2), 1.0);"),e.entityOffsetsEnabled&&i.push("      worldPosition.xyz = worldPosition.xyz + offset;"),i.push("  vec4 viewPosition  = viewMatrix * worldPosition; "),t&&(i.push("  vWorldPosition = worldPosition;"),i.push("  vFlags = flags;")),i.push("  vViewPosition = viewPosition;"),i.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&i.push("vFragDepth = 1.0 + clipPos.w;"),i.push("gl_Position = clipPos;"),s.perspectivePoints?(i.push("gl_PointSize = (nearPlaneHeight * pointSize) / clipPos.w;"),i.push("gl_PointSize = max(gl_PointSize, "+Math.floor(s.minPerspectivePointSize)+".0);"),i.push("gl_PointSize = min(gl_PointSize, "+Math.floor(s.maxPerspectivePointSize)+".0);")):i.push("gl_PointSize = pointSize;"),i.push("}"),i.push("}"),i}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Points instancing pick depth fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),i.push("uniform float pickZNear;"),i.push("uniform float pickZFar;"),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(let e=0;e<t.sectionPlanes.length;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("in vec4 vViewPosition;"),i.push("vec4 packDepth(const in float depth) {"),i.push("  const vec4 bitShift = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);"),i.push("  const vec4 bitMask  = vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);"),i.push("  vec4 res = fract(depth * bitShift);"),i.push("  res -= res.xxyz * bitMask;"),i.push("  return res;"),i.push("}"),i.push("out vec4 outColor;"),i.push("void main(void) {"),e.pointsMaterial.roundPoints&&(i.push("  vec2 cxy = 2.0 * gl_PointCoord - 1.0;"),i.push("  float r = dot(cxy, cxy);"),i.push("  if (r > 1.0) {"),i.push("       discard;"),i.push("  }")),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("  float dist = 0.0;");for(let e=0;e<t.sectionPlanes.length;e++)i.push("if (sectionPlaneActive"+e+") {"),i.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("}");i.push("if (dist > 0.0) { discard; }"),i.push("}")}return e.logarithmicDepthBufferEnabled&&i.push("gl_FragDepth = log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("    float zNormalizedDepth = abs((pickZNear + vViewPosition.z) / (pickZFar - pickZNear));"),i.push("    outColor = packDepth(zNormalizedDepth); "),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const _h=p.vec3();class Ih{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()+this._scene.pointsMaterial.hash}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=t._state.origin,h=r.pointsMaterial._state,c=t.geometry;if(!this._program&&(this._allocate(),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),n.uniform1i(this._uRenderPass,s),n.uniformMatrix4fv(this._uViewMatrix,!1,l?j(o.viewMatrix,l):o.viewMatrix),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix);const u=r._sectionPlanesState.sectionPlanes.length;if(u>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*u,o=i.renderFlags;for(let t=0;t<u;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(l){const e=W(s.dist,s.dir,l,_h);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,c.positionsDecodeMatrix),this._aModelMatrixCol0.bindArrayBuffer(a.modelMatrixCol0Buf),this._aModelMatrixCol1.bindArrayBuffer(a.modelMatrixCol1Buf),this._aModelMatrixCol2.bindArrayBuffer(a.modelMatrixCol2Buf),n.vertexAttribDivisor(this._aModelMatrixCol0.location,1),n.vertexAttribDivisor(this._aModelMatrixCol1.location,1),n.vertexAttribDivisor(this._aModelMatrixCol2.location,1),this._aColor&&(this._aColor.bindArrayBuffer(c.colorsBuf),n.vertexAttribDivisor(this._aColor.location,1)),this._aPosition.bindArrayBuffer(c.positionsBuf),this._aOffset&&(this._aOffset.bindArrayBuffer(a.offsetsBuf),n.vertexAttribDivisor(this._aOffset.location,1)),this._aFlags.bindArrayBuffer(a.flagsBuf),n.vertexAttribDivisor(this._aFlags.location,1),n.uniform1f(this._uPointSize,h.pointSize);const A="ortho"===r.camera.projection?1:n.drawingBufferHeight/(2*Math.tan(.5*r.camera.perspective.fov*Math.PI/180));n.uniform1f(this._uNearPlaneHeight,A),n.drawArraysInstanced(n.POINTS,0,c.positionsBuf.numItems,a.numInstances),n.vertexAttribDivisor(this._aModelMatrixCol0.location,0),n.vertexAttribDivisor(this._aModelMatrixCol1.location,0),n.vertexAttribDivisor(this._aModelMatrixCol2.location,0),this._aColor&&n.vertexAttribDivisor(this._aColor.location,0),n.vertexAttribDivisor(this._aFlags.location,0),this._aOffset&&n.vertexAttribDivisor(this._aOffset.location,0)}_allocate(){const e=this._scene,t=e.canvas.gl,s=e._sectionPlanesState;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uRenderPass=i.getLocation("renderPass"),this._uPositionsDecodeMatrix=i.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=i.getLocation("worldMatrix"),this._uViewMatrix=i.getLocation("viewMatrix"),this._uProjMatrix=i.getLocation("projMatrix"),this._uSectionPlanes=[];for(let e=0,t=s.sectionPlanes.length;e<t;e++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+e),pos:i.getLocation("sectionPlanePos"+e),dir:i.getLocation("sectionPlaneDir"+e)});this._aPosition=i.getAttribute("position"),this._aOffset=i.getAttribute("offset"),this._aColor=i.getAttribute("color"),this._aFlags=i.getAttribute("flags"),this._aModelMatrixCol0=i.getAttribute("modelMatrixCol0"),this._aModelMatrixCol1=i.getAttribute("modelMatrixCol1"),this._aModelMatrixCol2=i.getAttribute("modelMatrixCol2"),this._uPointSize=i.getLocation("pointSize"),this._uNearPlaneHeight=i.getLocation("nearPlaneHeight"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=i.getLocation("logDepthBufFC"))}_bindProgram(){const e=this._scene,t=e.canvas.gl,s=e.camera.project;if(this._program.bind(),t.uniformMatrix4fv(this._uProjMatrix,!1,s.matrix),e.logarithmicDepthBufferEnabled){const e=2/(Math.log(s.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=e.pointsMaterial._state,i=[];return i.push("#version 300 es"),i.push("// Points instancing occlusion vertex shader"),i.push("uniform int renderPass;"),i.push("in vec3 position;"),e.entityOffsetsEnabled&&i.push("in vec3 offset;"),i.push("in vec4 color;"),i.push("in float flags;"),i.push("in vec4 modelMatrixCol0;"),i.push("in vec4 modelMatrixCol1;"),i.push("in vec4 modelMatrixCol2;"),i.push("uniform mat4 worldMatrix;"),i.push("uniform mat4 viewMatrix;"),i.push("uniform mat4 projMatrix;"),i.push("uniform mat4 positionsDecodeMatrix;"),i.push("uniform float pointSize;"),s.perspectivePoints&&i.push("uniform float nearPlaneHeight;"),e.logarithmicDepthBufferEnabled&&(i.push("uniform float logDepthBufFC;"),i.push("out float vFragDepth;")),t&&(i.push("out vec4 vWorldPosition;"),i.push("out float vFlags;")),i.push("void main(void) {"),i.push("int colorFlag = int(flags) & 0xF;"),i.push("if (colorFlag != renderPass) {"),i.push("      gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),i.push("} else {"),i.push("  vec4 worldPosition = positionsDecodeMatrix * vec4(position, 1.0); "),i.push("  worldPosition = worldMatrix * vec4(dot(worldPosition, modelMatrixCol0), dot(worldPosition, modelMatrixCol1), dot(worldPosition, modelMatrixCol2), 1.0);"),e.entityOffsetsEnabled&&i.push("      worldPosition.xyz = worldPosition.xyz + offset;"),i.push("  vec4 viewPosition  = viewMatrix * worldPosition; "),t&&(i.push("  vWorldPosition = worldPosition;"),i.push("vFlags = flags;")),i.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&i.push("vFragDepth = 1.0 + clipPos.w;"),i.push("gl_Position = clipPos;"),s.perspectivePoints?(i.push("gl_PointSize = (nearPlaneHeight * pointSize) / clipPos.w;"),i.push("gl_PointSize = max(gl_PointSize, "+Math.floor(s.minPerspectivePointSize)+".0);"),i.push("gl_PointSize = min(gl_PointSize, "+Math.floor(s.maxPerspectivePointSize)+".0);")):i.push("gl_PointSize = pointSize;"),i.push("}"),i.push("}"),i}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Points instancing occlusion vertex shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(let e=0;e<t.sectionPlanes.length;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("out vec4 outColor;"),i.push("void main(void) {"),e.pointsMaterial.roundPoints&&(i.push("  vec2 cxy = 2.0 * gl_PointCoord - 1.0;"),i.push("  float r = dot(cxy, cxy);"),i.push("  if (r > 1.0) {"),i.push("       discard;"),i.push("  }")),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("  float dist = 0.0;");for(let e=0;e<t.sectionPlanes.length;e++)i.push("if (sectionPlaneActive"+e+") {"),i.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("}");i.push("if (dist > 0.0) { discard; }"),i.push("}")}return i.push("   outColor = vec4(0.0, 0.0, 1.0, 1.0); "),e.logarithmicDepthBufferEnabled&&i.push("gl_FragDepth = log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Th=p.vec3();class Ph{constructor(e){this._scene=e,this._hash=this._getHash(),this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()+this._scene.pointsMaterial.hash}drawLayer(e,t,s){const i=t.model,r=i.scene,o=r.camera,n=r.canvas.gl,a=t._state,l=t._state.origin,h=r.pointsMaterial._state,c=t.geometry;if(!this._program&&(this._allocate(),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram()),n.uniform1i(this._uRenderPass,s),n.uniformMatrix4fv(this._uWorldMatrix,!1,i.worldMatrix),n.uniformMatrix4fv(this._uViewMatrix,!1,l?j(o.viewMatrix,l):o.viewMatrix);const u=r._sectionPlanesState.sectionPlanes.length;if(u>0){const e=r._sectionPlanesState.sectionPlanes,s=t.layerIndex*u,o=i.renderFlags;for(let t=0;t<u;t++){const i=this._uSectionPlanes[t];if(i){const r=o.sectionPlanesActivePerLayer[s+t];if(n.uniform1i(i.active,r?1:0),r){const s=e[t];if(l){const e=W(s.dist,s.dir,l,Th);n.uniform3fv(i.pos,e)}else n.uniform3fv(i.pos,s.pos);n.uniform3fv(i.dir,s.dir)}}}}this._aModelMatrixCol0.bindArrayBuffer(a.modelMatrixCol0Buf),this._aModelMatrixCol1.bindArrayBuffer(a.modelMatrixCol1Buf),this._aModelMatrixCol2.bindArrayBuffer(a.modelMatrixCol2Buf),n.vertexAttribDivisor(this._aModelMatrixCol0.location,1),n.vertexAttribDivisor(this._aModelMatrixCol1.location,1),n.vertexAttribDivisor(this._aModelMatrixCol2.location,1),n.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,c.positionsDecodeMatrix),this._aPosition.bindArrayBuffer(c.positionsBuf),this._aOffset&&(this._aOffset.bindArrayBuffer(a.offsetsBuf),n.vertexAttribDivisor(this._aOffset.location,1)),this._aFlags.bindArrayBuffer(a.flagsBuf),n.vertexAttribDivisor(this._aFlags.location,1),n.uniform1f(this._uPointSize,h.pointSize);const A="ortho"===r.camera.projection?1:n.drawingBufferHeight/(2*Math.tan(.5*r.camera.perspective.fov*Math.PI/180));n.uniform1f(this._uNearPlaneHeight,A),n.drawArraysInstanced(n.POINTS,0,c.positionsBuf.numItems,a.numInstances),n.vertexAttribDivisor(this._aModelMatrixCol0.location,0),n.vertexAttribDivisor(this._aModelMatrixCol1.location,0),n.vertexAttribDivisor(this._aModelMatrixCol2.location,0),n.vertexAttribDivisor(this._aFlags.location,0),this._aOffset&&n.vertexAttribDivisor(this._aOffset.location,0)}_allocate(){const e=this._scene,t=e.canvas.gl;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const s=this._program;this._uRenderPass=s.getLocation("renderPass"),this._uPositionsDecodeMatrix=s.getLocation("positionsDecodeMatrix"),this._uWorldMatrix=s.getLocation("worldMatrix"),this._uViewMatrix=s.getLocation("viewMatrix"),this._uProjMatrix=s.getLocation("projMatrix"),this._uSectionPlanes=[];for(let t=0,i=e._sectionPlanesState.sectionPlanes.length;t<i;t++)this._uSectionPlanes.push({active:s.getLocation("sectionPlaneActive"+t),pos:s.getLocation("sectionPlanePos"+t),dir:s.getLocation("sectionPlaneDir"+t)});this._aPosition=s.getAttribute("position"),this._aOffset=s.getAttribute("offset"),this._aFlags=s.getAttribute("flags"),this._aModelMatrixCol0=s.getAttribute("modelMatrixCol0"),this._aModelMatrixCol1=s.getAttribute("modelMatrixCol1"),this._aModelMatrixCol2=s.getAttribute("modelMatrixCol2"),this._uPointSize=s.getLocation("pointSize"),this._uNearPlaneHeight=s.getLocation("nearPlaneHeight"),e.logarithmicDepthBufferEnabled&&(this._uLogDepthBufFC=s.getLocation("logDepthBufFC"))}_bindProgram(){const e=this._scene,t=e.canvas.gl,s=e.camera.project;if(this._program.bind(),t.uniformMatrix4fv(this._uProjMatrix,!1,s.matrix),e.logarithmicDepthBufferEnabled){const e=2/(Math.log(s.far+1)/Math.LN2);t.uniform1f(this._uLogDepthBufFC,e)}}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=e.pointsMaterial._state,i=[];return i.push("#version 300 es"),i.push("// Points instancing depth vertex shader"),i.push("uniform int renderPass;"),i.push("in vec3 position;"),e.entityOffsetsEnabled&&i.push("in vec3 offset;"),i.push("in float flags;"),i.push("in vec4 modelMatrixCol0;"),i.push("in vec4 modelMatrixCol1;"),i.push("in vec4 modelMatrixCol2;"),i.push("uniform mat4 worldMatrix;"),i.push("uniform mat4 viewMatrix;"),i.push("uniform mat4 projMatrix;"),i.push("uniform mat4 positionsDecodeMatrix;"),i.push("uniform float pointSize;"),s.perspectivePoints&&i.push("uniform float nearPlaneHeight;"),e.logarithmicDepthBufferEnabled&&(i.push("uniform float logDepthBufFC;"),i.push("out float vFragDepth;")),t&&(i.push("out vec4 vWorldPosition;"),i.push("out float vFlags;")),i.push("void main(void) {"),i.push("int colorFlag = int(flags) & 0xF;"),i.push("if (colorFlag != renderPass) {"),i.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),i.push("} else {"),i.push("  vec4 worldPosition = positionsDecodeMatrix * vec4(position, 1.0); "),i.push("  worldPosition = worldMatrix * vec4(dot(worldPosition, modelMatrixCol0), dot(worldPosition, modelMatrixCol1), dot(worldPosition, modelMatrixCol2), 1.0);"),e.entityOffsetsEnabled&&i.push("      worldPosition.xyz = worldPosition.xyz + offset;"),i.push("  vec4 viewPosition  = viewMatrix * worldPosition; "),t&&(i.push("vWorldPosition = worldPosition;"),i.push("vFlags = flags;")),i.push("vec4 clipPos = projMatrix * viewPosition;"),e.logarithmicDepthBufferEnabled&&i.push("vFragDepth = 1.0 + clipPos.w;"),i.push("gl_Position = clipPos;"),s.perspectivePoints?(i.push("gl_PointSize = (nearPlaneHeight * pointSize) / clipPos.w;"),i.push("gl_PointSize = max(gl_PointSize, "+Math.floor(s.minPerspectivePointSize)+".0);"),i.push("gl_PointSize = min(gl_PointSize, "+Math.floor(s.maxPerspectivePointSize)+".0);")):i.push("gl_PointSize = pointSize;"),i.push("}"),i.push("}"),i}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState;let s,i;const r=t.sectionPlanes.length>0,o=[];if(o.push("#version 300 es"),o.push("// Points instancing depth vertex shader"),o.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),o.push("precision highp float;"),o.push("precision highp int;"),o.push("#else"),o.push("precision mediump float;"),o.push("precision mediump int;"),o.push("#endif"),e.logarithmicDepthBufferEnabled&&(o.push("uniform float logDepthBufFC;"),o.push("in float vFragDepth;")),r)for(o.push("in vec4 vWorldPosition;"),o.push("in float vFlags;"),s=0,i=t.sectionPlanes.length;s<i;s++)o.push("uniform bool sectionPlaneActive"+s+";"),o.push("uniform vec3 sectionPlanePos"+s+";"),o.push("uniform vec3 sectionPlaneDir"+s+";");if(o.push("const float   packUpScale = 256. / 255.;"),o.push("const float   unpackDownscale = 255. / 256.;"),o.push("const vec3    packFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );"),o.push("const vec4    unpackFactors = unpackDownscale / vec4( packFactors, 1. );"),o.push("const float   shiftRight8 = 1.0 / 256.;"),o.push("vec4 packDepthToRGBA( const in float v ) {"),o.push("    vec4 r = vec4( fract( v * packFactors ), v );"),o.push("    r.yzw -= r.xyz * shiftRight8;"),o.push("    return r * packUpScale;"),o.push("}"),o.push("out vec4 outColor;"),o.push("void main(void) {"),e.pointsMaterial.roundPoints&&(o.push("  vec2 cxy = 2.0 * gl_PointCoord - 1.0;"),o.push("  float r = dot(cxy, cxy);"),o.push("  if (r > 1.0) {"),o.push("       discard;"),o.push("  }")),r){for(o.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),o.push("  if (clippable) {"),o.push("  float dist = 0.0;"),s=0,i=t.sectionPlanes.length;s<i;s++)o.push("if (sectionPlaneActive"+s+") {"),o.push("   dist += clamp(dot(-sectionPlaneDir"+s+".xyz, vWorldPosition.xyz - sectionPlanePos"+s+".xyz), 0.0, 1000.0);"),o.push("}");o.push("if (dist > 0.0) { discard; }"),o.push("}")}return o.push("    outColor = packDepthToRGBA( gl_FragCoord.z); "),e.logarithmicDepthBufferEnabled&&o.push("gl_FragDepth = log2( vFragDepth ) * logDepthBufFC * 0.5;"),o.push("}"),o}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}const Dh=p.vec3();class bh{constructor(e){this._scene=e,this._hash=this._getHash(),this._lastLightId=null,this._allocate()}getValid(){return this._hash===this._getHash()}_getHash(){return this._scene._sectionPlanesState.getHash()}drawLayer(e,t){const s=t.model,i=s.scene,r=i.canvas.gl,o=t._state;if(!this._program&&(this._allocate(),this.errors))return;e.lastProgramId!==this._program.id&&(e.lastProgramId=this._program.id,this._bindProgram(e,t)),r.uniformMatrix4fv(this._uPositionsDecodeMatrix,!1,o.geometry.positionsDecodeMatrix),this._aModelMatrixCol0.bindArrayBuffer(o.modelMatrixCol0Buf),this._aModelMatrixCol1.bindArrayBuffer(o.modelMatrixCol1Buf),this._aModelMatrixCol2.bindArrayBuffer(o.modelMatrixCol2Buf),r.vertexAttribDivisor(this._aModelMatrixCol0.location,1),r.vertexAttribDivisor(this._aModelMatrixCol1.location,1),r.vertexAttribDivisor(this._aModelMatrixCol2.location,1),this._aPosition.bindArrayBuffer(o.positionsBuf),this._aOffset&&(this._aOffset.bindArrayBuffer(o.offsetsBuf),r.vertexAttribDivisor(this._aOffset.location,1)),this._aColor.bindArrayBuffer(o.colorsBuf),r.vertexAttribDivisor(this._aColor.location,1),this._aFlags.bindArrayBuffer(o.flagsBuf),r.vertexAttribDivisor(this._aFlags.location,1);const n=i._sectionPlanesState.sectionPlanes.length;if(n>0){const e=i._sectionPlanesState.sectionPlanes,o=t.layerIndex*n,a=s.renderFlags,l=t._state.origin;for(let t=0;t<n;t++){const s=this._uSectionPlanes[t];if(s){const i=a.sectionPlanesActivePerLayer[o+t];if(r.uniform1i(s.active,i?1:0),i){const i=e[t];if(l){const e=W(i.dist,i.dir,l,Dh);r.uniform3fv(s.pos,e)}else r.uniform3fv(s.pos,i.pos);r.uniform3fv(s.dir,i.dir)}}}}r.uniform1f(this._uPointSize,10),r.drawArraysInstanced(r.POINTS,0,o.positionsBuf.numItems,o.numInstances),r.vertexAttribDivisor(this._aModelMatrixCol0.location,0),r.vertexAttribDivisor(this._aModelMatrixCol1.location,0),r.vertexAttribDivisor(this._aModelMatrixCol2.location,0),r.vertexAttribDivisor(this._aColor.location,0),r.vertexAttribDivisor(this._aFlags.location,0),this._aOffset&&r.vertexAttribDivisor(this._aOffset.location,0)}_allocate(){const e=this._scene,t=e.canvas.gl,s=e._sectionPlanesState;if(this._program=new ge(t,this._buildShader()),this._program.errors)return void(this.errors=this._program.errors);const i=this._program;this._uPositionsDecodeMatrix=i.getLocation("positionsDecodeMatrix"),this._uShadowViewMatrix=i.getLocation("shadowViewMatrix"),this._uShadowProjMatrix=i.getLocation("shadowProjMatrix"),this._uSectionPlanes=[];for(let e=0,t=s.sectionPlanes.length;e<t;e++)this._uSectionPlanes.push({active:i.getLocation("sectionPlaneActive"+e),pos:i.getLocation("sectionPlanePos"+e),dir:i.getLocation("sectionPlaneDir"+e)});this._aPosition=i.getAttribute("position"),this._aOffset=i.getAttribute("offset"),this._aColor=i.getAttribute("color"),this._aFlags=i.getAttribute("flags"),this._aModelMatrixCol0=i.getAttribute("modelMatrixCol0"),this._aModelMatrixCol1=i.getAttribute("modelMatrixCol1"),this._aModelMatrixCol2=i.getAttribute("modelMatrixCol2"),this._uPointSize=i.getLocation("pointSize")}_bindProgram(e){const t=this._scene.canvas.gl;this._program.bind(),t.uniformMatrix4fv(this._uShadowViewMatrix,!1,e.shadowViewMatrix),t.uniformMatrix4fv(this._uShadowProjMatrix,!1,e.shadowProjMatrix),this._lastLightId=null}_buildShader(){return{vertex:this._buildVertexShader(),fragment:this._buildFragmentShader()}}_buildVertexShader(){const e=this._scene,t=e._sectionPlanesState.sectionPlanes.length>0,s=[];return s.push("#version 300 es"),s.push("// Instancing geometry shadow drawing vertex shader"),s.push("in vec3 position;"),e.entityOffsetsEnabled&&s.push("in vec3 offset;"),s.push("in vec4 color;"),s.push("in float flags;"),s.push("in vec4 modelMatrixCol0;"),s.push("in vec4 modelMatrixCol1;"),s.push("in vec4 modelMatrixCol2;"),s.push("uniform mat4 shadowViewMatrix;"),s.push("uniform mat4 shadowProjMatrix;"),s.push("uniform mat4 positionsDecodeMatrix;"),s.push("uniform float pointSize;"),t&&(s.push("out vec4 vWorldPosition;"),s.push("out float vFlags;")),s.push("void main(void) {"),s.push("int colorFlag     = int(flags) & 0xF;"),s.push("bool visible      = (colorFlag > 0);"),s.push("bool transparent  = ((float(color.a) / 255.0) < 1.0);"),s.push("if (!visible || transparent) {"),s.push("   gl_Position = vec4(0.0, 0.0, 0.0, 0.0);"),s.push("} else {"),s.push("  vec4 worldPosition = positionsDecodeMatrix * vec4(position, 1.0); "),s.push("  worldPosition = vec4(dot(worldPosition, modelMatrixCol0), dot(worldPosition, modelMatrixCol1), dot(worldPosition, modelMatrixCol2), 1.0);"),e.entityOffsetsEnabled&&s.push("      worldPosition.xyz = worldPosition.xyz + offset;"),s.push("  vec4 viewPosition  = shadowViewMatrix * worldPosition; "),t&&(s.push("vWorldPosition = worldPosition;"),s.push("vFlags = flags;")),s.push("  gl_Position = shadowProjMatrix * viewPosition;"),s.push("}"),s.push("gl_PointSize = pointSize;"),s.push("}"),s}_buildFragmentShader(){const e=this._scene,t=e._sectionPlanesState,s=t.sectionPlanes.length>0,i=[];if(i.push("#version 300 es"),i.push("// Instancing geometry depth drawing fragment shader"),i.push("#ifdef GL_FRAGMENT_PRECISION_HIGH"),i.push("precision highp float;"),i.push("precision highp int;"),i.push("#else"),i.push("precision mediump float;"),i.push("precision mediump int;"),i.push("#endif"),e.logarithmicDepthBufferEnabled&&(i.push("uniform float logDepthBufFC;"),i.push("in float vFragDepth;")),s){i.push("in vec4 vWorldPosition;"),i.push("in float vFlags;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("uniform bool sectionPlaneActive"+e+";"),i.push("uniform vec3 sectionPlanePos"+e+";"),i.push("uniform vec3 sectionPlaneDir"+e+";")}if(i.push("in vec3 vViewNormal;"),i.push("vec3 packNormalToRGB( const in vec3 normal ) {"),i.push("    return normalize( normal ) * 0.5 + 0.5;"),i.push("}"),i.push("out vec4 outColor;"),i.push("void main(void) {"),i.push("  vec2 cxy = 2.0 * gl_PointCoord - 1.0;"),i.push("  float r = dot(cxy, cxy);"),i.push("  if (r > 1.0) {"),i.push("       discard;"),i.push("  }"),s){i.push("  bool clippable = (int(vFlags) >> 16 & 0xF) == 1;"),i.push("  if (clippable) {"),i.push("  float dist = 0.0;");for(let e=0,s=t.sectionPlanes.length;e<s;e++)i.push("if (sectionPlaneActive"+e+") {"),i.push("   dist += clamp(dot(-sectionPlaneDir"+e+".xyz, vWorldPosition.xyz - sectionPlanePos"+e+".xyz), 0.0, 1000.0);"),i.push("}");i.push("if (dist > 0.0) { discard; }"),i.push("}")}return e.logarithmicDepthBufferEnabled&&i.push("gl_FragDepth = log2( vFragDepth ) * logDepthBufFC * 0.5;"),i.push("    outColor = vec4(packNormalToRGB(vViewNormal), 1.0); "),i.push("}"),i}webglContextRestored(){this._program=null}destroy(){this._program&&this._program.destroy(),this._program=null}}class Rh{constructor(e){this._scene=e}_compile(){this._colorRenderer&&!this._colorRenderer.getValid()&&(this._colorRenderer.destroy(),this._colorRenderer=null),this._depthRenderer&&!this._depthRenderer.getValid()&&(this._depthRenderer.destroy(),this._depthRenderer=null),this._silhouetteRenderer&&!this._silhouetteRenderer.getValid()&&(this._silhouetteRenderer.destroy(),this._silhouetteRenderer=null),this._pickMeshRenderer&&!this._pickMeshRenderer.getValid()&&(this._pickMeshRenderer.destroy(),this._pickMeshRenderer=null),this._pickDepthRenderer&&!this._pickDepthRenderer.getValid()&&(this._pickDepthRenderer.destroy(),this._pickDepthRenderer=null),this._occlusionRenderer&&!1===this._occlusionRenderer.getValid()&&(this._occlusionRenderer.destroy(),this._occlusionRenderer=null),this._shadowRenderer&&!this._shadowRenderer.getValid()&&(this._shadowRenderer.destroy(),this._shadowRenderer=null)}get colorRenderer(){return this._colorRenderer||(this._colorRenderer=new dh(this._scene,!1)),this._colorRenderer}get silhouetteRenderer(){return this._silhouetteRenderer||(this._silhouetteRenderer=new mh(this._scene)),this._silhouetteRenderer}get depthRenderer(){return this._depthRenderer||(this._depthRenderer=new Ph(this._scene)),this._depthRenderer}get pickMeshRenderer(){return this._pickMeshRenderer||(this._pickMeshRenderer=new yh(this._scene)),this._pickMeshRenderer}get pickDepthRenderer(){return this._pickDepthRenderer||(this._pickDepthRenderer=new vh(this._scene)),this._pickDepthRenderer}get occlusionRenderer(){return this._occlusionRenderer||(this._occlusionRenderer=new Ih(this._scene)),this._occlusionRenderer}get shadowRenderer(){return this._shadowRenderer||(this._shadowRenderer=new bh(this._scene)),this._shadowRenderer}_destroy(){this._colorRenderer&&this._colorRenderer.destroy(),this._depthRenderer&&this._depthRenderer.destroy(),this._silhouetteRenderer&&this._silhouetteRenderer.destroy(),this._pickMeshRenderer&&this._pickMeshRenderer.destroy(),this._pickDepthRenderer&&this._pickDepthRenderer.destroy(),this._occlusionRenderer&&this._occlusionRenderer.destroy(),this._shadowRenderer&&this._shadowRenderer.destroy()}}const Ch={};const xh=new Uint8Array(4),Nh=new Float32Array(1),Oh=p.vec4([0,0,0,1]),Sh=p.vec4([0,0,0,1]),wh=p.vec4([0,0,0,1]),Mh=new Float32Array(3);class Bh{constructor(e){this.model=e.model,this.geometry=e.geometry,this.material=e.material,this.sortId="PointsInstancingLayer",this.layerIndex=e.layerIndex,this._pointsInstancingRenderers=function(e){const t=e.id;let s=Ch[t];return s||(s=new Rh(e),Ch[t]=s,s._compile(),e.on("compile",(()=>{s._compile()})),e.on("destroyed",(()=>{delete Ch[t],s._destroy()}))),s}(e.model.scene),this._aabb=p.collapseAABB3(),this._state=new Ze({obb:p.OBB3(),numInstances:0,origin:e.origin?p.vec3(e.origin):null}),this._numPortions=0,this._numVisibleLayerPortions=0,this._numTransparentLayerPortions=0,this._numXRayedLayerPortions=0,this._numHighlightedLayerPortions=0,this._numSelectedLayerPortions=0,this._numClippableLayerPortions=0,this._numEdgesLayerPortions=0,this._numPickableLayerPortions=0,this._numCulledLayerPortions=0,this.numIndices=e.geometry.numIndices,this._pickColors=[],this._offsets=[],this._modelMatrixCol0=[],this._modelMatrixCol1=[],this._modelMatrixCol2=[],this._portions=[],this._finalized=!1,this.aabb=p.collapseAABB3()}createPortion(e){const t=e.meshMatrix,s=e.worldMatrix,i=e.aabb,r=e.pickColor;if(this._finalized)throw"Already finalized";this.model.scene.entityOffsetsEnabled&&(this._offsets.push(0),this._offsets.push(0),this._offsets.push(0)),this._modelMatrixCol0.push(t[0]),this._modelMatrixCol0.push(t[4]),this._modelMatrixCol0.push(t[8]),this._modelMatrixCol0.push(t[12]),this._modelMatrixCol1.push(t[1]),this._modelMatrixCol1.push(t[5]),this._modelMatrixCol1.push(t[9]),this._modelMatrixCol1.push(t[13]),this._modelMatrixCol2.push(t[2]),this._modelMatrixCol2.push(t[6]),this._modelMatrixCol2.push(t[10]),this._modelMatrixCol2.push(t[14]),this._pickColors.push(r[0]),this._pickColors.push(r[1]),this._pickColors.push(r[2]),this._pickColors.push(r[3]),p.collapseAABB3(i);const o=this._state.obb,n=o.length;for(let e=0;e<n;e+=4)Oh[0]=o[e+0],Oh[1]=o[e+1],Oh[2]=o[e+2],p.transformPoint4(t,Oh,Sh),s?(p.transformPoint4(s,Sh,wh),p.expandAABB3Point3(i,wh)):p.expandAABB3Point3(i,Sh);if(this._state.origin){const e=this._state.origin;i[0]+=e[0],i[1]+=e[1],i[2]+=e[2],i[3]+=e[0],i[4]+=e[1],i[5]+=e[2]}p.expandAABB3(this.aabb,i),this._state.numInstances++;const a=this._portions.length;return this._portions.push({}),this._numPortions++,this.model.numPortions++,a}finalize(){if(this._finalized)throw"Already finalized";const e=this.model.scene.canvas.gl,t=this._pickColors.length/4;if(t>0){let s=!1;this._state.flagsBuf=new ye(e,e.ARRAY_BUFFER,new Float32Array(t),t,1,e.DYNAMIC_DRAW,s)}if(this.model.scene.entityOffsetsEnabled&&this._offsets.length>0){const t=!1;this._state.offsetsBuf=new ye(e,e.ARRAY_BUFFER,new Float32Array(this._offsets),this._offsets.length,3,e.DYNAMIC_DRAW,t),this._offsets=[]}if(this._modelMatrixCol0.length>0){const t=!1;this._state.modelMatrixCol0Buf=new ye(e,e.ARRAY_BUFFER,new Float32Array(this._modelMatrixCol0),this._modelMatrixCol0.length,4,e.STATIC_DRAW,t),this._state.modelMatrixCol1Buf=new ye(e,e.ARRAY_BUFFER,new Float32Array(this._modelMatrixCol1),this._modelMatrixCol1.length,4,e.STATIC_DRAW,t),this._state.modelMatrixCol2Buf=new ye(e,e.ARRAY_BUFFER,new Float32Array(this._modelMatrixCol2),this._modelMatrixCol2.length,4,e.STATIC_DRAW,t),this._modelMatrixCol0=[],this._modelMatrixCol1=[],this._modelMatrixCol2=[]}if(this._pickColors.length>0){const t=!1;this._state.pickColorsBuf=new ye(e,e.ARRAY_BUFFER,new Uint8Array(this._pickColors),this._pickColors.length,4,e.STATIC_DRAW,t),this._pickColors=[]}this._finalized=!0}initFlags(e,t,s){t&N&&(this._numVisibleLayerPortions++,this.model.numVisibleLayerPortions++),t&F&&(this._numHighlightedLayerPortions++,this.model.numHighlightedLayerPortions++),t&B&&(this._numXRayedLayerPortions++,this.model.numXRayedLayerPortions++),t&L&&(this._numSelectedLayerPortions++,this.model.numSelectedLayerPortions++),t&w&&(this._numClippableLayerPortions++,this.model.numClippableLayerPortions++),t&U&&(this._numEdgesLayerPortions++,this.model.numEdgesLayerPortions++),t&S&&(this._numPickableLayerPortions++,this.model.numPickableLayerPortions++),t&O&&(this._numCulledLayerPortions++,this.model.numCulledLayerPortions++),s&&(this._numTransparentLayerPortions++,this.model.numTransparentLayerPortions++),this._setFlags(e,t,s)}setVisible(e,t,s){if(!this._finalized)throw"Not finalized";t&N?(this._numVisibleLayerPortions++,this.model.numVisibleLayerPortions++):(this._numVisibleLayerPortions--,this.model.numVisibleLayerPortions--),this._setFlags(e,t,s)}setHighlighted(e,t,s){if(!this._finalized)throw"Not finalized";t&F?(this._numHighlightedLayerPortions++,this.model.numHighlightedLayerPortions++):(this._numHighlightedLayerPortions--,this.model.numHighlightedLayerPortions--),this._setFlags(e,t,s)}setXRayed(e,t,s){if(!this._finalized)throw"Not finalized";t&B?(this._numXRayedLayerPortions++,this.model.numXRayedLayerPortions++):(this._numXRayedLayerPortions--,this.model.numXRayedLayerPortions--),this._setFlags(e,t,s)}setSelected(e,t,s){if(!this._finalized)throw"Not finalized";t&L?(this._numSelectedLayerPortions++,this.model.numSelectedLayerPortions++):(this._numSelectedLayerPortions--,this.model.numSelectedLayerPortions--),this._setFlags(e,t,s)}setEdges(e,t,s){if(!this._finalized)throw"Not finalized";t&U?(this._numEdgesLayerPortions++,this.model.numEdgesLayerPortions++):(this._numEdgesLayerPortions--,this.model.numEdgesLayerPortions--),this._setFlags(e,t,s)}setClippable(e,t){if(!this._finalized)throw"Not finalized";t&w?(this._numClippableLayerPortions++,this.model.numClippableLayerPortions++):(this._numClippableLayerPortions--,this.model.numClippableLayerPortions--),this._setFlags(e,t)}setCollidable(e,t){if(!this._finalized)throw"Not finalized"}setPickable(e,t,s){if(!this._finalized)throw"Not finalized";t&S?(this._numPickableLayerPortions++,this.model.numPickableLayerPortions++):(this._numPickableLayerPortions--,this.model.numPickableLayerPortions--),this._setFlags(e,t,s)}setCulled(e,t,s){if(!this._finalized)throw"Not finalized";t&O?(this._numCulledLayerPortions++,this.model.numCulledLayerPortions++):(this._numCulledLayerPortions--,this.model.numCulledLayerPortions--),this._setFlags(e,t,s)}setColor(e,t){if(!this._finalized)throw"Not finalized";xh[0]=t[0],xh[1]=t[1],xh[2]=t[2],this._state.colorsBuf.setData(xh,3*e)}setTransparent(e,t,s){s?(this._numTransparentLayerPortions++,this.model.numTransparentLayerPortions++):(this._numTransparentLayerPortions--,this.model.numTransparentLayerPortions--),this._setFlags(e,t,s)}_setFlags(e,t,s){if(!this._finalized)throw"Not finalized";const i=!!(t&N),r=!!(t&B),o=!!(t&F),n=!!(t&L),a=!!(t&U),l=!!(t&S),h=!!(t&O);let c,u;c=!i||h||r||o&&!this.model.scene.highlightMaterial.glowThrough||n&&!this.model.scene.selectedMaterial.glowThrough?rn:s?nn:on,u=!i||h?rn:n?ln:o?an:r?hn:rn;let A=0;A=!i||h?rn:n?pn:o?An:r?dn:a?s?un:cn:rn;let p=0;p|=c,p|=u<<4,p|=A<<8,p|=(i&&!h&&l?fn:rn)<<12,p|=(t&w?255:0)<<16,Nh[0]=p,this._state.flagsBuf.setData(Nh,e)}setOffset(e,t){if(!this._finalized)throw"Not finalized";this.model.scene.entityOffsetsEnabled?(Mh[0]=t[0],Mh[1]=t[1],Mh[2]=t[2],this._state.offsetsBuf.setData(Mh,3*e)):this.model.error("Entity#offset not enabled for this Viewer")}drawColorOpaque(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&this._numTransparentLayerPortions!==this._numPortions&&this._numXRayedLayerPortions!==this._numPortions&&this._pointsInstancingRenderers.colorRenderer&&this._pointsInstancingRenderers.colorRenderer.drawLayer(t,this,on)}drawColorTransparent(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numTransparentLayerPortions&&this._numXRayedLayerPortions!==this._numPortions&&this._pointsInstancingRenderers.colorRenderer&&this._pointsInstancingRenderers.colorRenderer.drawLayer(t,this,nn)}drawDepth(e,t){}drawNormals(e,t){}drawSilhouetteXRayed(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numXRayedLayerPortions&&this._pointsInstancingRenderers.silhouetteRenderer&&this._pointsInstancingRenderers.silhouetteRenderer.drawLayer(t,this,hn)}drawSilhouetteHighlighted(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numHighlightedLayerPortions&&this._pointsInstancingRenderers.silhouetteRenderer&&this._pointsInstancingRenderers.silhouetteRenderer.drawLayer(t,this,an)}drawSilhouetteSelected(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&0!==this._numSelectedLayerPortions&&this._pointsInstancingRenderers.silhouetteRenderer&&this._pointsInstancingRenderers.silhouetteRenderer.drawLayer(t,this,ln)}drawEdgesColorOpaque(e,t){}drawEdgesColorTransparent(e,t){}drawEdgesHighlighted(e,t){}drawEdgesSelected(e,t){}drawEdgesXRayed(e,t){}drawOcclusion(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&this._pointsInstancingRenderers.occlusionRenderer&&this._pointsInstancingRenderers.occlusionRenderer.drawLayer(t,this,on)}drawShadow(e,t){}drawPickMesh(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&this._pointsInstancingRenderers.pickMeshRenderer&&this._pointsInstancingRenderers.pickMeshRenderer.drawLayer(t,this,fn)}drawPickDepths(e,t){this._numCulledLayerPortions!==this._numPortions&&0!==this._numVisibleLayerPortions&&this._pointsInstancingRenderers.pickDepthRenderer&&this._pointsInstancingRenderers.pickDepthRenderer.drawLayer(t,this,fn)}drawPickNormals(e,t){}destroy(){const e=this._state;e.colorsBuf&&(e.colorsBuf.destroy(),e.colorsBuf=null),e.flagsBuf&&(e.flagsBuf.destroy(),e.flagsBuf=null),e.offsetsBuf&&(e.offsetsBuf.destroy(),e.offsetsBuf=null),e.modelMatrixCol0Buf&&(e.modelMatrixCol0Buf.destroy(),e.modelMatrixCol0Buf=null),e.modelMatrixCol1Buf&&(e.modelMatrixCol1Buf.destroy(),e.modelMatrixCol1Buf=null),e.modelMatrixCol2Buf&&(e.modelMatrixCol2Buf.destroy(),e.modelMatrixCol2Buf=null),e.pickColorsBuf&&(e.pickColorsBuf.destroy(),e.pickColorsBuf=null),e.destroy()}}class Fh{constructor(e){this.id=e.id,this.colorTexture=e.colorTexture,this.metallicRoughnessTexture=e.metallicRoughnessTexture,this.normalsTexture=e.normalsTexture,this.emissiveTexture=e.emissiveTexture,this.occlusionTexture=e.occlusionTexture}destroy(){}}class Lh{constructor(e,t,s){this.id=s.id,this.model=s.model,this.primitive=s.primitive,this.positions=null,this.positionsCompressed=null,this.quantizedPositions=null,this.positionsDecodeMatrix=p.mat4(),this.normals=null,this.normalsCompressed=null,this.colors=null,this.colorsCompressed=null,this.uv=null,this.uvCompressed=null,this.uvDecodeMatrix=null,this.indices=null,this.numIndices=0,this.obb=p.OBB3(),this.positionsBuf=null,this.normalsBuf=null,this.edgeIndicesBuf=null,this.uvBuf=null,this.colorsBuf=null;const i=t.scene.pickSurfacePrecisionEnabled,r=t.scene.canvas.gl;if(s.positionsCompressed&&s.positionsCompressed.length>0){const e=!1;this.positionsBuf=new ye(r,r.ARRAY_BUFFER,s.positionsCompressed,s.positionsCompressed.length,3,r.STATIC_DRAW,e),this.positionsDecodeMatrix.set(s.positionsDecodeMatrix);const t=p.collapseAABB3();p.expandAABB3Points3(t,s.positionsCompressed),it.decompressAABB(t,this.positionsDecodeMatrix),p.AABB3ToOBB3(t,this.obb),i&&(this.quantizedPositions=s.positionsCompressed)}else if(s.positions&&s.positions.length>0){const e=s.positions.length,t=p.collapseAABB3();p.expandAABB3Points3(t,s.positions),p.AABB3ToOBB3(t,this.obb);const o=ia(s.positions,t,this.positionsDecodeMatrix);let n=!1;this.positionsBuf=new ye(r,r.ARRAY_BUFFER,o,e,3,r.STATIC_DRAW,n),i&&(this.quantizedPositions=o)}if(s.normalsCompressed&&s.normalsCompressed.length>0){const e=!0;this.normalsBuf=new ye(r,r.ARRAY_BUFFER,s.normalsCompressed,s.normalsCompressed.length,3,r.STATIC_DRAW,e)}else if(s.normals&&s.normals.length>0){const e=function(e){const t=e.length,s=new Int8Array(t);let i,r,o,n,a;for(let l=0;l<t;l+=3)o=i=oa(e,l,"floor","floor"),r=na(i),n=a=aa(e,l,r),i=oa(e,l,"ceil","floor"),r=na(i),n=aa(e,l,r),n>a&&(o=i,a=n),i=oa(e,l,"floor","ceil"),r=na(i),n=aa(e,l,r),n>a&&(o=i,a=n),i=oa(e,l,"ceil","ceil"),r=na(i),n=aa(e,l,r),n>a&&(o=i,a=n),s[l+0]=o[0],s[l+1]=o[1],s[l+2]=0;return s}(s.normals),t=!0;this.normalsBuf=new ye(r,r.ARRAY_BUFFER,e,e.length,3,r.STATIC_DRAW,t)}if(s.colorsCompressed&&s.colorsCompressed.length>0){const e=new Uint8Array(s.colorsCompressed),t=!1;this.colorsBuf=new ye(r,r.ARRAY_BUFFER,e,e.length,4,r.STATIC_DRAW,t)}else if(s.colors&&s.colors.length>0){const e=s.colors,t=new Uint8Array(e.length);for(let s=0,i=e.length;s<i;s++)t[s]=255*e[s];const i=!1;this.colorsBuf=new ye(r,r.ARRAY_BUFFER,t,t.length,4,r.STATIC_DRAW,i)}if(s.uvCompressed&&s.uvCompressed.length>0){const e=new Uint16Array(s.uvCompressed);this.uvDecodeMatrix=p.mat4(s.uvDecodeMatrix),this.uvBuf=new ye(r,r.ARRAY_BUFFER,s.uvCompressed,e.length,2,r.STATIC_DRAW,!1)}else if(s.uv&&s.uv.length>0){const e=it.getUVBounds(s.uv),t=it.compressUVs(s.uv,e.min,e.max),i=t.quantized;this.uvDecodeMatrix=t.decodeMatrix,this.uvBuf=new ye(r,r.ARRAY_BUFFER,i,i.length,2,r.STATIC_DRAW,!1)}if(s.indices&&s.indices.length>0&&(this.indicesBuf=new ye(r,r.ELEMENT_ARRAY_BUFFER,new Uint32Array(s.indices),s.indices.length,1,r.STATIC_DRAW),i&&(this.indices=s.indices),this.numIndices=s.indices.length),"triangles"===s.primitive||"solid"===s.primitive||"surface"===s.primitive){let e=s.edgeIndices;e||(e=Be(s.positions,s.indices,null,s.edgeThreshold||10)),this.edgeIndicesBuf=new ye(r,r.ELEMENT_ARRAY_BUFFER,new Uint32Array(e),e.length,1,r.STATIC_DRAW)}}destroy(){}}class Uh{constructor(e){this.id=e.id,this.texture=e.texture}destroy(){this.texture&&(this.texture.destroy(),this.texture=null)}}const Hh={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};const Gh=new class{constructor(e,t,s){this.isLoading=!1,this.itemsLoaded=0,this.itemsTotal=0,this.urlModifier=void 0,this.handlers=[],this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=s}itemStart(e){this.itemsTotal++,!1===this.isLoading&&void 0!==this.onStart&&this.onStart(e,this.itemsLoaded,this.itemsTotal),this.isLoading=!0}itemEnd(e){this.itemsLoaded++,void 0!==this.onProgress&&this.onProgress(e,this.itemsLoaded,this.itemsTotal),this.itemsLoaded===this.itemsTotal&&(this.isLoading=!1,void 0!==this.onLoad&&this.onLoad())}itemError(e){void 0!==this.onError&&this.onError(e)}resolveURL(e){return this.urlModifier?this.urlModifier(e):e}setURLModifier(e){return this.urlModifier=e,this}addHandler(e,t){return this.handlers.push(e,t),this}removeHandler(e){const t=this.handlers.indexOf(e);return-1!==t&&this.handlers.splice(t,2),this}getHandler(e){for(let t=0,s=this.handlers.length;t<s;t+=2){const s=this.handlers[t],i=this.handlers[t+1];if(s.global&&(s.lastIndex=0),s.test(e))return i}return null}};const Vh={};class kh extends class{constructor(e){this.manager=void 0!==e?e:Gh,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const s=this;return new Promise((function(i,r){s.load(e,i,t,r)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}{constructor(e){super(e)}load(e,t,s,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=Hh.get(e);if(void 0!==r)return this.manager.itemStart(e),setTimeout((()=>{t&&t(r),this.manager.itemEnd(e)}),0),r;if(void 0!==Vh[e])return void Vh[e].push({onLoad:t,onProgress:s,onError:i});Vh[e]=[],Vh[e].push({onLoad:t,onProgress:s,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),n=this.mimeType,a=this.responseType;fetch(o).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===t.body.getReader)return t;const s=Vh[e],i=t.body.getReader(),r=t.headers.get("Content-Length"),o=r?parseInt(r):0,n=0!==o;let a=0;const l=new ReadableStream({start(e){!function t(){i.read().then((({done:i,value:r})=>{if(i)e.close();else{a+=r.byteLength;const i=new ProgressEvent("progress",{lengthComputable:n,loaded:a,total:o});for(let e=0,t=s.length;e<t;e++){const t=s[e];t.onProgress&&t.onProgress(i)}e.enqueue(r),t()}}))}()}});return new Response(l)}throw Error(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`)})).then((e=>{switch(a){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,n)));case"json":return e.json();default:if(void 0===n)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(n),s=t&&t[1]?t[1].toLowerCase():void 0,i=new TextDecoder(s);return e.arrayBuffer().then((e=>i.decode(e)))}}})).then((t=>{Hh.add(e,t);const s=Vh[e];delete Vh[e];for(let e=0,i=s.length;e<i;e++){const i=s[e];i.onLoad&&i.onLoad(t)}})).catch((t=>{const s=Vh[e];if(void 0===s)throw this.manager.itemError(e),t;delete Vh[e];for(let e=0,i=s.length;e<i;e++){const i=s[e];i.onError&&i.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class jh{constructor(e=4){this.pool=e,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(e){if(!this.workers[e]){const t=this.workerCreator();t.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=t}}_getIdleWorker(){for(let e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}_onMessage(e,t){const s=this.workersResolve[e];if(s&&s(t),this.queue.length){const{resolve:t,msg:s,transfer:i}=this.queue.shift();this.workersResolve[e]=t,this.workers[e].postMessage(s,i)}else this.workerStatus^=1<<e}setWorkerCreator(e){this.workerCreator=e}setWorkerLimit(e){this.pool=e}postMessage(e,t){return new Promise((s=>{const i=this._getIdleWorker();-1!==i?(this._initWorker(i),this.workerStatus|=1<<i,this.workersResolve[i]=s,this.workers[i].postMessage(e,t)):this.queue.push({resolve:s,msg:e,transfer:t})}))}destroy(){this.workers.forEach((e=>e.terminate())),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}let Qh=0;class Wh{constructor({viewer:e,transcoderPath:t,workerLimit:s}){this._transcoderPath=t||"https://cdn.jsdelivr.net/npm/@xeokit/xeokit-sdk/dist/basis/",this._transcoderBinary=null,this._transcoderPending=null,this._workerPool=new jh,this._workerSourceURL="",s&&this._workerPool.setWorkerLimit(s);const i=e.capabilities;this._workerConfig={astcSupported:i.astcSupported,etc1Supported:i.etc1Supported,etc2Supported:i.etc2Supported,dxtSupported:i.dxtSupported,bptcSupported:i.bptcSupported,pvrtcSupported:i.pvrtcSupported},this._supportedFileTypes=["xkt2"]}_init(){if(!this._transcoderPending){const e=new kh;e.setPath(this._transcoderPath),e.setWithCredentials(this.withCredentials);const t=e.loadAsync("basis_transcoder.js"),s=new kh;s.setPath(this._transcoderPath),s.setResponseType("arraybuffer"),s.setWithCredentials(this.withCredentials);const i=s.loadAsync("basis_transcoder.wasm");this._transcoderPending=Promise.all([t,i]).then((([e,t])=>{const s=Wh.BasisWorker.toString(),i=["/* constants */","let _EngineFormat = "+JSON.stringify(Wh.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(Wh.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(Wh.BasisFormat),"/* basis_transcoder.js */",e,"/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join("\n");this._workerSourceURL=URL.createObjectURL(new Blob([i])),this._transcoderBinary=t,this._workerPool.setWorkerCreator((()=>{const e=new Worker(this._workerSourceURL),t=this._transcoderBinary.slice(0);return e.postMessage({type:"init",config:this._workerConfig,transcoderBinary:t},[t]),e}))})),Qh>0&&console.warn("KTX2TextureTranscoder: Multiple active KTX2TextureTranscoder may cause performance issues. Use a single KTX2TextureTranscoder instance, or call .dispose() on old instances."),Qh++}return this._transcoderPending}transcode(e,t,s={}){return new Promise(((i,r)=>{const o=s;this._init().then((()=>this._workerPool.postMessage({type:"transcode",buffers:e,taskConfig:o},e))).then((e=>{const s=e.data,{mipmaps:o,width:n,height:a,format:l,type:h,error:c,dfdTransferFn:u,dfdFlags:A}=s;if("error"===h)return r(c);t.setCompressedData({mipmaps:o,props:{format:l,minFilter:1===o.length?ki:Qi,magFilter:1===o.length?ki:Qi,encoding:2===u?rr:ir,premultiplyAlpha:!!(1&A)}}),i()}))}))}destroy(){URL.revokeObjectURL(this._workerSourceURL),this._workerPool.destroy(),Qh--}}Wh.BasisFormat={ETC1S:0,UASTC_4x4:1},Wh.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},Wh.EngineFormat={RGBAFormat:zi,RGBA_ASTC_4x4_Format:tr,RGBA_BPTC_Format:sr,RGBA_ETC2_EAC_Format:er,RGBA_PVRTC_4BPPV1_Format:Ji,RGBA_S3TC_DXT5_Format:Zi,RGB_ETC1_Format:36196,RGB_ETC2_Format:$i,RGB_PVRTC_4BPPV1_Format:qi,RGB_S3TC_DXT1_Format:Ki},Wh.BasisWorker=function(){let e,t,s;const i=_EngineFormat,r=_TranscoderFormat,o=_BasisFormat;self.addEventListener("message",(function(n){const c=n.data;switch(c.type){case"init":e=c.config,u=c.transcoderBinary,t=new Promise((e=>{s={wasmBinary:u,onRuntimeInitialized:e},BASIS(s)})).then((()=>{s.initializeBasis(),void 0===s.KTX2File&&console.warn("KTX2TextureTranscoder: Please update Basis Universal transcoder.")}));break;case"transcode":t.then((()=>{try{const{width:t,height:n,hasAlpha:u,mipmaps:A,format:p,dfdTransferFn:d,dfdFlags:f}=function(t){const n=new s.KTX2File(new Uint8Array(t));function c(){n.close(),n.delete()}if(!n.isValid())throw c(),new Error("KTX2TextureTranscoder: Invalid or unsupported .ktx2 file");const u=n.isUASTC()?o.UASTC_4x4:o.ETC1S,A=n.getWidth(),p=n.getHeight(),d=n.getLevels(),f=n.getHasAlpha(),m=n.getDFDTransferFunc(),g=n.getDFDFlags(),{transcoderFormat:y,engineFormat:E}=function(t,s,n,c){let u,A;const p=t===o.ETC1S?a:l;for(let i=0;i<p.length;i++){const r=p[i];if(e[r.if]&&(r.basisFormat.includes(t)&&!(c&&r.transcoderFormat.length<2)&&(!r.needsPowerOfTwo||h(s)&&h(n))))return u=r.transcoderFormat[c?1:0],A=r.engineFormat[c?1:0],{transcoderFormat:u,engineFormat:A}}return console.warn("KTX2TextureTranscoder: No suitable compressed texture format found. Decoding to RGBA32."),u=r.RGBA32,A=i.RGBAFormat,{transcoderFormat:u,engineFormat:A}}(u,A,p,f);if(!A||!p||!d)throw c(),new Error("KTX2TextureTranscoder: Invalid texture");if(!n.startTranscoding())throw c(),new Error("KTX2TextureTranscoder: .startTranscoding failed");const v=[];for(let e=0;e<d;e++){const t=n.getImageLevelInfo(e,0,0),s=t.origWidth,i=t.origHeight,r=new Uint8Array(n.getImageTranscodedSizeInBytes(e,0,0,y));if(!n.transcodeImage(r,e,0,0,y,0,-1,-1))throw c(),new Error("KTX2TextureTranscoder: .transcodeImage failed.");v.push({data:r,width:s,height:i})}return c(),{width:A,height:p,hasAlpha:f,mipmaps:v,format:E,dfdTransferFn:m,dfdFlags:g}}(c.buffers[0]),m=[];for(let e=0;e<A.length;++e)m.push(A[e].data.buffer);self.postMessage({type:"transcode",id:c.id,width:t,height:n,hasAlpha:u,mipmaps:A,format:p,dfdTransferFn:d,dfdFlags:f},m)}catch(e){console.error(`[KTX2TextureTranscoder.BasisWorker]: ${e}`),self.postMessage({type:"error",id:c.id,error:e.message})}}))}var u}));const n=[{if:"astcSupported",basisFormat:[o.UASTC_4x4],transcoderFormat:[r.ASTC_4x4,r.ASTC_4x4],engineFormat:[i.RGBA_ASTC_4x4_Format,i.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[r.BC7_M5,r.BC7_M5],engineFormat:[i.RGBA_BPTC_Format,i.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[r.BC1,r.BC3],engineFormat:[i.RGB_S3TC_DXT1_Format,i.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[r.ETC1,r.ETC2],engineFormat:[i.RGB_ETC2_Format,i.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[r.ETC1],engineFormat:[i.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[r.PVRTC1_4_RGB,r.PVRTC1_4_RGBA],engineFormat:[i.RGB_PVRTC_4BPPV1_Format,i.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],a=n.sort((function(e,t){return e.priorityETC1S-t.priorityETC1S})),l=n.sort((function(e,t){return e.priorityUASTC-t.priorityUASTC}));function h(e){return e<=2||0==(e&e-1)&&0!==e}};const zh={};const Kh=p.vec3(),Yh=p.mat4(),Xh=p.vec3([1,1,1]),Zh=p.vec3([0,0,0]),qh=p.vec3([0,0,0]),Jh=p.identityQuaternion(),$h="defaultColorTexture",ec="defaultMetalRoughTexture",tc="defaultNormalsTexture",sc="defaultEmissiveTexture",ic="defaultOcclusionTexture",rc="defaultTextureSet";class oc extends x{constructor(e,t={}){super(e,t),this._textureTranscoder=t.textureTranscoder||function(e){const t=e.scene.id;let s=zh[t];return s||(s=new Wh({viewer:e}),zh[t]=s,e.scene.on("destroyed",(()=>{delete zh[t],s.destroy()}))),s}(this.scene.viewer),this._maxGeometryBatchSize=t.maxGeometryBatchSize,this._aabb=p.collapseAABB3(),this._aabbDirty=!1,this._layerList=[],this._nodeList=[],this._lastOrigin=null,this._lastPositionsDecodeMatrix=null,this._lastNormals=null,this._instancingLayers={},this._currentBatchingLayers={},this._scratchMemory=(sn++,tn),this._geometries={},this._textures={},this._textureSets={},this._meshes={},this._nodes={},this.renderFlags=new Ls,this.finalized=!1,this.numGeometries=0,this.numPortions=0,this.numVisibleLayerPortions=0,this.numTransparentLayerPortions=0,this.numXRayedLayerPortions=0,this.numHighlightedLayerPortions=0,this.numSelectedLayerPortions=0,this.numEdgesLayerPortions=0,this.numPickableLayerPortions=0,this.numClippableLayerPortions=0,this.numCulledLayerPortions=0,this.numEntities=0,this._numTriangles=0,this._numLines=0,this._numPoints=0,this._edgeThreshold=t.edgeThreshold||10,this._origin=p.vec3(t.origin||[0,0,0]),this._position=p.vec3(t.position||[0,0,0]),this._rotation=p.vec3(t.rotation||[0,0,0]),this._quaternion=p.vec4(t.quaternion||[0,0,0,1]),t.rotation&&p.eulerToQuaternion(this._rotation,"XYZ",this._quaternion),this._scale=p.vec3(t.scale||[1,1,1]),this._worldMatrix=p.mat4(),p.composeMat4(this._position,this._quaternion,this._scale,this._worldMatrix),this._worldNormalMatrix=p.mat4(),p.inverseMat4(this._worldMatrix,this._worldNormalMatrix),p.transposeMat4(this._worldNormalMatrix),(t.matrix||t.position||t.rotation||t.scale||t.quaternion)&&(this._viewMatrix=p.mat4(),this._viewNormalMatrix=p.mat4(),this._viewMatrixDirty=!0,this._worldMatrixNonIdentity=!0),this._opacity=1,this._colorize=[1,1,1],this._saoEnabled=!1!==t.saoEnabled,this._pbrEnabled=!1!==t.pbrEnabled,this._colorTextureEnabled=!1!==t.colorTextureEnabled,this._isModel=t.isModel,this._isModel&&this.scene._registerModel(this),this._onCameraViewMatrix=this.scene.camera.on("matrix",(()=>{this._viewMatrixDirty=!0})),this._createDefaultTextureSet(),this.visible=t.visible,this.culled=t.culled,this.pickable=t.pickable,this.clippable=t.clippable,this.collidable=t.collidable,this.castsShadow=t.castsShadow,this.receivesShadow=t.receivesShadow,this.xrayed=t.xrayed,this.highlighted=t.highlighted,this.selected=t.selected,this.edges=t.edges,this.colorize=t.colorize,this.opacity=t.opacity,this.backfaces=t.backfaces}_createDefaultTextureSet(){const e=new Uh({id:$h,texture:new uo({gl:this.scene.canvas.gl,preloadColor:[1,1,1,1]})}),t=new Uh({id:ec,texture:new uo({gl:this.scene.canvas.gl,preloadColor:[0,1,1,1]})}),s=new Uh({id:tc,texture:new uo({gl:this.scene.canvas.gl,preloadColor:[0,0,0,0]})}),i=new Uh({id:sc,texture:new uo({gl:this.scene.canvas.gl,preloadColor:[0,0,0,1]})}),r=new Uh({id:ic,texture:new uo({gl:this.scene.canvas.gl,preloadColor:[1,1,1,1]})});this._textures.defaultColorTexture=e,this._textures.defaultMetalRoughTexture=t,this._textures.defaultNormalsTexture=s,this._textures.defaultEmissiveTexture=i,this._textures.defaultOcclusionTexture=r,this._textureSets.defaultTextureSet=new Fh({id:rc,model:this,colorTexture:e,metallicRoughnessTexture:t,normalsTexture:s,emissiveTexture:i,occlusionTexture:r})}get isPerformanceModel(){return!0}get objects(){return this._nodes}get origin(){return this._origin}get position(){return this._position}get rotation(){return this._rotation}get quaternion(){return this._quaternion}get scale(){return this._scale}get matrix(){return this._worldMatrix}get worldMatrix(){return this._worldMatrix}get worldNormalMatrix(){return this._worldNormalMatrix}get viewMatrix(){return this._viewMatrix?(this._viewMatrixDirty&&(p.mulMat4(this.scene.camera.viewMatrix,this._worldMatrix,this._viewMatrix),p.inverseMat4(this._viewMatrix,this._viewNormalMatrix),p.transposeMat4(this._viewNormalMatrix),this._viewMatrixDirty=!1),this._viewMatrix):this.scene.camera.viewMatrix}get viewNormalMatrix(){return this._viewNormalMatrix?(this._viewMatrixDirty&&(p.mulMat4(this.scene.camera.viewMatrix,this._worldMatrix,this._viewMatrix),p.inverseMat4(this._viewMatrix,this._viewNormalMatrix),p.transposeMat4(this._viewNormalMatrix),this._viewMatrixDirty=!1),this._viewNormalMatrix):this.scene.camera.viewNormalMatrix}get backfaces(){return this._backfaces}set backfaces(e){e=!!e,this._backfaces=e,this.glRedraw()}get entityList(){return this._nodeList}get isEntity(){return!0}get isModel(){return this._isModel}get isObject(){return!1}get aabb(){return this._aabbDirty&&this._rebuildAABB(),this._aabb}get numTriangles(){return this._numTriangles}get numLines(){return this._numLines}get numPoints(){return this._numPoints}get visible(){return this.numVisibleLayerPortions>0}set visible(e){e=!1!==e,this._visible=e;for(let t=0,s=this._nodeList.length;t<s;t++)this._nodeList[t].visible=e;this.glRedraw()}get xrayed(){return this.numXRayedLayerPortions>0}set xrayed(e){e=!!e,this._xrayed=e;for(let t=0,s=this._nodeList.length;t<s;t++)this._nodeList[t].xrayed=e;this.glRedraw()}get highlighted(){return this.numHighlightedLayerPortions>0}set highlighted(e){e=!!e,this._highlighted=e;for(let t=0,s=this._nodeList.length;t<s;t++)this._nodeList[t].highlighted=e;this.glRedraw()}get selected(){return this.numSelectedLayerPortions>0}set selected(e){e=!!e,this._selected=e;for(let t=0,s=this._nodeList.length;t<s;t++)this._nodeList[t].selected=e;this.glRedraw()}get edges(){return this.numEdgesLayerPortions>0}set edges(e){e=!!e,this._edges=e;for(let t=0,s=this._nodeList.length;t<s;t++)this._nodeList[t].edges=e;this.glRedraw()}get culled(){return this._culled}set culled(e){e=!!e,this._culled=e;for(let t=0,s=this._nodeList.length;t<s;t++)this._nodeList[t].culled=e;this.glRedraw()}get clippable(){return this._clippable}set clippable(e){e=!1!==e,this._clippable=e;for(let t=0,s=this._nodeList.length;t<s;t++)this._nodeList[t].clippable=e;this.glRedraw()}get collidable(){return this._collidable}set collidable(e){e=!1!==e,this._collidable=e;for(let t=0,s=this._nodeList.length;t<s;t++)this._nodeList[t].collidable=e}get pickable(){return this.numPickableLayerPortions>0}set pickable(e){e=!1!==e,this._pickable=e;for(let t=0,s=this._nodeList.length;t<s;t++)this._nodeList[t].pickable=e}get colorize(){return this._colorize}set colorize(e){this._colorize=e;for(let t=0,s=this._nodeList.length;t<s;t++)this._nodeList[t].colorize=e}get opacity(){return this._opacity}set opacity(e){this._opacity=e;for(let t=0,s=this._nodeList.length;t<s;t++)this._nodeList[t].opacity=e}get castsShadow(){return this._castsShadow}set castsShadow(e){(e=!1!==e)!==this._castsShadow&&(this._castsShadow=e,this.glRedraw())}get receivesShadow(){return this._receivesShadow}set receivesShadow(e){(e=!1!==e)!==this._receivesShadow&&(this._receivesShadow=e,this.glRedraw())}get saoEnabled(){return this._saoEnabled}get pbrEnabled(){return this._pbrEnabled}get colorTextureEnabled(){return this._colorTextureEnabled}get isDrawable(){return!0}get isStateSortable(){return!1}get xrayMaterial(){return this.scene.xrayMaterial}get highlightMaterial(){return this.scene.highlightMaterial}get selectedMaterial(){return this.scene.selectedMaterial}get edgeMaterial(){return this.scene.edgeMaterial}getPickViewMatrix(e){return this._viewMatrix?this._viewMatrix:e}createGeometry(e){const t=e.id;if(null==t)return void this.error("Config missing: id");if(this._geometries[t])return void this.error("Geometry already created: "+t);const s=e.primitive;if(null==s)return void this.error("Param expected: primitive");if("points"!==s&&"lines"!==s&&"triangles"!==s&&"solid"!==s&&"surface"!==s)return void this.error(`Unsupported value for 'primitive': '${s}' - supported values are 'points', 'lines', 'triangles', 'solid' and 'surface'. Defaulting to 'triangles'.`);if(!e.positions&&!e.positionsCompressed)return this.error("Param expected: `positions` or `positionsCompressed'"),null;if(e.positionsCompressed&&!e.positionsDecodeMatrix)return this.error("Param expected: `positionsDecodeMatrix` (required for `positionsCompressed')"),null;if(e.uvCompressed&&!e.uvDecodeMatrix)return this.error("Param expected: `uvDecodeMatrix` (required for `uvCompressed')"),null;if(!e.indices&&"points"!==s)return this.error(`Param expected: indices (required for '${s}' primitive type)`),null;const i=new Lh(t,this,e);this._geometries[t]=i,this._numTriangles+=e.indices?Math.round(e.indices.length/3):0,this.numGeometries++}createTexture(e){const t=e.id;if(null==t)return void this.error("Config missing: id");if(this._textures[t])return void this.error("Texture already created: "+t);if(!e.src&&!e.image&&!e.buffers)return this.error("Param expected: `src`, `image' or 'buffers'"),null;let s=e.minFilter||Qi;s!==ki&&s!==ji&&s!==Qi&&s!==Vi&&s!==Gi&&(this.error("[createTexture] Unsupported value for 'minFilter' - \n            supported values are LinearFilter, LinearMipMapNearestFilter, NearestMipMapNearestFilter, \n            NearestMipMapLinearFilter and LinearMipmapLinearFilter. Defaulting to LinearMipmapLinearFilter."),s=Qi);let i=e.magFilter||ki;i!==ki&&i!==Hi&&(this.error("[createTexture] Unsupported value for 'magFilter' - supported values are LinearFilter and NearestFilter. Defaulting to LinearFilter."),i=ki);let r=e.wrapS||Fi;r!==Li&&r!==Ui&&r!==Fi&&(this.error("[createTexture] Unsupported value for 'wrapS' - supported values are ClampToEdgeWrapping, MirroredRepeatWrapping and RepeatWrapping. Defaulting to RepeatWrapping."),r=Fi);let o=e.wrapT||Fi;o!==Li&&o!==Ui&&o!==Fi&&(this.error("[createTexture] Unsupported value for 'wrapT' - supported values are ClampToEdgeWrapping, MirroredRepeatWrapping and RepeatWrapping. Defaulting to RepeatWrapping."),o=Fi);let n=e.wrapR||Fi;n!==Li&&n!==Ui&&n!==Fi&&(this.error("[createTexture] Unsupported value for 'wrapR' - supported values are ClampToEdgeWrapping, MirroredRepeatWrapping and RepeatWrapping. Defaulting to RepeatWrapping."),n=Fi);let a=e.encoding||ir;a!==ir&&a!==rr&&(this.error("[createTexture] Unsupported value for 'encoding' - supported values are LinearEncoding and sRGBEncoding. Defaulting to LinearEncoding."),a=ir);const l=new uo({gl:this.scene.canvas.gl,minFilter:s,magFilter:i,wrapS:r,wrapT:o,wrapR:n,encoding:a});if(e.preloadColor&&l.setPreloadColor(e.preloadColor),e.image){const t=e.image;t.crossOrigin="Anonymous",l.setImage(t,{minFilter:s,magFilter:i,wrapS:r,wrapT:o,wrapR:n,flipY:e.flipY,encoding:a})}else if(e.src){const t=e.src.split(".").pop();switch(t){case"jpeg":case"jpg":case"png":case"gif":const h=new Image;h.onload=()=>{l.setImage(h,{minFilter:s,magFilter:i,wrapS:r,wrapT:o,wrapR:n,flipY:e.flipY,encoding:a}),this.glRedraw()},h.src=e.src;break;default:this._textureTranscoder?y.loadArraybuffer(e.src,(e=>{e.byteLength?this._textureTranscoder.transcode([e],l).then((()=>{this.glRedraw()})):this.error("Can't create texture from 'src': file data is zero length")}),(function(e){this.error(`Can't create texture from 'src': ${e}`)})):this.error(`Can't create texture from 'src' - VBOSceneModel needs to be configured with a TextureTranscoder for this file type ('${t}')`)}}else e.buffers&&(this._textureTranscoder?this._textureTranscoder.transcode(e.buffers,l).then((()=>{this.glRedraw()})):this.error("Can't create texture from 'buffers' - VBOSceneModel needs to be configured with a TextureTranscoder for this option"));this._textures[t]=new Uh({id:t,texture:l})}createTextureSet(e){const t=e.id;if(null==t)return void this.error("Config missing: id");if(this._textureSets[t])return void this.error(`Texture set already created: ${t}`);let s,i,r,o,n;if(void 0!==e.colorTextureId&&null!==e.colorTextureId){if(s=this._textures[e.colorTextureId],!s)return void this.error(`Texture not found: ${e.colorTextureId} - ensure that you create it first with createTexture()`)}else s=this._textures.defaultColorTexture;if(void 0!==e.metallicRoughnessTextureId&&null!==e.metallicRoughnessTextureId){if(i=this._textures[e.metallicRoughnessTextureId],!i)return void this.error(`Texture not found: ${e.metallicRoughnessTextureId} - ensure that you create it first with createTexture()`)}else i=this._textures.defaultMetalRoughTexture;if(void 0!==e.normalsTextureId&&null!==e.normalsTextureId){if(r=this._textures[e.normalsTextureId],!r)return void this.error(`Texture not found: ${e.normalsTextureId} - ensure that you create it first with createTexture()`)}else r=this._textures.defaultNormalsTexture;if(void 0!==e.emissiveTextureId&&null!==e.emissiveTextureId){if(o=this._textures[e.emissiveTextureId],!o)return void this.error(`Texture not found: ${e.emissiveTextureId} - ensure that you create it first with createTexture()`)}else o=this._textures.defaultEmissiveTexture;if(void 0!==e.occlusionTextureId&&null!==e.occlusionTextureId){if(n=this._textures[e.occlusionTextureId],!n)return void this.error(`Texture not found: ${e.occlusionTextureId} - ensure that you create it first with createTexture()`)}else n=this._textures.defaultOcclusionTexture;const a=new Fh({id:t,model:this,colorTexture:s,metallicRoughnessTexture:i,normalsTexture:r,emissiveTexture:o,occlusionTexture:n});this._textureSets[t]=a}createMesh(e){let t=e.id;if(null==t)return void this.error("Config missing: id");if(this._meshes[t])return void this.error(`VBOSceneModel already has a mesh with this ID: ${t}`);const s=e.geometryId,i=void 0!==e.geometryId;if(i&&!this._geometries[e.geometryId])return void this.error(`Geometry not found: ${e.geometryId} - ensure that you create it first with createGeometry()`);const r=e.textureSetId||rc;if(r&&!this._textureSets[r])return void this.error(`Texture set not found: ${r} - ensure that you create it first with createTextureSet()`);let o;const n=e.color?new Uint8Array([Math.floor(255*e.color[0]),Math.floor(255*e.color[1]),Math.floor(255*e.color[2])]):[255,255,255],a=void 0!==e.opacity&&null!==e.opacity?Math.floor(255*e.opacity):255,l=void 0!==e.metallic&&null!==e.metallic?Math.floor(255*e.metallic):0,h=void 0!==e.roughness&&null!==e.roughness?Math.floor(255*e.roughness):255,c=new en(this,t,n,a),u=c.pickId,A=new Uint8Array([255&u,u>>8&255,u>>16&255,u>>24&255]),d=p.collapseAABB3();let f;if(i){let t,i=this._worldMatrixNonIdentity?this._worldMatrix:null;if(e.matrix)t=e.matrix;else{const s=e.scale||Xh,i=e.position||Zh,r=e.rotation||qh;p.eulerToQuaternion(r,"XYZ",Jh),t=p.composeMat4(i,Jh,s,Yh)}const u=e.origin||e.rtcCenter,m=u?p.addVec3(this._origin,u,Kh):this._origin,g=this._getInstancingLayer(m,r,s);f=g,o=g.createPortion({color:n,metallic:l,roughness:h,opacity:a,meshMatrix:t,worldMatrix:i,aabb:d,pickColor:A}),p.expandAABB3(this._aabb,d);const y=Math.round(g.numIndices/3);this._numTriangles+=y,c.numTriangles=y,c.origin=m}else{let t=e.primitive;if(null==t&&(t="triangles"),"points"!==t&&"lines"!==t&&"triangles"!==t&&"solid"!==t&&"surface"!==t)return void this.error(`Unsupported value for 'primitive': '${t}'  ('geometryId' is absent) - supported values are 'points', 'lines', 'triangles', 'solid' and 'surface'.`);if(!e.positions&&!e.positionsCompressed)return this.error("Param expected: 'positions' or 'positionsCompressed'  ('geometryId' is absent)"),null;if(e.positions&&e.positionsCompressed)return this.error("Only one param expected, not both: 'positions' or 'positionsCompressed' ('geometryId' is absent)"),null;if(e.positionsCompressed&&!e.positionsDecodeMatrix)return this.error("Param expected: 'positionsDecodeMatrix' (required for 'positionsCompressed'; 'geometryId' is absent)"),null;if(e.uvCompressed&&!e.uvDecodeMatrix)return this.error("Param expected: `uvDecodeMatrix` (required for `uvCompressed'; 'geometryId' is absent)"),null;if(!e.indices&&"points"!==t)return this.error(`Param expected: indices (required for '${t}' primitive type)`),null;if(!e.indices&&"points"!==t)return this.error("Config expected: indices (no meshIds provided, so expecting geometry arrays instead)"),null;let s=e.indices,i=e.edgeIndices,u=e.origin||e.rtcCenter?p.addVec3(this._origin,e.origin||e.rtcCenter,Kh):this._origin,m=e.positions;if(m){const e=p.vec3(),t=[];Q(m,t,e)&&(m=t,u=p.addVec3(u,e,e))}let g=!1;if(this._lastOrigin?p.compareVec3(this._lastOrigin,u)||(g=!0,this._lastOrigin.set(u)):(g=!0,this._lastOrigin=p.vec3(u)),e.positionsDecodeMatrix&&(this._lastPositionsDecodeMatrix?p.compareMat4(this._lastPositionsDecodeMatrix,e.positionsDecodeMatrix)||(g=!0,this._lastPositionsDecodeMatrix.set(e.positionsDecodeMatrix)):(g=!0,this._lastPositionsDecodeMatrix=p.mat4(e.positionsDecodeMatrix))),e.uvDecodeMatrix&&(this._lastUVDecodeMatrix?p.compareMat4(this._lastUVDecodeMatrix,e.uvDecodeMatrix)||(g=!0,this._lastUVDecodeMatrix.set(e.uvDecodeMatrix)):(g=!0,this._lastUVDecodeMatrix=p.mat4(e.uvDecodeMatrix))),e.textureSetId&&this._lastTextureSetId!==e.textureSetId&&(g=!0,this._lastTextureSetId=e.textureSetId),g){for(let e in this._currentBatchingLayers)this._currentBatchingLayers.hasOwnProperty(e)&&this._currentBatchingLayers[e].finalize();this._currentBatchingLayers={}}const y=!!e.normals&&e.normals.length>0;if("triangles"===t||"solid"===t||"surface"===t){if(null!==this._lastNormals&&y!==this._lastNormals)for(let e in this._currentBatchingLayers)this._currentBatchingLayers[e]&&(this._currentBatchingLayers[e].finalize(),delete this._currentBatchingLayers[e]);this._lastNormals=y}const E=this._worldMatrixNonIdentity?this._worldMatrix:null;let v;if(!e.positionsDecodeMatrix)if(e.matrix)v=e.matrix;else{const t=e.scale||Xh,s=e.position||Zh,i=e.rotation||qh;p.eulerToQuaternion(i,"XYZ",Jh),v=p.composeMat4(s,Jh,t,Yh)}const _=r?this._textureSets[r]:null,I=`${t}-${e.normals&&e.normals.length>0?1:0}-${e.normalsCompressed&&e.normalsCompressed.length>0?1:0}-${e.colors&&e.colors.length>0?1:0}-${e.colorsCompressed&&e.colorsCompressed.length>0?1:0}-${e.uv&&e.uv.length>0?1:0}-${e.uvCompressed&&e.uvCompressed.length>0?1:0}`;f=this._currentBatchingLayers[I];const T=(m||e.positionsCompressed).length;switch(t){case"triangles":case"solid":case"surface":f&&(f.canCreatePortion(T,s.length)||(f.finalize(),delete this._currentBatchingLayers[I],f=null)),f||(f=new _a({model:this,textureSet:_,layerIndex:0,scratchMemory:this._scratchMemory,positionsDecodeMatrix:e.positionsDecodeMatrix,uvDecodeMatrix:e.uvDecodeMatrix,origin:u,maxGeometryBatchSize:this._maxGeometryBatchSize,solid:"solid"===t,autoNormals:!y}),this._layerList.push(f),this._currentBatchingLayers[I]=f),i||(i=Be(m||e.positionsCompressed,s,null,this._edgeThreshold)),o=f.createPortion({positions:m,positionsCompressed:e.positionsCompressed,normals:e.normals,normalsCompressed:e.normalsCompressed,colors:e.colors,colorsCompressed:e.colorsCompressed,uv:e.uv,uvCompressed:e.uvCompressed,indices:s,edgeIndices:i,color:n,opacity:a,metallic:l,roughness:h,meshMatrix:v,worldMatrix:E,worldAABB:d,pickColor:A});const r=Math.round(s.length/3);this._numTriangles+=r,c.numTriangles=r;break;case"lines":f&&(f.canCreatePortion(T,s.length)||(f.finalize(),delete this._currentBatchingLayers[I],f=null)),f||(f=new Sl({model:this,layerIndex:0,scratchMemory:this._scratchMemory,positionsDecodeMatrix:e.positionsDecodeMatrix,origin:u,maxGeometryBatchSize:this._maxGeometryBatchSize}),this._layerList.push(f),this._currentBatchingLayers[I]=f),o=f.createPortion({positions:m,positionsCompressed:e.positionsCompressed,indices:s,colors:e.colors,colorsCompressed:e.colorsCompressed,color:n,opacity:a,meshMatrix:v,worldMatrix:E,worldAABB:d,pickColor:A}),this._numLines+=Math.round(s.length/2);break;case"points":f&&(f.canCreatePortion(T)||(f.finalize(),delete this._currentBatchingLayers[I],f=null)),f||(f=new Ah({model:this,layerIndex:0,scratchMemory:this._scratchMemory,positionsDecodeMatrix:e.positionsDecodeMatrix,origin:u,maxGeometryBatchSize:this._maxGeometryBatchSize}),this._layerList.push(f),this._currentBatchingLayers[I]=f),o=f.createPortion({positions:m,positionsCompressed:e.positionsCompressed,colors:e.colors,colorsCompressed:e.colorsCompressed,color:n,opacity:a,meshMatrix:v,worldMatrix:E,worldAABB:d,pickColor:A}),this._numPoints+=Math.round(T/3)}p.expandAABB3(this._aabb,d),this.numGeometries++,c.origin=u}if(c.parent=null,c._layer=f,c._portionId=o,c.aabb=d,f.getElementsCountAndOffset){const{count:e,offset:t}=f.getElementsCountAndOffset(o);c.pickElementsCount=e,c.pickElementsOffset=t}this._meshes[t]=c}_getInstancingLayer(e,t,s){const i=`${e[0]}.${e[1]}.${e[2]}.${t}.${s}`;let r,o=this._instancingLayers[i];if(o)return o;if(void 0!==t&&(r=this._textureSets[t],!r))return void this.error(`TextureSet not found: ${t} - ensure that you create it first with createTextureSet()`);const n=this._geometries[s];if(this._geometries[s]){switch(n.primitive){case"triangles":case"surface":o=new El({model:this,textureSet:r,geometry:n,origin:e,layerIndex:0,solid:!1});break;case"solid":o=new El({model:this,textureSet:r,geometry:n,origin:e,layerIndex:0,solid:!0});break;case"lines":o=new Wl({model:this,textureSet:r,geometry:n,origin:e,layerIndex:0});break;case"points":o=new Bh({model:this,textureSet:r,geometry:n,origin:e,layerIndex:0})}return this._instancingLayers[i]=o,this._layerList.push(o),o}this.error(`Geometry not found: ${s} - ensure that you create it first with createGeometry()`)}createEntity(e){let t=e.id;void 0===t?t=p.createUUID():this.scene.components[t]&&(this.error("Scene already has a Component with this ID: "+t+" - will assign random ID"),t=p.createUUID());const s=e.meshIds;if(void 0===s)return void this.error("Config missing: meshIds");let i=[];for(let e=0,t=s.length;e<t;e++){const t=s[e],r=this._meshes[t];r?r.parent?this.error("Mesh with ID "+t+" already belongs to object with ID "+r.parent.id+" - ignoring this mesh"):i.push(r):this.error("Mesh with this ID not found: "+t+" - ignoring this mesh")}let r,o=0;if(this._visible&&!1!==e.visible&&(o|=N),this._pickable&&!1!==e.pickable&&(o|=S),this._culled&&!1!==e.culled&&(o|=O),this._clippable&&!1!==e.clippable&&(o|=w),this._collidable&&!1!==e.collidable&&(o|=M),this._edges&&!1!==e.edges&&(o|=U),this._xrayed&&!1!==e.xrayed&&(o|=B),this._highlighted&&!1!==e.highlighted&&(o|=F),this._selected&&!1!==e.selected&&(o|=L),1===i.length)r=i[0].aabb;else{r=p.collapseAABB3();for(let e=0,t=i.length;e<t;e++)p.expandAABB3(r,i[e].aabb)}const n=new V(this,e.isObject,t,i,o,r);return this._nodeList.push(n),this._nodes[t]=n,this.numEntities++,n}finalize(){if(!this.destroyed){for(const e in this._instancingLayers)this._instancingLayers.hasOwnProperty(e)&&this._instancingLayers[e].finalize();for(let e in this._currentBatchingLayers)this._currentBatchingLayers.hasOwnProperty(e)&&this._currentBatchingLayers[e].finalize();this._currentBatchingLayers={};for(let e=0,t=this._nodeList.length;e<t;e++){this._nodeList[e]._finalize()}for(let e=0,t=this._nodeList.length;e<t;e++){this._nodeList[e]._finalize2()}this._layerList.sort(((e,t)=>e.sortId<t.sortId?-1:e.sortId>t.sortId?1:0));for(let e=0,t=this._layerList.length;e<t;e++){this._layerList[e].layerIndex=e}this.glRedraw(),this.scene._aabbDirty=!0,this.finalized=!0}}_rebuildAABB(){p.collapseAABB3(this._aabb);for(let e=0,t=this._nodeList.length;e<t;e++){const t=this._nodeList[e];p.expandAABB3(this._aabb,t.aabb)}this._aabbDirty=!1}stateSortCompare(e,t){}rebuildRenderFlags(){this.renderFlags.reset(),this._updateRenderFlagsVisibleLayers(),this.renderFlags.numLayers>0&&0===this.renderFlags.numVisibleLayers?this.renderFlags.culled=!0:this._updateRenderFlags()}_updateRenderFlagsVisibleLayers(){const e=this.renderFlags;e.numLayers=this._layerList.length,e.numVisibleLayers=0;for(let t=0,s=this._layerList.length;t<s;t++){const s=this._layerList[t];this._getActiveSectionPlanesForLayer(s)&&(e.visibleLayers[e.numVisibleLayers++]=t)}}_getActiveSectionPlanesForLayer(e){const t=this.renderFlags,s=this.scene._sectionPlanesState.sectionPlanes,i=s.length,r=e.layerIndex*i;if(i>0)for(let e=0;e<i;e++){s[e].active?(t.sectionPlanesActivePerLayer[r+e]=!0,t.sectioned=!0):t.sectionPlanesActivePerLayer[r+e]=!1}return!0}_updateRenderFlags(){if(0===this.numVisibleLayerPortions)return;if(this.numCulledLayerPortions===this.numPortions)return;const e=this.renderFlags;if(e.colorOpaque=this.numTransparentLayerPortions<this.numPortions,this.numTransparentLayerPortions>0&&(e.colorTransparent=!0),this.numXRayedLayerPortions>0){const t=this.scene.xrayMaterial._state;t.fill&&(t.fillAlpha<1?e.xrayedSilhouetteTransparent=!0:e.xrayedSilhouetteOpaque=!0),t.edges&&(t.edgeAlpha<1?e.xrayedEdgesTransparent=!0:e.xrayedEdgesOpaque=!0)}if(this.numEdgesLayerPortions>0){this.scene.edgeMaterial._state.edges&&(e.edgesOpaque=this.numTransparentLayerPortions<this.numPortions,this.numTransparentLayerPortions>0&&(e.edgesTransparent=!0))}if(this.numSelectedLayerPortions>0){const t=this.scene.selectedMaterial._state;t.fill&&(t.fillAlpha<1?e.selectedSilhouetteTransparent=!0:e.selectedSilhouetteOpaque=!0),t.edges&&(t.edgeAlpha<1?e.selectedEdgesTransparent=!0:e.selectedEdgesOpaque=!0)}if(this.numHighlightedLayerPortions>0){const t=this.scene.highlightMaterial._state;t.fill&&(t.fillAlpha<1?e.highlightedSilhouetteTransparent=!0:e.highlightedSilhouetteOpaque=!0),t.edges&&(t.edgeAlpha<1?e.highlightedEdgesTransparent=!0:e.highlightedEdgesOpaque=!0)}}drawColorOpaque(e){const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawColorOpaque(t,e)}}drawColorTransparent(e){const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawColorTransparent(t,e)}}drawDepth(e){const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawDepth(t,e)}}drawNormals(e){const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawNormals(t,e)}}drawSilhouetteXRayed(e){const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawSilhouetteXRayed(t,e)}}drawSilhouetteHighlighted(e){const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawSilhouetteHighlighted(t,e)}}drawSilhouetteSelected(e){const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawSilhouetteSelected(t,e)}}drawEdgesColorOpaque(e){const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawEdgesColorOpaque(t,e)}}drawEdgesColorTransparent(e){const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawEdgesColorTransparent(t,e)}}drawEdgesXRayed(e){const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawEdgesXRayed(t,e)}}drawEdgesHighlighted(e){const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawEdgesHighlighted(t,e)}}drawEdgesSelected(e){const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawEdgesSelected(t,e)}}drawOcclusion(e){if(0===this.numVisibleLayerPortions)return;const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawOcclusion(t,e)}}drawShadow(e){if(0===this.numVisibleLayerPortions)return;const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawShadow(t,e)}}drawPickMesh(e){if(0===this.numVisibleLayerPortions)return;const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawPickMesh(t,e)}}drawPickDepths(e){if(0===this.numVisibleLayerPortions)return;const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawPickDepths(t,e)}}drawPickNormals(e){if(0===this.numVisibleLayerPortions)return;const t=this.renderFlags;for(let s=0,i=t.visibleLayers.length;s<i;s++){const i=t.visibleLayers[s];this._layerList[i].drawPickNormals(t,e)}}destroy(){for(let e in this._currentBatchingLayers)this._currentBatchingLayers.hasOwnProperty(e)&&this._currentBatchingLayers[e].destroy();this._currentBatchingLayers={},this.scene.camera.off(this._onCameraViewMatrix);for(let e=0,t=this._layerList.length;e<t;e++)this._layerList[e].destroy();for(let e=0,t=this._nodeList.length;e<t;e++)this._nodeList[e]._destroy();Object.entries(this._geometries).forEach((([e,t])=>{t.destroy()})),this._geometries={},this._textures={},this._textureSets={},this._meshes={},this._nodes={},this.scene._aabbDirty=!0,this._isModel&&this.scene._deregisterModel(this),0!==sn&&(sn--,0===sn&&tn._clear()),super.destroy()}}const nc=p.vec4(),ac=p.vec4(),lc=p.vec3(),hc=p.vec3(),cc=p.vec3(),uc=p.vec4(),Ac=p.vec4(),pc=p.vec4();class dc{constructor(e){this._scene=e}dollyToCanvasPos(e,t,s){let i=!1;const r=this._scene.camera;if(e){const t=p.subVec3(e,r.eye,lc);i=p.lenVec3(t)<s}if("perspective"===r.projection){r.ortho.scale=r.ortho.scale-s;const i=this._unproject(t,uc),o=p.subVec3(i,r.eye,pc),n=p.mulVec3Scalar(p.normalizeVec3(o),-s,[]);if(r.eye=[r.eye[0]-n[0],r.eye[1]-n[1],r.eye[2]-n[2]],r.look=[r.look[0]-n[0],r.look[1]-n[1],r.look[2]-n[2]],e){const t=p.subVec3(e,r.eye,lc),s=p.lenVec3(t),i=p.mulVec3Scalar(p.normalizeVec3(p.subVec3(r.look,r.eye,hc)),s);r.look=[r.eye[0]+i[0],r.eye[1]+i[1],r.eye[2]+i[2]]}}else if("ortho"===r.projection){const e=this._unproject(t,uc);r.ortho.scale=r.ortho.scale-s,r.ortho._update();const i=this._unproject(t,Ac),o=p.subVec3(i,e,pc),n=p.mulVec3Scalar(p.normalizeVec3(p.subVec3(r.look,r.eye,lc)),-s,hc),a=p.addVec3(o,n,cc);r.eye=[r.eye[0]-a[0],r.eye[1]-a[1],r.eye[2]-a[2]],r.look=[r.look[0]-a[0],r.look[1]-a[1],r.look[2]-a[2]]}return i}_unproject(e,t){const s=this._scene.camera,i=s.project.transposedMatrix,r=i.subarray(8,12),o=i.subarray(12),n=[0,0,-1,1],a=p.dotVec4(n,r)/p.dotVec4(n,o);return s.project.unproject(e,a,nc,ac,t),t}destroy(){}}const fc=p.vec3(),mc=p.vec3(),gc=p.vec3(),yc=p.vec4(),Ec=p.vec4(),vc=p.vec4();class _c{constructor(e,t){this._scene=e,this._configs=t,this._pivotWorldPos=p.vec3(),this._cameraOffset=p.vec3(),this._azimuth=0,this._polar=0,this._radius=0,this._pivotPosSet=!1,this._pivoting=!1,this._shown=!1,this._pivotViewPos=p.vec4(),this._pivotProjPos=p.vec4(),this._pivotCanvasPos=p.vec2(),this._cameraDirty=!0,this._onViewMatrix=this._scene.camera.on("viewMatrix",(()=>{this._cameraDirty=!0})),this._onProjMatrix=this._scene.camera.on("projMatrix",(()=>{this._cameraDirty=!0})),this._onTick=this._scene.on("tick",(()=>{this.updatePivotElement()}))}updatePivotElement(){const e=this._scene.camera,t=this._scene.canvas;if(this._pivoting&&this._cameraDirty){p.transformPoint3(e.viewMatrix,this.getPivotPos(),this._pivotViewPos),this._pivotViewPos[3]=1,p.transformPoint4(e.projMatrix,this._pivotViewPos,this._pivotProjPos);const s=t.boundary,i=s[2],r=s[3];this._pivotCanvasPos[0]=Math.floor((1+this._pivotProjPos[0]/this._pivotProjPos[3])*i/2),this._pivotCanvasPos[1]=Math.floor((1-this._pivotProjPos[1]/this._pivotProjPos[3])*r/2);let o=t._lastBoundingClientRect;if(!o||t._canvasSizeChanged){const e=t.canvas;o=t._lastBoundingClientRect=e.getBoundingClientRect()}this._pivotElement&&(this._pivotElement.style.left=Math.floor(o.left+this._pivotCanvasPos[0])-this._pivotElement.clientWidth/2+window.scrollX+"px",this._pivotElement.style.top=Math.floor(o.top+this._pivotCanvasPos[1])-this._pivotElement.clientHeight/2+window.scrollY+"px"),this._cameraDirty=!1}}setPivotElement(e){this._pivotElement=e}startPivot(){if(this._cameraLookingDownwards())return this._pivoting=!1,!1;const e=this._scene.camera;let t=p.lookAtMat4v(e.eye,e.look,e.worldUp);p.transformPoint3(t,this.getPivotPos(),this._cameraOffset);const s=this.getPivotPos();this._cameraOffset[2]+=p.distVec3(e.eye,s),t=p.inverseMat4(t);const i=p.transformVec3(t,this._cameraOffset),r=p.vec3();if(p.subVec3(e.eye,s,r),p.addVec3(r,i),e.zUp){const e=r[1];r[1]=r[2],r[2]=e}this._radius=p.lenVec3(r),this._polar=Math.acos(r[1]/this._radius),this._azimuth=Math.atan2(r[0],r[2]),this._pivoting=!0}_cameraLookingDownwards(){const e=this._scene.camera,t=p.normalizeVec3(p.subVec3(e.look,e.eye,fc)),s=p.cross3Vec3(t,e.worldUp,mc);return p.sqLenVec3(s)<=1e-4}getPivoting(){return this._pivoting}setPivotPos(e){this._pivotWorldPos.set(e),this._pivotPosSet=!0}setCanvasPivotPos(e){const t=this._scene.camera,s=Math.abs(p.distVec3(this._scene.center,t.eye)),i=t.project.transposedMatrix,r=i.subarray(8,12),o=i.subarray(12),n=[0,0,-1,1],a=p.dotVec4(n,r)/p.dotVec4(n,o),l=yc;t.project.unproject(e,a,Ec,vc,l);const h=p.normalizeVec3(p.subVec3(l,t.eye,fc)),c=p.addVec3(t.eye,p.mulVec3Scalar(h,s,mc),gc);this.setPivotPos(c)}getPivotPos(){return this._pivotPosSet?this._pivotWorldPos:this._scene.camera.look}continuePivot(e,t){if(!this._pivoting)return;if(0===e&&0===t)return;const s=this._scene.camera;var i=-e;const r=-t;1===s.worldUp[2]&&(i=-i),this._azimuth+=.01*-i,this._polar+=.01*r,this._polar=p.clamp(this._polar,.001,Math.PI-.001);const o=[this._radius*Math.sin(this._polar)*Math.sin(this._azimuth),this._radius*Math.cos(this._polar),this._radius*Math.sin(this._polar)*Math.cos(this._azimuth)];if(1===s.worldUp[2]){const e=o[1];o[1]=o[2],o[2]=e}const n=p.lenVec3(p.subVec3(s.look,s.eye,p.vec3())),a=this.getPivotPos();p.addVec3(o,a);let l=p.lookAtMat4v(o,a,s.worldUp);l=p.inverseMat4(l);const h=p.transformVec3(l,this._cameraOffset);l[12]-=h[0],l[13]-=h[1],l[14]-=h[2];const c=[l[8],l[9],l[10]];s.eye=[l[12],l[13],l[14]],p.subVec3(s.eye,p.mulVec3Scalar(c,n),s.look),s.up=[l[4],l[5],l[6]],this.showPivot()}showPivot(){this._shown||(null!==this._hideTimeout&&(window.clearTimeout(this._hideTimeout),this._hideTimeout=null),this._pivotElement&&(this.updatePivotElement(),this._pivotElement.style.visibility="visible",this._shown=!0,this._hideTimeout=window.setTimeout((()=>{this.hidePivot()}),1e3)))}hidePivot(){this._shown&&(null!==this._hideTimeout&&(window.clearTimeout(this._hideTimeout),this._hideTimeout=null),this._pivotElement&&(this._pivotElement.style.visibility="hidden"),this._shown=!1)}endPivot(){this._pivoting=!1}destroy(){this._scene.camera.off(this._onViewMatrix),this._scene.camera.off(this._onProjMatrix),this._scene.off(this._onTick)}}class Ic{constructor(e,t){this._scene=e.scene,this._cameraControl=e,this._scene.canvas.canvas.oncontextmenu=function(e){e.preventDefault()},this._configs=t,this.schedulePickEntity=!1,this.schedulePickSurface=!1,this.pickCursorPos=p.vec2(),this.picked=!1,this.pickedSurface=!1,this.pickResult=null,this._lastPickedEntityId=null,this._needFireEvents=!1}update(){if(!this._configs.pointerEnabled)return;if(!this.schedulePickEntity&&!this.schedulePickSurface)return;this.picked=!1,this.pickedSurface=!1,this._needFireEvents=!1;const e=this._cameraControl.hasSubs("hoverSurface");if(this.schedulePickSurface&&this.pickResult&&this.pickResult.worldPos){const t=this.pickResult.canvasPos;if(t[0]===this.pickCursorPos[0]&&t[1]===this.pickCursorPos[1])return this.picked=!0,this.pickedSurface=!0,this._needFireEvents=e,this.schedulePickEntity=!1,void(this.schedulePickSurface=!1)}if(this.schedulePickEntity&&this.pickResult&&(this.pickResult.canvasPos||this.pickResult.snappedCanvasPos)){const e=this.pickResult.canvasPos||this.pickResult.snappedCanvasPos;if(e[0]===this.pickCursorPos[0]&&e[1]===this.pickCursorPos[1])return this.picked=!0,this.pickedSurface=!1,this._needFireEvents=!1,this.schedulePickEntity=!1,void(this.schedulePickSurface=!1)}if(this.schedulePickSurface){this.pickResult=this._scene.pick({pickSurface:!0,pickSurfaceNormal:!1,canvasPos:this.pickCursorPos});const e=this._scene.snapPick({canvasPos:this.pickCursorPos,snapRadius:45,snapType:"vertex"});null!==e&&(null==this.pickResult&&(this.pickResult=new ce),e&&null!==e.snappedWorldPos?this.pickResult.snappedWorldPos=e.snappedWorldPos:this.pickResult.snappedWorldPos=null,e&&null!==e.snappedCanvasPos?this.pickResult.snappedCanvasPos=e.snappedCanvasPos:this.pickResult.snappedCanvasPos=null),this.pickResult&&(this.picked=!0,this.pickedSurface=!0,this._needFireEvents=!0)}else this.pickResult=this._scene.pick({canvasPos:this.pickCursorPos}),this.pickResult&&(this.picked=!0,this.pickedSurface=!1,this._needFireEvents=!0);this.schedulePickEntity=!1,this.schedulePickSurface=!1}fireEvents(){if(this._needFireEvents){if(this.picked&&this.pickResult&&(this.pickResult.entity||this.pickResult.snappedWorldPos)){if(this.pickResult.entity){const e=this.pickResult.entity.id;this._lastPickedEntityId!==e&&(void 0!==this._lastPickedEntityId&&this._cameraControl.fire("hoverOut",{entity:this._scene.objects[this._lastPickedEntityId]},!0),this._cameraControl.fire("hoverEnter",this.pickResult,!0),this._lastPickedEntityId=e)}this._cameraControl.fire("hover",this.pickResult,!0),(this.pickResult.worldPos||this.pickResult.snappedWorldPos)&&(this.pickedSurface=!0,this._cameraControl.fire("hoverSurface",this.pickResult,!0))}else void 0!==this._lastPickedEntityId&&(this._cameraControl.fire("hoverOut",{entity:this._scene.objects[this._lastPickedEntityId]},!0),this._lastPickedEntityId=void 0),this._cameraControl.fire("hoverOff",{canvasPos:this.pickCursorPos},!0);this.pickResult=null,this._needFireEvents=!1}}destroy(){}}const Tc=p.vec2();class Pc{constructor(e,t,s,i,r){this._scene=e;const o=t.pickController;let n,a,l,h=0,c=0,u=0,A=0,d=!1;const f=p.vec3();let m=!0;const g=this._scene.canvas.canvas,y=[];function E(e=!0){g.style.cursor="move",h=i.pointerCanvasPos[0],c=i.pointerCanvasPos[1],u=i.pointerCanvasPos[0],A=i.pointerCanvasPos[1],e&&(o.pickCursorPos=i.pointerCanvasPos,o.schedulePickSurface=!0,o.update(),o.picked&&o.pickedSurface&&o.pickResult&&o.pickResult.worldPos?(d=!0,f.set(o.pickResult.worldPos)):d=!1)}document.addEventListener("keydown",this._documentKeyDownHandler=t=>{if(!s.active||!s.pointerEnabled||!e.input.keyboardEnabled)return;const i=t.keyCode;y[i]=!0}),document.addEventListener("keyup",this._documentKeyUpHandler=t=>{if(!s.active||!s.pointerEnabled||!e.input.keyboardEnabled)return;const i=t.keyCode;y[i]=!1}),g.addEventListener("mousedown",this._mouseDownHandler=t=>{if(s.active&&s.pointerEnabled)switch(t.which){case 1:y[e.input.KEY_SHIFT]||s.planView?(n=!0,E()):(n=!0,E(!1));break;case 2:a=!0,E();break;case 3:l=!0,s.panRightClick&&E()}}),document.addEventListener("mousemove",this._documentMouseMoveHandler=()=>{if(!s.active||!s.pointerEnabled)return;if(!n&&!a&&!l)return;const t=e.canvas.boundary,o=t[2],u=t[3],A=i.pointerCanvasPos[0],m=i.pointerCanvasPos[1];if(y[e.input.KEY_SHIFT]||s.planView||!s.panRightClick&&a||s.panRightClick&&l){const t=A-h,s=m-c,i=e.camera;if("perspective"===i.projection){const o=Math.abs(d?p.lenVec3(p.subVec3(f,e.camera.eye,[])):e.camera.eyeLookDist)*Math.tan(i.perspective.fov/2*Math.PI/180);r.panDeltaX+=1.5*t*o/u,r.panDeltaY+=1.5*s*o/u}else r.panDeltaX+=.5*i.ortho.scale*(t/u),r.panDeltaY+=.5*i.ortho.scale*(s/u)}else!n||a||l||s.planView||(s.firstPerson?(r.rotateDeltaY-=(A-h)/o*s.dragRotationRate/2,r.rotateDeltaX+=(m-c)/u*(s.dragRotationRate/4)):(r.rotateDeltaY-=(A-h)/o*(1.5*s.dragRotationRate),r.rotateDeltaX+=(m-c)/u*(1.5*s.dragRotationRate)));h=A,c=m}),g.addEventListener("mousemove",this._canvasMouseMoveHandler=e=>{s.active&&s.pointerEnabled&&i.mouseover&&(m=!0)}),document.addEventListener("mouseup",this._documentMouseUpHandler=e=>{if(s.active&&s.pointerEnabled)switch(e.which){case 1:case 2:case 3:n=!1,a=!1,l=!1}}),g.addEventListener("mouseup",this._mouseUpHandler=e=>{if(s.active&&s.pointerEnabled){if(3===e.which){!function(e,t){if(e){let s=e.target,i=0,r=0,o=0,n=0;for(;s.offsetParent;)i+=s.offsetLeft,r+=s.offsetTop,o+=s.scrollLeft,n+=s.scrollTop,s=s.offsetParent;t[0]=e.pageX+o-i,t[1]=e.pageY+n-r}else e=window.event,t[0]=e.x,t[1]=e.y}(e,Tc);const s=Tc[0],i=Tc[1];Math.abs(s-u)<3&&Math.abs(i-A)<3&&t.cameraControl.fire("rightClick",{pagePos:[Math.round(e.pageX),Math.round(e.pageY)],canvasPos:Tc,event:e},!0)}g.style.removeProperty("cursor")}}),g.addEventListener("mouseenter",this._mouseEnterHandler=()=>{s.active&&s.pointerEnabled});const v=1/60;let _=null;g.addEventListener("wheel",this._mouseWheelHandler=e=>{if(!s.active||!s.pointerEnabled)return;const t=performance.now()/1e3;var o=null!==_?t-_:0;_=t,o>.05&&(o=.05),o<v&&(o=v);const n=Math.max(-1,Math.min(1,40*-e.deltaY));if(0===n)return;const a=n/Math.abs(n);r.dollyDelta+=-a*o*s.mouseWheelDollyRate,m&&(i.followPointerDirty=!0,m=!1)},{passive:!0})}reset(){}destroy(){const e=this._scene.canvas.canvas;document.removeEventListener("keydown",this._documentKeyDownHandler),document.removeEventListener("keyup",this._documentKeyUpHandler),e.removeEventListener("mousedown",this._mouseDownHandler),document.removeEventListener("mousemove",this._documentMouseMoveHandler),e.removeEventListener("mousemove",this._canvasMouseMoveHandler),document.removeEventListener("mouseup",this._documentMouseUpHandler),e.removeEventListener("mouseup",this._mouseUpHandler),e.removeEventListener("mouseenter",this._mouseEnterHandler),e.removeEventListener("wheel",this._mouseWheelHandler)}}const Dc=p.vec3(),bc=p.vec3(),Rc=p.vec3(),Cc=p.vec3(),xc=p.vec3(),Nc={eye:p.vec3(),look:p.vec3(),up:p.vec3()};class Oc{constructor(e,t,s,i){this._scene=e;const r=t.cameraControl,o=e.camera;this._onSceneKeyDown=e.input.on("keydown",(()=>{if(!s.active||!s.pointerEnabled||!e.input.keyboardEnabled)return;if(!i.mouseover)return;const n=r._isKeyDownForAction(r.AXIS_VIEW_RIGHT),a=r._isKeyDownForAction(r.AXIS_VIEW_BACK),l=r._isKeyDownForAction(r.AXIS_VIEW_LEFT),h=r._isKeyDownForAction(r.AXIS_VIEW_FRONT),c=r._isKeyDownForAction(r.AXIS_VIEW_TOP),u=r._isKeyDownForAction(r.AXIS_VIEW_BOTTOM);if(!(n||a||l||h||c||u))return;const A=e.aabb,d=p.getAABB3Diag(A);p.getAABB3Center(A,Dc);const f=Math.abs(d/Math.tan(t.cameraFlight.fitFOV*p.DEGTORAD)),m=1.1*d;Nc.orthoScale=m,n?(Nc.eye.set(p.addVec3(Dc,p.mulVec3Scalar(o.worldRight,f,bc),xc)),Nc.look.set(Dc),Nc.up.set(o.worldUp)):a?(Nc.eye.set(p.addVec3(Dc,p.mulVec3Scalar(o.worldForward,f,bc),xc)),Nc.look.set(Dc),Nc.up.set(o.worldUp)):l?(Nc.eye.set(p.addVec3(Dc,p.mulVec3Scalar(o.worldRight,-f,bc),xc)),Nc.look.set(Dc),Nc.up.set(o.worldUp)):h?(Nc.eye.set(p.addVec3(Dc,p.mulVec3Scalar(o.worldForward,-f,bc),xc)),Nc.look.set(Dc),Nc.up.set(o.worldUp)):c?(Nc.eye.set(p.addVec3(Dc,p.mulVec3Scalar(o.worldUp,f,bc),xc)),Nc.look.set(Dc),Nc.up.set(p.normalizeVec3(p.mulVec3Scalar(o.worldForward,1,Rc),Cc))):u&&(Nc.eye.set(p.addVec3(Dc,p.mulVec3Scalar(o.worldUp,-f,bc),xc)),Nc.look.set(Dc),Nc.up.set(p.normalizeVec3(p.mulVec3Scalar(o.worldForward,-1,Rc)))),!s.firstPerson&&s.followPointer&&t.pivotController.setPivotPos(Dc),t.cameraFlight.duration>0?t.cameraFlight.flyTo(Nc,(()=>{t.pivotController.getPivoting()&&s.followPointer&&t.pivotController.showPivot()})):(t.cameraFlight.jumpTo(Nc),t.pivotController.getPivoting()&&s.followPointer&&t.pivotController.showPivot())}))}reset(){}destroy(){this._scene.input.off(this._onSceneKeyDown)}}class Sc{constructor(e,t,s,i,r){this._scene=e;const o=t.pickController,n=t.pivotController,a=t.cameraControl;this._clicks=0,this._timeout=null,this._lastPickedEntityId=null;let l=!1,h=!1;const c=this._scene.canvas.canvas,u=s=>{let i;s&&s.worldPos&&(i=s.worldPos);const r=s&&s.entity?s.entity.aabb:e.aabb;if(i){const s=e.camera;p.subVec3(s.eye,s.look,[]),t.cameraFlight.flyTo({aabb:r})}else t.cameraFlight.flyTo({aabb:r})};c.addEventListener("mousemove",this._canvasMouseMoveHandler=t=>{if(!s.active||!s.pointerEnabled)return;if(l||h)return;const r=a.hasSubs("hover"),n=a.hasSubs("hoverOut"),c=a.hasSubs("hoverOff"),u=a.hasSubs("hoverSurface");if(r||n||c||u)if(o.pickCursorPos=i.pointerCanvasPos,o.schedulePickEntity=!0,o.schedulePickSurface=u,o.update(),o.pickResult){if(o.pickResult.entity){const t=o.pickResult.entity.id;this._lastPickedEntityId!==t&&(void 0!==this._lastPickedEntityId&&a.fire("hoverOut",{entity:e.objects[this._lastPickedEntityId]},!0),a.fire("hoverEnter",o.pickResult,!0),this._lastPickedEntityId=t)}a.fire("hover",o.pickResult,!0),(o.pickResult.worldPos||o.pickResult.snappedWorldPos)&&a.fire("hoverSurface",o.pickResult,!0)}else void 0!==this._lastPickedEntityId&&(a.fire("hoverOut",{entity:e.objects[this._lastPickedEntityId]},!0),this._lastPickedEntityId=void 0),a.fire("hoverOff",{canvasPos:o.pickCursorPos},!0)}),c.addEventListener("mousedown",this._canvasMouseDownHandler=t=>{1===t.which&&(l=!0),3===t.which&&(h=!0);if(1===t.which&&s.active&&s.pointerEnabled&&(i.mouseDownClientX=t.clientX,i.mouseDownClientY=t.clientY,i.mouseDownCursorX=i.pointerCanvasPos[0],i.mouseDownCursorY=i.pointerCanvasPos[1],!s.firstPerson&&s.followPointer&&(o.pickCursorPos=i.pointerCanvasPos,o.schedulePickSurface=!0,o.update(),1===t.which))){const t=o.pickResult;t&&t.worldPos?(n.setPivotPos(t.worldPos),n.startPivot()):(s.smartPivot?n.setCanvasPivotPos(i.pointerCanvasPos):n.setPivotPos(e.camera.look),n.startPivot())}}),document.addEventListener("mouseup",this._documentMouseUpHandler=e=>{1===e.which&&(l=!1),3===e.which&&(h=!1)}),c.addEventListener("mouseup",this._canvasMouseUpHandler=r=>{if(!s.active||!s.pointerEnabled)return;if(!(1===r.which))return;if(n.hidePivot(),Math.abs(r.clientX-i.mouseDownClientX)>3||Math.abs(r.clientY-i.mouseDownClientY)>3)return;const l=a.hasSubs("picked"),h=a.hasSubs("pickedNothing"),c=a.hasSubs("pickedSurface"),A=a.hasSubs("doublePicked"),d=a.hasSubs("doublePickedSurface"),f=a.hasSubs("doublePickedNothing");if(!(s.doublePickFlyTo||A||d||f))return(l||h||c)&&(o.pickCursorPos=i.pointerCanvasPos,o.schedulePickEntity=!0,o.schedulePickSurface=c,o.update(),o.pickResult?(a.fire("picked",o.pickResult,!0),o.pickedSurface&&a.fire("pickedSurface",o.pickResult,!0)):a.fire("pickedNothing",{canvasPos:i.pointerCanvasPos},!0)),void(this._clicks=0);if(this._clicks++,1===this._clicks){o.pickCursorPos=i.pointerCanvasPos,o.schedulePickEntity=s.doublePickFlyTo,o.schedulePickSurface=c,o.update();const e=o.pickResult,r=o.pickedSurface;this._timeout=setTimeout((()=>{e?(a.fire("picked",e,!0),r&&(a.fire("pickedSurface",e,!0),!s.firstPerson&&s.followPointer&&(t.pivotController.setPivotPos(e.worldPos),t.pivotController.startPivot()&&t.pivotController.showPivot()))):a.fire("pickedNothing",{canvasPos:i.pointerCanvasPos},!0),this._clicks=0}),s.doubleClickTimeFrame)}else{if(null!==this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null),o.pickCursorPos=i.pointerCanvasPos,o.schedulePickEntity=s.doublePickFlyTo||A||d,o.schedulePickSurface=o.schedulePickEntity&&d,o.update(),o.pickResult){if(a.fire("doublePicked",o.pickResult,!0),o.pickedSurface&&a.fire("doublePickedSurface",o.pickResult,!0),s.doublePickFlyTo&&(u(o.pickResult),!s.firstPerson&&s.followPointer)){const e=o.pickResult.entity.aabb,s=p.getAABB3Center(e);t.pivotController.setPivotPos(s),t.pivotController.startPivot()&&t.pivotController.showPivot()}}else if(a.fire("doublePickedNothing",{canvasPos:i.pointerCanvasPos},!0),s.doublePickFlyTo&&(u(),!s.firstPerson&&s.followPointer)){const s=e.aabb,i=p.getAABB3Center(s);t.pivotController.setPivotPos(i),t.pivotController.startPivot()&&t.pivotController.showPivot()}this._clicks=0}},!1)}reset(){this._clicks=0,this._lastPickedEntityId=null,this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null)}destroy(){const e=this._scene.canvas.canvas;e.removeEventListener("mousemove",this._canvasMouseMoveHandler),e.removeEventListener("mousedown",this._canvasMouseDownHandler),document.removeEventListener("mouseup",this._documentMouseUpHandler),e.removeEventListener("mouseup",this._canvasMouseUpHandler),this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null)}}class wc{constructor(e,t,s,i,r){this._scene=e;const o=e.input,n=[],a=e.canvas.canvas;let l=!0;this._onSceneMouseMove=o.on("mousemove",(()=>{l=!0})),this._onSceneKeyDown=o.on("keydown",(t=>{s.active&&s.pointerEnabled&&e.input.keyboardEnabled&&i.mouseover&&(n[t]=!0,t===o.KEY_SHIFT&&(a.style.cursor="move"))})),this._onSceneKeyUp=o.on("keyup",(t=>{s.active&&s.pointerEnabled&&e.input.keyboardEnabled&&(n[t]=!1,t===o.KEY_SHIFT&&(a.style.cursor=null))})),this._onTick=e.on("tick",(a=>{if(!s.active||!s.pointerEnabled||!e.input.keyboardEnabled)return;if(!i.mouseover)return;const h=t.cameraControl,c=a.deltaTime/1e3;if(!s.planView){const e=h._isKeyDownForAction(h.ROTATE_Y_POS,n),i=h._isKeyDownForAction(h.ROTATE_Y_NEG,n),o=h._isKeyDownForAction(h.ROTATE_X_POS,n),a=h._isKeyDownForAction(h.ROTATE_X_NEG,n),l=c*s.keyboardRotationRate;(e||i||o||a)&&(!s.firstPerson&&s.followPointer&&t.pivotController.startPivot(),e?r.rotateDeltaY+=l:i&&(r.rotateDeltaY-=l),o?r.rotateDeltaX+=l:a&&(r.rotateDeltaX-=l),!s.firstPerson&&s.followPointer&&t.pivotController.startPivot())}if(!n[o.KEY_CTRL]&&!n[o.KEY_ALT]){const e=h._isKeyDownForAction(h.DOLLY_BACKWARDS,n),o=h._isKeyDownForAction(h.DOLLY_FORWARDS,n);if(e||o){const n=c*s.keyboardDollyRate;!s.firstPerson&&s.followPointer&&t.pivotController.startPivot(),o?r.dollyDelta-=n:e&&(r.dollyDelta+=n),l&&(i.followPointerDirty=!0,l=!1)}}const u=h._isKeyDownForAction(h.PAN_FORWARDS,n),A=h._isKeyDownForAction(h.PAN_BACKWARDS,n),p=h._isKeyDownForAction(h.PAN_LEFT,n),d=h._isKeyDownForAction(h.PAN_RIGHT,n),f=h._isKeyDownForAction(h.PAN_UP,n),m=h._isKeyDownForAction(h.PAN_DOWN,n),g=(n[o.KEY_ALT]?.3:1)*c*s.keyboardPanRate;(u||A||p||d||f||m)&&(!s.firstPerson&&s.followPointer&&t.pivotController.startPivot(),m?r.panDeltaY+=g:f&&(r.panDeltaY+=-g),d?r.panDeltaX+=-g:p&&(r.panDeltaX+=g),A?r.panDeltaZ+=g:u&&(r.panDeltaZ+=-g))}))}reset(){}destroy(){this._scene.off(this._onTick),this._scene.input.off(this._onSceneMouseMove),this._scene.input.off(this._onSceneKeyDown),this._scene.input.off(this._onSceneKeyUp)}}const Mc=.001,Bc=p.vec3();class Fc{constructor(e,t,s,i,r){this._scene=e;const o=e.camera,n=t.pickController,a=t.pivotController,l=t.panController;let h=1,c=1,u=null;this._onTick=e.on("tick",(()=>{if(!s.active||!s.pointerEnabled)return;let t="default";if(Math.abs(r.dollyDelta)<Mc&&(r.dollyDelta=0),Math.abs(r.rotateDeltaX)<Mc&&(r.rotateDeltaX=0),Math.abs(r.rotateDeltaY)<Mc&&(r.rotateDeltaY=0),0===r.rotateDeltaX&&0===r.rotateDeltaY||(r.dollyDelta=0),s.followPointer&&--h<=0&&(h=1,0!==r.dollyDelta)){if(0===r.rotateDeltaY&&0===r.rotateDeltaX&&s.followPointer&&i.followPointerDirty&&(n.pickCursorPos=i.pointerCanvasPos,n.schedulePickSurface=!0,n.update(),n.pickResult&&n.pickResult.worldPos?u=n.pickResult.worldPos:(c=1,u=null),i.followPointerDirty=!1),u){const t=Math.abs(p.lenVec3(p.subVec3(u,e.camera.eye,Bc)));c=t/s.dollyProximityThreshold}c<s.dollyMinSpeed&&(c=s.dollyMinSpeed)}const A=r.dollyDelta*c;if(0===r.rotateDeltaY&&0===r.rotateDeltaX||(!s.firstPerson&&s.followPointer&&a.getPivoting()?(a.continuePivot(r.rotateDeltaY,r.rotateDeltaX),a.showPivot()):(0!==r.rotateDeltaX&&(s.firstPerson?o.pitch(-r.rotateDeltaX):o.orbitPitch(r.rotateDeltaX)),0!==r.rotateDeltaY&&(s.firstPerson?o.yaw(r.rotateDeltaY):o.orbitYaw(r.rotateDeltaY))),r.rotateDeltaX*=s.rotationInertia,r.rotateDeltaY*=s.rotationInertia,t="grabbing"),Math.abs(r.panDeltaX)<Mc&&(r.panDeltaX=0),Math.abs(r.panDeltaY)<Mc&&(r.panDeltaY=0),Math.abs(r.panDeltaZ)<Mc&&(r.panDeltaZ=0),0!==r.panDeltaX||0!==r.panDeltaY||0!==r.panDeltaZ){const e=p.vec3();let i,n;if(e[0]=r.panDeltaX,e[1]=r.panDeltaY,e[2]=r.panDeltaZ,s.constrainVertical){o.xUp?(i=o.eye[0],n=o.look[0]):o.yUp?(i=o.eye[1],n=o.look[1]):o.zUp&&(i=o.eye[2],n=o.look[2]),o.pan(e);const t=o.eye,s=o.look;o.xUp?(t[0]=i,s[0]=n):o.yUp?(t[1]=i,s[1]=n):o.zUp&&(t[2]=i,s[2]=n),o.eye=t,o.look=s}else o.pan(e);t="grabbing"}if(r.panDeltaX*=s.panInertia,r.panDeltaY*=s.panInertia,r.panDeltaZ*=s.panInertia,0!==A){if(t=A<0?"zoom-in":"zoom-out",s.firstPerson){let e,t;if(s.constrainVertical&&(o.xUp?(e=o.eye[0],t=o.look[0]):o.yUp?(e=o.eye[1],t=o.look[1]):o.zUp&&(e=o.eye[2],t=o.look[2])),s.followPointer){l.dollyToCanvasPos(u,i.pointerCanvasPos,-A)&&(i.followPointerDirty=!0)}else o.pan([0,0,A]),o.ortho.scale=o.ortho.scale-A;if(s.constrainVertical){const s=o.eye,i=o.look;o.xUp?(s[0]=e,i[0]=t):o.yUp?(s[1]=e,i[1]=t):o.zUp&&(s[2]=e,i[2]=t),o.eye=s,o.look=i}}else if(s.planView)if(s.followPointer){l.dollyToCanvasPos(u,i.pointerCanvasPos,-A)&&(i.followPointerDirty=!0)}else o.ortho.scale=o.ortho.scale+A,o.zoom(A);else if(s.followPointer){l.dollyToCanvasPos(u,i.pointerCanvasPos,-A)&&(i.followPointerDirty=!0)}else o.ortho.scale=o.ortho.scale+A,o.zoom(A);r.dollyDelta*=s.dollyInertia}n.fireEvents(),document.body.style.cursor=t}))}destroy(){this._scene.off(this._onTick)}}class Lc{constructor(e,t,s,i,r){this._scene=e;const o=this._scene.canvas.canvas;o.addEventListener("mouseenter",this._mouseEnterHandler=()=>{i.mouseover=!0}),o.addEventListener("mouseleave",this._mouseLeaveHandler=()=>{i.mouseover=!1,o.style.cursor=null}),document.addEventListener("mousemove",this._mouseMoveHandler=e=>{Uc(e,o,i.pointerCanvasPos)}),o.addEventListener("mousedown",this._mouseDownHandler=e=>{s.active&&s.pointerEnabled&&(Uc(e,o,i.pointerCanvasPos),i.mouseover=!0)}),o.addEventListener("mouseup",this._mouseUpHandler=e=>{s.active&&s.pointerEnabled})}reset(){}destroy(){const e=this._scene.canvas.canvas;document.removeEventListener("mousemove",this._mouseMoveHandler),e.removeEventListener("mouseenter",this._mouseEnterHandler),e.removeEventListener("mouseleave",this._mouseLeaveHandler),e.removeEventListener("mousedown",this._mouseDownHandler),e.removeEventListener("mouseup",this._mouseUpHandler)}}function Uc(e,t,s){if(e){const{x:i,y:r}=t.getBoundingClientRect();s[0]=e.clientX-i,s[1]=e.clientY-r}else e=window.event,s[0]=e.x,s[1]=e.y;return s}const Hc=function(e,t){if(e){let s=e.target,i=0,r=0;for(;s.offsetParent;)i+=s.offsetLeft,r+=s.offsetTop,s=s.offsetParent;t[0]=e.pageX-i,t[1]=e.pageY-r}else e=window.event,t[0]=e.x,t[1]=e.y;return t};class Gc{constructor(e,t,s,i,r){this._scene=e;const o=t.pickController,n=t.pivotController,a=p.vec2(),l=p.vec2(),h=p.vec2(),c=p.vec2(),u=[],A=this._scene.canvas.canvas;let d=0,f=!1;this._onTick=e.on("tick",(()=>{f=!1})),A.addEventListener("touchstart",this._canvasTouchStartHandler=t=>{if(!s.active||!s.pointerEnabled)return;t.preventDefault();const r=t.touches,l=t.changedTouches;for(i.touchStartTime=Date.now(),1===r.length&&1===l.length&&(Hc(r[0],a),s.followPointer&&(o.pickCursorPos=a,o.schedulePickSurface=!0,o.update(),s.planView||(o.picked&&o.pickedSurface&&o.pickResult&&o.pickResult.worldPos?(n.setPivotPos(o.pickResult.worldPos),!s.firstPerson&&n.startPivot()&&n.showPivot()):(s.smartPivot?n.setCanvasPivotPos(i.pointerCanvasPos):n.setPivotPos(e.camera.look),!s.firstPerson&&n.startPivot()&&n.showPivot()))));u.length<r.length;)u.push(p.vec2());for(let e=0,t=r.length;e<t;++e)Hc(r[e],u[e]);d=r.length}),A.addEventListener("touchmove",this._canvasTouchMoveHandler=t=>{if(!s.active||!s.pointerEnabled)return;if(t.stopPropagation(),t.preventDefault(),f)return;f=!0;const n=e.canvas.boundary,a=n[2],A=n[3],m=t.touches;if(t.touches.length===d){if(1===d){Hc(m[0],l),p.subVec2(l,u[0],c);const t=c[0],o=c[1];if(null!==i.longTouchTimeout&&(Math.abs(t)>s.longTapRadius||Math.abs(o)>s.longTapRadius)&&(clearTimeout(i.longTouchTimeout),i.longTouchTimeout=null),s.planView){const i=e.camera;if("perspective"===i.projection){const n=Math.abs(e.camera.eyeLookDist)*Math.tan(i.perspective.fov/2*Math.PI/180);r.panDeltaX+=t*n/A*s.touchPanRate,r.panDeltaY+=o*n/A*s.touchPanRate}else r.panDeltaX+=.5*i.ortho.scale*(t/A)*s.touchPanRate,r.panDeltaY+=.5*i.ortho.scale*(o/A)*s.touchPanRate}else r.rotateDeltaY-=t/a*(1*s.dragRotationRate),r.rotateDeltaX+=o/A*(1.5*s.dragRotationRate)}else if(2===d){const t=m[0],n=m[1];Hc(t,l),Hc(n,h);const a=p.geometricMeanVec2(u[0],u[1]),c=p.geometricMeanVec2(l,h),d=p.vec2();p.subVec2(a,c,d);const f=d[0],g=d[1],y=e.camera,E=p.distVec2([t.pageX,t.pageY],[n.pageX,n.pageY]),v=(p.distVec2(u[0],u[1])-E)*s.touchDollyRate;if(r.dollyDelta=v,Math.abs(v)<1)if("perspective"===y.projection){const t=o.pickResult?o.pickResult.worldPos:e.center,i=Math.abs(p.lenVec3(p.subVec3(t,e.camera.eye,[])))*Math.tan(y.perspective.fov/2*Math.PI/180);r.panDeltaX-=f*i/A*s.touchPanRate,r.panDeltaY-=g*i/A*s.touchPanRate}else r.panDeltaX-=.5*y.ortho.scale*(f/A)*s.touchPanRate,r.panDeltaY-=.5*y.ortho.scale*(g/A)*s.touchPanRate;i.pointerCanvasPos=c}for(let e=0;e<d;++e)Hc(m[e],u[e])}})}reset(){}destroy(){const e=this._scene.canvas.canvas;e.removeEventListener("touchstart",this._canvasTouchStartHandler),e.removeEventListener("touchmove",this._canvasTouchMoveHandler),this._scene.off(this._onTick)}}const Vc=function(e,t){if(e){let s=e.target,i=0,r=0;for(;s.offsetParent;)i+=s.offsetLeft,r+=s.offsetTop,s=s.offsetParent;t[0]=e.pageX-i,t[1]=e.pageY-r}else e=window.event,t[0]=e.x,t[1]=e.y;return t};class kc{constructor(e,t,s,i,r){this._scene=e;const o=t.pickController,n=t.cameraControl;let a;const l=[],h=new Float32Array(2);let c=-1,u=-1;const A=this._scene.canvas.canvas,d=s=>{let i;s&&s.worldPos&&(i=s.worldPos);const r=s?s.entity.aabb:e.aabb;if(i){const s=e.camera;p.subVec3(s.eye,s.look,[]),t.cameraFlight.flyTo({aabb:r})}else t.cameraFlight.flyTo({aabb:r})};A.addEventListener("touchstart",this._canvasTouchStartHandler=e=>{if(!s.active||!s.pointerEnabled)return;null!==i.longTouchTimeout&&(clearTimeout(i.longTouchTimeout),i.longTouchTimeout=null);const r=e.touches,o=e.changedTouches;if(a=Date.now(),1===r.length&&1===o.length){c=a,Vc(r[0],h);const o=h[0],n=h[1],l=r[0].pageX,u=r[0].pageY;i.longTouchTimeout=setTimeout((()=>{t.cameraControl.fire("rightClick",{pagePos:[Math.round(l),Math.round(u)],canvasPos:[Math.round(o),Math.round(n)],event:e},!0),i.longTouchTimeout=null}),s.longTapTimeout)}else c=-1;for(;l.length<r.length;)l.push(new Float32Array(2));for(let e=0,t=r.length;e<t;++e)Vc(r[e],l[e]);l.length=r.length},{passive:!0}),A.addEventListener("touchend",this._canvasTouchEndHandler=e=>{if(!s.active||!s.pointerEnabled)return;const t=Date.now(),r=e.touches,a=e.changedTouches,A=n.hasSubs("pickedSurface");null!==i.longTouchTimeout&&(clearTimeout(i.longTouchTimeout),i.longTouchTimeout=null),0===r.length&&1===a.length&&c>-1&&t-c<150&&(u>-1&&c-u<325?(Vc(a[0],o.pickCursorPos),o.schedulePickEntity=!0,o.schedulePickSurface=A,o.update(),o.pickResult?(o.pickResult.touchInput=!0,n.fire("doublePicked",o.pickResult),o.pickedSurface&&n.fire("doublePickedSurface",o.pickResult),s.doublePickFlyTo&&d(o.pickResult)):(n.fire("doublePickedNothing"),s.doublePickFlyTo&&d()),u=-1):p.distVec2(l[0],h)<4&&(Vc(a[0],o.pickCursorPos),o.schedulePickEntity=!0,o.schedulePickSurface=A,o.update(),o.pickResult?(o.pickResult.touchInput=!0,n.fire("picked",o.pickResult),o.pickedSurface&&n.fire("pickedSurface",o.pickResult)):n.fire("pickedNothing"),u=t),c=-1),l.length=r.length;for(let e=0,t=r.length;e<t;++e)l[e][0]=r[e].pageX,l[e][1]=r[e].pageY},{passive:!0})}reset(){}destroy(){const e=this._scene.canvas.canvas;e.removeEventListener("touchstart",this._canvasTouchStartHandler),e.removeEventListener("touchend",this._canvasTouchEndHandler)}}class jc extends x{constructor(e,t={}){super(e,t),this.PAN_LEFT=0,this.PAN_RIGHT=1,this.PAN_UP=2,this.PAN_DOWN=3,this.PAN_FORWARDS=4,this.PAN_BACKWARDS=5,this.ROTATE_X_POS=6,this.ROTATE_X_NEG=7,this.ROTATE_Y_POS=8,this.ROTATE_Y_NEG=9,this.DOLLY_FORWARDS=10,this.DOLLY_BACKWARDS=11,this.AXIS_VIEW_RIGHT=12,this.AXIS_VIEW_BACK=13,this.AXIS_VIEW_LEFT=14,this.AXIS_VIEW_FRONT=15,this.AXIS_VIEW_TOP=16,this.AXIS_VIEW_BOTTOM=17,this._keyMap={},this.scene.canvas.canvas.oncontextmenu=e=>{e.preventDefault()},this._configs={longTapTimeout:600,longTapRadius:5,active:!0,keyboardLayout:"qwerty",navMode:"orbit",planView:!1,firstPerson:!1,followPointer:!0,doublePickFlyTo:!0,panRightClick:!0,showPivot:!1,pointerEnabled:!0,constrainVertical:!1,smartPivot:!1,doubleClickTimeFrame:250,dragRotationRate:360,keyboardRotationRate:90,rotationInertia:0,keyboardPanRate:1,touchPanRate:1,panInertia:.5,keyboardDollyRate:10,mouseWheelDollyRate:100,touchDollyRate:.2,dollyInertia:0,dollyProximityThreshold:30,dollyMinSpeed:.04},this._states={pointerCanvasPos:p.vec2(),mouseover:!1,followPointerDirty:!0,mouseDownClientX:0,mouseDownClientY:0,mouseDownCursorX:0,mouseDownCursorY:0,touchStartTime:null,activeTouches:[],tapStartPos:p.vec2(),tapStartTime:-1,lastTapTime:-1,longTouchTimeout:null},this._updates={rotateDeltaX:0,rotateDeltaY:0,panDeltaX:0,panDeltaY:0,panDeltaZ:0,dollyDelta:0};const s=this.scene;this._controllers={cameraControl:this,pickController:new Ic(this,this._configs),pivotController:new _c(s,this._configs),panController:new dc(s),cameraFlight:new Qo(this,{duration:.5})},this._handlers=[new Lc(this.scene,this._controllers,this._configs,this._states,this._updates),new Gc(this.scene,this._controllers,this._configs,this._states,this._updates),new Pc(this.scene,this._controllers,this._configs,this._states,this._updates),new Oc(this.scene,this._controllers,this._configs,this._states,this._updates),new Sc(this.scene,this._controllers,this._configs,this._states,this._updates),new kc(this.scene,this._controllers,this._configs,this._states,this._updates),new wc(this.scene,this._controllers,this._configs,this._states,this._updates)],this._cameraUpdater=new Fc(this.scene,this._controllers,this._configs,this._states,this._updates),this.navMode=t.navMode,t.planView&&(this.planView=t.planView),this.constrainVertical=t.constrainVertical,t.keyboardLayout?this.keyboardLayout=t.keyboardLayout:this.keyMap=t.keyMap,this.doublePickFlyTo=t.doublePickFlyTo,this.panRightClick=t.panRightClick,this.active=t.active,this.followPointer=t.followPointer,this.rotationInertia=t.rotationInertia,this.keyboardPanRate=t.keyboardPanRate,this.touchPanRate=t.touchPanRate,this.keyboardRotationRate=t.keyboardRotationRate,this.dragRotationRate=t.dragRotationRate,this.touchDollyRate=t.touchDollyRate,this.dollyInertia=t.dollyInertia,this.dollyProximityThreshold=t.dollyProximityThreshold,this.dollyMinSpeed=t.dollyMinSpeed,this.panInertia=t.panInertia,this.pointerEnabled=!0,this.keyboardDollyRate=t.keyboardDollyRate,this.mouseWheelDollyRate=t.mouseWheelDollyRate}set keyMap(e){if(e=e||"qwerty",y.isString(e)){const t=this.scene.input,s={};switch(e){default:this.error("Unsupported value for 'keyMap': "+e+" defaulting to 'qwerty'");case"qwerty":s[this.PAN_LEFT]=[t.KEY_A],s[this.PAN_RIGHT]=[t.KEY_D],s[this.PAN_UP]=[t.KEY_Z],s[this.PAN_DOWN]=[t.KEY_X],s[this.PAN_BACKWARDS]=[],s[this.PAN_FORWARDS]=[],s[this.DOLLY_FORWARDS]=[t.KEY_W,t.KEY_ADD],s[this.DOLLY_BACKWARDS]=[t.KEY_S,t.KEY_SUBTRACT],s[this.ROTATE_X_POS]=[t.KEY_DOWN_ARROW],s[this.ROTATE_X_NEG]=[t.KEY_UP_ARROW],s[this.ROTATE_Y_POS]=[t.KEY_Q,t.KEY_LEFT_ARROW],s[this.ROTATE_Y_NEG]=[t.KEY_E,t.KEY_RIGHT_ARROW],s[this.AXIS_VIEW_RIGHT]=[t.KEY_NUM_1],s[this.AXIS_VIEW_BACK]=[t.KEY_NUM_2],s[this.AXIS_VIEW_LEFT]=[t.KEY_NUM_3],s[this.AXIS_VIEW_FRONT]=[t.KEY_NUM_4],s[this.AXIS_VIEW_TOP]=[t.KEY_NUM_5],s[this.AXIS_VIEW_BOTTOM]=[t.KEY_NUM_6];break;case"azerty":s[this.PAN_LEFT]=[t.KEY_Q],s[this.PAN_RIGHT]=[t.KEY_D],s[this.PAN_UP]=[t.KEY_W],s[this.PAN_DOWN]=[t.KEY_X],s[this.PAN_BACKWARDS]=[],s[this.PAN_FORWARDS]=[],s[this.DOLLY_FORWARDS]=[t.KEY_Z,t.KEY_ADD],s[this.DOLLY_BACKWARDS]=[t.KEY_S,t.KEY_SUBTRACT],s[this.ROTATE_X_POS]=[t.KEY_DOWN_ARROW],s[this.ROTATE_X_NEG]=[t.KEY_UP_ARROW],s[this.ROTATE_Y_POS]=[t.KEY_A,t.KEY_LEFT_ARROW],s[this.ROTATE_Y_NEG]=[t.KEY_E,t.KEY_RIGHT_ARROW],s[this.AXIS_VIEW_RIGHT]=[t.KEY_NUM_1],s[this.AXIS_VIEW_BACK]=[t.KEY_NUM_2],s[this.AXIS_VIEW_LEFT]=[t.KEY_NUM_3],s[this.AXIS_VIEW_FRONT]=[t.KEY_NUM_4],s[this.AXIS_VIEW_TOP]=[t.KEY_NUM_5],s[this.AXIS_VIEW_BOTTOM]=[t.KEY_NUM_6]}this._keyMap=s}else{const t=e;this._keyMap=t}}get keyMap(){return this._keyMap}_isKeyDownForAction(e,t){const s=this._keyMap[e];if(!s)return!1;t||(t=this.scene.input.keyDown);for(let e=0,i=s.length;e<i;e++){if(t[s[e]])return!0}return!1}set pivotElement(e){this._controllers.pivotController.setPivotElement(e)}set active(e){this._configs.active=!1!==e}get active(){return this._configs.active}set navMode(e){"firstPerson"!==(e=e||"orbit")&&"orbit"!==e&&"planView"!==e&&(this.error("Unsupported value for navMode: "+e+" - supported values are 'orbit', 'firstPerson' and 'planView' - defaulting to 'orbit'"),e="orbit"),this._configs.firstPerson="firstPerson"===e,this._configs.planView="planView"===e,(this._configs.firstPerson||this._configs.planView)&&(this._controllers.pivotController.hidePivot(),this._controllers.pivotController.endPivot()),this._configs.navMode=e}get navMode(){return this._configs.navMode}set pointerEnabled(e){this._reset(),this._configs.pointerEnabled=!!e}_reset(){for(let e=0,t=this._handlers.length;e<t;e++){const t=this._handlers[e];t.reset&&t.reset()}this._updates.panDeltaX=0,this._updates.panDeltaY=0,this._updates.rotateDeltaX=0,this._updates.rotateDeltaY=0,this._updates.dolyDelta=0}get pointerEnabled(){return this._configs.pointerEnabled}set followPointer(e){this._configs.followPointer=!1!==e}get followPointer(){return this._configs.followPointer}set pivotPos(e){this._controllers.pivotController.setPivotPos(e)}get pivotPos(){return this._controllers.pivotController.getPivotPos()}set dollyToPointer(e){this.warn("dollyToPointer property is deprecated - replaced with followPointer"),this.followPointer=e}get dollyToPointer(){return this.warn("dollyToPointer property is deprecated - replaced with followPointer"),this.followPointer}set panToPointer(e){this.warn("panToPointer property is deprecated - replaced with followPointer")}get panToPointer(){return this.warn("panToPointer property is deprecated - replaced with followPointer"),!1}set planView(e){this._configs.planView=!!e,this._configs.firstPerson=!1,this._configs.planView&&(this._controllers.pivotController.hidePivot(),this._controllers.pivotController.endPivot()),this.warn("planView property is deprecated - replaced with navMode")}get planView(){return this.warn("planView property is deprecated - replaced with navMode"),this._configs.planView}set firstPerson(e){this.warn("firstPerson property is deprecated - replaced with navMode"),this._configs.firstPerson=!!e,this._configs.planView=!1,this._configs.firstPerson&&(this._controllers.pivotController.hidePivot(),this._controllers.pivotController.endPivot())}get firstPerson(){return this.warn("firstPerson property is deprecated - replaced with navMode"),this._configs.firstPerson}set constrainVertical(e){this._configs.constrainVertical=!!e}get constrainVertical(){return this._configs.constrainVertical}set doublePickFlyTo(e){this._configs.doublePickFlyTo=!1!==e}get doublePickFlyTo(){return this._configs.doublePickFlyTo}set panRightClick(e){this._configs.panRightClick=!1!==e}get panRightClick(){return this._configs.panRightClick}set rotationInertia(e){this._configs.rotationInertia=null!=e?e:0}get rotationInertia(){return this._configs.rotationInertia}set keyboardPanRate(e){this._configs.keyboardPanRate=null!=e?e:5}set touchPanRate(e){this._configs.touchPanRate=null!=e?e:1}get touchPanRate(){return this._configs.touchPanRate}get keyboardPanRate(){return this._configs.keyboardPanRate}set keyboardRotationRate(e){this._configs.keyboardRotationRate=null!=e?e:90}get keyboardRotationRate(){return this._configs.keyboardRotationRate}set dragRotationRate(e){this._configs.dragRotationRate=null!=e?e:360}get dragRotationRate(){return this._configs.dragRotationRate}set keyboardDollyRate(e){this._configs.keyboardDollyRate=null!=e?e:15}get keyboardDollyRate(){return this._configs.keyboardDollyRate}set touchDollyRate(e){this._configs.touchDollyRate=null!=e?e:.2}get touchDollyRate(){return this._configs.touchDollyRate}set mouseWheelDollyRate(e){this._configs.mouseWheelDollyRate=null!=e?e:100}get mouseWheelDollyRate(){return this._configs.mouseWheelDollyRate}set dollyInertia(e){this._configs.dollyInertia=null!=e?e:0}get dollyInertia(){return this._configs.dollyInertia}set dollyProximityThreshold(e){this._configs.dollyProximityThreshold=null!=e?e:35}get dollyProximityThreshold(){return this._configs.dollyProximityThreshold}set dollyMinSpeed(e){this._configs.dollyMinSpeed=null!=e?e:.04}get dollyMinSpeed(){return this._configs.dollyMinSpeed}set panInertia(e){this._configs.panInertia=null!=e?e:.5}get panInertia(){return this._configs.panInertia}set keyboardLayout(e){"qwerty"!==(e=e||"qwerty")&&"azerty"!==e&&(this.error("Unsupported value for keyboardLayout - defaulting to 'qwerty'"),e="qwerty"),this._configs.keyboardLayout=e,this.keyMap=this._configs.keyboardLayout}get keyboardLayout(){return this._configs.keyboardLayout}set smartPivot(e){this._configs.smartPivot=!1!==e}get smartPivot(){return this._configs.smartPivot}set doubleClickTimeFrame(e){this._configs.doubleClickTimeFrame=null!=e?e:250}get doubleClickTimeFrame(){return this._configs.doubleClickTimeFrame}destroy(){this._destroyHandlers(),this._destroyControllers(),this._cameraUpdater.destroy(),super.destroy()}_destroyHandlers(){for(let e=0,t=this._handlers.length;e<t;e++){const t=this._handlers[e];t.destroy&&t.destroy()}}_destroyControllers(){for(let e=0,t=this._controllers.length;e<t;e++){const t=this._controllers[e];t.destroy&&t.destroy()}}}class Qc{constructor(e){this.id=e.id,this.projectId=e.projectId,this.revisionId=e.revisionId,this.author=e.author,this.createdAt=e.createdAt,this.creatingApplication=e.creatingApplication,this.schema=e.schema,this.metaScene=e.metaScene,this.propertySets=[],this.rootMetaObject=null,this.rootMetaObjects=[],this.metaObjects=[],this.graph=e.graph||{}}getJSON(){const e=[];!function t(s){const i={id:s.id,extId:s.extId,type:s.type,name:s.name};s.parent&&(i.parent=s.parent.id),e.push(i);const r=s.children;if(r)for(let e=0,s=r.length;e<s;e++)t(r[e])}(this.rootMetaObject);return{id:this.id,projectId:this.projectId,revisionId:this.revisionId,metaObjects:e}}}class Wc{constructor(e){this.metaModel=null,this.metaModels=[],this.id=e.id,this.parentId=e.parentId,this.parent=null,this.originalSystemId=e.originalSystemId,this.name=e.name,this.type=e.type,this.propertySetIds=e.propertySetIds,this.propertySets=[]}getObjectIDsInSubtree(){const e=[];return function t(s){if(!s)return;e.push(s.id);const i=s.children;if(i)for(var r=0,o=i.length;r<o;r++)t(i[r])}(this),e}withMetaObjectsInSubtree(e){!function t(s){if(!s)return;e(s);const i=s.children;if(i)for(var r=0,o=i.length;r<o;r++)t(i[r])}(this)}getObjectIDsInSubtreeByType(e){const t={};for(var s=0,i=e.length;s<i;s++)t[e[s]]=e[s];const r=[];return function e(s){if(!s)return;t[s.type]&&r.push(s.id);const i=s.children;if(i)for(var o=0,n=i.length;o<n;o++)e(i[o])}(this),r}getJSON(){var e={id:this.id,type:this.type,name:this.name};return this.parent&&(e.parent=this.parent.id),e}}class zc{constructor(e,t,s,i,r){this.name=e,this.type=s,this.value=t,this.valueType=i,this.description=r}}class Kc{constructor(e){if(this.id=e.id,this.originalSystemId=e.originalSystemId,this.metaModels=[],this.name=e.name,this.type=e.type,this.properties=[],e.properties){const t=e.properties;for(let e=0,s=t.length;e<s;e++){const s=t[e];this.properties.push(new zc(s.name,s.value,s.type,s.valueType,s.description))}}}}class Yc{constructor(e,t){this.viewer=e,this.scene=t,this.metaModels={},this.propertySets={},this.metaObjects={},this.metaObjectsByType={},this.rootMetaObjects={},this._eventSubs={}}on(e,t){let s=this._eventSubs[e];s||(s=[],this._eventSubs[e]=s),s.push(t)}fire(e,t){const s=this._eventSubs[e];if(s)for(let e=0,i=s.length;e<i;e++)s[e](t)}off(e){}createMetaModel(e,t,s={}){this._globalizeIDs(e,t,s);const i=new Qc({metaScene:this,id:e,projectId:t.projectId||"none",revisionId:t.revisionId||"none",author:t.author||"none",createdAt:t.createdAt||"none",creatingApplication:t.creatingApplication||"none",schema:t.schema||"none",propertySets:[]});if(this.metaModels[e]=i,t.propertySets)for(let e=0,s=t.propertySets.length;e<s;e++){const s=t.propertySets[e];let r=this.propertySets[s.id];r||(r=new Kc({id:s.id,originalSystemId:s.originalSystemId,type:s.type,name:s.name,properties:s.properties}),this.propertySets[r.id]=r),r.metaModels.push(i),i.propertySets.push(r)}if(t.metaObjects)for(let e=0,s=t.metaObjects.length;e<s;e++){const s=t.metaObjects[e],r=s.type,o=s.id,n=s.propertySets||s.propertySetIds;let a=this.metaObjects[o];a||(a=new Wc({id:o,parentId:s.parent,type:r,name:s.name,propertySetIds:n}),this.metaObjects[o]=a),a.metaModels.push(i),s.parent||(i.rootMetaObjects.push(a),this.rootMetaObjects[o]=a),i.metaObjects.push(a)}for(let e in this.metaObjects){const t=this.metaObjects[e];if(t.children&&(t.children=[]),t.propertySets&&(t.propertySets=[]),t.propertySetIds)for(let e=0,s=t.propertySetIds.length;e<s;e++){const s=t.propertySetIds[e],i=this.propertySets[s];t.propertySets.push(i)}}for(let e in this.metaObjects){const t=this.metaObjects[e];if(t.parentId){const e=this.metaObjects[t.parentId];e&&(t.parent=e,(e.children||(e.children=[])).push(t))}}this.metaObjectsByType={};for(let e in this.metaObjects){const t=this.metaObjects[e],s=t.type;(this.metaObjectsByType[s]||(this.metaObjectsByType[s]={}))[e]=t}return this.fire("metaModelCreated",e),i}_globalizeIDs(e,t,s){const i=!!s.globalizeObjectIds;if(t.metaObjects)for(let s=0,r=t.metaObjects.length;s<r;s++){const r=t.metaObjects[s];if(r.originalSystemId=r.id,r.originalParentSystemId=r.parent,i&&(r.id=p.globalizeObjectId(e,r.id),r.parent=p.globalizeObjectId(e,r.parent)),i){const t=r.propertySetIds;if(t){const s=[];for(let i=0,r=t.length;i<r;i++)s.push(p.globalizeObjectId(e,t[i]));r.propertySetIds=s,r.originalSystemPropertySetIds=t}}else r.originalSystemPropertySetIds=r.propertySetIds}if(t.propertySets)for(let s=0,r=t.propertySets.length;s<r;s++){const r=t.propertySets[s];r.originalSystemId=r.id,i&&(r.id=p.globalizeObjectId(e,r.id))}}destroyMetaModel(e){const t=this.metaModels[e];if(t){if(t.propertySets)for(let s=0,i=t.propertySets.length;s<i;s++){const i=t.propertySets[s];if(1===i.metaModels.length)delete this.propertySets[i.id];else{const t=[];for(let r=0,o=i.metaModels.length;r<o;r++)i.metaModels[s].id!==e&&t.push(i.metaModels[s]);i.metaModels=t}}if(t.metaObjects)for(let e=0,s=t.metaObjects.length;e<s;e++){const s=t.metaObjects[e];s.type;const i=s.id;if(1===s.metaModels.length)delete this.metaObjects[i],s.parent||delete this.rootMetaObjects[i];else{const e=[],i=t.id;for(let t=0,r=s.metaModels.length;t<r;t++)s.metaModels[t].id!==i&&e.push(s.metaModels[t]);s.metaModels=e}}for(let e in this.metaObjects){const t=this.metaObjects[e];if(t.children&&(t.children=[]),t.propertySets&&(t.propertySets=[]),t.propertySetIds)for(let e=0,s=t.propertySetIds.length;e<s;e++){const s=t.propertySetIds[e],i=this.propertySets[s];t.propertySets.push(i)}}this.metaObjectsByType={};for(let e in this.metaObjects){const t=this.metaObjects[e],s=t.type;t.children&&(t.children=null),(this.metaObjectsByType[s]||(this.metaObjectsByType[s]={}))[e]=t}for(let e in this.metaObjects){const t=this.metaObjects[e];if(t.parentId){const e=this.metaObjects[t.parentId];e&&(t.parent=e,(e.children||(e.children=[])).push(t))}}delete this.metaModels[e],this.fire("metaModelDestroyed",e)}}getObjectIDsByType(e){const t=this.metaObjectsByType[e];return t?Object.keys(t):[]}getObjectIDsInSubtree(e,t,s){const i=[],r=this.metaObjects[e],o=t&&t.length>0?Xc(t):null,n=s&&s.length>0?Xc(s):null,a=e=>{if(!e)return;var t=!0;(n&&n[e.type]||o&&!o[e.type])&&(t=!1),t&&i.push(e.id);const s=e.children;if(s)for(var r=0,l=s.length;r<l;r++)a(s[r])};return a(r),i}withMetaObjectsInSubtree(e,t){const s=this.metaObjects[e];s&&s.withMetaObjectsInSubtree(t)}}function Xc(e){const t={};for(var s=0,i=e.length;s<i;s++)t[e[s]]=!0;return t}
/*!
   * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
   * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
   * Released under MIT License
   */
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Zc=function(e,t){return Zc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])},Zc(e,t)};function qc(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function s(){this.constructor=e}Zc(e,t),e.prototype=null===t?Object.create(t):(s.prototype=t.prototype,new s)}var Jc=function(){return Jc=Object.assign||function(e){for(var t,s=1,i=arguments.length;s<i;s++)for(var r in t=arguments[s])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},Jc.apply(this,arguments)};function $c(e,t,s,i){return new(s||(s=Promise))((function(r,o){function n(e){try{l(i.next(e))}catch(e){o(e)}}function a(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(n,a)}l((i=i.apply(e,t||[])).next())}))}function eu(e,t){var s,i,r,o,n={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(s)throw new TypeError("Generator is already executing.");for(;n;)try{if(s=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return n.label++,{value:o[1],done:!1};case 5:n.label++,i=o[1],o=[0];continue;case 7:o=n.ops.pop(),n.trys.pop();continue;default:if(!(r=n.trys,(r=r.length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){n=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){n.label=o[1];break}if(6===o[0]&&n.label<r[1]){n.label=r[1],r=o;break}if(r&&n.label<r[2]){n.label=r[2],n.ops.push(o);break}r[2]&&n.ops.pop(),n.trys.pop();continue}o=t.call(e,n)}catch(e){o=[6,e],i=0}finally{s=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function tu(e,t,s){if(s||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||t)}for(var su=function(){function e(e,t,s,i){this.left=e,this.top=t,this.width=s,this.height=i}return e.prototype.add=function(t,s,i,r){return new e(this.left+t,this.top+s,this.width+i,this.height+r)},e.fromClientRect=function(t,s){return new e(s.left+t.windowBounds.left,s.top+t.windowBounds.top,s.width,s.height)},e.fromDOMRectList=function(t,s){var i=Array.from(s).find((function(e){return 0!==e.width}));return i?new e(i.left+t.windowBounds.left,i.top+t.windowBounds.top,i.width,i.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),iu=function(e,t){return su.fromClientRect(e,t.getBoundingClientRect())},ru=function(e){for(var t=[],s=0,i=e.length;s<i;){var r=e.charCodeAt(s++);if(r>=55296&&r<=56319&&s<i){var o=e.charCodeAt(s++);56320==(64512&o)?t.push(((1023&r)<<10)+(1023&o)+65536):(t.push(r),s--)}else t.push(r)}return t},ou=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var s=e.length;if(!s)return"";for(var i=[],r=-1,o="";++r<s;){var n=e[r];n<=65535?i.push(n):(n-=65536,i.push(55296+(n>>10),n%1024+56320)),(r+1===s||i.length>16384)&&(o+=String.fromCharCode.apply(String,i),i.length=0)}return o},nu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",au="undefined"==typeof Uint8Array?[]:new Uint8Array(256),lu=0;lu<nu.length;lu++)au[nu.charCodeAt(lu)]=lu;for(var hu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",cu="undefined"==typeof Uint8Array?[]:new Uint8Array(256),uu=0;uu<hu.length;uu++)cu[hu.charCodeAt(uu)]=uu;for(var Au=function(e,t,s){return e.slice?e.slice(t,s):new Uint16Array(Array.prototype.slice.call(e,t,s))},pu=function(){function e(e,t,s,i,r,o){this.initialValue=e,this.errorValue=t,this.highStart=s,this.highValueIndex=i,this.index=r,this.data=o}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>5])<<2)+(31&e),this.data[t];if(e<=65535)return t=((t=this.index[2048+(e-55296>>5)])<<2)+(31&e),this.data[t];if(e<this.highStart)return t=2080+(e>>11),t=this.index[t],t+=e>>5&63,t=((t=this.index[t])<<2)+(31&e),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),du="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fu="undefined"==typeof Uint8Array?[]:new Uint8Array(256),mu=0;mu<du.length;mu++)fu[du.charCodeAt(mu)]=mu;var gu=10,yu=13,Eu=15,vu=17,_u=18,Iu=19,Tu=20,Pu=21,Du=22,bu=24,Ru=25,Cu=26,xu=27,Nu=28,Ou=30,Su=32,wu=33,Mu=34,Bu=35,Fu=37,Lu=38,Uu=39,Hu=40,Gu=42,Vu=[9001,65288],ku="×",ju="÷",Qu=function(e,t){var s,i,r,o=function(e){var t,s,i,r,o,n=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(n--,"="===e[e.length-2]&&n--);var h="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(n):new Array(n),c=Array.isArray(h)?h:new Uint8Array(h);for(t=0;t<a;t+=4)s=cu[e.charCodeAt(t)],i=cu[e.charCodeAt(t+1)],r=cu[e.charCodeAt(t+2)],o=cu[e.charCodeAt(t+3)],c[l++]=s<<2|i>>4,c[l++]=(15&i)<<4|r>>2,c[l++]=(3&r)<<6|63&o;return h}(e),n=Array.isArray(o)?function(e){for(var t=e.length,s=[],i=0;i<t;i+=4)s.push(e[i+3]<<24|e[i+2]<<16|e[i+1]<<8|e[i]);return s}(o):new Uint32Array(o),a=Array.isArray(o)?function(e){for(var t=e.length,s=[],i=0;i<t;i+=2)s.push(e[i+1]<<8|e[i]);return s}(o):new Uint16Array(o),l=Au(a,12,n[4]/2),h=2===n[5]?Au(a,(24+n[4])/2):(s=n,i=Math.ceil((24+n[4])/4),s.slice?s.slice(i,r):new Uint32Array(Array.prototype.slice.call(s,i,r)));return new pu(n[0],n[1],n[2],n[3],l,h)}("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),Wu=[Ou,36],zu=[1,2,3,5],Ku=[gu,8],Yu=[xu,Cu],Xu=zu.concat(Ku),Zu=[Lu,Uu,Hu,Mu,Bu],qu=[Eu,yu],Ju=function(e,t,s,i){var r=i[s];if(Array.isArray(e)?-1!==e.indexOf(r):e===r)for(var o=s;o<=i.length;){if((l=i[++o])===t)return!0;if(l!==gu)break}if(r===gu)for(o=s;o>0;){var n=i[--o];if(Array.isArray(e)?-1!==e.indexOf(n):e===n)for(var a=s;a<=i.length;){var l;if((l=i[++a])===t)return!0;if(l!==gu)break}if(n!==gu)break}return!1},$u=function(e,t){for(var s=e;s>=0;){var i=t[s];if(i!==gu)return i;s--}return 0},eA=function(e,t,s,i,r){if(0===s[i])return ku;var o=i-1;if(Array.isArray(r)&&!0===r[o])return ku;var n=o-1,a=o+1,l=t[o],h=n>=0?t[n]:0,c=t[a];if(2===l&&3===c)return ku;if(-1!==zu.indexOf(l))return"!";if(-1!==zu.indexOf(c))return ku;if(-1!==Ku.indexOf(c))return ku;if(8===$u(o,t))return ju;if(11===Qu.get(e[o]))return ku;if((l===Su||l===wu)&&11===Qu.get(e[a]))return ku;if(7===l||7===c)return ku;if(9===l)return ku;if(-1===[gu,yu,Eu].indexOf(l)&&9===c)return ku;if(-1!==[vu,_u,Iu,bu,Nu].indexOf(c))return ku;if($u(o,t)===Du)return ku;if(Ju(23,Du,o,t))return ku;if(Ju([vu,_u],Pu,o,t))return ku;if(Ju(12,12,o,t))return ku;if(l===gu)return ju;if(23===l||23===c)return ku;if(16===c||16===l)return ju;if(-1!==[yu,Eu,Pu].indexOf(c)||14===l)return ku;if(36===h&&-1!==qu.indexOf(l))return ku;if(l===Nu&&36===c)return ku;if(c===Tu)return ku;if(-1!==Wu.indexOf(c)&&l===Ru||-1!==Wu.indexOf(l)&&c===Ru)return ku;if(l===xu&&-1!==[Fu,Su,wu].indexOf(c)||-1!==[Fu,Su,wu].indexOf(l)&&c===Cu)return ku;if(-1!==Wu.indexOf(l)&&-1!==Yu.indexOf(c)||-1!==Yu.indexOf(l)&&-1!==Wu.indexOf(c))return ku;if(-1!==[xu,Cu].indexOf(l)&&(c===Ru||-1!==[Du,Eu].indexOf(c)&&t[a+1]===Ru)||-1!==[Du,Eu].indexOf(l)&&c===Ru||l===Ru&&-1!==[Ru,Nu,bu].indexOf(c))return ku;if(-1!==[Ru,Nu,bu,vu,_u].indexOf(c))for(var u=o;u>=0;){if((A=t[u])===Ru)return ku;if(-1===[Nu,bu].indexOf(A))break;u--}if(-1!==[xu,Cu].indexOf(c))for(u=-1!==[vu,_u].indexOf(l)?n:o;u>=0;){var A;if((A=t[u])===Ru)return ku;if(-1===[Nu,bu].indexOf(A))break;u--}if(Lu===l&&-1!==[Lu,Uu,Mu,Bu].indexOf(c)||-1!==[Uu,Mu].indexOf(l)&&-1!==[Uu,Hu].indexOf(c)||-1!==[Hu,Bu].indexOf(l)&&c===Hu)return ku;if(-1!==Zu.indexOf(l)&&-1!==[Tu,Cu].indexOf(c)||-1!==Zu.indexOf(c)&&l===xu)return ku;if(-1!==Wu.indexOf(l)&&-1!==Wu.indexOf(c))return ku;if(l===bu&&-1!==Wu.indexOf(c))return ku;if(-1!==Wu.concat(Ru).indexOf(l)&&c===Du&&-1===Vu.indexOf(e[a])||-1!==Wu.concat(Ru).indexOf(c)&&l===_u)return ku;if(41===l&&41===c){for(var p=s[o],d=1;p>0&&41===t[--p];)d++;if(d%2!=0)return ku}return l===Su&&c===wu?ku:ju},tA=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var s=function(e,t){void 0===t&&(t="strict");var s=[],i=[],r=[];return e.forEach((function(e,o){var n=Qu.get(e);if(n>50?(r.push(!0),n-=50):r.push(!1),-1!==["normal","auto","loose"].indexOf(t)&&-1!==[8208,8211,12316,12448].indexOf(e))return i.push(o),s.push(16);if(4===n||11===n){if(0===o)return i.push(o),s.push(Ou);var a=s[o-1];return-1===Xu.indexOf(a)?(i.push(i[o-1]),s.push(a)):(i.push(o),s.push(Ou))}return i.push(o),31===n?s.push("strict"===t?Pu:Fu):n===Gu||29===n?s.push(Ou):43===n?e>=131072&&e<=196605||e>=196608&&e<=262141?s.push(Fu):s.push(Ou):void s.push(n)})),[i,s,r]}(e,t.lineBreak),i=s[0],r=s[1],o=s[2];"break-all"!==t.wordBreak&&"break-word"!==t.wordBreak||(r=r.map((function(e){return-1!==[Ru,Ou,Gu].indexOf(e)?Fu:e})));var n="keep-all"===t.wordBreak?o.map((function(t,s){return t&&e[s]>=19968&&e[s]<=40959})):void 0;return[i,r,n]},sA=function(){function e(e,t,s,i){this.codePoints=e,this.required="!"===t,this.start=s,this.end=i}return e.prototype.slice=function(){return ou.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),iA=45,rA=43,oA=-1,nA=function(e){return e>=48&&e<=57},aA=function(e){return nA(e)||e>=65&&e<=70||e>=97&&e<=102},lA=function(e){return 10===e||9===e||32===e},hA=function(e){return function(e){return function(e){return e>=97&&e<=122}(e)||function(e){return e>=65&&e<=90}(e)}(e)||function(e){return e>=128}(e)||95===e},cA=function(e){return hA(e)||nA(e)||e===iA},uA=function(e){return e>=0&&e<=8||11===e||e>=14&&e<=31||127===e},AA=function(e,t){return 92===e&&10!==t},pA=function(e,t,s){return e===iA?hA(t)||AA(t,s):!!hA(e)||!(92!==e||!AA(e,t))},dA=function(e,t,s){return e===rA||e===iA?!!nA(t)||46===t&&nA(s):nA(46===e?t:e)},fA=function(e){var t=0,s=1;e[t]!==rA&&e[t]!==iA||(e[t]===iA&&(s=-1),t++);for(var i=[];nA(e[t]);)i.push(e[t++]);var r=i.length?parseInt(ou.apply(void 0,i),10):0;46===e[t]&&t++;for(var o=[];nA(e[t]);)o.push(e[t++]);var n=o.length,a=n?parseInt(ou.apply(void 0,o),10):0;69!==e[t]&&101!==e[t]||t++;var l=1;e[t]!==rA&&e[t]!==iA||(e[t]===iA&&(l=-1),t++);for(var h=[];nA(e[t]);)h.push(e[t++]);var c=h.length?parseInt(ou.apply(void 0,h),10):0;return s*(r+a*Math.pow(10,-n))*Math.pow(10,l*c)},mA={type:2},gA={type:3},yA={type:4},EA={type:13},vA={type:8},_A={type:21},IA={type:9},TA={type:10},PA={type:11},DA={type:12},bA={type:14},RA={type:23},CA={type:1},xA={type:25},NA={type:24},OA={type:26},SA={type:27},wA={type:28},MA={type:29},BA={type:31},FA={type:32},LA=function(){function e(){this._value=[]}return e.prototype.write=function(e){this._value=this._value.concat(ru(e))},e.prototype.read=function(){for(var e=[],t=this.consumeToken();t!==FA;)e.push(t),t=this.consumeToken();return e},e.prototype.consumeToken=function(){var e=this.consumeCodePoint();switch(e){case 34:return this.consumeStringToken(34);case 35:var t=this.peekCodePoint(0),s=this.peekCodePoint(1),i=this.peekCodePoint(2);if(cA(t)||AA(s,i)){var r=pA(t,s,i)?2:1;return{type:5,value:this.consumeName(),flags:r}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),EA;break;case 39:return this.consumeStringToken(39);case 40:return mA;case 41:return gA;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),bA;break;case rA:if(dA(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case 44:return yA;case iA:var o=e,n=this.peekCodePoint(0),a=this.peekCodePoint(1);if(dA(o,n,a))return this.reconsumeCodePoint(e),this.consumeNumericToken();if(pA(o,n,a))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();if(n===iA&&62===a)return this.consumeCodePoint(),this.consumeCodePoint(),NA;break;case 46:if(dA(e,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(e),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var l=this.consumeCodePoint();if(42===l&&47===(l=this.consumeCodePoint()))return this.consumeToken();if(l===oA)return this.consumeToken()}break;case 58:return OA;case 59:return SA;case 60:if(33===this.peekCodePoint(0)&&this.peekCodePoint(1)===iA&&this.peekCodePoint(2)===iA)return this.consumeCodePoint(),this.consumeCodePoint(),xA;break;case 64:var h=this.peekCodePoint(0),c=this.peekCodePoint(1),u=this.peekCodePoint(2);if(pA(h,c,u))return{type:7,value:this.consumeName()};break;case 91:return wA;case 92:if(AA(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),this.consumeIdentLikeToken();break;case 93:return MA;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),vA;break;case 123:return PA;case 125:return DA;case 117:case 85:var A=this.peekCodePoint(0),p=this.peekCodePoint(1);return A!==rA||!aA(p)&&63!==p||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(e),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),IA;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),_A;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),TA;break;case oA:return FA}return lA(e)?(this.consumeWhiteSpace(),BA):nA(e)?(this.reconsumeCodePoint(e),this.consumeNumericToken()):hA(e)?(this.reconsumeCodePoint(e),this.consumeIdentLikeToken()):{type:6,value:ou(e)}},e.prototype.consumeCodePoint=function(){var e=this._value.shift();return void 0===e?-1:e},e.prototype.reconsumeCodePoint=function(e){this._value.unshift(e)},e.prototype.peekCodePoint=function(e){return e>=this._value.length?-1:this._value[e]},e.prototype.consumeUnicodeRangeToken=function(){for(var e=[],t=this.consumeCodePoint();aA(t)&&e.length<6;)e.push(t),t=this.consumeCodePoint();for(var s=!1;63===t&&e.length<6;)e.push(t),t=this.consumeCodePoint(),s=!0;if(s)return{type:30,start:parseInt(ou.apply(void 0,e.map((function(e){return 63===e?48:e}))),16),end:parseInt(ou.apply(void 0,e.map((function(e){return 63===e?70:e}))),16)};var i=parseInt(ou.apply(void 0,e),16);if(this.peekCodePoint(0)===iA&&aA(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var r=[];aA(t)&&r.length<6;)r.push(t),t=this.consumeCodePoint();return{type:30,start:i,end:parseInt(ou.apply(void 0,r),16)}}return{type:30,start:i,end:i}},e.prototype.consumeIdentLikeToken=function(){var e=this.consumeName();return"url"===e.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:19,value:e}):{type:20,value:e}},e.prototype.consumeUrlToken=function(){var e=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===oA)return{type:22,value:""};var t=this.peekCodePoint(0);if(39===t||34===t){var s=this.consumeStringToken(this.consumeCodePoint());return 0===s.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===oA||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:22,value:s.value}):(this.consumeBadUrlRemnants(),RA)}for(;;){var i=this.consumeCodePoint();if(i===oA||41===i)return{type:22,value:ou.apply(void 0,e)};if(lA(i))return this.consumeWhiteSpace(),this.peekCodePoint(0)===oA||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:22,value:ou.apply(void 0,e)}):(this.consumeBadUrlRemnants(),RA);if(34===i||39===i||40===i||uA(i))return this.consumeBadUrlRemnants(),RA;if(92===i){if(!AA(i,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),RA;e.push(this.consumeEscapedCodePoint())}else e.push(i)}},e.prototype.consumeWhiteSpace=function(){for(;lA(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var e=this.consumeCodePoint();if(41===e||e===oA)return;AA(e,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(e){for(var t="";e>0;){var s=Math.min(5e4,e);t+=ou.apply(void 0,this._value.splice(0,s)),e-=s}return this._value.shift(),t},e.prototype.consumeStringToken=function(e){for(var t="",s=0;;){var i=this._value[s];if(i===oA||void 0===i||i===e)return{type:0,value:t+=this.consumeStringSlice(s)};if(10===i)return this._value.splice(0,s),CA;if(92===i){var r=this._value[s+1];r!==oA&&void 0!==r&&(10===r?(t+=this.consumeStringSlice(s),s=-1,this._value.shift()):AA(i,r)&&(t+=this.consumeStringSlice(s),t+=ou(this.consumeEscapedCodePoint()),s=-1))}s++}},e.prototype.consumeNumber=function(){var e=[],t=4,s=this.peekCodePoint(0);for(s!==rA&&s!==iA||e.push(this.consumeCodePoint());nA(this.peekCodePoint(0));)e.push(this.consumeCodePoint());s=this.peekCodePoint(0);var i=this.peekCodePoint(1);if(46===s&&nA(i))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=8;nA(this.peekCodePoint(0));)e.push(this.consumeCodePoint());s=this.peekCodePoint(0),i=this.peekCodePoint(1);var r=this.peekCodePoint(2);if((69===s||101===s)&&((i===rA||i===iA)&&nA(r)||nA(i)))for(e.push(this.consumeCodePoint(),this.consumeCodePoint()),t=8;nA(this.peekCodePoint(0));)e.push(this.consumeCodePoint());return[fA(e),t]},e.prototype.consumeNumericToken=function(){var e=this.consumeNumber(),t=e[0],s=e[1],i=this.peekCodePoint(0),r=this.peekCodePoint(1),o=this.peekCodePoint(2);return pA(i,r,o)?{type:15,number:t,flags:s,unit:this.consumeName()}:37===i?(this.consumeCodePoint(),{type:16,number:t,flags:s}):{type:17,number:t,flags:s}},e.prototype.consumeEscapedCodePoint=function(){var e=this.consumeCodePoint();if(aA(e)){for(var t=ou(e);aA(this.peekCodePoint(0))&&t.length<6;)t+=ou(this.consumeCodePoint());lA(this.peekCodePoint(0))&&this.consumeCodePoint();var s=parseInt(t,16);return 0===s||function(e){return e>=55296&&e<=57343}(s)||s>1114111?65533:s}return e===oA?65533:e},e.prototype.consumeName=function(){for(var e="";;){var t=this.consumeCodePoint();if(cA(t))e+=ou(t);else{if(!AA(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),e;e+=ou(this.consumeEscapedCodePoint())}}},e}(),UA=function(){function e(e){this._tokens=e}return e.create=function(t){var s=new LA;return s.write(t),new e(s.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var e=this.consumeToken();31===e.type;)e=this.consumeToken();if(32===e.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(e);var t=this.consumeComponentValue();do{e=this.consumeToken()}while(31===e.type);if(32===e.type)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var e=[];;){var t=this.consumeComponentValue();if(32===t.type)return e;e.push(t),e.push()}},e.prototype.consumeComponentValue=function(){var e=this.consumeToken();switch(e.type){case 11:case 28:case 2:return this.consumeSimpleBlock(e.type);case 19:return this.consumeFunction(e)}return e},e.prototype.consumeSimpleBlock=function(e){for(var t={type:e,values:[]},s=this.consumeToken();;){if(32===s.type||KA(s,e))return t;this.reconsumeToken(s),t.values.push(this.consumeComponentValue()),s=this.consumeToken()}},e.prototype.consumeFunction=function(e){for(var t={name:e.value,values:[],type:18};;){var s=this.consumeToken();if(32===s.type||3===s.type)return t;this.reconsumeToken(s),t.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var e=this._tokens.shift();return void 0===e?FA:e},e.prototype.reconsumeToken=function(e){this._tokens.unshift(e)},e}(),HA=function(e){return 15===e.type},GA=function(e){return 17===e.type},VA=function(e){return 20===e.type},kA=function(e){return 0===e.type},jA=function(e,t){return VA(e)&&e.value===t},QA=function(e){return 31!==e.type},WA=function(e){return 31!==e.type&&4!==e.type},zA=function(e){var t=[],s=[];return e.forEach((function(e){if(4===e.type){if(0===s.length)throw new Error("Error parsing function args, zero tokens for arg");return t.push(s),void(s=[])}31!==e.type&&s.push(e)})),s.length&&t.push(s),t},KA=function(e,t){return 11===t&&12===e.type||(28===t&&29===e.type||2===t&&3===e.type)},YA=function(e){return 17===e.type||15===e.type},XA=function(e){return 16===e.type||YA(e)},ZA=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},qA={type:17,number:0,flags:4},JA={type:16,number:50,flags:4},$A={type:16,number:100,flags:4},ep=function(e,t,s){var i=e[0],r=e[1];return[tp(i,t),tp(void 0!==r?r:i,s)]},tp=function(e,t){if(16===e.type)return e.number/100*t;if(HA(e))switch(e.unit){case"rem":case"em":return 16*e.number;default:return e.number}return e.number},sp="grad",ip="turn",rp=function(e,t){if(15===t.type)switch(t.unit){case"deg":return Math.PI*t.number/180;case sp:return Math.PI/200*t.number;case"rad":return t.number;case ip:return 2*Math.PI*t.number}throw new Error("Unsupported angle type")},op=function(e){return 15===e.type&&("deg"===e.unit||e.unit===sp||"rad"===e.unit||e.unit===ip)},np=function(e){switch(e.filter(VA).map((function(e){return e.value})).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[qA,qA];case"to top":case"bottom":return ap(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[qA,$A];case"to right":case"left":return ap(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[$A,$A];case"to bottom":case"top":return ap(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[$A,qA];case"to left":case"right":return ap(270)}return 0},ap=function(e){return Math.PI*e/180},lp=function(e,t){if(18===t.type){var s=mp[t.name];if(void 0===s)throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return s(e,t.values)}if(5===t.type){if(3===t.value.length){var i=t.value.substring(0,1),r=t.value.substring(1,2),o=t.value.substring(2,3);return up(parseInt(i+i,16),parseInt(r+r,16),parseInt(o+o,16),1)}if(4===t.value.length){i=t.value.substring(0,1),r=t.value.substring(1,2),o=t.value.substring(2,3);var n=t.value.substring(3,4);return up(parseInt(i+i,16),parseInt(r+r,16),parseInt(o+o,16),parseInt(n+n,16)/255)}if(6===t.value.length){i=t.value.substring(0,2),r=t.value.substring(2,4),o=t.value.substring(4,6);return up(parseInt(i,16),parseInt(r,16),parseInt(o,16),1)}if(8===t.value.length){i=t.value.substring(0,2),r=t.value.substring(2,4),o=t.value.substring(4,6),n=t.value.substring(6,8);return up(parseInt(i,16),parseInt(r,16),parseInt(o,16),parseInt(n,16)/255)}}if(20===t.type){var a=yp[t.value.toUpperCase()];if(void 0!==a)return a}return yp.TRANSPARENT},hp=function(e){return 0==(255&e)},cp=function(e){var t=255&e,s=255&e>>8,i=255&e>>16,r=255&e>>24;return t<255?"rgba("+r+","+i+","+s+","+t/255+")":"rgb("+r+","+i+","+s+")"},up=function(e,t,s,i){return(e<<24|t<<16|s<<8|Math.round(255*i)<<0)>>>0},Ap=function(e,t){if(17===e.type)return e.number;if(16===e.type){var s=3===t?1:255;return 3===t?e.number/100*s:Math.round(e.number/100*s)}return 0},pp=function(e,t){var s=t.filter(WA);if(3===s.length){var i=s.map(Ap),r=i[0],o=i[1],n=i[2];return up(r,o,n,1)}if(4===s.length){var a=s.map(Ap),l=(r=a[0],o=a[1],n=a[2],a[3]);return up(r,o,n,l)}return 0};function dp(e,t,s){return s<0&&(s+=1),s>=1&&(s-=1),s<1/6?(t-e)*s*6+e:s<.5?t:s<2/3?6*(t-e)*(2/3-s)+e:e}var fp=function(e,t){var s=t.filter(WA),i=s[0],r=s[1],o=s[2],n=s[3],a=(17===i.type?ap(i.number):rp(e,i))/(2*Math.PI),l=XA(r)?r.number/100:0,h=XA(o)?o.number/100:0,c=void 0!==n&&XA(n)?tp(n,1):1;if(0===l)return up(255*h,255*h,255*h,1);var u=h<=.5?h*(l+1):h+l-h*l,A=2*h-u,p=dp(A,u,a+1/3),d=dp(A,u,a),f=dp(A,u,a-1/3);return up(255*p,255*d,255*f,c)},mp={hsl:fp,hsla:fp,rgb:pp,rgba:pp},gp=function(e,t){return lp(e,UA.create(t).parseComponentValue())},yp={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Ep={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map((function(e){if(VA(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},vp={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},_p=function(e,t){var s=lp(e,t[0]),i=t[1];return i&&XA(i)?{color:s,stop:i}:{color:s,stop:null}},Ip=function(e,t){var s=e[0],i=e[e.length-1];null===s.stop&&(s.stop=qA),null===i.stop&&(i.stop=$A);for(var r=[],o=0,n=0;n<e.length;n++){var a=e[n].stop;if(null!==a){var l=tp(a,t);l>o?r.push(l):r.push(o),o=l}else r.push(null)}var h=null;for(n=0;n<r.length;n++){var c=r[n];if(null===c)null===h&&(h=n);else if(null!==h){for(var u=n-h,A=(c-r[h-1])/(u+1),p=1;p<=u;p++)r[h+p-1]=A*p;h=null}}return e.map((function(e,s){return{color:e.color,stop:Math.max(Math.min(1,r[s]/t),0)}}))},Tp=function(e,t,s){var i="number"==typeof e?e:function(e,t,s){var i=t/2,r=s/2,o=tp(e[0],t)-i,n=r-tp(e[1],s);return(Math.atan2(n,o)+2*Math.PI)%(2*Math.PI)}(e,t,s),r=Math.abs(t*Math.sin(i))+Math.abs(s*Math.cos(i)),o=t/2,n=s/2,a=r/2,l=Math.sin(i-Math.PI/2)*a,h=Math.cos(i-Math.PI/2)*a;return[r,o-h,o+h,n-l,n+l]},Pp=function(e,t){return Math.sqrt(e*e+t*t)},Dp=function(e,t,s,i,r){return[[0,0],[0,t],[e,0],[e,t]].reduce((function(e,t){var o=t[0],n=t[1],a=Pp(s-o,i-n);return(r?a<e.optimumDistance:a>e.optimumDistance)?{optimumCorner:t,optimumDistance:a}:e}),{optimumDistance:r?1/0:-1/0,optimumCorner:null}).optimumCorner},bp=function(e,t){var s=ap(180),i=[];return zA(t).forEach((function(t,r){if(0===r){var o=t[0];if(20===o.type&&-1!==["top","left","right","bottom"].indexOf(o.value))return void(s=np(t));if(op(o))return void(s=(rp(e,o)+ap(270))%ap(360))}var n=_p(e,t);i.push(n)})),{angle:s,stops:i,type:1}},Rp="closest-side",Cp="farthest-side",xp="closest-corner",Np="farthest-corner",Op="circle",Sp="ellipse",wp="cover",Mp="contain",Bp=function(e,t){var s=0,i=3,r=[],o=[];return zA(t).forEach((function(t,n){var a=!0;if(0===n?a=t.reduce((function(e,t){if(VA(t))switch(t.value){case"center":return o.push(JA),!1;case"top":case"left":return o.push(qA),!1;case"right":case"bottom":return o.push($A),!1}else if(XA(t)||YA(t))return o.push(t),!1;return e}),a):1===n&&(a=t.reduce((function(e,t){if(VA(t))switch(t.value){case Op:return s=0,!1;case Sp:return s=1,!1;case Mp:case Rp:return i=0,!1;case Cp:return i=1,!1;case xp:return i=2,!1;case wp:case Np:return i=3,!1}else if(YA(t)||XA(t))return Array.isArray(i)||(i=[]),i.push(t),!1;return e}),a)),a){var l=_p(e,t);r.push(l)}})),{size:i,shape:s,stops:r,position:o,type:2}},Fp=function(e,t){if(22===t.type){var s={url:t.value,type:0};return e.cache.addImage(t.value),s}if(18===t.type){var i=Up[t.name];if(void 0===i)throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return i(e,t.values)}throw new Error("Unsupported image type "+t.type)};var Lp,Up={"linear-gradient":function(e,t){var s=ap(180),i=[];return zA(t).forEach((function(t,r){if(0===r){var o=t[0];if(20===o.type&&"to"===o.value)return void(s=np(t));if(op(o))return void(s=rp(e,o))}var n=_p(e,t);i.push(n)})),{angle:s,stops:i,type:1}},"-moz-linear-gradient":bp,"-ms-linear-gradient":bp,"-o-linear-gradient":bp,"-webkit-linear-gradient":bp,"radial-gradient":function(e,t){var s=0,i=3,r=[],o=[];return zA(t).forEach((function(t,n){var a=!0;if(0===n){var l=!1;a=t.reduce((function(e,t){if(l)if(VA(t))switch(t.value){case"center":return o.push(JA),e;case"top":case"left":return o.push(qA),e;case"right":case"bottom":return o.push($A),e}else(XA(t)||YA(t))&&o.push(t);else if(VA(t))switch(t.value){case Op:return s=0,!1;case Sp:return s=1,!1;case"at":return l=!0,!1;case Rp:return i=0,!1;case wp:case Cp:return i=1,!1;case Mp:case xp:return i=2,!1;case Np:return i=3,!1}else if(YA(t)||XA(t))return Array.isArray(i)||(i=[]),i.push(t),!1;return e}),a)}if(a){var h=_p(e,t);r.push(h)}})),{size:i,shape:s,stops:r,position:o,type:2}},"-moz-radial-gradient":Bp,"-ms-radial-gradient":Bp,"-o-radial-gradient":Bp,"-webkit-radial-gradient":Bp,"-webkit-gradient":function(e,t){var s=ap(180),i=[],r=1;return zA(t).forEach((function(t,s){var o=t[0];if(0===s){if(VA(o)&&"linear"===o.value)return void(r=1);if(VA(o)&&"radial"===o.value)return void(r=2)}if(18===o.type)if("from"===o.name){var n=lp(e,o.values[0]);i.push({stop:qA,color:n})}else if("to"===o.name){n=lp(e,o.values[0]);i.push({stop:$A,color:n})}else if("color-stop"===o.name){var a=o.values.filter(WA);if(2===a.length){n=lp(e,a[1]);var l=a[0];GA(l)&&i.push({stop:{type:16,number:100*l.number,flags:l.flags},color:n})}}})),1===r?{angle:(s+ap(180))%ap(360),stops:i,type:r}:{size:3,shape:0,stops:i,position:[],type:r}}},Hp={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var s=t[0];return 20===s.type&&"none"===s.value?[]:t.filter((function(e){return WA(e)&&function(e){return!(20===e.type&&"none"===e.value||18===e.type&&!Up[e.name])}(e)})).map((function(t){return Fp(e,t)}))}},Gp={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map((function(e){if(VA(e))switch(e.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},Vp={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return zA(t).map((function(e){return e.filter(XA)})).map(ZA)}},kp={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return zA(t).map((function(e){return e.filter(VA).map((function(e){return e.value})).join(" ")})).map(jp)}},jp=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}};!function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"}(Lp||(Lp={}));var Qp,Wp={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return zA(t).map((function(e){return e.filter(zp)}))}},zp=function(e){return VA(e)||XA(e)},Kp=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Yp=Kp("top"),Xp=Kp("right"),Zp=Kp("bottom"),qp=Kp("left"),Jp=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(e,t){return ZA(t.filter(XA))}}},$p=Jp("top-left"),ed=Jp("top-right"),td=Jp("bottom-right"),sd=Jp("bottom-left"),id=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(e,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},rd=id("top"),od=id("right"),nd=id("bottom"),ad=id("left"),ld=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return HA(t)?t.number:0}}},hd=ld("top"),cd=ld("right"),ud=ld("bottom"),Ad=ld("left"),pd={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},dd={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){return"rtl"===t?1:0}},fd={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(VA).reduce((function(e,t){return e|md(t.value)}),0)}},md=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},gd={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},yd={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return 20===t.type&&"normal"===t.value?0:17===t.type||15===t.type?t.number:0}};!function(e){e.NORMAL="normal",e.STRICT="strict"}(Qp||(Qp={}));var Ed,vd={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"strict"===t?Qp.STRICT:Qp.NORMAL}},_d={name:"line-height",initialValue:"normal",prefix:!1,type:4},Id=function(e,t){return VA(e)&&"normal"===e.value?1.2*t:17===e.type?t*e.number:XA(e)?tp(e,t):t},Td={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return 20===t.type&&"none"===t.value?null:Fp(e,t)}},Pd={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){return"inside"===t?0:1}},Dd={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},bd=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},Rd=bd("top"),Cd=bd("right"),xd=bd("bottom"),Nd=bd("left"),Od={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(VA).map((function(e){switch(e.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}}))}},Sd={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){return"break-word"===t?"break-word":"normal"}},wd=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Md=wd("top"),Bd=wd("right"),Fd=wd("bottom"),Ld=wd("left"),Ud={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},Hd={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Gd={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&jA(t[0],"none")?[]:zA(t).map((function(t){for(var s={color:yp.TRANSPARENT,offsetX:qA,offsetY:qA,blur:qA},i=0,r=0;r<t.length;r++){var o=t[r];YA(o)?(0===i?s.offsetX=o:1===i?s.offsetY=o:s.blur=o,i++):s.color=lp(e,o)}return s}))}},Vd={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},kd={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(20===t.type&&"none"===t.value)return null;if(18===t.type){var s=jd[t.name];if(void 0===s)throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return s(t.values)}return null}},jd={matrix:function(e){var t=e.filter((function(e){return 17===e.type})).map((function(e){return e.number}));return 6===t.length?t:null},matrix3d:function(e){var t=e.filter((function(e){return 17===e.type})).map((function(e){return e.number})),s=t[0],i=t[1];t[2],t[3];var r=t[4],o=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var n=t[12],a=t[13];return t[14],t[15],16===t.length?[s,i,r,o,n,a]:null}},Qd={type:16,number:50,flags:4},Wd=[Qd,Qd],zd={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var s=t.filter(XA);return 2!==s.length?Wd:[s[0],s[1]]}},Kd={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;default:return 0}}};!function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"}(Ed||(Ed={}));for(var Yd={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return Ed.BREAK_ALL;case"keep-all":return Ed.KEEP_ALL;default:return Ed.NORMAL}}},Xd={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(20===t.type)return{auto:!0,order:0};if(GA(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},Zd=function(e,t){if(15===t.type)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")},qd={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return GA(t)?t.number:1}},Jd={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},$d={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(VA).map((function(e){switch(e.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0})).filter((function(e){return 0!==e}))}},ef={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var s=[],i=[];return t.forEach((function(e){switch(e.type){case 20:case 0:s.push(e.value);break;case 17:s.push(e.number.toString());break;case 4:i.push(s.join(" ")),s.length=0}})),s.length&&i.push(s.join(" ")),i.map((function(e){return-1===e.indexOf(" ")?e:"'"+e+"'"}))}},tf={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},sf={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){return GA(t)?t.number:VA(t)&&"bold"===t.value?700:400}},rf={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(VA).map((function(e){return e.value}))}},of={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},nf=function(e,t){return 0!=(e&t)},af={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(0===t.length)return[];var s=t[0];return 20===s.type&&"none"===s.value?[]:t}},lf={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var s=t[0];if(20===s.type&&"none"===s.value)return null;for(var i=[],r=t.filter(QA),o=0;o<r.length;o++){var n=r[o],a=r[o+1];if(20===n.type){var l=a&&GA(a)?a.number:1;i.push({counter:n.value,increment:l})}}return i}},hf={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return[];for(var s=[],i=t.filter(QA),r=0;r<i.length;r++){var o=i[r],n=i[r+1];if(VA(o)&&"none"!==o.value){var a=n&&GA(n)?n.number:0;s.push({counter:o.value,reset:a})}}return s}},cf={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(HA).map((function(t){return Zd(e,t)}))}},uf={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(0===t.length)return null;var s=t[0];if(20===s.type&&"none"===s.value)return null;var i=[],r=t.filter(kA);if(r.length%2!=0)return null;for(var o=0;o<r.length;o+=2){var n=r[o].value,a=r[o+1].value;i.push({open:n,close:a})}return i}},Af=function(e,t,s){if(!e)return"";var i=e[Math.min(t,e.length-1)];return i?s?i.open:i.close:""},pf={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return 1===t.length&&jA(t[0],"none")?[]:zA(t).map((function(t){for(var s={color:255,offsetX:qA,offsetY:qA,blur:qA,spread:qA,inset:!1},i=0,r=0;r<t.length;r++){var o=t[r];jA(o,"inset")?s.inset=!0:YA(o)?(0===i?s.offsetX=o:1===i?s.offsetY=o:2===i?s.blur=o:s.spread=o,i++):s.color=lp(e,o)}return s}))}},df={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var s=[];return t.filter(VA).forEach((function(e){switch(e.value){case"stroke":s.push(1);break;case"fill":s.push(0);break;case"markers":s.push(2)}})),[0,1,2].forEach((function(e){-1===s.indexOf(e)&&s.push(e)})),s}},ff={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},mf={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return HA(t)?t.number:0}},gf=function(){function e(e,t){var s,i;this.animationDuration=vf(e,cf,t.animationDuration),this.backgroundClip=vf(e,Ep,t.backgroundClip),this.backgroundColor=vf(e,vp,t.backgroundColor),this.backgroundImage=vf(e,Hp,t.backgroundImage),this.backgroundOrigin=vf(e,Gp,t.backgroundOrigin),this.backgroundPosition=vf(e,Vp,t.backgroundPosition),this.backgroundRepeat=vf(e,kp,t.backgroundRepeat),this.backgroundSize=vf(e,Wp,t.backgroundSize),this.borderTopColor=vf(e,Yp,t.borderTopColor),this.borderRightColor=vf(e,Xp,t.borderRightColor),this.borderBottomColor=vf(e,Zp,t.borderBottomColor),this.borderLeftColor=vf(e,qp,t.borderLeftColor),this.borderTopLeftRadius=vf(e,$p,t.borderTopLeftRadius),this.borderTopRightRadius=vf(e,ed,t.borderTopRightRadius),this.borderBottomRightRadius=vf(e,td,t.borderBottomRightRadius),this.borderBottomLeftRadius=vf(e,sd,t.borderBottomLeftRadius),this.borderTopStyle=vf(e,rd,t.borderTopStyle),this.borderRightStyle=vf(e,od,t.borderRightStyle),this.borderBottomStyle=vf(e,nd,t.borderBottomStyle),this.borderLeftStyle=vf(e,ad,t.borderLeftStyle),this.borderTopWidth=vf(e,hd,t.borderTopWidth),this.borderRightWidth=vf(e,cd,t.borderRightWidth),this.borderBottomWidth=vf(e,ud,t.borderBottomWidth),this.borderLeftWidth=vf(e,Ad,t.borderLeftWidth),this.boxShadow=vf(e,pf,t.boxShadow),this.color=vf(e,pd,t.color),this.direction=vf(e,dd,t.direction),this.display=vf(e,fd,t.display),this.float=vf(e,gd,t.cssFloat),this.fontFamily=vf(e,ef,t.fontFamily),this.fontSize=vf(e,tf,t.fontSize),this.fontStyle=vf(e,of,t.fontStyle),this.fontVariant=vf(e,rf,t.fontVariant),this.fontWeight=vf(e,sf,t.fontWeight),this.letterSpacing=vf(e,yd,t.letterSpacing),this.lineBreak=vf(e,vd,t.lineBreak),this.lineHeight=vf(e,_d,t.lineHeight),this.listStyleImage=vf(e,Td,t.listStyleImage),this.listStylePosition=vf(e,Pd,t.listStylePosition),this.listStyleType=vf(e,Dd,t.listStyleType),this.marginTop=vf(e,Rd,t.marginTop),this.marginRight=vf(e,Cd,t.marginRight),this.marginBottom=vf(e,xd,t.marginBottom),this.marginLeft=vf(e,Nd,t.marginLeft),this.opacity=vf(e,qd,t.opacity);var r=vf(e,Od,t.overflow);this.overflowX=r[0],this.overflowY=r[r.length>1?1:0],this.overflowWrap=vf(e,Sd,t.overflowWrap),this.paddingTop=vf(e,Md,t.paddingTop),this.paddingRight=vf(e,Bd,t.paddingRight),this.paddingBottom=vf(e,Fd,t.paddingBottom),this.paddingLeft=vf(e,Ld,t.paddingLeft),this.paintOrder=vf(e,df,t.paintOrder),this.position=vf(e,Hd,t.position),this.textAlign=vf(e,Ud,t.textAlign),this.textDecorationColor=vf(e,Jd,null!==(s=t.textDecorationColor)&&void 0!==s?s:t.color),this.textDecorationLine=vf(e,$d,null!==(i=t.textDecorationLine)&&void 0!==i?i:t.textDecoration),this.textShadow=vf(e,Gd,t.textShadow),this.textTransform=vf(e,Vd,t.textTransform),this.transform=vf(e,kd,t.transform),this.transformOrigin=vf(e,zd,t.transformOrigin),this.visibility=vf(e,Kd,t.visibility),this.webkitTextStrokeColor=vf(e,ff,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=vf(e,mf,t.webkitTextStrokeWidth),this.wordBreak=vf(e,Yd,t.wordBreak),this.zIndex=vf(e,Xd,t.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},e.prototype.isTransparent=function(){return hp(this.backgroundColor)},e.prototype.isTransformed=function(){return null!==this.transform},e.prototype.isPositioned=function(){return 0!==this.position},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return 0!==this.float},e.prototype.isInlineLevel=function(){return nf(this.display,4)||nf(this.display,33554432)||nf(this.display,268435456)||nf(this.display,536870912)||nf(this.display,67108864)||nf(this.display,134217728)},e}(),yf=function(e,t){this.content=vf(e,af,t.content),this.quotes=vf(e,uf,t.quotes)},Ef=function(e,t){this.counterIncrement=vf(e,lf,t.counterIncrement),this.counterReset=vf(e,hf,t.counterReset)},vf=function(e,t,s){var i=new LA,r=null!=s?s.toString():t.initialValue;i.write(r);var o=new UA(i.read());switch(t.type){case 2:var n=o.parseComponentValue();return t.parse(e,VA(n)?n.value:t.initialValue);case 0:return t.parse(e,o.parseComponentValue());case 1:return t.parse(e,o.parseComponentValues());case 4:return o.parseComponentValue();case 3:switch(t.format){case"angle":return rp(e,o.parseComponentValue());case"color":return lp(e,o.parseComponentValue());case"image":return Fp(e,o.parseComponentValue());case"length":var a=o.parseComponentValue();return YA(a)?a:qA;case"length-percentage":var l=o.parseComponentValue();return XA(l)?l:qA;case"time":return Zd(e,o.parseComponentValue())}}},_f=function(e,t){var s=function(e){switch(e.getAttribute("data-html2canvas-debug")){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}}(e);return 1===s||t===s},If=function(e,t){this.context=e,this.textNodes=[],this.elements=[],this.flags=0,_f(t,3),this.styles=new gf(e,window.getComputedStyle(t,null)),bm(t)&&(this.styles.animationDuration.some((function(e){return e>0}))&&(t.style.animationDuration="0s"),null!==this.styles.transform&&(t.style.transform="none")),this.bounds=iu(this.context,t),_f(t,4)&&(this.flags|=16)},Tf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Pf="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Df=0;Df<Tf.length;Df++)Pf[Tf.charCodeAt(Df)]=Df;for(var bf=function(e,t,s){return e.slice?e.slice(t,s):new Uint16Array(Array.prototype.slice.call(e,t,s))},Rf=function(){function e(e,t,s,i,r,o){this.initialValue=e,this.errorValue=t,this.highStart=s,this.highValueIndex=i,this.index=r,this.data=o}return e.prototype.get=function(e){var t;if(e>=0){if(e<55296||e>56319&&e<=65535)return t=((t=this.index[e>>5])<<2)+(31&e),this.data[t];if(e<=65535)return t=((t=this.index[2048+(e-55296>>5)])<<2)+(31&e),this.data[t];if(e<this.highStart)return t=2080+(e>>11),t=this.index[t],t+=e>>5&63,t=((t=this.index[t])<<2)+(31&e),this.data[t];if(e<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),Cf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xf="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Nf=0;Nf<Cf.length;Nf++)xf[Cf.charCodeAt(Nf)]=Nf;var Of,Sf=8,wf=9,Mf=11,Bf=12,Ff=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var s=e.length;if(!s)return"";for(var i=[],r=-1,o="";++r<s;){var n=e[r];n<=65535?i.push(n):(n-=65536,i.push(55296+(n>>10),n%1024+56320)),(r+1===s||i.length>16384)&&(o+=String.fromCharCode.apply(String,i),i.length=0)}return o},Lf=function(e,t){var s,i,r,o=function(e){var t,s,i,r,o,n=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(n--,"="===e[e.length-2]&&n--);var h="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(n):new Array(n),c=Array.isArray(h)?h:new Uint8Array(h);for(t=0;t<a;t+=4)s=Pf[e.charCodeAt(t)],i=Pf[e.charCodeAt(t+1)],r=Pf[e.charCodeAt(t+2)],o=Pf[e.charCodeAt(t+3)],c[l++]=s<<2|i>>4,c[l++]=(15&i)<<4|r>>2,c[l++]=(3&r)<<6|63&o;return h}(e),n=Array.isArray(o)?function(e){for(var t=e.length,s=[],i=0;i<t;i+=4)s.push(e[i+3]<<24|e[i+2]<<16|e[i+1]<<8|e[i]);return s}(o):new Uint32Array(o),a=Array.isArray(o)?function(e){for(var t=e.length,s=[],i=0;i<t;i+=2)s.push(e[i+1]<<8|e[i]);return s}(o):new Uint16Array(o),l=bf(a,12,n[4]/2),h=2===n[5]?bf(a,(24+n[4])/2):(s=n,i=Math.ceil((24+n[4])/4),s.slice?s.slice(i,r):new Uint32Array(Array.prototype.slice.call(s,i,r)));return new Rf(n[0],n[1],n[2],n[3],l,h)}("AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA="),Uf="×",Hf=function(e){return Lf.get(e)},Gf=function(e,t,s){var i=s-2,r=t[i],o=t[s-1],n=t[s];if(2===o&&3===n)return Uf;if(2===o||3===o||4===o)return"÷";if(2===n||3===n||4===n)return"÷";if(o===Sf&&-1!==[Sf,wf,Mf,Bf].indexOf(n))return Uf;if(!(o!==Mf&&o!==wf||n!==wf&&10!==n))return Uf;if((o===Bf||10===o)&&10===n)return Uf;if(13===n||5===n)return Uf;if(7===n)return Uf;if(1===o)return Uf;if(13===o&&14===n){for(;5===r;)r=t[--i];if(14===r)return Uf}if(15===o&&15===n){for(var a=0;15===r;)a++,r=t[--i];if(a%2==0)return Uf}return"÷"},Vf=function(e){var t=function(e){for(var t=[],s=0,i=e.length;s<i;){var r=e.charCodeAt(s++);if(r>=55296&&r<=56319&&s<i){var o=e.charCodeAt(s++);56320==(64512&o)?t.push(((1023&r)<<10)+(1023&o)+65536):(t.push(r),s--)}else t.push(r)}return t}(e),s=t.length,i=0,r=0,o=t.map(Hf);return{next:function(){if(i>=s)return{done:!0,value:null};for(var e=Uf;i<s&&(e=Gf(0,o,++i))===Uf;);if(e!==Uf||i===s){var n=Ff.apply(null,t.slice(r,i));return r=i,{value:n,done:!1}}return{done:!0,value:null}}}},kf=function(e){return 0===e[0]&&255===e[1]&&0===e[2]&&255===e[3]},jf=function(e,t,s,i,r){var o="http://www.w3.org/2000/svg",n=document.createElementNS(o,"svg"),a=document.createElementNS(o,"foreignObject");return n.setAttributeNS(null,"width",e.toString()),n.setAttributeNS(null,"height",t.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",s.toString()),a.setAttributeNS(null,"y",i.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),n.appendChild(a),a.appendChild(r),n},Qf=function(e){return new Promise((function(t,s){var i=new Image;i.onload=function(){return t(i)},i.onerror=s,i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))}))},Wf={get SUPPORT_RANGE_BOUNDS(){var e=function(e){if(e.createRange){var t=e.createRange();if(t.getBoundingClientRect){var s=e.createElement("boundtest");s.style.height="123px",s.style.display="block",e.body.appendChild(s),t.selectNode(s);var i=t.getBoundingClientRect(),r=Math.round(i.height);if(e.body.removeChild(s),123===r)return!0}}return!1}(document);return Object.defineProperty(Wf,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=Wf.SUPPORT_RANGE_BOUNDS&&function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var s=e.createRange();t.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var i=t.firstChild,r=ru(i.data).map((function(e){return ou(e)})),o=0,n={},a=r.every((function(e,t){s.setStart(i,o),s.setEnd(i,o+e.length);var r=s.getBoundingClientRect();o+=e.length;var a=r.x>n.x||r.y>n.y;return n=r,0===t||a}));return e.body.removeChild(t),a}(document);return Object.defineProperty(Wf,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=function(e){var t=new Image,s=e.createElement("canvas"),i=s.getContext("2d");if(!i)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{i.drawImage(t,0,0),s.toDataURL()}catch(e){return!1}return!0}(document);return Object.defineProperty(Wf,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e="function"==typeof Array.from&&"function"==typeof window.fetch?function(e){var t=e.createElement("canvas"),s=100;t.width=s,t.height=s;var i=t.getContext("2d");if(!i)return Promise.reject(!1);i.fillStyle="rgb(0, 255, 0)",i.fillRect(0,0,s,s);var r=new Image,o=t.toDataURL();r.src=o;var n=jf(s,s,0,0,r);return i.fillStyle="red",i.fillRect(0,0,s,s),Qf(n).then((function(t){i.drawImage(t,0,0);var r=i.getImageData(0,0,s,s).data;i.fillStyle="red",i.fillRect(0,0,s,s);var n=e.createElement("div");return n.style.backgroundImage="url("+o+")",n.style.height="100px",kf(r)?Qf(jf(s,s,0,0,n)):Promise.reject(!1)})).then((function(e){return i.drawImage(e,0,0),kf(i.getImageData(0,0,s,s).data)})).catch((function(){return!1}))}(document):Promise.resolve(!1);return Object.defineProperty(Wf,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=void 0!==(new Image).crossOrigin;return Object.defineProperty(Wf,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(Wf,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Wf,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!("undefined"==typeof Intl||!Intl.Segmenter);return Object.defineProperty(Wf,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},zf=function(e,t){this.text=e,this.bounds=t},Kf=function(e,t){var s=t.ownerDocument;if(s){var i=s.createElement("html2canvaswrapper");i.appendChild(t.cloneNode(!0));var r=t.parentNode;if(r){r.replaceChild(i,t);var o=iu(e,i);return i.firstChild&&r.replaceChild(i.firstChild,i),o}}return su.EMPTY},Yf=function(e,t,s){var i=e.ownerDocument;if(!i)throw new Error("Node has no owner document");var r=i.createRange();return r.setStart(e,t),r.setEnd(e,t+s),r},Xf=function(e){if(Wf.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map((function(e){return e.segment}))}return function(e){for(var t,s=Vf(e),i=[];!(t=s.next()).done;)t.value&&i.push(t.value.slice());return i}(e)},Zf=function(e,t){return 0!==t.letterSpacing?Xf(e):function(e,t){if(Wf.SUPPORT_NATIVE_TEXT_SEGMENTATION){var s=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(s.segment(e)).map((function(e){return e.segment}))}return Jf(e,t)}(e,t)},qf=[32,160,4961,65792,65793,4153,4241],Jf=function(e,t){for(var s,i=function(e,t){var s=ru(e),i=tA(s,t),r=i[0],o=i[1],n=i[2],a=s.length,l=0,h=0;return{next:function(){if(h>=a)return{done:!0,value:null};for(var e=ku;h<a&&(e=eA(s,o,r,++h,n))===ku;);if(e!==ku||h===a){var t=new sA(s,e,l,h);return l=h,{value:t,done:!1}}return{done:!0,value:null}}}}(e,{lineBreak:t.lineBreak,wordBreak:"break-word"===t.overflowWrap?"break-word":t.wordBreak}),r=[],o=function(){if(s.value){var e=s.value.slice(),t=ru(e),i="";t.forEach((function(e){-1===qf.indexOf(e)?i+=ou(e):(i.length&&r.push(i),r.push(ou(e)),i="")})),i.length&&r.push(i)}};!(s=i.next()).done;)o();return r},$f=function(e,t,s){this.text=em(t.data,s.textTransform),this.textBounds=function(e,t,s,i){var r=Zf(t,s),o=[],n=0;return r.forEach((function(t){if(s.textDecorationLine.length||t.trim().length>0)if(Wf.SUPPORT_RANGE_BOUNDS){var r=Yf(i,n,t.length).getClientRects();if(r.length>1){var a=Xf(t),l=0;a.forEach((function(t){o.push(new zf(t,su.fromDOMRectList(e,Yf(i,l+n,t.length).getClientRects()))),l+=t.length}))}else o.push(new zf(t,su.fromDOMRectList(e,r)))}else{var h=i.splitText(t.length);o.push(new zf(t,Kf(e,i))),i=h}else Wf.SUPPORT_RANGE_BOUNDS||(i=i.splitText(t.length));n+=t.length})),o}(e,this.text,s,t)},em=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(tm,sm);case 2:return e.toUpperCase();default:return e}},tm=/(^|\s|:|-|\(|\))([a-z])/g,sm=function(e,t,s){return e.length>0?t+s.toUpperCase():e},im=function(e){function t(t,s){var i=e.call(this,t,s)||this;return i.src=s.currentSrc||s.src,i.intrinsicWidth=s.naturalWidth,i.intrinsicHeight=s.naturalHeight,i.context.cache.addImage(i.src),i}return qc(t,e),t}(If),rm=function(e){function t(t,s){var i=e.call(this,t,s)||this;return i.canvas=s,i.intrinsicWidth=s.width,i.intrinsicHeight=s.height,i}return qc(t,e),t}(If),om=function(e){function t(t,s){var i=e.call(this,t,s)||this,r=new XMLSerializer,o=iu(t,s);return s.setAttribute("width",o.width+"px"),s.setAttribute("height",o.height+"px"),i.svg="data:image/svg+xml,"+encodeURIComponent(r.serializeToString(s)),i.intrinsicWidth=s.width.baseVal.value,i.intrinsicHeight=s.height.baseVal.value,i.context.cache.addImage(i.svg),i}return qc(t,e),t}(If),nm=function(e){function t(t,s){var i=e.call(this,t,s)||this;return i.value=s.value,i}return qc(t,e),t}(If),am=function(e){function t(t,s){var i=e.call(this,t,s)||this;return i.start=s.start,i.reversed="boolean"==typeof s.reversed&&!0===s.reversed,i}return qc(t,e),t}(If),lm=[{type:15,flags:0,unit:"px",number:3}],hm=[{type:16,flags:0,number:50}],cm="checkbox",um="radio",Am="password",pm=707406591,dm=function(e){function t(t,s){var i,r,o,n=e.call(this,t,s)||this;switch(n.type=s.type.toLowerCase(),n.checked=s.checked,n.value=0===(r=(i=s).type===Am?new Array(i.value.length+1).join("•"):i.value).length?i.placeholder||"":r,n.type!==cm&&n.type!==um||(n.styles.backgroundColor=3739148031,n.styles.borderTopColor=n.styles.borderRightColor=n.styles.borderBottomColor=n.styles.borderLeftColor=2779096575,n.styles.borderTopWidth=n.styles.borderRightWidth=n.styles.borderBottomWidth=n.styles.borderLeftWidth=1,n.styles.borderTopStyle=n.styles.borderRightStyle=n.styles.borderBottomStyle=n.styles.borderLeftStyle=1,n.styles.backgroundClip=[0],n.styles.backgroundOrigin=[0],n.bounds=(o=n.bounds).width>o.height?new su(o.left+(o.width-o.height)/2,o.top,o.height,o.height):o.width<o.height?new su(o.left,o.top+(o.height-o.width)/2,o.width,o.width):o),n.type){case cm:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=lm;break;case um:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=hm}return n}return qc(t,e),t}(If),fm=function(e){function t(t,s){var i=e.call(this,t,s)||this,r=s.options[s.selectedIndex||0];return i.value=r&&r.text||"",i}return qc(t,e),t}(If),mm=function(e){function t(t,s){var i=e.call(this,t,s)||this;return i.value=s.value,i}return qc(t,e),t}(If),gm=function(e){function t(t,s){var i=e.call(this,t,s)||this;i.src=s.src,i.width=parseInt(s.width,10)||0,i.height=parseInt(s.height,10)||0,i.backgroundColor=i.styles.backgroundColor;try{if(s.contentWindow&&s.contentWindow.document&&s.contentWindow.document.documentElement){i.tree=_m(t,s.contentWindow.document.documentElement);var r=s.contentWindow.document.documentElement?gp(t,getComputedStyle(s.contentWindow.document.documentElement).backgroundColor):yp.TRANSPARENT,o=s.contentWindow.document.body?gp(t,getComputedStyle(s.contentWindow.document.body).backgroundColor):yp.TRANSPARENT;i.backgroundColor=hp(r)?hp(o)?i.styles.backgroundColor:o:r}}catch(e){}return i}return qc(t,e),t}(If),ym=["OL","UL","MENU"],Em=function(e,t,s,i){for(var r=t.firstChild,o=void 0;r;r=o)if(o=r.nextSibling,Pm(r)&&r.data.trim().length>0)s.textNodes.push(new $f(e,r,s.styles));else if(Dm(r))if(Gm(r)&&r.assignedNodes)r.assignedNodes().forEach((function(t){return Em(e,t,s,i)}));else{var n=vm(e,r);n.styles.isVisible()&&(Im(r,n,i)?n.flags|=4:Tm(n.styles)&&(n.flags|=2),-1!==ym.indexOf(r.tagName)&&(n.flags|=8),s.elements.push(n),r.slot,r.shadowRoot?Em(e,r.shadowRoot,n,i):Um(r)||Om(r)||Hm(r)||Em(e,r,n,i))}},vm=function(e,t){return Bm(t)?new im(e,t):wm(t)?new rm(e,t):Om(t)?new om(e,t):Cm(t)?new nm(e,t):xm(t)?new am(e,t):Nm(t)?new dm(e,t):Hm(t)?new fm(e,t):Um(t)?new mm(e,t):Fm(t)?new gm(e,t):new If(e,t)},_m=function(e,t){var s=vm(e,t);return s.flags|=4,Em(e,t,s,s),s},Im=function(e,t,s){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||Sm(e)&&s.styles.isTransparent()},Tm=function(e){return e.isPositioned()||e.isFloating()},Pm=function(e){return e.nodeType===Node.TEXT_NODE},Dm=function(e){return e.nodeType===Node.ELEMENT_NODE},bm=function(e){return Dm(e)&&void 0!==e.style&&!Rm(e)},Rm=function(e){return"object"==typeof e.className},Cm=function(e){return"LI"===e.tagName},xm=function(e){return"OL"===e.tagName},Nm=function(e){return"INPUT"===e.tagName},Om=function(e){return"svg"===e.tagName},Sm=function(e){return"BODY"===e.tagName},wm=function(e){return"CANVAS"===e.tagName},Mm=function(e){return"VIDEO"===e.tagName},Bm=function(e){return"IMG"===e.tagName},Fm=function(e){return"IFRAME"===e.tagName},Lm=function(e){return"STYLE"===e.tagName},Um=function(e){return"TEXTAREA"===e.tagName},Hm=function(e){return"SELECT"===e.tagName},Gm=function(e){return"SLOT"===e.tagName},Vm=function(e){return e.tagName.indexOf("-")>0},km=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(e){var t=this.counters[e];return t&&t.length?t[t.length-1]:1},e.prototype.getCounterValues=function(e){var t=this.counters[e];return t||[]},e.prototype.pop=function(e){var t=this;e.forEach((function(e){return t.counters[e].pop()}))},e.prototype.parse=function(e){var t=this,s=e.counterIncrement,i=e.counterReset,r=!0;null!==s&&s.forEach((function(e){var s=t.counters[e.counter];s&&0!==e.increment&&(r=!1,s.length||s.push(1),s[Math.max(0,s.length-1)]+=e.increment)}));var o=[];return r&&i.forEach((function(e){var s=t.counters[e.counter];o.push(e.counter),s||(s=t.counters[e.counter]=[]),s.push(e.reset)})),o},e}(),jm={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Qm={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},Wm={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},zm={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Km=function(e,t,s,i,r,o){return e<t||e>s?sg(e,r,o.length>0):i.integers.reduce((function(t,s,r){for(;e>=s;)e-=s,t+=i.values[r];return t}),"")+o},Ym=function(e,t,s,i){var r="";do{s||e--,r=i(e)+r,e/=t}while(e*t>=t);return r},Xm=function(e,t,s,i,r){var o=s-t+1;return(e<0?"-":"")+(Ym(Math.abs(e),o,i,(function(e){return ou(Math.floor(e%o)+t)}))+r)},Zm=function(e,t,s){void 0===s&&(s=". ");var i=t.length;return Ym(Math.abs(e),i,!1,(function(e){return t[Math.floor(e%i)]}))+s},qm=function(e,t,s,i,r,o){if(e<-9999||e>9999)return sg(e,4,r.length>0);var n=Math.abs(e),a=r;if(0===n)return t[0]+a;for(var l=0;n>0&&l<=4;l++){var h=n%10;0===h&&nf(o,1)&&""!==a?a=t[h]+a:h>1||1===h&&0===l||1===h&&1===l&&nf(o,2)||1===h&&1===l&&nf(o,4)&&e>100||1===h&&l>1&&nf(o,8)?a=t[h]+(l>0?s[l-1]:"")+a:1===h&&l>0&&(a=s[l-1]+a),n=Math.floor(n/10)}return(e<0?i:"")+a},Jm="十百千萬",$m="拾佰仟萬",eg="マイナス",tg="마이너스",sg=function(e,t,s){var i=s?". ":"",r=s?"、":"",o=s?", ":"",n=s?" ":"";switch(t){case 0:return"•"+n;case 1:return"◦"+n;case 2:return"◾"+n;case 5:var a=Xm(e,48,57,!0,i);return a.length<4?"0"+a:a;case 4:return Zm(e,"〇一二三四五六七八九",r);case 6:return Km(e,1,3999,jm,3,i).toLowerCase();case 7:return Km(e,1,3999,jm,3,i);case 8:return Xm(e,945,969,!1,i);case 9:return Xm(e,97,122,!1,i);case 10:return Xm(e,65,90,!1,i);case 11:return Xm(e,1632,1641,!0,i);case 12:case 49:return Km(e,1,9999,Qm,3,i);case 35:return Km(e,1,9999,Qm,3,i).toLowerCase();case 13:return Xm(e,2534,2543,!0,i);case 14:case 30:return Xm(e,6112,6121,!0,i);case 15:return Zm(e,"子丑寅卯辰巳午未申酉戌亥",r);case 16:return Zm(e,"甲乙丙丁戊己庚辛壬癸",r);case 17:case 48:return qm(e,"零一二三四五六七八九",Jm,"負",r,14);case 47:return qm(e,"零壹貳參肆伍陸柒捌玖",$m,"負",r,15);case 42:return qm(e,"零一二三四五六七八九",Jm,"负",r,14);case 41:return qm(e,"零壹贰叁肆伍陆柒捌玖",$m,"负",r,15);case 26:return qm(e,"〇一二三四五六七八九","十百千万",eg,r,0);case 25:return qm(e,"零壱弐参四伍六七八九","拾百千万",eg,r,7);case 31:return qm(e,"영일이삼사오육칠팔구","십백천만",tg,o,7);case 33:return qm(e,"零一二三四五六七八九","十百千萬",tg,o,0);case 32:return qm(e,"零壹貳參四五六七八九","拾百千",tg,o,7);case 18:return Xm(e,2406,2415,!0,i);case 20:return Km(e,1,19999,zm,3,i);case 21:return Xm(e,2790,2799,!0,i);case 22:return Xm(e,2662,2671,!0,i);case 22:return Km(e,1,10999,Wm,3,i);case 23:return Zm(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Zm(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Xm(e,3302,3311,!0,i);case 28:return Zm(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",r);case 29:return Zm(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",r);case 34:return Xm(e,3792,3801,!0,i);case 37:return Xm(e,6160,6169,!0,i);case 38:return Xm(e,4160,4169,!0,i);case 39:return Xm(e,2918,2927,!0,i);case 40:return Xm(e,1776,1785,!0,i);case 43:return Xm(e,3046,3055,!0,i);case 44:return Xm(e,3174,3183,!0,i);case 45:return Xm(e,3664,3673,!0,i);case 46:return Xm(e,3872,3881,!0,i);default:return Xm(e,48,57,!0,i)}},ig="data-html2canvas-ignore",rg=function(){function e(e,t,s){if(this.context=e,this.options=s,this.scrolledElements=[],this.referenceElement=t,this.counters=new km,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(e,t){var s=this,i=ng(e,t);if(!i.contentWindow)return Promise.reject("Unable to find iframe window");var r=e.defaultView.pageXOffset,o=e.defaultView.pageYOffset,n=i.contentWindow,a=n.document,l=hg(i).then((function(){return $c(s,void 0,void 0,(function(){var e,s;return eu(this,(function(r){switch(r.label){case 0:return this.scrolledElements.forEach(dg),n&&(n.scrollTo(t.left,t.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||n.scrollY===t.top&&n.scrollX===t.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(n.scrollX-t.left,n.scrollY-t.top,0,0))),e=this.options.onclone,void 0===(s=this.clonedReferenceElement)?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:a.fonts&&a.fonts.ready?[4,a.fonts.ready]:[3,2];case 1:r.sent(),r.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,lg(a)]:[3,4];case 3:r.sent(),r.label=4;case 4:return"function"==typeof e?[2,Promise.resolve().then((function(){return e(a,s)})).then((function(){return i}))]:[2,i]}}))}))}));return a.open(),a.write(Ag(document.doctype)+"<html></html>"),pg(this.referenceElement.ownerDocument,r,o),a.replaceChild(a.adoptNode(this.documentElement),a.documentElement),a.close(),l},e.prototype.createElementClone=function(e){if(_f(e,2),wm(e))return this.createCanvasClone(e);if(Mm(e))return this.createVideoClone(e);if(Lm(e))return this.createStyleClone(e);var t=e.cloneNode(!1);return Bm(t)&&(Bm(e)&&e.currentSrc&&e.currentSrc!==e.src&&(t.src=e.currentSrc,t.srcset=""),"lazy"===t.loading&&(t.loading="eager")),Vm(t)?this.createCustomElementClone(t):t},e.prototype.createCustomElementClone=function(e){var t=document.createElement("html2canvascustomelement");return ug(e.style,t),t},e.prototype.createStyleClone=function(e){try{var t=e.sheet;if(t&&t.cssRules){var s=[].slice.call(t.cssRules,0).reduce((function(e,t){return t&&"string"==typeof t.cssText?e+t.cssText:e}),""),i=e.cloneNode(!1);return i.textContent=s,i}}catch(e){if(this.context.logger.error("Unable to access cssRules property",e),"SecurityError"!==e.name)throw e}return e.cloneNode(!1)},e.prototype.createCanvasClone=function(e){var t;if(this.options.inlineImages&&e.ownerDocument){var s=e.ownerDocument.createElement("img");try{return s.src=e.toDataURL(),s}catch(t){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",e)}}var i=e.cloneNode(!1);try{i.width=e.width,i.height=e.height;var r=e.getContext("2d"),o=i.getContext("2d");if(o)if(!this.options.allowTaint&&r)o.putImageData(r.getImageData(0,0,e.width,e.height),0,0);else{var n=null!==(t=e.getContext("webgl2"))&&void 0!==t?t:e.getContext("webgl");if(n){var a=n.getContextAttributes();!1===(null==a?void 0:a.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",e)}o.drawImage(e,0,0)}return i}catch(t){this.context.logger.info("Unable to clone canvas as it is tainted",e)}return i},e.prototype.createVideoClone=function(e){var t=e.ownerDocument.createElement("canvas");t.width=e.offsetWidth,t.height=e.offsetHeight;var s=t.getContext("2d");try{return s&&(s.drawImage(e,0,0,t.width,t.height),this.options.allowTaint||s.getImageData(0,0,t.width,t.height)),t}catch(t){this.context.logger.info("Unable to clone video as it is tainted",e)}var i=e.ownerDocument.createElement("canvas");return i.width=e.offsetWidth,i.height=e.offsetHeight,i},e.prototype.appendChildNode=function(e,t,s){Dm(t)&&("SCRIPT"===t.tagName||t.hasAttribute(ig)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(t))||this.options.copyStyles&&Dm(t)&&Lm(t)||e.appendChild(this.cloneNode(t,s))},e.prototype.cloneChildNodes=function(e,t,s){for(var i=this,r=e.shadowRoot?e.shadowRoot.firstChild:e.firstChild;r;r=r.nextSibling)if(Dm(r)&&Gm(r)&&"function"==typeof r.assignedNodes){var o=r.assignedNodes();o.length&&o.forEach((function(e){return i.appendChildNode(t,e,s)}))}else this.appendChildNode(t,r,s)},e.prototype.cloneNode=function(e,t){if(Pm(e))return document.createTextNode(e.data);if(!e.ownerDocument)return e.cloneNode(!1);var s=e.ownerDocument.defaultView;if(s&&Dm(e)&&(bm(e)||Rm(e))){var i=this.createElementClone(e);i.style.transitionProperty="none";var r=s.getComputedStyle(e),o=s.getComputedStyle(e,":before"),n=s.getComputedStyle(e,":after");this.referenceElement===e&&bm(i)&&(this.clonedReferenceElement=i),Sm(i)&&yg(i);var a=this.counters.parse(new Ef(this.context,r)),l=this.resolvePseudoContent(e,i,o,Of.BEFORE);Vm(e)&&(t=!0),Mm(e)||this.cloneChildNodes(e,i,t),l&&i.insertBefore(l,i.firstChild);var h=this.resolvePseudoContent(e,i,n,Of.AFTER);return h&&i.appendChild(h),this.counters.pop(a),(r&&(this.options.copyStyles||Rm(e))&&!Fm(e)||t)&&ug(r,i),0===e.scrollTop&&0===e.scrollLeft||this.scrolledElements.push([i,e.scrollLeft,e.scrollTop]),(Um(e)||Hm(e))&&(Um(i)||Hm(i))&&(i.value=e.value),i}return e.cloneNode(!1)},e.prototype.resolvePseudoContent=function(e,t,s,i){var r=this;if(s){var o=s.content,n=t.ownerDocument;if(n&&o&&"none"!==o&&"-moz-alt-content"!==o&&"none"!==s.display){this.counters.parse(new Ef(this.context,s));var a=new yf(this.context,s),l=n.createElement("html2canvaspseudoelement");ug(s,l),a.content.forEach((function(t){if(0===t.type)l.appendChild(n.createTextNode(t.value));else if(22===t.type){var s=n.createElement("img");s.src=t.value,s.style.opacity="1",l.appendChild(s)}else if(18===t.type){if("attr"===t.name){var i=t.values.filter(VA);i.length&&l.appendChild(n.createTextNode(e.getAttribute(i[0].value)||""))}else if("counter"===t.name){var o=t.values.filter(WA),h=o[0],c=o[1];if(h&&VA(h)){var u=r.counters.getCounterValue(h.value),A=c&&VA(c)?Dd.parse(r.context,c.value):3;l.appendChild(n.createTextNode(sg(u,A,!1)))}}else if("counters"===t.name){var p=t.values.filter(WA),d=(h=p[0],p[1]);c=p[2];if(h&&VA(h)){var f=r.counters.getCounterValues(h.value),m=c&&VA(c)?Dd.parse(r.context,c.value):3,g=d&&0===d.type?d.value:"",y=f.map((function(e){return sg(e,m,!1)})).join(g);l.appendChild(n.createTextNode(y))}}}else if(20===t.type)switch(t.value){case"open-quote":l.appendChild(n.createTextNode(Af(a.quotes,r.quoteDepth++,!0)));break;case"close-quote":l.appendChild(n.createTextNode(Af(a.quotes,--r.quoteDepth,!1)));break;default:l.appendChild(n.createTextNode(t.value))}})),l.className=fg+" "+mg;var h=i===Of.BEFORE?" "+fg:" "+mg;return Rm(t)?t.className.baseValue+=h:t.className+=h,l}}},e.destroy=function(e){return!!e.parentNode&&(e.parentNode.removeChild(e),!0)},e}();!function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"}(Of||(Of={}));var og,ng=function(e,t){var s=e.createElement("iframe");return s.className="html2canvas-container",s.style.visibility="hidden",s.style.position="fixed",s.style.left="-10000px",s.style.top="0px",s.style.border="0",s.width=t.width.toString(),s.height=t.height.toString(),s.scrolling="no",s.setAttribute(ig,"true"),e.body.appendChild(s),s},ag=function(e){return new Promise((function(t){e.complete?t():e.src?(e.onload=t,e.onerror=t):t()}))},lg=function(e){return Promise.all([].slice.call(e.images,0).map(ag))},hg=function(e){return new Promise((function(t,s){var i=e.contentWindow;if(!i)return s("No window assigned for iframe");var r=i.document;i.onload=e.onload=function(){i.onload=e.onload=null;var s=setInterval((function(){r.body.childNodes.length>0&&"complete"===r.readyState&&(clearInterval(s),t(e))}),50)}}))},cg=["all","d","content"],ug=function(e,t){for(var s=e.length-1;s>=0;s--){var i=e.item(s);-1===cg.indexOf(i)&&t.style.setProperty(i,e.getPropertyValue(i))}return t},Ag=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},pg=function(e,t,s){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||s!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,s)},dg=function(e){var t=e[0],s=e[1],i=e[2];t.scrollLeft=s,t.scrollTop=i},fg="___html2canvas___pseudoelement_before",mg="___html2canvas___pseudoelement_after",gg='{\n    content: "" !important;\n    display: none !important;\n}',yg=function(e){Eg(e,"."+fg+":before"+gg+"\n         ."+mg+":after"+gg)},Eg=function(e,t){var s=e.ownerDocument;if(s){var i=s.createElement("style");i.textContent=t,e.appendChild(i)}},vg=function(){function e(){}return e.getOrigin=function(t){var s=e._link;return s?(s.href=t,s.href=s.href,s.protocol+s.hostname+s.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),_g=function(){function e(e,t){this.context=e,this._options=t,this._cache={}}return e.prototype.addImage=function(e){var t=Promise.resolve();return this.has(e)?t:Cg(e)||Dg(e)?((this._cache[e]=this.loadImage(e)).catch((function(){})),t):t},e.prototype.match=function(e){return this._cache[e]},e.prototype.loadImage=function(e){return $c(this,void 0,void 0,(function(){var t,s,i,r,o=this;return eu(this,(function(n){switch(n.label){case 0:return t=vg.isSameOrigin(e),s=!bg(e)&&!0===this._options.useCORS&&Wf.SUPPORT_CORS_IMAGES&&!t,i=!bg(e)&&!t&&!Cg(e)&&"string"==typeof this._options.proxy&&Wf.SUPPORT_CORS_XHR&&!s,t||!1!==this._options.allowTaint||bg(e)||Cg(e)||i||s?(r=e,i?[4,this.proxy(r)]:[3,2]):[2];case 1:r=n.sent(),n.label=2;case 2:return this.context.logger.debug("Added image "+e.substring(0,256)),[4,new Promise((function(e,t){var i=new Image;i.onload=function(){return e(i)},i.onerror=t,(Rg(r)||s)&&(i.crossOrigin="anonymous"),i.src=r,!0===i.complete&&setTimeout((function(){return e(i)}),500),o._options.imageTimeout>0&&setTimeout((function(){return t("Timed out ("+o._options.imageTimeout+"ms) loading image")}),o._options.imageTimeout)}))];case 3:return[2,n.sent()]}}))}))},e.prototype.has=function(e){return void 0!==this._cache[e]},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(e){var t=this,s=this._options.proxy;if(!s)throw new Error("No proxy defined");var i=e.substring(0,256);return new Promise((function(r,o){var n=Wf.SUPPORT_RESPONSE_TYPE?"blob":"text",a=new XMLHttpRequest;a.onload=function(){if(200===a.status)if("text"===n)r(a.response);else{var e=new FileReader;e.addEventListener("load",(function(){return r(e.result)}),!1),e.addEventListener("error",(function(e){return o(e)}),!1),e.readAsDataURL(a.response)}else o("Failed to proxy resource "+i+" with status code "+a.status)},a.onerror=o;var l=s.indexOf("?")>-1?"&":"?";if(a.open("GET",""+s+l+"url="+encodeURIComponent(e)+"&responseType="+n),"text"!==n&&a instanceof XMLHttpRequest&&(a.responseType=n),t._options.imageTimeout){var h=t._options.imageTimeout;a.timeout=h,a.ontimeout=function(){return o("Timed out ("+h+"ms) proxying "+i)}}a.send()}))},e}(),Ig=/^data:image\/svg\+xml/i,Tg=/^data:image\/.*;base64,/i,Pg=/^data:image\/.*/i,Dg=function(e){return Wf.SUPPORT_SVG_DRAWING||!xg(e)},bg=function(e){return Pg.test(e)},Rg=function(e){return Tg.test(e)},Cg=function(e){return"blob"===e.substr(0,4)},xg=function(e){return"svg"===e.substr(-3).toLowerCase()||Ig.test(e)},Ng=function(){function e(e,t){this.type=0,this.x=e,this.y=t}return e.prototype.add=function(t,s){return new e(this.x+t,this.y+s)},e}(),Og=function(e,t,s){return new Ng(e.x+(t.x-e.x)*s,e.y+(t.y-e.y)*s)},Sg=function(){function e(e,t,s,i){this.type=1,this.start=e,this.startControl=t,this.endControl=s,this.end=i}return e.prototype.subdivide=function(t,s){var i=Og(this.start,this.startControl,t),r=Og(this.startControl,this.endControl,t),o=Og(this.endControl,this.end,t),n=Og(i,r,t),a=Og(r,o,t),l=Og(n,a,t);return s?new e(this.start,i,n,l):new e(l,a,o,this.end)},e.prototype.add=function(t,s){return new e(this.start.add(t,s),this.startControl.add(t,s),this.endControl.add(t,s),this.end.add(t,s))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),wg=function(e){return 1===e.type},Mg=function(e){var t=e.styles,s=e.bounds,i=ep(t.borderTopLeftRadius,s.width,s.height),r=i[0],o=i[1],n=ep(t.borderTopRightRadius,s.width,s.height),a=n[0],l=n[1],h=ep(t.borderBottomRightRadius,s.width,s.height),c=h[0],u=h[1],A=ep(t.borderBottomLeftRadius,s.width,s.height),p=A[0],d=A[1],f=[];f.push((r+a)/s.width),f.push((p+c)/s.width),f.push((o+d)/s.height),f.push((l+u)/s.height);var m=Math.max.apply(Math,f);m>1&&(r/=m,o/=m,a/=m,l/=m,c/=m,u/=m,p/=m,d/=m);var g=s.width-a,y=s.height-u,E=s.width-c,v=s.height-d,_=t.borderTopWidth,I=t.borderRightWidth,T=t.borderBottomWidth,P=t.borderLeftWidth,D=tp(t.paddingTop,e.bounds.width),b=tp(t.paddingRight,e.bounds.width),R=tp(t.paddingBottom,e.bounds.width),C=tp(t.paddingLeft,e.bounds.width);this.topLeftBorderDoubleOuterBox=r>0||o>0?Bg(s.left+P/3,s.top+_/3,r-P/3,o-_/3,og.TOP_LEFT):new Ng(s.left+P/3,s.top+_/3),this.topRightBorderDoubleOuterBox=r>0||o>0?Bg(s.left+g,s.top+_/3,a-I/3,l-_/3,og.TOP_RIGHT):new Ng(s.left+s.width-I/3,s.top+_/3),this.bottomRightBorderDoubleOuterBox=c>0||u>0?Bg(s.left+E,s.top+y,c-I/3,u-T/3,og.BOTTOM_RIGHT):new Ng(s.left+s.width-I/3,s.top+s.height-T/3),this.bottomLeftBorderDoubleOuterBox=p>0||d>0?Bg(s.left+P/3,s.top+v,p-P/3,d-T/3,og.BOTTOM_LEFT):new Ng(s.left+P/3,s.top+s.height-T/3),this.topLeftBorderDoubleInnerBox=r>0||o>0?Bg(s.left+2*P/3,s.top+2*_/3,r-2*P/3,o-2*_/3,og.TOP_LEFT):new Ng(s.left+2*P/3,s.top+2*_/3),this.topRightBorderDoubleInnerBox=r>0||o>0?Bg(s.left+g,s.top+2*_/3,a-2*I/3,l-2*_/3,og.TOP_RIGHT):new Ng(s.left+s.width-2*I/3,s.top+2*_/3),this.bottomRightBorderDoubleInnerBox=c>0||u>0?Bg(s.left+E,s.top+y,c-2*I/3,u-2*T/3,og.BOTTOM_RIGHT):new Ng(s.left+s.width-2*I/3,s.top+s.height-2*T/3),this.bottomLeftBorderDoubleInnerBox=p>0||d>0?Bg(s.left+2*P/3,s.top+v,p-2*P/3,d-2*T/3,og.BOTTOM_LEFT):new Ng(s.left+2*P/3,s.top+s.height-2*T/3),this.topLeftBorderStroke=r>0||o>0?Bg(s.left+P/2,s.top+_/2,r-P/2,o-_/2,og.TOP_LEFT):new Ng(s.left+P/2,s.top+_/2),this.topRightBorderStroke=r>0||o>0?Bg(s.left+g,s.top+_/2,a-I/2,l-_/2,og.TOP_RIGHT):new Ng(s.left+s.width-I/2,s.top+_/2),this.bottomRightBorderStroke=c>0||u>0?Bg(s.left+E,s.top+y,c-I/2,u-T/2,og.BOTTOM_RIGHT):new Ng(s.left+s.width-I/2,s.top+s.height-T/2),this.bottomLeftBorderStroke=p>0||d>0?Bg(s.left+P/2,s.top+v,p-P/2,d-T/2,og.BOTTOM_LEFT):new Ng(s.left+P/2,s.top+s.height-T/2),this.topLeftBorderBox=r>0||o>0?Bg(s.left,s.top,r,o,og.TOP_LEFT):new Ng(s.left,s.top),this.topRightBorderBox=a>0||l>0?Bg(s.left+g,s.top,a,l,og.TOP_RIGHT):new Ng(s.left+s.width,s.top),this.bottomRightBorderBox=c>0||u>0?Bg(s.left+E,s.top+y,c,u,og.BOTTOM_RIGHT):new Ng(s.left+s.width,s.top+s.height),this.bottomLeftBorderBox=p>0||d>0?Bg(s.left,s.top+v,p,d,og.BOTTOM_LEFT):new Ng(s.left,s.top+s.height),this.topLeftPaddingBox=r>0||o>0?Bg(s.left+P,s.top+_,Math.max(0,r-P),Math.max(0,o-_),og.TOP_LEFT):new Ng(s.left+P,s.top+_),this.topRightPaddingBox=a>0||l>0?Bg(s.left+Math.min(g,s.width-I),s.top+_,g>s.width+I?0:Math.max(0,a-I),Math.max(0,l-_),og.TOP_RIGHT):new Ng(s.left+s.width-I,s.top+_),this.bottomRightPaddingBox=c>0||u>0?Bg(s.left+Math.min(E,s.width-P),s.top+Math.min(y,s.height-T),Math.max(0,c-I),Math.max(0,u-T),og.BOTTOM_RIGHT):new Ng(s.left+s.width-I,s.top+s.height-T),this.bottomLeftPaddingBox=p>0||d>0?Bg(s.left+P,s.top+Math.min(v,s.height-T),Math.max(0,p-P),Math.max(0,d-T),og.BOTTOM_LEFT):new Ng(s.left+P,s.top+s.height-T),this.topLeftContentBox=r>0||o>0?Bg(s.left+P+C,s.top+_+D,Math.max(0,r-(P+C)),Math.max(0,o-(_+D)),og.TOP_LEFT):new Ng(s.left+P+C,s.top+_+D),this.topRightContentBox=a>0||l>0?Bg(s.left+Math.min(g,s.width+P+C),s.top+_+D,g>s.width+P+C?0:a-P+C,l-(_+D),og.TOP_RIGHT):new Ng(s.left+s.width-(I+b),s.top+_+D),this.bottomRightContentBox=c>0||u>0?Bg(s.left+Math.min(E,s.width-(P+C)),s.top+Math.min(y,s.height+_+D),Math.max(0,c-(I+b)),u-(T+R),og.BOTTOM_RIGHT):new Ng(s.left+s.width-(I+b),s.top+s.height-(T+R)),this.bottomLeftContentBox=p>0||d>0?Bg(s.left+P+C,s.top+v,Math.max(0,p-(P+C)),d-(T+R),og.BOTTOM_LEFT):new Ng(s.left+P+C,s.top+s.height-(T+R))};!function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(og||(og={}));var Bg=function(e,t,s,i,r){var o=(Math.sqrt(2)-1)/3*4,n=s*o,a=i*o,l=e+s,h=t+i;switch(r){case og.TOP_LEFT:return new Sg(new Ng(e,h),new Ng(e,h-a),new Ng(l-n,t),new Ng(l,t));case og.TOP_RIGHT:return new Sg(new Ng(e,t),new Ng(e+n,t),new Ng(l,h-a),new Ng(l,h));case og.BOTTOM_RIGHT:return new Sg(new Ng(l,t),new Ng(l,t+a),new Ng(e+n,h),new Ng(e,h));case og.BOTTOM_LEFT:default:return new Sg(new Ng(l,h),new Ng(l-n,h),new Ng(e,t+a),new Ng(e,t))}},Fg=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},Lg=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},Ug=function(e,t,s){this.offsetX=e,this.offsetY=t,this.matrix=s,this.type=0,this.target=6},Hg=function(e,t){this.path=e,this.target=t,this.type=1},Gg=function(e){this.opacity=e,this.type=2,this.target=6},Vg=function(e){return 1===e.type},kg=function(e,t){return e.length===t.length&&e.some((function(e,s){return e===t[s]}))},jg=function(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},Qg=function(){function e(e,t){if(this.container=e,this.parent=t,this.effects=[],this.curves=new Mg(this.container),this.container.styles.opacity<1&&this.effects.push(new Gg(this.container.styles.opacity)),null!==this.container.styles.transform){var s=this.container.bounds.left+this.container.styles.transformOrigin[0].number,i=this.container.bounds.top+this.container.styles.transformOrigin[1].number,r=this.container.styles.transform;this.effects.push(new Ug(s,i,r))}if(0!==this.container.styles.overflowX){var o=Fg(this.curves),n=Lg(this.curves);kg(o,n)?this.effects.push(new Hg(o,6)):(this.effects.push(new Hg(o,2)),this.effects.push(new Hg(n,4)))}}return e.prototype.getEffects=function(e){for(var t=-1===[2,3].indexOf(this.container.styles.position),s=this.parent,i=this.effects.slice(0);s;){var r=s.effects.filter((function(e){return!Vg(e)}));if(t||0!==s.container.styles.position||!s.parent){if(i.unshift.apply(i,r),t=-1===[2,3].indexOf(s.container.styles.position),0!==s.container.styles.overflowX){var o=Fg(s.curves),n=Lg(s.curves);kg(o,n)||i.unshift(new Hg(n,6))}}else i.unshift.apply(i,r);s=s.parent}return i.filter((function(t){return nf(t.target,e)}))},e}(),Wg=function(e,t,s,i){e.container.elements.forEach((function(r){var o=nf(r.flags,4),n=nf(r.flags,2),a=new Qg(r,e);nf(r.styles.display,2048)&&i.push(a);var l=nf(r.flags,8)?[]:i;if(o||n){var h=o||r.styles.isPositioned()?s:t,c=new jg(a);if(r.styles.isPositioned()||r.styles.opacity<1||r.styles.isTransformed()){var u=r.styles.zIndex.order;if(u<0){var A=0;h.negativeZIndex.some((function(e,t){return u>e.element.container.styles.zIndex.order?(A=t,!1):A>0})),h.negativeZIndex.splice(A,0,c)}else if(u>0){var p=0;h.positiveZIndex.some((function(e,t){return u>=e.element.container.styles.zIndex.order?(p=t+1,!1):p>0})),h.positiveZIndex.splice(p,0,c)}else h.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else r.styles.isFloating()?h.nonPositionedFloats.push(c):h.nonPositionedInlineLevel.push(c);Wg(a,c,o?c:s,l)}else r.styles.isInlineLevel()?t.inlineLevel.push(a):t.nonInlineLevel.push(a),Wg(a,t,s,l);nf(r.flags,8)&&zg(r,l)}))},zg=function(e,t){for(var s=e instanceof am?e.start:1,i=e instanceof am&&e.reversed,r=0;r<t.length;r++){var o=t[r];o.container instanceof nm&&"number"==typeof o.container.value&&0!==o.container.value&&(s=o.container.value),o.listValue=sg(s,o.container.styles.listStyleType,!0),s+=i?-1:1}},Kg=function(e,t){switch(t){case 0:return Xg(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Xg(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Xg(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);default:return Xg(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},Yg=function(e,t){var s=[];return wg(e)?s.push(e.subdivide(.5,!1)):s.push(e),wg(t)?s.push(t.subdivide(.5,!0)):s.push(t),s},Xg=function(e,t,s,i){var r=[];return wg(e)?r.push(e.subdivide(.5,!1)):r.push(e),wg(s)?r.push(s.subdivide(.5,!0)):r.push(s),wg(i)?r.push(i.subdivide(.5,!0).reverse()):r.push(i),wg(t)?r.push(t.subdivide(.5,!1).reverse()):r.push(t),r},Zg=function(e){var t=e.bounds,s=e.styles;return t.add(s.borderLeftWidth,s.borderTopWidth,-(s.borderRightWidth+s.borderLeftWidth),-(s.borderTopWidth+s.borderBottomWidth))},qg=function(e){var t=e.styles,s=e.bounds,i=tp(t.paddingLeft,s.width),r=tp(t.paddingRight,s.width),o=tp(t.paddingTop,s.width),n=tp(t.paddingBottom,s.width);return s.add(i+t.borderLeftWidth,o+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+i+r),-(t.borderTopWidth+t.borderBottomWidth+o+n))},Jg=function(e,t,s){var i=function(e,t){return 0===e?t.bounds:2===e?qg(t):Zg(t)}(sy(e.styles.backgroundOrigin,t),e),r=function(e,t){return 0===e?t.bounds:2===e?qg(t):Zg(t)}(sy(e.styles.backgroundClip,t),e),o=ty(sy(e.styles.backgroundSize,t),s,i),n=o[0],a=o[1],l=ep(sy(e.styles.backgroundPosition,t),i.width-n,i.height-a);return[iy(sy(e.styles.backgroundRepeat,t),l,o,i,r),Math.round(i.left+l[0]),Math.round(i.top+l[1]),n,a]},$g=function(e){return VA(e)&&e.value===Lp.AUTO},ey=function(e){return"number"==typeof e},ty=function(e,t,s){var i=t[0],r=t[1],o=t[2],n=e[0],a=e[1];if(!n)return[0,0];if(XA(n)&&a&&XA(a))return[tp(n,s.width),tp(a,s.height)];var l=ey(o);if(VA(n)&&(n.value===Lp.CONTAIN||n.value===Lp.COVER))return ey(o)?s.width/s.height<o!=(n.value===Lp.COVER)?[s.width,s.width/o]:[s.height*o,s.height]:[s.width,s.height];var h=ey(i),c=ey(r),u=h||c;if($g(n)&&(!a||$g(a)))return h&&c?[i,r]:l||u?u&&l?[h?i:r*o,c?r:i/o]:[h?i:s.width,c?r:s.height]:[s.width,s.height];if(l){var A=0,p=0;return XA(n)?A=tp(n,s.width):XA(a)&&(p=tp(a,s.height)),$g(n)?A=p*o:a&&!$g(a)||(p=A/o),[A,p]}var d=null,f=null;if(XA(n)?d=tp(n,s.width):a&&XA(a)&&(f=tp(a,s.height)),null===d||a&&!$g(a)||(f=h&&c?d/i*r:s.height),null!==f&&$g(n)&&(d=h&&c?f/r*i:s.width),null!==d&&null!==f)return[d,f];throw new Error("Unable to calculate background-size for element")},sy=function(e,t){var s=e[t];return void 0===s?e[0]:s},iy=function(e,t,s,i,r){var o=t[0],n=t[1],a=s[0],l=s[1];switch(e){case 2:return[new Ng(Math.round(i.left),Math.round(i.top+n)),new Ng(Math.round(i.left+i.width),Math.round(i.top+n)),new Ng(Math.round(i.left+i.width),Math.round(l+i.top+n)),new Ng(Math.round(i.left),Math.round(l+i.top+n))];case 3:return[new Ng(Math.round(i.left+o),Math.round(i.top)),new Ng(Math.round(i.left+o+a),Math.round(i.top)),new Ng(Math.round(i.left+o+a),Math.round(i.height+i.top)),new Ng(Math.round(i.left+o),Math.round(i.height+i.top))];case 1:return[new Ng(Math.round(i.left+o),Math.round(i.top+n)),new Ng(Math.round(i.left+o+a),Math.round(i.top+n)),new Ng(Math.round(i.left+o+a),Math.round(i.top+n+l)),new Ng(Math.round(i.left+o),Math.round(i.top+n+l))];default:return[new Ng(Math.round(r.left),Math.round(r.top)),new Ng(Math.round(r.left+r.width),Math.round(r.top)),new Ng(Math.round(r.left+r.width),Math.round(r.height+r.top)),new Ng(Math.round(r.left),Math.round(r.height+r.top))]}},ry="Hidden Text",oy=function(){function e(e){this._data={},this._document=e}return e.prototype.parseMetrics=function(e,t){var s=this._document.createElement("div"),i=this._document.createElement("img"),r=this._document.createElement("span"),o=this._document.body;s.style.visibility="hidden",s.style.fontFamily=e,s.style.fontSize=t,s.style.margin="0",s.style.padding="0",s.style.whiteSpace="nowrap",o.appendChild(s),i.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",i.width=1,i.height=1,i.style.margin="0",i.style.padding="0",i.style.verticalAlign="baseline",r.style.fontFamily=e,r.style.fontSize=t,r.style.margin="0",r.style.padding="0",r.appendChild(this._document.createTextNode(ry)),s.appendChild(r),s.appendChild(i);var n=i.offsetTop-r.offsetTop+2;s.removeChild(r),s.appendChild(this._document.createTextNode(ry)),s.style.lineHeight="normal",i.style.verticalAlign="super";var a=i.offsetTop-s.offsetTop+2;return o.removeChild(s),{baseline:n,middle:a}},e.prototype.getMetrics=function(e,t){var s=e+" "+t;return void 0===this._data[s]&&(this._data[s]=this.parseMetrics(e,t)),this._data[s]},e}(),ny=function(e,t){this.context=e,this.options=t},ay=function(e){function t(t,s){var i=e.call(this,t,s)||this;return i._activeEffects=[],i.canvas=s.canvas?s.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),s.canvas||(i.canvas.width=Math.floor(s.width*s.scale),i.canvas.height=Math.floor(s.height*s.scale),i.canvas.style.width=s.width+"px",i.canvas.style.height=s.height+"px"),i.fontMetrics=new oy(document),i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-s.x,-s.y),i.ctx.textBaseline="bottom",i._activeEffects=[],i.context.logger.debug("Canvas renderer initialized ("+s.width+"x"+s.height+") with scale "+s.scale),i}return qc(t,e),t.prototype.applyEffects=function(e){for(var t=this;this._activeEffects.length;)this.popEffect();e.forEach((function(e){return t.applyEffect(e)}))},t.prototype.applyEffect=function(e){this.ctx.save(),function(e){return 2===e.type}(e)&&(this.ctx.globalAlpha=e.opacity),function(e){return 0===e.type}(e)&&(this.ctx.translate(e.offsetX,e.offsetY),this.ctx.transform(e.matrix[0],e.matrix[1],e.matrix[2],e.matrix[3],e.matrix[4],e.matrix[5]),this.ctx.translate(-e.offsetX,-e.offsetY)),Vg(e)&&(this.path(e.path),this.ctx.clip()),this._activeEffects.push(e)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(e){return $c(this,void 0,void 0,(function(){return eu(this,(function(t){switch(t.label){case 0:return e.element.container.styles.isVisible()?[4,this.renderStackContent(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.renderNode=function(e){return $c(this,void 0,void 0,(function(){return eu(this,(function(t){switch(t.label){case 0:return nf(e.container.flags,16),e.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(e)]:[3,3];case 1:return t.sent(),[4,this.renderNodeContent(e)];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},t.prototype.renderTextWithLetterSpacing=function(e,t,s){var i=this;0===t?this.ctx.fillText(e.text,e.bounds.left,e.bounds.top+s):Xf(e.text).reduce((function(t,r){return i.ctx.fillText(r,t,e.bounds.top+s),t+i.ctx.measureText(r).width}),e.bounds.left)},t.prototype.createFontStyle=function(e){var t=e.fontVariant.filter((function(e){return"normal"===e||"small-caps"===e})).join(""),s=Ay(e.fontFamily).join(", "),i=HA(e.fontSize)?""+e.fontSize.number+e.fontSize.unit:e.fontSize.number+"px";return[[e.fontStyle,t,e.fontWeight,i,s].join(" "),s,i]},t.prototype.renderTextNode=function(e,t){return $c(this,void 0,void 0,(function(){var s,i,r,o,n,a,l,h,c=this;return eu(this,(function(u){return s=this.createFontStyle(t),i=s[0],r=s[1],o=s[2],this.ctx.font=i,this.ctx.direction=1===t.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",n=this.fontMetrics.getMetrics(r,o),a=n.baseline,l=n.middle,h=t.paintOrder,e.textBounds.forEach((function(e){h.forEach((function(s){switch(s){case 0:c.ctx.fillStyle=cp(t.color),c.renderTextWithLetterSpacing(e,t.letterSpacing,a);var i=t.textShadow;i.length&&e.text.trim().length&&(i.slice(0).reverse().forEach((function(s){c.ctx.shadowColor=cp(s.color),c.ctx.shadowOffsetX=s.offsetX.number*c.options.scale,c.ctx.shadowOffsetY=s.offsetY.number*c.options.scale,c.ctx.shadowBlur=s.blur.number,c.renderTextWithLetterSpacing(e,t.letterSpacing,a)})),c.ctx.shadowColor="",c.ctx.shadowOffsetX=0,c.ctx.shadowOffsetY=0,c.ctx.shadowBlur=0),t.textDecorationLine.length&&(c.ctx.fillStyle=cp(t.textDecorationColor||t.color),t.textDecorationLine.forEach((function(t){switch(t){case 1:c.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top+a),e.bounds.width,1);break;case 2:c.ctx.fillRect(e.bounds.left,Math.round(e.bounds.top),e.bounds.width,1);break;case 3:c.ctx.fillRect(e.bounds.left,Math.ceil(e.bounds.top+l),e.bounds.width,1)}})));break;case 1:t.webkitTextStrokeWidth&&e.text.trim().length&&(c.ctx.strokeStyle=cp(t.webkitTextStrokeColor),c.ctx.lineWidth=t.webkitTextStrokeWidth,c.ctx.lineJoin=window.chrome?"miter":"round",c.ctx.strokeText(e.text,e.bounds.left,e.bounds.top+a)),c.ctx.strokeStyle="",c.ctx.lineWidth=0,c.ctx.lineJoin="miter"}}))})),[2]}))}))},t.prototype.renderReplacedElement=function(e,t,s){if(s&&e.intrinsicWidth>0&&e.intrinsicHeight>0){var i=qg(e),r=Lg(t);this.path(r),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,e.intrinsicWidth,e.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(e){return $c(this,void 0,void 0,(function(){var s,i,r,o,n,a,l,h,c,u,A,p,d,f,m,g,y,E;return eu(this,(function(v){switch(v.label){case 0:this.applyEffects(e.getEffects(4)),s=e.container,i=e.curves,r=s.styles,o=0,n=s.textNodes,v.label=1;case 1:return o<n.length?(a=n[o],[4,this.renderTextNode(a,r)]):[3,4];case 2:v.sent(),v.label=3;case 3:return o++,[3,1];case 4:if(!(s instanceof im))return[3,8];v.label=5;case 5:return v.trys.push([5,7,,8]),[4,this.context.cache.match(s.src)];case 6:return m=v.sent(),this.renderReplacedElement(s,i,m),[3,8];case 7:return v.sent(),this.context.logger.error("Error loading image "+s.src),[3,8];case 8:if(s instanceof rm&&this.renderReplacedElement(s,i,s.canvas),!(s instanceof om))return[3,12];v.label=9;case 9:return v.trys.push([9,11,,12]),[4,this.context.cache.match(s.svg)];case 10:return m=v.sent(),this.renderReplacedElement(s,i,m),[3,12];case 11:return v.sent(),this.context.logger.error("Error loading svg "+s.svg.substring(0,255)),[3,12];case 12:return s instanceof gm&&s.tree?[4,new t(this.context,{scale:this.options.scale,backgroundColor:s.backgroundColor,x:0,y:0,width:s.width,height:s.height}).render(s.tree)]:[3,14];case 13:l=v.sent(),s.width&&s.height&&this.ctx.drawImage(l,0,0,s.width,s.height,s.bounds.left,s.bounds.top,s.bounds.width,s.bounds.height),v.label=14;case 14:if(s instanceof dm&&(h=Math.min(s.bounds.width,s.bounds.height),s.type===cm?s.checked&&(this.ctx.save(),this.path([new Ng(s.bounds.left+.39363*h,s.bounds.top+.79*h),new Ng(s.bounds.left+.16*h,s.bounds.top+.5549*h),new Ng(s.bounds.left+.27347*h,s.bounds.top+.44071*h),new Ng(s.bounds.left+.39694*h,s.bounds.top+.5649*h),new Ng(s.bounds.left+.72983*h,s.bounds.top+.23*h),new Ng(s.bounds.left+.84*h,s.bounds.top+.34085*h),new Ng(s.bounds.left+.39363*h,s.bounds.top+.79*h)]),this.ctx.fillStyle=cp(pm),this.ctx.fill(),this.ctx.restore()):s.type===um&&s.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(s.bounds.left+h/2,s.bounds.top+h/2,h/4,0,2*Math.PI,!0),this.ctx.fillStyle=cp(pm),this.ctx.fill(),this.ctx.restore())),ly(s)&&s.value.length){switch(c=this.createFontStyle(r),y=c[0],u=c[1],A=this.fontMetrics.getMetrics(y,u).baseline,this.ctx.font=y,this.ctx.fillStyle=cp(r.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=cy(s.styles.textAlign),E=qg(s),p=0,s.styles.textAlign){case 1:p+=E.width/2;break;case 2:p+=E.width}d=E.add(p,0,0,-E.height/2+1),this.ctx.save(),this.path([new Ng(E.left,E.top),new Ng(E.left+E.width,E.top),new Ng(E.left+E.width,E.top+E.height),new Ng(E.left,E.top+E.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new zf(s.value,d),r.letterSpacing,A),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!nf(s.styles.display,2048))return[3,20];if(null===s.styles.listStyleImage)return[3,19];if(0!==(f=s.styles.listStyleImage).type)return[3,18];m=void 0,g=f.url,v.label=15;case 15:return v.trys.push([15,17,,18]),[4,this.context.cache.match(g)];case 16:return m=v.sent(),this.ctx.drawImage(m,s.bounds.left-(m.width+10),s.bounds.top),[3,18];case 17:return v.sent(),this.context.logger.error("Error loading list-style-image "+g),[3,18];case 18:return[3,20];case 19:e.listValue&&-1!==s.styles.listStyleType&&(y=this.createFontStyle(r)[0],this.ctx.font=y,this.ctx.fillStyle=cp(r.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",E=new su(s.bounds.left,s.bounds.top+tp(s.styles.paddingTop,s.bounds.width),s.bounds.width,Id(r.lineHeight,r.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new zf(e.listValue,E),r.letterSpacing,Id(r.lineHeight,r.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),v.label=20;case 20:return[2]}}))}))},t.prototype.renderStackContent=function(e){return $c(this,void 0,void 0,(function(){var t,s,i,r,o,n,a,l,h,c,u,A,p,d,f;return eu(this,(function(m){switch(m.label){case 0:return nf(e.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(e.element)];case 1:m.sent(),t=0,s=e.negativeZIndex,m.label=2;case 2:return t<s.length?(f=s[t],[4,this.renderStack(f)]):[3,5];case 3:m.sent(),m.label=4;case 4:return t++,[3,2];case 5:return[4,this.renderNodeContent(e.element)];case 6:m.sent(),i=0,r=e.nonInlineLevel,m.label=7;case 7:return i<r.length?(f=r[i],[4,this.renderNode(f)]):[3,10];case 8:m.sent(),m.label=9;case 9:return i++,[3,7];case 10:o=0,n=e.nonPositionedFloats,m.label=11;case 11:return o<n.length?(f=n[o],[4,this.renderStack(f)]):[3,14];case 12:m.sent(),m.label=13;case 13:return o++,[3,11];case 14:a=0,l=e.nonPositionedInlineLevel,m.label=15;case 15:return a<l.length?(f=l[a],[4,this.renderStack(f)]):[3,18];case 16:m.sent(),m.label=17;case 17:return a++,[3,15];case 18:h=0,c=e.inlineLevel,m.label=19;case 19:return h<c.length?(f=c[h],[4,this.renderNode(f)]):[3,22];case 20:m.sent(),m.label=21;case 21:return h++,[3,19];case 22:u=0,A=e.zeroOrAutoZIndexOrTransformedOrOpacity,m.label=23;case 23:return u<A.length?(f=A[u],[4,this.renderStack(f)]):[3,26];case 24:m.sent(),m.label=25;case 25:return u++,[3,23];case 26:p=0,d=e.positiveZIndex,m.label=27;case 27:return p<d.length?(f=d[p],[4,this.renderStack(f)]):[3,30];case 28:m.sent(),m.label=29;case 29:return p++,[3,27];case 30:return[2]}}))}))},t.prototype.mask=function(e){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(e.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(e){this.ctx.beginPath(),this.formatPath(e),this.ctx.closePath()},t.prototype.formatPath=function(e){var t=this;e.forEach((function(e,s){var i=wg(e)?e.start:e;0===s?t.ctx.moveTo(i.x,i.y):t.ctx.lineTo(i.x,i.y),wg(e)&&t.ctx.bezierCurveTo(e.startControl.x,e.startControl.y,e.endControl.x,e.endControl.y,e.end.x,e.end.y)}))},t.prototype.renderRepeat=function(e,t,s,i){this.path(e),this.ctx.fillStyle=t,this.ctx.translate(s,i),this.ctx.fill(),this.ctx.translate(-s,-i)},t.prototype.resizeImage=function(e,t,s){var i;if(e.width===t&&e.height===s)return e;var r=(null!==(i=this.canvas.ownerDocument)&&void 0!==i?i:document).createElement("canvas");return r.width=Math.max(1,t),r.height=Math.max(1,s),r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,t,s),r},t.prototype.renderBackgroundImage=function(e){return $c(this,void 0,void 0,(function(){var t,s,i,r,o,n;return eu(this,(function(a){switch(a.label){case 0:t=e.styles.backgroundImage.length-1,s=function(s){var r,o,n,a,l,h,c,u,A,p,d,f,m,g,y,E,v,_,I,T,P,D,b,R,C,x,N,O,S,w,M;return eu(this,(function(B){switch(B.label){case 0:if(0!==s.type)return[3,5];r=void 0,o=s.url,B.label=1;case 1:return B.trys.push([1,3,,4]),[4,i.context.cache.match(o)];case 2:return r=B.sent(),[3,4];case 3:return B.sent(),i.context.logger.error("Error loading background-image "+o),[3,4];case 4:return r&&(n=Jg(e,t,[r.width,r.height,r.width/r.height]),E=n[0],D=n[1],b=n[2],I=n[3],T=n[4],g=i.ctx.createPattern(i.resizeImage(r,I,T),"repeat"),i.renderRepeat(E,g,D,b)),[3,6];case 5:1===s.type?(a=Jg(e,t,[null,null,null]),E=a[0],D=a[1],b=a[2],I=a[3],T=a[4],l=Tp(s.angle,I,T),h=l[0],c=l[1],u=l[2],A=l[3],p=l[4],(d=document.createElement("canvas")).width=I,d.height=T,f=d.getContext("2d"),m=f.createLinearGradient(c,A,u,p),Ip(s.stops,h).forEach((function(e){return m.addColorStop(e.stop,cp(e.color))})),f.fillStyle=m,f.fillRect(0,0,I,T),I>0&&T>0&&(g=i.ctx.createPattern(d,"repeat"),i.renderRepeat(E,g,D,b))):function(e){return 2===e.type}(s)&&(y=Jg(e,t,[null,null,null]),E=y[0],v=y[1],_=y[2],I=y[3],T=y[4],P=0===s.position.length?[JA]:s.position,D=tp(P[0],I),b=tp(P[P.length-1],T),R=function(e,t,s,i,r){var o=0,n=0;switch(e.size){case 0:0===e.shape?o=n=Math.min(Math.abs(t),Math.abs(t-i),Math.abs(s),Math.abs(s-r)):1===e.shape&&(o=Math.min(Math.abs(t),Math.abs(t-i)),n=Math.min(Math.abs(s),Math.abs(s-r)));break;case 2:if(0===e.shape)o=n=Math.min(Pp(t,s),Pp(t,s-r),Pp(t-i,s),Pp(t-i,s-r));else if(1===e.shape){var a=Math.min(Math.abs(s),Math.abs(s-r))/Math.min(Math.abs(t),Math.abs(t-i)),l=Dp(i,r,t,s,!0),h=l[0],c=l[1];n=a*(o=Pp(h-t,(c-s)/a))}break;case 1:0===e.shape?o=n=Math.max(Math.abs(t),Math.abs(t-i),Math.abs(s),Math.abs(s-r)):1===e.shape&&(o=Math.max(Math.abs(t),Math.abs(t-i)),n=Math.max(Math.abs(s),Math.abs(s-r)));break;case 3:if(0===e.shape)o=n=Math.max(Pp(t,s),Pp(t,s-r),Pp(t-i,s),Pp(t-i,s-r));else if(1===e.shape){a=Math.max(Math.abs(s),Math.abs(s-r))/Math.max(Math.abs(t),Math.abs(t-i));var u=Dp(i,r,t,s,!1);h=u[0],c=u[1],n=a*(o=Pp(h-t,(c-s)/a))}}return Array.isArray(e.size)&&(o=tp(e.size[0],i),n=2===e.size.length?tp(e.size[1],r):o),[o,n]}(s,D,b,I,T),C=R[0],x=R[1],C>0&&x>0&&(N=i.ctx.createRadialGradient(v+D,_+b,0,v+D,_+b,C),Ip(s.stops,2*C).forEach((function(e){return N.addColorStop(e.stop,cp(e.color))})),i.path(E),i.ctx.fillStyle=N,C!==x?(O=e.bounds.left+.5*e.bounds.width,S=e.bounds.top+.5*e.bounds.height,M=1/(w=x/C),i.ctx.save(),i.ctx.translate(O,S),i.ctx.transform(1,0,0,w,0,0),i.ctx.translate(-O,-S),i.ctx.fillRect(v,M*(_-S)+S,I,T*M),i.ctx.restore()):i.ctx.fill())),B.label=6;case 6:return t--,[2]}}))},i=this,r=0,o=e.styles.backgroundImage.slice(0).reverse(),a.label=1;case 1:return r<o.length?(n=o[r],[5,s(n)]):[3,4];case 2:a.sent(),a.label=3;case 3:return r++,[3,1];case 4:return[2]}}))}))},t.prototype.renderSolidBorder=function(e,t,s){return $c(this,void 0,void 0,(function(){return eu(this,(function(i){return this.path(Kg(s,t)),this.ctx.fillStyle=cp(e),this.ctx.fill(),[2]}))}))},t.prototype.renderDoubleBorder=function(e,t,s,i){return $c(this,void 0,void 0,(function(){var r,o;return eu(this,(function(n){switch(n.label){case 0:return t<3?[4,this.renderSolidBorder(e,s,i)]:[3,2];case 1:return n.sent(),[2];case 2:return r=function(e,t){switch(t){case 0:return Xg(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Xg(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Xg(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);default:return Xg(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}}(i,s),this.path(r),this.ctx.fillStyle=cp(e),this.ctx.fill(),o=function(e,t){switch(t){case 0:return Xg(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Xg(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Xg(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);default:return Xg(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}}(i,s),this.path(o),this.ctx.fill(),[2]}}))}))},t.prototype.renderNodeBackgroundAndBorders=function(e){return $c(this,void 0,void 0,(function(){var t,s,i,r,o,n,a,l,h=this;return eu(this,(function(c){switch(c.label){case 0:return this.applyEffects(e.getEffects(2)),t=e.container.styles,s=!hp(t.backgroundColor)||t.backgroundImage.length,i=[{style:t.borderTopStyle,color:t.borderTopColor,width:t.borderTopWidth},{style:t.borderRightStyle,color:t.borderRightColor,width:t.borderRightWidth},{style:t.borderBottomStyle,color:t.borderBottomColor,width:t.borderBottomWidth},{style:t.borderLeftStyle,color:t.borderLeftColor,width:t.borderLeftWidth}],r=hy(sy(t.backgroundClip,0),e.curves),s||t.boxShadow.length?(this.ctx.save(),this.path(r),this.ctx.clip(),hp(t.backgroundColor)||(this.ctx.fillStyle=cp(t.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(e.container)]):[3,2];case 1:c.sent(),this.ctx.restore(),t.boxShadow.slice(0).reverse().forEach((function(t){h.ctx.save();var s,i,r,o,n,a=Fg(e.curves),l=t.inset?0:1e4,c=(s=a,i=-l+(t.inset?1:-1)*t.spread.number,r=(t.inset?1:-1)*t.spread.number,o=t.spread.number*(t.inset?-2:2),n=t.spread.number*(t.inset?-2:2),s.map((function(e,t){switch(t){case 0:return e.add(i,r);case 1:return e.add(i+o,r);case 2:return e.add(i+o,r+n);case 3:return e.add(i,r+n)}return e})));t.inset?(h.path(a),h.ctx.clip(),h.mask(c)):(h.mask(a),h.ctx.clip(),h.path(c)),h.ctx.shadowOffsetX=t.offsetX.number+l,h.ctx.shadowOffsetY=t.offsetY.number,h.ctx.shadowColor=cp(t.color),h.ctx.shadowBlur=t.blur.number,h.ctx.fillStyle=t.inset?cp(t.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()})),c.label=2;case 2:o=0,n=0,a=i,c.label=3;case 3:return n<a.length?0!==(l=a[n]).style&&!hp(l.color)&&l.width>0?2!==l.style?[3,5]:[4,this.renderDashedDottedBorder(l.color,l.width,o,e.curves,2)]:[3,11]:[3,13];case 4:return c.sent(),[3,11];case 5:return 3!==l.style?[3,7]:[4,this.renderDashedDottedBorder(l.color,l.width,o,e.curves,3)];case 6:return c.sent(),[3,11];case 7:return 4!==l.style?[3,9]:[4,this.renderDoubleBorder(l.color,l.width,o,e.curves)];case 8:return c.sent(),[3,11];case 9:return[4,this.renderSolidBorder(l.color,o,e.curves)];case 10:c.sent(),c.label=11;case 11:o++,c.label=12;case 12:return n++,[3,3];case 13:return[2]}}))}))},t.prototype.renderDashedDottedBorder=function(e,t,s,i,r){return $c(this,void 0,void 0,(function(){var o,n,a,l,h,c,u,A,p,d,f,m,g,y,E,v;return eu(this,(function(_){return this.ctx.save(),o=function(e,t){switch(t){case 0:return Yg(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return Yg(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return Yg(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);default:return Yg(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}}(i,s),n=Kg(i,s),2===r&&(this.path(n),this.ctx.clip()),wg(n[0])?(a=n[0].start.x,l=n[0].start.y):(a=n[0].x,l=n[0].y),wg(n[1])?(h=n[1].end.x,c=n[1].end.y):(h=n[1].x,c=n[1].y),u=0===s||2===s?Math.abs(a-h):Math.abs(l-c),this.ctx.beginPath(),3===r?this.formatPath(o):this.formatPath(n.slice(0,2)),A=t<3?3*t:2*t,p=t<3?2*t:t,3===r&&(A=t,p=t),d=!0,u<=2*A?d=!1:u<=2*A+p?(A*=f=u/(2*A+p),p*=f):(m=Math.floor((u+p)/(A+p)),g=(u-m*A)/(m-1),p=(y=(u-(m+1)*A)/m)<=0||Math.abs(p-g)<Math.abs(p-y)?g:y),d&&(3===r?this.ctx.setLineDash([0,A+p]):this.ctx.setLineDash([A,p])),3===r?(this.ctx.lineCap="round",this.ctx.lineWidth=t):this.ctx.lineWidth=2*t+1.1,this.ctx.strokeStyle=cp(e),this.ctx.stroke(),this.ctx.setLineDash([]),2===r&&(wg(n[0])&&(E=n[3],v=n[0],this.ctx.beginPath(),this.formatPath([new Ng(E.end.x,E.end.y),new Ng(v.start.x,v.start.y)]),this.ctx.stroke()),wg(n[1])&&(E=n[1],v=n[2],this.ctx.beginPath(),this.formatPath([new Ng(E.end.x,E.end.y),new Ng(v.start.x,v.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]}))}))},t.prototype.render=function(e){return $c(this,void 0,void 0,(function(){var t;return eu(this,(function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=cp(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),i=new Qg(e,null),r=new jg(i),Wg(i,r,r,o=[]),zg(i.container,o),t=r,[4,this.renderStack(t)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}var i,r,o}))}))},t}(ny),ly=function(e){return e instanceof mm||(e instanceof fm||e instanceof dm&&e.type!==um&&e.type!==cm)},hy=function(e,t){switch(e){case 0:return Fg(t);case 2:return function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]}(t);default:return Lg(t)}},cy=function(e){switch(e){case 1:return"center";case 2:return"right";default:return"left"}},uy=["-apple-system","system-ui"],Ay=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter((function(e){return-1===uy.indexOf(e)})):e},py=function(e){function t(t,s){var i=e.call(this,t,s)||this;return i.canvas=s.canvas?s.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),i.options=s,i.canvas.width=Math.floor(s.width*s.scale),i.canvas.height=Math.floor(s.height*s.scale),i.canvas.style.width=s.width+"px",i.canvas.style.height=s.height+"px",i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-s.x,-s.y),i.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+s.width+"x"+s.height+" at "+s.x+","+s.y+") with scale "+s.scale),i}return qc(t,e),t.prototype.render=function(e){return $c(this,void 0,void 0,(function(){var t,s;return eu(this,(function(i){switch(i.label){case 0:return t=jf(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,e),[4,dy(t)];case 1:return s=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=cp(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}}))}))},t}(ny),dy=function(e){return new Promise((function(t,s){var i=new Image;i.onload=function(){t(i)},i.onerror=s,i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))}))},fy=function(){function e(e){var t=e.id,s=e.enabled;this.id=t,this.enabled=s,this.start=Date.now()}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.debug?console.debug.apply(console,tu([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&"undefined"!=typeof window&&window.console&&"function"==typeof console.info&&console.info.apply(console,tu([this.id,this.getTime()+"ms"],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.warn?console.warn.apply(console,tu([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.error?console.error.apply(console,tu([this.id,this.getTime()+"ms"],e)):this.info.apply(this,e))},e.instances={},e}(),my=function(){function e(t,s){var i;this.windowBounds=s,this.instanceName="#"+e.instanceCount++,this.logger=new fy({id:this.instanceName,enabled:t.logging}),this.cache=null!==(i=t.cache)&&void 0!==i?i:new _g(this,t)}return e.instanceCount=1,e}(),gy=function(e,t){return void 0===t&&(t={}),yy(e,t)};"undefined"!=typeof window&&vg.setContext(window);var yy=function(e,t){return $c(void 0,void 0,void 0,(function(){var s,i,r,o,n,a,l,h,c,u,A,p,d,f,m,g,y,E,v,_,I,T,P,D,b,R,C,x,N,O,S,w,M,B,F,L,U,H;return eu(this,(function(G){switch(G.label){case 0:if(!e||"object"!=typeof e)return[2,Promise.reject("Invalid element provided as first argument")];if(!(s=e.ownerDocument))throw new Error("Element is not attached to a Document");if(!(i=s.defaultView))throw new Error("Document is not attached to a Window");return r={allowTaint:null!==(T=t.allowTaint)&&void 0!==T&&T,imageTimeout:null!==(P=t.imageTimeout)&&void 0!==P?P:15e3,proxy:t.proxy,useCORS:null!==(D=t.useCORS)&&void 0!==D&&D},o=Jc({logging:null===(b=t.logging)||void 0===b||b,cache:t.cache},r),n={windowWidth:null!==(R=t.windowWidth)&&void 0!==R?R:i.innerWidth,windowHeight:null!==(C=t.windowHeight)&&void 0!==C?C:i.innerHeight,scrollX:null!==(x=t.scrollX)&&void 0!==x?x:i.pageXOffset,scrollY:null!==(N=t.scrollY)&&void 0!==N?N:i.pageYOffset},a=new su(n.scrollX,n.scrollY,n.windowWidth,n.windowHeight),l=new my(o,a),h=null!==(O=t.foreignObjectRendering)&&void 0!==O&&O,c={allowTaint:null!==(S=t.allowTaint)&&void 0!==S&&S,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:h,copyStyles:h},l.logger.debug("Starting document clone with size "+a.width+"x"+a.height+" scrolled to "+-a.left+","+-a.top),u=new rg(l,e,c),(A=u.clonedReferenceElement)?[4,u.toIFrame(s,a)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return p=G.sent(),d=Sm(A)||"HTML"===A.tagName?function(e){var t=e.body,s=e.documentElement;if(!t||!s)throw new Error("Unable to get document size");var i=Math.max(Math.max(t.scrollWidth,s.scrollWidth),Math.max(t.offsetWidth,s.offsetWidth),Math.max(t.clientWidth,s.clientWidth)),r=Math.max(Math.max(t.scrollHeight,s.scrollHeight),Math.max(t.offsetHeight,s.offsetHeight),Math.max(t.clientHeight,s.clientHeight));return new su(0,0,i,r)}(A.ownerDocument):iu(l,A),f=d.width,m=d.height,g=d.left,y=d.top,E=Ey(l,A,t.backgroundColor),v={canvas:t.canvas,backgroundColor:E,scale:null!==(M=null!==(w=t.scale)&&void 0!==w?w:i.devicePixelRatio)&&void 0!==M?M:1,x:(null!==(B=t.x)&&void 0!==B?B:0)+g,y:(null!==(F=t.y)&&void 0!==F?F:0)+y,width:null!==(L=t.width)&&void 0!==L?L:Math.ceil(f),height:null!==(U=t.height)&&void 0!==U?U:Math.ceil(m)},h?(l.logger.debug("Document cloned, using foreign object rendering"),[4,new py(l,v).render(A)]):[3,3];case 2:return _=G.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+g+","+y+" with size "+f+"x"+m+" using computed rendering"),l.logger.debug("Starting DOM parsing"),I=_m(l,A),E===I.styles.backgroundColor&&(I.styles.backgroundColor=yp.TRANSPARENT),l.logger.debug("Starting renderer for element at "+v.x+","+v.y+" with size "+v.width+"x"+v.height),[4,new ay(l,v).render(I)];case 4:_=G.sent(),G.label=5;case 5:return(null===(H=t.removeContainer)||void 0===H||H)&&(rg.destroy(p)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,_]}}))}))},Ey=function(e,t,s){var i=t.ownerDocument,r=i.documentElement?gp(e,getComputedStyle(i.documentElement).backgroundColor):yp.TRANSPARENT,o=i.body?gp(e,getComputedStyle(i.body).backgroundColor):yp.TRANSPARENT,n="string"==typeof s?gp(e,s):null===s?yp.TRANSPARENT:4294967295;return t===i.documentElement?hp(r)?hp(o)?n:o:r:n};class vy{constructor(e){this.language="en",this.localeService=e.localeService||new Fo,this.scene=new Bi(this,{canvasId:e.canvasId,canvasElement:e.canvasElement,keyboardEventsElement:e.keyboardEventsElement,contextAttr:{preserveDrawingBuffer:!1!==e.preserveDrawingBuffer,premultipliedAlpha:!!e.premultipliedAlpha,antialias:!1!==e.antialias},spinnerElementId:e.spinnerElementId,transparent:!1!==e.transparent,gammaInput:!0,gammaOutput:!1,backgroundColor:e.backgroundColor,backgroundColorFromAmbientLight:e.backgroundColorFromAmbientLight,ticksPerRender:1,ticksPerOcclusionTest:20,units:e.units,scale:e.scale,origin:e.origin,saoEnabled:e.saoEnabled,alphaDepthMask:!1!==e.alphaDepthMask,entityOffsetsEnabled:!!e.entityOffsetsEnabled,pickSurfacePrecisionEnabled:!!e.pickSurfacePrecisionEnabled,logarithmicDepthBufferEnabled:!!e.logarithmicDepthBufferEnabled,pbrEnabled:!!e.pbrEnabled,colorTextureEnabled:!1!==e.colorTextureEnabled}),this.metaScene=new Yc(this,this.scene),this.id=e.id||this.scene.id,this.camera=this.scene.camera,this.cameraFlight=new Qo(this.scene,{duration:.5}),this.cameraControl=new jc(this.scene,{doublePickFlyTo:!0}),this._plugins=[],this._eventSubs={}}get capabilities(){return this.scene.capabilities}on(e,t){let s=this._eventSubs[e];s||(s=[],this._eventSubs[e]=s),s.push(t)}fire(e,t){const s=this._eventSubs[e];if(s)for(let e=0,i=s.length;e<i;e++)s[e](t)}off(e){}log(e){console.log(`[xeokit viewer ${this.id}]: ${e}`)}error(e){console.error(`[xeokit viewer ${this.id}]: ${e}`)}addPlugin(e){this._plugins.push(e)}removePlugin(e){for(let t=0,s=this._plugins.length;t<s;t++){const s=this._plugins[t];if(s===e)return s.clear&&s.clear(),void this._plugins.splice(t,1)}}sendToPlugins(e,t){for(let s=0,i=this._plugins.length;s<i;s++){const i=this._plugins[s];i.send&&i.send(e,t)}}clear(){throw'Viewer#clear() no longer implemented - use \'#sendToPlugins("clear") instead'}resetView(){throw"Viewer#resetView() no longer implemented - use CameraMemento & ObjectsMemento classes instead"}beginSnapshot(){this._snapshotBegun||(this.scene._renderer.beginSnapshot(),this._snapshotBegun=!0)}getSnapshot(e={}){const t=!this._snapshotBegun,s=void 0!==e.width&&void 0!==e.height,i=this.scene.canvas.canvas,r=i.clientWidth,o=i.clientHeight,n=e.width?Math.floor(e.width):i.width,a=e.height?Math.floor(e.height):i.height;s&&(i.width=n,i.height=a),this._snapshotBegun||this.beginSnapshot(),e.includeGizmos||this.sendToPlugins("snapshotStarting");const l={};for(let e=0,t=this._plugins.length;e<t;e++){const t=this._plugins[e];if(t.getContainerElement){const e=t.getContainerElement();e!==document.body&&(l[e.id]||(l[e.id]=!0,gy(e).then((function(e){document.body.appendChild(e)}))))}}this.scene._renderer.renderSnapshot();const h=this.scene._renderer.readSnapshot(e);return s&&(i.width=r,i.height=o,this.scene.glRedraw()),e.includeGizmos||this.sendToPlugins("snapshotFinished"),t&&this.endSnapshot(),h}getSnapshotWithPlugins(e={}){return new Promise(((t,s)=>{const i=!this._snapshotBegun,r=void 0!==e.width&&void 0!==e.height,o=this.scene.canvas.canvas,n=o.clientWidth,a=o.clientHeight,l=e.width?Math.floor(e.width):o.width,h=e.height?Math.floor(e.height):o.height;r&&(o.width=l,o.height=h),this._snapshotBegun||this.beginSnapshot(),e.includeGizmos||this.sendToPlugins("snapshotStarting"),this.scene._renderer.renderSnapshot();const c=this.scene._renderer.readSnapshotAsCanvas();r&&(o.width=n,o.height=a,this.scene.glRedraw());const u={},A=[],p=()=>{e.includeGizmos||this.sendToPlugins("snapshotFinished"),i&&this.endSnapshot();let s=e.format||"png";"jpeg"!==s&&"png"!==s&&"bmp"!==s&&(console.error("Unsupported image format: '"+s+"' - supported types are 'jpeg', 'bmp' and 'png' - defaulting to 'png'"),s="png"),e.includeGizmos||this.sendToPlugins("snapshotFinished"),i&&this.endSnapshot(),t(c.toDataURL(`image/${s}`))};for(let e=0,t=this._plugins.length;e<t;e++){const t=this._plugins[e];if(t.getContainerElement){const e=t.getContainerElement();e!==document.body&&(u[e.id]||(u[e.id]=!0,A.push(e)))}}if(A.length>0)for(let e=0,t=A.length;e<t;e++){const t=A[e];gy(t,{canvas:c,backgroundColor:null,scale:c.width/t.clientWidth}).then((()=>{A.pop(),0===A.length&&p()}))}else p()}))}endSnapshot(){this._snapshotBegun&&(this.scene._renderer.endSnapshot(),this.scene._renderer.render({force:!0}),this._snapshotBegun=!1)}destroy(){const e=this._plugins.slice();for(let t=0,s=e.length;t<s;t++){e[t].destroy()}this.scene.destroy()}}p.AABB3(),p.vec3();class _y extends a{constructor(e,t={}){super("FastNav",e),this._hideColorTexture=!1!==t.hideColorTexture,this._hidePBR=!1!==t.hidePBR,this._hideSAO=!1!==t.hideSAO,this._hideEdges=!1!==t.hideEdges,this._hideTransparentObjects=!!t.hideTransparentObjects,this._scaleCanvasResolution=!!t.scaleCanvasResolution,this._scaleCanvasResolutionFactor=t.scaleCanvasResolutionFactor||.6,this._delayBeforeRestore=!1!==t.delayBeforeRestore,this._delayBeforeRestoreSeconds=t.delayBeforeRestoreSeconds||.5;let s=1e3*this._delayBeforeRestoreSeconds,i=!1;const r=()=>{s=1e3*this._delayBeforeRestoreSeconds,i||(e.scene._renderer.setColorTextureEnabled(!this._hideColorTexture),e.scene._renderer.setPBREnabled(!this._hidePBR),e.scene._renderer.setSAOEnabled(!this._hideSAO),e.scene._renderer.setTransparentEnabled(!this._hideTransparentObjects),e.scene._renderer.setEdgesEnabled(!this._hideEdges),this._scaleCanvasResolution?e.scene.canvas.resolutionScale=this._scaleCanvasResolutionFactor:e.scene.canvas.resolutionScale=1,i=!0)};this._onCanvasBoundary=e.scene.canvas.on("boundary",r),this._onCameraMatrix=e.scene.camera.on("matrix",r),this._onSceneTick=e.scene.on("tick",(t=>{i&&(s-=t.deltaTime,(!this._delayBeforeRestore||s<=0)&&(e.scene.canvas.resolutionScale=1,e.scene._renderer.setEdgesEnabled(!0),e.scene._renderer.setColorTextureEnabled(!0),e.scene._renderer.setPBREnabled(!0),e.scene._renderer.setSAOEnabled(!0),e.scene._renderer.setTransparentEnabled(!0),i=!1))}));let o=!1;this._onSceneMouseDown=e.scene.input.on("mousedown",(()=>{o=!0})),this._onSceneMouseUp=e.scene.input.on("mouseup",(()=>{o=!1})),this._onSceneMouseMove=e.scene.input.on("mousemove",(()=>{o&&r()}))}get hideColorTexture(){return this._hideColorTexture}set hideColorTexture(e){this._hideColorTexture=e}get hidePBR(){return this._hidePBR}set hidePBR(e){this._hidePBR=e}get hideSAO(){return this._hideSAO}set hideSAO(e){this._hideSAO=e}get hideEdges(){return this._hideEdges}set hideEdges(e){this._hideEdges=e}get hideTransparentObjects(){return this._hideTransparentObjects}set hideTransparentObjects(e){this._hideTransparentObjects=!1!==e}get scaleCanvasResolution(){return this._scaleCanvasResolution}set scaleCanvasResolution(e){this._scaleCanvasResolution=e}get scaleCanvasResolutionFactor(){return this._scaleCanvasResolutionFactor}set scaleCanvasResolutionFactor(e){this._scaleCanvasResolutionFactor=e||.6}get delayBeforeRestore(){return this._delayBeforeRestore}set delayBeforeRestore(e){this._delayBeforeRestore=e}get delayBeforeRestoreSeconds(){return this._delayBeforeRestoreSeconds}set delayBeforeRestoreSeconds(e){this._delayBeforeRestoreSeconds=null!=e?e:.5}send(e,t){}destroy(){this.viewer.scene.camera.off(this._onCameraMatrix),this.viewer.scene.canvas.off(this._onCanvasBoundary),this.viewer.scene.input.off(this._onSceneMouseDown),this.viewer.scene.input.off(this._onSceneMouseUp),this.viewer.scene.input.off(this._onSceneMouseMove),this.viewer.scene.off(this._onSceneTick),super.destroy()}}Boolean("object"!=typeof process||"[object process]"!==String(process)||process.browser);const Iy="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version);function Ty(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}Iy&&parseFloat(Iy[1]);const Py="object"!=typeof process||"[object process]"!==String(process)||process.browser,Dy="undefined"!=typeof window&&void 0!==window.orientation,by="undefined"!=typeof process&&process.version&&/v([0-9]*)/.exec(process.version);function Ry(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}by&&parseFloat(by[1]);class Cy{constructor(e,t){Ry(this,"name",void 0),Ry(this,"workerThread",void 0),Ry(this,"isRunning",!0),Ry(this,"result",void 0),Ry(this,"_resolve",(()=>{})),Ry(this,"_reject",(()=>{})),this.name=e,this.workerThread=t,this.result=new Promise(((e,t)=>{this._resolve=e,this._reject=t}))}postMessage(e,t){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:t})}done(e){Ty(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Ty(this.isRunning),this.isRunning=!1,this._reject(e)}}class xy{}const Ny=new Map;function Oy(e){Ty(e.source&&!e.url||!e.source&&e.url);let t=Ny.get(e.source||e.url);return t||(e.url&&(t=function(e){if(!e.startsWith("http"))return e;return Sy((t=e,"try {\n  importScripts('".concat(t,"');\n} catch (error) {\n  console.error(error);\n  throw error;\n}")));var t}(e.url),Ny.set(e.url,t)),e.source&&(t=Sy(e.source),Ny.set(e.source,t))),Ty(t),t}function Sy(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function wy(e,t=!0,s){const i=s||new Set;if(e){if(My(e))i.add(e);else if(My(e.buffer))i.add(e.buffer);else if(ArrayBuffer.isView(e));else if(t&&"object"==typeof e)for(const s in e)wy(e[s],t,i)}else;return void 0===s?Array.from(i):[]}function My(e){return!!e&&(e instanceof ArrayBuffer||("undefined"!=typeof MessagePort&&e instanceof MessagePort||("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas)))}const By=()=>{};class Fy{static isSupported(){return"undefined"!=typeof Worker&&Py||void 0!==typeof xy}constructor(e){Ry(this,"name",void 0),Ry(this,"source",void 0),Ry(this,"url",void 0),Ry(this,"terminated",!1),Ry(this,"worker",void 0),Ry(this,"onMessage",void 0),Ry(this,"onError",void 0),Ry(this,"_loadableURL","");const{name:t,source:s,url:i}=e;Ty(s||i),this.name=t,this.source=s,this.url=i,this.onMessage=By,this.onError=e=>console.log(e),this.worker=Py?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=By,this.onError=By,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(e,t){t=t||wy(e),this.worker.postMessage(e,t)}_getErrorFromErrorEvent(e){let t="Failed to load ";return t+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(t+="".concat(e.message," in ")),e.lineno&&(t+=":".concat(e.lineno,":").concat(e.colno)),new Error(t)}_createBrowserWorker(){this._loadableURL=Oy({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=e=>{e.data?this.onMessage(e.data):this.onError(new Error("No data received"))},e.onerror=e=>{this.onError(this._getErrorFromErrorEvent(e)),this.terminated=!0},e.onmessageerror=e=>console.error(e),e}_createNodeWorker(){let e;if(this.url){const t=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new xy(t,{eval:!1})}else{if(!this.source)throw new Error("no worker");e=new xy(this.source,{eval:!0})}return e.on("message",(e=>{this.onMessage(e)})),e.on("error",(e=>{this.onError(e)})),e.on("exit",(e=>{})),e}}class Ly{static isSupported(){return Fy.isSupported()}constructor(e){Ry(this,"name","unnamed"),Ry(this,"source",void 0),Ry(this,"url",void 0),Ry(this,"maxConcurrency",1),Ry(this,"maxMobileConcurrency",1),Ry(this,"onDebug",(()=>{})),Ry(this,"reuseWorkers",!0),Ry(this,"props",{}),Ry(this,"jobQueue",[]),Ry(this,"idleQueue",[]),Ry(this,"count",0),Ry(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach((e=>e.destroy())),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},void 0!==e.name&&(this.name=e.name),void 0!==e.maxConcurrency&&(this.maxConcurrency=e.maxConcurrency),void 0!==e.maxMobileConcurrency&&(this.maxMobileConcurrency=e.maxMobileConcurrency),void 0!==e.reuseWorkers&&(this.reuseWorkers=e.reuseWorkers),void 0!==e.onDebug&&(this.onDebug=e.onDebug)}async startJob(e,t=((e,t,s)=>e.done(s)),s=((e,t)=>e.error(t))){const i=new Promise((i=>(this.jobQueue.push({name:e,onMessage:t,onError:s,onStart:i}),this)));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const t=this.jobQueue.shift();if(t){this.onDebug({message:"Starting job",name:t.name,workerThread:e,backlog:this.jobQueue.length});const s=new Cy(t.name,e);e.onMessage=e=>t.onMessage(s,e.type,e.payload),e.onError=e=>t.onError(s,e),t.onStart(s);try{await s.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new Fy({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return Dy?this.maxMobileConcurrency:this.maxConcurrency}}const Uy={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class Hy{static isSupported(){return Fy.isSupported()}static getWorkerFarm(e={}){return Hy._workerFarm=Hy._workerFarm||new Hy({}),Hy._workerFarm.setProps(e),Hy._workerFarm}constructor(e){Ry(this,"props",void 0),Ry(this,"workerPools",new Map),this.props={...Uy},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const e of this.workerPools.values())e.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:t,source:s,url:i}=e;let r=this.workerPools.get(t);return r||(r=new Ly({name:t,source:s,url:i}),r.setProps(this._getWorkerPoolProps()),this.workerPools.set(t,r)),r}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}Ry(Hy,"_workerFarm",void 0);const Gy={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document,process:"object"==typeof process&&process},Vy=Gy.window||Gy.self||Gy.global,ky=Gy.process||{},jy="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source",Qy=!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||function(e){if("undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof process&&"object"==typeof process.versions&&Boolean(process.versions.electron))return!0;const t="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,s=e||t;return!!(s&&s.indexOf("Electron")>=0)}();class Wy{constructor(e,t,s="sessionStorage"){this.storage=function(e){try{const t=window[e],s="__storage_test__";return t.setItem(s,s),t.removeItem(s),t}catch(e){return null}}(s),this.id=e,this.config={},Object.assign(this.config,t),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){return this.config={},this.updateConfiguration(e)}updateConfiguration(e){if(Object.assign(this.config,e),this.storage){const e=JSON.stringify(this.config);this.storage.setItem(this.id,e)}return this}_loadConfiguration(){let e={};if(this.storage){const t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}function zy(e,t,s,i=600){const r=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>i&&(s=Math.min(s,i/e.width));const o=e.width*s,n=e.height*s,a=["font-size:1px;","padding:".concat(Math.floor(n/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(n,"px;"),"background:url(".concat(r,");"),"background-size:".concat(o,"px ").concat(n,"px;"),"color:transparent;"].join("");return["".concat(t," %c+"),a]}const Ky={BLACK:30,RED:31,GREEN:32,YELLOW:33,BLUE:34,MAGENTA:35,CYAN:36,WHITE:37,BRIGHT_BLACK:90,BRIGHT_RED:91,BRIGHT_GREEN:92,BRIGHT_YELLOW:93,BRIGHT_BLUE:94,BRIGHT_MAGENTA:95,BRIGHT_CYAN:96,BRIGHT_WHITE:97};function Yy(e){return"string"==typeof e?Ky[e.toUpperCase()]||Ky.WHITE:e}function Xy(e,t){if(!e)throw new Error(t||"Assertion failed")}function Zy(){let e;if(Qy&&Vy.performance)e=Vy.performance.now();else if(ky.hrtime){const t=ky.hrtime();e=1e3*t[0]+t[1]/1e6}else e=Date.now();return e}const qy={debug:Qy&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},Jy={enabled:!0,level:0};function $y(){}const eE={},tE={once:!0};function sE(e){for(const t in e)for(const s in e[t])return s||"untitled";return"empty"}class iE{constructor({id:e}={id:""}){this.id=e,this.VERSION=jy,this._startTs=Zy(),this._deltaTs=Zy(),this.LOG_THROTTLE_TIMEOUT=0,this._storage=new Wy("__probe-".concat(this.id,"__"),Jy),this.userData={},this.timeStamp("".concat(this.id," started")),function(e,t=["constructor"]){const s=Object.getPrototypeOf(e),i=Object.getOwnPropertyNames(s);for(const s of i)"function"==typeof e[s]&&(t.find((e=>s===e))||(e[s]=e[s].bind(e)))}(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Zy()-this._startTs).toPrecision(10))}getDelta(){return Number((Zy()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(e=!0){return this._storage.updateConfiguration({enabled:e}),this}setLevel(e){return this._storage.updateConfiguration({level:e}),this}assert(e,t){Xy(e,t)}warn(e){return this._getLogFunction(0,e,qy.warn,arguments,tE)}error(e){return this._getLogFunction(0,e,qy.error,arguments)}deprecated(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}removed(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}probe(e,t){return this._getLogFunction(e,t,qy.log,arguments,{time:!0,once:!0})}log(e,t){return this._getLogFunction(e,t,qy.debug,arguments)}info(e,t){return this._getLogFunction(e,t,console.info,arguments)}once(e,t){return this._getLogFunction(e,t,qy.debug||qy.info,arguments,tE)}table(e,t,s){return t?this._getLogFunction(e,t,console.table||$y,s&&[s],{tag:sE(t)}):$y}image({logLevel:e,priority:t,image:s,message:i="",scale:r=1}){return this._shouldLog(e||t)?Qy?function({image:e,message:t="",scale:s=1}){if("string"==typeof e){const i=new Image;return i.onload=()=>{const e=zy(i,t,s);console.log(...e)},i.src=e,$y}const i=e.nodeName||"";if("img"===i.toLowerCase())return console.log(...zy(e,t,s)),$y;if("canvas"===i.toLowerCase()){const i=new Image;return i.onload=()=>console.log(...zy(i,t,s)),i.src=e.toDataURL(),$y}return $y}({image:s,message:i,scale:r}):function({image:e,message:t="",scale:s=1}){let i=null;try{i=module.require("asciify-image")}catch(e){}if(i)return()=>i(e,{fit:"box",width:"".concat(Math.round(80*s),"%")}).then((e=>console.log(e)));return $y}({image:s,message:i,scale:r}):$y}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}get(e){return this._storage.config[e]}set(e,t){this._storage.updateConfiguration({[e]:t})}time(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)}timeEnd(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,t){return this._getLogFunction(e,t,console.timeStamp||$y)}group(e,t,s={collapsed:!1}){s=oE({logLevel:e,message:t,opts:s});const{collapsed:i}=s;return s.method=(i?console.groupCollapsed:console.group)||console.info,this._getLogFunction(s)}groupCollapsed(e,t,s={}){return this.group(e,t,Object.assign({},s,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||$y)}withGroup(e,t,s){this.group(e,t)();try{s()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=rE(e)}_getLogFunction(e,t,s,i=[],r){if(this._shouldLog(e)){r=oE({logLevel:e,message:t,args:i,opts:r}),Xy(s=s||r.method),r.total=this.getTotal(),r.delta=this.getDelta(),this._deltaTs=Zy();const o=r.tag||r.message;if(r.once){if(eE[o])return $y;eE[o]=Zy()}return t=function(e,t,s){if("string"==typeof t){const i=s.time?function(e,t=8){const s=Math.max(t-e.length,0);return"".concat(" ".repeat(s)).concat(e)}(function(e){let t;return t=e<10?"".concat(e.toFixed(2),"ms"):e<100?"".concat(e.toFixed(1),"ms"):e<1e3?"".concat(e.toFixed(0),"ms"):"".concat((e/1e3).toFixed(2),"s"),t}(s.total)):"";t=s.time?"".concat(e,": ").concat(i,"  ").concat(t):"".concat(e,": ").concat(t),t=function(e,t,s){return Qy||"string"!=typeof e||(t&&(t=Yy(t),e="[".concat(t,"m").concat(e,"[39m")),s&&(t=Yy(s),e="[".concat(s+10,"m").concat(e,"[49m"))),e}(t,s.color,s.background)}return t}(this.id,r.message,r),s.bind(console,t,...r.args)}return $y}}function rE(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return Xy(Number.isFinite(t)&&t>=0),t}function oE(e){const{logLevel:t,message:s}=e;e.logLevel=rE(t);const i=e.args?Array.from(e.args):[];for(;i.length&&i.shift()!==s;);switch(e.args=i,typeof t){case"string":case"function":void 0!==s&&i.unshift(s),e.message=t;break;case"object":Object.assign(e,t)}"function"==typeof e.message&&(e.message=e.message());const r=typeof e.message;return Xy("string"===r||"object"===r),Object.assign(e,e.opts)}iE.VERSION=jy,new iE({id:"loaders.gl"});function nE(){return!("object"==typeof process&&"[object process]"===String(process)&&!process.browser)||function(e){if("undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof process&&"object"==typeof process.versions&&Boolean(process.versions.electron))return!0;const t="object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent,s=e||t;return!!(s&&s.indexOf("Electron")>=0)}()}new class{constructor(){Ry(this,"console",void 0),this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}};const aE={self:"undefined"!=typeof self&&self,window:"undefined"!=typeof window&&window,global:"undefined"!=typeof global&&global,document:"undefined"!=typeof document&&document,process:"object"==typeof process&&process},lE=aE.window||aE.self||aE.global,hE=aE.process||{},cE="undefined"!=typeof __VERSION__?__VERSION__:"untranspiled source";nE();class uE{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sessionStorage";Ry(this,"storage",void 0),Ry(this,"id",void 0),Ry(this,"config",{}),this.storage=function(e){try{const t=window[e],s="__storage_test__";return t.setItem(s,s),t.removeItem(s),t}catch(e){return null}}(s),this.id=e,this.config={},Object.assign(this.config,t),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){return this.config={},this.updateConfiguration(e)}updateConfiguration(e){if(Object.assign(this.config,e),this.storage){const e=JSON.stringify(this.config);this.storage.setItem(this.id,e)}return this}_loadConfiguration(){let e={};if(this.storage){const t=this.storage.getItem(this.id);e=t?JSON.parse(t):{}}return Object.assign(this.config,e),this}}function AE(e,t,s){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:600;const r=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>i&&(s=Math.min(s,i/e.width));const o=e.width*s,n=e.height*s,a=["font-size:1px;","padding:".concat(Math.floor(n/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(n,"px;"),"background:url(".concat(r,");"),"background-size:".concat(o,"px ").concat(n,"px;"),"color:transparent;"].join("");return["".concat(t," %c+"),a]}let pE;function dE(e){return"string"==typeof e?pE[e.toUpperCase()]||pE.WHITE:e}function fE(e,t){if(!e)throw new Error(t||"Assertion failed")}function mE(){let e;var t,s;if(nE&&"performance"in lE)e=null==lE||null===(t=lE.performance)||void 0===t||null===(s=t.now)||void 0===s?void 0:s.call(t);else if("hrtime"in hE){var i;const t=null==hE||null===(i=hE.hrtime)||void 0===i?void 0:i.call(hE);e=1e3*t[0]+t[1]/1e6}else e=Date.now();return e}!function(e){e[e.BLACK=30]="BLACK",e[e.RED=31]="RED",e[e.GREEN=32]="GREEN",e[e.YELLOW=33]="YELLOW",e[e.BLUE=34]="BLUE",e[e.MAGENTA=35]="MAGENTA",e[e.CYAN=36]="CYAN",e[e.WHITE=37]="WHITE",e[e.BRIGHT_BLACK=90]="BRIGHT_BLACK",e[e.BRIGHT_RED=91]="BRIGHT_RED",e[e.BRIGHT_GREEN=92]="BRIGHT_GREEN",e[e.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",e[e.BRIGHT_BLUE=94]="BRIGHT_BLUE",e[e.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",e[e.BRIGHT_CYAN=96]="BRIGHT_CYAN",e[e.BRIGHT_WHITE=97]="BRIGHT_WHITE"}(pE||(pE={}));const gE={debug:nE&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},yE={enabled:!0,level:0};function EE(){}const vE={},_E={once:!0};class IE{constructor(){let{id:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:""};Ry(this,"id",void 0),Ry(this,"VERSION",cE),Ry(this,"_startTs",mE()),Ry(this,"_deltaTs",mE()),Ry(this,"_storage",void 0),Ry(this,"userData",{}),Ry(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this._storage=new uE("__probe-".concat(this.id,"__"),yE),this.userData={},this.timeStamp("".concat(this.id," started")),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["constructor"];const s=Object.getPrototypeOf(e),i=Object.getOwnPropertyNames(s);for(const s of i)"function"==typeof e[s]&&(t.find((e=>s===e))||(e[s]=e[s].bind(e)))}(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((mE()-this._startTs).toPrecision(10))}getDelta(){return Number((mE()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._storage.updateConfiguration({enabled:e}),this}setLevel(e){return this._storage.updateConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,t){this._storage.updateConfiguration({[e]:t})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,t){fE(e,t)}warn(e){return this._getLogFunction(0,e,gE.warn,arguments,_E)}error(e){return this._getLogFunction(0,e,gE.error,arguments)}deprecated(e,t){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(t,"` instead"))}removed(e,t){return this.error("`".concat(e,"` has been removed. Use `").concat(t,"` instead"))}probe(e,t){return this._getLogFunction(e,t,gE.log,arguments,{time:!0,once:!0})}log(e,t){return this._getLogFunction(e,t,gE.debug,arguments)}info(e,t){return this._getLogFunction(e,t,console.info,arguments)}once(e,t){for(var s=arguments.length,i=new Array(s>2?s-2:0),r=2;r<s;r++)i[r-2]=arguments[r];return this._getLogFunction(e,t,gE.debug||gE.info,arguments,_E)}table(e,t,s){return t?this._getLogFunction(e,t,console.table||EE,s&&[s],{tag:DE(t)}):EE}image(e){let{logLevel:t,priority:s,image:i,message:r="",scale:o=1}=e;return this._shouldLog(t||s)?nE?function(e){let{image:t,message:s="",scale:i=1}=e;if("string"==typeof t){const e=new Image;return e.onload=()=>{const t=AE(e,s,i);console.log(...t)},e.src=t,EE}const r=t.nodeName||"";if("img"===r.toLowerCase())return console.log(...AE(t,s,i)),EE;if("canvas"===r.toLowerCase()){const e=new Image;return e.onload=()=>console.log(...AE(e,s,i)),e.src=t.toDataURL(),EE}return EE}({image:i,message:r,scale:o}):function(e){let{image:t,message:s="",scale:i=1}=e,r=null;try{r=module.require("asciify-image")}catch(e){}if(r)return()=>r(t,{fit:"box",width:"".concat(Math.round(80*i),"%")}).then((e=>console.log(e)));return EE}({image:i,message:r,scale:o}):EE}time(e,t){return this._getLogFunction(e,t,console.time?console.time:console.info)}timeEnd(e,t){return this._getLogFunction(e,t,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,t){return this._getLogFunction(e,t,console.timeStamp||EE)}group(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{collapsed:!1};const i=PE({logLevel:e,message:t,opts:s}),{collapsed:r}=s;return i.method=(r?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.group(e,t,Object.assign({},s,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||EE)}withGroup(e,t,s){this.group(e,t)();try{s()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=TE(e)}_getLogFunction(e,t,s,i,r){if(this._shouldLog(e)){r=PE({logLevel:e,message:t,args:i,opts:r}),fE(s=s||r.method),r.total=this.getTotal(),r.delta=this.getDelta(),this._deltaTs=mE();const o=r.tag||r.message;if(r.once){if(vE[o])return EE;vE[o]=mE()}return t=function(e,t,s){if("string"==typeof t){const i=s.time?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;const s=Math.max(t-e.length,0);return"".concat(" ".repeat(s)).concat(e)}(function(e){let t;return t=e<10?"".concat(e.toFixed(2),"ms"):e<100?"".concat(e.toFixed(1),"ms"):e<1e3?"".concat(e.toFixed(0),"ms"):"".concat((e/1e3).toFixed(2),"s"),t}(s.total)):"";t=s.time?"".concat(e,": ").concat(i,"  ").concat(t):"".concat(e,": ").concat(t),t=function(e,t,s){return nE||"string"!=typeof e||(t&&(t=dE(t),e="[".concat(t,"m").concat(e,"[39m")),s&&(t=dE(s),e="[".concat(s+10,"m").concat(e,"[49m"))),e}(t,s.color,s.background)}return t}(this.id,r.message,r),s.bind(console,t,...r.args)}return EE}}function TE(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return fE(Number.isFinite(t)&&t>=0),t}function PE(e){const{logLevel:t,message:s}=e;e.logLevel=TE(t);const i=e.args?Array.from(e.args):[];for(;i.length&&i.shift()!==s;);switch(typeof t){case"string":case"function":void 0!==s&&i.unshift(s),e.message=t;break;case"object":Object.assign(e,t)}"function"==typeof e.message&&(e.message=e.message());const r=typeof e.message;return fE("string"===r||"object"===r),Object.assign(e,{args:i},e.opts)}function DE(e){for(const t in e)for(const s in e[t])return s||"untitled";return"empty"}var bE,RE,CE,xE,NE,OE,SE,wE,ME;let BE;Ry(IE,"VERSION",cE),new IE({id:"loaders.gl"}),(ME=bE||(bE={}))[ME.NONE=0]="NONE",ME[ME.BASISLZ=1]="BASISLZ",ME[ME.ZSTD=2]="ZSTD",ME[ME.ZLIB=3]="ZLIB",function(e){e[e.BASICFORMAT=0]="BASICFORMAT"}(RE||(RE={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.ETC1S=163]="ETC1S",e[e.UASTC=166]="UASTC"}(CE||(CE={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.SRGB=1]="SRGB"}(xE||(xE={})),function(e){e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.LINEAR=1]="LINEAR",e[e.SRGB=2]="SRGB",e[e.ITU=3]="ITU",e[e.NTSC=4]="NTSC",e[e.SLOG=5]="SLOG",e[e.SLOG2=6]="SLOG2"}(NE||(NE={})),function(e){e[e.ALPHA_STRAIGHT=0]="ALPHA_STRAIGHT",e[e.ALPHA_PREMULTIPLIED=1]="ALPHA_PREMULTIPLIED"}(OE||(OE={})),function(e){e[e.RGB=0]="RGB",e[e.RRR=3]="RRR",e[e.GGG=4]="GGG",e[e.AAA=15]="AAA"}(SE||(SE={})),function(e){e[e.RGB=0]="RGB",e[e.RGBA=3]="RGBA",e[e.RRR=4]="RRR",e[e.RRRG=5]="RRRG"}(wE||(wE={})),function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"}(BE||(BE={}));const FE={IfcOpeningElement:{pickable:!1,visible:!1},IfcSpace:{colorize:[.137255,.403922,.870588],pickable:!1,visible:!1,opacity:.4},IfcWindow:{colorize:[.137255,.403922,.870588],opacity:.3},IfcPlate:{colorize:[.8470588235,.427450980392,0,.5],opacity:.3},DEFAULT:{}};function LE(e,t={}){const s="lightgrey",i=t.hoverColor||"rgba(0,0,0,0.4)",r=500,o=r+r/3,n=o/24,a=[{boundary:[6,6,6,6],color:t.frontColor||t.color||"#55FF55"},{boundary:[18,6,6,6],color:t.backColor||t.color||"#55FF55"},{boundary:[12,6,6,6],color:t.leftColor||t.color||"#FF5555"},{boundary:[0,6,6,6],color:t.rightColor||t.color||"#FF5555"},{boundary:[6,0,6,6],color:t.topColor||t.color||"#7777FF"},{boundary:[6,12,6,6],color:t.bottomColor||t.color||"#7777FF"}],l=[{label:"NavCube.front",boundaries:[[7,7,4,4]],dir:[0,1,0],up:[0,0,1]},{label:"NavCube.back",boundaries:[[19,7,4,4]],dir:[0,-1,0],up:[0,0,1]},{label:"NavCube.right",boundaries:[[13,7,4,4]],dir:[-1,0,0],up:[0,0,1]},{label:"NavCube.left",boundaries:[[1,7,4,4]],dir:[1,0,0],up:[0,0,1]},{label:"NavCube.top",boundaries:[[7,1,4,4]],dir:[0,0,-1],up:[0,1,0]},{label:"NavCube.bottom",boundaries:[[7,13,4,4]],dir:[0,0,1],up:[0,-1,0]},{boundaries:[[7,5,4,2]],dir:[0,1,-1],up:[0,1,1]},{boundaries:[[1,6,4,1],[6,1,1,4]],dir:[1,0,-1],up:[1,0,1]},{boundaries:[[7,0,4,1],[19,6,4,1]],dir:[0,-1,-1],up:[0,-1,1]},{boundaries:[[13,6,4,1],[11,1,1,4]],dir:[-1,0,-1],up:[-1,0,1]},{boundaries:[[7,11,4,2]],dir:[0,1,1],up:[0,-1,1]},{boundaries:[[1,11,4,1],[6,13,1,4]],dir:[1,0,1],up:[-1,0,1]},{boundaries:[[7,17,4,1],[19,11,4,1]],dir:[0,-1,1],up:[0,1,1]},{boundaries:[[13,11,4,1],[11,13,1,4]],dir:[-1,0,1],up:[1,0,1]},{boundaries:[[5,7,2,4]],dir:[1,1,0],up:[0,0,1]},{boundaries:[[11,7,2,4]],dir:[-1,1,0],up:[0,0,1]},{boundaries:[[17,7,2,4]],dir:[-1,-1,0],up:[0,0,1]},{boundaries:[[0,7,1,4],[23,7,1,4]],dir:[1,-1,0],up:[0,0,1]},{boundaries:[[5,11,2,2]],dir:[1,1,1],up:[-1,-1,1]},{boundaries:[[23,11,1,1],[6,17,1,1],[0,11,1,1]],dir:[1,-1,1],up:[-1,1,1]},{boundaries:[[5,5,2,2]],dir:[1,1,-1],up:[1,1,1]},{boundaries:[[11,17,1,1],[17,11,2,1]],dir:[-1,-1,1],up:[1,1,1]},{boundaries:[[17,6,2,1],[11,0,1,1]],dir:[-1,-1,-1],up:[-1,-1,1]},{boundaries:[[11,11,2,2]],dir:[-1,1,1],up:[1,-1,1]},{boundaries:[[0,6,1,1],[6,0,1,1],[23,6,1,1]],dir:[1,-1,-1],up:[1,-1,1]},{boundaries:[[11,5,2,2]],dir:[-1,1,-1],up:[-1,1,1]}];t.frontColor||t.color,t.backColor||t.color,t.leftColor||t.color,t.rightColor||t.color,t.topColor||t.color,t.bottomColor||t.color;const h=[{yUp:"",label:"NavCube.front",boundaries:[[7,7,4,4]],dir:[0,0,-1],up:[0,1,0]},{label:"NavCube.back",boundaries:[[19,7,4,4]],dir:[0,0,1],up:[0,1,0]},{label:"NavCube.right",boundaries:[[13,7,4,4]],dir:[-1,0,0],up:[0,1,0]},{label:"NavCube.left",boundaries:[[1,7,4,4]],dir:[1,0,0],up:[0,1,0]},{label:"NavCube.top",boundaries:[[7,1,4,4]],dir:[0,-1,0],up:[0,0,-1]},{label:"NavCube.bottom",boundaries:[[7,13,4,4]],dir:[0,1,0],up:[0,0,1]},{boundaries:[[7,5,4,2]],dir:[0,-.7071,-.7071],up:[0,.7071,-.7071]},{boundaries:[[1,6,4,1],[6,1,1,4]],dir:[1,-1,0],up:[1,1,0]},{boundaries:[[7,0,4,1],[19,6,4,1]],dir:[0,-.7071,.7071],up:[0,.7071,.7071]},{boundaries:[[13,6,4,1],[11,1,1,4]],dir:[-1,-1,0],up:[-1,1,0]},{boundaries:[[7,11,4,2]],dir:[0,1,-1],up:[0,1,1]},{boundaries:[[1,11,4,1],[6,13,1,4]],dir:[1,1,0],up:[-1,1,0]},{boundaries:[[7,17,4,1],[19,11,4,1]],dir:[0,1,1],up:[0,1,-1]},{boundaries:[[13,11,4,1],[11,13,1,4]],dir:[-1,1,0],up:[1,1,0]},{boundaries:[[5,7,2,4]],dir:[1,0,-1],up:[0,1,0]},{boundaries:[[11,7,2,4]],dir:[-1,0,-1],up:[0,1,0]},{boundaries:[[17,7,2,4]],dir:[-1,0,1],up:[0,1,0]},{boundaries:[[0,7,1,4],[23,7,1,4]],dir:[1,0,1],up:[0,1,0]},{boundaries:[[5,11,2,2]],dir:[.5,.7071,-.5],up:[-.5,.7071,.5]},{boundaries:[[23,11,1,1],[6,17,1,1],[0,11,1,1]],dir:[.5,.7071,.5],up:[-.5,.7071,-.5]},{boundaries:[[5,5,2,2]],dir:[.5,-.7071,-.5],up:[.5,.7071,-.5]},{boundaries:[[11,17,1,1],[17,11,2,1]],dir:[-.5,.7071,.5],up:[.5,.7071,-.5]},{boundaries:[[17,6,2,1],[11,0,1,1]],dir:[-.5,-.7071,.5],up:[-.5,.7071,.5]},{boundaries:[[11,11,2,2]],dir:[-.5,.7071,-.5],up:[.5,.7071,.5]},{boundaries:[[0,6,1,1],[6,0,1,1],[23,6,1,1]],dir:[.5,-.7071,.5],up:[.5,.7071,.5]},{boundaries:[[11,5,2,2]],dir:[-.5,-.7071,-.5],up:[-.5,.7071,-.5]}];for(let e=0,t=l.length;e<t;e++)p.normalizeVec3(l[e].dir,l[e].dir),p.normalizeVec3(l[e].up,l[e].up);for(let e=0,t=h.length;e<t;e++)p.normalizeVec3(h[e].dir,h[e].dir),p.normalizeVec3(h[e].up,h[e].up);var c=h;this._textureCanvas=document.createElement("canvas"),this._textureCanvas.width=o,this._textureCanvas.height=r,this._textureCanvas.style.width=o+"px",this._textureCanvas.style.height="500px",this._textureCanvas.style.padding="0",this._textureCanvas.style.margin="0",this._textureCanvas.style.top="0",this._textureCanvas.style.background=s,this._textureCanvas.style.position="absolute",this._textureCanvas.style.opacity="1.0",this._textureCanvas.style.visibility="hidden",this._textureCanvas.style["z-index"]=2e6;document.getElementsByTagName("body")[0].appendChild(this._textureCanvas);const u=this._textureCanvas.getContext("2d");let A=!1;function d(){for(let e=0,t=a.length;e<t;e++){const t=a[e],s=t.boundary,i=Math.round(s[0]*n),r=Math.round(s[1]*n),o=Math.round(s[2]*n),l=Math.round(s[3]*n);u.fillStyle=t.color,u.fillRect(i,r,o,l)}for(let e=0,a=c.length;e<a;e++){let a,h,A,p;const d=c[e],m=d.boundaries;for(var t=0,r=m.length;t<r;t++){const e=m[t];a=Math.round(e[0]*n),h=Math.round(e[1]*n),A=Math.round(e[2]*n),p=Math.round(e[3]*n),d.highlighted&&(u.fillStyle=d.highlighted?i:d.color||s,u.fillRect(a,h,A,p))}if(d.label){u.fillStyle="black",u.font="60px sans-serif",u.textAlign="center";var o=a+.5*A,l=h+.7*p;u.fillText(f(d.label),o,l,80)}}e.scene.glRedraw()}const f=function(){const t={"NavCube.front":"NavCube.front","NavCube.back":"NavCube.back","NavCube.right":"NavCube.right","NavCube.left":"NavCube.left","NavCube.top":"NavCube.top","NavCube.bottom":"NavCube.bottom"},s={"NavCube.front":"NavCube.front","NavCube.back":"NavCube.back","NavCube.right":"NavCube.right","NavCube.left":"NavCube.left","NavCube.top":"NavCube.top","NavCube.bottom":"NavCube.bottom"},i={"NavCube.front":"FRONT","NavCube.back":"BACK","NavCube.right":"RIGHT","NavCube.left":"LEFT","NavCube.top":"TOP","NavCube.bottom":"BOTTOM"};return function(r){const o=A?s:t,n=o?o[r]:null;return n?e.localeService.translate(n)||i[n]||n:r}}();this.setZUp=function(){A=!0,c=l,this.clear()},this.setYUp=function(){A=!1,c=h,this.clear()},this.clear=function(){u.fillStyle=s,u.fillRect(0,0,o,r);for(var e=0,t=c.length;e<t;e++){c[e].highlighted=!1}d()},this.getArea=function(e){const t=e[0]*o,s=r-e[1]*r;for(var i=0,a=c.length;i<a;i++){const e=c[i].boundaries;for(var l=0,h=e.length;l<h;l++){const r=e[l];if(t>=r[0]*n&&t<=(r[0]+r[2])*n&&s>=r[1]*n&&s<=(r[1]+r[3])*n)return i}}return-1},this.setAreaHighlighted=function(e,t){var s=c[e];if(!s)throw"Area not found: "+e;s.highlighted=!!t,d()},this.getAreaDir=function(e){var t=c[e];if(!t)throw"Unknown area: "+e;return t.dir},this.getAreaUp=function(e){var t=c[e];if(!t)throw"Unknown area: "+e;return t.up},this.getImage=function(){return this._textureCanvas},this.destroy=function(){this._textureCanvas&&(this._textureCanvas.parentNode.removeChild(this._textureCanvas),this._textureCanvas=null)}}const UE=p.vec3(),HE=p.vec3();p.mat4();class GE extends a{constructor(e,t={}){super("NavCube",e,t),e.navCube=this;try{this._navCubeScene=new Bi(e,{canvasId:t.canvasId,canvasElement:t.canvasElement,transparent:!0}),this._navCubeCanvas=this._navCubeScene.canvas.canvas,this._navCubeScene.input.keyboardEnabled=!1}catch(e){return void this.error(e)}const s=this._navCubeScene;s.clearLights(),new Ai(s,{dir:[.4,-.4,.8],color:[.8,1,1],intensity:1,space:"view"}),new Ai(s,{dir:[-.8,-.3,-.4],color:[.8,.8,.8],intensity:1,space:"view"}),new Ai(s,{dir:[.8,-.6,-.8],color:[1,1,1],intensity:1,space:"view"}),this._navCubeCamera=s.camera,this._navCubeCamera.ortho.scale=7,this._navCubeCamera.ortho.near=.1,this._navCubeCamera.ortho.far=2e3,s.edgeMaterial.edgeColor=[.2,.2,.2],s.edgeMaterial.edgeAlpha=.6,this._zUp=Boolean(e.camera.zUp);var i=this;this.setIsProjectNorth(t.isProjectNorth),this.setProjectNorthOffsetAngle(t.projectNorthOffsetAngle);const r=function(){const e=p.mat4();return function(t,s,r){return p.identityMat4(e),p.rotationMat4v(t*i._projectNorthOffsetAngle*p.DEGTORAD,[0,1,0],e),p.transformVec3(e,s,r)}}();this._synchCamera=function(){var t=p.rotationMat4c(-90*p.DEGTORAD,1,0,0),s=p.vec3(),o=p.vec3(),n=p.vec3();return function(){var a=e.camera.eye,l=e.camera.look,h=e.camera.up;s=p.mulVec3Scalar(p.normalizeVec3(p.subVec3(a,l,s)),5),i._isProjectNorth&&i._projectNorthOffsetAngle&&(s=r(-1,s,UE),h=r(-1,h,HE)),i._zUp?(p.transformVec3(t,s,o),p.transformVec3(t,h,n),i._navCubeCamera.look=[0,0,0],i._navCubeCamera.eye=p.transformVec3(t,s,o),i._navCubeCamera.up=p.transformPoint3(t,h,n)):(i._navCubeCamera.look=[0,0,0],i._navCubeCamera.eye=s,i._navCubeCamera.up=h)}}(),this._cubeTextureCanvas=new LE(e,t),this._cubeSampler=new yo(s,{image:this._cubeTextureCanvas.getImage(),flipY:!0,wrapS:Li,wrapT:Li}),this._cubeMesh=new Yr(s,{geometry:new gi(s,{primitive:"triangles",normals:[0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1],positions:[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,1,-1,-1,1,-1,-1,1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,-1,1,-1,1,1,-1],uv:[.5,.6666,.25,.6666,.25,.3333,.5,.3333,.5,.6666,.5,.3333,.75,.3333,.75,.6666,.5,.6666,.5,1,.25,1,.25,.6666,.25,.6666,0,.6666,0,.3333,.25,.3333,.25,0,.5,0,.5,.3333,.25,.3333,.75,.3333,1,.3333,1,.6666,.75,.6666],indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]}),material:new Ii(s,{diffuse:[.4,.4,.4],specular:[.4,.4,.4],emissive:[.6,.6,.6],diffuseMap:this._cubeSampler,emissiveMap:this._cubeSampler}),visible:!0,edges:!0}),this._shadow=!1===t.shadowVisible?null:new Yr(s,{geometry:new gi(s,Zr({center:[0,0,0],radiusTop:.001,radiusBottom:1.4,height:.01,radialSegments:20,heightSegments:1,openEnded:!0})),material:new Ii(s,{diffuse:[0,0,0],specular:[0,0,0],emissive:[0,0,0],alpha:.5}),position:[0,-1.5,0],visible:!0,pickable:!1,backfaces:!1}),this._onCameraMatrix=e.camera.on("matrix",this._synchCamera),this._onCameraWorldAxis=e.camera.on("worldAxis",(()=>{e.camera.zUp?(this._zUp=!0,this._cubeTextureCanvas.setZUp(),this._repaint(),this._synchCamera()):e.camera.yUp&&(this._zUp=!1,this._cubeTextureCanvas.setYUp(),this._repaint(),this._synchCamera())})),this._onCameraFOV=e.camera.perspective.on("fov",(e=>{this._synchProjection&&(this._navCubeCamera.perspective.fov=e)})),this._onCameraProjection=e.camera.on("projection",(e=>{this._synchProjection&&(this._navCubeCamera.projection="ortho"===e||"perspective"===e?e:"perspective")}));var o=-1;function n(e){var t=[0,0];if(e){for(var s=e.target,i=0,r=0;s.offsetParent;)i+=s.offsetLeft,r+=s.offsetTop,s=s.offsetParent;t[0]=e.pageX-i,t[1]=e.pageY-r}else e=window.event,t[0]=e.x,t[1]=e.y;return t}var a,l,h=null,c=null,u=!1,A=!1,d=.5;i._navCubeCanvas.addEventListener("mouseenter",i._onMouseEnter=function(e){A=!0}),i._navCubeCanvas.addEventListener("mouseleave",i._onMouseLeave=function(e){A=!1}),i._navCubeCanvas.addEventListener("mousedown",i._onMouseDown=function(e){if(1===e.which){h=e.x,c=e.y,a=e.clientX,l=e.clientY;var t=n(e),i=s.pick({canvasPos:t});u=!!i}}),document.addEventListener("mouseup",i._onMouseUp=function(e){if(1===e.which&&(u=!1,null!==h)){var t=n(e),a=s.pick({canvasPos:t,pickSurface:!0});if(a&&a.uv){var l=i._cubeTextureCanvas.getArea(a.uv);if(l>=0&&(document.body.style.cursor="pointer",o>=0&&(i._cubeTextureCanvas.setAreaHighlighted(o,!1),i._repaint(),o=-1),l>=0)){if(i._cubeTextureCanvas.setAreaHighlighted(l,!0),o=l,i._repaint(),e.x<h-3||e.x>h+3||e.y<c-3||e.y>c+3)return;var A=i._cubeTextureCanvas.getAreaDir(l);if(A){var p=i._cubeTextureCanvas.getAreaUp(l);i._isProjectNorth&&i._projectNorthOffsetAngle&&(A=r(1,A,UE),p=r(1,p,HE)),f(A,p,(function(){o>=0&&(i._cubeTextureCanvas.setAreaHighlighted(o,!1),i._repaint(),o=-1),document.body.style.cursor="pointer",o>=0&&(i._cubeTextureCanvas.setAreaHighlighted(o,!1),i._repaint(),o=-1),l>=0&&(i._cubeTextureCanvas.setAreaHighlighted(l,!1),o=-1,i._repaint())}))}}}}}),document.addEventListener("mousemove",i._onMouseMove=function(t){if(o>=0&&(i._cubeTextureCanvas.setAreaHighlighted(o,!1),i._repaint(),o=-1),1!==t.buttons||u){if(u){var r=t.clientX,h=t.clientY;return document.body.style.cursor="move",void function(t,s){var i=(t-a)*-d,r=(s-l)*-d;e.camera.orbitYaw(i),e.camera.orbitPitch(-r),a=t,l=s}(r,h)}if(A){var c=n(t),p=s.pick({canvasPos:c,pickSurface:!0});if(p){if(p.uv){document.body.style.cursor="pointer";var f=i._cubeTextureCanvas.getArea(p.uv);if(f===o)return;o>=0&&i._cubeTextureCanvas.setAreaHighlighted(o,!1),f>=0&&(i._cubeTextureCanvas.setAreaHighlighted(f,!0),i._repaint(),o=f)}}else document.body.style.cursor="default",o>=0&&(i._cubeTextureCanvas.setAreaHighlighted(o,!1),i._repaint(),o=-1)}}});var f=function(){var t=p.vec3();return function(s,r,o){var n=i._fitVisible?e.scene.getAABB(e.scene.visibleObjectIds):e.scene.aabb,a=p.getAABB3Diag(n);p.getAABB3Center(n,t);var l=Math.abs(a/Math.tan(i._cameraFitFOV*p.DEGTORAD));e.cameraControl.pivotPos=t,i._cameraFly?e.cameraFlight.flyTo({look:t,eye:[t[0]-l*s[0],t[1]-l*s[1],t[2]-l*s[2]],up:r||[0,1,0],orthoScale:1.1*a,fitFOV:i._cameraFitFOV,duration:i._cameraFlyDuration},o):e.cameraFlight.jumpTo({look:t,eye:[t[0]-l*s[0],t[1]-l*s[1],t[2]-l*s[2]],up:r||[0,1,0],orthoScale:1.1*a,fitFOV:i._cameraFitFOV},o)}}();this._onUpdated=e.localeService.on("updated",(()=>{this._cubeTextureCanvas.clear(),this._repaint()})),this.setVisible(t.visible),this.setCameraFitFOV(t.cameraFitFOV),this.setCameraFly(t.cameraFly),this.setCameraFlyDuration(t.cameraFlyDuration),this.setFitVisible(t.fitVisible),this.setSynchProjection(t.synchProjection)}send(e,t){if("language"===e)this._cubeTextureCanvas.clear(),this._repaint()}_repaint(){const e=this._cubeTextureCanvas.getImage();this._cubeMesh.material.diffuseMap.image=e,this._cubeMesh.material.emissiveMap.image=e}setVisible(e=!0){this._navCubeCanvas&&(this._cubeMesh.visible=e,this._shadow&&(this._shadow.visible=e),this._navCubeCanvas.style.visibility=e?"visible":"hidden")}getVisible(){return!!this._navCubeCanvas&&this._cubeMesh.visible}setFitVisible(e=!1){this._fitVisible=e}getFitVisible(){return this._fitVisible}setCameraFly(e=!0){this._cameraFly=e}getCameraFly(){return this._cameraFly}setCameraFitFOV(e=45){this._cameraFitFOV=e}getCameraFitFOV(){return this._cameraFitFOV}setCameraFlyDuration(e=.5){this._cameraFlyDuration=e}getCameraFlyDuration(){return this._cameraFlyDuration}setSynchProjection(e=!1){this._synchProjection=e}getSynchProjection(){return this._synchProjection}setIsProjectNorth(e=!1){this._isProjectNorth=e}getIsProjectNorth(){return this._isProjectNorth}setProjectNorthOffsetAngle(e){this._projectNorthOffsetAngle=e}getProjectNorthOffsetAngle(){return this._projectNorthOffsetAngle}destroy(){this._navCubeCanvas&&(this.viewer.localeService.off(this._onUpdated),this.viewer.camera.off(this._onCameraMatrix),this.viewer.camera.off(this._onCameraWorldAxis),this.viewer.camera.perspective.off(this._onCameraFOV),this.viewer.camera.off(this._onCameraProjection),this._navCubeCanvas.removeEventListener("mouseenter",this._onMouseEnter),this._navCubeCanvas.removeEventListener("mouseleave",this._onMouseLeave),this._navCubeCanvas.removeEventListener("mousedown",this._onMouseDown),document.removeEventListener("mousemove",this._onMouseMove),document.removeEventListener("mouseup",this._onMouseUp),this._navCubeCanvas=null,this._cubeTextureCanvas.destroy(),this._cubeTextureCanvas=null,this._onMouseEnter=null,this._onMouseLeave=null,this._onMouseDown=null,this._onMouseMove=null,this._onMouseUp=null),this._navCubeScene.destroy(),this._navCubeScene=null,this._cubeMesh=null,this._shadow=null,super.destroy()}}p.vec3();const VE=new Float64Array([0,0,1]),kE=new Float64Array(4);class jE{constructor(e){this.id=null,this._viewer=e.viewer,this._visible=!1,this._pos=p.vec3(),this._origin=p.vec3(),this._rtcPos=p.vec3(),this._baseDir=p.vec3(),this._rootNode=null,this._displayMeshes=null,this._affordanceMeshes=null,this._ignoreNextSectionPlaneDirUpdate=!1,this._createNodes(),this._bindEvents()}_setSectionPlane(e){this._sectionPlane&&(this._sectionPlane.off(this._onSectionPlanePos),this._sectionPlane.off(this._onSectionPlaneDir),this._onSectionPlanePos=null,this._onSectionPlaneDir=null,this._sectionPlane=null),e&&(this.id=e.id,this._setPos(e.pos),this._setDir(e.dir),this._sectionPlane=e,this._onSectionPlanePos=e.on("pos",(()=>{this._setPos(this._sectionPlane.pos)})),this._onSectionPlaneDir=e.on("dir",(()=>{this._ignoreNextSectionPlaneDirUpdate?this._ignoreNextSectionPlaneDirUpdate=!1:this._setDir(this._sectionPlane.dir)})))}get sectionPlane(){return this._sectionPlane}_setPos(e){this._pos.set(e),function(e,t,s){const i=Float32Array.from([e[0]])[0],r=e[0]-i,o=Float32Array.from([e[1]])[0],n=e[1]-o,a=Float32Array.from([e[2]])[0],l=e[2]-a;t[0]=i,t[1]=o,t[2]=a,s[0]=r,s[1]=n,s[2]=l}(this._pos,this._origin,this._rtcPos),this._rootNode.origin=this._origin,this._rootNode.position=this._rtcPos}_setDir(e){this._baseDir.set(e),this._rootNode.quaternion=p.vec3PairToQuaternion(VE,e,kE)}_setSectionPlaneDir(e){this._sectionPlane&&(this._ignoreNextSectionPlaneDirUpdate=!0,this._sectionPlane.dir=e)}setVisible(e=!0){if(this._visible!==e){var t;for(t in this._visible=e,this._displayMeshes)this._displayMeshes.hasOwnProperty(t)&&(this._displayMeshes[t].visible=e);if(!e)for(t in this._affordanceMeshes)this._affordanceMeshes.hasOwnProperty(t)&&(this._affordanceMeshes[t].visible=e)}}getVisible(){return this._visible}setCulled(e){var t;for(t in this._displayMeshes)this._displayMeshes.hasOwnProperty(t)&&(this._displayMeshes[t].culled=e);if(!e)for(t in this._affordanceMeshes)this._affordanceMeshes.hasOwnProperty(t)&&(this._affordanceMeshes[t].culled=e)}_createNodes(){const e=!1,t=this._viewer.scene,s=.01;this._rootNode=new lo(t,{position:[0,0,0],scale:[5,5,5]});const i=this._rootNode,r={arrowHead:new gi(i,Zr({radiusTop:.001,radiusBottom:.07,radialSegments:32,heightSegments:1,height:.2,openEnded:!1})),arrowHeadBig:new gi(i,Zr({radiusTop:.001,radiusBottom:.09,radialSegments:32,heightSegments:1,height:.25,openEnded:!1})),arrowHeadHandle:new gi(i,Zr({radiusTop:.09,radiusBottom:.09,radialSegments:8,heightSegments:1,height:.37,openEnded:!1})),curve:new gi(i,Po({radius:.8,tube:s,radialSegments:64,tubeSegments:14,arc:2*Math.PI/4})),curveHandle:new gi(i,Po({radius:.8,tube:.06,radialSegments:64,tubeSegments:14,arc:2*Math.PI/4})),hoop:new gi(i,Po({radius:.8,tube:s,radialSegments:64,tubeSegments:8,arc:2*Math.PI})),axis:new gi(i,Zr({radiusTop:s,radiusBottom:s,radialSegments:20,heightSegments:1,height:1,openEnded:!1})),axisHandle:new gi(i,Zr({radiusTop:.08,radiusBottom:.08,radialSegments:20,heightSegments:1,height:1,openEnded:!1}))},o={pickable:new Ii(i,{diffuse:[1,1,0],alpha:0,alphaMode:"blend"}),red:new Ii(i,{diffuse:[1,0,0],emissive:[1,0,0],ambient:[0,0,0],specular:[.6,.6,.3],shininess:80,lineWidth:2}),highlightRed:new Pi(i,{edges:!1,fill:!0,fillColor:[1,0,0],fillAlpha:.6}),green:new Ii(i,{diffuse:[0,1,0],emissive:[0,1,0],ambient:[0,0,0],specular:[.6,.6,.3],shininess:80,lineWidth:2}),highlightGreen:new Pi(i,{edges:!1,fill:!0,fillColor:[0,1,0],fillAlpha:.6}),blue:new Ii(i,{diffuse:[0,0,1],emissive:[0,0,1],ambient:[0,0,0],specular:[.6,.6,.3],shininess:80,lineWidth:2}),highlightBlue:new Pi(i,{edges:!1,fill:!0,fillColor:[0,0,1],fillAlpha:.2}),center:new Ii(i,{diffuse:[0,0,0],emissive:[0,0,0],ambient:[0,0,0],specular:[.6,.6,.3],shininess:80}),highlightBall:new Pi(i,{edges:!1,fill:!0,fillColor:[.5,.5,.5],fillAlpha:.5,vertices:!1}),highlightPlane:new Pi(i,{edges:!0,edgeWidth:3,fill:!1,fillColor:[.5,.5,.5],fillAlpha:.5,vertices:!1})};this._displayMeshes={plane:i.addChild(new Yr(i,{geometry:new gi(i,{primitive:"triangles",positions:[.5,.5,0,.5,-.5,0,-.5,-.5,0,-.5,.5,0,.5,.5,-0,.5,-.5,-0,-.5,-.5,-0,-.5,.5,-0],indices:[0,1,2,2,3,0]}),material:new Ii(i,{emissive:[0,0,0],diffuse:[0,0,0],backfaces:!0}),opacity:.6,ghosted:!0,ghostMaterial:new Pi(i,{edges:!1,filled:!0,fillColor:[1,1,0],edgeColor:[0,0,0],fillAlpha:.1,backfaces:!0}),pickable:!1,collidable:!0,clippable:!1,visible:!1,scale:[2.4,2.4,1]}),e),planeFrame:i.addChild(new Yr(i,{geometry:new gi(i,Po({center:[0,0,0],radius:1.7,tube:.02,radialSegments:4,tubeSegments:4,arc:2*Math.PI})),material:new Ii(i,{emissive:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],shininess:0}),highlightMaterial:new Pi(i,{edges:!1,edgeColor:[0,0,0],filled:!0,fillColor:[.8,.8,.8],fillAlpha:1}),pickable:!1,collidable:!1,clippable:!1,visible:!1,scale:[1,1,.1],rotation:[0,0,45]}),e),xCurve:i.addChild(new Yr(i,{geometry:r.curve,material:o.red,matrix:function(){const e=p.rotationMat4v(90*p.DEGTORAD,[0,1,0],p.identityMat4()),t=p.rotationMat4v(270*p.DEGTORAD,[1,0,0],p.identityMat4());return p.mulMat4(t,e,p.identityMat4())}(),pickable:!1,collidable:!0,clippable:!1,backfaces:!0,visible:!1}),e),xCurveHandle:i.addChild(new Yr(i,{geometry:r.curveHandle,material:o.pickable,matrix:function(){const e=p.rotationMat4v(90*p.DEGTORAD,[0,1,0],p.identityMat4()),t=p.rotationMat4v(270*p.DEGTORAD,[1,0,0],p.identityMat4());return p.mulMat4(t,e,p.identityMat4())}(),pickable:!0,collidable:!0,clippable:!1,backfaces:!0,visible:!1}),e),xCurveArrow1:i.addChild(new Yr(i,{geometry:r.arrowHead,material:o.red,matrix:function(){const e=p.translateMat4c(0,-.07,-.8,p.identityMat4()),t=p.scaleMat4v([.6,.6,.6],p.identityMat4()),s=p.rotationMat4v(0*p.DEGTORAD,[0,0,1],p.identityMat4());return p.mulMat4(p.mulMat4(e,t,p.identityMat4()),s,p.identityMat4())}(),pickable:!0,collidable:!0,clippable:!1,visible:!1}),e),xCurveArrow2:i.addChild(new Yr(i,{geometry:r.arrowHead,material:o.red,matrix:function(){const e=p.translateMat4c(0,-.8,-.07,p.identityMat4()),t=p.scaleMat4v([.6,.6,.6],p.identityMat4()),s=p.rotationMat4v(90*p.DEGTORAD,[1,0,0],p.identityMat4());return p.mulMat4(p.mulMat4(e,t,p.identityMat4()),s,p.identityMat4())}(),pickable:!0,collidable:!0,clippable:!1,visible:!1}),e),yCurve:i.addChild(new Yr(i,{geometry:r.curve,material:o.green,rotation:[-90,0,0],pickable:!1,collidable:!0,clippable:!1,backfaces:!0,visible:!1}),e),yCurveHandle:i.addChild(new Yr(i,{geometry:r.curveHandle,material:o.pickable,rotation:[-90,0,0],pickable:!0,collidable:!0,clippable:!1,backfaces:!0,visible:!1}),e),yCurveArrow1:i.addChild(new Yr(i,{geometry:r.arrowHead,material:o.green,matrix:function(){const e=p.translateMat4c(.07,0,-.8,p.identityMat4()),t=p.scaleMat4v([.6,.6,.6],p.identityMat4()),s=p.rotationMat4v(90*p.DEGTORAD,[0,0,1],p.identityMat4());return p.mulMat4(p.mulMat4(e,t,p.identityMat4()),s,p.identityMat4())}(),pickable:!0,collidable:!0,clippable:!1,visible:!1}),e),yCurveArrow2:i.addChild(new Yr(i,{geometry:r.arrowHead,material:o.green,matrix:function(){const e=p.translateMat4c(.8,0,-.07,p.identityMat4()),t=p.scaleMat4v([.6,.6,.6],p.identityMat4()),s=p.rotationMat4v(90*p.DEGTORAD,[1,0,0],p.identityMat4());return p.mulMat4(p.mulMat4(e,t,p.identityMat4()),s,p.identityMat4())}(),pickable:!0,collidable:!0,clippable:!1,visible:!1}),e),zCurve:i.addChild(new Yr(i,{geometry:r.curve,material:o.blue,matrix:p.rotationMat4v(180*p.DEGTORAD,[1,0,0],p.identityMat4()),pickable:!1,collidable:!0,clippable:!1,visible:!1}),e),zCurveHandle:i.addChild(new Yr(i,{geometry:r.curveHandle,material:o.pickable,matrix:p.rotationMat4v(180*p.DEGTORAD,[1,0,0],p.identityMat4()),pickable:!0,collidable:!0,clippable:!1,visible:!1}),e),zCurveCurveArrow1:i.addChild(new Yr(i,{geometry:r.arrowHead,material:o.blue,matrix:function(){const e=p.translateMat4c(.8,-.07,0,p.identityMat4()),t=p.scaleMat4v([.6,.6,.6],p.identityMat4());return p.mulMat4(e,t,p.identityMat4())}(),pickable:!0,collidable:!0,clippable:!1,visible:!1}),e),zCurveArrow2:i.addChild(new Yr(i,{geometry:r.arrowHead,material:o.blue,matrix:function(){const e=p.translateMat4c(.05,-.8,0,p.identityMat4()),t=p.scaleMat4v([.6,.6,.6],p.identityMat4()),s=p.rotationMat4v(90*p.DEGTORAD,[0,0,1],p.identityMat4());return p.mulMat4(p.mulMat4(e,t,p.identityMat4()),s,p.identityMat4())}(),pickable:!0,collidable:!0,clippable:!1,visible:!1}),e),center:i.addChild(new Yr(i,{geometry:new gi(i,qr({radius:.05})),material:o.center,pickable:!1,collidable:!0,clippable:!1,visible:!1}),e),xAxisArrow:i.addChild(new Yr(i,{geometry:r.arrowHead,material:o.red,matrix:function(){const e=p.translateMat4c(0,1.1,0,p.identityMat4()),t=p.rotationMat4v(-90*p.DEGTORAD,[0,0,1],p.identityMat4());return p.mulMat4(t,e,p.identityMat4())}(),pickable:!1,collidable:!0,clippable:!1,visible:!1}),e),xAxisArrowHandle:i.addChild(new Yr(i,{geometry:r.arrowHeadHandle,material:o.pickable,matrix:function(){const e=p.translateMat4c(0,1.1,0,p.identityMat4()),t=p.rotationMat4v(-90*p.DEGTORAD,[0,0,1],p.identityMat4());return p.mulMat4(t,e,p.identityMat4())}(),pickable:!0,collidable:!0,clippable:!1,visible:!1}),e),xAxis:i.addChild(new Yr(i,{geometry:r.axis,material:o.red,matrix:function(){const e=p.translateMat4c(0,.5,0,p.identityMat4()),t=p.rotationMat4v(-90*p.DEGTORAD,[0,0,1],p.identityMat4());return p.mulMat4(t,e,p.identityMat4())}(),pickable:!1,collidable:!0,clippable:!1,visible:!1}),e),xAxisHandle:i.addChild(new Yr(i,{geometry:r.axisHandle,material:o.pickable,matrix:function(){const e=p.translateMat4c(0,.5,0,p.identityMat4()),t=p.rotationMat4v(-90*p.DEGTORAD,[0,0,1],p.identityMat4());return p.mulMat4(t,e,p.identityMat4())}(),pickable:!0,collidable:!0,clippable:!1,visible:!1}),e),yAxisArrow:i.addChild(new Yr(i,{geometry:r.arrowHead,material:o.green,matrix:function(){const e=p.translateMat4c(0,1.1,0,p.identityMat4()),t=p.rotationMat4v(180*p.DEGTORAD,[1,0,0],p.identityMat4());return p.mulMat4(t,e,p.identityMat4())}(),pickable:!1,collidable:!0,clippable:!1,visible:!1}),e),yAxisArrowHandle:i.addChild(new Yr(i,{geometry:r.arrowHeadHandle,material:o.pickable,matrix:function(){const e=p.translateMat4c(0,1.1,0,p.identityMat4()),t=p.rotationMat4v(180*p.DEGTORAD,[1,0,0],p.identityMat4());return p.mulMat4(t,e,p.identityMat4())}(),pickable:!0,collidable:!0,clippable:!1,visible:!1,opacity:.2}),e),yShaft:i.addChild(new Yr(i,{geometry:r.axis,material:o.green,position:[0,-.5,0],pickable:!1,collidable:!0,clippable:!1,visible:!1}),e),yShaftHandle:i.addChild(new Yr(i,{geometry:r.axisHandle,material:o.pickable,position:[0,-.5,0],pickable:!0,collidable:!0,clippable:!1,visible:!1}),e),zAxisArrow:i.addChild(new Yr(i,{geometry:r.arrowHead,material:o.blue,matrix:function(){const e=p.translateMat4c(0,1.1,0,p.identityMat4()),t=p.rotationMat4v(-90*p.DEGTORAD,[.8,0,0],p.identityMat4());return p.mulMat4(t,e,p.identityMat4())}(),pickable:!1,collidable:!0,clippable:!1,visible:!1}),e),zAxisArrowHandle:i.addChild(new Yr(i,{geometry:r.arrowHeadHandle,material:o.pickable,matrix:function(){const e=p.translateMat4c(0,1.1,0,p.identityMat4()),t=p.rotationMat4v(-90*p.DEGTORAD,[.8,0,0],p.identityMat4());return p.mulMat4(t,e,p.identityMat4())}(),pickable:!0,collidable:!0,clippable:!1,visible:!1}),e),zShaft:i.addChild(new Yr(i,{geometry:r.axis,material:o.blue,matrix:function(){const e=p.translateMat4c(0,.5,0,p.identityMat4()),t=p.rotationMat4v(-90*p.DEGTORAD,[1,0,0],p.identityMat4());return p.mulMat4(t,e,p.identityMat4())}(),clippable:!1,pickable:!1,collidable:!0,visible:!1}),e),zAxisHandle:i.addChild(new Yr(i,{geometry:r.axisHandle,material:o.pickable,matrix:function(){const e=p.translateMat4c(0,.5,0,p.identityMat4()),t=p.rotationMat4v(-90*p.DEGTORAD,[1,0,0],p.identityMat4());return p.mulMat4(t,e,p.identityMat4())}(),clippable:!1,pickable:!0,collidable:!0,visible:!1}),e)},this._affordanceMeshes={planeFrame:i.addChild(new Yr(i,{geometry:new gi(i,Po({center:[0,0,0],radius:2,tube:s,radialSegments:4,tubeSegments:4,arc:2*Math.PI})),material:new Ii(i,{ambient:[1,1,1],diffuse:[0,0,0],emissive:[1,1,0]}),highlighted:!0,highlightMaterial:new Pi(i,{edges:!1,filled:!0,fillColor:[1,1,0],fillAlpha:1}),pickable:!1,collidable:!1,clippable:!1,visible:!1,scale:[1,1,1],rotation:[0,0,45]}),e),xHoop:i.addChild(new Yr(i,{geometry:r.hoop,material:o.red,highlighted:!0,highlightMaterial:o.highlightRed,matrix:function(){const e=p.rotationMat4v(90*p.DEGTORAD,[0,1,0],p.identityMat4()),t=p.rotationMat4v(270*p.DEGTORAD,[1,0,0],p.identityMat4());return p.mulMat4(t,e,p.identityMat4())}(),pickable:!1,collidable:!0,clippable:!1,visible:!1}),e),yHoop:i.addChild(new Yr(i,{geometry:r.hoop,material:o.green,highlighted:!0,highlightMaterial:o.highlightGreen,rotation:[-90,0,0],pickable:!1,collidable:!0,clippable:!1,visible:!1}),e),zHoop:i.addChild(new Yr(i,{geometry:r.hoop,material:o.blue,highlighted:!0,highlightMaterial:o.highlightBlue,matrix:p.rotationMat4v(180*p.DEGTORAD,[1,0,0],p.identityMat4()),pickable:!1,collidable:!0,clippable:!1,backfaces:!0,visible:!1}),e),xAxisArrow:i.addChild(new Yr(i,{geometry:r.arrowHeadBig,material:o.red,matrix:function(){const e=p.translateMat4c(0,1.1,0,p.identityMat4()),t=p.rotationMat4v(-90*p.DEGTORAD,[0,0,1],p.identityMat4());return p.mulMat4(t,e,p.identityMat4())}(),pickable:!1,collidable:!0,clippable:!1,visible:!1}),e),yAxisArrow:i.addChild(new Yr(i,{geometry:r.arrowHeadBig,material:o.green,matrix:function(){const e=p.translateMat4c(0,1.1,0,p.identityMat4()),t=p.rotationMat4v(180*p.DEGTORAD,[1,0,0],p.identityMat4());return p.mulMat4(t,e,p.identityMat4())}(),pickable:!1,collidable:!0,clippable:!1,visible:!1}),e),zAxisArrow:i.addChild(new Yr(i,{geometry:r.arrowHeadBig,material:o.blue,matrix:function(){const e=p.translateMat4c(0,1.1,0,p.identityMat4()),t=p.rotationMat4v(-90*p.DEGTORAD,[.8,0,0],p.identityMat4());return p.mulMat4(t,e,p.identityMat4())}(),pickable:!1,collidable:!0,clippable:!1,visible:!1}),e)}}_bindEvents(){const e=this;var t=!1;const s=-1,i=0,r=1,o=2,n=3,a=4,l=5,h=this._rootNode;var c=null,u=null;const A=p.vec2(),d=p.vec3([1,0,0]),f=p.vec3([0,1,0]),m=p.vec3([0,0,1]),g=this._viewer.scene.canvas.canvas,y=this._viewer.camera,E=this._viewer.scene;{const e=p.vec3([0,0,0]);let t=-1;this._onCameraViewMatrix=E.camera.on("viewMatrix",(()=>{})),this._onCameraProjMatrix=E.camera.on("projMatrix",(()=>{})),this._onSceneTick=E.on("tick",(()=>{const s=Math.abs(p.lenVec3(p.subVec3(E.camera.eye,this._pos,e)));if(s!==t&&"perspective"===y.projection){const e=.07*(Math.tan(y.perspective.fov*p.DEGTORAD)*s);h.scale=[e,e,e],t=s}if("ortho"===y.projection){const e=y.ortho.scale/10;h.scale=[e,e,e],t=s}}))}const v=function(){const e=new Float64Array(2);return function(t){if(t){for(var s=t.target,i=0,r=0;s.offsetParent;)i+=s.offsetLeft,r+=s.offsetTop,s=s.offsetParent;e[0]=t.pageX-i,e[1]=t.pageY-r}else t=window.event,e[0]=t.x,e[1]=t.y;return e}}(),_=function(){const t=p.mat4();return function(s,i){return p.quaternionToMat4(e._rootNode.quaternion,t),p.transformVec3(t,s,i),p.normalizeVec3(i),i}}();var I=function(){const e=p.vec3();return function(t){const s=Math.abs(t[0]);return s>Math.abs(t[1])&&s>Math.abs(t[2])?p.cross3Vec3(t,[0,1,0],e):p.cross3Vec3(t,[1,0,0],e),p.cross3Vec3(e,t,e),p.normalizeVec3(e),e}}();const T=function(){const t=p.vec3(),s=p.vec3(),i=p.vec4();return function(r,o,n){_(r,i);const a=I(i,o,n);D(o,a,t),D(n,a,s),p.subVec3(s,t);const l=p.dotVec3(s,i);e._pos[0]+=i[0]*l,e._pos[1]+=i[1]*l,e._pos[2]+=i[2]*l,e._rootNode.position=e._pos,e._sectionPlane&&(e._sectionPlane.pos=e._pos)}}();var P=function(){const t=p.vec4(),s=p.vec4(),i=p.vec4(),r=p.vec4();return function(o,n,a){_(o,r);if(!(D(n,r,t)&&D(a,r,s))){const e=I(r,n,a);D(n,e,t,1),D(a,e,s,1);var l=p.dotVec3(t,r);t[0]-=l*r[0],t[1]-=l*r[1],t[2]-=l*r[2],l=p.dotVec3(s,r),s[0]-=l*r[0],s[1]-=l*r[1],s[2]-=l*r[2]}p.normalizeVec3(t),p.normalizeVec3(s),l=p.dotVec3(t,s),l=p.clamp(l,-1,1);var h=Math.acos(l)*p.RADTODEG;p.cross3Vec3(t,s,i),p.dotVec3(i,r)<0&&(h=-h),e._rootNode.rotate(o,h),b()}}(),D=function(){const t=p.vec4([0,0,0,1]),s=p.mat4();return function(i,r,o,n){n=n||0,t[0]=i[0]/g.width*2-1,t[1]=-(i[1]/g.height*2-1),t[2]=0,t[3]=1,p.mulMat4(y.projMatrix,y.viewMatrix,s),p.inverseMat4(s),p.transformVec4(s,t,t),p.mulVec4Scalar(t,1/t[3]);var a=y.eye;p.subVec4(t,a,t);const l=e._sectionPlane.pos;var h=-p.dotVec3(l,r)-n,c=p.dotVec3(r,t);if(Math.abs(c)>.005){var u=-(p.dotVec3(r,a)+h)/c;return p.mulVec3Scalar(t,u,o),p.addVec3(o,a),p.subVec3(o,l,o),!0}return!1}}();const b=function(){const t=p.vec3(),s=p.mat4();return function(){e.sectionPlane&&(p.quaternionToMat4(h.quaternion,s),p.transformVec3(s,[0,0,1],t),e._setSectionPlaneDir(t))}}();var R,C=!1;this._onCameraControlHover=this._viewer.cameraControl.on("hoverEnter",(e=>{if(!this._visible)return;if(C)return;var h;t=!1,R&&(R.visible=!1);switch(e.entity.id){case this._displayMeshes.xAxisArrowHandle.id:case this._displayMeshes.xAxisHandle.id:h=this._affordanceMeshes.xAxisArrow,c=i;break;case this._displayMeshes.yAxisArrowHandle.id:case this._displayMeshes.yShaftHandle.id:h=this._affordanceMeshes.yAxisArrow,c=r;break;case this._displayMeshes.zAxisArrowHandle.id:case this._displayMeshes.zAxisHandle.id:h=this._affordanceMeshes.zAxisArrow,c=o;break;case this._displayMeshes.xCurveHandle.id:h=this._affordanceMeshes.xHoop,c=n;break;case this._displayMeshes.yCurveHandle.id:h=this._affordanceMeshes.yHoop,c=a;break;case this._displayMeshes.zCurveHandle.id:h=this._affordanceMeshes.zHoop,c=l;break;default:return void(c=s)}h&&(h.visible=!0),R=h,t=!0})),this._onCameraControlHoverLeave=this._viewer.cameraControl.on("hoverOut",(e=>{this._visible&&(R&&(R.visible=!1),R=null,c=s)})),g.addEventListener("mousedown",this._canvasMouseDownListener=e=>{if(e.preventDefault(),this._visible&&t&&(this._viewer.cameraControl.pointerEnabled=!1,1===e.which)){C=!0;var s=v(e);u=c,A[0]=s[0],A[1]=s[1]}}),g.addEventListener("mousemove",this._canvasMouseMoveListener=e=>{if(!this._visible)return;if(!C)return;var t=v(e);const s=t[0],h=t[1];switch(u){case i:T(d,A,t);break;case r:T(f,A,t);break;case o:T(m,A,t);break;case n:P(d,A,t);break;case a:P(f,A,t);break;case l:P(m,A,t)}A[0]=s,A[1]=h}),g.addEventListener("mouseup",this._canvasMouseUpListener=e=>{this._visible&&(this._viewer.cameraControl.pointerEnabled=!0,C&&(e.which,C=!1,t=!1))}),g.addEventListener("wheel",this._canvasWheelListener=e=>{if(this._visible)Math.max(-1,Math.min(1,40*-e.deltaY))})}_destroy(){this._unbindEvents(),this._destroyNodes()}_unbindEvents(){const e=this._viewer,t=e.scene,s=t.canvas.canvas,i=e.camera,r=e.cameraControl;t.off(this._onSceneTick),s.removeEventListener("mousedown",this._canvasMouseDownListener),s.removeEventListener("mousemove",this._canvasMouseMoveListener),s.removeEventListener("mouseup",this._canvasMouseUpListener),s.removeEventListener("wheel",this._canvasWheelListener),i.off(this._onCameraViewMatrix),i.off(this._onCameraProjMatrix),r.off(this._onCameraControlHover),r.off(this._onCameraControlHoverLeave)}_destroyNodes(){this._setSectionPlane(null),this._rootNode.destroy(),this._displayMeshes={},this._affordanceMeshes={}}}class QE{constructor(e,t,s){this.id=s.id,this._sectionPlane=s,this._mesh=new Yr(t,{id:s.id,geometry:new gi(t,yi({xSize:.5,ySize:.5,zSize:.001})),material:new Ii(t,{emissive:[1,1,1],diffuse:[0,0,0],backfaces:!1}),edgeMaterial:new bi(t,{edgeColor:[0,0,0],edgeAlpha:1,edgeWidth:1}),highlightMaterial:new Pi(t,{fill:!0,fillColor:[.5,1,.5],fillAlpha:.7,edges:!0,edgeColor:[0,0,0],edgeAlpha:1,edgeWidth:1}),selectedMaterial:new Pi(t,{fill:!0,fillColor:[0,0,1],fillAlpha:.7,edges:!0,edgeColor:[1,0,0],edgeAlpha:1,edgeWidth:1}),highlighted:!0,scale:[3,3,3],position:[0,0,0],rotation:[0,0,0],opacity:.3,edges:!0});{const e=p.vec3([0,0,0]),t=p.vec3(),s=p.vec3([0,0,1]),i=p.vec4(4),r=p.vec3(),o=()=>{const o=this._sectionPlane.scene.center,n=[-this._sectionPlane.dir[0],-this._sectionPlane.dir[1],-this._sectionPlane.dir[2]];p.subVec3(o,this._sectionPlane.pos,e);const a=-p.dotVec3(n,e);p.normalizeVec3(n),p.mulVec3Scalar(n,a,t);const l=p.vec3PairToQuaternion(s,this._sectionPlane.dir,i);r[0]=.1*t[0],r[1]=.1*t[1],r[2]=.1*t[2],this._mesh.quaternion=l,this._mesh.position=r};this._onSectionPlanePos=this._sectionPlane.on("pos",o),this._onSectionPlaneDir=this._sectionPlane.on("dir",o)}this._highlighted=!1,this._selected=!1}setHighlighted(e){this._highlighted=!!e,this._mesh.highlighted=this._highlighted,this._mesh.highlightMaterial.fillColor=e?[0,.7,0]:[0,0,0]}getHighlighted(){return this._highlighted}setSelected(e){this._selected=!!e,this._mesh.edgeMaterial.edgeWidth=e?3:1,this._mesh.highlightMaterial.edgeWidth=e?3:1}getSelected(){return this._selected}destroy(){this._sectionPlane.off(this._onSectionPlanePos),this._sectionPlane.off(this._onSectionPlaneDir),this._mesh.destroy()}}class WE{constructor(e,t){if(!(t.onHoverEnterPlane&&t.onHoverLeavePlane&&t.onClickedNothing&&t.onClickedPlane))throw"Missing config(s): onHoverEnterPlane, onHoverLeavePlane, onClickedNothing || onClickedPlane";this.plugin=e,this._viewer=e.viewer,this._onHoverEnterPlane=t.onHoverEnterPlane,this._onHoverLeavePlane=t.onHoverLeavePlane,this._onClickedNothing=t.onClickedNothing,this._onClickedPlane=t.onClickedPlane,this._visible=!0,this._planes={},this._canvas=t.overviewCanvas,this._scene=new Bi(this._viewer,{canvasId:this._canvas.id,transparent:!0}),this._scene.clearLights(),new Ai(this._scene,{dir:[.4,-.4,.8],color:[.8,1,1],intensity:1,space:"view"}),new Ai(this._scene,{dir:[-.8,-.3,-.4],color:[.8,.8,.8],intensity:1,space:"view"}),new Ai(this._scene,{dir:[.8,-.6,-.8],color:[1,1,1],intensity:1,space:"view"}),this._scene.camera,this._scene.camera.perspective.fov=70,this._zUp=!1;{const e=this._scene.camera,t=p.rotationMat4c(-90*p.DEGTORAD,1,0,0),s=p.vec3(),i=p.vec3(),r=p.vec3();this._synchCamera=()=>{const o=this._viewer.camera.eye,n=this._viewer.camera.look,a=this._viewer.camera.up;p.mulVec3Scalar(p.normalizeVec3(p.subVec3(o,n,s)),7),this._zUp?(p.transformVec3(t,s,i),p.transformVec3(t,a,r),e.look=[0,0,0],e.eye=p.transformVec3(t,s,i),e.up=p.transformPoint3(t,a,r)):(e.look=[0,0,0],e.eye=s,e.up=a)}}this._onViewerCameraMatrix=this._viewer.camera.on("matrix",this._synchCamera),this._onViewerCameraWorldAxis=this._viewer.camera.on("worldAxis",this._synchCamera),this._onViewerCameraFOV=this._viewer.camera.perspective.on("fov",(e=>{this._scene.camera.perspective.fov=e}));var s=null;this._onInputMouseMove=this._scene.input.on("mousemove",(e=>{const t=this._scene.pick({canvasPos:e});if(t){if(!s||t.entity.id!==s.id){if(s){this._planes[s.id]&&this._onHoverLeavePlane(s.id)}s=t.entity;this._planes[s.id]&&this._onHoverEnterPlane(s.id)}}else s&&(this._onHoverLeavePlane(s.id),s=null)})),this._scene.canvas.canvas.addEventListener("mouseup",this._onCanvasMouseUp=()=>{if(s){this._planes[s.id]&&this._onClickedPlane(s.id)}else this._onClickedNothing()}),this._scene.canvas.canvas.addEventListener("mouseout",this._onCanvasMouseOut=()=>{s&&(this._onHoverLeavePlane(s.id),s=null)}),this.setVisible(t.overviewVisible)}addSectionPlane(e){this._planes[e.id]=new QE(this,this._scene,e)}setPlaneHighlighted(e,t){const s=this._planes[e];s&&s.setHighlighted(t)}setPlaneSelected(e,t){const s=this._planes[e];s&&s.setSelected(t)}removeSectionPlane(e){const t=this._planes[e.id];t&&(t.destroy(),delete this._planes[e.id])}setVisible(e=!0){this._visible=e,this._canvas.style.visibility=e?"visible":"hidden"}getVisible(){return this._visible}destroy(){this._viewer.camera.off(this._onViewerCameraMatrix),this._viewer.camera.off(this._onViewerCameraWorldAxis),this._viewer.camera.perspective.off(this._onViewerCameraFOV),this._scene.input.off(this._onInputMouseMove),this._scene.canvas.canvas.removeEventListener("mouseup",this._onCanvasMouseUp),this._scene.canvas.canvas.removeEventListener("mouseout",this._onCanvasMouseOut),this._scene.destroy()}}const zE=p.AABB3(),KE=p.vec3();class YE extends a{constructor(e,t={}){if(super("SectionPlanes",e),this._freeControls=[],this._sectionPlanes=e.scene.sectionPlanes,this._controls={},this._shownControlId=null,null!==t.overviewCanvasId&&void 0!==t.overviewCanvasId){const e=document.getElementById(t.overviewCanvasId);e?this._overview=new WE(this,{overviewCanvas:e,visible:t.overviewVisible,onHoverEnterPlane:e=>{this._overview.setPlaneHighlighted(e,!0)},onHoverLeavePlane:e=>{this._overview.setPlaneHighlighted(e,!1)},onClickedPlane:e=>{if(this.getShownControl()===e)return void this.hideControl();this.showControl(e);const t=this.sectionPlanes[e].pos;zE.set(this.viewer.scene.aabb),p.getAABB3Center(zE,KE),zE[0]+=t[0]-KE[0],zE[1]+=t[1]-KE[1],zE[2]+=t[2]-KE[2],zE[3]+=t[0]-KE[0],zE[4]+=t[1]-KE[1],zE[5]+=t[2]-KE[2],this.viewer.cameraFlight.flyTo({aabb:zE,fitFOV:65})},onClickedNothing:()=>{this.hideControl()}}):this.warn("Can't find overview canvas: '"+t.overviewCanvasId+"' - will create plugin without overview")}this._onSceneSectionPlaneCreated=e.scene.on("sectionPlaneCreated",(e=>{this._sectionPlaneCreated(e)}))}setOverviewVisible(e){this._overview&&this._overview.setVisible(e)}getOverviewVisible(){if(this._overview)return this._overview.getVisible()}get sectionPlanes(){return this._sectionPlanes}createSectionPlane(e={}){void 0!==e.id&&null!==e.id&&this.viewer.scene.components[e.id]&&(this.error("Viewer component with this ID already exists: "+e.id),delete e.id);return new Jr(this.viewer.scene,{id:e.id,pos:e.pos,dir:e.dir,active:!0})}_sectionPlaneCreated(e){const t=this._freeControls.length>0?this._freeControls.pop():new jE(this);t._setSectionPlane(e),t.setVisible(!1),this._controls[e.id]=t,this._overview&&this._overview.addSectionPlane(e),e.once("destroyed",(()=>{this._sectionPlaneDestroyed(e)}))}flipSectionPlanes(){const e=this.viewer.scene.sectionPlanes;for(let t in e){e[t].flipDir()}}showControl(e){const t=this._controls[e];t?(this.hideControl(),t.setVisible(!0),this._overview&&this._overview.setPlaneSelected(e,!0),this._shownControlId=e):this.error("Control not found: "+e)}getShownControl(){return this._shownControlId}hideControl(){for(var e in this._controls)this._controls.hasOwnProperty(e)&&(this._controls[e].setVisible(!1),this._overview&&this._overview.setPlaneSelected(e,!1));this._shownControlId=null}destroySectionPlane(e){var t=this.viewer.scene.sectionPlanes[e];t?(this._sectionPlaneDestroyed(t),t.destroy(),e===this._shownControlId&&(this._shownControlId=null)):this.error("SectionPlane not found: "+e)}_sectionPlaneDestroyed(e){this._overview&&this._overview.removeSectionPlane(e);const t=this._controls[e.id];t&&(t.setVisible(!1),t._setSectionPlane(null),delete this._controls[e.id],this._freeControls.push(t))}clear(){const e=Object.keys(this._sectionPlanes);for(var t=0,s=e.length;t<s;t++)this.destroySectionPlane(e[t])}send(e,t){switch(e){case"snapshotStarting":for(let e in this._controls)this._controls.hasOwnProperty(e)&&this._controls[e].setCulled(!0);break;case"snapshotFinished":for(let e in this._controls)this._controls.hasOwnProperty(e)&&this._controls[e].setCulled(!1);break;case"clearSectionPlanes":this.clear()}}destroy(){this.clear(),this._overview&&this._overview.destroy(),this._destroyFreeControls(),super.destroy()}_destroyFreeControls(){for(var e=this._freeControls.pop();e;)e._destroy(),e=this._freeControls.pop();this.viewer.scene.off(this._onSceneSectionPlaneCreated)}}p.vec3(),p.vec3(),p.mat4();const XE=[];class ZE extends a{constructor(e,t={}){if(super("TreeViewPlugin",e),this.errors=[],this.valid=!0,t.containerElement){for(let e=0;;e++)if(!XE[e]){XE[e]=this,this._index=e,this._id=`tree-${e}`;break}if(this._containerElement=t.containerElement,this._metaModels={},this._autoAddModels=!1!==t.autoAddModels,this._autoExpandDepth=t.autoExpandDepth||0,this._sortNodes=!1!==t.sortNodes,this._pruneEmptyNodes=!1!==t.pruneEmptyNodes,this._viewer=e,this._rootElement=null,this._muteSceneEvents=!1,this._muteTreeEvents=!1,this._rootNodes=[],this._objectNodes={},this._nodeNodes={},this._rootName=t.rootName,this._sortNodes=t.sortNodes,this._pruneEmptyNodes=t.pruneEmptyNodes,this._showListItemElementId=null,this._containerElement.oncontextmenu=e=>{e.preventDefault()},this._onObjectVisibility=this._viewer.scene.on("objectVisibility",(e=>{if(this._muteSceneEvents)return;const t=e.id,s=this._objectNodes[t];if(!s)return;const i=e.visible;if(!(i!==s.checked))return;this._muteTreeEvents=!0,s.checked=i,i?s.numVisibleEntities++:s.numVisibleEntities--;const r=document.getElementById(`checkbox-${s.nodeId}`);r&&(r.checked=i);let o=s.parent;for(;o;){o.checked=i,i?o.numVisibleEntities++:o.numVisibleEntities--;const e=document.getElementById(`checkbox-${o.nodeId}`);if(e){const t=o.numVisibleEntities>0;t!==e.checked&&(e.checked=t)}o=o.parent}this._muteTreeEvents=!1})),this._onObjectXrayed=this._viewer.scene.on("objectXRayed",(e=>{if(this._muteSceneEvents)return;const t=e.id,s=this._objectNodes[t];if(!s)return;this._muteTreeEvents=!0;const i=e.xrayed;if(!(i!==s.xrayed))return;s.xrayed=i;const r=s.nodeId,o=document.getElementById(r);null!==o&&(i?o.classList.add("xrayed-node"):o.classList.remove("xrayed-node")),this._muteTreeEvents=!1})),this._switchExpandHandler=e=>{e.preventDefault(),e.stopPropagation();const t=e.target;this._expandSwitchElement(t)},this._switchCollapseHandler=e=>{e.preventDefault(),e.stopPropagation();const t=e.target;this._collapseSwitchElement(t)},this._checkboxChangeHandler=e=>{if(this._muteTreeEvents)return;this._muteSceneEvents=!0;const t=e.target,s=t.checked,i=t.id.replace("checkbox-",""),r=this._nodeNodes[i],o=this._viewer.scene.objects;let n=0;this._withNodeTree(r,(e=>{const t=e.objectId,i=`checkbox-${e.nodeId}`,r=o[t],a=0===e.children.length;e.numVisibleEntities=s?e.numEntities:0,a&&s!==e.checked&&n++,e.checked=s;const l=document.getElementById(i);l&&(l.checked=s),r&&(r.visible=s)}));let a=r.parent;for(;a;){a.checked=s;const e=document.getElementById(`checkbox-${a.nodeId}`);s?a.numVisibleEntities+=n:a.numVisibleEntities-=n;const t=a.numVisibleEntities>0;t!==e.checked&&(e.checked=t),a=a.parent}this._muteSceneEvents=!1},this._hierarchy=t.hierarchy||"containment",this._autoExpandDepth=t.autoExpandDepth||0,this._autoAddModels){const e=Object.keys(this.viewer.metaScene.metaModels);for(let t=0,s=e.length;t<s;t++){const s=e[t];this.addModel(s)}this.viewer.scene.on("modelLoaded",(e=>{this.viewer.metaScene.metaModels[e]&&this.addModel(e)}))}this.hierarchy=t.hierarchy}else this.error("Config expected: containerElement")}set hierarchy(e){"containment"!==(e=e||"containment")&&"storeys"!==e&&"types"!==e&&(this.error("Unsupported value for `hierarchy' - defaulting to 'containment'"),e="containment"),this._hierarchy!==e&&(this._hierarchy=e,this._createNodes())}get hierarchy(){return this._hierarchy}addModel(e,t={}){if(!this._containerElement)return;const s=this.viewer.scene.models[e];if(!s)throw"Model not found: "+e;const i=this.viewer.metaScene.metaModels[e];i?this._metaModels[e]?this.warn("Model already added: "+e):(this._metaModels[e]=i,s.on("destroyed",(()=>{this.removeModel(s.id)})),this._createNodes()):this.error("MetaModel not found: "+e)}removeModel(e){if(!this._containerElement)return;this._metaModels[e]&&(delete this._metaModels[e],this._createNodes())}showNode(e){this._showListItemElementId&&this.unShowNode();const t=this._objectNodes[e];if(!t)return;const s=t.nodeId,i="switch-"+s,r=document.getElementById(i);if(r)return this._expandSwitchElement(r),void r.scrollIntoView();const o=[];o.unshift(t);let n=t.parent;for(;n;)o.unshift(n),n=n.parent;for(let e=0,t=o.length;e<t;e++){const t="switch-"+o[e].nodeId,s=document.getElementById(t);s&&this._expandSwitchElement(s)}const a=s,l=document.getElementById(a);l.scrollIntoView({block:"center"}),l.classList.add("highlighted-node"),this._showListItemElementId=a}unShowNode(){if(!this._showListItemElementId)return;const e=document.getElementById(this._showListItemElementId);e?(e.classList.remove("highlighted-node"),this._showListItemElementId=null):this._showListItemElementId=null}expandToDepth(e){this.collapse();const t=(s,i)=>{if(i===e)return;const r="switch-"+s.nodeId,o=document.getElementById(r);if(o){this._expandSwitchElement(o);const e=s.children;for(var n=0,a=e.length;n<a;n++){const s=e[n];t(s,i+1)}}};for(let e=0,s=this._rootNodes.length;e<s;e++){const s=this._rootNodes[e];t(s,0)}}collapse(){for(let e=0,t=this._rootNodes.length;e<t;e++){const t=this._rootNodes[e].objectId;this._collapseNode(t)}}withNodeTree(e,t){t(e);const s=e.children;if(s)for(let e=0,i=s.length;e<i;e++)this.withNodeTree(s[e],t)}destroy(){this._containerElement&&(this._metaModels={},this._rootElement&&!this._destroyed&&(this._rootElement.parentNode.removeChild(this._rootElement),this._viewer.scene.off(this._onObjectVisibility),this._destroyed=!0),delete XE[this._index],super.destroy())}_createNodes(){this._rootElement&&(this._rootElement.parentNode.removeChild(this._rootElement),this._rootElement=null),this._rootNodes=[],this._objectNodes={},this._nodeNodes={},this._validate(),this.valid||"storeys"!==this._hierarchy?this._createEnabledNodes():this._createDisabledNodes()}_validate(){if(this.errors=[],"storeys"===this._hierarchy)this.valid=this._validateMetaModelForStoreysHierarchy();else this.valid=this._rootNodes.length>0;return this.valid}_validateMetaModelForStoreysHierarchy(e=0,t,s){return!0}_createEnabledNodes(){switch(this._pruneEmptyNodes&&this._findEmptyNodes(),this._hierarchy){case"storeys":this._createStoreysNodes(),0===this._rootNodes.length&&this.error("Failed to build storeys hierarchy");break;case"types":this._createTypesNodes();break;default:this._createContainmentNodes()}this._sortNodes&&this._doSortNodes(),this._synchNodesToEntities(),this._createTrees(),this.expandToDepth(this._autoExpandDepth)}_createDisabledNodes(){const e=document.createElement("ul");this._rootElement=e,this._containerElement.appendChild(e);const t=this._viewer.metaScene.rootMetaObjects;for(let s in t){const i=t[s],r=i.type,o=i.name,n=o&&""!==o&&"Undefined"!==o&&"Default"!==o?o:r,a=document.createElement("li");e.appendChild(a);const l=document.createElement("a");l.href="#",l.textContent="!",l.classList.add("warn"),l.classList.add("warning"),a.appendChild(l);const h=document.createElement("span");h.textContent=n,a.appendChild(h)}}_findEmptyNodes(){const e=this._viewer.metaScene.rootMetaObjects;for(let t in e)this._findEmptyNodes2(e[t])}_findEmptyNodes2(e,t=0){const s=this.viewer.scene,i=e.children,r=e.id,o=s.objects[r];if(e._countEntities=0,o&&e._countEntities++,i)for(let t=0,s=i.length;t<s;t++){const s=i[t];s._countEntities=this._findEmptyNodes2(s),e._countEntities+=s._countEntities}return e._countEntities}_createStoreysNodes(){const e=this._viewer.metaScene.rootMetaObjects;for(let t in e)this._createStoreysNodes2(e[t],null,null,null)}_createStoreysNodes2(e,t,s,i){if(this._pruneEmptyNodes&&0===e._countEntities)return;const r=e.type,o=e.name,n=e.children,a=e.id;if("IfcBuilding"===r)t={nodeId:`${this._id}-${a}`,objectId:a,title:this._rootName||(o&&""!==o&&"Undefined"!==o&&"Default"!==o?o:r),type:r,parent:null,numEntities:0,numVisibleEntities:0,checked:!1,xrayed:!1,children:[]},this._rootNodes.push(t),this._objectNodes[t.objectId]=t,this._nodeNodes[t.nodeId]=t;else if("IfcBuildingStorey"===r){if(!t)return void this.error("Failed to build storeys hierarchy for model '"+this.metaModel.id+"' - model does not have an IfcBuilding object, or is not an IFC model");s={nodeId:`${this._id}-${a}`,objectId:a,title:o&&""!==o&&"Undefined"!==o&&"Default"!==o?o:r,type:r,parent:t,numEntities:0,numVisibleEntities:0,checked:!1,xrayed:!1,children:[]},t.children.push(s),this._objectNodes[s.objectId]=s,this._nodeNodes[s.nodeId]=s,i={}}else if(s){if(this._viewer.scene.objects[a]){let e=(i=i||{})[r];e||(e={nodeId:`${this._id}-${s.objectId}-${r}`,objectId:`${s.objectId}-${r}`,title:r,type:r,parent:s,numEntities:0,numVisibleEntities:0,checked:!1,xrayed:!1,children:[]},s.children.push(e),this._objectNodes[e.objectId]=e,this._nodeNodes[e.nodeId]=e,i[r]=e);const t={nodeId:`${this._id}-${a}`,objectId:a,title:o&&""!==o&&"Undefined"!==o&&"Default"!==o?o:r,type:r,parent:e,numEntities:0,numVisibleEntities:0,checked:!1,xrayed:!1,children:[]};e.children.push(t),this._objectNodes[t.objectId]=t,this._nodeNodes[t.nodeId]=t}}if(n)for(let e=0,r=n.length;e<r;e++){const r=n[e];this._createStoreysNodes2(r,t,s,i)}}_createTypesNodes(){const e=this._viewer.metaScene.rootMetaObjects;for(let t in e)this._createTypesNodes2(e[t],null,null)}_createTypesNodes2(e,t,s){if(this._pruneEmptyNodes&&0===e._countEntities)return;const i=e.type,r=e.name,o=e.children,n=e.id;if(e.parent){if(t){if(this._viewer.scene.objects[n]){let e=s[i];e||(e={nodeId:`${this._id}-${t.objectId}-${i}`,objectId:`${t.objectId}-${i}`,title:i,type:i,parent:t,numEntities:0,numVisibleEntities:0,checked:!1,xrayed:!1,children:[]},t.children.push(e),this._objectNodes[e.objectId]=e,this._nodeNodes[e.nodeId]=e,s[i]=e);const o={nodeId:`${this._id}-${n}`,objectId:n,title:r&&""!==r&&"Default"!==r?r:i,type:i,parent:e,numEntities:0,numVisibleEntities:0,checked:!1,xrayed:!1,children:[]};e.children.push(o),this._objectNodes[o.objectId]=o,this._nodeNodes[o.nodeId]=o}}}else t={nodeId:`${this._id}-${n}`,objectId:n,title:this._rootName||(r&&""!==r&&"Undefined"!==r&&"Default"!==r?r:i),type:i,parent:null,numEntities:0,numVisibleEntities:0,checked:!1,xrayed:!1,children:[]},this._rootNodes.push(t),this._objectNodes[t.objectId]=t,this._nodeNodes[t.nodeId]=t,s={};if(o)for(let e=0,i=o.length;e<i;e++){const i=o[e];this._createTypesNodes2(i,t,s)}}_createContainmentNodes(){const e=this._viewer.metaScene.rootMetaObjects;for(let t in e)this._createContainmentNodes2(e[t],null)}_createContainmentNodes2(e,t){if(this._pruneEmptyNodes&&0===e._countEntities)return;const s=e.type,i=e.name||s,r=e.children,o=e.id,n={nodeId:`${this._id}-${o}`,objectId:o,title:t?i&&""!==i&&"Undefined"!==i&&"Default"!==i?i:s:this._rootName||i,type:s,parent:t,numEntities:0,numVisibleEntities:0,checked:!1,xrayed:!1,children:[]};if(t?t.children.push(n):this._rootNodes.push(n),this._objectNodes[n.objectId]=n,this._nodeNodes[n.nodeId]=n,r)for(let e=0,t=r.length;e<t;e++){const t=r[e];this._createContainmentNodes2(t,n)}}_doSortNodes(){for(let e=0,t=this._rootNodes.length;e<t;e++){const t=this._rootNodes[e];this._sortChildren(t)}}_sortChildren(e){const t=e.children;if(t&&0!==t.length){"storeys"===this._hierarchy&&"IfcBuilding"===e.type?t.sort(this._getSpatialSortFunc()):t.sort(this._alphaSortFunc);for(let e=0,s=t.length;e<s;e++){const s=t[e];this._sortChildren(s)}}}_getSpatialSortFunc(){const e=this.viewer,t=e.scene,s=t.camera,i=e.metaScene;return this._spatialSortFunc||(this._spatialSortFunc=(e,r)=>{e.aabb&&r.aabb||(e.aabb||(e.aabb=t.getAABB(i.getObjectIDsInSubtree(e.objectId))),r.aabb||(r.aabb=t.getAABB(i.getObjectIDsInSubtree(r.objectId))));let o=0;return o=s.xUp?0:s.yUp?1:2,e.aabb[o]>r.aabb[o]?-1:e.aabb[o]<r.aabb[o]?1:0})}_alphaSortFunc(e,t){const s=e.title.toUpperCase(),i=t.title.toUpperCase();return s<i?-1:s>i?1:0}_synchNodesToEntities(){const e=Object.keys(this.viewer.metaScene.metaObjects),t=this._viewer.metaScene.metaObjects,s=this._viewer.scene.objects;for(let i=0,r=e.length;i<r;i++){const r=e[i];if(t[r]){const e=this._objectNodes[r];if(e){const t=s[r];if(t){const s=t.visible;e.numEntities=1,e.xrayed=t.xrayed,s?(e.numVisibleEntities=1,e.checked=!0):(e.numVisibleEntities=0,e.checked=!1);let i=e.parent;for(;i;)i.numEntities++,s&&(i.numVisibleEntities++,i.checked=!0),i=i.parent}}}}}_withNodeTree(e,t){t(e);const s=e.children;if(s)for(let e=0,i=s.length;e<i;e++)this._withNodeTree(s[e],t)}_createTrees(){if(0===this._rootNodes.length)return;const e=this._rootNodes.map((e=>this._createNodeElement(e))),t=document.createElement("ul");e.forEach((e=>{t.appendChild(e)})),this._containerElement.appendChild(t),this._rootElement=t}_createNodeElement(e){const t=document.createElement("li"),s=e.nodeId;if(e.xrayed&&t.classList.add("xrayed-node"),t.id=s,e.children.length>0){const e="switch-"+s,i=document.createElement("a");i.href="#",i.id=e,i.textContent="+",i.classList.add("plus"),i.addEventListener("click",this._switchExpandHandler),t.appendChild(i)}const i=document.createElement("input");i.id=`checkbox-${s}`,i.type="checkbox",i.checked=e.checked,i.style["pointer-events"]="all",i.addEventListener("change",this._checkboxChangeHandler),t.appendChild(i);const r=document.createElement("span");return r.textContent=e.title,t.appendChild(r),r.oncontextmenu=t=>{this.fire("contextmenu",{event:t,viewer:this._viewer,treeViewPlugin:this,treeViewNode:e}),t.preventDefault()},r.onclick=t=>{this.fire("nodeTitleClicked",{event:t,viewer:this._viewer,treeViewPlugin:this,treeViewNode:e}),t.preventDefault()},t}_expandSwitchElement(e){const t=e.parentElement;if(t.getElementsByTagName("li")[0])return;const s=t.id,i=this._nodeNodes[s].children.map((e=>this._createNodeElement(e))),r=document.createElement("ul");i.forEach((e=>{r.appendChild(e)})),t.appendChild(r),e.classList.remove("plus"),e.classList.add("minus"),e.textContent="-",e.removeEventListener("click",this._switchExpandHandler),e.addEventListener("click",this._switchCollapseHandler)}_collapseNode(e){const t="switch-"+e,s=document.getElementById(t);this._collapseSwitchElement(s)}_collapseSwitchElement(e){if(!e)return;const t=e.parentElement;if(!t)return;const s=t.querySelector("ul");s&&(t.removeChild(s),e.classList.remove("minus"),e.classList.add("plus"),e.textContent="+",e.removeEventListener("click",this._switchCollapseHandler),e.addEventListener("click",this._switchExpandHandler))}}class qE{constructor(){}getMetaModel(e,t,s){y.loadJSON(e,(e=>{t(e)}),(function(e){s(e)}))}getXKT(e,t,s){var i=()=>{};t=t||i,s=s||i;const r=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(r){const e=!!r[2];var o=r[3];o=window.decodeURIComponent(o),e&&(o=window.atob(o));try{const e=new ArrayBuffer(o.length),s=new Uint8Array(e);for(var n=0;n<o.length;n++)s[n]=o.charCodeAt(n);t(e)}catch(e){s(e)}}else{const i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onreadystatechange=function(){4===i.readyState&&(200===i.status?t(i.response):s("getXKT error : "+i.response))},i.send(null)}}}
/*! pako 2.0.4 https://github.com/nodeca/pako @license (MIT AND Zlib) */!function(t,s){"object"==typeof e&&"undefined"!=typeof module?s(e):"function"==typeof define&&define.amd?define(["exports"],s):s((t="undefined"!=typeof globalThis?globalThis:t||self).pako={})}(void 0,(function(e){function t(e){let t=e.length;for(;--t>=0;)e[t]=0}const s=256,i=286,r=30,o=15,n=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),a=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),l=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),h=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c=new Array(576);t(c);const u=new Array(60);t(u);const A=new Array(512);t(A);const p=new Array(256);t(p);const d=new Array(29);t(d);const f=new Array(r);function m(e,t,s,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=s,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}let g,y,E;function v(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}t(f);const _=e=>e<256?A[e]:A[256+(e>>>7)],I=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},T=(e,t,s)=>{e.bi_valid>16-s?(e.bi_buf|=t<<e.bi_valid&65535,I(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=s-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=s)},P=(e,t,s)=>{T(e,s[2*t],s[2*t+1])},D=(e,t)=>{let s=0;do{s|=1&e,e>>>=1,s<<=1}while(--t>0);return s>>>1},b=(e,t,s)=>{const i=new Array(16);let r,n,a=0;for(r=1;r<=o;r++)i[r]=a=a+s[r-1]<<1;for(n=0;n<=t;n++){let t=e[2*n+1];0!==t&&(e[2*n]=D(i[t]++,t))}},R=e=>{let t;for(t=0;t<i;t++)e.dyn_ltree[2*t]=0;for(t=0;t<r;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},C=e=>{e.bi_valid>8?I(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},x=(e,t,s,i)=>{const r=2*t,o=2*s;return e[r]<e[o]||e[r]===e[o]&&i[t]<=i[s]},N=(e,t,s)=>{const i=e.heap[s];let r=s<<1;for(;r<=e.heap_len&&(r<e.heap_len&&x(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!x(t,i,e.heap[r],e.depth));)e.heap[s]=e.heap[r],s=r,r<<=1;e.heap[s]=i},O=(e,t,i)=>{let r,o,l,h,c=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],o=e.pending_buf[e.l_buf+c],c++,0===r?P(e,o,t):(l=p[o],P(e,l+s+1,t),h=n[l],0!==h&&(o-=d[l],T(e,o,h)),r--,l=_(r),P(e,l,i),h=a[l],0!==h&&(r-=f[l],T(e,r,h)))}while(c<e.last_lit);P(e,256,t)},S=(e,t)=>{const s=t.dyn_tree,i=t.stat_desc.static_tree,r=t.stat_desc.has_stree,n=t.stat_desc.elems;let a,l,h,c=-1;for(e.heap_len=0,e.heap_max=573,a=0;a<n;a++)0!==s[2*a]?(e.heap[++e.heap_len]=c=a,e.depth[a]=0):s[2*a+1]=0;for(;e.heap_len<2;)h=e.heap[++e.heap_len]=c<2?++c:0,s[2*h]=1,e.depth[h]=0,e.opt_len--,r&&(e.static_len-=i[2*h+1]);for(t.max_code=c,a=e.heap_len>>1;a>=1;a--)N(e,s,a);h=n;do{a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],N(e,s,1),l=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=l,s[2*h]=s[2*a]+s[2*l],e.depth[h]=(e.depth[a]>=e.depth[l]?e.depth[a]:e.depth[l])+1,s[2*a+1]=s[2*l+1]=h,e.heap[1]=h++,N(e,s,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const s=t.dyn_tree,i=t.max_code,r=t.stat_desc.static_tree,n=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,l=t.stat_desc.extra_base,h=t.stat_desc.max_length;let c,u,A,p,d,f,m=0;for(p=0;p<=o;p++)e.bl_count[p]=0;for(s[2*e.heap[e.heap_max]+1]=0,c=e.heap_max+1;c<573;c++)u=e.heap[c],p=s[2*s[2*u+1]+1]+1,p>h&&(p=h,m++),s[2*u+1]=p,u>i||(e.bl_count[p]++,d=0,u>=l&&(d=a[u-l]),f=s[2*u],e.opt_len+=f*(p+d),n&&(e.static_len+=f*(r[2*u+1]+d)));if(0!==m){do{for(p=h-1;0===e.bl_count[p];)p--;e.bl_count[p]--,e.bl_count[p+1]+=2,e.bl_count[h]--,m-=2}while(m>0);for(p=h;0!==p;p--)for(u=e.bl_count[p];0!==u;)A=e.heap[--c],A>i||(s[2*A+1]!==p&&(e.opt_len+=(p-s[2*A+1])*s[2*A],s[2*A+1]=p),u--)}})(e,t),b(s,c,e.bl_count)},w=(e,t,s)=>{let i,r,o=-1,n=t[1],a=0,l=7,h=4;for(0===n&&(l=138,h=3),t[2*(s+1)+1]=65535,i=0;i<=s;i++)r=n,n=t[2*(i+1)+1],++a<l&&r===n||(a<h?e.bl_tree[2*r]+=a:0!==r?(r!==o&&e.bl_tree[2*r]++,e.bl_tree[32]++):a<=10?e.bl_tree[34]++:e.bl_tree[36]++,a=0,o=r,0===n?(l=138,h=3):r===n?(l=6,h=3):(l=7,h=4))},M=(e,t,s)=>{let i,r,o=-1,n=t[1],a=0,l=7,h=4;for(0===n&&(l=138,h=3),i=0;i<=s;i++)if(r=n,n=t[2*(i+1)+1],!(++a<l&&r===n)){if(a<h)do{P(e,r,e.bl_tree)}while(0!=--a);else 0!==r?(r!==o&&(P(e,r,e.bl_tree),a--),P(e,16,e.bl_tree),T(e,a-3,2)):a<=10?(P(e,17,e.bl_tree),T(e,a-3,3)):(P(e,18,e.bl_tree),T(e,a-11,7));a=0,o=r,0===n?(l=138,h=3):r===n?(l=6,h=3):(l=7,h=4)}};let B=!1;const F=(e,t,s,i)=>{T(e,0+(i?1:0),3),((e,t,s,i)=>{C(e),i&&(I(e,s),I(e,~s)),e.pending_buf.set(e.window.subarray(t,t+s),e.pending),e.pending+=s})(e,t,s,!0)};var L=e=>{B||((()=>{let e,t,s,h,v;const _=new Array(16);for(s=0,h=0;h<28;h++)for(d[h]=s,e=0;e<1<<n[h];e++)p[s++]=h;for(p[s-1]=h,v=0,h=0;h<16;h++)for(f[h]=v,e=0;e<1<<a[h];e++)A[v++]=h;for(v>>=7;h<r;h++)for(f[h]=v<<7,e=0;e<1<<a[h]-7;e++)A[256+v++]=h;for(t=0;t<=o;t++)_[t]=0;for(e=0;e<=143;)c[2*e+1]=8,e++,_[8]++;for(;e<=255;)c[2*e+1]=9,e++,_[9]++;for(;e<=279;)c[2*e+1]=7,e++,_[7]++;for(;e<=287;)c[2*e+1]=8,e++,_[8]++;for(b(c,287,_),e=0;e<r;e++)u[2*e+1]=5,u[2*e]=D(e,5);g=new m(c,n,257,i,o),y=new m(u,a,0,r,o),E=new m(new Array(0),l,0,19,7)})(),B=!0),e.l_desc=new v(e.dyn_ltree,g),e.d_desc=new v(e.dyn_dtree,y),e.bl_desc=new v(e.bl_tree,E),e.bi_buf=0,e.bi_valid=0,R(e)},U=(e,t,i,r)=>{let o,n,a=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,i=4093624447;for(t=0;t<=31;t++,i>>>=1)if(1&i&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<s;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),S(e,e.l_desc),S(e,e.d_desc),a=(e=>{let t;for(w(e,e.dyn_ltree,e.l_desc.max_code),w(e,e.dyn_dtree,e.d_desc.max_code),S(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*h[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),o=e.opt_len+3+7>>>3,n=e.static_len+3+7>>>3,n<=o&&(o=n)):o=n=i+5,i+4<=o&&-1!==t?F(e,t,i,r):4===e.strategy||n===o?(T(e,2+(r?1:0),3),O(e,c,u)):(T(e,4+(r?1:0),3),((e,t,s,i)=>{let r;for(T(e,t-257,5),T(e,s-1,5),T(e,i-4,4),r=0;r<i;r++)T(e,e.bl_tree[2*h[r]+1],3);M(e,e.dyn_ltree,t-1),M(e,e.dyn_dtree,s-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),O(e,e.dyn_ltree,e.dyn_dtree)),R(e),r&&C(e)},H=(e,t,i)=>(e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&i,e.last_lit++,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(p[i]+s+1)]++,e.dyn_dtree[2*_(t)]++),e.last_lit===e.lit_bufsize-1),G=e=>{T(e,2,3),P(e,256,c),(e=>{16===e.bi_valid?(I(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)},V={_tr_init:L,_tr_stored_block:F,_tr_flush_block:U,_tr_tally:H,_tr_align:G};var k=(e,t,s,i)=>{let r=65535&e|0,o=e>>>16&65535|0,n=0;for(;0!==s;){n=s>2e3?2e3:s,s-=n;do{r=r+t[i++]|0,o=o+r|0}while(--n);r%=65521,o%=65521}return r|o<<16|0};const j=new Uint32Array((()=>{let e,t=[];for(var s=0;s<256;s++){e=s;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[s]=e}return t})());var Q=(e,t,s,i)=>{const r=j,o=i+s;e^=-1;for(let s=i;s<o;s++)e=e>>>8^r[255&(e^t[s])];return-1^e},W={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},z={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:K,_tr_stored_block:Y,_tr_flush_block:X,_tr_tally:Z,_tr_align:q}=V,{Z_NO_FLUSH:J,Z_PARTIAL_FLUSH:$,Z_FULL_FLUSH:ee,Z_FINISH:te,Z_BLOCK:se,Z_OK:ie,Z_STREAM_END:re,Z_STREAM_ERROR:oe,Z_DATA_ERROR:ne,Z_BUF_ERROR:ae,Z_DEFAULT_COMPRESSION:le,Z_FILTERED:he,Z_HUFFMAN_ONLY:ce,Z_RLE:ue,Z_FIXED:Ae,Z_DEFAULT_STRATEGY:pe,Z_UNKNOWN:de,Z_DEFLATED:fe}=z,me=258,ge=262,ye=103,Ee=113,ve=666,_e=(e,t)=>(e.msg=W[t],t),Ie=e=>(e<<1)-(e>4?9:0),Te=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let Pe=(e,t,s)=>(t<<e.hash_shift^s)&e.hash_mask;const De=e=>{const t=e.state;let s=t.pending;s>e.avail_out&&(s=e.avail_out),0!==s&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+s),e.next_out),e.next_out+=s,t.pending_out+=s,e.total_out+=s,e.avail_out-=s,t.pending-=s,0===t.pending&&(t.pending_out=0))},be=(e,t)=>{X(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,De(e.strm)},Re=(e,t)=>{e.pending_buf[e.pending++]=t},Ce=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},xe=(e,t,s,i)=>{let r=e.avail_in;return r>i&&(r=i),0===r?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),s),1===e.state.wrap?e.adler=k(e.adler,t,r,s):2===e.state.wrap&&(e.adler=Q(e.adler,t,r,s)),e.next_in+=r,e.total_in+=r,r)},Ne=(e,t)=>{let s,i,r=e.max_chain_length,o=e.strstart,n=e.prev_length,a=e.nice_match;const l=e.strstart>e.w_size-ge?e.strstart-(e.w_size-ge):0,h=e.window,c=e.w_mask,u=e.prev,A=e.strstart+me;let p=h[o+n-1],d=h[o+n];e.prev_length>=e.good_match&&(r>>=2),a>e.lookahead&&(a=e.lookahead);do{if(s=t,h[s+n]===d&&h[s+n-1]===p&&h[s]===h[o]&&h[++s]===h[o+1]){o+=2,s++;do{}while(h[++o]===h[++s]&&h[++o]===h[++s]&&h[++o]===h[++s]&&h[++o]===h[++s]&&h[++o]===h[++s]&&h[++o]===h[++s]&&h[++o]===h[++s]&&h[++o]===h[++s]&&o<A);if(i=me-(A-o),o=A-me,i>n){if(e.match_start=t,n=i,i>=a)break;p=h[o+n-1],d=h[o+n]}}}while((t=u[t&c])>l&&0!=--r);return n<=e.lookahead?n:e.lookahead},Oe=e=>{const t=e.w_size;let s,i,r,o,n;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-ge)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,i=e.hash_size,s=i;do{r=e.head[--s],e.head[s]=r>=t?r-t:0}while(--i);i=t,s=i;do{r=e.prev[--s],e.prev[s]=r>=t?r-t:0}while(--i);o+=t}if(0===e.strm.avail_in)break;if(i=xe(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=i,e.lookahead+e.insert>=3)for(n=e.strstart-e.insert,e.ins_h=e.window[n],e.ins_h=Pe(e,e.ins_h,e.window[n+1]);e.insert&&(e.ins_h=Pe(e,e.ins_h,e.window[n+3-1]),e.prev[n&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=n,n++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<ge&&0!==e.strm.avail_in)},Se=(e,t)=>{let s,i;for(;;){if(e.lookahead<ge){if(Oe(e),e.lookahead<ge&&t===J)return 1;if(0===e.lookahead)break}if(s=0,e.lookahead>=3&&(e.ins_h=Pe(e,e.ins_h,e.window[e.strstart+3-1]),s=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==s&&e.strstart-s<=e.w_size-ge&&(e.match_length=Ne(e,s)),e.match_length>=3)if(i=Z(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Pe(e,e.ins_h,e.window[e.strstart+3-1]),s=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Pe(e,e.ins_h,e.window[e.strstart+1]);else i=Z(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(be(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===te?(be(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(be(e,!1),0===e.strm.avail_out)?1:2},we=(e,t)=>{let s,i,r;for(;;){if(e.lookahead<ge){if(Oe(e),e.lookahead<ge&&t===J)return 1;if(0===e.lookahead)break}if(s=0,e.lookahead>=3&&(e.ins_h=Pe(e,e.ins_h,e.window[e.strstart+3-1]),s=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==s&&e.prev_length<e.max_lazy_match&&e.strstart-s<=e.w_size-ge&&(e.match_length=Ne(e,s),e.match_length<=5&&(e.strategy===he||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-3,i=Z(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=Pe(e,e.ins_h,e.window[e.strstart+3-1]),s=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,i&&(be(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(i=Z(e,0,e.window[e.strstart-1]),i&&be(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=Z(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===te?(be(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(be(e,!1),0===e.strm.avail_out)?1:2};function Me(e,t,s,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=s,this.max_chain=i,this.func=r}const Be=[new Me(0,0,0,0,((e,t)=>{let s=65535;for(s>e.pending_buf_size-5&&(s=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Oe(e),0===e.lookahead&&t===J)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;const i=e.block_start+s;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,be(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-ge&&(be(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===te?(be(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(be(e,!1),e.strm.avail_out),1)})),new Me(4,4,8,4,Se),new Me(4,5,16,8,Se),new Me(4,6,32,32,Se),new Me(4,4,16,16,we),new Me(8,16,32,32,we),new Me(8,16,128,128,we),new Me(8,32,128,256,we),new Me(32,128,258,1024,we),new Me(32,258,258,4096,we)];function Fe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=fe,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Te(this.dyn_ltree),Te(this.dyn_dtree),Te(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Te(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Te(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Le=e=>{if(!e||!e.state)return _e(e,oe);e.total_in=e.total_out=0,e.data_type=de;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:Ee,e.adler=2===t.wrap?0:1,t.last_flush=J,K(t),ie},Ue=e=>{const t=Le(e);return t===ie&&(e=>{e.window_size=2*e.w_size,Te(e.head),e.max_lazy_match=Be[e.level].max_lazy,e.good_match=Be[e.level].good_length,e.nice_match=Be[e.level].nice_length,e.max_chain_length=Be[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),t},He=(e,t,s,i,r,o)=>{if(!e)return oe;let n=1;if(t===le&&(t=6),i<0?(n=0,i=-i):i>15&&(n=2,i-=16),r<1||r>9||s!==fe||i<8||i>15||t<0||t>9||o<0||o>Ae)return _e(e,oe);8===i&&(i=9);const a=new Fe;return e.state=a,a.strm=e,a.wrap=n,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.d_buf=1*a.lit_bufsize,a.l_buf=3*a.lit_bufsize,a.level=t,a.strategy=o,a.method=s,Ue(e)};var Ge=(e,t)=>{let s,i;if(!e||!e.state||t>se||t<0)return e?_e(e,oe):oe;const r=e.state;if(!e.output||!e.input&&0!==e.avail_in||r.status===ve&&t!==te)return _e(e,0===e.avail_out?ae:oe);r.strm=e;const o=r.last_flush;if(r.last_flush=t,42===r.status)if(2===r.wrap)e.adler=0,Re(r,31),Re(r,139),Re(r,8),r.gzhead?(Re(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Re(r,255&r.gzhead.time),Re(r,r.gzhead.time>>8&255),Re(r,r.gzhead.time>>16&255),Re(r,r.gzhead.time>>24&255),Re(r,9===r.level?2:r.strategy>=ce||r.level<2?4:0),Re(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(Re(r,255&r.gzhead.extra.length),Re(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=Q(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(Re(r,0),Re(r,0),Re(r,0),Re(r,0),Re(r,0),Re(r,9===r.level?2:r.strategy>=ce||r.level<2?4:0),Re(r,3),r.status=Ee);else{let t=fe+(r.w_bits-8<<4)<<8,s=-1;s=r.strategy>=ce||r.level<2?0:r.level<6?1:6===r.level?2:3,t|=s<<6,0!==r.strstart&&(t|=32),t+=31-t%31,r.status=Ee,Ce(r,t),0!==r.strstart&&(Ce(r,e.adler>>>16),Ce(r,65535&e.adler)),e.adler=1}if(69===r.status)if(r.gzhead.extra){for(s=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>s&&(e.adler=Q(e.adler,r.pending_buf,r.pending-s,s)),De(e),s=r.pending,r.pending!==r.pending_buf_size));)Re(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>s&&(e.adler=Q(e.adler,r.pending_buf,r.pending-s,s)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(e.adler=Q(e.adler,r.pending_buf,r.pending-s,s)),De(e),s=r.pending,r.pending===r.pending_buf_size)){i=1;break}i=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,Re(r,i)}while(0!==i);r.gzhead.hcrc&&r.pending>s&&(e.adler=Q(e.adler,r.pending_buf,r.pending-s,s)),0===i&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(e.adler=Q(e.adler,r.pending_buf,r.pending-s,s)),De(e),s=r.pending,r.pending===r.pending_buf_size)){i=1;break}i=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,Re(r,i)}while(0!==i);r.gzhead.hcrc&&r.pending>s&&(e.adler=Q(e.adler,r.pending_buf,r.pending-s,s)),0===i&&(r.status=ye)}else r.status=ye;if(r.status===ye&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&De(e),r.pending+2<=r.pending_buf_size&&(Re(r,255&e.adler),Re(r,e.adler>>8&255),e.adler=0,r.status=Ee)):r.status=Ee),0!==r.pending){if(De(e),0===e.avail_out)return r.last_flush=-1,ie}else if(0===e.avail_in&&Ie(t)<=Ie(o)&&t!==te)return _e(e,ae);if(r.status===ve&&0!==e.avail_in)return _e(e,ae);if(0!==e.avail_in||0!==r.lookahead||t!==J&&r.status!==ve){let s=r.strategy===ce?((e,t)=>{let s;for(;;){if(0===e.lookahead&&(Oe(e),0===e.lookahead)){if(t===J)return 1;break}if(e.match_length=0,s=Z(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,s&&(be(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===te?(be(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(be(e,!1),0===e.strm.avail_out)?1:2})(r,t):r.strategy===ue?((e,t)=>{let s,i,r,o;const n=e.window;for(;;){if(e.lookahead<=me){if(Oe(e),e.lookahead<=me&&t===J)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=e.strstart-1,i=n[r],i===n[++r]&&i===n[++r]&&i===n[++r])){o=e.strstart+me;do{}while(i===n[++r]&&i===n[++r]&&i===n[++r]&&i===n[++r]&&i===n[++r]&&i===n[++r]&&i===n[++r]&&i===n[++r]&&r<o);e.match_length=me-(o-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(s=Z(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(s=Z(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),s&&(be(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===te?(be(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(be(e,!1),0===e.strm.avail_out)?1:2})(r,t):Be[r.level].func(r,t);if(3!==s&&4!==s||(r.status=ve),1===s||3===s)return 0===e.avail_out&&(r.last_flush=-1),ie;if(2===s&&(t===$?q(r):t!==se&&(Y(r,0,0,!1),t===ee&&(Te(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),De(e),0===e.avail_out))return r.last_flush=-1,ie}return t!==te?ie:r.wrap<=0?re:(2===r.wrap?(Re(r,255&e.adler),Re(r,e.adler>>8&255),Re(r,e.adler>>16&255),Re(r,e.adler>>24&255),Re(r,255&e.total_in),Re(r,e.total_in>>8&255),Re(r,e.total_in>>16&255),Re(r,e.total_in>>24&255)):(Ce(r,e.adler>>>16),Ce(r,65535&e.adler)),De(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?ie:re)},Ve=(e,t)=>{let s=t.length;if(!e||!e.state)return oe;const i=e.state,r=i.wrap;if(2===r||1===r&&42!==i.status||i.lookahead)return oe;if(1===r&&(e.adler=k(e.adler,t,s,0)),i.wrap=0,s>=i.w_size){0===r&&(Te(i.head),i.strstart=0,i.block_start=0,i.insert=0);let e=new Uint8Array(i.w_size);e.set(t.subarray(s-i.w_size,s),0),t=e,s=i.w_size}const o=e.avail_in,n=e.next_in,a=e.input;for(e.avail_in=s,e.next_in=0,e.input=t,Oe(i);i.lookahead>=3;){let e=i.strstart,t=i.lookahead-2;do{i.ins_h=Pe(i,i.ins_h,i.window[e+3-1]),i.prev[e&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=e,e++}while(--t);i.strstart=e,i.lookahead=2,Oe(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,e.next_in=n,e.input=a,e.avail_in=o,i.wrap=r,ie},ke={deflateInit:(e,t)=>He(e,t,fe,15,8,pe),deflateInit2:He,deflateReset:Ue,deflateResetKeep:Le,deflateSetHeader:(e,t)=>e&&e.state?2!==e.state.wrap?oe:(e.state.gzhead=t,ie):oe,deflate:Ge,deflateEnd:e=>{if(!e||!e.state)return oe;const t=e.state.status;return 42!==t&&69!==t&&73!==t&&91!==t&&t!==ye&&t!==Ee&&t!==ve?_e(e,oe):(e.state=null,t===Ee?_e(e,ne):ie)},deflateSetDictionary:Ve,deflateInfo:"pako deflate (from Nodeca project)"};const je=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Qe=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const s=t.shift();if(s){if("object"!=typeof s)throw new TypeError(s+"must be non-object");for(const t in s)je(s,t)&&(e[t]=s[t])}}return e},We=e=>{let t=0;for(let s=0,i=e.length;s<i;s++)t+=e[s].length;const s=new Uint8Array(t);for(let t=0,i=0,r=e.length;t<r;t++){let r=e[t];s.set(r,i),i+=r.length}return s};let ze=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){ze=!1}const Ke=new Uint8Array(256);for(let e=0;e<256;e++)Ke[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Ke[254]=Ke[254]=1;var Ye=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,s,i,r,o,n=e.length,a=0;for(r=0;r<n;r++)s=e.charCodeAt(r),55296==(64512&s)&&r+1<n&&(i=e.charCodeAt(r+1),56320==(64512&i)&&(s=65536+(s-55296<<10)+(i-56320),r++)),a+=s<128?1:s<2048?2:s<65536?3:4;for(t=new Uint8Array(a),o=0,r=0;o<a;r++)s=e.charCodeAt(r),55296==(64512&s)&&r+1<n&&(i=e.charCodeAt(r+1),56320==(64512&i)&&(s=65536+(s-55296<<10)+(i-56320),r++)),s<128?t[o++]=s:s<2048?(t[o++]=192|s>>>6,t[o++]=128|63&s):s<65536?(t[o++]=224|s>>>12,t[o++]=128|s>>>6&63,t[o++]=128|63&s):(t[o++]=240|s>>>18,t[o++]=128|s>>>12&63,t[o++]=128|s>>>6&63,t[o++]=128|63&s);return t},Xe=(e,t)=>{const s=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let i,r;const o=new Array(2*s);for(r=0,i=0;i<s;){let t=e[i++];if(t<128){o[r++]=t;continue}let n=Ke[t];if(n>4)o[r++]=65533,i+=n-1;else{for(t&=2===n?31:3===n?15:7;n>1&&i<s;)t=t<<6|63&e[i++],n--;n>1?o[r++]=65533:t<65536?o[r++]=t:(t-=65536,o[r++]=55296|t>>10&1023,o[r++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&ze)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let s="";for(let i=0;i<t;i++)s+=String.fromCharCode(e[i]);return s})(o,r)},Ze=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let s=t-1;for(;s>=0&&128==(192&e[s]);)s--;return s<0||0===s?t:s+Ke[e[s]]>t?s:t};var qe=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Je=Object.prototype.toString,{Z_NO_FLUSH:$e,Z_SYNC_FLUSH:et,Z_FULL_FLUSH:tt,Z_FINISH:st,Z_OK:it,Z_STREAM_END:rt,Z_DEFAULT_COMPRESSION:ot,Z_DEFAULT_STRATEGY:nt,Z_DEFLATED:at}=z;function lt(e){this.options=Qe({level:ot,method:at,chunkSize:16384,windowBits:15,memLevel:8,strategy:nt},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new qe,this.strm.avail_out=0;let s=ke.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(s!==it)throw new Error(W[s]);if(t.header&&ke.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?Ye(t.dictionary):"[object ArrayBuffer]"===Je.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,s=ke.deflateSetDictionary(this.strm,e),s!==it)throw new Error(W[s]);this._dict_set=!0}}function ht(e,t){const s=new lt(t);if(s.push(e,!0),s.err)throw s.msg||W[s.err];return s.result}lt.prototype.push=function(e,t){const s=this.strm,i=this.options.chunkSize;let r,o;if(this.ended)return!1;for(o=t===~~t?t:!0===t?st:$e,"string"==typeof e?s.input=Ye(e):"[object ArrayBuffer]"===Je.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;;)if(0===s.avail_out&&(s.output=new Uint8Array(i),s.next_out=0,s.avail_out=i),(o===et||o===tt)&&s.avail_out<=6)this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;else{if(r=ke.deflate(s,o),r===rt)return s.next_out>0&&this.onData(s.output.subarray(0,s.next_out)),r=ke.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===it;if(0!==s.avail_out){if(o>0&&s.next_out>0)this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;else if(0===s.avail_in)break}else this.onData(s.output)}return!0},lt.prototype.onData=function(e){this.chunks.push(e)},lt.prototype.onEnd=function(e){e===it&&(this.result=We(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var ct={Deflate:lt,deflate:ht,deflateRaw:function(e,t){return(t=t||{}).raw=!0,ht(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,ht(e,t)},constants:z};var ut=function(e,t){let s,i,r,o,n,a,l,h,c,u,A,p,d,f,m,g,y,E,v,_,I,T,P,D;const b=e.state;s=e.next_in,P=e.input,i=s+(e.avail_in-5),r=e.next_out,D=e.output,o=r-(t-e.avail_out),n=r+(e.avail_out-257),a=b.dmax,l=b.wsize,h=b.whave,c=b.wnext,u=b.window,A=b.hold,p=b.bits,d=b.lencode,f=b.distcode,m=(1<<b.lenbits)-1,g=(1<<b.distbits)-1;e:do{p<15&&(A+=P[s++]<<p,p+=8,A+=P[s++]<<p,p+=8),y=d[A&m];t:for(;;){if(E=y>>>24,A>>>=E,p-=E,E=y>>>16&255,0===E)D[r++]=65535&y;else{if(!(16&E)){if(0==(64&E)){y=d[(65535&y)+(A&(1<<E)-1)];continue t}if(32&E){b.mode=12;break e}e.msg="invalid literal/length code",b.mode=30;break e}v=65535&y,E&=15,E&&(p<E&&(A+=P[s++]<<p,p+=8),v+=A&(1<<E)-1,A>>>=E,p-=E),p<15&&(A+=P[s++]<<p,p+=8,A+=P[s++]<<p,p+=8),y=f[A&g];s:for(;;){if(E=y>>>24,A>>>=E,p-=E,E=y>>>16&255,!(16&E)){if(0==(64&E)){y=f[(65535&y)+(A&(1<<E)-1)];continue s}e.msg="invalid distance code",b.mode=30;break e}if(_=65535&y,E&=15,p<E&&(A+=P[s++]<<p,p+=8,p<E&&(A+=P[s++]<<p,p+=8)),_+=A&(1<<E)-1,_>a){e.msg="invalid distance too far back",b.mode=30;break e}if(A>>>=E,p-=E,E=r-o,_>E){if(E=_-E,E>h&&b.sane){e.msg="invalid distance too far back",b.mode=30;break e}if(I=0,T=u,0===c){if(I+=l-E,E<v){v-=E;do{D[r++]=u[I++]}while(--E);I=r-_,T=D}}else if(c<E){if(I+=l+c-E,E-=c,E<v){v-=E;do{D[r++]=u[I++]}while(--E);if(I=0,c<v){E=c,v-=E;do{D[r++]=u[I++]}while(--E);I=r-_,T=D}}}else if(I+=c-E,E<v){v-=E;do{D[r++]=u[I++]}while(--E);I=r-_,T=D}for(;v>2;)D[r++]=T[I++],D[r++]=T[I++],D[r++]=T[I++],v-=3;v&&(D[r++]=T[I++],v>1&&(D[r++]=T[I++]))}else{I=r-_;do{D[r++]=D[I++],D[r++]=D[I++],D[r++]=D[I++],v-=3}while(v>2);v&&(D[r++]=D[I++],v>1&&(D[r++]=D[I++]))}break}}break}}while(s<i&&r<n);v=p>>3,s-=v,p-=v<<3,A&=(1<<p)-1,e.next_in=s,e.next_out=r,e.avail_in=s<i?i-s+5:5-(s-i),e.avail_out=r<n?n-r+257:257-(r-n),b.hold=A,b.bits=p};const At=15,pt=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),dt=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ft=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),mt=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var gt=(e,t,s,i,r,o,n,a)=>{const l=a.bits;let h,c,u,A,p,d,f=0,m=0,g=0,y=0,E=0,v=0,_=0,I=0,T=0,P=0,D=null,b=0;const R=new Uint16Array(16),C=new Uint16Array(16);let x,N,O,S=null,w=0;for(f=0;f<=At;f++)R[f]=0;for(m=0;m<i;m++)R[t[s+m]]++;for(E=l,y=At;y>=1&&0===R[y];y--);if(E>y&&(E=y),0===y)return r[o++]=20971520,r[o++]=20971520,a.bits=1,0;for(g=1;g<y&&0===R[g];g++);for(E<g&&(E=g),I=1,f=1;f<=At;f++)if(I<<=1,I-=R[f],I<0)return-1;if(I>0&&(0===e||1!==y))return-1;for(C[1]=0,f=1;f<At;f++)C[f+1]=C[f]+R[f];for(m=0;m<i;m++)0!==t[s+m]&&(n[C[t[s+m]]++]=m);if(0===e?(D=S=n,d=19):1===e?(D=pt,b-=257,S=dt,w-=257,d=256):(D=ft,S=mt,d=-1),P=0,m=0,f=g,p=o,v=E,_=0,u=-1,T=1<<E,A=T-1,1===e&&T>852||2===e&&T>592)return 1;for(;;){x=f-_,n[m]<d?(N=0,O=n[m]):n[m]>d?(N=S[w+n[m]],O=D[b+n[m]]):(N=96,O=0),h=1<<f-_,c=1<<v,g=c;do{c-=h,r[p+(P>>_)+c]=x<<24|N<<16|O|0}while(0!==c);for(h=1<<f-1;P&h;)h>>=1;if(0!==h?(P&=h-1,P+=h):P=0,m++,0==--R[f]){if(f===y)break;f=t[s+n[m]]}if(f>E&&(P&A)!==u){for(0===_&&(_=E),p+=g,v=f-_,I=1<<v;v+_<y&&(I-=R[v+_],!(I<=0));)v++,I<<=1;if(T+=1<<v,1===e&&T>852||2===e&&T>592)return 1;u=P&A,r[u]=E<<24|v<<16|p-o|0}}return 0!==P&&(r[p+P]=f-_<<24|64<<16|0),a.bits=E,0};const{Z_FINISH:yt,Z_BLOCK:Et,Z_TREES:vt,Z_OK:_t,Z_STREAM_END:It,Z_NEED_DICT:Tt,Z_STREAM_ERROR:Pt,Z_DATA_ERROR:Dt,Z_MEM_ERROR:bt,Z_BUF_ERROR:Rt,Z_DEFLATED:Ct}=z,xt=12,Nt=30,Ot=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function St(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const wt=e=>{if(!e||!e.state)return Pt;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,_t},Mt=e=>{if(!e||!e.state)return Pt;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,wt(e)},Bt=(e,t)=>{let s;if(!e||!e.state)return Pt;const i=e.state;return t<0?(s=0,t=-t):(s=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Pt:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=s,i.wbits=t,Mt(e))},Ft=(e,t)=>{if(!e)return Pt;const s=new St;e.state=s,s.window=null;const i=Bt(e,t);return i!==_t&&(e.state=null),i};let Lt,Ut,Ht=!0;const Gt=e=>{if(Ht){Lt=new Int32Array(512),Ut=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(gt(1,e.lens,0,288,Lt,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;gt(2,e.lens,0,32,Ut,0,e.work,{bits:5}),Ht=!1}e.lencode=Lt,e.lenbits=9,e.distcode=Ut,e.distbits=5},Vt=(e,t,s,i)=>{let r;const o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),i>=o.wsize?(o.window.set(t.subarray(s-o.wsize,s),0),o.wnext=0,o.whave=o.wsize):(r=o.wsize-o.wnext,r>i&&(r=i),o.window.set(t.subarray(s-i,s-i+r),o.wnext),(i-=r)?(o.window.set(t.subarray(s-i,s),0),o.wnext=i,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0};var kt=(e,t)=>{let s,i,r,o,n,a,l,h,c,u,A,p,d,f,m,g,y,E,v,_,I,T,P=0;const D=new Uint8Array(4);let b,R;const C=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Pt;s=e.state,s.mode===xt&&(s.mode=13),n=e.next_out,r=e.output,l=e.avail_out,o=e.next_in,i=e.input,a=e.avail_in,h=s.hold,c=s.bits,u=a,A=l,T=_t;e:for(;;)switch(s.mode){case 1:if(0===s.wrap){s.mode=13;break}for(;c<16;){if(0===a)break e;a--,h+=i[o++]<<c,c+=8}if(2&s.wrap&&35615===h){s.check=0,D[0]=255&h,D[1]=h>>>8&255,s.check=Q(s.check,D,2,0),h=0,c=0,s.mode=2;break}if(s.flags=0,s.head&&(s.head.done=!1),!(1&s.wrap)||(((255&h)<<8)+(h>>8))%31){e.msg="incorrect header check",s.mode=Nt;break}if((15&h)!==Ct){e.msg="unknown compression method",s.mode=Nt;break}if(h>>>=4,c-=4,I=8+(15&h),0===s.wbits)s.wbits=I;else if(I>s.wbits){e.msg="invalid window size",s.mode=Nt;break}s.dmax=1<<s.wbits,e.adler=s.check=1,s.mode=512&h?10:xt,h=0,c=0;break;case 2:for(;c<16;){if(0===a)break e;a--,h+=i[o++]<<c,c+=8}if(s.flags=h,(255&s.flags)!==Ct){e.msg="unknown compression method",s.mode=Nt;break}if(57344&s.flags){e.msg="unknown header flags set",s.mode=Nt;break}s.head&&(s.head.text=h>>8&1),512&s.flags&&(D[0]=255&h,D[1]=h>>>8&255,s.check=Q(s.check,D,2,0)),h=0,c=0,s.mode=3;case 3:for(;c<32;){if(0===a)break e;a--,h+=i[o++]<<c,c+=8}s.head&&(s.head.time=h),512&s.flags&&(D[0]=255&h,D[1]=h>>>8&255,D[2]=h>>>16&255,D[3]=h>>>24&255,s.check=Q(s.check,D,4,0)),h=0,c=0,s.mode=4;case 4:for(;c<16;){if(0===a)break e;a--,h+=i[o++]<<c,c+=8}s.head&&(s.head.xflags=255&h,s.head.os=h>>8),512&s.flags&&(D[0]=255&h,D[1]=h>>>8&255,s.check=Q(s.check,D,2,0)),h=0,c=0,s.mode=5;case 5:if(1024&s.flags){for(;c<16;){if(0===a)break e;a--,h+=i[o++]<<c,c+=8}s.length=h,s.head&&(s.head.extra_len=h),512&s.flags&&(D[0]=255&h,D[1]=h>>>8&255,s.check=Q(s.check,D,2,0)),h=0,c=0}else s.head&&(s.head.extra=null);s.mode=6;case 6:if(1024&s.flags&&(p=s.length,p>a&&(p=a),p&&(s.head&&(I=s.head.extra_len-s.length,s.head.extra||(s.head.extra=new Uint8Array(s.head.extra_len)),s.head.extra.set(i.subarray(o,o+p),I)),512&s.flags&&(s.check=Q(s.check,i,p,o)),a-=p,o+=p,s.length-=p),s.length))break e;s.length=0,s.mode=7;case 7:if(2048&s.flags){if(0===a)break e;p=0;do{I=i[o+p++],s.head&&I&&s.length<65536&&(s.head.name+=String.fromCharCode(I))}while(I&&p<a);if(512&s.flags&&(s.check=Q(s.check,i,p,o)),a-=p,o+=p,I)break e}else s.head&&(s.head.name=null);s.length=0,s.mode=8;case 8:if(4096&s.flags){if(0===a)break e;p=0;do{I=i[o+p++],s.head&&I&&s.length<65536&&(s.head.comment+=String.fromCharCode(I))}while(I&&p<a);if(512&s.flags&&(s.check=Q(s.check,i,p,o)),a-=p,o+=p,I)break e}else s.head&&(s.head.comment=null);s.mode=9;case 9:if(512&s.flags){for(;c<16;){if(0===a)break e;a--,h+=i[o++]<<c,c+=8}if(h!==(65535&s.check)){e.msg="header crc mismatch",s.mode=Nt;break}h=0,c=0}s.head&&(s.head.hcrc=s.flags>>9&1,s.head.done=!0),e.adler=s.check=0,s.mode=xt;break;case 10:for(;c<32;){if(0===a)break e;a--,h+=i[o++]<<c,c+=8}e.adler=s.check=Ot(h),h=0,c=0,s.mode=11;case 11:if(0===s.havedict)return e.next_out=n,e.avail_out=l,e.next_in=o,e.avail_in=a,s.hold=h,s.bits=c,Tt;e.adler=s.check=1,s.mode=xt;case xt:if(t===Et||t===vt)break e;case 13:if(s.last){h>>>=7&c,c-=7&c,s.mode=27;break}for(;c<3;){if(0===a)break e;a--,h+=i[o++]<<c,c+=8}switch(s.last=1&h,h>>>=1,c-=1,3&h){case 0:s.mode=14;break;case 1:if(Gt(s),s.mode=20,t===vt){h>>>=2,c-=2;break e}break;case 2:s.mode=17;break;case 3:e.msg="invalid block type",s.mode=Nt}h>>>=2,c-=2;break;case 14:for(h>>>=7&c,c-=7&c;c<32;){if(0===a)break e;a--,h+=i[o++]<<c,c+=8}if((65535&h)!=(h>>>16^65535)){e.msg="invalid stored block lengths",s.mode=Nt;break}if(s.length=65535&h,h=0,c=0,s.mode=15,t===vt)break e;case 15:s.mode=16;case 16:if(p=s.length,p){if(p>a&&(p=a),p>l&&(p=l),0===p)break e;r.set(i.subarray(o,o+p),n),a-=p,o+=p,l-=p,n+=p,s.length-=p;break}s.mode=xt;break;case 17:for(;c<14;){if(0===a)break e;a--,h+=i[o++]<<c,c+=8}if(s.nlen=257+(31&h),h>>>=5,c-=5,s.ndist=1+(31&h),h>>>=5,c-=5,s.ncode=4+(15&h),h>>>=4,c-=4,s.nlen>286||s.ndist>30){e.msg="too many length or distance symbols",s.mode=Nt;break}s.have=0,s.mode=18;case 18:for(;s.have<s.ncode;){for(;c<3;){if(0===a)break e;a--,h+=i[o++]<<c,c+=8}s.lens[C[s.have++]]=7&h,h>>>=3,c-=3}for(;s.have<19;)s.lens[C[s.have++]]=0;if(s.lencode=s.lendyn,s.lenbits=7,b={bits:s.lenbits},T=gt(0,s.lens,0,19,s.lencode,0,s.work,b),s.lenbits=b.bits,T){e.msg="invalid code lengths set",s.mode=Nt;break}s.have=0,s.mode=19;case 19:for(;s.have<s.nlen+s.ndist;){for(;P=s.lencode[h&(1<<s.lenbits)-1],m=P>>>24,g=P>>>16&255,y=65535&P,!(m<=c);){if(0===a)break e;a--,h+=i[o++]<<c,c+=8}if(y<16)h>>>=m,c-=m,s.lens[s.have++]=y;else{if(16===y){for(R=m+2;c<R;){if(0===a)break e;a--,h+=i[o++]<<c,c+=8}if(h>>>=m,c-=m,0===s.have){e.msg="invalid bit length repeat",s.mode=Nt;break}I=s.lens[s.have-1],p=3+(3&h),h>>>=2,c-=2}else if(17===y){for(R=m+3;c<R;){if(0===a)break e;a--,h+=i[o++]<<c,c+=8}h>>>=m,c-=m,I=0,p=3+(7&h),h>>>=3,c-=3}else{for(R=m+7;c<R;){if(0===a)break e;a--,h+=i[o++]<<c,c+=8}h>>>=m,c-=m,I=0,p=11+(127&h),h>>>=7,c-=7}if(s.have+p>s.nlen+s.ndist){e.msg="invalid bit length repeat",s.mode=Nt;break}for(;p--;)s.lens[s.have++]=I}}if(s.mode===Nt)break;if(0===s.lens[256]){e.msg="invalid code -- missing end-of-block",s.mode=Nt;break}if(s.lenbits=9,b={bits:s.lenbits},T=gt(1,s.lens,0,s.nlen,s.lencode,0,s.work,b),s.lenbits=b.bits,T){e.msg="invalid literal/lengths set",s.mode=Nt;break}if(s.distbits=6,s.distcode=s.distdyn,b={bits:s.distbits},T=gt(2,s.lens,s.nlen,s.ndist,s.distcode,0,s.work,b),s.distbits=b.bits,T){e.msg="invalid distances set",s.mode=Nt;break}if(s.mode=20,t===vt)break e;case 20:s.mode=21;case 21:if(a>=6&&l>=258){e.next_out=n,e.avail_out=l,e.next_in=o,e.avail_in=a,s.hold=h,s.bits=c,ut(e,A),n=e.next_out,r=e.output,l=e.avail_out,o=e.next_in,i=e.input,a=e.avail_in,h=s.hold,c=s.bits,s.mode===xt&&(s.back=-1);break}for(s.back=0;P=s.lencode[h&(1<<s.lenbits)-1],m=P>>>24,g=P>>>16&255,y=65535&P,!(m<=c);){if(0===a)break e;a--,h+=i[o++]<<c,c+=8}if(g&&0==(240&g)){for(E=m,v=g,_=y;P=s.lencode[_+((h&(1<<E+v)-1)>>E)],m=P>>>24,g=P>>>16&255,y=65535&P,!(E+m<=c);){if(0===a)break e;a--,h+=i[o++]<<c,c+=8}h>>>=E,c-=E,s.back+=E}if(h>>>=m,c-=m,s.back+=m,s.length=y,0===g){s.mode=26;break}if(32&g){s.back=-1,s.mode=xt;break}if(64&g){e.msg="invalid literal/length code",s.mode=Nt;break}s.extra=15&g,s.mode=22;case 22:if(s.extra){for(R=s.extra;c<R;){if(0===a)break e;a--,h+=i[o++]<<c,c+=8}s.length+=h&(1<<s.extra)-1,h>>>=s.extra,c-=s.extra,s.back+=s.extra}s.was=s.length,s.mode=23;case 23:for(;P=s.distcode[h&(1<<s.distbits)-1],m=P>>>24,g=P>>>16&255,y=65535&P,!(m<=c);){if(0===a)break e;a--,h+=i[o++]<<c,c+=8}if(0==(240&g)){for(E=m,v=g,_=y;P=s.distcode[_+((h&(1<<E+v)-1)>>E)],m=P>>>24,g=P>>>16&255,y=65535&P,!(E+m<=c);){if(0===a)break e;a--,h+=i[o++]<<c,c+=8}h>>>=E,c-=E,s.back+=E}if(h>>>=m,c-=m,s.back+=m,64&g){e.msg="invalid distance code",s.mode=Nt;break}s.offset=y,s.extra=15&g,s.mode=24;case 24:if(s.extra){for(R=s.extra;c<R;){if(0===a)break e;a--,h+=i[o++]<<c,c+=8}s.offset+=h&(1<<s.extra)-1,h>>>=s.extra,c-=s.extra,s.back+=s.extra}if(s.offset>s.dmax){e.msg="invalid distance too far back",s.mode=Nt;break}s.mode=25;case 25:if(0===l)break e;if(p=A-l,s.offset>p){if(p=s.offset-p,p>s.whave&&s.sane){e.msg="invalid distance too far back",s.mode=Nt;break}p>s.wnext?(p-=s.wnext,d=s.wsize-p):d=s.wnext-p,p>s.length&&(p=s.length),f=s.window}else f=r,d=n-s.offset,p=s.length;p>l&&(p=l),l-=p,s.length-=p;do{r[n++]=f[d++]}while(--p);0===s.length&&(s.mode=21);break;case 26:if(0===l)break e;r[n++]=s.length,l--,s.mode=21;break;case 27:if(s.wrap){for(;c<32;){if(0===a)break e;a--,h|=i[o++]<<c,c+=8}if(A-=l,e.total_out+=A,s.total+=A,A&&(e.adler=s.check=s.flags?Q(s.check,r,A,n-A):k(s.check,r,A,n-A)),A=l,(s.flags?h:Ot(h))!==s.check){e.msg="incorrect data check",s.mode=Nt;break}h=0,c=0}s.mode=28;case 28:if(s.wrap&&s.flags){for(;c<32;){if(0===a)break e;a--,h+=i[o++]<<c,c+=8}if(h!==(4294967295&s.total)){e.msg="incorrect length check",s.mode=Nt;break}h=0,c=0}s.mode=29;case 29:T=It;break e;case Nt:T=Dt;break e;case 31:return bt;default:return Pt}return e.next_out=n,e.avail_out=l,e.next_in=o,e.avail_in=a,s.hold=h,s.bits=c,(s.wsize||A!==e.avail_out&&s.mode<Nt&&(s.mode<27||t!==yt))&&Vt(e,e.output,e.next_out,A-e.avail_out),u-=e.avail_in,A-=e.avail_out,e.total_in+=u,e.total_out+=A,s.total+=A,s.wrap&&A&&(e.adler=s.check=s.flags?Q(s.check,r,A,e.next_out-A):k(s.check,r,A,e.next_out-A)),e.data_type=s.bits+(s.last?64:0)+(s.mode===xt?128:0)+(20===s.mode||15===s.mode?256:0),(0===u&&0===A||t===yt)&&T===_t&&(T=Rt),T},jt={inflateReset:Mt,inflateReset2:Bt,inflateResetKeep:wt,inflateInit:e=>Ft(e,15),inflateInit2:Ft,inflate:kt,inflateEnd:e=>{if(!e||!e.state)return Pt;let t=e.state;return t.window&&(t.window=null),e.state=null,_t},inflateGetHeader:(e,t)=>{if(!e||!e.state)return Pt;const s=e.state;return 0==(2&s.wrap)?Pt:(s.head=t,t.done=!1,_t)},inflateSetDictionary:(e,t)=>{const s=t.length;let i,r,o;return e&&e.state?(i=e.state,0!==i.wrap&&11!==i.mode?Pt:11===i.mode&&(r=1,r=k(r,t,s,0),r!==i.check)?Dt:(o=Vt(e,t,s,s),o?(i.mode=31,bt):(i.havedict=1,_t))):Pt},inflateInfo:"pako inflate (from Nodeca project)"};var Qt=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Wt=Object.prototype.toString,{Z_NO_FLUSH:zt,Z_FINISH:Kt,Z_OK:Yt,Z_STREAM_END:Xt,Z_NEED_DICT:Zt,Z_STREAM_ERROR:qt,Z_DATA_ERROR:Jt,Z_MEM_ERROR:$t}=z;function es(e){this.options=Qe({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new qe,this.strm.avail_out=0;let s=jt.inflateInit2(this.strm,t.windowBits);if(s!==Yt)throw new Error(W[s]);if(this.header=new Qt,jt.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Ye(t.dictionary):"[object ArrayBuffer]"===Wt.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(s=jt.inflateSetDictionary(this.strm,t.dictionary),s!==Yt)))throw new Error(W[s])}function ts(e,t){const s=new es(t);if(s.push(e),s.err)throw s.msg||W[s.err];return s.result}es.prototype.push=function(e,t){const s=this.strm,i=this.options.chunkSize,r=this.options.dictionary;let o,n,a;if(this.ended)return!1;for(n=t===~~t?t:!0===t?Kt:zt,"[object ArrayBuffer]"===Wt.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;;){for(0===s.avail_out&&(s.output=new Uint8Array(i),s.next_out=0,s.avail_out=i),o=jt.inflate(s,n),o===Zt&&r&&(o=jt.inflateSetDictionary(s,r),o===Yt?o=jt.inflate(s,n):o===Jt&&(o=Zt));s.avail_in>0&&o===Xt&&s.state.wrap>0&&0!==e[s.next_in];)jt.inflateReset(s),o=jt.inflate(s,n);switch(o){case qt:case Jt:case Zt:case $t:return this.onEnd(o),this.ended=!0,!1}if(a=s.avail_out,s.next_out&&(0===s.avail_out||o===Xt))if("string"===this.options.to){let e=Ze(s.output,s.next_out),t=s.next_out-e,r=Xe(s.output,e);s.next_out=t,s.avail_out=i-t,t&&s.output.set(s.output.subarray(e,e+t),0),this.onData(r)}else this.onData(s.output.length===s.next_out?s.output:s.output.subarray(0,s.next_out));if(o!==Yt||0!==a){if(o===Xt)return o=jt.inflateEnd(this.strm),this.onEnd(o),this.ended=!0,!0;if(0===s.avail_in)break}}return!0},es.prototype.onData=function(e){this.chunks.push(e)},es.prototype.onEnd=function(e){e===Yt&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=We(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var ss={Inflate:es,inflate:ts,inflateRaw:function(e,t){return(t=t||{}).raw=!0,ts(e,t)},ungzip:ts,constants:z};const{Deflate:is,deflate:rs,deflateRaw:os,gzip:ns}=ct,{Inflate:as,inflate:ls,inflateRaw:hs,ungzip:cs}=ss;var us=is,As=rs,ps=os,ds=ns,fs=as,ms=ls,gs=hs,ys=cs,Es=z,vs={Deflate:us,deflate:As,deflateRaw:ps,gzip:ds,Inflate:fs,inflate:ms,inflateRaw:gs,ungzip:ys,constants:Es};e.Deflate=us,e.Inflate=fs,e.constants=Es,e.default=vs,e.deflate=As,e.deflateRaw=ps,e.gzip=ds,e.inflate=ms,e.inflateRaw=gs,e.ungzip=ys,Object.defineProperty(e,"__esModule",{value:!0})}));var JE=Object.freeze({__proto__:null});let $E=window.pako||JE;$E.inflate||($E=$E.default);const ev=function(){const e=new Float32Array(3);return function(t){return e[0]=t[0]/255,e[1]=t[1]/255,e[2]=t[2]/255,e}}();const tv={version:1,parse:function(e,t,s,i){const r=function(e){return{positions:e[0],normals:e[1],indices:e[2],edgeIndices:e[3],meshPositions:e[4],meshIndices:e[5],meshEdgesIndices:e[6],meshColors:e[7],entityIDs:e[8],entityMeshes:e[9],entityIsObjects:e[10],positionsDecodeMatrix:e[11]}}(s),o=function(e){return{positions:new Uint16Array($E.inflate(e.positions).buffer),normals:new Int8Array($E.inflate(e.normals).buffer),indices:new Uint32Array($E.inflate(e.indices).buffer),edgeIndices:new Uint32Array($E.inflate(e.edgeIndices).buffer),meshPositions:new Uint32Array($E.inflate(e.meshPositions).buffer),meshIndices:new Uint32Array($E.inflate(e.meshIndices).buffer),meshEdgesIndices:new Uint32Array($E.inflate(e.meshEdgesIndices).buffer),meshColors:new Uint8Array($E.inflate(e.meshColors).buffer),entityIDs:$E.inflate(e.entityIDs,{to:"string"}),entityMeshes:new Uint32Array($E.inflate(e.entityMeshes).buffer),entityIsObjects:new Uint8Array($E.inflate(e.entityIsObjects).buffer),positionsDecodeMatrix:new Float32Array($E.inflate(e.positionsDecodeMatrix).buffer)}}(r);!function(e,t,s,i){i.positionsCompression="precompressed",i.normalsCompression="precompressed";const r=s.positions,o=s.normals,n=s.indices,a=s.edgeIndices,l=s.meshPositions,h=s.meshIndices,c=s.meshEdgesIndices,u=s.meshColors,A=JSON.parse(s.entityIDs),d=s.entityMeshes,f=s.entityIsObjects,m=l.length,g=d.length;for(let E=0;E<g;E++){const v=A[E],_=t.globalizeObjectIds?p.globalizeObjectId(i.id,v):v,I=e.metaScene.metaObjects[_],T={},P={};if(I){if(t.excludeTypesMap&&I.type&&t.excludeTypesMap[I.type])continue;if(t.includeTypesMap&&I.type&&!t.includeTypesMap[I.type])continue;const e=t.objectDefaults?t.objectDefaults[I.type]||t.objectDefaults.DEFAULT:null;e&&(!1===e.visible&&(T.visible=!1),!1===e.pickable&&(T.pickable=!1),e.colorize&&(P.color=e.colorize),void 0!==e.opacity&&null!==e.opacity&&(P.opacity=e.opacity))}else if(t.excludeUnclassifiedObjects)continue;const D=E===g-1,b=[];for(let e=d[E],t=D?d.length:d[E+1];e<t;e++){const t=e===m-1,A=_+".mesh."+e,p=ev(u.subarray(4*e,4*e+3)),d=u[4*e+3]/255;i.createMesh(y.apply(P,{id:A,primitive:"triangles",positionsCompressed:r.subarray(l[e],t?r.length:l[e+1]),normalsCompressed:o.subarray(l[e],t?r.length:l[e+1]),indices:n.subarray(h[e],t?n.length:h[e+1]),edgeIndices:a.subarray(c[e],t?a.length:c[e+1]),positionsDecodeMatrix:s.positionsDecodeMatrix,color:p,opacity:d})),b.push(A)}i.createEntity(y.apply(T,{id:_,isObject:1===f[E],meshIds:b}))}}(e,t,o,i)}};let sv=window.pako||JE;sv.inflate||(sv=sv.default);const iv=function(){const e=new Float32Array(3);return function(t){return e[0]=t[0]/255,e[1]=t[1]/255,e[2]=t[2]/255,e}}();const rv={version:2,parse:function(e,t,s,i){const r=function(e){return{positions:e[0],normals:e[1],indices:e[2],edgeIndices:e[3],meshPositions:e[4],meshIndices:e[5],meshEdgesIndices:e[6],meshColors:e[7],entityIDs:e[8],entityMeshes:e[9],entityIsObjects:e[10],positionsDecodeMatrix:e[11],entityMeshIds:e[12],entityMatrices:e[13],entityUsesInstancing:e[14]}}(s),o=function(e){return{positions:new Uint16Array(sv.inflate(e.positions).buffer),normals:new Int8Array(sv.inflate(e.normals).buffer),indices:new Uint32Array(sv.inflate(e.indices).buffer),edgeIndices:new Uint32Array(sv.inflate(e.edgeIndices).buffer),meshPositions:new Uint32Array(sv.inflate(e.meshPositions).buffer),meshIndices:new Uint32Array(sv.inflate(e.meshIndices).buffer),meshEdgesIndices:new Uint32Array(sv.inflate(e.meshEdgesIndices).buffer),meshColors:new Uint8Array(sv.inflate(e.meshColors).buffer),entityIDs:sv.inflate(e.entityIDs,{to:"string"}),entityMeshes:new Uint32Array(sv.inflate(e.entityMeshes).buffer),entityIsObjects:new Uint8Array(sv.inflate(e.entityIsObjects).buffer),positionsDecodeMatrix:new Float32Array(sv.inflate(e.positionsDecodeMatrix).buffer),entityMeshIds:new Uint32Array(sv.inflate(e.entityMeshIds).buffer),entityMatrices:new Float32Array(sv.inflate(e.entityMatrices).buffer),entityUsesInstancing:new Uint8Array(sv.inflate(e.entityUsesInstancing).buffer)}}(r);!function(e,t,s,i){i.positionsCompression="precompressed",i.normalsCompression="precompressed";const r=s.positions,o=s.normals,n=s.indices,a=s.edgeIndices,l=s.meshPositions,h=s.meshIndices,c=s.meshEdgesIndices,u=s.meshColors,A=JSON.parse(s.entityIDs),d=s.entityMeshes,f=s.entityIsObjects,m=s.entityMeshIds,g=s.entityMatrices,E=s.entityUsesInstancing,v=l.length,_=d.length,I={};for(let T=0;T<_;T++){const P=A[T],D=t.globalizeObjectIds?p.globalizeObjectId(i.id,P):P,b=e.metaScene.metaObjects[D],R={},C={},x=g.subarray(16*T,16*T+16);if(b){if(t.excludeTypesMap&&b.type&&t.excludeTypesMap[b.type])continue;if(t.includeTypesMap&&b.type&&!t.includeTypesMap[b.type])continue;const e=t.objectDefaults?t.objectDefaults[b.type]||t.objectDefaults.DEFAULT:null;e&&(!1===e.visible&&(R.visible=!1),!1===e.pickable&&(R.pickable=!1),e.colorize&&(C.color=e.colorize),void 0!==e.opacity&&null!==e.opacity&&(C.opacity=e.opacity))}else if(t.excludeUnclassifiedObjects)continue;const N=T===_-1,O=[];for(let e=d[T],t=N?m.length:d[T+1];e<t;e++){const t=m[e],A=t===v-1,p=D+".mesh."+t,d=iv(u.subarray(4*t,4*t+3)),f=u[4*t+3]/255,g=r.subarray(l[t],A?r.length:l[t+1]),_=o.subarray(l[t],A?r.length:l[t+1]),P=n.subarray(h[t],A?n.length:h[t+1]),b=a.subarray(c[t],A?a.length:c[t+1]);if(1===E[T]){const e="geometry."+t;e in I||(i.createGeometry({id:e,positionsCompressed:g,normalsCompressed:_,indices:P,edgeIndices:b,primitive:"triangles",positionsDecodeMatrix:s.positionsDecodeMatrix}),I[e]=!0),i.createMesh(y.apply(C,{id:p,color:d,opacity:f,matrix:x,geometryId:e})),O.push(p)}else i.createMesh(y.apply(C,{id:p,primitive:"triangles",positionsCompressed:g,normalsCompressed:_,indices:P,edgeIndices:b,positionsDecodeMatrix:s.positionsDecodeMatrix,color:d,opacity:f})),O.push(p)}O.length&&i.createEntity(y.apply(R,{id:D,isObject:1===f[T],meshIds:O}))}}(e,t,o,i)}};let ov=window.pako||JE;ov.inflate||(ov=ov.default);const nv=function(){const e=new Float32Array(3);return function(t){return e[0]=t[0]/255,e[1]=t[1]/255,e[2]=t[2]/255,e}}();const av={version:3,parse:function(e,t,s,i){const r=function(e){return{positions:e[0],normals:e[1],indices:e[2],edgeIndices:e[3],meshPositions:e[4],meshIndices:e[5],meshEdgesIndices:e[6],meshColors:e[7],entityIDs:e[8],entityMeshes:e[9],entityIsObjects:e[10],instancedPositionsDecodeMatrix:e[11],batchedPositionsDecodeMatrix:e[12],entityMeshIds:e[13],entityMatrices:e[14],entityUsesInstancing:e[15]}}(s),o=function(e){return{positions:new Uint16Array(ov.inflate(e.positions).buffer),normals:new Int8Array(ov.inflate(e.normals).buffer),indices:new Uint32Array(ov.inflate(e.indices).buffer),edgeIndices:new Uint32Array(ov.inflate(e.edgeIndices).buffer),meshPositions:new Uint32Array(ov.inflate(e.meshPositions).buffer),meshIndices:new Uint32Array(ov.inflate(e.meshIndices).buffer),meshEdgesIndices:new Uint32Array(ov.inflate(e.meshEdgesIndices).buffer),meshColors:new Uint8Array(ov.inflate(e.meshColors).buffer),entityIDs:ov.inflate(e.entityIDs,{to:"string"}),entityMeshes:new Uint32Array(ov.inflate(e.entityMeshes).buffer),entityIsObjects:new Uint8Array(ov.inflate(e.entityIsObjects).buffer),instancedPositionsDecodeMatrix:new Float32Array(ov.inflate(e.instancedPositionsDecodeMatrix).buffer),batchedPositionsDecodeMatrix:new Float32Array(ov.inflate(e.batchedPositionsDecodeMatrix).buffer),entityMeshIds:new Uint32Array(ov.inflate(e.entityMeshIds).buffer),entityMatrices:new Float32Array(ov.inflate(e.entityMatrices).buffer),entityUsesInstancing:new Uint8Array(ov.inflate(e.entityUsesInstancing).buffer)}}(r);!function(e,t,s,i){i.positionsCompression="precompressed",i.normalsCompression="precompressed";const r=s.positions,o=s.normals,n=s.indices,a=s.edgeIndices,l=s.meshPositions,h=s.meshIndices,c=s.meshEdgesIndices,u=s.meshColors,A=JSON.parse(s.entityIDs),d=s.entityMeshes,f=s.entityIsObjects,m=s.entityMeshIds,g=s.entityMatrices,E=s.entityUsesInstancing,v=l.length,_=d.length,I={};for(let x=0;x<_;x++){const N=A[x],O=t.globalizeObjectIds?p.globalizeObjectId(i.id,N):N,S=e.metaScene.metaObjects[O],w={},M={},B=g.subarray(16*x,16*x+16);if(S){if(t.excludeTypesMap&&S.type&&t.excludeTypesMap[S.type])continue;if(t.includeTypesMap&&S.type&&!t.includeTypesMap[S.type])continue;const e=t.objectDefaults?t.objectDefaults[S.type]||t.objectDefaults.DEFAULT:null;e&&(!1===e.visible&&(w.visible=!1),!1===e.pickable&&(w.pickable=!1),e.colorize&&(M.color=e.colorize),void 0!==e.opacity&&null!==e.opacity&&(M.opacity=e.opacity))}else if(t.excludeUnclassifiedObjects)continue;const F=x===_-1,L=[];for(let e=d[x],t=F?m.length:d[x+1];e<t;e++){var T=m[e];const t=T===v-1,A=O+".mesh."+T,p=nv(u.subarray(4*T,4*T+3)),d=u[4*T+3]/255;var P=r.subarray(l[T],t?r.length:l[T+1]),D=o.subarray(l[T],t?r.length:l[T+1]),b=n.subarray(h[T],t?n.length:h[T+1]),R=a.subarray(c[T],t?a.length:c[T+1]);if(1===E[x]){var C="geometry."+T;C in I||(i.createGeometry({id:C,positionsCompressed:P,normalsCompressed:D,indices:b,edgeIndices:R,primitive:"triangles",positionsDecodeMatrix:s.instancedPositionsDecodeMatrix}),I[C]=!0),i.createMesh(y.apply(M,{id:A,color:p,opacity:d,matrix:B,geometryId:C})),L.push(A)}else i.createMesh(y.apply(M,{id:A,primitive:"triangles",positionsCompressed:P,normalsCompressed:D,indices:b,edgeIndices:R,positionsDecodeMatrix:s.batchedPositionsDecodeMatrix,color:p,opacity:d})),L.push(A)}L.length&&i.createEntity(y.apply(w,{id:O,isObject:1===f[x],meshIds:L}))}}(e,t,o,i)}};let lv=window.pako||JE;lv.inflate||(lv=lv.default);const hv=function(){const e=new Float32Array(3);return function(t){return e[0]=t[0]/255,e[1]=t[1]/255,e[2]=t[2]/255,e}}();const cv={version:4,parse:function(e,t,s,i){const r=function(e){return{positions:e[0],normals:e[1],indices:e[2],edgeIndices:e[3],decodeMatrices:e[4],matrices:e[5],eachPrimitivePositionsAndNormalsPortion:e[6],eachPrimitiveIndicesPortion:e[7],eachPrimitiveEdgeIndicesPortion:e[8],eachPrimitiveDecodeMatricesPortion:e[9],eachPrimitiveColor:e[10],primitiveInstances:e[11],eachEntityId:e[12],eachEntityPrimitiveInstancesPortion:e[13],eachEntityMatricesPortion:e[14],eachEntityMatrix:e[15]}}(s),o=function(e){return{positions:new Uint16Array(lv.inflate(e.positions).buffer),normals:new Int8Array(lv.inflate(e.normals).buffer),indices:new Uint32Array(lv.inflate(e.indices).buffer),edgeIndices:new Uint32Array(lv.inflate(e.edgeIndices).buffer),decodeMatrices:new Float32Array(lv.inflate(e.decodeMatrices).buffer),matrices:new Float32Array(lv.inflate(e.matrices).buffer),eachPrimitivePositionsAndNormalsPortion:new Uint32Array(lv.inflate(e.eachPrimitivePositionsAndNormalsPortion).buffer),eachPrimitiveIndicesPortion:new Uint32Array(lv.inflate(e.eachPrimitiveIndicesPortion).buffer),eachPrimitiveEdgeIndicesPortion:new Uint32Array(lv.inflate(e.eachPrimitiveEdgeIndicesPortion).buffer),eachPrimitiveDecodeMatricesPortion:new Uint32Array(lv.inflate(e.eachPrimitiveDecodeMatricesPortion).buffer),eachPrimitiveColor:new Uint8Array(lv.inflate(e.eachPrimitiveColor).buffer),primitiveInstances:new Uint32Array(lv.inflate(e.primitiveInstances).buffer),eachEntityId:lv.inflate(e.eachEntityId,{to:"string"}),eachEntityPrimitiveInstancesPortion:new Uint32Array(lv.inflate(e.eachEntityPrimitiveInstancesPortion).buffer),eachEntityMatricesPortion:new Uint32Array(lv.inflate(e.eachEntityMatricesPortion).buffer)}}(r);!function(e,t,s,i){i.positionsCompression="precompressed",i.normalsCompression="precompressed";const r=s.positions,o=s.normals,n=s.indices,a=s.edgeIndices,l=s.decodeMatrices,h=s.matrices,c=s.eachPrimitivePositionsAndNormalsPortion,u=s.eachPrimitiveIndicesPortion,A=s.eachPrimitiveEdgeIndicesPortion,p=s.eachPrimitiveDecodeMatricesPortion,d=s.eachPrimitiveColor,f=s.primitiveInstances,m=JSON.parse(s.eachEntityId),g=s.eachEntityPrimitiveInstancesPortion,E=s.eachEntityMatricesPortion,v=c.length,_=f.length,I=new Uint8Array(v),T=new Uint32Array(v),P=m.length;for(let e=0;e<v;e++)T[e]=e;T.sort(((e,t)=>p[e]<p[t]?-1:p[e]>p[t]?1:0));for(let e=0;e<_;e++)I[f[e]]++;const D={};for(let e=0;e<P;e++){const t=P-1,s=e===t,i=g[e],r=s?g[t]:g[e+1];for(let t=i;t<r;t++){const s=f[t];I[s]>1||(D[s]=e)}}for(let e=0;e<v;e++){const t=T[e],s=t===v-1,h=I[t]>1,f=hv(d.subarray(4*t,4*t+3)),g=d[4*t+3]/255,E=r.subarray(c[t],s?r.length:c[t+1]),_=o.subarray(c[t],s?o.length:c[t+1]),P=n.subarray(u[t],s?n.length:u[t+1]),R=a.subarray(A[t],s?a.length:A[t+1]),C=l.subarray(p[t],p[t]+16);if(h){var b="geometry"+t;i.createGeometry({id:b,primitive:"triangles",positionsCompressed:E,normalsCompressed:_,indices:P,edgeIndices:R,positionsDecodeMatrix:C})}else{const e=t;m[D[t]];const s={};i.createMesh(y.apply(s,{id:e,primitive:"triangles",positionsCompressed:E,normalsCompressed:_,indices:P,edgeIndices:R,positionsDecodeMatrix:C,color:f,opacity:g}))}}let R=0;for(let e=0;e<P;e++){const t=P-1,s=e===t,r=m[e],o=g[e],n=s?g[t]:g[e+1],a=[];for(let t=o;t<n;t++){const s=f[t];if(I[s]>1){const t={},r="instance."+R++,o="geometry"+s,n=16*E[e],l=h.subarray(n,n+16);i.createMesh(y.apply(t,{id:r,geometryId:o,matrix:l})),a.push(r)}else a.push(s)}if(a.length>0){const e={};i.createEntity(y.apply(e,{id:r,isObject:!0,meshIds:a}))}}}(0,0,o,i)}};let uv=window.pako||JE;uv.inflate||(uv=uv.default);const Av=function(){const e=new Float32Array(3);return function(t){return e[0]=t[0]/255,e[1]=t[1]/255,e[2]=t[2]/255,e}}();const pv={version:5,parse:function(e,t,s,i){const r=function(e){return{positions:e[0],normals:e[1],indices:e[2],edgeIndices:e[3],matrices:e[4],eachPrimitivePositionsAndNormalsPortion:e[5],eachPrimitiveIndicesPortion:e[6],eachPrimitiveEdgeIndicesPortion:e[7],eachPrimitiveColor:e[8],primitiveInstances:e[9],eachEntityId:e[10],eachEntityPrimitiveInstancesPortion:e[11],eachEntityMatricesPortion:e[12]}}(s),o=function(e){return{positions:new Float32Array(uv.inflate(e.positions).buffer),normals:new Int8Array(uv.inflate(e.normals).buffer),indices:new Uint32Array(uv.inflate(e.indices).buffer),edgeIndices:new Uint32Array(uv.inflate(e.edgeIndices).buffer),matrices:new Float32Array(uv.inflate(e.matrices).buffer),eachPrimitivePositionsAndNormalsPortion:new Uint32Array(uv.inflate(e.eachPrimitivePositionsAndNormalsPortion).buffer),eachPrimitiveIndicesPortion:new Uint32Array(uv.inflate(e.eachPrimitiveIndicesPortion).buffer),eachPrimitiveEdgeIndicesPortion:new Uint32Array(uv.inflate(e.eachPrimitiveEdgeIndicesPortion).buffer),eachPrimitiveColor:new Uint8Array(uv.inflate(e.eachPrimitiveColor).buffer),primitiveInstances:new Uint32Array(uv.inflate(e.primitiveInstances).buffer),eachEntityId:uv.inflate(e.eachEntityId,{to:"string"}),eachEntityPrimitiveInstancesPortion:new Uint32Array(uv.inflate(e.eachEntityPrimitiveInstancesPortion).buffer),eachEntityMatricesPortion:new Uint32Array(uv.inflate(e.eachEntityMatricesPortion).buffer)}}(r);!function(e,t,s,i){i.positionsCompression="disabled",i.normalsCompression="precompressed";const r=s.positions,o=s.normals,n=s.indices,a=s.edgeIndices,l=s.matrices,h=s.eachPrimitivePositionsAndNormalsPortion,c=s.eachPrimitiveIndicesPortion,u=s.eachPrimitiveEdgeIndicesPortion,A=s.eachPrimitiveColor,p=s.primitiveInstances,d=JSON.parse(s.eachEntityId),f=s.eachEntityPrimitiveInstancesPortion,m=s.eachEntityMatricesPortion,g=h.length,E=p.length,v=new Uint8Array(g),_=d.length;for(let e=0;e<E;e++)v[p[e]]++;const I={};for(let e=0;e<_;e++){const t=_-1,s=e===t,i=f[e],r=s?f[t]:f[e+1];for(let t=i;t<r;t++){const s=p[t];v[s]>1||(I[s]=e)}}for(let e=0;e<g;e++){const t=e===g-1,s=v[e]>1,l=Av(A.subarray(4*e,4*e+3)),p=A[4*e+3]/255,f=r.subarray(h[e],t?r.length:h[e+1]),m=o.subarray(h[e],t?o.length:h[e+1]),E=n.subarray(c[e],t?n.length:c[e+1]),_=a.subarray(u[e],t?a.length:u[e+1]);if(s){var T="geometry"+e;i.createGeometry({id:T,primitive:"triangles",positionsCompressed:f,normalsCompressed:m,indices:E,edgeIndices:_})}else{const t=e;d[I[e]];const s={};i.createMesh(y.apply(s,{id:t,primitive:"triangles",positionsCompressed:f,normalsCompressed:m,indices:E,edgeIndices:_,color:l,opacity:p}))}}let P=0;for(let e=0;e<_;e++){const t=_-1,s=e===t,r=d[e],o=f[e],n=s?f[t]:f[e+1],a=[];for(let t=o;t<n;t++){const s=p[t];if(v[s]>1){const t={},r="instance."+P++,o="geometry"+s,n=16*m[e],h=l.subarray(n,n+16);i.createMesh(y.apply(t,{id:r,geometryId:o,matrix:h})),a.push(r)}else a.push(s)}if(a.length>0){const e={};i.createEntity(y.apply(e,{id:r,isObject:!0,meshIds:a}))}}}(0,0,o,i)}};let dv=window.pako||JE;dv.inflate||(dv=dv.default);const fv=function(){const e=new Float32Array(3);return function(t){return e[0]=t[0]/255,e[1]=t[1]/255,e[2]=t[2]/255,e}}();const mv={version:6,parse:function(e,t,s,i){const r=function(e){return{positions:e[0],normals:e[1],indices:e[2],edgeIndices:e[3],matrices:e[4],reusedPrimitivesDecodeMatrix:e[5],eachPrimitivePositionsAndNormalsPortion:e[6],eachPrimitiveIndicesPortion:e[7],eachPrimitiveEdgeIndicesPortion:e[8],eachPrimitiveColorAndOpacity:e[9],primitiveInstances:e[10],eachEntityId:e[11],eachEntityPrimitiveInstancesPortion:e[12],eachEntityMatricesPortion:e[13],eachTileAABB:e[14],eachTileEntitiesPortion:e[15]}}(s),o=function(e){function t(e,t){return 0===e.length?[]:dv.inflate(e,t).buffer}return{positions:new Uint16Array(t(e.positions)),normals:new Int8Array(t(e.normals)),indices:new Uint32Array(t(e.indices)),edgeIndices:new Uint32Array(t(e.edgeIndices)),matrices:new Float32Array(t(e.matrices)),reusedPrimitivesDecodeMatrix:new Float32Array(t(e.reusedPrimitivesDecodeMatrix)),eachPrimitivePositionsAndNormalsPortion:new Uint32Array(t(e.eachPrimitivePositionsAndNormalsPortion)),eachPrimitiveIndicesPortion:new Uint32Array(t(e.eachPrimitiveIndicesPortion)),eachPrimitiveEdgeIndicesPortion:new Uint32Array(t(e.eachPrimitiveEdgeIndicesPortion)),eachPrimitiveColorAndOpacity:new Uint8Array(t(e.eachPrimitiveColorAndOpacity)),primitiveInstances:new Uint32Array(t(e.primitiveInstances)),eachEntityId:dv.inflate(e.eachEntityId,{to:"string"}),eachEntityPrimitiveInstancesPortion:new Uint32Array(t(e.eachEntityPrimitiveInstancesPortion)),eachEntityMatricesPortion:new Uint32Array(t(e.eachEntityMatricesPortion)),eachTileAABB:new Float64Array(t(e.eachTileAABB)),eachTileEntitiesPortion:new Uint32Array(t(e.eachTileEntitiesPortion))}}(r);!function(e,t,s,i){const r=s.positions,o=s.normals,n=s.indices,a=s.edgeIndices,l=s.matrices,h=s.reusedPrimitivesDecodeMatrix,c=s.eachPrimitivePositionsAndNormalsPortion,u=s.eachPrimitiveIndicesPortion,A=s.eachPrimitiveEdgeIndicesPortion,d=s.eachPrimitiveColorAndOpacity,f=s.primitiveInstances,m=JSON.parse(s.eachEntityId),g=s.eachEntityPrimitiveInstancesPortion,E=s.eachEntityMatricesPortion,v=s.eachTileAABB,_=s.eachTileEntitiesPortion,I=c.length,T=f.length,P=m.length,D=_.length;let b=0;const R=new Uint32Array(I);for(let e=0;e<T;e++){const t=f[e];void 0!==R[t]?R[t]++:R[t]=1}const C=p.vec3(),x=p.AABB3();for(let s=0;s<D;s++){const T=s===D-1,N=_[s],O=T?P:_[s+1],S=6*s,w=v.subarray(S,S+6);p.getAABB3Center(w,C),x[0]=w[0]-C[0],x[1]=w[1]-C[1],x[2]=w[2]-C[2],x[3]=w[3]-C[0],x[4]=w[4]-C[1],x[5]=w[5]-C[2];const M=it.createPositionsDecodeMatrix(x),B={};for(let v=N;v<O;v++){const _=m[v],T=t.globalizeObjectIds?p.globalizeObjectId(i.id,_):_,D=E[v],x=l.slice(D,D+16),N=v===P-1,O=g[v],S=N?f.length:g[v+1],w=[],F=e.metaScene.metaObjects[T],L={},U={};if(F){if(t.excludeTypesMap&&F.type&&t.excludeTypesMap[F.type])continue;if(t.includeTypesMap&&F.type&&!t.includeTypesMap[F.type])continue;const e=t.objectDefaults?t.objectDefaults[F.type]||t.objectDefaults.DEFAULT:null;e&&(!1===e.visible&&(L.visible=!1),!1===e.pickable&&(L.pickable=!1),e.colorize&&(U.color=e.colorize),void 0!==e.opacity&&null!==e.opacity&&(U.opacity=e.opacity))}else if(t.excludeUnclassifiedObjects)continue;for(let e=O;e<S;e++){const t=f[e],l=R[t]>1,p=t===I-1,m=r.subarray(c[t],p?r.length:c[t+1]),g=o.subarray(c[t],p?o.length:c[t+1]),E=n.subarray(u[t],p?n.length:u[t+1]),v=a.subarray(A[t],p?a.length:A[t+1]),_=fv(d.subarray(4*t,4*t+3)),T=d[4*t+3]/255,P=b++;if(l){const e="geometry."+s+"."+t;B[e]||(i.createGeometry({id:e,primitive:"triangles",positionsCompressed:m,normalsCompressed:g,indices:E,edgeIndices:v,positionsDecodeMatrix:h}),B[e]=!0),i.createMesh(y.apply(U,{id:P,geometryId:e,origin:C,matrix:x,color:_,opacity:T})),w.push(P)}else i.createMesh(y.apply(U,{id:P,origin:C,primitive:"triangles",positionsCompressed:m,normalsCompressed:g,indices:E,edgeIndices:v,positionsDecodeMatrix:M,color:_,opacity:T})),w.push(P)}w.length>0&&i.createEntity(y.apply(L,{id:T,isObject:!0,meshIds:w}))}}}(e,t,o,i)}};let gv=window.pako||JE;gv.inflate||(gv=gv.default);const yv=function(){const e=new Float32Array(3);return function(t){return e[0]=t[0]/255,e[1]=t[1]/255,e[2]=t[2]/255,e}}();function Ev(e){const t=[];for(let s=0,i=e.length;s<i;s+=3)t.push(e[s]),t.push(e[s+1]),t.push(e[s+2]),t.push(1);return t}const vv={version:7,parse:function(e,t,s,i){const r=function(e){return{positions:e[0],normals:e[1],colors:e[2],indices:e[3],edgeIndices:e[4],matrices:e[5],reusedGeometriesDecodeMatrix:e[6],eachGeometryPrimitiveType:e[7],eachGeometryPositionsPortion:e[8],eachGeometryNormalsPortion:e[9],eachGeometryColorsPortion:e[10],eachGeometryIndicesPortion:e[11],eachGeometryEdgeIndicesPortion:e[12],eachMeshGeometriesPortion:e[13],eachMeshMatricesPortion:e[14],eachMeshMaterial:e[15],eachEntityId:e[16],eachEntityMeshesPortion:e[17],eachTileAABB:e[18],eachTileEntitiesPortion:e[19]}}(s),o=function(e){function t(e,t){return 0===e.length?[]:gv.inflate(e,t).buffer}return{positions:new Uint16Array(t(e.positions)),normals:new Int8Array(t(e.normals)),colors:new Uint8Array(t(e.colors)),indices:new Uint32Array(t(e.indices)),edgeIndices:new Uint32Array(t(e.edgeIndices)),matrices:new Float32Array(t(e.matrices)),reusedGeometriesDecodeMatrix:new Float32Array(t(e.reusedGeometriesDecodeMatrix)),eachGeometryPrimitiveType:new Uint8Array(t(e.eachGeometryPrimitiveType)),eachGeometryPositionsPortion:new Uint32Array(t(e.eachGeometryPositionsPortion)),eachGeometryNormalsPortion:new Uint32Array(t(e.eachGeometryNormalsPortion)),eachGeometryColorsPortion:new Uint32Array(t(e.eachGeometryColorsPortion)),eachGeometryIndicesPortion:new Uint32Array(t(e.eachGeometryIndicesPortion)),eachGeometryEdgeIndicesPortion:new Uint32Array(t(e.eachGeometryEdgeIndicesPortion)),eachMeshGeometriesPortion:new Uint32Array(t(e.eachMeshGeometriesPortion)),eachMeshMatricesPortion:new Uint32Array(t(e.eachMeshMatricesPortion)),eachMeshMaterial:new Uint8Array(t(e.eachMeshMaterial)),eachEntityId:gv.inflate(e.eachEntityId,{to:"string"}),eachEntityMeshesPortion:new Uint32Array(t(e.eachEntityMeshesPortion)),eachTileAABB:new Float64Array(t(e.eachTileAABB)),eachTileEntitiesPortion:new Uint32Array(t(e.eachTileEntitiesPortion))}}(r);!function(e,t,s,i){const r=s.positions,o=s.normals,n=s.colors,a=s.indices,l=s.edgeIndices,h=s.matrices,c=s.reusedGeometriesDecodeMatrix,u=s.eachGeometryPrimitiveType,A=s.eachGeometryPositionsPortion,d=s.eachGeometryNormalsPortion,f=s.eachGeometryColorsPortion,m=s.eachGeometryIndicesPortion,g=s.eachGeometryEdgeIndicesPortion,E=s.eachMeshGeometriesPortion,v=s.eachMeshMatricesPortion,_=s.eachMeshMaterial,I=JSON.parse(s.eachEntityId),T=s.eachEntityMeshesPortion,P=s.eachTileAABB,D=s.eachTileEntitiesPortion,b=A.length,R=E.length,C=I.length,x=D.length;let N=0;const O=new Uint32Array(b);for(let e=0;e<R;e++){const t=E[e];void 0!==O[t]?O[t]++:O[t]=1}const S=p.vec3(),w=p.AABB3();for(let s=0;s<x;s++){const R=s===x-1,M=D[s],B=R?C:D[s+1],F=6*s,L=P.subarray(F,F+6);p.getAABB3Center(L,S),w[0]=L[0]-S[0],w[1]=L[1]-S[1],w[2]=L[2]-S[2],w[3]=L[3]-S[0],w[4]=L[4]-S[1],w[5]=L[5]-S[2];const U=it.createPositionsDecodeMatrix(w),H={};for(let P=M;P<B;P++){const D=I[P],R=t.globalizeObjectIds?p.globalizeObjectId(i.id,D):D,x=P===C-1,w=T[P],M=x?E.length:T[P+1],B=[],F=e.metaScene.metaObjects[R],L={},G={};if(F){if(t.excludeTypesMap&&F.type&&t.excludeTypesMap[F.type])continue;if(t.includeTypesMap&&F.type&&!t.includeTypesMap[F.type])continue;const e=t.objectDefaults?t.objectDefaults[F.type]||t.objectDefaults.DEFAULT:null;e&&(!1===e.visible&&(L.visible=!1),!1===e.pickable&&(L.pickable=!1),e.colorize&&(G.color=e.colorize),void 0!==e.opacity&&null!==e.opacity&&(G.opacity=e.opacity),void 0!==e.metallic&&null!==e.metallic&&(G.metallic=e.metallic),void 0!==e.roughness&&null!==e.roughness&&(G.roughness=e.roughness))}else if(t.excludeUnclassifiedObjects)continue;for(let e=w;e<M;e++){const t=E[e],p=O[t]>1,I=t===b-1,T=yv(_.subarray(6*e,6*e+3)),P=_[6*e+3]/255,D=_[6*e+4]/255,R=_[6*e+5]/255,C=N++;if(p){const p=v[e],E=h.slice(p,p+16),_="geometry."+s+"."+t;if(!H[_]){let e,s,h,p,y,E;switch(u[t]){case 0:e="solid",s=r.subarray(A[t],I?r.length:A[t+1]),h=o.subarray(d[t],I?o.length:d[t+1]),y=a.subarray(m[t],I?a.length:m[t+1]),E=l.subarray(g[t],I?l.length:g[t+1]);break;case 1:e="surface",s=r.subarray(A[t],I?r.length:A[t+1]),h=o.subarray(d[t],I?o.length:d[t+1]),y=a.subarray(m[t],I?a.length:m[t+1]),E=l.subarray(g[t],I?l.length:g[t+1]);break;case 2:e="points",s=r.subarray(A[t],I?r.length:A[t+1]),p=Ev(n.subarray(f[t],I?n.length:f[t+1]));break;case 3:e="lines",s=r.subarray(A[t],I?r.length:A[t+1]),y=a.subarray(m[t],I?a.length:m[t+1]);break;default:continue}i.createGeometry({id:_,primitive:e,positionsCompressed:s,normalsCompressed:h,colors:p,indices:y,edgeIndices:E,positionsDecodeMatrix:c}),H[_]=!0}i.createMesh(y.apply(G,{id:C,geometryId:_,origin:S,matrix:E,color:T,metallic:D,roughness:R,opacity:P})),B.push(C)}else{let e,s,h,c,p,E;switch(u[t]){case 0:e="solid",s=r.subarray(A[t],I?r.length:A[t+1]),h=o.subarray(d[t],I?o.length:d[t+1]),p=a.subarray(m[t],I?a.length:m[t+1]),E=l.subarray(g[t],I?l.length:g[t+1]);break;case 1:e="surface",s=r.subarray(A[t],I?r.length:A[t+1]),h=o.subarray(d[t],I?o.length:d[t+1]),p=a.subarray(m[t],I?a.length:m[t+1]),E=l.subarray(g[t],I?l.length:g[t+1]);break;case 2:e="points",s=r.subarray(A[t],I?r.length:A[t+1]),c=Ev(n.subarray(f[t],I?n.length:f[t+1]));break;case 3:e="lines",s=r.subarray(A[t],I?r.length:A[t+1]),p=a.subarray(m[t],I?a.length:m[t+1]);break;default:continue}i.createMesh(y.apply(G,{id:C,origin:S,primitive:e,positionsCompressed:s,normalsCompressed:h,colors:c,indices:p,edgeIndices:E,positionsDecodeMatrix:U,color:T,metallic:D,roughness:R,opacity:P})),B.push(C)}}B.length>0&&i.createEntity(y.apply(L,{id:R,isObject:!0,meshIds:B}))}}}(e,t,o,i)}};let _v=window.pako||JE;_v.inflate||(_v=_v.default);const Iv=p.vec4(),Tv=p.vec4();const Pv=function(){const e=new Float32Array(3);return function(t){return e[0]=t[0]/255,e[1]=t[1]/255,e[2]=t[2]/255,e}}();function Dv(e){const t=[];for(let s=0,i=e.length;s<i;s+=3)t.push(e[s]),t.push(e[s+1]),t.push(e[s+2]),t.push(1);return t}const bv={version:8,parse:function(e,t,s,i){const r=function(e){return{types:e[0],eachMetaObjectId:e[1],eachMetaObjectType:e[2],eachMetaObjectName:e[3],eachMetaObjectParent:e[4],positions:e[5],normals:e[6],colors:e[7],indices:e[8],edgeIndices:e[9],matrices:e[10],reusedGeometriesDecodeMatrix:e[11],eachGeometryPrimitiveType:e[12],eachGeometryPositionsPortion:e[13],eachGeometryNormalsPortion:e[14],eachGeometryColorsPortion:e[15],eachGeometryIndicesPortion:e[16],eachGeometryEdgeIndicesPortion:e[17],eachMeshGeometriesPortion:e[18],eachMeshMatricesPortion:e[19],eachMeshMaterial:e[20],eachEntityMetaObject:e[21],eachEntityMeshesPortion:e[22],eachTileAABB:e[23],eachTileEntitiesPortion:e[24]}}(s),o=function(e){function t(e,t){return 0===e.length?[]:_v.inflate(e,t).buffer}return{types:_v.inflate(e.types,{to:"string"}),eachMetaObjectId:_v.inflate(e.eachMetaObjectId,{to:"string"}),eachMetaObjectType:new Uint32Array(t(e.eachMetaObjectType)),eachMetaObjectName:_v.inflate(e.eachMetaObjectName,{to:"string"}),eachMetaObjectParent:new Uint32Array(t(e.eachMetaObjectParent)),positions:new Uint16Array(t(e.positions)),normals:new Int8Array(t(e.normals)),colors:new Uint8Array(t(e.colors)),indices:new Uint32Array(t(e.indices)),edgeIndices:new Uint32Array(t(e.edgeIndices)),matrices:new Float32Array(t(e.matrices)),reusedGeometriesDecodeMatrix:new Float32Array(t(e.reusedGeometriesDecodeMatrix)),eachGeometryPrimitiveType:new Uint8Array(t(e.eachGeometryPrimitiveType)),eachGeometryPositionsPortion:new Uint32Array(t(e.eachGeometryPositionsPortion)),eachGeometryNormalsPortion:new Uint32Array(t(e.eachGeometryNormalsPortion)),eachGeometryColorsPortion:new Uint32Array(t(e.eachGeometryColorsPortion)),eachGeometryIndicesPortion:new Uint32Array(t(e.eachGeometryIndicesPortion)),eachGeometryEdgeIndicesPortion:new Uint32Array(t(e.eachGeometryEdgeIndicesPortion)),eachMeshGeometriesPortion:new Uint32Array(t(e.eachMeshGeometriesPortion)),eachMeshMatricesPortion:new Uint32Array(t(e.eachMeshMatricesPortion)),eachMeshMaterial:new Uint8Array(t(e.eachMeshMaterial)),eachEntityMetaObject:new Uint32Array(t(e.eachEntityMetaObject)),eachEntityMeshesPortion:new Uint32Array(t(e.eachEntityMeshesPortion)),eachTileAABB:new Float64Array(t(e.eachTileAABB)),eachTileEntitiesPortion:new Uint32Array(t(e.eachTileEntitiesPortion))}}(r);!function(e,t,s,i){const r=JSON.parse(s.types),o=JSON.parse(s.eachMetaObjectId),n=s.eachMetaObjectType,a=JSON.parse(s.eachMetaObjectName),l=s.eachMetaObjectParent,h=s.positions,c=s.normals,u=s.colors,A=s.indices,d=s.edgeIndices,f=s.matrices,m=s.reusedGeometriesDecodeMatrix,g=s.eachGeometryPrimitiveType,E=s.eachGeometryPositionsPortion,v=s.eachGeometryNormalsPortion,_=s.eachGeometryColorsPortion,I=s.eachGeometryIndicesPortion,T=s.eachGeometryEdgeIndicesPortion,P=s.eachMeshGeometriesPortion,D=s.eachMeshMatricesPortion,b=s.eachMeshMaterial,R=s.eachEntityMetaObject,C=s.eachEntityMeshesPortion,x=s.eachTileAABB,N=s.eachTileEntitiesPortion,O=o.length,S=E.length,w=P.length,M=R.length,B=N.length;let F=0;const L=i.id;if(!e.metaScene.metaModels[L]){const s={metaObjects:[]};for(let e=0;e<O;e++){const t=o[e],i=r[n[e]]||"default",h=a[e],c=l[e],u=c!==e?o[c]:null;s.metaObjects.push({id:t,type:i,name:h,parent:u})}e.metaScene.createMetaModel(L,s,{includeTypes:t.includeTypes,excludeTypes:t.excludeTypes,globalizeObjectIds:t.globalizeObjectIds}),i.once("destroyed",(()=>{e.metaScene.destroyMetaModel(L)}))}const U=new Uint32Array(S);for(let e=0;e<w;e++){const t=P[e];void 0!==U[t]?U[t]++:U[t]=1}const H=p.vec3(),G=p.AABB3(),V={};for(let s=0;s<B;s++){const r=s===B-1,n=N[s],a=r?M:N[s+1],l=6*s,O=x.subarray(l,l+6);p.getAABB3Center(O,H),G[0]=O[0]-H[0],G[1]=O[1]-H[1],G[2]=O[2]-H[2],G[3]=O[3]-H[0],G[4]=O[4]-H[1],G[5]=O[5]-H[2];const w=it.createPositionsDecodeMatrix(G),L={};for(let r=n;r<a;r++){const n=o[R[r]],a=t.globalizeObjectIds?p.globalizeObjectId(i.id,n):n,l=r===M-1,x=C[r],N=l?P.length:C[r+1],O=[],B=e.metaScene.metaObjects[a],k={},j={};if(B){if(t.excludeTypesMap&&B.type&&t.excludeTypesMap[B.type])continue;if(t.includeTypesMap&&B.type&&!t.includeTypesMap[B.type])continue;const e=t.objectDefaults?t.objectDefaults[B.type]||t.objectDefaults.DEFAULT:null;e&&(!1===e.visible&&(k.visible=!1),!1===e.pickable&&(k.pickable=!1),e.colorize&&(j.color=e.colorize),void 0!==e.opacity&&null!==e.opacity&&(j.opacity=e.opacity),void 0!==e.metallic&&null!==e.metallic&&(j.metallic=e.metallic),void 0!==e.roughness&&null!==e.roughness&&(j.roughness=e.roughness))}else if(t.excludeUnclassifiedObjects)continue;for(let e=x;e<N;e++){const r=P[e],o=U[r]>1,n=r===S-1,a=Pv(b.subarray(6*e,6*e+3)),l=b[6*e+3]/255,R=b[6*e+4]/255,C=b[6*e+5]/255,x=F++;if(o){const o=D[e],P=f.slice(o,o+16),b="geometry."+s+"."+r;let N=V[b];if(!N){N={batchThisMesh:!t.reuseGeometries};let e=!1;switch(g[r]){case 0:N.primitiveName="solid",N.geometryPositions=h.subarray(E[r],n?h.length:E[r+1]),N.geometryNormals=c.subarray(v[r],n?c.length:v[r+1]),N.geometryIndices=A.subarray(I[r],n?A.length:I[r+1]),N.geometryEdgeIndices=d.subarray(T[r],n?d.length:T[r+1]),e=N.geometryPositions.length>0&&N.geometryIndices.length>0;break;case 1:N.primitiveName="surface",N.geometryPositions=h.subarray(E[r],n?h.length:E[r+1]),N.geometryNormals=c.subarray(v[r],n?c.length:v[r+1]),N.geometryIndices=A.subarray(I[r],n?A.length:I[r+1]),N.geometryEdgeIndices=d.subarray(T[r],n?d.length:T[r+1]),e=N.geometryPositions.length>0&&N.geometryIndices.length>0;break;case 2:N.primitiveName="points",N.geometryPositions=h.subarray(E[r],n?h.length:E[r+1]),N.geometryColors=Dv(u.subarray(_[r],n?u.length:_[r+1])),e=N.geometryPositions.length>0;break;case 3:N.primitiveName="lines",N.geometryPositions=h.subarray(E[r],n?h.length:E[r+1]),N.geometryIndices=A.subarray(I[r],n?A.length:I[r+1]),e=N.geometryPositions.length>0&&N.geometryIndices.length>0;break;default:continue}if(e||(N=null),N&&(N.geometryPositions.length,N.batchThisMesh)){N.decompressedPositions=new Float32Array(N.geometryPositions.length);const e=N.geometryPositions,t=N.decompressedPositions;for(let s=0,i=e.length;s<i;s+=3)t[s+0]=e[s+0]*m[0]+m[12],t[s+1]=e[s+1]*m[5]+m[13],t[s+2]=e[s+2]*m[10]+m[14];N.geometryPositions=null,V[b]=N}}if(N)if(N.batchThisMesh){const e=N.decompressedPositions,t=new Uint16Array(e.length);for(let s=0,i=e.length;s<i;s+=3)Iv[0]=e[s+0],Iv[1]=e[s+1],Iv[2]=e[s+2],Iv[3]=1,p.transformVec4(P,Iv,Tv),it.compressPosition(Tv,G,Iv),t[s+0]=Iv[0],t[s+1]=Iv[1],t[s+2]=Iv[2];i.createMesh(y.apply(j,{id:x,origin:H,primitive:N.primitiveName,positionsCompressed:t,normalsCompressed:N.geometryNormals,colorsCompressed:N.geometryColors,indices:N.geometryIndices,edgeIndices:N.geometryEdgeIndices,positionsDecodeMatrix:w,color:a,metallic:R,roughness:C,opacity:l})),O.push(x)}else L[b]||(i.createGeometry({id:b,primitive:N.primitiveName,positionsCompressed:N.geometryPositions,normalsCompressed:N.geometryNormals,colorsCompressed:N.geometryColors,indices:N.geometryIndices,edgeIndices:N.geometryEdgeIndices,positionsDecodeMatrix:m}),L[b]=!0),i.createMesh(y.apply(j,{id:x,geometryId:b,origin:H,matrix:P,color:a,metallic:R,roughness:C,opacity:l})),O.push(x)}else{let e,t,s,o,p,f,m=!1;switch(g[r]){case 0:e="solid",t=h.subarray(E[r],n?h.length:E[r+1]),s=c.subarray(v[r],n?c.length:v[r+1]),p=A.subarray(I[r],n?A.length:I[r+1]),f=d.subarray(T[r],n?d.length:T[r+1]),m=t.length>0&&p.length>0;break;case 1:e="surface",t=h.subarray(E[r],n?h.length:E[r+1]),s=c.subarray(v[r],n?c.length:v[r+1]),p=A.subarray(I[r],n?A.length:I[r+1]),f=d.subarray(T[r],n?d.length:T[r+1]),m=t.length>0&&p.length>0;break;case 2:e="points",t=h.subarray(E[r],n?h.length:E[r+1]),o=Dv(u.subarray(_[r],n?u.length:_[r+1])),m=t.length>0;break;case 3:e="lines",t=h.subarray(E[r],n?h.length:E[r+1]),p=A.subarray(I[r],n?A.length:I[r+1]),m=t.length>0&&p.length>0;break;default:continue}m&&(i.createMesh(y.apply(j,{id:x,origin:H,primitive:e,positionsCompressed:t,normalsCompressed:s,colorsCompressed:o,indices:p,edgeIndices:f,positionsDecodeMatrix:w,color:a,metallic:R,roughness:C,opacity:l})),O.push(x))}}O.length>0&&i.createEntity(y.apply(k,{id:a,isObject:!0,meshIds:O}))}}}(e,t,o,i)}};let Rv=window.pako||JE;Rv.inflate||(Rv=Rv.default);const Cv=p.vec4(),xv=p.vec4();const Nv=function(){const e=new Float32Array(3);return function(t){return e[0]=t[0]/255,e[1]=t[1]/255,e[2]=t[2]/255,e}}();const Ov={version:9,parse:function(e,t,s,i){const r=function(e){return{metadata:e[0],positions:e[1],normals:e[2],colors:e[3],indices:e[4],edgeIndices:e[5],matrices:e[6],reusedGeometriesDecodeMatrix:e[7],eachGeometryPrimitiveType:e[8],eachGeometryPositionsPortion:e[9],eachGeometryNormalsPortion:e[10],eachGeometryColorsPortion:e[11],eachGeometryIndicesPortion:e[12],eachGeometryEdgeIndicesPortion:e[13],eachMeshGeometriesPortion:e[14],eachMeshMatricesPortion:e[15],eachMeshMaterial:e[16],eachEntityId:e[17],eachEntityMeshesPortion:e[18],eachTileAABB:e[19],eachTileEntitiesPortion:e[20]}}(s),o=function(e){function t(e,t){return 0===e.length?[]:Rv.inflate(e,t).buffer}return{metadata:JSON.parse(Rv.inflate(e.metadata,{to:"string"})),positions:new Uint16Array(t(e.positions)),normals:new Int8Array(t(e.normals)),colors:new Uint8Array(t(e.colors)),indices:new Uint32Array(t(e.indices)),edgeIndices:new Uint32Array(t(e.edgeIndices)),matrices:new Float32Array(t(e.matrices)),reusedGeometriesDecodeMatrix:new Float32Array(t(e.reusedGeometriesDecodeMatrix)),eachGeometryPrimitiveType:new Uint8Array(t(e.eachGeometryPrimitiveType)),eachGeometryPositionsPortion:new Uint32Array(t(e.eachGeometryPositionsPortion)),eachGeometryNormalsPortion:new Uint32Array(t(e.eachGeometryNormalsPortion)),eachGeometryColorsPortion:new Uint32Array(t(e.eachGeometryColorsPortion)),eachGeometryIndicesPortion:new Uint32Array(t(e.eachGeometryIndicesPortion)),eachGeometryEdgeIndicesPortion:new Uint32Array(t(e.eachGeometryEdgeIndicesPortion)),eachMeshGeometriesPortion:new Uint32Array(t(e.eachMeshGeometriesPortion)),eachMeshMatricesPortion:new Uint32Array(t(e.eachMeshMatricesPortion)),eachMeshMaterial:new Uint8Array(t(e.eachMeshMaterial)),eachEntityId:JSON.parse(Rv.inflate(e.eachEntityId,{to:"string"})),eachEntityMeshesPortion:new Uint32Array(t(e.eachEntityMeshesPortion)),eachTileAABB:new Float64Array(t(e.eachTileAABB)),eachTileEntitiesPortion:new Uint32Array(t(e.eachTileEntitiesPortion))}}(r);!function(e,t,s,i){const r=s.metadata,o=s.positions,n=s.normals,a=s.colors,l=s.indices,h=s.edgeIndices,c=s.matrices,u=s.reusedGeometriesDecodeMatrix,A=s.eachGeometryPrimitiveType,d=s.eachGeometryPositionsPortion,f=s.eachGeometryNormalsPortion,m=s.eachGeometryColorsPortion,g=s.eachGeometryIndicesPortion,E=s.eachGeometryEdgeIndicesPortion,v=s.eachMeshGeometriesPortion,_=s.eachMeshMatricesPortion,I=s.eachMeshMaterial,T=s.eachEntityId,P=s.eachEntityMeshesPortion,D=s.eachTileAABB,b=s.eachTileEntitiesPortion,R=d.length,C=v.length,x=P.length,N=b.length;let O=0;const S=i.id;e.metaScene.metaModels[S]||(e.metaScene.createMetaModel(S,r,{includeTypes:t.includeTypes,excludeTypes:t.excludeTypes,globalizeObjectIds:t.globalizeObjectIds}),i.once("destroyed",(()=>{e.metaScene.destroyMetaModel(S)})));const w=new Uint32Array(R);for(let e=0;e<C;e++){const t=v[e];void 0!==w[t]?w[t]++:w[t]=1}const M=p.vec3(),B=p.AABB3(),F={};for(let s=0;s<N;s++){const r=s===N-1,C=b[s],S=r?x-1:b[s+1]-1,L=6*s,U=D.subarray(L,L+6);p.getAABB3Center(U,M),B[0]=U[0]-M[0],B[1]=U[1]-M[1],B[2]=U[2]-M[2],B[3]=U[3]-M[0],B[4]=U[4]-M[1],B[5]=U[5]-M[2];const H=it.createPositionsDecodeMatrix(B),G={};for(let r=C;r<=S;r++){const D=T[r],b=t.globalizeObjectIds?p.globalizeObjectId(i.id,D):D,C=r===x-1,N=P[r],S=C?v.length-1:P[r+1]-1,L=[],U=e.metaScene.metaObjects[b],V={},k={};if(U){if(t.excludeTypesMap&&U.type&&t.excludeTypesMap[U.type])continue;if(t.includeTypesMap&&U.type&&!t.includeTypesMap[U.type])continue;const e=t.objectDefaults?t.objectDefaults[U.type]||t.objectDefaults.DEFAULT:null;e&&(!1===e.visible&&(V.visible=!1),!1===e.pickable&&(V.pickable=!1),e.colorize&&(k.color=e.colorize),void 0!==e.opacity&&null!==e.opacity&&(k.opacity=e.opacity),void 0!==e.metallic&&null!==e.metallic&&(k.metallic=e.metallic),void 0!==e.roughness&&null!==e.roughness&&(k.roughness=e.roughness))}else if(t.excludeUnclassifiedObjects)continue;for(let e=N;e<=S;e++){const r=v[e],T=w[r]>1,P=r===R-1,D=Nv(I.subarray(6*e,6*e+3)),b=I[6*e+3]/255,C=I[6*e+4]/255,x=I[6*e+5]/255,N=O++;if(T){const v=_[e],I=c.slice(v,v+16),T="geometry."+s+"."+r;let R=F[T];if(!R){R={batchThisMesh:!t.reuseGeometries};let e=!1;switch(A[r]){case 0:R.primitiveName="solid",R.geometryPositions=o.subarray(d[r],P?o.length:d[r+1]),R.geometryNormals=n.subarray(f[r],P?n.length:f[r+1]),R.geometryIndices=l.subarray(g[r],P?l.length:g[r+1]),R.geometryEdgeIndices=h.subarray(E[r],P?h.length:E[r+1]),e=R.geometryPositions.length>0&&R.geometryIndices.length>0;break;case 1:R.primitiveName="surface",R.geometryPositions=o.subarray(d[r],P?o.length:d[r+1]),R.geometryNormals=n.subarray(f[r],P?n.length:f[r+1]),R.geometryIndices=l.subarray(g[r],P?l.length:g[r+1]),R.geometryEdgeIndices=h.subarray(E[r],P?h.length:E[r+1]),e=R.geometryPositions.length>0&&R.geometryIndices.length>0;break;case 2:R.primitiveName="points",R.geometryPositions=o.subarray(d[r],P?o.length:d[r+1]),R.geometryColors=a.subarray(m[r],P?a.length:m[r+1]),e=R.geometryPositions.length>0;break;case 3:R.primitiveName="lines",R.geometryPositions=o.subarray(d[r],P?o.length:d[r+1]),R.geometryIndices=l.subarray(g[r],P?l.length:g[r+1]),e=R.geometryPositions.length>0&&R.geometryIndices.length>0;break;default:continue}if(e||(R=null),R&&(R.geometryPositions.length,R.batchThisMesh)){R.decompressedPositions=new Float32Array(R.geometryPositions.length),R.transformedAndRecompressedPositions=new Uint16Array(R.geometryPositions.length);const e=R.geometryPositions,t=R.decompressedPositions;for(let s=0,i=e.length;s<i;s+=3)t[s+0]=e[s+0]*u[0]+u[12],t[s+1]=e[s+1]*u[5]+u[13],t[s+2]=e[s+2]*u[10]+u[14];R.geometryPositions=null,F[T]=R}}if(R)if(R.batchThisMesh){const e=R.decompressedPositions,t=R.transformedAndRecompressedPositions;for(let s=0,i=e.length;s<i;s+=3)Cv[0]=e[s+0],Cv[1]=e[s+1],Cv[2]=e[s+2],Cv[3]=1,p.transformVec4(I,Cv,xv),it.compressPosition(xv,B,Cv),t[s+0]=Cv[0],t[s+1]=Cv[1],t[s+2]=Cv[2];i.createMesh(y.apply(k,{id:N,origin:M,primitive:R.primitiveName,positionsCompressed:t,normalsCompressed:R.geometryNormals,colorsCompressed:R.geometryColors,indices:R.geometryIndices,edgeIndices:R.geometryEdgeIndices,positionsDecodeMatrix:H,color:D,metallic:C,roughness:x,opacity:b})),L.push(N)}else G[T]||(i.createGeometry({id:T,primitive:R.primitiveName,positionsCompressed:R.geometryPositions,normalsCompressed:R.geometryNormals,colorsCompressed:R.geometryColors,indices:R.geometryIndices,edgeIndices:R.geometryEdgeIndices,positionsDecodeMatrix:u}),G[T]=!0),i.createMesh(y.apply(k,{id:N,geometryId:T,origin:M,matrix:I,color:D,metallic:C,roughness:x,opacity:b})),L.push(N)}else{let e,t,s,c,u,p,v=!1;switch(A[r]){case 0:e="solid",t=o.subarray(d[r],P?o.length:d[r+1]),s=n.subarray(f[r],P?n.length:f[r+1]),u=l.subarray(g[r],P?l.length:g[r+1]),p=h.subarray(E[r],P?h.length:E[r+1]),v=t.length>0&&u.length>0;break;case 1:e="surface",t=o.subarray(d[r],P?o.length:d[r+1]),s=n.subarray(f[r],P?n.length:f[r+1]),u=l.subarray(g[r],P?l.length:g[r+1]),p=h.subarray(E[r],P?h.length:E[r+1]),v=t.length>0&&u.length>0;break;case 2:e="points",t=o.subarray(d[r],P?o.length:d[r+1]),c=a.subarray(m[r],P?a.length:m[r+1]),v=t.length>0;break;case 3:e="lines",t=o.subarray(d[r],P?o.length:d[r+1]),u=l.subarray(g[r],P?l.length:g[r+1]),v=t.length>0&&u.length>0;break;default:continue}v&&(i.createMesh(y.apply(k,{id:N,origin:M,primitive:e,positionsCompressed:t,normalsCompressed:s,colorsCompressed:c,indices:u,edgeIndices:p,positionsDecodeMatrix:H,color:D,metallic:C,roughness:x,opacity:b})),L.push(N))}}L.length>0&&i.createEntity(y.apply(V,{id:b,isObject:!0,meshIds:L}))}}}(e,t,o,i)}};let Sv=window.pako||JE;Sv.inflate||(Sv=Sv.default);const wv=p.vec4(),Mv=p.vec4();const Bv=function(){const e=new Float32Array(3);return function(t){return e[0]=t[0]/255,e[1]=t[1]/255,e[2]=t[2]/255,e}}();!function(){const e=document.createElement("canvas"),t=e.getContext("2d")}();const Fv={version:10,parse:function(e,t,s,i){const r=function(e){let t=0;return{metadata:e[t++],textureData:e[t++],eachTextureDataPortion:e[t++],eachTextureAttributes:e[t++],positions:e[t++],normals:e[t++],colors:e[t++],uvs:e[t++],indices:e[t++],edgeIndices:e[t++],eachTextureSetTextures:e[t++],matrices:e[t++],reusedGeometriesDecodeMatrix:e[t++],eachGeometryPrimitiveType:e[t++],eachGeometryPositionsPortion:e[t++],eachGeometryNormalsPortion:e[t++],eachGeometryColorsPortion:e[t++],eachGeometryUVsPortion:e[t++],eachGeometryIndicesPortion:e[t++],eachGeometryEdgeIndicesPortion:e[t++],eachMeshGeometriesPortion:e[t++],eachMeshMatricesPortion:e[t++],eachMeshTextureSet:e[t++],eachMeshMaterialAttributes:e[t++],eachEntityId:e[t++],eachEntityMeshesPortion:e[t++],eachTileAABB:e[t++],eachTileEntitiesPortion:e[t++]}}(s),o=function(e){function t(e,t){return 0===e.length?[]:Sv.inflate(e,t).buffer}return{metadata:JSON.parse(Sv.inflate(e.metadata,{to:"string"})),textureData:new Uint8Array(t(e.textureData)),eachTextureDataPortion:new Uint32Array(t(e.eachTextureDataPortion)),eachTextureAttributes:new Uint16Array(t(e.eachTextureAttributes)),positions:new Uint16Array(t(e.positions)),normals:new Int8Array(t(e.normals)),colors:new Uint8Array(t(e.colors)),uvs:new Float32Array(t(e.uvs)),indices:new Uint32Array(t(e.indices)),edgeIndices:new Uint32Array(t(e.edgeIndices)),eachTextureSetTextures:new Int32Array(t(e.eachTextureSetTextures)),matrices:new Float32Array(t(e.matrices)),reusedGeometriesDecodeMatrix:new Float32Array(t(e.reusedGeometriesDecodeMatrix)),eachGeometryPrimitiveType:new Uint8Array(t(e.eachGeometryPrimitiveType)),eachGeometryPositionsPortion:new Uint32Array(t(e.eachGeometryPositionsPortion)),eachGeometryNormalsPortion:new Uint32Array(t(e.eachGeometryNormalsPortion)),eachGeometryColorsPortion:new Uint32Array(t(e.eachGeometryColorsPortion)),eachGeometryUVsPortion:new Uint32Array(t(e.eachGeometryUVsPortion)),eachGeometryIndicesPortion:new Uint32Array(t(e.eachGeometryIndicesPortion)),eachGeometryEdgeIndicesPortion:new Uint32Array(t(e.eachGeometryEdgeIndicesPortion)),eachMeshGeometriesPortion:new Uint32Array(t(e.eachMeshGeometriesPortion)),eachMeshMatricesPortion:new Uint32Array(t(e.eachMeshMatricesPortion)),eachMeshTextureSet:new Int32Array(t(e.eachMeshTextureSet)),eachMeshMaterialAttributes:new Uint8Array(t(e.eachMeshMaterialAttributes)),eachEntityId:JSON.parse(Sv.inflate(e.eachEntityId,{to:"string"})),eachEntityMeshesPortion:new Uint32Array(t(e.eachEntityMeshesPortion)),eachTileAABB:new Float64Array(t(e.eachTileAABB)),eachTileEntitiesPortion:new Uint32Array(t(e.eachTileEntitiesPortion))}}(r);!function(e,t,s,i){const r=s.metadata,o=s.textureData,n=s.eachTextureDataPortion,a=s.eachTextureAttributes,l=s.positions,h=s.normals,c=s.colors,u=s.uvs,A=s.indices,d=s.edgeIndices,f=s.eachTextureSetTextures,m=s.matrices,g=s.reusedGeometriesDecodeMatrix,E=s.eachGeometryPrimitiveType,v=s.eachGeometryPositionsPortion,_=s.eachGeometryNormalsPortion,I=s.eachGeometryColorsPortion,T=s.eachGeometryUVsPortion,P=s.eachGeometryIndicesPortion,D=s.eachGeometryEdgeIndicesPortion,b=s.eachMeshGeometriesPortion,R=s.eachMeshMatricesPortion,C=s.eachMeshTextureSet,x=s.eachMeshMaterialAttributes,N=s.eachEntityId,O=s.eachEntityMeshesPortion,S=s.eachTileAABB,w=s.eachTileEntitiesPortion,M=n.length,B=f.length/5,F=v.length,L=b.length,U=O.length,H=w.length;let G=0;const V=i.id;e.metaScene.metaModels[V]||(e.metaScene.createMetaModel(V,r,{includeTypes:t.includeTypes,excludeTypes:t.excludeTypes,globalizeObjectIds:t.globalizeObjectIds}),i.once("destroyed",(()=>{e.metaScene.destroyMetaModel(V)})));for(let e=0;e<M;e++){const t=e===M-1,s=n[e],r=t?o.length:n[e+1],l=r-s>0,h=9*e,c=1===a[h+0],u=a[h+1];a[h+2],a[h+3];const A=a[h+4],p=a[h+5],d=a[h+6],f=a[h+7],m=a[h+8];if(l){const t=new Uint8Array(o.subarray(s,r)).buffer,n=`texture-${e}`;if(c)i.createTexture({id:n,buffers:[t],minFilter:A,magFilter:p,wrapS:d,wrapT:f,wrapR:m});else{const e=new Blob([t],{type:10001===u?"image/jpeg":10002===u?"image/png":"image/gif"}),s=(window.URL||window.webkitURL).createObjectURL(e),r=document.createElement("img");r.src=s,i.createTexture({id:n,image:r,minFilter:A,magFilter:p,wrapS:d,wrapT:f,wrapR:m})}}}for(let e=0;e<B;e++){const t=5*e,s=`textureSet-${e}`,r=f[t+0],o=f[t+1],n=f[t+2],a=f[t+3],l=f[t+4];i.createTextureSet({id:s,colorTextureId:r>=0?`texture-${r}`:null,normalsTextureId:n>=0?`texture-${n}`:null,metallicRoughnessTextureId:o>=0?`texture-${o}`:null,emissiveTextureId:a>=0?`texture-${a}`:null,occlusionTextureId:l>=0?`texture-${l}`:null})}const k=new Uint32Array(F);for(let e=0;e<L;e++){const t=b[e];void 0!==k[t]?k[t]++:k[t]=1}const j=p.vec3(),Q=p.AABB3(),W={};for(let s=0;s<H;s++){const r=s===H-1,o=w[s],n=r?U-1:w[s+1]-1,a=6*s,f=S.subarray(a,a+6);p.getAABB3Center(f,j),Q[0]=f[0]-j[0],Q[1]=f[1]-j[1],Q[2]=f[2]-j[2],Q[3]=f[3]-j[0],Q[4]=f[4]-j[1],Q[5]=f[5]-j[2];const M=it.createPositionsDecodeMatrix(Q),B={};for(let r=o;r<=n;r++){const o=N[r],n=t.globalizeObjectIds?p.globalizeObjectId(i.id,o):o,a=r===U-1,f=O[r],S=a?b.length-1:O[r+1]-1,w=[],L=e.metaScene.metaObjects[n],H={},V={};if(L){if(t.excludeTypesMap&&L.type&&t.excludeTypesMap[L.type])continue;if(t.includeTypesMap&&L.type&&!t.includeTypesMap[L.type])continue;const e=t.objectDefaults?t.objectDefaults[L.type]||t.objectDefaults.DEFAULT:null;e&&(!1===e.visible&&(H.visible=!1),!1===e.pickable&&(H.pickable=!1),e.colorize&&(V.color=e.colorize),void 0!==e.opacity&&null!==e.opacity&&(V.opacity=e.opacity),void 0!==e.metallic&&null!==e.metallic&&(V.metallic=e.metallic),void 0!==e.roughness&&null!==e.roughness&&(V.roughness=e.roughness))}else if(t.excludeUnclassifiedObjects)continue;for(let e=f;e<=S;e++){const r=b[e],o=k[r]>1,n=r===F-1,a=C[e],f=a>=0?`textureSet-${a}`:null,N=Bv(x.subarray(6*e,6*e+3)),O=x[6*e+3]/255,S=x[6*e+4]/255,L=x[6*e+5]/255,U=G++;if(o){const o=R[e],a=m.slice(o,o+16),b="geometry."+s+"."+r;let C=W[b];if(!C){C={batchThisMesh:!t.reuseGeometries};let e=!1;switch(E[r]){case 0:C.primitiveName="solid",C.geometryPositions=l.subarray(v[r],n?l.length:v[r+1]),C.geometryNormals=h.subarray(_[r],n?h.length:_[r+1]),C.geometryUVs=u.subarray(T[r],n?u.length:T[r+1]),C.geometryIndices=A.subarray(P[r],n?A.length:P[r+1]),C.geometryEdgeIndices=d.subarray(D[r],n?d.length:D[r+1]),e=C.geometryPositions.length>0&&C.geometryIndices.length>0;break;case 1:C.primitiveName="surface",C.geometryPositions=l.subarray(v[r],n?l.length:v[r+1]),C.geometryNormals=h.subarray(_[r],n?h.length:_[r+1]),C.geometryUVs=u.subarray(T[r],n?u.length:T[r+1]),C.geometryIndices=A.subarray(P[r],n?A.length:P[r+1]),C.geometryEdgeIndices=d.subarray(D[r],n?d.length:D[r+1]),e=C.geometryPositions.length>0&&C.geometryIndices.length>0;break;case 2:C.primitiveName="points",C.geometryPositions=l.subarray(v[r],n?l.length:v[r+1]),C.geometryColors=c.subarray(I[r],n?c.length:I[r+1]),e=C.geometryPositions.length>0;break;case 3:C.primitiveName="lines",C.geometryPositions=l.subarray(v[r],n?l.length:v[r+1]),C.geometryIndices=A.subarray(P[r],n?A.length:P[r+1]),e=C.geometryPositions.length>0&&C.geometryIndices.length>0;break;default:continue}if(e||(C=null),C&&(C.geometryPositions.length,C.batchThisMesh)){C.decompressedPositions=new Float32Array(C.geometryPositions.length),C.transformedAndRecompressedPositions=new Uint16Array(C.geometryPositions.length);const e=C.geometryPositions,t=C.decompressedPositions;for(let s=0,i=e.length;s<i;s+=3)t[s+0]=e[s+0]*g[0]+g[12],t[s+1]=e[s+1]*g[5]+g[13],t[s+2]=e[s+2]*g[10]+g[14];C.geometryPositions=null,W[b]=C}}if(C)if(C.batchThisMesh){const e=C.decompressedPositions,t=C.transformedAndRecompressedPositions;for(let s=0,i=e.length;s<i;s+=3)wv[0]=e[s+0],wv[1]=e[s+1],wv[2]=e[s+2],wv[3]=1,p.transformVec4(a,wv,Mv),it.compressPosition(Mv,Q,wv),t[s+0]=wv[0],t[s+1]=wv[1],t[s+2]=wv[2];i.createMesh(y.apply(V,{id:U,textureSetId:f,origin:j,primitive:C.primitiveName,positionsCompressed:t,normalsCompressed:C.geometryNormals,uv:C.geometryUVs,colorsCompressed:C.geometryColors,indices:C.geometryIndices,edgeIndices:C.geometryEdgeIndices,positionsDecodeMatrix:M,color:N,metallic:S,roughness:L,opacity:O})),w.push(U)}else B[b]||(i.createGeometry({id:b,primitive:C.primitiveName,positionsCompressed:C.geometryPositions,normalsCompressed:C.geometryNormals,uv:C.geometryUVs,colorsCompressed:C.geometryColors,indices:C.geometryIndices,edgeIndices:C.geometryEdgeIndices,positionsDecodeMatrix:g}),B[b]=!0),i.createMesh(y.apply(V,{id:U,geometryId:b,textureSetId:f,matrix:a,color:N,metallic:S,roughness:L,opacity:O,origin:j})),w.push(U)}else{let e,t,s,o,a,p,m,g=!1;switch(E[r]){case 0:e="solid",t=l.subarray(v[r],n?l.length:v[r+1]),s=h.subarray(_[r],n?h.length:_[r+1]),o=u.subarray(T[r],n?u.length:T[r+1]),p=A.subarray(P[r],n?A.length:P[r+1]),m=d.subarray(D[r],n?d.length:D[r+1]),g=t.length>0&&p.length>0;break;case 1:e="surface",t=l.subarray(v[r],n?l.length:v[r+1]),s=h.subarray(_[r],n?h.length:_[r+1]),o=u.subarray(T[r],n?u.length:T[r+1]),p=A.subarray(P[r],n?A.length:P[r+1]),m=d.subarray(D[r],n?d.length:D[r+1]),g=t.length>0&&p.length>0;break;case 2:e="points",t=l.subarray(v[r],n?l.length:v[r+1]),a=c.subarray(I[r],n?c.length:I[r+1]),g=t.length>0;break;case 3:e="lines",t=l.subarray(v[r],n?l.length:v[r+1]),p=A.subarray(P[r],n?A.length:P[r+1]),g=t.length>0&&p.length>0;break;default:continue}g&&(i.createMesh(y.apply(V,{id:U,textureSetId:f,origin:j,primitive:e,positionsCompressed:t,normalsCompressed:s,uv:o&&o.length>0?o:null,colorsCompressed:a,indices:p,edgeIndices:m,positionsDecodeMatrix:M,color:N,metallic:S,roughness:L,opacity:O})),w.push(U))}}w.length>0&&i.createEntity(y.apply(H,{id:n,isObject:!0,meshIds:w}))}}}(e,t,o,i)}},Lv={};Lv[tv.version]=tv,Lv[rv.version]=rv,Lv[av.version]=av,Lv[cv.version]=cv,Lv[pv.version]=pv,Lv[mv.version]=mv,Lv[vv.version]=vv,Lv[bv.version]=bv,Lv[Ov.version]=Ov,Lv[Fv.version]=Fv;class Uv extends a{constructor(e,t={}){super("XKTLoader",e,t),this._maxGeometryBatchSize=t.maxGeometryBatchSize,this.textureTranscoder=t.textureTranscoder,this.dataSource=t.dataSource,this.objectDefaults=t.objectDefaults,this.includeTypes=t.includeTypes,this.excludeTypes=t.excludeTypes,this.excludeUnclassifiedObjects=t.excludeUnclassifiedObjects,this.reuseGeometries=t.reuseGeometries}get supportedVersions(){return Object.keys(Lv)}get textureTranscoder(){return this._textureTranscoder}set textureTranscoder(e){this._textureTranscoder=e}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource=e||new qE}get objectDefaults(){return this._objectDefaults}set objectDefaults(e){this._objectDefaults=e||FE}get includeTypes(){return this._includeTypes}set includeTypes(e){this._includeTypes=e}get excludeTypes(){return this._excludeTypes}set excludeTypes(e){this._excludeTypes=e}get excludeUnclassifiedObjects(){return this._excludeUnclassifiedObjects}set excludeUnclassifiedObjects(e){this._excludeUnclassifiedObjects=!!e}get globalizeObjectIds(){return this._globalizeObjectIds}set globalizeObjectIds(e){this._globalizeObjectIds=!!e}get reuseGeometries(){return this._reuseGeometries}set reuseGeometries(e){this._reuseGeometries=!1!==e}load(e={}){let t;e.id&&this.viewer.scene.components[e.id]&&(this.error("Component with this ID already exists in viewer: "+e.id+" - will autogenerate this ID"),delete e.id),t=e.useDataTextures?new ai(this.viewer.scene,y.apply(e,{isModel:!0,origin:e.origin,targetLodFps:e.useDataTextures.targetLodFps||!1,enableViewFrustumCulling:e.useDataTextures.enableViewFrustumCulling||!1,disableVertexWelding:e.useDataTextures.disableVertexWelding||!1,disableIndexRebucketing:e.useDataTextures.disableIndexRebucketing||!1})):new oc(this.viewer.scene,y.apply(e,{isModel:!0,textureTranscoder:this._textureTranscoder,maxGeometryBatchSize:this._maxGeometryBatchSize,origin:e.origin}));const s=t.id;if(!e.src&&!e.xkt)return this.error("load() param expected: src or xkt"),t;const i={},r=e.includeTypes||this._includeTypes,o=e.excludeTypes||this._excludeTypes,n=e.objectDefaults||this._objectDefaults;if(i.reuseGeometries=null!==e.reuseGeometries&&void 0!==e.reuseGeometries?e.reuseGeometries:!1!==this._reuseGeometries,r){i.includeTypesMap={};for(let e=0,t=r.length;e<t;e++)i.includeTypesMap[r[e]]=!0}if(o){i.excludeTypesMap={};for(let e=0,t=o.length;e<t;e++)i.excludeTypesMap[o[e]]=!0}if(n&&(i.objectDefaults=n),i.excludeUnclassifiedObjects=void 0!==e.excludeUnclassifiedObjects?!!e.excludeUnclassifiedObjects:this._excludeUnclassifiedObjects,i.globalizeObjectIds=void 0!==e.globalizeObjectIds&&null!==e.globalizeObjectIds?!!e.globalizeObjectIds:this._globalizeObjectIds,e.metaModelSrc||e.metaModelData){const n=n=>!!this.viewer.metaScene.createMetaModel(s,n,{includeTypes:r,excludeTypes:o,globalizeObjectIds:i.globalizeObjectIds})&&(e.src?this._loadModel(e.src,e,i,t):this._parseModel(e.xkt,e,i,t),t.once("destroyed",(()=>{this.viewer.metaScene.destroyMetaModel(t.id)})),!0);if(e.metaModelSrc){const i=e.metaModelSrc;this.viewer.scene.canvas.spinner.processes++,this._dataSource.getMetaModel(i,(e=>{t.destroyed||(n(e)||(this.error(`load(): Failed to load model metadata for model '${s} from '${i}' - metadata not valid`),t.fire("error","Metadata not valid")),this.viewer.scene.canvas.spinner.processes--)}),(e=>{this.error(`load(): Failed to load model metadata for model '${s} from  '${i}' - ${e}`),t.fire("error",`Failed to load model metadata from  '${i}' - ${e}`),this.viewer.scene.canvas.spinner.processes--}))}else e.metaModelData&&(n(e.metaModelData)||(this.error(`load(): Failed to load model metadata for model '${s} from '${e.metaModelSrc}' - metadata not valid`),t.fire("error","Metadata not valid")))}else e.src?this._loadModel(e.src,e,i,t):this._parseModel(e.xkt,e,i,t);return t}_loadModel(e,t,s,i){const r=this.viewer.scene.canvas.spinner;r.processes++,this._dataSource.getXKT(t.src,(e=>{this._parseModel(e,t,s,i),r.processes--}),(e=>{r.processes--,this.error(e),i.fire("error",e)}))}_parseModel(e,t,s,i){if(i.destroyed)return;const r=new DataView(e),o=new Uint8Array(e),n=r.getUint32(0,!0),a=Lv[n];if(!a)return void this.error("Unsupported .XKT file version: "+n+" - this XKTLoaderPlugin supports versions "+Object.keys(Lv));this.log("Loading .xkt V"+n);const l=r.getUint32(4,!0),h=[];let c=4*(l+2);for(let e=0;e<l;e++){const t=r.getUint32(4*(e+2),!0);h.push(o.subarray(c,c+t)),c+=t}a.parse(this.viewer,s,h,i),i.finalize(),this._createDefaultMetaModelIfNeeded(i,t,s),i.scene.once("tick",(()=>{i.destroyed||(i.scene.fire("modelLoaded",i.id),i.fire("loaded",!0,!1))}))}_createDefaultMetaModelIfNeeded(e,t,s){const i=e.id;if(!this.viewer.metaScene.metaModels[i]){const r={metaObjects:[]};r.metaObjects.push({id:i,type:"default",name:i,parent:null});const o=e.entityList;for(let e=0,t=o.length;e<t;e++){const t=o[e];t.isObject&&r.metaObjects.push({id:t.id,type:"default",name:t.id,parent:i})}const n=t.src;this.viewer.metaScene.createMetaModel(i,r,{includeTypes:s.includeTypes,excludeTypes:s.excludeTypes,globalizeObjectIds:s.globalizeObjectIds,getProperties:async e=>await this._dataSource.getProperties(n,e)}),e.once("destroyed",(()=>{this.viewer.metaScene.destroyMetaModel(i)}))}}}var Hv={};!function(e){var t,s="File format is not recognized.",i="Error while reading zip file.",r="Error while reading file data.",o=524288,n="text/plain";try{t=0===new Blob([new DataView(new ArrayBuffer(0))]).size}catch(e){}function a(){this.crc=-1}function l(){}function h(e,t){var s,i;return s=new ArrayBuffer(e),i=new Uint8Array(s),t&&i.set(t,0),{buffer:s,array:i,view:new DataView(s)}}function c(){}function u(e){var t,s=this;s.size=0,s.init=function(i,r){var o=new Blob([e],{type:n});(t=new p(o)).init((function(){s.size=t.size,i()}),r)},s.readUint8Array=function(e,s,i,r){t.readUint8Array(e,s,i,r)}}function A(t){var s,i=this;i.size=0,i.init=function(e){for(var r=t.length;"="==t.charAt(r-1);)r--;s=t.indexOf(",")+1,i.size=Math.floor(.75*(r-s)),e()},i.readUint8Array=function(i,r,o){var n,a=h(r),l=4*Math.floor(i/3),c=4*Math.ceil((i+r)/3),u=e.atob(t.substring(l+s,c+s)),A=i-3*Math.floor(l/4);for(n=A;n<A+r;n++)a.array[n-A]=u.charCodeAt(n);o(a.array)}}function p(e){var t=this;t.size=0,t.init=function(s){t.size=e.size,s()},t.readUint8Array=function(t,s,i,r){var o=new FileReader;o.onload=function(e){i(new Uint8Array(e.target.result))},o.onerror=r;try{o.readAsArrayBuffer(function(e,t,s){if(t<0||s<0||t+s>e.size)throw new RangeError("offset:"+t+", length:"+s+", size:"+e.size);return e.slice?e.slice(t,t+s):e.webkitSlice?e.webkitSlice(t,t+s):e.mozSlice?e.mozSlice(t,t+s):e.msSlice?e.msSlice(t,t+s):void 0}(e,t,s))}catch(e){r(e)}}}function d(){}function f(e){var s,i=this;i.init=function(e){s=new Blob([],{type:n}),e()},i.writeUint8Array=function(e,i){s=new Blob([s,t?e:e.buffer],{type:n}),i()},i.getData=function(t,i){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=i,r.readAsText(s,e)}}function m(t){var s=this,i="",r="";s.init=function(e){i+="data:"+(t||"")+";base64,",e()},s.writeUint8Array=function(t,s){var o,n=r.length,a=r;for(r="",o=0;o<3*Math.floor((n+t.length)/3)-n;o++)a+=String.fromCharCode(t[o]);for(;o<t.length;o++)r+=String.fromCharCode(t[o]);a.length>2?i+=e.btoa(a):r=a,s()},s.getData=function(t){t(i+e.btoa(r))}}function g(e){var s,i=this;i.init=function(t){s=new Blob([],{type:e}),t()},i.writeUint8Array=function(i,r){s=new Blob([s,t?i:i.buffer],{type:e}),r()},i.getData=function(e){e(s)}}function y(e,t,s,i,r,n,a,l,h,c){var u,A,p,d=0,f=t.sn;function m(){e.removeEventListener("message",g,!1),l(A,p)}function g(t){var s=t.data,r=s.data,o=s.error;if(o)return o.toString=function(){return"Error: "+this.message},void h(o);if(s.sn===f)switch("number"==typeof s.codecTime&&(e.codecTime+=s.codecTime),"number"==typeof s.crcTime&&(e.crcTime+=s.crcTime),s.type){case"append":r?(A+=r.length,i.writeUint8Array(r,(function(){y()}),c)):y();break;case"flush":p=s.crc,r?(A+=r.length,i.writeUint8Array(r,(function(){m()}),c)):m();break;case"progress":a&&a(u+s.loaded,n);break;case"importScripts":case"newTask":case"echo":break;default:console.warn("zip.js:launchWorkerProcess: unknown message: ",s)}}function y(){(u=d*o)<=n?s.readUint8Array(r+u,Math.min(o,n-u),(function(s){a&&a(u,n);var i=0===u?t:{sn:f};i.type="append",i.data=s;try{e.postMessage(i,[s.buffer])}catch(t){e.postMessage(i)}d++}),h):e.postMessage({sn:f,type:"flush"})}A=0,e.addEventListener("message",g,!1),y()}function E(e,t,s,i,r,n,l,h,c,u){var A,p=0,d=0,f="input"===n,m="output"===n,g=new a;!function n(){var a;if((A=p*o)<r)t.readUint8Array(i+A,Math.min(o,r-A),(function(t){var i;try{i=e.append(t,(function(e){l&&l(A+e,r)}))}catch(e){return void c(e)}i?(d+=i.length,s.writeUint8Array(i,(function(){p++,setTimeout(n,1)}),u),m&&g.append(i)):(p++,setTimeout(n,1)),f&&g.append(t),l&&l(A,r)}),c);else{try{a=e.flush()}catch(e){return void c(e)}a?(m&&g.append(a),d+=a.length,s.writeUint8Array(a,(function(){h(d,g.get())}),u)):h(d,g.get())}}()}function v(t,s,i,r,o,n,a,h,c,u,A){var p="input";e.zip.useWebWorkers&&a?y(t,{sn:s,codecClass:"NOOP",crcType:p},i,r,o,n,c,h,u,A):E(new l,i,r,o,n,p,c,h,u,A)}function _(e){var t,s,i="",r=["Ç","ü","é","â","ä","à","å","ç","ê","ë","è","ï","î","ì","Ä","Å","É","æ","Æ","ô","ö","ò","û","ù","ÿ","Ö","Ü","ø","£","Ø","×","ƒ","á","í","ó","ú","ñ","Ñ","ª","º","¿","®","¬","½","¼","¡","«","»","_","_","_","¦","¦","Á","Â","À","©","¦","¦","+","+","¢","¥","+","+","-","-","+","-","+","ã","Ã","+","+","-","-","¦","-","+","¤","ð","Ð","Ê","Ë","È","i","Í","Î","Ï","+","+","_","_","¦","Ì","_","Ó","ß","Ô","Ò","õ","Õ","µ","þ","Þ","Ú","Û","Ù","ý","Ý","¯","´","­","±","_","¾","¶","§","÷","¸","°","¨","·","¹","³","²","_"," "];for(t=0;t<e.length;t++)i+=(s=255&e.charCodeAt(t))>127?r[s-128]:String.fromCharCode(s);return i}function I(e){return decodeURIComponent(escape(e))}function T(e){var t,s="";for(t=0;t<e.length;t++)s+=String.fromCharCode(e[t]);return s}function P(e,t,s,i,r){e.version=t.view.getUint16(s,!0),e.bitFlag=t.view.getUint16(s+2,!0),e.compressionMethod=t.view.getUint16(s+4,!0),e.lastModDateRaw=t.view.getUint32(s+6,!0),e.lastModDate=function(e){var t=(4294901760&e)>>16,s=65535&e;try{return new Date(1980+((65024&t)>>9),((480&t)>>5)-1,31&t,(63488&s)>>11,(2016&s)>>5,2*(31&s),0)}catch(e){}}(e.lastModDateRaw),1!=(1&e.bitFlag)?((i||8!=(8&e.bitFlag))&&(e.crc32=t.view.getUint32(s+10,!0),e.compressedSize=t.view.getUint32(s+14,!0),e.uncompressedSize=t.view.getUint32(s+18,!0)),4294967295!==e.compressedSize&&4294967295!==e.uncompressedSize?(e.filenameLength=t.view.getUint16(s+22,!0),e.extraFieldLength=t.view.getUint16(s+24,!0)):r("File is using Zip64 (4gb+ file size).")):r("File contains encrypted entry.")}function D(t,o,n){var a=0;function l(){}l.prototype.getData=function(i,o,l,c){var u=this;function A(e,t){c&&!function(e){var t=h(4);return t.view.setUint32(0,e),u.crc32==t.view.getUint32(0)}(t)?n("CRC failed."):i.getData((function(e){o(e)}))}function p(e){n(e||r)}function d(e){n(e||"Error while writing file data.")}t.readUint8Array(u.offset,30,(function(r){var o,f=h(r.length,r);1347093252==f.view.getUint32(0)?(P(u,f,4,!1,n),o=u.offset+30+u.filenameLength+u.extraFieldLength,i.init((function(){0===u.compressionMethod?v(u._worker,a++,t,i,o,u.compressedSize,c,A,l,p,d):function(t,s,i,r,o,n,a,l,h,c,u){var A=a?"output":"none";e.zip.useWebWorkers?y(t,{sn:s,codecClass:"Inflater",crcType:A},i,r,o,n,h,l,c,u):E(new e.zip.Inflater,i,r,o,n,A,h,l,c,u)}(u._worker,a++,t,i,o,u.compressedSize,c,A,l,p,d)}),d)):n(s)}),p)};var c={getEntries:function(e){var r=this._worker;!function(e){t.size<22?n(s):r(22,(function(){r(Math.min(65558,t.size),(function(){n(s)}))}));function r(s,r){t.readUint8Array(t.size-s,s,(function(t){for(var s=t.length-22;s>=0;s--)if(80===t[s]&&75===t[s+1]&&5===t[s+2]&&6===t[s+3])return void e(new DataView(t.buffer,s,22));r()}),(function(){n(i)}))}}((function(o){var a,c;a=o.getUint32(16,!0),c=o.getUint16(8,!0),a<0||a>=t.size?n(s):t.readUint8Array(a,t.size-a,(function(t){var i,o,a,u,A=0,p=[],d=h(t.length,t);for(i=0;i<c;i++){if((o=new l)._worker=r,1347092738!=d.view.getUint32(A))return void n(s);P(o,d,A+6,!0,n),o.commentLength=d.view.getUint16(A+32,!0),o.directory=16==(16&d.view.getUint8(A+38)),o.offset=d.view.getUint32(A+42,!0),a=T(d.array.subarray(A+46,A+46+o.filenameLength)),o.filename=2048==(2048&o.bitFlag)?I(a):_(a),o.directory||"/"!=o.filename.charAt(o.filename.length-1)||(o.directory=!0),u=T(d.array.subarray(A+46+o.filenameLength+o.extraFieldLength,A+46+o.filenameLength+o.extraFieldLength+o.commentLength)),o.comment=2048==(2048&o.bitFlag)?I(u):_(u),p.push(o),A+=46+o.filenameLength+o.extraFieldLength+o.commentLength}e(p)}),(function(){n(i)}))}))},close:function(e){this._worker&&(this._worker.terminate(),this._worker=null),e&&e()},_worker:null};e.zip.useWebWorkers?N("inflater",(function(e){c._worker=e,o(c)}),(function(e){n(e)})):o(c)}function b(e){return unescape(encodeURIComponent(e))}function R(e){var t,s=[];for(t=0;t<e.length;t++)s.push(e.charCodeAt(t));return s}function C(t,s,i,o){var n={},a=[],l=0,c=0;function u(e){i(e||"Error while writing zip file.")}function A(e){i(e||r)}var p={add:function(s,r,p,d,f){var m,g,_,I=this._worker;function T(e,s){var i=h(16);l+=e||0,i.view.setUint32(0,1347094280),void 0!==s&&(m.view.setUint32(10,s,!0),i.view.setUint32(4,s,!0)),r&&(i.view.setUint32(8,e,!0),m.view.setUint32(14,e,!0),i.view.setUint32(12,r.size,!0),m.view.setUint32(18,r.size,!0)),t.writeUint8Array(i.array,(function(){l+=16,p()}),u)}function P(){f=f||{},s=s.trim(),f.directory&&"/"!=s.charAt(s.length-1)&&(s+="/"),n.hasOwnProperty(s)?i("File already exists."):(g=R(b(s)),a.push(s),function(e){var i;_=f.lastModDate||new Date,m=h(26),n[s]={headerArray:m.array,directory:f.directory,filename:g,offset:l,comment:R(b(f.comment||""))},m.view.setUint32(0,335546376),f.version&&m.view.setUint8(0,f.version),o||0===f.level||f.directory||m.view.setUint16(4,2048),m.view.setUint16(6,(_.getHours()<<6|_.getMinutes())<<5|_.getSeconds()/2,!0),m.view.setUint16(8,(_.getFullYear()-1980<<4|_.getMonth()+1)<<5|_.getDate(),!0),m.view.setUint16(22,g.length,!0),(i=h(30+g.length)).view.setUint32(0,1347093252),i.array.set(m.array,4),i.array.set(g,30),l+=i.array.length,t.writeUint8Array(i.array,e,u)}((function(){r?o||0===f.level?v(I,c++,r,t,0,r.size,!0,T,d,A,u):function(t,s,i,r,o,n,a,l,h){var c="input";e.zip.useWebWorkers?y(t,{sn:s,options:{level:o},codecClass:"Deflater",crcType:c},i,r,0,i.size,a,n,l,h):E(new e.zip.Deflater,i,r,0,i.size,c,a,n,l,h)}(I,c++,r,t,f.level,T,d,A,u):T()})))}r?r.init(P,A):P()},close:function(e){this._worker&&(this._worker.terminate(),this._worker=null);var s,i,r,o=0,c=0;for(i=0;i<a.length;i++)o+=46+(r=n[a[i]]).filename.length+r.comment.length;for(s=h(o+22),i=0;i<a.length;i++)r=n[a[i]],s.view.setUint32(c,1347092738),s.view.setUint16(c+4,5120),s.array.set(r.headerArray,c+6),s.view.setUint16(c+32,r.comment.length,!0),r.directory&&s.view.setUint8(c+38,16),s.view.setUint32(c+42,r.offset,!0),s.array.set(r.filename,c+46),s.array.set(r.comment,c+46+r.filename.length),c+=46+r.filename.length+r.comment.length;s.view.setUint32(c,1347093766),s.view.setUint16(c+8,a.length,!0),s.view.setUint16(c+10,a.length,!0),s.view.setUint32(c+12,o,!0),s.view.setUint32(c+16,l,!0),t.writeUint8Array(s.array,(function(){t.getData(e)}),u)},_worker:null};e.zip.useWebWorkers?N("deflater",(function(e){p._worker=e,s(p)}),(function(e){i(e)})):s(p)}a.prototype.append=function(e){for(var t=0|this.crc,s=this.table,i=0,r=0|e.length;i<r;i++)t=t>>>8^s[255&(t^e[i])];this.crc=t},a.prototype.get=function(){return~this.crc},a.prototype.table=function(){var e,t,s,i=[];for(e=0;e<256;e++){for(s=e,t=0;t<8;t++)1&s?s=s>>>1^3988292384:s>>>=1;i[e]=s}return i}(),l.prototype.append=function(e,t){return e},l.prototype.flush=function(){},u.prototype=new c,u.prototype.constructor=u,A.prototype=new c,A.prototype.constructor=A,p.prototype=new c,p.prototype.constructor=p,d.prototype.getData=function(e){e(this.data)},f.prototype=new d,f.prototype.constructor=f,m.prototype=new d,m.prototype.constructor=m,g.prototype=new d,g.prototype.constructor=g;var x={deflater:["z-worker.js","deflate.js"],inflater:["z-worker.js","inflate.js"]};function N(t,s,i){if(null===e.zip.workerScripts||null===e.zip.workerScriptsPath){var r;if(e.zip.workerScripts){if(r=e.zip.workerScripts[t],!Array.isArray(r))return void i(new Error("zip.workerScripts."+t+" is not an array!"));r=function(e){var t=document.createElement("a");return e.map((function(e){return t.href=e,t.href}))}(r)}else(r=x[t].slice(0))[0]=(e.zip.workerScriptsPath||"")+r[0];var o=new Worker(r[0]);o.codecTime=o.crcTime=0,o.postMessage({type:"importScripts",scripts:r.slice(1)}),o.addEventListener("message",(function e(t){var r=t.data;if(r.error)return o.terminate(),void i(r.error);"importScripts"===r.type&&(o.removeEventListener("message",e),o.removeEventListener("error",n),s(o))})),o.addEventListener("error",n)}else i(new Error("Either zip.workerScripts or zip.workerScriptsPath may be set, not both."));function n(e){o.terminate(),i(e)}}function O(e){console.error(e)}e.zip={Reader:c,Writer:d,BlobReader:p,Data64URIReader:A,TextReader:u,BlobWriter:g,Data64URIWriter:m,TextWriter:f,createReader:function(e,t,s){s=s||O,e.init((function(){D(e,t,s)}),s)},createWriter:function(e,t,s,i){s=s||O,i=!!i,e.init((function(){C(e,t,s,i)}),s)},useWebWorkers:!0,workerScriptsPath:null,workerScripts:null}}(Hv);!function(e){var t,s,i=e.Reader,r=e.Writer;try{s=0===new Blob([new DataView(new ArrayBuffer(0))]).size}catch(e){}function o(e){var t=this;function s(s,i){var r;t.data?s():((r=new XMLHttpRequest).addEventListener("load",(function(){t.size||(t.size=Number(r.getResponseHeader("Content-Length"))||Number(r.response.byteLength)),t.data=new Uint8Array(r.response),s()}),!1),r.addEventListener("error",i,!1),r.open("GET",e),r.responseType="arraybuffer",r.send())}t.size=0,t.init=function(i,r){if(function(e){var t=document.createElement("a");return t.href=e,"http:"===t.protocol||"https:"===t.protocol}(e)){var o=new XMLHttpRequest;o.addEventListener("load",(function(){t.size=Number(o.getResponseHeader("Content-Length")),t.size?i():s(i,r)}),!1),o.addEventListener("error",r,!1),o.open("HEAD",e),o.send()}else s(i,r)},t.readUint8Array=function(e,i,r,o){s((function(){r(new Uint8Array(t.data.subarray(e,e+i)))}),o)}}function n(e){var t=this;t.size=0,t.init=function(s,i){var r=new XMLHttpRequest;r.addEventListener("load",(function(){t.size=Number(r.getResponseHeader("Content-Length")),"bytes"==r.getResponseHeader("Accept-Ranges")?s():i("HTTP Range not supported.")}),!1),r.addEventListener("error",i,!1),r.open("HEAD",e),r.send()},t.readUint8Array=function(t,s,i,r){!function(t,s,i,r){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="arraybuffer",o.setRequestHeader("Range","bytes="+t+"-"+(t+s-1)),o.addEventListener("load",(function(){i(o.response)}),!1),o.addEventListener("error",r,!1),o.send()}(t,s,(function(e){i(new Uint8Array(e))}),r)}}function a(e){var t=this;t.size=0,t.init=function(s,i){t.size=e.byteLength,s()},t.readUint8Array=function(t,s,i,r){i(new Uint8Array(e.slice(t,t+s)))}}function l(){var e,t=this;t.init=function(t,s){e=new Uint8Array,t()},t.writeUint8Array=function(t,s,i){var r=new Uint8Array(e.length+t.length);r.set(e),r.set(t,e.length),e=r,s()},t.getData=function(t){t(e.buffer)}}function h(e,t){var i,r=this;r.init=function(t,s){e.createWriter((function(e){i=e,t()}),s)},r.writeUint8Array=function(e,r,o){var n=new Blob([s?e:e.buffer],{type:t});i.onwrite=function(){i.onwrite=null,r()},i.onerror=o,i.write(n)},r.getData=function(t){e.file(t)}}o.prototype=new i,o.prototype.constructor=o,n.prototype=new i,n.prototype.constructor=n,a.prototype=new i,a.prototype.constructor=a,l.prototype=new r,l.prototype.constructor=l,h.prototype=new r,h.prototype.constructor=h,e.FileWriter=h,e.HttpReader=o,e.HttpRangeReader=n,e.ArrayBufferReader=a,e.ArrayBufferWriter=l,e.fs&&((t=e.fs.ZipDirectoryEntry).prototype.addHttpContent=function(s,i,r){return function(s,i,r,o){if(s.directory)return o?new t(s.fs,i,r,s):new e.fs.ZipFileEntry(s.fs,i,r,s);throw"Parent entry is not a directory."}(this,s,{data:i,Reader:r?n:o})},t.prototype.importHttpContent=function(e,t,s,i){this.importZip(t?new n(e):new o(e),s,i)},e.fs.FS.prototype.importHttpContent=function(e,s,i,r){this.entries=[],this.root=new t(this),this.root.importHttpContent(e,s,i,r)})}(Hv.zip);var Gv,Vv,kv,jv,Qv,Wv,zv,Kv=(e,t)=>function(){return t||(0,e[Object.keys(e)[0]])((t={exports:{}}).exports,t),t.exports},Yv=Kv({"dist/web-ifc-mt.js"(e,t){var s,i=(s="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(e={}){function t(){return R.buffer!=w.buffer&&z(),w}function i(){return R.buffer!=w.buffer&&z(),M}function r(){return R.buffer!=w.buffer&&z(),B}function o(){return R.buffer!=w.buffer&&z(),F}function n(){return R.buffer!=w.buffer&&z(),L}function a(){return R.buffer!=w.buffer&&z(),U}function l(){return R.buffer!=w.buffer&&z(),G}var h,c,u=void 0!==e?e:{};u.ready=new Promise((function(e,t){h=e,c=t}));var A,p,d,f=Object.assign({},u),m="./this.program",g=(e,t)=>{throw t},y="object"==typeof window,E="function"==typeof importScripts,v="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,_=u.ENVIRONMENT_IS_PTHREAD||!1,I="";function T(e){return u.locateFile?u.locateFile(e,I):I+e}(y||E)&&(E?I=self.location.href:"undefined"!=typeof document&&document.currentScript&&(I=document.currentScript.src),s&&(I=s),I=0!==I.indexOf("blob:")?I.substr(0,I.replace(/[?#].*/,"").lastIndexOf("/")+1):"",A=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},E&&(d=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),p=(e,t,s)=>{var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=()=>{200==i.status||0==i.status&&i.response?t(i.response):s()},i.onerror=s,i.send(null)});var P,D=u.print||console.log.bind(console),b=u.printErr||console.warn.bind(console);Object.assign(u,f),f=null,u.arguments,u.thisProgram&&(m=u.thisProgram),u.quit&&(g=u.quit),u.wasmBinary&&(P=u.wasmBinary);var R,C,x=u.noExitRuntime||!0;"object"!=typeof WebAssembly&&ae("no native wasm support detected");var N,O=!1;function S(e,t){e||ae(t)}var w,M,B,F,L,U,H,G,V="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function k(e,t,s){for(var i=(t>>>=0)+s,r=t;e[r]&&!(r>=i);)++r;if(r-t>16&&e.buffer&&V)return V.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,r):e.subarray(t,r));for(var o="";t<r;){var n=e[t++];if(128&n){var a=63&e[t++];if(192!=(224&n)){var l=63&e[t++];if((n=224==(240&n)?(15&n)<<12|a<<6|l:(7&n)<<18|a<<12|l<<6|63&e[t++])<65536)o+=String.fromCharCode(n);else{var h=n-65536;o+=String.fromCharCode(55296|h>>10,56320|1023&h)}}else o+=String.fromCharCode((31&n)<<6|a)}else o+=String.fromCharCode(n)}return o}function j(e,t){return(e>>>=0)?k(i(),e,t):""}function Q(e,t,s,i){if(!(i>0))return 0;for(var r=s>>>=0,o=s+i-1,n=0;n<e.length;++n){var a=e.charCodeAt(n);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++n)),a<=127){if(s>=o)break;t[s++>>>0]=a}else if(a<=2047){if(s+1>=o)break;t[s++>>>0]=192|a>>6,t[s++>>>0]=128|63&a}else if(a<=65535){if(s+2>=o)break;t[s++>>>0]=224|a>>12,t[s++>>>0]=128|a>>6&63,t[s++>>>0]=128|63&a}else{if(s+3>=o)break;t[s++>>>0]=240|a>>18,t[s++>>>0]=128|a>>12&63,t[s++>>>0]=128|a>>6&63,t[s++>>>0]=128|63&a}}return t[s>>>0]=0,s-r}function W(e){for(var t=0,s=0;s<e.length;++s){var i=e.charCodeAt(s);i<=127?t++:i<=2047?t+=2:i>=55296&&i<=57343?(t+=4,++s):t+=3}return t}function z(){var e=R.buffer;u.HEAP8=w=new Int8Array(e),u.HEAP16=B=new Int16Array(e),u.HEAP32=L=new Int32Array(e),u.HEAPU8=M=new Uint8Array(e),u.HEAPU16=F=new Uint16Array(e),u.HEAPU32=U=new Uint32Array(e),u.HEAPF32=H=new Float32Array(e),u.HEAPF64=G=new Float64Array(e)}var K,Y=u.INITIAL_MEMORY||16777216;if(S(Y>=5242880,"INITIAL_MEMORY should be larger than STACK_SIZE, was "+Y+"! (STACK_SIZE=5242880)"),_)R=u.wasmMemory;else if(u.wasmMemory)R=u.wasmMemory;else if(!((R=new WebAssembly.Memory({initial:Y/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw b("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),v&&b("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");z(),Y=R.buffer.byteLength;var X=[],Z=[],q=[];function J(){return x}function $(){_||(u.noFSInit||ye.init.initialized||ye.init(),ye.ignorePermissions=!1,Te(Z))}var ee,te,se,ie=0,re=null;function oe(e){ie++,u.monitorRunDependencies&&u.monitorRunDependencies(ie)}function ne(e){if(ie--,u.monitorRunDependencies&&u.monitorRunDependencies(ie),0==ie&&re){var t=re;re=null,t()}}function ae(e){u.onAbort&&u.onAbort(e),b(e="Aborted("+e+")"),O=!0,N=1,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw c(t),t}function le(e){return e.startsWith("data:application/octet-stream;base64,")}function he(e){try{if(e==ee&&P)return new Uint8Array(P);if(d)return d(e);throw"both async and sync fetching of the wasm failed"}catch(e){ae(e)}}function ce(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function ue(e){var t=Ie.pthreads[e];S(t),Ie.returnWorkerToPool(t)}le(ee="web-ifc-mt.wasm")||(ee=T(ee));var Ae={isAbs:e=>"/"===e.charAt(0),splitPath:e=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1),normalizeArray:(e,t)=>{for(var s=0,i=e.length-1;i>=0;i--){var r=e[i];"."===r?e.splice(i,1):".."===r?(e.splice(i,1),s++):s&&(e.splice(i,1),s--)}if(t)for(;s;s--)e.unshift("..");return e},normalize:e=>{var t=Ae.isAbs(e),s="/"===e.substr(-1);return e=Ae.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/"),e||t||(e="."),e&&s&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=Ae.splitPath(e),s=t[0],i=t[1];return s||i?(i&&(i=i.substr(0,i.length-1)),s+i):"."},basename:e=>{if("/"===e)return"/";var t=(e=(e=Ae.normalize(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},join:function(){var e=Array.prototype.slice.call(arguments);return Ae.normalize(e.join("/"))},join2:(e,t)=>Ae.normalize(e+"/"+t)},pe={resolve:function(){for(var e="",t=!1,s=arguments.length-1;s>=-1&&!t;s--){var i=s>=0?arguments[s]:ye.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");if(!i)return"";e=i+"/"+e,t=Ae.isAbs(i)}return e=Ae.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/"),(t?"/":"")+e||"."},relative:(e,t)=>{function s(e){for(var t=0;t<e.length&&""===e[t];t++);for(var s=e.length-1;s>=0&&""===e[s];s--);return t>s?[]:e.slice(t,s-t+1)}e=pe.resolve(e).substr(1),t=pe.resolve(t).substr(1);for(var i=s(e.split("/")),r=s(t.split("/")),o=Math.min(i.length,r.length),n=o,a=0;a<o;a++)if(i[a]!==r[a]){n=a;break}var l=[];for(a=n;a<i.length;a++)l.push("..");return(l=l.concat(r.slice(n))).join("/")}};function de(e,t,s){var i=s>0?s:W(e)+1,r=new Array(i),o=Q(e,r,0,r.length);return t&&(r.length=o),r}var fe={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){fe.ttys[e]={input:[],output:[],ops:t},ye.registerDevice(e,fe.stream_ops)},stream_ops:{open:function(e){var t=fe.ttys[e.node.rdev];if(!t)throw new ye.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.fsync(e.tty)},fsync:function(e){e.tty.ops.fsync(e.tty)},read:function(e,t,s,i,r){if(!e.tty||!e.tty.ops.get_char)throw new ye.ErrnoError(60);for(var o=0,n=0;n<i;n++){var a;try{a=e.tty.ops.get_char(e.tty)}catch(e){throw new ye.ErrnoError(29)}if(void 0===a&&0===o)throw new ye.ErrnoError(6);if(null==a)break;o++,t[s+n]=a}return o&&(e.node.timestamp=Date.now()),o},write:function(e,t,s,i,r){if(!e.tty||!e.tty.ops.put_char)throw new ye.ErrnoError(60);try{for(var o=0;o<i;o++)e.tty.ops.put_char(e.tty,t[s+o])}catch(e){throw new ye.ErrnoError(29)}return i&&(e.node.timestamp=Date.now()),o}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n"),!t)return null;e.input=de(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(D(k(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},fsync:function(e){e.output&&e.output.length>0&&(D(k(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(b(k(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},fsync:function(e){e.output&&e.output.length>0&&(b(k(e.output,0)),e.output=[])}}};function me(e){ae()}var ge={ops_table:null,mount:function(e){return ge.createNode(null,"/",16895,0)},createNode:function(e,t,s,i){if(ye.isBlkdev(s)||ye.isFIFO(s))throw new ye.ErrnoError(63);ge.ops_table||(ge.ops_table={dir:{node:{getattr:ge.node_ops.getattr,setattr:ge.node_ops.setattr,lookup:ge.node_ops.lookup,mknod:ge.node_ops.mknod,rename:ge.node_ops.rename,unlink:ge.node_ops.unlink,rmdir:ge.node_ops.rmdir,readdir:ge.node_ops.readdir,symlink:ge.node_ops.symlink},stream:{llseek:ge.stream_ops.llseek}},file:{node:{getattr:ge.node_ops.getattr,setattr:ge.node_ops.setattr},stream:{llseek:ge.stream_ops.llseek,read:ge.stream_ops.read,write:ge.stream_ops.write,allocate:ge.stream_ops.allocate,mmap:ge.stream_ops.mmap,msync:ge.stream_ops.msync}},link:{node:{getattr:ge.node_ops.getattr,setattr:ge.node_ops.setattr,readlink:ge.node_ops.readlink},stream:{}},chrdev:{node:{getattr:ge.node_ops.getattr,setattr:ge.node_ops.setattr},stream:ye.chrdev_stream_ops}});var r=ye.createNode(e,t,s,i);return ye.isDir(r.mode)?(r.node_ops=ge.ops_table.dir.node,r.stream_ops=ge.ops_table.dir.stream,r.contents={}):ye.isFile(r.mode)?(r.node_ops=ge.ops_table.file.node,r.stream_ops=ge.ops_table.file.stream,r.usedBytes=0,r.contents=null):ye.isLink(r.mode)?(r.node_ops=ge.ops_table.link.node,r.stream_ops=ge.ops_table.link.stream):ye.isChrdev(r.mode)&&(r.node_ops=ge.ops_table.chrdev.node,r.stream_ops=ge.ops_table.chrdev.stream),r.timestamp=Date.now(),e&&(e.contents[t]=r,e.timestamp=r.timestamp),r},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,t){t>>>=0;var s=e.contents?e.contents.length:0;if(!(s>=t)){t=Math.max(t,s*(s<1048576?2:1.125)>>>0),0!=s&&(t=Math.max(t,256));var i=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(i.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(t>>>=0,e.usedBytes!=t)if(0==t)e.contents=null,e.usedBytes=0;else{var s=e.contents;e.contents=new Uint8Array(t),s&&e.contents.set(s.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=ye.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,ye.isDir(e.mode)?t.size=4096:ye.isFile(e.mode)?t.size=e.usedBytes:ye.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&ge.resizeFileStorage(e,t.size)},lookup:function(e,t){throw ye.genericErrors[44]},mknod:function(e,t,s,i){return ge.createNode(e,t,s,i)},rename:function(e,t,s){if(ye.isDir(e.mode)){var i;try{i=ye.lookupNode(t,s)}catch(e){}if(i)for(var r in i.contents)throw new ye.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=s,t.contents[s]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir:function(e,t){var s=ye.lookupNode(e,t);for(var i in s.contents)throw new ye.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir:function(e){var t=[".",".."];for(var s in e.contents)e.contents.hasOwnProperty(s)&&t.push(s);return t},symlink:function(e,t,s){var i=ge.createNode(e,t,41471,0);return i.link=s,i},readlink:function(e){if(!ye.isLink(e.mode))throw new ye.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,s,i,r){var o=e.node.contents;if(r>=e.node.usedBytes)return 0;var n=Math.min(e.node.usedBytes-r,i);if(n>8&&o.subarray)t.set(o.subarray(r,r+n),s);else for(var a=0;a<n;a++)t[s+a]=o[r+a];return n},write:function(e,s,i,r,o,n){if(s.buffer===t().buffer&&(n=!1),!r)return 0;var a=e.node;if(a.timestamp=Date.now(),s.subarray&&(!a.contents||a.contents.subarray)){if(n)return a.contents=s.subarray(i,i+r),a.usedBytes=r,r;if(0===a.usedBytes&&0===o)return a.contents=s.slice(i,i+r),a.usedBytes=r,r;if(o+r<=a.usedBytes)return a.contents.set(s.subarray(i,i+r),o),r}if(ge.expandFileStorage(a,o+r),a.contents.subarray&&s.subarray)a.contents.set(s.subarray(i,i+r),o);else for(var l=0;l<r;l++)a.contents[o+l]=s[i+l];return a.usedBytes=Math.max(a.usedBytes,o+r),r},llseek:function(e,t,s){var i=t;if(1===s?i+=e.position:2===s&&ye.isFile(e.node.mode)&&(i+=e.node.usedBytes),i<0)throw new ye.ErrnoError(28);return i},allocate:function(e,t,s){ge.expandFileStorage(e.node,t+s),e.node.usedBytes=Math.max(e.node.usedBytes,t+s)},mmap:function(e,s,i,r,o){if(!ye.isFile(e.node.mode))throw new ye.ErrnoError(43);var n,a,l=e.node.contents;if(2&o||l.buffer!==t().buffer){if((i>0||i+s<l.length)&&(l=l.subarray?l.subarray(i,i+s):Array.prototype.slice.call(l,i,i+s)),a=!0,!(n=me()))throw new ye.ErrnoError(48);n>>>=0,t().set(l,n>>>0)}else a=!1,n=l.byteOffset;return{ptr:n,allocated:a}},msync:function(e,t,s,i,r){return ge.stream_ops.write(e,t,0,i,s,!1),0}}},ye={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(e,t={})=>{if(!(e=pe.resolve(e)))return{path:"",node:null};if((t=Object.assign({follow_mount:!0,recurse_count:0},t)).recurse_count>8)throw new ye.ErrnoError(32);for(var s=e.split("/").filter((e=>!!e)),i=ye.root,r="/",o=0;o<s.length;o++){var n=o===s.length-1;if(n&&t.parent)break;if(i=ye.lookupNode(i,s[o]),r=Ae.join2(r,s[o]),ye.isMountpoint(i)&&(!n||n&&t.follow_mount)&&(i=i.mounted.root),!n||t.follow)for(var a=0;ye.isLink(i.mode);){var l=ye.readlink(r);if(r=pe.resolve(Ae.dirname(r),l),i=ye.lookupPath(r,{recurse_count:t.recurse_count+1}).node,a++>40)throw new ye.ErrnoError(32)}}return{path:r,node:i}},getPath:e=>{for(var t;;){if(ye.isRoot(e)){var s=e.mount.mountpoint;return t?"/"!==s[s.length-1]?s+"/"+t:s+t:s}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:(e,t)=>{for(var s=0,i=0;i<t.length;i++)s=(s<<5)-s+t.charCodeAt(i)|0;return(e+s>>>0)%ye.nameTable.length},hashAddNode:e=>{var t=ye.hashName(e.parent.id,e.name);e.name_next=ye.nameTable[t],ye.nameTable[t]=e},hashRemoveNode:e=>{var t=ye.hashName(e.parent.id,e.name);if(ye.nameTable[t]===e)ye.nameTable[t]=e.name_next;else for(var s=ye.nameTable[t];s;){if(s.name_next===e){s.name_next=e.name_next;break}s=s.name_next}},lookupNode:(e,t)=>{var s=ye.mayLookup(e);if(s)throw new ye.ErrnoError(s,e);for(var i=ye.hashName(e.id,t),r=ye.nameTable[i];r;r=r.name_next){var o=r.name;if(r.parent.id===e.id&&o===t)return r}return ye.lookup(e,t)},createNode:(e,t,s,i)=>{var r=new ye.FSNode(e,t,s,i);return ye.hashAddNode(r),r},destroyNode:e=>{ye.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>32768==(61440&e),isDir:e=>16384==(61440&e),isLink:e=>40960==(61440&e),isChrdev:e=>8192==(61440&e),isBlkdev:e=>24576==(61440&e),isFIFO:e=>4096==(61440&e),isSocket:e=>49152==(49152&e),flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:e=>{var t=ye.flagModes[e];if(void 0===t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:e=>{var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:(e,t)=>ye.ignorePermissions||(!t.includes("r")||292&e.mode)&&(!t.includes("w")||146&e.mode)&&(!t.includes("x")||73&e.mode)?0:2,mayLookup:e=>{var t=ye.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate:(e,t)=>{try{return ye.lookupNode(e,t),20}catch(e){}return ye.nodePermissions(e,"wx")},mayDelete:(e,t,s)=>{var i;try{i=ye.lookupNode(e,t)}catch(e){return e.errno}var r=ye.nodePermissions(e,"wx");if(r)return r;if(s){if(!ye.isDir(i.mode))return 54;if(ye.isRoot(i)||ye.getPath(i)===ye.cwd())return 10}else if(ye.isDir(i.mode))return 31;return 0},mayOpen:(e,t)=>e?ye.isLink(e.mode)?32:ye.isDir(e.mode)&&("r"!==ye.flagsToPermissionString(t)||512&t)?31:ye.nodePermissions(e,ye.flagsToPermissionString(t)):44,MAX_OPEN_FDS:4096,nextfd:(e=0,t=ye.MAX_OPEN_FDS)=>{for(var s=e;s<=t;s++)if(!ye.streams[s])return s;throw new ye.ErrnoError(33)},getStream:e=>ye.streams[e],createStream:(e,t,s)=>{ye.FSStream||(ye.FSStream=function(){this.shared={}},ye.FSStream.prototype={},Object.defineProperties(ye.FSStream.prototype,{object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}},flags:{get:function(){return this.shared.flags},set:function(e){this.shared.flags=e}},position:{get:function(){return this.shared.position},set:function(e){this.shared.position=e}}})),e=Object.assign(new ye.FSStream,e);var i=ye.nextfd(t,s);return e.fd=i,ye.streams[i]=e,e},closeStream:e=>{ye.streams[e]=null},chrdev_stream_ops:{open:e=>{var t=ye.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:()=>{throw new ye.ErrnoError(70)}},major:e=>e>>8,minor:e=>255&e,makedev:(e,t)=>e<<8|t,registerDevice:(e,t)=>{ye.devices[e]={stream_ops:t}},getDevice:e=>ye.devices[e],getMounts:e=>{for(var t=[],s=[e];s.length;){var i=s.pop();t.push(i),s.push.apply(s,i.mounts)}return t},syncfs:(e,t)=>{"function"==typeof e&&(t=e,e=!1),ye.syncFSRequests++,ye.syncFSRequests>1&&b("warning: "+ye.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var s=ye.getMounts(ye.root.mount),i=0;function r(e){return ye.syncFSRequests--,t(e)}function o(e){if(e)return o.errored?void 0:(o.errored=!0,r(e));++i>=s.length&&r(null)}s.forEach((t=>{if(!t.type.syncfs)return o(null);t.type.syncfs(t,e,o)}))},mount:(e,t,s)=>{var i,r="/"===s,o=!s;if(r&&ye.root)throw new ye.ErrnoError(10);if(!r&&!o){var n=ye.lookupPath(s,{follow_mount:!1});if(s=n.path,i=n.node,ye.isMountpoint(i))throw new ye.ErrnoError(10);if(!ye.isDir(i.mode))throw new ye.ErrnoError(54)}var a={type:e,opts:t,mountpoint:s,mounts:[]},l=e.mount(a);return l.mount=a,a.root=l,r?ye.root=l:i&&(i.mounted=a,i.mount&&i.mount.mounts.push(a)),l},unmount:e=>{var t=ye.lookupPath(e,{follow_mount:!1});if(!ye.isMountpoint(t.node))throw new ye.ErrnoError(28);var s=t.node,i=s.mounted,r=ye.getMounts(i);Object.keys(ye.nameTable).forEach((e=>{for(var t=ye.nameTable[e];t;){var s=t.name_next;r.includes(t.mount)&&ye.destroyNode(t),t=s}})),s.mounted=null;var o=s.mount.mounts.indexOf(i);s.mount.mounts.splice(o,1)},lookup:(e,t)=>e.node_ops.lookup(e,t),mknod:(e,t,s)=>{var i=ye.lookupPath(e,{parent:!0}).node,r=Ae.basename(e);if(!r||"."===r||".."===r)throw new ye.ErrnoError(28);var o=ye.mayCreate(i,r);if(o)throw new ye.ErrnoError(o);if(!i.node_ops.mknod)throw new ye.ErrnoError(63);return i.node_ops.mknod(i,r,t,s)},create:(e,t)=>(t=void 0!==t?t:438,t&=4095,t|=32768,ye.mknod(e,t,0)),mkdir:(e,t)=>(t=void 0!==t?t:511,t&=1023,t|=16384,ye.mknod(e,t,0)),mkdirTree:(e,t)=>{for(var s=e.split("/"),i="",r=0;r<s.length;++r)if(s[r]){i+="/"+s[r];try{ye.mkdir(i,t)}catch(e){if(20!=e.errno)throw e}}},mkdev:(e,t,s)=>(void 0===s&&(s=t,t=438),t|=8192,ye.mknod(e,t,s)),symlink:(e,t)=>{if(!pe.resolve(e))throw new ye.ErrnoError(44);var s=ye.lookupPath(t,{parent:!0}).node;if(!s)throw new ye.ErrnoError(44);var i=Ae.basename(t),r=ye.mayCreate(s,i);if(r)throw new ye.ErrnoError(r);if(!s.node_ops.symlink)throw new ye.ErrnoError(63);return s.node_ops.symlink(s,i,e)},rename:(e,t)=>{var s,i,r=Ae.dirname(e),o=Ae.dirname(t),n=Ae.basename(e),a=Ae.basename(t);if(s=ye.lookupPath(e,{parent:!0}).node,i=ye.lookupPath(t,{parent:!0}).node,!s||!i)throw new ye.ErrnoError(44);if(s.mount!==i.mount)throw new ye.ErrnoError(75);var l,h=ye.lookupNode(s,n),c=pe.relative(e,o);if("."!==c.charAt(0))throw new ye.ErrnoError(28);if("."!==(c=pe.relative(t,r)).charAt(0))throw new ye.ErrnoError(55);try{l=ye.lookupNode(i,a)}catch(e){}if(h!==l){var u=ye.isDir(h.mode),A=ye.mayDelete(s,n,u);if(A)throw new ye.ErrnoError(A);if(A=l?ye.mayDelete(i,a,u):ye.mayCreate(i,a))throw new ye.ErrnoError(A);if(!s.node_ops.rename)throw new ye.ErrnoError(63);if(ye.isMountpoint(h)||l&&ye.isMountpoint(l))throw new ye.ErrnoError(10);if(i!==s&&(A=ye.nodePermissions(s,"w")))throw new ye.ErrnoError(A);ye.hashRemoveNode(h);try{s.node_ops.rename(h,i,a)}catch(e){throw e}finally{ye.hashAddNode(h)}}},rmdir:e=>{var t=ye.lookupPath(e,{parent:!0}).node,s=Ae.basename(e),i=ye.lookupNode(t,s),r=ye.mayDelete(t,s,!0);if(r)throw new ye.ErrnoError(r);if(!t.node_ops.rmdir)throw new ye.ErrnoError(63);if(ye.isMountpoint(i))throw new ye.ErrnoError(10);t.node_ops.rmdir(t,s),ye.destroyNode(i)},readdir:e=>{var t=ye.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new ye.ErrnoError(54);return t.node_ops.readdir(t)},unlink:e=>{var t=ye.lookupPath(e,{parent:!0}).node;if(!t)throw new ye.ErrnoError(44);var s=Ae.basename(e),i=ye.lookupNode(t,s),r=ye.mayDelete(t,s,!1);if(r)throw new ye.ErrnoError(r);if(!t.node_ops.unlink)throw new ye.ErrnoError(63);if(ye.isMountpoint(i))throw new ye.ErrnoError(10);t.node_ops.unlink(t,s),ye.destroyNode(i)},readlink:e=>{var t=ye.lookupPath(e).node;if(!t)throw new ye.ErrnoError(44);if(!t.node_ops.readlink)throw new ye.ErrnoError(28);return pe.resolve(ye.getPath(t.parent),t.node_ops.readlink(t))},stat:(e,t)=>{var s=ye.lookupPath(e,{follow:!t}).node;if(!s)throw new ye.ErrnoError(44);if(!s.node_ops.getattr)throw new ye.ErrnoError(63);return s.node_ops.getattr(s)},lstat:e=>ye.stat(e,!0),chmod:(e,t,s)=>{var i;if(!(i="string"==typeof e?ye.lookupPath(e,{follow:!s}).node:e).node_ops.setattr)throw new ye.ErrnoError(63);i.node_ops.setattr(i,{mode:4095&t|-4096&i.mode,timestamp:Date.now()})},lchmod:(e,t)=>{ye.chmod(e,t,!0)},fchmod:(e,t)=>{var s=ye.getStream(e);if(!s)throw new ye.ErrnoError(8);ye.chmod(s.node,t)},chown:(e,t,s,i)=>{var r;if(!(r="string"==typeof e?ye.lookupPath(e,{follow:!i}).node:e).node_ops.setattr)throw new ye.ErrnoError(63);r.node_ops.setattr(r,{timestamp:Date.now()})},lchown:(e,t,s)=>{ye.chown(e,t,s,!0)},fchown:(e,t,s)=>{var i=ye.getStream(e);if(!i)throw new ye.ErrnoError(8);ye.chown(i.node,t,s)},truncate:(e,t)=>{if(t<0)throw new ye.ErrnoError(28);var s;if(!(s="string"==typeof e?ye.lookupPath(e,{follow:!0}).node:e).node_ops.setattr)throw new ye.ErrnoError(63);if(ye.isDir(s.mode))throw new ye.ErrnoError(31);if(!ye.isFile(s.mode))throw new ye.ErrnoError(28);var i=ye.nodePermissions(s,"w");if(i)throw new ye.ErrnoError(i);s.node_ops.setattr(s,{size:t,timestamp:Date.now()})},ftruncate:(e,t)=>{var s=ye.getStream(e);if(!s)throw new ye.ErrnoError(8);if(0==(2097155&s.flags))throw new ye.ErrnoError(28);ye.truncate(s.node,t)},utime:(e,t,s)=>{var i=ye.lookupPath(e,{follow:!0}).node;i.node_ops.setattr(i,{timestamp:Math.max(t,s)})},open:(e,t,s)=>{if(""===e)throw new ye.ErrnoError(44);var i;if(s=void 0===s?438:s,s=64&(t="string"==typeof t?ye.modeStringToFlags(t):t)?4095&s|32768:0,"object"==typeof e)i=e;else{e=Ae.normalize(e);try{i=ye.lookupPath(e,{follow:!(131072&t)}).node}catch(e){}}var r=!1;if(64&t)if(i){if(128&t)throw new ye.ErrnoError(20)}else i=ye.mknod(e,s,0),r=!0;if(!i)throw new ye.ErrnoError(44);if(ye.isChrdev(i.mode)&&(t&=-513),65536&t&&!ye.isDir(i.mode))throw new ye.ErrnoError(54);if(!r){var o=ye.mayOpen(i,t);if(o)throw new ye.ErrnoError(o)}512&t&&!r&&ye.truncate(i,0),t&=-131713;var n=ye.createStream({node:i,path:ye.getPath(i),flags:t,seekable:!0,position:0,stream_ops:i.stream_ops,ungotten:[],error:!1});return n.stream_ops.open&&n.stream_ops.open(n),!u.logReadFiles||1&t||(ye.readFiles||(ye.readFiles={}),e in ye.readFiles||(ye.readFiles[e]=1)),n},close:e=>{if(ye.isClosed(e))throw new ye.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{ye.closeStream(e.fd)}e.fd=null},isClosed:e=>null===e.fd,llseek:(e,t,s)=>{if(ye.isClosed(e))throw new ye.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new ye.ErrnoError(70);if(0!=s&&1!=s&&2!=s)throw new ye.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,s),e.ungotten=[],e.position},read:(e,t,s,i,r)=>{if(s>>>=0,i<0||r<0)throw new ye.ErrnoError(28);if(ye.isClosed(e))throw new ye.ErrnoError(8);if(1==(2097155&e.flags))throw new ye.ErrnoError(8);if(ye.isDir(e.node.mode))throw new ye.ErrnoError(31);if(!e.stream_ops.read)throw new ye.ErrnoError(28);var o=void 0!==r;if(o){if(!e.seekable)throw new ye.ErrnoError(70)}else r=e.position;var n=e.stream_ops.read(e,t,s,i,r);return o||(e.position+=n),n},write:(e,t,s,i,r,o)=>{if(s>>>=0,i<0||r<0)throw new ye.ErrnoError(28);if(ye.isClosed(e))throw new ye.ErrnoError(8);if(0==(2097155&e.flags))throw new ye.ErrnoError(8);if(ye.isDir(e.node.mode))throw new ye.ErrnoError(31);if(!e.stream_ops.write)throw new ye.ErrnoError(28);e.seekable&&1024&e.flags&&ye.llseek(e,0,2);var n=void 0!==r;if(n){if(!e.seekable)throw new ye.ErrnoError(70)}else r=e.position;var a=e.stream_ops.write(e,t,s,i,r,o);return n||(e.position+=a),a},allocate:(e,t,s)=>{if(ye.isClosed(e))throw new ye.ErrnoError(8);if(t<0||s<=0)throw new ye.ErrnoError(28);if(0==(2097155&e.flags))throw new ye.ErrnoError(8);if(!ye.isFile(e.node.mode)&&!ye.isDir(e.node.mode))throw new ye.ErrnoError(43);if(!e.stream_ops.allocate)throw new ye.ErrnoError(138);e.stream_ops.allocate(e,t,s)},mmap:(e,t,s,i,r)=>{if(0!=(2&i)&&0==(2&r)&&2!=(2097155&e.flags))throw new ye.ErrnoError(2);if(1==(2097155&e.flags))throw new ye.ErrnoError(2);if(!e.stream_ops.mmap)throw new ye.ErrnoError(43);return e.stream_ops.mmap(e,t,s,i,r)},msync:(e,t,s,i,r)=>(s>>>=0,e.stream_ops.msync?e.stream_ops.msync(e,t,s,i,r):0),munmap:e=>0,ioctl:(e,t,s)=>{if(!e.stream_ops.ioctl)throw new ye.ErrnoError(59);return e.stream_ops.ioctl(e,t,s)},readFile:(e,t={})=>{if(t.flags=t.flags||0,t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var s,i=ye.open(e,t.flags),r=ye.stat(e).size,o=new Uint8Array(r);return ye.read(i,o,0,r,0),"utf8"===t.encoding?s=k(o,0):"binary"===t.encoding&&(s=o),ye.close(i),s},writeFile:(e,t,s={})=>{s.flags=s.flags||577;var i=ye.open(e,s.flags,s.mode);if("string"==typeof t){var r=new Uint8Array(W(t)+1),o=Q(t,r,0,r.length);ye.write(i,r,0,o,void 0,s.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");ye.write(i,t,0,t.byteLength,void 0,s.canOwn)}ye.close(i)},cwd:()=>ye.currentPath,chdir:e=>{var t=ye.lookupPath(e,{follow:!0});if(null===t.node)throw new ye.ErrnoError(44);if(!ye.isDir(t.node.mode))throw new ye.ErrnoError(54);var s=ye.nodePermissions(t.node,"x");if(s)throw new ye.ErrnoError(s);ye.currentPath=t.path},createDefaultDirectories:()=>{ye.mkdir("/tmp"),ye.mkdir("/home"),ye.mkdir("/home/web_user")},createDefaultDevices:()=>{ye.mkdir("/dev"),ye.registerDevice(ye.makedev(1,3),{read:()=>0,write:(e,t,s,i,r)=>i}),ye.mkdev("/dev/null",ye.makedev(1,3)),fe.register(ye.makedev(5,0),fe.default_tty_ops),fe.register(ye.makedev(6,0),fe.default_tty1_ops),ye.mkdev("/dev/tty",ye.makedev(5,0)),ye.mkdev("/dev/tty1",ye.makedev(6,0));var e=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return()=>(crypto.getRandomValues(e),e[0])}return()=>ae("randomDevice")}();ye.createDevice("/dev","random",e),ye.createDevice("/dev","urandom",e),ye.mkdir("/dev/shm"),ye.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{ye.mkdir("/proc");var e=ye.mkdir("/proc/self");ye.mkdir("/proc/self/fd"),ye.mount({mount:()=>{var t=ye.createNode(e,"fd",16895,73);return t.node_ops={lookup:(e,t)=>{var s=+t,i=ye.getStream(s);if(!i)throw new ye.ErrnoError(8);var r={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>i.path}};return r.parent=r,r}},t}},{},"/proc/self/fd")},createStandardStreams:()=>{u.stdin?ye.createDevice("/dev","stdin",u.stdin):ye.symlink("/dev/tty","/dev/stdin"),u.stdout?ye.createDevice("/dev","stdout",null,u.stdout):ye.symlink("/dev/tty","/dev/stdout"),u.stderr?ye.createDevice("/dev","stderr",null,u.stderr):ye.symlink("/dev/tty1","/dev/stderr"),ye.open("/dev/stdin",0),ye.open("/dev/stdout",1),ye.open("/dev/stderr",1)},ensureErrnoError:()=>{ye.ErrnoError||(ye.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){this.errno=e},this.setErrno(e),this.message="FS error"},ye.ErrnoError.prototype=new Error,ye.ErrnoError.prototype.constructor=ye.ErrnoError,[44].forEach((e=>{ye.genericErrors[e]=new ye.ErrnoError(e),ye.genericErrors[e].stack="<generic error, no stack>"})))},staticInit:()=>{ye.ensureErrnoError(),ye.nameTable=new Array(4096),ye.mount(ge,{},"/"),ye.createDefaultDirectories(),ye.createDefaultDevices(),ye.createSpecialDirectories(),ye.filesystems={MEMFS:ge}},init:(e,t,s)=>{ye.init.initialized=!0,ye.ensureErrnoError(),u.stdin=e||u.stdin,u.stdout=t||u.stdout,u.stderr=s||u.stderr,ye.createStandardStreams()},quit:()=>{ye.init.initialized=!1;for(var e=0;e<ye.streams.length;e++){var t=ye.streams[e];t&&ye.close(t)}},getMode:(e,t)=>{var s=0;return e&&(s|=365),t&&(s|=146),s},findObject:(e,t)=>{var s=ye.analyzePath(e,t);return s.exists?s.object:null},analyzePath:(e,t)=>{try{e=(i=ye.lookupPath(e,{follow:!t})).path}catch(e){}var s={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var i=ye.lookupPath(e,{parent:!0});s.parentExists=!0,s.parentPath=i.path,s.parentObject=i.node,s.name=Ae.basename(e),i=ye.lookupPath(e,{follow:!t}),s.exists=!0,s.path=i.path,s.object=i.node,s.name=i.node.name,s.isRoot="/"===i.path}catch(e){s.error=e.errno}return s},createPath:(e,t,s,i)=>{e="string"==typeof e?e:ye.getPath(e);for(var r=t.split("/").reverse();r.length;){var o=r.pop();if(o){var n=Ae.join2(e,o);try{ye.mkdir(n)}catch(e){}e=n}}return n},createFile:(e,t,s,i,r)=>{var o=Ae.join2("string"==typeof e?e:ye.getPath(e),t),n=ye.getMode(i,r);return ye.create(o,n)},createDataFile:(e,t,s,i,r,o)=>{var n=t;e&&(e="string"==typeof e?e:ye.getPath(e),n=t?Ae.join2(e,t):e);var a=ye.getMode(i,r),l=ye.create(n,a);if(s){if("string"==typeof s){for(var h=new Array(s.length),c=0,u=s.length;c<u;++c)h[c]=s.charCodeAt(c);s=h}ye.chmod(l,146|a);var A=ye.open(l,577);ye.write(A,s,0,s.length,0,o),ye.close(A),ye.chmod(l,a)}return l},createDevice:(e,t,s,i)=>{var r=Ae.join2("string"==typeof e?e:ye.getPath(e),t),o=ye.getMode(!!s,!!i);ye.createDevice.major||(ye.createDevice.major=64);var n=ye.makedev(ye.createDevice.major++,0);return ye.registerDevice(n,{open:e=>{e.seekable=!1},close:e=>{i&&i.buffer&&i.buffer.length&&i(10)},read:(e,t,i,r,o)=>{for(var n=0,a=0;a<r;a++){var l;try{l=s()}catch(e){throw new ye.ErrnoError(29)}if(void 0===l&&0===n)throw new ye.ErrnoError(6);if(null==l)break;n++,t[i+a]=l}return n&&(e.node.timestamp=Date.now()),n},write:(e,t,s,r,o)=>{for(var n=0;n<r;n++)try{i(t[s+n])}catch(e){throw new ye.ErrnoError(29)}return r&&(e.node.timestamp=Date.now()),n}}),ye.mkdev(r,o,n)},forceLoadFile:e=>{if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!A)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=de(A(e.url),!0),e.usedBytes=e.contents.length}catch(e){throw new ye.ErrnoError(29)}},createLazyFile:(e,s,i,r,o)=>{function n(){this.lengthKnown=!1,this.chunks=[]}if(n.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,s=e/this.chunkSize|0;return this.getter(s)[t]}},n.prototype.setDataGetter=function(e){this.getter=e},n.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",i,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+i+". Status: "+e.status);var t,s=Number(e.getResponseHeader("Content-length")),r=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,o=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,n=1048576;r||(n=s);var a=this;a.setDataGetter((e=>{var t=e*n,r=(e+1)*n-1;if(r=Math.min(r,s-1),void 0===a.chunks[e]&&(a.chunks[e]=((e,t)=>{if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>s-1)throw new Error("only "+s+" bytes available! programmer error!");var r=new XMLHttpRequest;if(r.open("GET",i,!1),s!==n&&r.setRequestHeader("Range","bytes="+e+"-"+t),r.responseType="arraybuffer",r.overrideMimeType&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.send(null),!(r.status>=200&&r.status<300||304===r.status))throw new Error("Couldn't load "+i+". Status: "+r.status);return void 0!==r.response?new Uint8Array(r.response||[]):de(r.responseText||"",!0)})(t,r)),void 0===a.chunks[e])throw new Error("doXHR failed!");return a.chunks[e]})),!o&&s||(n=s=1,s=this.getter(0).length,n=s,D("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=s,this._chunkSize=n,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest){if(!E)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var a=new n;Object.defineProperties(a,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var l={isDevice:!1,contents:a}}else l={isDevice:!1,url:i};var h=ye.createFile(e,s,l,r,o);l.contents?h.contents=l.contents:l.url&&(h.contents=null,h.url=l.url),Object.defineProperties(h,{usedBytes:{get:function(){return this.contents.length}}});var c={};function u(e,t,s,i,r){var o=e.node.contents;if(r>=o.length)return 0;var n=Math.min(o.length-r,i);if(o.slice)for(var a=0;a<n;a++)t[s+a]=o[r+a];else for(a=0;a<n;a++)t[s+a]=o.get(r+a);return n}return Object.keys(h.stream_ops).forEach((e=>{var t=h.stream_ops[e];c[e]=function(){return ye.forceLoadFile(h),t.apply(null,arguments)}})),c.read=(e,t,s,i,r)=>(ye.forceLoadFile(h),u(e,t,s,i,r)),c.mmap=(e,s,i,r,o)=>{ye.forceLoadFile(h);var n=me();if(!n)throw new ye.ErrnoError(48);return u(e,t(),n,s,i),{ptr:n,allocated:!0}},h.stream_ops=c,h},createPreloadedFile:(e,t,s,i,r,o,n,a,l,h)=>{var c=t?pe.resolve(Ae.join2(e,t)):e;function u(s){function u(s){h&&h(),a||ye.createDataFile(e,t,s,i,r,l),o&&o(),ne()}Browser.handledByPreloadPlugin(s,c,u,(()=>{n&&n(),ne()}))||u(s)}oe(),"string"==typeof s?function(e,t,s,i){var r=i?"":"al "+e;p(e,(s=>{S(s,'Loading data file "'+e+'" failed (no arrayBuffer).'),t(new Uint8Array(s)),r&&ne()}),(t=>{if(!s)throw'Loading data file "'+e+'" failed.';s()})),r&&oe()}(s,(e=>u(e)),n):u(s)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(e,t=(()=>{}),s=(()=>{}))=>{var i=ye.indexedDB();try{var r=i.open(ye.DB_NAME(),ye.DB_VERSION)}catch(e){return s(e)}r.onupgradeneeded=()=>{D("creating db"),r.result.createObjectStore(ye.DB_STORE_NAME)},r.onsuccess=()=>{var i=r.result.transaction([ye.DB_STORE_NAME],"readwrite"),o=i.objectStore(ye.DB_STORE_NAME),n=0,a=0,l=e.length;function h(){0==a?t():s()}e.forEach((e=>{var t=o.put(ye.analyzePath(e).object.contents,e);t.onsuccess=()=>{++n+a==l&&h()},t.onerror=()=>{a++,n+a==l&&h()}})),i.onerror=s},r.onerror=s},loadFilesFromDB:(e,t=(()=>{}),s=(()=>{}))=>{var i=ye.indexedDB();try{var r=i.open(ye.DB_NAME(),ye.DB_VERSION)}catch(e){return s(e)}r.onupgradeneeded=s,r.onsuccess=()=>{var i=r.result;try{var o=i.transaction([ye.DB_STORE_NAME],"readonly")}catch(e){return void s(e)}var n=o.objectStore(ye.DB_STORE_NAME),a=0,l=0,h=e.length;function c(){0==l?t():s()}e.forEach((e=>{var t=n.get(e);t.onsuccess=()=>{ye.analyzePath(e).exists&&ye.unlink(e),ye.createDataFile(Ae.dirname(e),Ae.basename(e),t.result,!0,!0,!0),++a+l==h&&c()},t.onerror=()=>{l++,a+l==h&&c()}})),o.onerror=s},r.onerror=s}},Ee={DEFAULT_POLLMASK:5,calculateAt:function(e,t,s){if(Ae.isAbs(t))return t;var i;if(i=-100===e?ye.cwd():Ee.getStreamFromFD(e).path,0==t.length){if(!s)throw new ye.ErrnoError(44);return i}return Ae.join2(i,t)},doStat:function(e,t,s){try{var i=e(t)}catch(e){if(e&&e.node&&Ae.normalize(t)!==Ae.normalize(ye.getPath(e.node)))return-54;throw e}n()[s>>>2]=i.dev,n()[s+8>>>2]=i.ino,n()[s+12>>>2]=i.mode,a()[s+16>>>2]=i.nlink,n()[s+20>>>2]=i.uid,n()[s+24>>>2]=i.gid,n()[s+28>>>2]=i.rdev,se=[i.size>>>0,(te=i.size,+Math.abs(te)>=1?te>0?(0|Math.min(+Math.floor(te/4294967296),4294967295))>>>0:~~+Math.ceil((te-+(~~te>>>0))/4294967296)>>>0:0)],n()[s+40>>>2]=se[0],n()[s+44>>>2]=se[1],n()[s+48>>>2]=4096,n()[s+52>>>2]=i.blocks;var r=i.atime.getTime(),o=i.mtime.getTime(),l=i.ctime.getTime();return se=[Math.floor(r/1e3)>>>0,(te=Math.floor(r/1e3),+Math.abs(te)>=1?te>0?(0|Math.min(+Math.floor(te/4294967296),4294967295))>>>0:~~+Math.ceil((te-+(~~te>>>0))/4294967296)>>>0:0)],n()[s+56>>>2]=se[0],n()[s+60>>>2]=se[1],a()[s+64>>>2]=r%1e3*1e3,se=[Math.floor(o/1e3)>>>0,(te=Math.floor(o/1e3),+Math.abs(te)>=1?te>0?(0|Math.min(+Math.floor(te/4294967296),4294967295))>>>0:~~+Math.ceil((te-+(~~te>>>0))/4294967296)>>>0:0)],n()[s+72>>>2]=se[0],n()[s+76>>>2]=se[1],a()[s+80>>>2]=o%1e3*1e3,se=[Math.floor(l/1e3)>>>0,(te=Math.floor(l/1e3),+Math.abs(te)>=1?te>0?(0|Math.min(+Math.floor(te/4294967296),4294967295))>>>0:~~+Math.ceil((te-+(~~te>>>0))/4294967296)>>>0:0)],n()[s+88>>>2]=se[0],n()[s+92>>>2]=se[1],a()[s+96>>>2]=l%1e3*1e3,se=[i.ino>>>0,(te=i.ino,+Math.abs(te)>=1?te>0?(0|Math.min(+Math.floor(te/4294967296),4294967295))>>>0:~~+Math.ceil((te-+(~~te>>>0))/4294967296)>>>0:0)],n()[s+104>>>2]=se[0],n()[s+108>>>2]=se[1],0},doMsync:function(e,t,s,r,o){if(!ye.isFile(t.node.mode))throw new ye.ErrnoError(43);if(2&r)return 0;e>>>=0;var n=i().slice(e,e+s);ye.msync(t,n,o,s,r)},varargs:void 0,get:function(){return Ee.varargs+=4,n()[Ee.varargs-4>>>2]},getStr:function(e){return j(e)},getStreamFromFD:function(e){var t=ye.getStream(e);if(!t)throw new ye.ErrnoError(8);return t}};function ve(e){if(_)return ls(1,1,e);N=e,J()||(Ie.terminateAllThreads(),u.onExit&&u.onExit(e),O=!0),g(e,new ce(e))}var _e=function(e,t){if(N=e,!t&&_)throw Pe(e),"unwind";ve(e)},Ie={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init:function(){_?Ie.initWorker():Ie.initMainThread()},initMainThread:function(){for(var e=navigator.hardwareConcurrency;e--;)Ie.allocateUnusedWorker()},initWorker:function(){x=!1},setExitStatus:function(e){N=e},terminateAllThreads:function(){for(var e of Object.values(Ie.pthreads))Ie.returnWorkerToPool(e);for(var e of Ie.unusedWorkers)e.terminate();Ie.unusedWorkers=[]},returnWorkerToPool:function(e){var t=e.pthread_ptr;delete Ie.pthreads[t],Ie.unusedWorkers.push(e),Ie.runningWorkers.splice(Ie.runningWorkers.indexOf(e),1),e.pthread_ptr=0,Bs(t)},receiveObjectTransfer:function(e){},threadInitTLS:function(){Ie.tlsInitFunctions.forEach((e=>e()))},loadWasmModuleToWorker:e=>new Promise((t=>{e.onmessage=s=>{var i,r=s.data,o=r.cmd;if(e.pthread_ptr&&(Ie.currentProxiedOperationCallerThread=e.pthread_ptr),r.targetThread&&r.targetThread!=xs()){var n=Ie.pthreads[r.targetThread];return n?n.postMessage(r,r.transferList):b('Internal error! Worker sent a message "'+o+'" to target pthread '+r.targetThread+", but that thread no longer exists!"),void(Ie.currentProxiedOperationCallerThread=void 0)}"processProxyingQueue"===o?ts(r.queue):"spawnThread"===o?function(e){var t=Ie.getNewWorker();if(!t)return 6;Ie.runningWorkers.push(t),Ie.pthreads[e.pthread_ptr]=t,t.pthread_ptr=e.pthread_ptr;var s={cmd:"run",start_routine:e.startRoutine,arg:e.arg,pthread_ptr:e.pthread_ptr};t.postMessage(s,e.transferList)}(r):"cleanupThread"===o?ue(r.thread):"killThread"===o?function(e){var t=Ie.pthreads[e];delete Ie.pthreads[e],t.terminate(),Bs(e),Ie.runningWorkers.splice(Ie.runningWorkers.indexOf(t),1),t.pthread_ptr=0}(r.thread):"cancelThread"===o?(i=r.thread,Ie.pthreads[i].postMessage({cmd:"cancel"})):"loaded"===o?(e.loaded=!0,t(e)):"print"===o?D("Thread "+r.threadId+": "+r.text):"printErr"===o?b("Thread "+r.threadId+": "+r.text):"alert"===o?alert("Thread "+r.threadId+": "+r.text):"setimmediate"===r.target?e.postMessage(r):"callHandler"===o?u[r.handler](...r.args):o&&b("worker sent an unknown command "+o),Ie.currentProxiedOperationCallerThread=void 0},e.onerror=e=>{throw b("worker sent an error! "+e.filename+":"+e.lineno+": "+e.message),e};var i=[];for(var r of["onExit","onAbort","print","printErr"])u.hasOwnProperty(r)&&i.push(r);e.postMessage({cmd:"load",handlers:i,urlOrBlob:u.mainScriptUrlOrBlob||s,wasmMemory:R,wasmModule:C})})),loadWasmModuleToAllWorkers:function(e){if(_)return e();Promise.all(Ie.unusedWorkers.map(Ie.loadWasmModuleToWorker)).then(e)},allocateUnusedWorker:function(){var e,t=T("web-ifc-mt.worker.js");e=new Worker(t),Ie.unusedWorkers.push(e)},getNewWorker:function(){return 0==Ie.unusedWorkers.length&&(Ie.allocateUnusedWorker(),Ie.loadWasmModuleToWorker(Ie.unusedWorkers[0])),Ie.unusedWorkers.pop()}};function Te(e){for(;e.length>0;)e.shift()(u)}function Pe(e){if(_)return ls(2,0,e);try{_e(e)}catch(e){!function(e){if(e instanceof ce||"unwind"==e)return N;g(1,e)}(e)}}u.PThread=Ie,u.establishStackSpace=function(){var e=xs(),t=n()[e+52>>>2],s=n()[e+56>>>2];Us(t,t-s),Gs(t)};var De=[];function be(e){var t=De[e];return t||(e>=De.length&&(De.length=e+1),De[e]=t=K.get(e)),t}function Re(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(e){a()[this.ptr+4>>>2]=e},this.get_type=function(){return a()[this.ptr+4>>>2]},this.set_destructor=function(e){a()[this.ptr+8>>>2]=e},this.get_destructor=function(){return a()[this.ptr+8>>>2]},this.set_refcount=function(e){n()[this.ptr>>>2]=e},this.set_caught=function(e){e=e?1:0,t()[this.ptr+12>>>0]=e},this.get_caught=function(){return 0!=t()[this.ptr+12>>>0]},this.set_rethrown=function(e){e=e?1:0,t()[this.ptr+13>>>0]=e},this.get_rethrown=function(){return 0!=t()[this.ptr+13>>>0]},this.init=function(e,t){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){Atomics.add(n(),this.ptr+0>>2,1)},this.release_ref=function(){return 1===Atomics.sub(n(),this.ptr+0>>2,1)},this.set_adjusted_ptr=function(e){a()[this.ptr+16>>>2]=e},this.get_adjusted_ptr=function(){return a()[this.ptr+16>>>2]},this.get_exception_ptr=function(){if(ks(this.get_type()))return a()[this.excPtr>>>2];var e=this.get_adjusted_ptr();return 0!==e?e:this.excPtr}}u.invokeEntryPoint=function(e,t){var s=be(e)(t);J()?Ie.setExitStatus(s):Fs(s)};var Ce="To use dlopen, you need enable dynamic linking, see https://github.com/emscripten-core/emscripten/wiki/Linking",xe={};function Ne(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function Oe(e){return this.fromWireType(n()[e>>>2])}var Se={},we={},Me={};function Be(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=48&&t<=57?"_"+e:e}function Fe(e,t){return e=Be(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function Le(e,t){var s=Fe(t,(function(e){this.name=t,this.message=e;var s=new Error(e).stack;void 0!==s&&(this.stack=this.toString()+"\n"+s.replace(/^Error(:[^\n]*)?\n/,""))}));return s.prototype=Object.create(e.prototype),s.prototype.constructor=s,s.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},s}var Ue=void 0;function He(e){throw new Ue(e)}function Ge(e,t,s){function i(t){var i=s(t);i.length!==e.length&&He("Mismatched type converter count");for(var r=0;r<e.length;++r)Ke(e[r],i[r])}e.forEach((function(e){Me[e]=t}));var r=new Array(t.length),o=[],n=0;t.forEach(((e,t)=>{we.hasOwnProperty(e)?r[t]=we[e]:(o.push(e),Se.hasOwnProperty(e)||(Se[e]=[]),Se[e].push((()=>{r[t]=we[e],++n===o.length&&i(r)})))})),0===o.length&&i(r)}var Ve={};function ke(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}var je=void 0;function Qe(e){for(var t="",s=e;i()[s>>>0];)t+=je[i()[s++>>>0]];return t}var We=void 0;function ze(e){throw new We(e)}function Ke(e,t,s={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var i=t.name;if(e||ze('type "'+i+'" must have a positive integer typeid pointer'),we.hasOwnProperty(e)){if(s.ignoreDuplicateRegistrations)return;ze("Cannot register type '"+i+"' twice")}if(we[e]=t,delete Me[e],Se.hasOwnProperty(e)){var r=Se[e];delete Se[e],r.forEach((e=>e()))}}function Ye(e){if(!(this instanceof gt))return!1;if(!(e instanceof gt))return!1;for(var t=this.$$.ptrType.registeredClass,s=this.$$.ptr,i=e.$$.ptrType.registeredClass,r=e.$$.ptr;t.baseClass;)s=t.upcast(s),t=t.baseClass;for(;i.baseClass;)r=i.upcast(r),i=i.baseClass;return t===i&&s===r}function Xe(e){return{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}}function Ze(e){ze(e.$$.ptrType.registeredClass.name+" instance already deleted")}var qe=!1;function Je(e){}function $e(e){e.count.value-=1,0===e.count.value&&function(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}(e)}function et(e,t,s){if(t===s)return e;if(void 0===s.baseClass)return null;var i=et(e,t,s.baseClass);return null===i?null:s.downcast(i)}var tt={};function st(){return Object.keys(lt).length}function it(){var e=[];for(var t in lt)lt.hasOwnProperty(t)&&e.push(lt[t]);return e}var rt=[];function ot(){for(;rt.length;){var e=rt.pop();e.$$.deleteScheduled=!1,e.delete()}}var nt=void 0;function at(e){nt=e,rt.length&&nt&&nt(ot)}var lt={};function ht(e,t){return t=function(e,t){for(void 0===t&&ze("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}(e,t),lt[t]}function ct(e,t){return t.ptrType&&t.ptr||He("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!=!!t.smartPtr&&He("Both smartPtrType and smartPtr must be specified"),t.count={value:1},At(Object.create(e,{$$:{value:t}}))}function ut(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var s=ht(this.registeredClass,t);if(void 0!==s){if(0===s.$$.count.value)return s.$$.ptr=t,s.$$.smartPtr=e,s.clone();var i=s.clone();return this.destructor(e),i}function r(){return this.isSmartPointer?ct(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):ct(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var o,n=this.registeredClass.getActualType(t),a=tt[n];if(!a)return r.call(this);o=this.isConst?a.constPointerType:a.pointerType;var l=et(t,this.registeredClass,o.registeredClass);return null===l?r.call(this):this.isSmartPointer?ct(o.registeredClass.instancePrototype,{ptrType:o,ptr:l,smartPtrType:this,smartPtr:e}):ct(o.registeredClass.instancePrototype,{ptrType:o,ptr:l})}function At(e){return"undefined"==typeof FinalizationRegistry?(At=e=>e,e):(qe=new FinalizationRegistry((e=>{$e(e.$$)})),Je=e=>qe.unregister(e),(At=e=>{var t=e.$$;if(t.smartPtr){var s={$$:t};qe.register(e,s,e)}return e})(e))}function pt(){if(this.$$.ptr||Ze(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=At(Object.create(Object.getPrototypeOf(this),{$$:{value:Xe(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}function dt(){this.$$.ptr||Ze(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ze("Object already scheduled for deletion"),Je(this),$e(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function ft(){return!this.$$.ptr}function mt(){return this.$$.ptr||Ze(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ze("Object already scheduled for deletion"),rt.push(this),1===rt.length&&nt&&nt(ot),this.$$.deleteScheduled=!0,this}function gt(){}function yt(e,t,s){if(void 0===e[t].overloadTable){var i=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||ze("Function '"+s+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[i.argCount]=i}}function Et(e,t,s){u.hasOwnProperty(e)?((void 0===s||void 0!==u[e].overloadTable&&void 0!==u[e].overloadTable[s])&&ze("Cannot register public name '"+e+"' twice"),yt(u,e,e),u.hasOwnProperty(s)&&ze("Cannot register multiple overloads of a function with the same number of arguments ("+s+")!"),u[e].overloadTable[s]=t):(u[e]=t,void 0!==s&&(u[e].numArguments=s))}function vt(e,t,s,i,r,o,n,a){this.name=e,this.constructor=t,this.instancePrototype=s,this.rawDestructor=i,this.baseClass=r,this.getActualType=o,this.upcast=n,this.downcast=a,this.pureVirtualFunctions=[]}function _t(e,t,s){for(;t!==s;)t.upcast||ze("Expected null or instance of "+s.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function It(e,t){if(null===t)return this.isReference&&ze("null is not a valid "+this.name),0;t.$$||ze('Cannot pass "'+Wt(t)+'" as a '+this.name),t.$$.ptr||ze("Cannot pass deleted object as a pointer of type "+this.name);var s=t.$$.ptrType.registeredClass;return _t(t.$$.ptr,s,this.registeredClass)}function Tt(e,t){var s;if(null===t)return this.isReference&&ze("null is not a valid "+this.name),this.isSmartPointer?(s=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,s),s):0;t.$$||ze('Cannot pass "'+Wt(t)+'" as a '+this.name),t.$$.ptr||ze("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&ze("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var i=t.$$.ptrType.registeredClass;if(s=_t(t.$$.ptr,i,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&ze("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?s=t.$$.smartPtr:ze("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:s=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)s=t.$$.smartPtr;else{var r=t.clone();s=this.rawShare(s,kt.toHandle((function(){r.delete()}))),null!==e&&e.push(this.rawDestructor,s)}break;default:ze("Unsupporting sharing policy")}return s}function Pt(e,t){if(null===t)return this.isReference&&ze("null is not a valid "+this.name),0;t.$$||ze('Cannot pass "'+Wt(t)+'" as a '+this.name),t.$$.ptr||ze("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&ze("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var s=t.$$.ptrType.registeredClass;return _t(t.$$.ptr,s,this.registeredClass)}function Dt(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function bt(e){this.rawDestructor&&this.rawDestructor(e)}function Rt(e){null!==e&&e.delete()}function Ct(e,t,s,i,r,o,n,a,l,h,c){this.name=e,this.registeredClass=t,this.isReference=s,this.isConst=i,this.isSmartPointer=r,this.pointeeType=o,this.sharingPolicy=n,this.rawGetPointee=a,this.rawConstructor=l,this.rawShare=h,this.rawDestructor=c,r||void 0!==t.baseClass?this.toWireType=Tt:i?(this.toWireType=It,this.destructorFunction=null):(this.toWireType=Pt,this.destructorFunction=null)}function xt(e,t,s){u.hasOwnProperty(e)||He("Replacing nonexistant public symbol"),void 0!==u[e].overloadTable&&void 0!==s?u[e].overloadTable[s]=t:(u[e]=t,u[e].argCount=s)}function Nt(e,t,s){return e.includes("j")?function(e,t,s){var i=u["dynCall_"+e];return s&&s.length?i.apply(null,[t].concat(s)):i.call(null,t)}(e,t,s):be(t).apply(null,s)}function Ot(e,t){var s,i,r,o=(e=Qe(e)).includes("j")?(s=e,i=t,r=[],function(){return r.length=0,Object.assign(r,arguments),Nt(s,i,r)}):be(t);return"function"!=typeof o&&ze("unknown function pointer with signature "+e+": "+t),o}var St=void 0;function wt(e){var t=Ns(e),s=Qe(t);return Ls(t),s}function Mt(e,t){var s=[],i={};throw t.forEach((function e(t){i[t]||we[t]||(Me[t]?Me[t].forEach(e):(s.push(t),i[t]=!0))})),new St(e+": "+s.map(wt).join([", "]))}function Bt(e,t){for(var s=[],i=0;i<e;i++)s.push(a()[t+4*i>>>2]);return s}function Ft(e,t,s,i,r){var o=t.length;o<2&&ze("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var n=null!==t[1]&&null!==s,a=!1,l=1;l<t.length;++l)if(null!==t[l]&&void 0===t[l].destructorFunction){a=!0;break}var h="void"!==t[0].name,c="",u="";for(l=0;l<o-2;++l)c+=(0!==l?", ":"")+"arg"+l,u+=(0!==l?", ":"")+"arg"+l+"Wired";var A="return function "+Be(e)+"("+c+") {\nif (arguments.length !== "+(o-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(o-2)+" args!');\n}\n";a&&(A+="var destructors = [];\n");var p=a?"destructors":"null",d=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],f=[ze,i,r,Ne,t[0],t[1]];for(n&&(A+="var thisWired = classParam.toWireType("+p+", this);\n"),l=0;l<o-2;++l)A+="var arg"+l+"Wired = argType"+l+".toWireType("+p+", arg"+l+"); // "+t[l+2].name+"\n",d.push("argType"+l),f.push(t[l+2]);if(n&&(u="thisWired"+(u.length>0?", ":"")+u),A+=(h?"var rv = ":"")+"invoker(fn"+(u.length>0?", ":"")+u+");\n",a)A+="runDestructors(destructors);\n";else for(l=n?1:2;l<t.length;++l){var m=1===l?"thisWired":"arg"+(l-2)+"Wired";null!==t[l].destructorFunction&&(A+=m+"_dtor("+m+"); // "+t[l].name+"\n",d.push(m+"_dtor"),f.push(t[l].destructorFunction))}h&&(A+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),A+="}\n",d.push(A);var g=function(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var s=Fe(e.name||"unknownFunctionName",(function(){}));s.prototype=e.prototype;var i=new s,r=e.apply(i,t);return r instanceof Object?r:i}(Function,d).apply(null,f);return g}var Lt=[],Ut=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Ht(e){e>4&&0==--Ut[e].refcount&&(Ut[e]=void 0,Lt.push(e))}function Gt(){for(var e=0,t=5;t<Ut.length;++t)void 0!==Ut[t]&&++e;return e}function Vt(){for(var e=5;e<Ut.length;++e)if(void 0!==Ut[e])return Ut[e];return null}var kt={toValue:e=>(e||ze("Cannot use deleted val. handle = "+e),Ut[e].value),toHandle:e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=Lt.length?Lt.pop():Ut.length;return Ut[t]={refcount:1,value:e},t}}};function jt(e,s,l){switch(s){case 0:return function(e){var s=l?t():i();return this.fromWireType(s[e>>>0])};case 1:return function(e){var t=l?r():o();return this.fromWireType(t[e>>>1])};case 2:return function(e){var t=l?n():a();return this.fromWireType(t[e>>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function Qt(e,t){var s=we[e];return void 0===s&&ze(t+" has unknown type "+wt(e)),s}function Wt(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function zt(e,t){switch(t){case 2:return function(e){return this.fromWireType((R.buffer!=w.buffer&&z(),H)[e>>>2])};case 3:return function(e){return this.fromWireType(l()[e>>>3])};default:throw new TypeError("Unknown float type: "+e)}}function Kt(e,s,l){switch(s){case 0:return l?function(e){return t()[e>>>0]}:function(e){return i()[e>>>0]};case 1:return l?function(e){return r()[e>>>1]}:function(e){return o()[e>>>1]};case 2:return l?function(e){return n()[e>>>2]}:function(e){return a()[e>>>2]};default:throw new TypeError("Unknown integer type: "+e)}}var Yt="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function Xt(e,t){for(var s=e,n=s>>1,a=n+t/2;!(n>=a)&&o()[n>>>0];)++n;if((s=n<<1)-e>32&&Yt)return Yt.decode(i().slice(e,s));for(var l="",h=0;!(h>=t/2);++h){var c=r()[e+2*h>>>1];if(0==c)break;l+=String.fromCharCode(c)}return l}function Zt(e,t,s){if(void 0===s&&(s=2147483647),s<2)return 0;for(var i=t,o=(s-=2)<2*e.length?s/2:e.length,n=0;n<o;++n){var a=e.charCodeAt(n);r()[t>>>1]=a,t+=2}return r()[t>>>1]=0,t-i}function qt(e){return 2*e.length}function Jt(e,t){for(var s=0,i="";!(s>=t/4);){var r=n()[e+4*s>>>2];if(0==r)break;if(++s,r>=65536){var o=r-65536;i+=String.fromCharCode(55296|o>>10,56320|1023&o)}else i+=String.fromCharCode(r)}return i}function $t(e,t,s){if(void 0===s&&(s=2147483647),s<4)return 0;for(var i=t>>>=0,r=i+s-4,o=0;o<e.length;++o){var a=e.charCodeAt(o);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++o)),n()[t>>>2]=a,(t+=4)+4>r)break}return n()[t>>>2]=0,t-i}function es(e){for(var t=0,s=0;s<e.length;++s){var i=e.charCodeAt(s);i>=55296&&i<=57343&&++s,t+=4}return t}function ts(e){Atomics.store(n(),e>>2,1),xs()&&Ms(e),Atomics.compareExchange(n(),e>>2,1,0)}u.executeNotifiedProxyingQueue=ts;var ss,is={};function rs(e){var t=is[e];return void 0===t?Qe(e):t}function os(){return"object"==typeof globalThis?globalThis:Function("return this")()}function ns(e){ns.shown||(ns.shown={}),ns.shown[e]||(ns.shown[e]=1,b(e))}function as(e){var t=Hs(),s=e();return Gs(t),s}function ls(e,t){var s=arguments.length-2,i=arguments;return as((()=>{for(var r=s,o=Vs(8*r),n=o>>3,a=0;a<s;a++){var h=i[2+a];l()[n+a>>>0]=h}return ws(e,r,o,t)}))}ss=()=>performance.timeOrigin+performance.now();var hs=[];function cs(e){var t=R.buffer;try{return R.grow(e-t.byteLength+65535>>>16),z(),1}catch(e){}}var us={};function As(){if(!As.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(var t in us)void 0===us[t]?delete e[t]:e[t]=us[t];var s=[];for(var t in e)s.push(t+"="+e[t]);As.strings=s}return As.strings}function ps(e,s){if(_)return ls(3,1,e,s);var i=0;return As().forEach((function(r,o){var n=s+i;a()[e+4*o>>>2]=n,function(e,s,i){for(var r=0;r<e.length;++r)t()[s++>>>0]=e.charCodeAt(r);i||(t()[s>>>0]=0)}(r,n),i+=r.length+1})),0}function ds(e,t){if(_)return ls(4,1,e,t);var s=As();a()[e>>>2]=s.length;var i=0;return s.forEach((function(e){i+=e.length+1})),a()[t>>>2]=i,0}function fs(e){if(_)return ls(5,1,e);try{var t=Ee.getStreamFromFD(e);return ye.close(t),0}catch(e){if(void 0===ye||!(e instanceof ye.ErrnoError))throw e;return e.errno}}function ms(e,s,i,r){if(_)return ls(6,1,e,s,i,r);try{var o=function(e,s,i,r){for(var o=0,n=0;n<i;n++){var l=a()[s>>>2],h=a()[s+4>>>2];s+=8;var c=ye.read(e,t(),l,h,r);if(c<0)return-1;if(o+=c,c<h)break;void 0!==r&&(r+=c)}return o}(Ee.getStreamFromFD(e),s,i);return a()[r>>>2]=o,0}catch(e){if(void 0===ye||!(e instanceof ye.ErrnoError))throw e;return e.errno}}function gs(e,t,s,i,r){if(_)return ls(7,1,e,t,s,i,r);try{var o=(h=s)+2097152>>>0<4194305-!!(l=t)?(l>>>0)+4294967296*h:NaN;if(isNaN(o))return 61;var a=Ee.getStreamFromFD(e);return ye.llseek(a,o,i),se=[a.position>>>0,(te=a.position,+Math.abs(te)>=1?te>0?(0|Math.min(+Math.floor(te/4294967296),4294967295))>>>0:~~+Math.ceil((te-+(~~te>>>0))/4294967296)>>>0:0)],n()[r>>>2]=se[0],n()[r+4>>>2]=se[1],a.getdents&&0===o&&0===i&&(a.getdents=null),0}catch(e){if(void 0===ye||!(e instanceof ye.ErrnoError))throw e;return e.errno}var l,h}function ys(e,s,i,r){if(_)return ls(8,1,e,s,i,r);try{var o=function(e,s,i,r){for(var o=0,n=0;n<i;n++){var l=a()[s>>>2],h=a()[s+4>>>2];s+=8;var c=ye.write(e,t(),l,h,r);if(c<0)return-1;o+=c,void 0!==r&&(r+=c)}return o}(Ee.getStreamFromFD(e),s,i);return a()[r>>>2]=o,0}catch(e){if(void 0===ye||!(e instanceof ye.ErrnoError))throw e;return e.errno}}function Es(e){return e%4==0&&(e%100!=0||e%400==0)}var vs=[31,29,31,30,31,30,31,31,30,31,30,31],_s=[31,28,31,30,31,30,31,31,30,31,30,31];function Is(e,s,i,r){var o=n()[r+40>>>2],a={tm_sec:n()[r>>>2],tm_min:n()[r+4>>>2],tm_hour:n()[r+8>>>2],tm_mday:n()[r+12>>>2],tm_mon:n()[r+16>>>2],tm_year:n()[r+20>>>2],tm_wday:n()[r+24>>>2],tm_yday:n()[r+28>>>2],tm_isdst:n()[r+32>>>2],tm_gmtoff:n()[r+36>>>2],tm_zone:o?j(o):""},l=j(i),h={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var c in h)l=l.replace(new RegExp(c,"g"),h[c]);var u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],A=["January","February","March","April","May","June","July","August","September","October","November","December"];function p(e,t,s){for(var i="number"==typeof e?e.toString():e||"";i.length<t;)i=s[0]+i;return i}function d(e,t){return p(e,t,"0")}function f(e,t){function s(e){return e<0?-1:e>0?1:0}var i;return 0===(i=s(e.getFullYear()-t.getFullYear()))&&0===(i=s(e.getMonth()-t.getMonth()))&&(i=s(e.getDate()-t.getDate())),i}function m(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function g(e){var t=function(e,t){for(var s=new Date(e.getTime());t>0;){var i=Es(s.getFullYear()),r=s.getMonth(),o=(i?vs:_s)[r];if(!(t>o-s.getDate()))return s.setDate(s.getDate()+t),s;t-=o-s.getDate()+1,s.setDate(1),r<11?s.setMonth(r+1):(s.setMonth(0),s.setFullYear(s.getFullYear()+1))}return s}(new Date(e.tm_year+1900,0,1),e.tm_yday),s=new Date(t.getFullYear(),0,4),i=new Date(t.getFullYear()+1,0,4),r=m(s),o=m(i);return f(r,t)<=0?f(o,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var y={"%a":function(e){return u[e.tm_wday].substring(0,3)},"%A":function(e){return u[e.tm_wday]},"%b":function(e){return A[e.tm_mon].substring(0,3)},"%B":function(e){return A[e.tm_mon]},"%C":function(e){return d((e.tm_year+1900)/100|0,2)},"%d":function(e){return d(e.tm_mday,2)},"%e":function(e){return p(e.tm_mday,2," ")},"%g":function(e){return g(e).toString().substring(2)},"%G":function(e){return g(e)},"%H":function(e){return d(e.tm_hour,2)},"%I":function(e){var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),d(t,2)},"%j":function(e){return d(e.tm_mday+function(e,t){for(var s=0,i=0;i<=t;s+=e[i++]);return s}(Es(e.tm_year+1900)?vs:_s,e.tm_mon-1),3)},"%m":function(e){return d(e.tm_mon+1,2)},"%M":function(e){return d(e.tm_min,2)},"%n":function(){return"\n"},"%p":function(e){return e.tm_hour>=0&&e.tm_hour<12?"AM":"PM"},"%S":function(e){return d(e.tm_sec,2)},"%t":function(){return"\t"},"%u":function(e){return e.tm_wday||7},"%U":function(e){var t=e.tm_yday+7-e.tm_wday;return d(Math.floor(t/7),2)},"%V":function(e){var t=Math.floor((e.tm_yday+7-(e.tm_wday+6)%7)/7);if((e.tm_wday+371-e.tm_yday-2)%7<=2&&t++,t){if(53==t){var s=(e.tm_wday+371-e.tm_yday)%7;4==s||3==s&&Es(e.tm_year)||(t=1)}}else{t=52;var i=(e.tm_wday+7-e.tm_yday-1)%7;(4==i||5==i&&Es(e.tm_year%400-1))&&t++}return d(t,2)},"%w":function(e){return e.tm_wday},"%W":function(e){var t=e.tm_yday+7-(e.tm_wday+6)%7;return d(Math.floor(t/7),2)},"%y":function(e){return(e.tm_year+1900).toString().substring(2)},"%Y":function(e){return e.tm_year+1900},"%z":function(e){var t=e.tm_gmtoff,s=t>=0;return t=(t=Math.abs(t)/60)/60*100+t%60,(s?"+":"-")+String("0000"+t).slice(-4)},"%Z":function(e){return e.tm_zone},"%%":function(){return"%"}};for(var c in l=l.replace(/%%/g,"\0\0"),y)l.includes(c)&&(l=l.replace(new RegExp(c,"g"),y[c](a)));var E,v,_=de(l=l.replace(/\0\0/g,"%"),!1);return _.length>s?0:(E=_,v=e,t().set(E,v>>>0),_.length-1)}Ie.init();var Ts=function(e,t,s,i){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=ye.nextInode++,this.name=t,this.mode=s,this.node_ops={},this.stream_ops={},this.rdev=i},Ps=365,Ds=146;Object.defineProperties(Ts.prototype,{read:{get:function(){return(this.mode&Ps)===Ps},set:function(e){e?this.mode|=Ps:this.mode&=-366}},write:{get:function(){return(this.mode&Ds)===Ds},set:function(e){e?this.mode|=Ds:this.mode&=-147}},isFolder:{get:function(){return ye.isDir(this.mode)}},isDevice:{get:function(){return ye.isChrdev(this.mode)}}}),ye.FSNode=Ts,ye.staticInit(),Ue=u.InternalError=Le(Error,"InternalError"),function(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);je=e}(),We=u.BindingError=Le(Error,"BindingError"),gt.prototype.isAliasOf=Ye,gt.prototype.clone=pt,gt.prototype.delete=dt,gt.prototype.isDeleted=ft,gt.prototype.deleteLater=mt,u.getInheritedInstanceCount=st,u.getLiveInheritedInstances=it,u.flushPendingDeletes=ot,u.setDelayFunction=at,Ct.prototype.getPointee=Dt,Ct.prototype.destructor=bt,Ct.prototype.argPackAdvance=8,Ct.prototype.readValueFromPointer=Oe,Ct.prototype.deleteObject=Rt,Ct.prototype.fromWireType=ut,St=u.UnboundTypeError=Le(Error,"UnboundTypeError"),u.count_emval_handles=Gt,u.get_first_emval=Vt;var bs=[null,ve,Pe,ps,ds,fs,ms,gs,ys],Rs={g:function(e,t,s){throw new Re(e).init(t,s),e},T:function(e){Os(e,!E,1,!y),Ie.threadInitTLS()},J:function(e){_?postMessage({cmd:"cleanupThread",thread:e}):ue(e)},X:function(e){},_:function(e){ae(Ce)},Z:function(e,t){ae(Ce)},da:function(e){var t=xe[e];delete xe[e];var s=t.elements,i=s.length,r=s.map((function(e){return e.getterReturnType})).concat(s.map((function(e){return e.setterArgumentType}))),o=t.rawConstructor,n=t.rawDestructor;Ge([e],r,(function(e){return s.forEach(((t,s)=>{var r=e[s],o=t.getter,n=t.getterContext,a=e[s+i],l=t.setter,h=t.setterContext;t.read=e=>r.fromWireType(o(n,e)),t.write=(e,t)=>{var s=[];l(h,e,a.toWireType(s,t)),Ne(s)}})),[{name:t.name,fromWireType:function(e){for(var t=new Array(i),r=0;r<i;++r)t[r]=s[r].read(e);return n(e),t},toWireType:function(e,r){if(i!==r.length)throw new TypeError("Incorrect number of tuple elements for "+t.name+": expected="+i+", actual="+r.length);for(var a=o(),l=0;l<i;++l)s[l].write(a,r[l]);return null!==e&&e.push(n,a),a},argPackAdvance:8,readValueFromPointer:Oe,destructorFunction:n}]}))},q:function(e){var t=Ve[e];delete Ve[e];var s=t.rawConstructor,i=t.rawDestructor,r=t.fields;Ge([e],r.map((e=>e.getterReturnType)).concat(r.map((e=>e.setterArgumentType))),(e=>{var o={};return r.forEach(((t,s)=>{var i=t.fieldName,n=e[s],a=t.getter,l=t.getterContext,h=e[s+r.length],c=t.setter,u=t.setterContext;o[i]={read:e=>n.fromWireType(a(l,e)),write:(e,t)=>{var s=[];c(u,e,h.toWireType(s,t)),Ne(s)}}})),[{name:t.name,fromWireType:function(e){var t={};for(var s in o)t[s]=o[s].read(e);return i(e),t},toWireType:function(e,t){for(var r in o)if(!(r in t))throw new TypeError('Missing field:  "'+r+'"');var n=s();for(r in o)o[r].write(n,t[r]);return null!==e&&e.push(i,n),n},argPackAdvance:8,readValueFromPointer:Oe,destructorFunction:i}]}))},H:function(e,t,s,i,r){},ba:function(e,s,i,o,a){var l=ke(i);Ke(e,{name:s=Qe(s),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?o:a},argPackAdvance:8,readValueFromPointer:function(e){var o;if(1===i)o=t();else if(2===i)o=r();else{if(4!==i)throw new TypeError("Unknown boolean type size: "+s);o=n()}return this.fromWireType(o[e>>>l])},destructorFunction:null})},p:function(e,t,s,i,r,o,n,a,l,h,c,u,A){c=Qe(c),o=Ot(r,o),a&&(a=Ot(n,a)),h&&(h=Ot(l,h)),A=Ot(u,A);var p=Be(c);Et(p,(function(){Mt("Cannot construct "+c+" due to unbound types",[i])})),Ge([e,t,s],i?[i]:[],(function(t){var s,r;t=t[0],r=i?(s=t.registeredClass).instancePrototype:gt.prototype;var n=Fe(p,(function(){if(Object.getPrototypeOf(this)!==l)throw new We("Use 'new' to construct "+c);if(void 0===u.constructor_body)throw new We(c+" has no accessible constructor");var e=u.constructor_body[arguments.length];if(void 0===e)throw new We("Tried to invoke ctor of "+c+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(u.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)})),l=Object.create(r,{constructor:{value:n}});n.prototype=l;var u=new vt(c,n,l,A,s,o,a,h),d=new Ct(c,u,!0,!1,!1),f=new Ct(c+"*",u,!1,!1,!1),m=new Ct(c+" const*",u,!1,!0,!1);return tt[e]={pointerType:f,constPointerType:m},xt(p,n),[d,f,m]}))},o:function(e,t,s,i,r,o){S(t>0);var n=Bt(t,s);r=Ot(i,r),Ge([],[e],(function(e){var s="constructor "+(e=e[0]).name;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new We("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.registeredClass.constructor_body[t-1]=()=>{Mt("Cannot construct "+e.name+" due to unbound types",n)},Ge([],n,(function(i){return i.splice(1,0,null),e.registeredClass.constructor_body[t-1]=Ft(s,i,null,r,o),[]})),[]}))},c:function(e,t,s,i,r,o,n,a){var l=Bt(s,i);t=Qe(t),o=Ot(r,o),Ge([],[e],(function(e){var i=(e=e[0]).name+"."+t;function r(){Mt("Cannot call "+i+" due to unbound types",l)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]),a&&e.registeredClass.pureVirtualFunctions.push(t);var h=e.registeredClass.instancePrototype,c=h[t];return void 0===c||void 0===c.overloadTable&&c.className!==e.name&&c.argCount===s-2?(r.argCount=s-2,r.className=e.name,h[t]=r):(yt(h,t,i),h[t].overloadTable[s-2]=r),Ge([],l,(function(r){var a=Ft(i,r,e,o,n);return void 0===h[t].overloadTable?(a.argCount=s-2,h[t]=a):h[t].overloadTable[s-2]=a,[]})),[]}))},aa:function(e,t){Ke(e,{name:t=Qe(t),fromWireType:function(e){var t=kt.toValue(e);return Ht(e),t},toWireType:function(e,t){return kt.toHandle(t)},argPackAdvance:8,readValueFromPointer:Oe,destructorFunction:null})},D:function(e,t,s,i){var r=ke(s);function o(){}t=Qe(t),o.values={},Ke(e,{name:t,constructor:o,fromWireType:function(e){return this.constructor.values[e]},toWireType:function(e,t){return t.value},argPackAdvance:8,readValueFromPointer:jt(t,r,i),destructorFunction:null}),Et(t,o)},t:function(e,t,s){var i=Qt(e,"enum");t=Qe(t);var r=i.constructor,o=Object.create(i.constructor.prototype,{value:{value:s},constructor:{value:Fe(i.name+"_"+t,(function(){}))}});r.values[s]=o,r[t]=o},B:function(e,t,s){var i=ke(s);Ke(e,{name:t=Qe(t),fromWireType:function(e){return e},toWireType:function(e,t){return t},argPackAdvance:8,readValueFromPointer:zt(t,i),destructorFunction:null})},d:function(e,t,s,i,r,o){var n=Bt(t,s);e=Qe(e),r=Ot(i,r),Et(e,(function(){Mt("Cannot call "+e+" due to unbound types",n)}),t-1),Ge([],n,(function(s){var i=[s[0],null].concat(s.slice(1));return xt(e,Ft(e,i,null,r,o),t-1),[]}))},s:function(e,t,s,i,r){t=Qe(t);var o=ke(s),n=e=>e;if(0===i){var a=32-8*s;n=e=>e<<a>>>a}var l=t.includes("unsigned");Ke(e,{name:t,fromWireType:n,toWireType:l?function(e,t){return this.name,t>>>0}:function(e,t){return this.name,t},argPackAdvance:8,readValueFromPointer:Kt(t,o,0!==i),destructorFunction:null})},i:function(e,t,s){var i=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function r(e){e>>=2;var t=a(),s=t[e>>>0],r=t[e+1>>>0];return new i(t.buffer,r,s)}Ke(e,{name:s=Qe(s),fromWireType:r,argPackAdvance:8,readValueFromPointer:r},{ignoreDuplicateRegistrations:!0})},C:function(e,t){var s="std::string"===(t=Qe(t));Ke(e,{name:t,fromWireType:function(e){var t,r=a()[e>>>2],o=e+4;if(s)for(var n=o,l=0;l<=r;++l){var h=o+l;if(l==r||0==i()[h>>>0]){var c=j(n,h-n);void 0===t?t=c:(t+=String.fromCharCode(0),t+=c),n=h+1}}else{var u=new Array(r);for(l=0;l<r;++l)u[l]=String.fromCharCode(i()[o+l>>>0]);t=u.join("")}return Ls(e),t},toWireType:function(e,t){var r;t instanceof ArrayBuffer&&(t=new Uint8Array(t));var o="string"==typeof t;o||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||ze("Cannot pass non-string to std::string"),r=s&&o?W(t):t.length;var n,l,h=Cs(4+r+1),c=h+4;if(c>>>=0,a()[h>>>2]=r,s&&o)n=c,l=r+1,Q(t,i(),n,l);else if(o)for(var u=0;u<r;++u){var A=t.charCodeAt(u);A>255&&(Ls(c),ze("String has UTF-16 code units that do not fit in 8 bits")),i()[c+u>>>0]=A}else for(u=0;u<r;++u)i()[c+u>>>0]=t[u];return null!==e&&e.push(Ls,h),h},argPackAdvance:8,readValueFromPointer:Oe,destructorFunction:function(e){Ls(e)}})},x:function(e,t,s){var i,r,n,l,h;s=Qe(s),2===t?(i=Xt,r=Zt,l=qt,n=()=>o(),h=1):4===t&&(i=Jt,r=$t,l=es,n=()=>a(),h=2),Ke(e,{name:s,fromWireType:function(e){for(var s,r=a()[e>>>2],o=n(),l=e+4,c=0;c<=r;++c){var u=e+4+c*t;if(c==r||0==o[u>>>h]){var A=i(l,u-l);void 0===s?s=A:(s+=String.fromCharCode(0),s+=A),l=u+t}}return Ls(e),s},toWireType:function(e,i){"string"!=typeof i&&ze("Cannot pass non-string to C++ string type "+s);var o=l(i),n=Cs(4+o+t);return n>>>=0,a()[n>>>2]=o>>h,r(i,n+4,o+t),null!==e&&e.push(Ls,n),n},argPackAdvance:8,readValueFromPointer:Oe,destructorFunction:function(e){Ls(e)}})},ea:function(e,t,s,i,r,o){xe[e]={name:Qe(t),rawConstructor:Ot(s,i),rawDestructor:Ot(r,o),elements:[]}},j:function(e,t,s,i,r,o,n,a,l){xe[e].elements.push({getterReturnType:t,getter:Ot(s,i),getterContext:r,setterArgumentType:o,setter:Ot(n,a),setterContext:l})},r:function(e,t,s,i,r,o){Ve[e]={name:Qe(t),rawConstructor:Ot(s,i),rawDestructor:Ot(r,o),fields:[]}},f:function(e,t,s,i,r,o,n,a,l,h){Ve[e].fields.push({fieldName:Qe(t),getterReturnType:s,getter:Ot(i,r),getterContext:o,setterArgumentType:n,setter:Ot(a,l),setterContext:h})},ca:function(e,t){Ke(e,{isVoid:!0,name:t=Qe(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})},Y:function(e){b(j(e))},V:function(e,t,s,i){if(e==t)setTimeout((()=>ts(i)));else if(_)postMessage({targetThread:e,cmd:"processProxyingQueue",queue:i});else{var r=Ie.pthreads[e];if(!r)return;r.postMessage({cmd:"processProxyingQueue",queue:i})}return 1},S:function(e,t,s){return-1},n:function(e,t,s){e=kt.toValue(e),t=Qt(t,"emval::as");var i=[],r=kt.toHandle(i);return a()[s>>>2]=r,t.toWireType(i,e)},z:function(e,t,s,i){e=kt.toValue(e);for(var r=function(e,t){for(var s=new Array(e),i=0;i<e;++i)s[i]=Qt(a()[t+4*i>>>2],"parameter "+i);return s}(t,s),o=new Array(t),n=0;n<t;++n){var l=r[n];o[n]=l.readValueFromPointer(i),i+=l.argPackAdvance}var h=e.apply(void 0,o);return kt.toHandle(h)},b:Ht,F:function(e){return 0===e?kt.toHandle(os()):(e=rs(e),kt.toHandle(os()[e]))},l:function(e,t){return e=kt.toValue(e),t=kt.toValue(t),kt.toHandle(e[t])},u:function(e){e>4&&(Ut[e].refcount+=1)},ga:function(e,t){return(e=kt.toValue(e))instanceof(t=kt.toValue(t))},y:function(e){return"number"==typeof(e=kt.toValue(e))},E:function(e){return"string"==typeof(e=kt.toValue(e))},fa:function(){return kt.toHandle([])},h:function(e){return kt.toHandle(rs(e))},w:function(){return kt.toHandle({})},m:function(e){Ne(kt.toValue(e)),Ht(e)},k:function(e,t,s){e=kt.toValue(e),t=kt.toValue(t),s=kt.toValue(s),e[t]=s},e:function(e,t){var s=(e=Qt(e,"_emval_take_value")).readValueFromPointer(t);return kt.toHandle(s)},A:function(){ae("")},U:function(){E||ns("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")},v:ss,W:function(e,t,s){i().copyWithin(e>>>0,t>>>0,t+s>>>0)},R:function(e,t,s){hs.length=t;for(var i=s>>3,r=0;r<t;r++)hs[r]=l()[i+r>>>0];return bs[e].apply(null,hs)},P:function(e){var t=i().length;if((e>>>=0)<=t)return!1;var s,r,o=4294901760;if(e>o)return!1;for(var n=1;n<=4;n*=2){var a=t*(1+.2/n);if(a=Math.min(a,e+100663296),cs(Math.min(o,(s=Math.max(e,a))+((r=65536)-s%r)%r)))return!0}return!1},$:function(){throw"unwind"},L:ps,M:ds,I:_e,N:fs,O:ms,G:gs,Q:ys,a:R||u.wasmMemory,K:function(e,t,s,i,r){return Is(e,t,s,i)}};!function(){var e={a:Rs};function t(e,t){var s,i,r=e.exports;u.asm=r,s=u.asm.ka,Ie.tlsInitFunctions.push(s),K=u.asm.ia,i=u.asm.ha,Z.unshift(i),C=t,Ie.loadWasmModuleToAllWorkers((()=>ne()))}function s(e){t(e.instance,e.module)}function i(t){return(P||!y&&!E||"function"!=typeof fetch?Promise.resolve().then((function(){return he(ee)})):fetch(ee,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ee+"'";return e.arrayBuffer()})).catch((function(){return he(ee)}))).then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){b("failed to asynchronously prepare wasm: "+e),ae(e)}))}if(oe(),u.instantiateWasm)try{return u.instantiateWasm(e,t)}catch(e){b("Module.instantiateWasm callback failed with error: "+e),c(e)}(P||"function"!=typeof WebAssembly.instantiateStreaming||le(ee)||"function"!=typeof fetch?i(s):fetch(ee,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(s,(function(e){return b("wasm streaming compile failed: "+e),b("falling back to ArrayBuffer instantiation"),i(s)}))}))).catch(c)}();var Cs=function(){return(Cs=u.asm.ja).apply(null,arguments)};u.__emscripten_tls_init=function(){return(u.__emscripten_tls_init=u.asm.ka).apply(null,arguments)};var xs=u._pthread_self=function(){return(xs=u._pthread_self=u.asm.la).apply(null,arguments)},Ns=u.___getTypeName=function(){return(Ns=u.___getTypeName=u.asm.ma).apply(null,arguments)};u.__embind_initialize_bindings=function(){return(u.__embind_initialize_bindings=u.asm.na).apply(null,arguments)};var Os=u.__emscripten_thread_init=function(){return(Os=u.__emscripten_thread_init=u.asm.oa).apply(null,arguments)};u.__emscripten_thread_crashed=function(){return(u.__emscripten_thread_crashed=u.asm.pa).apply(null,arguments)};var Ss,ws=function(){return(ws=u.asm.qa).apply(null,arguments)},Ms=u.__emscripten_proxy_execute_task_queue=function(){return(Ms=u.__emscripten_proxy_execute_task_queue=u.asm.ra).apply(null,arguments)},Bs=function(){return(Bs=u.asm.sa).apply(null,arguments)},Fs=u.__emscripten_thread_exit=function(){return(Fs=u.__emscripten_thread_exit=u.asm.ta).apply(null,arguments)},Ls=function(){return(Ls=u.asm.ua).apply(null,arguments)},Us=function(){return(Us=u.asm.va).apply(null,arguments)},Hs=function(){return(Hs=u.asm.wa).apply(null,arguments)},Gs=function(){return(Gs=u.asm.xa).apply(null,arguments)},Vs=function(){return(Vs=u.asm.ya).apply(null,arguments)},ks=function(){return(ks=u.asm.za).apply(null,arguments)};function js(){if(!(ie>0)){if(_)return h(u),$(),void startWorker(u);!function(){if(u.preRun)for("function"==typeof u.preRun&&(u.preRun=[u.preRun]);u.preRun.length;)e=u.preRun.shift(),X.unshift(e);var e;Te(X)}(),ie>0||(u.setStatus?(u.setStatus("Running..."),setTimeout((function(){setTimeout((function(){u.setStatus("")}),1),e()}),1)):e())}function e(){Ss||(Ss=!0,u.calledRun=!0,O||($(),h(u),u.onRuntimeInitialized&&u.onRuntimeInitialized(),function(){if(!_){if(u.postRun)for("function"==typeof u.postRun&&(u.postRun=[u.postRun]);u.postRun.length;)e=u.postRun.shift(),q.unshift(e);var e;Te(q)}}()))}}if(u.dynCall_jiji=function(){return(u.dynCall_jiji=u.asm.Aa).apply(null,arguments)},u.dynCall_viijii=function(){return(u.dynCall_viijii=u.asm.Ba).apply(null,arguments)},u.dynCall_iiiiij=function(){return(u.dynCall_iiiiij=u.asm.Ca).apply(null,arguments)},u.dynCall_iiiiijj=function(){return(u.dynCall_iiiiijj=u.asm.Da).apply(null,arguments)},u.dynCall_iiiiiijj=function(){return(u.dynCall_iiiiiijj=u.asm.Ea).apply(null,arguments)},u.keepRuntimeAlive=J,u.wasmMemory=R,u.ExitStatus=ce,u.PThread=Ie,re=function e(){Ss||js(),Ss||(re=e)},u.preInit)for("function"==typeof u.preInit&&(u.preInit=[u.preInit]);u.preInit.length>0;)u.preInit.pop()();return js(),e.ready});"object"==typeof e&&"object"==typeof t?t.exports=i:"function"==typeof define&&define.amd?define([],(function(){return i})):"object"==typeof e&&(e.WebIFCWasm=i)}}),Xv=Kv({"dist/web-ifc.js"(e,t){var s,i=(s="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(e={}){var t,i,r=void 0!==e?e:{};r.ready=new Promise((function(e,s){t=e,i=s}));var o,n,a=Object.assign({},r),l="./this.program",h="";"undefined"!=typeof document&&document.currentScript&&(h=document.currentScript.src),s&&(h=s),h=0!==h.indexOf("blob:")?h.substr(0,h.replace(/[?#].*/,"").lastIndexOf("/")+1):"",o=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},n=(e,t,s)=>{var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=()=>{200==i.status||0==i.status&&i.response?t(i.response):s()},i.onerror=s,i.send(null)};var c,u,A=r.print||console.log.bind(console),p=r.printErr||console.warn.bind(console);Object.assign(r,a),a=null,r.arguments,r.thisProgram&&(l=r.thisProgram),r.quit,r.wasmBinary&&(c=r.wasmBinary),r.noExitRuntime,"object"!=typeof WebAssembly&&k("no native wasm support detected");var d=!1;function f(e,t){e||k(t)}var m,g,y,E,v,_,I,T,P,D="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function b(e,t,s){for(var i=(t>>>=0)+s,r=t;e[r]&&!(r>=i);)++r;if(r-t>16&&e.buffer&&D)return D.decode(e.subarray(t,r));for(var o="";t<r;){var n=e[t++];if(128&n){var a=63&e[t++];if(192!=(224&n)){var l=63&e[t++];if((n=224==(240&n)?(15&n)<<12|a<<6|l:(7&n)<<18|a<<12|l<<6|63&e[t++])<65536)o+=String.fromCharCode(n);else{var h=n-65536;o+=String.fromCharCode(55296|h>>10,56320|1023&h)}}else o+=String.fromCharCode((31&n)<<6|a)}else o+=String.fromCharCode(n)}return o}function R(e,t){return(e>>>=0)?b(g,e,t):""}function C(e,t,s,i){if(!(i>0))return 0;for(var r=s>>>=0,o=s+i-1,n=0;n<e.length;++n){var a=e.charCodeAt(n);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&e.charCodeAt(++n)),a<=127){if(s>=o)break;t[s++>>>0]=a}else if(a<=2047){if(s+1>=o)break;t[s++>>>0]=192|a>>6,t[s++>>>0]=128|63&a}else if(a<=65535){if(s+2>=o)break;t[s++>>>0]=224|a>>12,t[s++>>>0]=128|a>>6&63,t[s++>>>0]=128|63&a}else{if(s+3>=o)break;t[s++>>>0]=240|a>>18,t[s++>>>0]=128|a>>12&63,t[s++>>>0]=128|a>>6&63,t[s++>>>0]=128|63&a}}return t[s>>>0]=0,s-r}function x(e){for(var t=0,s=0;s<e.length;++s){var i=e.charCodeAt(s);i<=127?t++:i<=2047?t+=2:i>=55296&&i<=57343?(t+=4,++s):t+=3}return t}function N(){var e=u.buffer;r.HEAP8=m=new Int8Array(e),r.HEAP16=y=new Int16Array(e),r.HEAP32=v=new Int32Array(e),r.HEAPU8=g=new Uint8Array(e),r.HEAPU16=E=new Uint16Array(e),r.HEAPU32=_=new Uint32Array(e),r.HEAPF32=I=new Float32Array(e),r.HEAPF64=T=new Float64Array(e)}var O,S,w,M,B=[],F=[],L=[],U=0,H=null;function G(e){U++,r.monitorRunDependencies&&r.monitorRunDependencies(U)}function V(e){if(U--,r.monitorRunDependencies&&r.monitorRunDependencies(U),0==U&&H){var t=H;H=null,t()}}function k(e){r.onAbort&&r.onAbort(e),p(e="Aborted("+e+")"),d=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw i(t),t}function j(e){return e.startsWith("data:application/octet-stream;base64,")}function Q(e){try{if(e==O&&c)return new Uint8Array(c);throw"both async and sync fetching of the wasm failed"}catch(e){k(e)}}function W(e){for(;e.length>0;)e.shift()(r)}function z(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(e){_[this.ptr+4>>>2]=e},this.get_type=function(){return _[this.ptr+4>>>2]},this.set_destructor=function(e){_[this.ptr+8>>>2]=e},this.get_destructor=function(){return _[this.ptr+8>>>2]},this.set_refcount=function(e){v[this.ptr>>>2]=e},this.set_caught=function(e){e=e?1:0,m[this.ptr+12>>>0]=e},this.get_caught=function(){return 0!=m[this.ptr+12>>>0]},this.set_rethrown=function(e){e=e?1:0,m[this.ptr+13>>>0]=e},this.get_rethrown=function(){return 0!=m[this.ptr+13>>>0]},this.init=function(e,t){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var e=v[this.ptr>>>2];v[this.ptr>>>2]=e+1},this.release_ref=function(){var e=v[this.ptr>>>2];return v[this.ptr>>>2]=e-1,1===e},this.set_adjusted_ptr=function(e){_[this.ptr+16>>>2]=e},this.get_adjusted_ptr=function(){return _[this.ptr+16>>>2]},this.get_exception_ptr=function(){if(Kt(this.get_type()))return _[this.excPtr>>>2];var e=this.get_adjusted_ptr();return 0!==e?e:this.excPtr}}j(O="web-ifc.wasm")||(S=O,O=r.locateFile?r.locateFile(S,h):h+S);var K={};function Y(e){for(;e.length;){var t=e.pop();e.pop()(t)}}function X(e){return this.fromWireType(v[e>>>2])}var Z={},q={},J={};function $(e){if(void 0===e)return"_unknown";var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=48&&t<=57?"_"+e:e}function ee(e,t){return e=$(e),new Function("body","return function "+e+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(t)}function te(e,t){var s=ee(t,(function(e){this.name=t,this.message=e;var s=new Error(e).stack;void 0!==s&&(this.stack=this.toString()+"\n"+s.replace(/^Error(:[^\n]*)?\n/,""))}));return s.prototype=Object.create(e.prototype),s.prototype.constructor=s,s.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},s}var se=void 0;function ie(e){throw new se(e)}function re(e,t,s){function i(t){var i=s(t);i.length!==e.length&&ie("Mismatched type converter count");for(var r=0;r<e.length;++r)ue(e[r],i[r])}e.forEach((function(e){J[e]=t}));var r=new Array(t.length),o=[],n=0;t.forEach(((e,t)=>{q.hasOwnProperty(e)?r[t]=q[e]:(o.push(e),Z.hasOwnProperty(e)||(Z[e]=[]),Z[e].push((()=>{r[t]=q[e],++n===o.length&&i(r)})))})),0===o.length&&i(r)}var oe={};function ne(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}var ae=void 0;function le(e){for(var t="",s=e;g[s>>>0];)t+=ae[g[s++>>>0]];return t}var he=void 0;function ce(e){throw new he(e)}function ue(e,t,s={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var i=t.name;if(e||ce('type "'+i+'" must have a positive integer typeid pointer'),q.hasOwnProperty(e)){if(s.ignoreDuplicateRegistrations)return;ce("Cannot register type '"+i+"' twice")}if(q[e]=t,delete J[e],Z.hasOwnProperty(e)){var r=Z[e];delete Z[e],r.forEach((e=>e()))}}function Ae(e){if(!(this instanceof Be))return!1;if(!(e instanceof Be))return!1;for(var t=this.$$.ptrType.registeredClass,s=this.$$.ptr,i=e.$$.ptrType.registeredClass,r=e.$$.ptr;t.baseClass;)s=t.upcast(s),t=t.baseClass;for(;i.baseClass;)r=i.upcast(r),i=i.baseClass;return t===i&&s===r}function pe(e){return{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}}function de(e){ce(e.$$.ptrType.registeredClass.name+" instance already deleted")}var fe=!1;function me(e){}function ge(e){e.count.value-=1,0===e.count.value&&function(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}(e)}function ye(e,t,s){if(t===s)return e;if(void 0===s.baseClass)return null;var i=ye(e,t,s.baseClass);return null===i?null:s.downcast(i)}var Ee={};function ve(){return Object.keys(be).length}function _e(){var e=[];for(var t in be)be.hasOwnProperty(t)&&e.push(be[t]);return e}var Ie=[];function Te(){for(;Ie.length;){var e=Ie.pop();e.$$.deleteScheduled=!1,e.delete()}}var Pe=void 0;function De(e){Pe=e,Ie.length&&Pe&&Pe(Te)}var be={};function Re(e,t){return t=function(e,t){for(void 0===t&&ce("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}(e,t),be[t]}function Ce(e,t){return t.ptrType&&t.ptr||ie("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!=!!t.smartPtr&&ie("Both smartPtrType and smartPtr must be specified"),t.count={value:1},Ne(Object.create(e,{$$:{value:t}}))}function xe(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var s=Re(this.registeredClass,t);if(void 0!==s){if(0===s.$$.count.value)return s.$$.ptr=t,s.$$.smartPtr=e,s.clone();var i=s.clone();return this.destructor(e),i}function r(){return this.isSmartPointer?Ce(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):Ce(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var o,n=this.registeredClass.getActualType(t),a=Ee[n];if(!a)return r.call(this);o=this.isConst?a.constPointerType:a.pointerType;var l=ye(t,this.registeredClass,o.registeredClass);return null===l?r.call(this):this.isSmartPointer?Ce(o.registeredClass.instancePrototype,{ptrType:o,ptr:l,smartPtrType:this,smartPtr:e}):Ce(o.registeredClass.instancePrototype,{ptrType:o,ptr:l})}function Ne(e){return"undefined"==typeof FinalizationRegistry?(Ne=e=>e,e):(fe=new FinalizationRegistry((e=>{ge(e.$$)})),me=e=>fe.unregister(e),(Ne=e=>{var t=e.$$;if(t.smartPtr){var s={$$:t};fe.register(e,s,e)}return e})(e))}function Oe(){if(this.$$.ptr||de(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=Ne(Object.create(Object.getPrototypeOf(this),{$$:{value:pe(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}function Se(){this.$$.ptr||de(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ce("Object already scheduled for deletion"),me(this),ge(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function we(){return!this.$$.ptr}function Me(){return this.$$.ptr||de(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&ce("Object already scheduled for deletion"),Ie.push(this),1===Ie.length&&Pe&&Pe(Te),this.$$.deleteScheduled=!0,this}function Be(){}function Fe(e,t,s){if(void 0===e[t].overloadTable){var i=e[t];e[t]=function(){return e[t].overloadTable.hasOwnProperty(arguments.length)||ce("Function '"+s+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[i.argCount]=i}}function Le(e,t,s){r.hasOwnProperty(e)?((void 0===s||void 0!==r[e].overloadTable&&void 0!==r[e].overloadTable[s])&&ce("Cannot register public name '"+e+"' twice"),Fe(r,e,e),r.hasOwnProperty(s)&&ce("Cannot register multiple overloads of a function with the same number of arguments ("+s+")!"),r[e].overloadTable[s]=t):(r[e]=t,void 0!==s&&(r[e].numArguments=s))}function Ue(e,t,s,i,r,o,n,a){this.name=e,this.constructor=t,this.instancePrototype=s,this.rawDestructor=i,this.baseClass=r,this.getActualType=o,this.upcast=n,this.downcast=a,this.pureVirtualFunctions=[]}function He(e,t,s){for(;t!==s;)t.upcast||ce("Expected null or instance of "+s.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function Ge(e,t){if(null===t)return this.isReference&&ce("null is not a valid "+this.name),0;t.$$||ce('Cannot pass "'+ut(t)+'" as a '+this.name),t.$$.ptr||ce("Cannot pass deleted object as a pointer of type "+this.name);var s=t.$$.ptrType.registeredClass;return He(t.$$.ptr,s,this.registeredClass)}function Ve(e,t){var s;if(null===t)return this.isReference&&ce("null is not a valid "+this.name),this.isSmartPointer?(s=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,s),s):0;t.$$||ce('Cannot pass "'+ut(t)+'" as a '+this.name),t.$$.ptr||ce("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&ce("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var i=t.$$.ptrType.registeredClass;if(s=He(t.$$.ptr,i,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&ce("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?s=t.$$.smartPtr:ce("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:s=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)s=t.$$.smartPtr;else{var r=t.clone();s=this.rawShare(s,lt.toHandle((function(){r.delete()}))),null!==e&&e.push(this.rawDestructor,s)}break;default:ce("Unsupporting sharing policy")}return s}function ke(e,t){if(null===t)return this.isReference&&ce("null is not a valid "+this.name),0;t.$$||ce('Cannot pass "'+ut(t)+'" as a '+this.name),t.$$.ptr||ce("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&ce("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var s=t.$$.ptrType.registeredClass;return He(t.$$.ptr,s,this.registeredClass)}function je(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function Qe(e){this.rawDestructor&&this.rawDestructor(e)}function We(e){null!==e&&e.delete()}function ze(e,t,s,i,r,o,n,a,l,h,c){this.name=e,this.registeredClass=t,this.isReference=s,this.isConst=i,this.isSmartPointer=r,this.pointeeType=o,this.sharingPolicy=n,this.rawGetPointee=a,this.rawConstructor=l,this.rawShare=h,this.rawDestructor=c,r||void 0!==t.baseClass?this.toWireType=Ve:i?(this.toWireType=Ge,this.destructorFunction=null):(this.toWireType=ke,this.destructorFunction=null)}function Ke(e,t,s){r.hasOwnProperty(e)||ie("Replacing nonexistant public symbol"),void 0!==r[e].overloadTable&&void 0!==s?r[e].overloadTable[s]=t:(r[e]=t,r[e].argCount=s)}var Ye=[];function Xe(e){var t=Ye[e];return t||(e>=Ye.length&&(Ye.length=e+1),Ye[e]=t=P.get(e)),t}function Ze(e,t,s){return e.includes("j")?function(e,t,s){var i=r["dynCall_"+e];return s&&s.length?i.apply(null,[t].concat(s)):i.call(null,t)}(e,t,s):Xe(t).apply(null,s)}function qe(e,t){var s,i,r,o=(e=le(e)).includes("j")?(s=e,i=t,r=[],function(){return r.length=0,Object.assign(r,arguments),Ze(s,i,r)}):Xe(t);return"function"!=typeof o&&ce("unknown function pointer with signature "+e+": "+t),o}var Je=void 0;function $e(e){var t=Qt(e),s=le(t);return zt(t),s}function et(e,t){var s=[],i={};throw t.forEach((function e(t){i[t]||q[t]||(J[t]?J[t].forEach(e):(s.push(t),i[t]=!0))})),new Je(e+": "+s.map($e).join([", "]))}function tt(e,t){for(var s=[],i=0;i<e;i++)s.push(_[t+4*i>>>2]);return s}function st(e,t,s,i,r){var o=t.length;o<2&&ce("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var n=null!==t[1]&&null!==s,a=!1,l=1;l<t.length;++l)if(null!==t[l]&&void 0===t[l].destructorFunction){a=!0;break}var h="void"!==t[0].name,c="",u="";for(l=0;l<o-2;++l)c+=(0!==l?", ":"")+"arg"+l,u+=(0!==l?", ":"")+"arg"+l+"Wired";var A="return function "+$(e)+"("+c+") {\nif (arguments.length !== "+(o-2)+") {\nthrowBindingError('function "+e+" called with ' + arguments.length + ' arguments, expected "+(o-2)+" args!');\n}\n";a&&(A+="var destructors = [];\n");var p=a?"destructors":"null",d=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],f=[ce,i,r,Y,t[0],t[1]];for(n&&(A+="var thisWired = classParam.toWireType("+p+", this);\n"),l=0;l<o-2;++l)A+="var arg"+l+"Wired = argType"+l+".toWireType("+p+", arg"+l+"); // "+t[l+2].name+"\n",d.push("argType"+l),f.push(t[l+2]);if(n&&(u="thisWired"+(u.length>0?", ":"")+u),A+=(h?"var rv = ":"")+"invoker(fn"+(u.length>0?", ":"")+u+");\n",a)A+="runDestructors(destructors);\n";else for(l=n?1:2;l<t.length;++l){var m=1===l?"thisWired":"arg"+(l-2)+"Wired";null!==t[l].destructorFunction&&(A+=m+"_dtor("+m+"); // "+t[l].name+"\n",d.push(m+"_dtor"),f.push(t[l].destructorFunction))}h&&(A+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),A+="}\n",d.push(A);var g=function(e,t){if(!(e instanceof Function))throw new TypeError("new_ called with constructor type "+typeof e+" which is not a function");var s=ee(e.name||"unknownFunctionName",(function(){}));s.prototype=e.prototype;var i=new s,r=e.apply(i,t);return r instanceof Object?r:i}(Function,d).apply(null,f);return g}var it=[],rt=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function ot(e){e>4&&0==--rt[e].refcount&&(rt[e]=void 0,it.push(e))}function nt(){for(var e=0,t=5;t<rt.length;++t)void 0!==rt[t]&&++e;return e}function at(){for(var e=5;e<rt.length;++e)if(void 0!==rt[e])return rt[e];return null}var lt={toValue:e=>(e||ce("Cannot use deleted val. handle = "+e),rt[e].value),toHandle:e=>{switch(e){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var t=it.length?it.pop():rt.length;return rt[t]={refcount:1,value:e},t}}};function ht(e,t,s){switch(t){case 0:return function(e){var t=s?m:g;return this.fromWireType(t[e>>>0])};case 1:return function(e){var t=s?y:E;return this.fromWireType(t[e>>>1])};case 2:return function(e){var t=s?v:_;return this.fromWireType(t[e>>>2])};default:throw new TypeError("Unknown integer type: "+e)}}function ct(e,t){var s=q[e];return void 0===s&&ce(t+" has unknown type "+$e(e)),s}function ut(e){if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e}function At(e,t){switch(t){case 2:return function(e){return this.fromWireType(I[e>>>2])};case 3:return function(e){return this.fromWireType(T[e>>>3])};default:throw new TypeError("Unknown float type: "+e)}}function pt(e,t,s){switch(t){case 0:return s?function(e){return m[e>>>0]}:function(e){return g[e>>>0]};case 1:return s?function(e){return y[e>>>1]}:function(e){return E[e>>>1]};case 2:return s?function(e){return v[e>>>2]}:function(e){return _[e>>>2]};default:throw new TypeError("Unknown integer type: "+e)}}var dt="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function ft(e,t){for(var s=e,i=s>>1,r=i+t/2;!(i>=r)&&E[i>>>0];)++i;if((s=i<<1)-e>32&&dt)return dt.decode(g.subarray(e>>>0,s>>>0));for(var o="",n=0;!(n>=t/2);++n){var a=y[e+2*n>>>1];if(0==a)break;o+=String.fromCharCode(a)}return o}function mt(e,t,s){if(void 0===s&&(s=2147483647),s<2)return 0;for(var i=t,r=(s-=2)<2*e.length?s/2:e.length,o=0;o<r;++o){var n=e.charCodeAt(o);y[t>>>1]=n,t+=2}return y[t>>>1]=0,t-i}function gt(e){return 2*e.length}function yt(e,t){for(var s=0,i="";!(s>=t/4);){var r=v[e+4*s>>>2];if(0==r)break;if(++s,r>=65536){var o=r-65536;i+=String.fromCharCode(55296|o>>10,56320|1023&o)}else i+=String.fromCharCode(r)}return i}function Et(e,t,s){if(void 0===s&&(s=2147483647),s<4)return 0;for(var i=t>>>=0,r=i+s-4,o=0;o<e.length;++o){var n=e.charCodeAt(o);if(n>=55296&&n<=57343&&(n=65536+((1023&n)<<10)|1023&e.charCodeAt(++o)),v[t>>>2]=n,(t+=4)+4>r)break}return v[t>>>2]=0,t-i}function vt(e){for(var t=0,s=0;s<e.length;++s){var i=e.charCodeAt(s);i>=55296&&i<=57343&&++s,t+=4}return t}var _t={};function It(e){var t=_t[e];return void 0===t?le(e):t}function Tt(){return"object"==typeof globalThis?globalThis:Function("return this")()}function Pt(e){var t=u.buffer;try{return u.grow(e-t.byteLength+65535>>>16),N(),1}catch(e){}}var Dt={};function bt(){if(!bt.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:l||"./this.program"};for(var t in Dt)void 0===Dt[t]?delete e[t]:e[t]=Dt[t];var s=[];for(var t in e)s.push(t+"="+e[t]);bt.strings=s}return bt.strings}var Rt={isAbs:e=>"/"===e.charAt(0),splitPath:e=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1),normalizeArray:(e,t)=>{for(var s=0,i=e.length-1;i>=0;i--){var r=e[i];"."===r?e.splice(i,1):".."===r?(e.splice(i,1),s++):s&&(e.splice(i,1),s--)}if(t)for(;s;s--)e.unshift("..");return e},normalize:e=>{var t=Rt.isAbs(e),s="/"===e.substr(-1);return e=Rt.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/"),e||t||(e="."),e&&s&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=Rt.splitPath(e),s=t[0],i=t[1];return s||i?(i&&(i=i.substr(0,i.length-1)),s+i):"."},basename:e=>{if("/"===e)return"/";var t=(e=(e=Rt.normalize(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},join:function(){var e=Array.prototype.slice.call(arguments);return Rt.normalize(e.join("/"))},join2:(e,t)=>Rt.normalize(e+"/"+t)},Ct={resolve:function(){for(var e="",t=!1,s=arguments.length-1;s>=-1&&!t;s--){var i=s>=0?arguments[s]:wt.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");if(!i)return"";e=i+"/"+e,t=Rt.isAbs(i)}return e=Rt.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/"),(t?"/":"")+e||"."},relative:(e,t)=>{function s(e){for(var t=0;t<e.length&&""===e[t];t++);for(var s=e.length-1;s>=0&&""===e[s];s--);return t>s?[]:e.slice(t,s-t+1)}e=Ct.resolve(e).substr(1),t=Ct.resolve(t).substr(1);for(var i=s(e.split("/")),r=s(t.split("/")),o=Math.min(i.length,r.length),n=o,a=0;a<o;a++)if(i[a]!==r[a]){n=a;break}var l=[];for(a=n;a<i.length;a++)l.push("..");return(l=l.concat(r.slice(n))).join("/")}};function xt(e,t,s){var i=s>0?s:x(e)+1,r=new Array(i),o=C(e,r,0,r.length);return t&&(r.length=o),r}var Nt={ttys:[],init:function(){},shutdown:function(){},register:function(e,t){Nt.ttys[e]={input:[],output:[],ops:t},wt.registerDevice(e,Nt.stream_ops)},stream_ops:{open:function(e){var t=Nt.ttys[e.node.rdev];if(!t)throw new wt.ErrnoError(43);e.tty=t,e.seekable=!1},close:function(e){e.tty.ops.fsync(e.tty)},fsync:function(e){e.tty.ops.fsync(e.tty)},read:function(e,t,s,i,r){if(!e.tty||!e.tty.ops.get_char)throw new wt.ErrnoError(60);for(var o=0,n=0;n<i;n++){var a;try{a=e.tty.ops.get_char(e.tty)}catch(e){throw new wt.ErrnoError(29)}if(void 0===a&&0===o)throw new wt.ErrnoError(6);if(null==a)break;o++,t[s+n]=a}return o&&(e.node.timestamp=Date.now()),o},write:function(e,t,s,i,r){if(!e.tty||!e.tty.ops.put_char)throw new wt.ErrnoError(60);try{for(var o=0;o<i;o++)e.tty.ops.put_char(e.tty,t[s+o])}catch(e){throw new wt.ErrnoError(29)}return i&&(e.node.timestamp=Date.now()),o}},default_tty_ops:{get_char:function(e){if(!e.input.length){var t=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(t=window.prompt("Input: "))&&(t+="\n"):"function"==typeof readline&&null!==(t=readline())&&(t+="\n"),!t)return null;e.input=xt(t,!0)}return e.input.shift()},put_char:function(e,t){null===t||10===t?(A(b(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},fsync:function(e){e.output&&e.output.length>0&&(A(b(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,t){null===t||10===t?(p(b(e.output,0)),e.output=[]):0!=t&&e.output.push(t)},fsync:function(e){e.output&&e.output.length>0&&(p(b(e.output,0)),e.output=[])}}};function Ot(e){k()}var St={ops_table:null,mount:function(e){return St.createNode(null,"/",16895,0)},createNode:function(e,t,s,i){if(wt.isBlkdev(s)||wt.isFIFO(s))throw new wt.ErrnoError(63);St.ops_table||(St.ops_table={dir:{node:{getattr:St.node_ops.getattr,setattr:St.node_ops.setattr,lookup:St.node_ops.lookup,mknod:St.node_ops.mknod,rename:St.node_ops.rename,unlink:St.node_ops.unlink,rmdir:St.node_ops.rmdir,readdir:St.node_ops.readdir,symlink:St.node_ops.symlink},stream:{llseek:St.stream_ops.llseek}},file:{node:{getattr:St.node_ops.getattr,setattr:St.node_ops.setattr},stream:{llseek:St.stream_ops.llseek,read:St.stream_ops.read,write:St.stream_ops.write,allocate:St.stream_ops.allocate,mmap:St.stream_ops.mmap,msync:St.stream_ops.msync}},link:{node:{getattr:St.node_ops.getattr,setattr:St.node_ops.setattr,readlink:St.node_ops.readlink},stream:{}},chrdev:{node:{getattr:St.node_ops.getattr,setattr:St.node_ops.setattr},stream:wt.chrdev_stream_ops}});var r=wt.createNode(e,t,s,i);return wt.isDir(r.mode)?(r.node_ops=St.ops_table.dir.node,r.stream_ops=St.ops_table.dir.stream,r.contents={}):wt.isFile(r.mode)?(r.node_ops=St.ops_table.file.node,r.stream_ops=St.ops_table.file.stream,r.usedBytes=0,r.contents=null):wt.isLink(r.mode)?(r.node_ops=St.ops_table.link.node,r.stream_ops=St.ops_table.link.stream):wt.isChrdev(r.mode)&&(r.node_ops=St.ops_table.chrdev.node,r.stream_ops=St.ops_table.chrdev.stream),r.timestamp=Date.now(),e&&(e.contents[t]=r,e.timestamp=r.timestamp),r},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,t){t>>>=0;var s=e.contents?e.contents.length:0;if(!(s>=t)){t=Math.max(t,s*(s<1048576?2:1.125)>>>0),0!=s&&(t=Math.max(t,256));var i=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(i.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,t){if(t>>>=0,e.usedBytes!=t)if(0==t)e.contents=null,e.usedBytes=0;else{var s=e.contents;e.contents=new Uint8Array(t),s&&e.contents.set(s.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr:function(e){var t={};return t.dev=wt.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,wt.isDir(e.mode)?t.size=4096:wt.isFile(e.mode)?t.size=e.usedBytes:wt.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr:function(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&St.resizeFileStorage(e,t.size)},lookup:function(e,t){throw wt.genericErrors[44]},mknod:function(e,t,s,i){return St.createNode(e,t,s,i)},rename:function(e,t,s){if(wt.isDir(e.mode)){var i;try{i=wt.lookupNode(t,s)}catch(e){}if(i)for(var r in i.contents)throw new wt.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=s,t.contents[s]=e,t.timestamp=e.parent.timestamp,e.parent=t},unlink:function(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir:function(e,t){var s=wt.lookupNode(e,t);for(var i in s.contents)throw new wt.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir:function(e){var t=[".",".."];for(var s in e.contents)e.contents.hasOwnProperty(s)&&t.push(s);return t},symlink:function(e,t,s){var i=St.createNode(e,t,41471,0);return i.link=s,i},readlink:function(e){if(!wt.isLink(e.mode))throw new wt.ErrnoError(28);return e.link}},stream_ops:{read:function(e,t,s,i,r){var o=e.node.contents;if(r>=e.node.usedBytes)return 0;var n=Math.min(e.node.usedBytes-r,i);if(n>8&&o.subarray)t.set(o.subarray(r,r+n),s);else for(var a=0;a<n;a++)t[s+a]=o[r+a];return n},write:function(e,t,s,i,r,o){if(t.buffer===m.buffer&&(o=!1),!i)return 0;var n=e.node;if(n.timestamp=Date.now(),t.subarray&&(!n.contents||n.contents.subarray)){if(o)return n.contents=t.subarray(s,s+i),n.usedBytes=i,i;if(0===n.usedBytes&&0===r)return n.contents=t.slice(s,s+i),n.usedBytes=i,i;if(r+i<=n.usedBytes)return n.contents.set(t.subarray(s,s+i),r),i}if(St.expandFileStorage(n,r+i),n.contents.subarray&&t.subarray)n.contents.set(t.subarray(s,s+i),r);else for(var a=0;a<i;a++)n.contents[r+a]=t[s+a];return n.usedBytes=Math.max(n.usedBytes,r+i),i},llseek:function(e,t,s){var i=t;if(1===s?i+=e.position:2===s&&wt.isFile(e.node.mode)&&(i+=e.node.usedBytes),i<0)throw new wt.ErrnoError(28);return i},allocate:function(e,t,s){St.expandFileStorage(e.node,t+s),e.node.usedBytes=Math.max(e.node.usedBytes,t+s)},mmap:function(e,t,s,i,r){if(!wt.isFile(e.node.mode))throw new wt.ErrnoError(43);var o,n,a=e.node.contents;if(2&r||a.buffer!==m.buffer){if((s>0||s+t<a.length)&&(a=a.subarray?a.subarray(s,s+t):Array.prototype.slice.call(a,s,s+t)),n=!0,!(o=Ot()))throw new wt.ErrnoError(48);o>>>=0,m.set(a,o>>>0)}else n=!1,o=a.byteOffset;return{ptr:o,allocated:n}},msync:function(e,t,s,i,r){return St.stream_ops.write(e,t,0,i,s,!1),0}}},wt={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(e,t={})=>{if(!(e=Ct.resolve(e)))return{path:"",node:null};if((t=Object.assign({follow_mount:!0,recurse_count:0},t)).recurse_count>8)throw new wt.ErrnoError(32);for(var s=e.split("/").filter((e=>!!e)),i=wt.root,r="/",o=0;o<s.length;o++){var n=o===s.length-1;if(n&&t.parent)break;if(i=wt.lookupNode(i,s[o]),r=Rt.join2(r,s[o]),wt.isMountpoint(i)&&(!n||n&&t.follow_mount)&&(i=i.mounted.root),!n||t.follow)for(var a=0;wt.isLink(i.mode);){var l=wt.readlink(r);if(r=Ct.resolve(Rt.dirname(r),l),i=wt.lookupPath(r,{recurse_count:t.recurse_count+1}).node,a++>40)throw new wt.ErrnoError(32)}}return{path:r,node:i}},getPath:e=>{for(var t;;){if(wt.isRoot(e)){var s=e.mount.mountpoint;return t?"/"!==s[s.length-1]?s+"/"+t:s+t:s}t=t?e.name+"/"+t:e.name,e=e.parent}},hashName:(e,t)=>{for(var s=0,i=0;i<t.length;i++)s=(s<<5)-s+t.charCodeAt(i)|0;return(e+s>>>0)%wt.nameTable.length},hashAddNode:e=>{var t=wt.hashName(e.parent.id,e.name);e.name_next=wt.nameTable[t],wt.nameTable[t]=e},hashRemoveNode:e=>{var t=wt.hashName(e.parent.id,e.name);if(wt.nameTable[t]===e)wt.nameTable[t]=e.name_next;else for(var s=wt.nameTable[t];s;){if(s.name_next===e){s.name_next=e.name_next;break}s=s.name_next}},lookupNode:(e,t)=>{var s=wt.mayLookup(e);if(s)throw new wt.ErrnoError(s,e);for(var i=wt.hashName(e.id,t),r=wt.nameTable[i];r;r=r.name_next){var o=r.name;if(r.parent.id===e.id&&o===t)return r}return wt.lookup(e,t)},createNode:(e,t,s,i)=>{var r=new wt.FSNode(e,t,s,i);return wt.hashAddNode(r),r},destroyNode:e=>{wt.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>32768==(61440&e),isDir:e=>16384==(61440&e),isLink:e=>40960==(61440&e),isChrdev:e=>8192==(61440&e),isBlkdev:e=>24576==(61440&e),isFIFO:e=>4096==(61440&e),isSocket:e=>49152==(49152&e),flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:e=>{var t=wt.flagModes[e];if(void 0===t)throw new Error("Unknown file open mode: "+e);return t},flagsToPermissionString:e=>{var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:(e,t)=>wt.ignorePermissions||(!t.includes("r")||292&e.mode)&&(!t.includes("w")||146&e.mode)&&(!t.includes("x")||73&e.mode)?0:2,mayLookup:e=>{var t=wt.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate:(e,t)=>{try{return wt.lookupNode(e,t),20}catch(e){}return wt.nodePermissions(e,"wx")},mayDelete:(e,t,s)=>{var i;try{i=wt.lookupNode(e,t)}catch(e){return e.errno}var r=wt.nodePermissions(e,"wx");if(r)return r;if(s){if(!wt.isDir(i.mode))return 54;if(wt.isRoot(i)||wt.getPath(i)===wt.cwd())return 10}else if(wt.isDir(i.mode))return 31;return 0},mayOpen:(e,t)=>e?wt.isLink(e.mode)?32:wt.isDir(e.mode)&&("r"!==wt.flagsToPermissionString(t)||512&t)?31:wt.nodePermissions(e,wt.flagsToPermissionString(t)):44,MAX_OPEN_FDS:4096,nextfd:(e=0,t=wt.MAX_OPEN_FDS)=>{for(var s=e;s<=t;s++)if(!wt.streams[s])return s;throw new wt.ErrnoError(33)},getStream:e=>wt.streams[e],createStream:(e,t,s)=>{wt.FSStream||(wt.FSStream=function(){this.shared={}},wt.FSStream.prototype={},Object.defineProperties(wt.FSStream.prototype,{object:{get:function(){return this.node},set:function(e){this.node=e}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return 0!=(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}},flags:{get:function(){return this.shared.flags},set:function(e){this.shared.flags=e}},position:{get:function(){return this.shared.position},set:function(e){this.shared.position=e}}})),e=Object.assign(new wt.FSStream,e);var i=wt.nextfd(t,s);return e.fd=i,wt.streams[i]=e,e},closeStream:e=>{wt.streams[e]=null},chrdev_stream_ops:{open:e=>{var t=wt.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:()=>{throw new wt.ErrnoError(70)}},major:e=>e>>8,minor:e=>255&e,makedev:(e,t)=>e<<8|t,registerDevice:(e,t)=>{wt.devices[e]={stream_ops:t}},getDevice:e=>wt.devices[e],getMounts:e=>{for(var t=[],s=[e];s.length;){var i=s.pop();t.push(i),s.push.apply(s,i.mounts)}return t},syncfs:(e,t)=>{"function"==typeof e&&(t=e,e=!1),wt.syncFSRequests++,wt.syncFSRequests>1&&p("warning: "+wt.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var s=wt.getMounts(wt.root.mount),i=0;function r(e){return wt.syncFSRequests--,t(e)}function o(e){if(e)return o.errored?void 0:(o.errored=!0,r(e));++i>=s.length&&r(null)}s.forEach((t=>{if(!t.type.syncfs)return o(null);t.type.syncfs(t,e,o)}))},mount:(e,t,s)=>{var i,r="/"===s,o=!s;if(r&&wt.root)throw new wt.ErrnoError(10);if(!r&&!o){var n=wt.lookupPath(s,{follow_mount:!1});if(s=n.path,i=n.node,wt.isMountpoint(i))throw new wt.ErrnoError(10);if(!wt.isDir(i.mode))throw new wt.ErrnoError(54)}var a={type:e,opts:t,mountpoint:s,mounts:[]},l=e.mount(a);return l.mount=a,a.root=l,r?wt.root=l:i&&(i.mounted=a,i.mount&&i.mount.mounts.push(a)),l},unmount:e=>{var t=wt.lookupPath(e,{follow_mount:!1});if(!wt.isMountpoint(t.node))throw new wt.ErrnoError(28);var s=t.node,i=s.mounted,r=wt.getMounts(i);Object.keys(wt.nameTable).forEach((e=>{for(var t=wt.nameTable[e];t;){var s=t.name_next;r.includes(t.mount)&&wt.destroyNode(t),t=s}})),s.mounted=null;var o=s.mount.mounts.indexOf(i);s.mount.mounts.splice(o,1)},lookup:(e,t)=>e.node_ops.lookup(e,t),mknod:(e,t,s)=>{var i=wt.lookupPath(e,{parent:!0}).node,r=Rt.basename(e);if(!r||"."===r||".."===r)throw new wt.ErrnoError(28);var o=wt.mayCreate(i,r);if(o)throw new wt.ErrnoError(o);if(!i.node_ops.mknod)throw new wt.ErrnoError(63);return i.node_ops.mknod(i,r,t,s)},create:(e,t)=>(t=void 0!==t?t:438,t&=4095,t|=32768,wt.mknod(e,t,0)),mkdir:(e,t)=>(t=void 0!==t?t:511,t&=1023,t|=16384,wt.mknod(e,t,0)),mkdirTree:(e,t)=>{for(var s=e.split("/"),i="",r=0;r<s.length;++r)if(s[r]){i+="/"+s[r];try{wt.mkdir(i,t)}catch(e){if(20!=e.errno)throw e}}},mkdev:(e,t,s)=>(void 0===s&&(s=t,t=438),t|=8192,wt.mknod(e,t,s)),symlink:(e,t)=>{if(!Ct.resolve(e))throw new wt.ErrnoError(44);var s=wt.lookupPath(t,{parent:!0}).node;if(!s)throw new wt.ErrnoError(44);var i=Rt.basename(t),r=wt.mayCreate(s,i);if(r)throw new wt.ErrnoError(r);if(!s.node_ops.symlink)throw new wt.ErrnoError(63);return s.node_ops.symlink(s,i,e)},rename:(e,t)=>{var s,i,r=Rt.dirname(e),o=Rt.dirname(t),n=Rt.basename(e),a=Rt.basename(t);if(s=wt.lookupPath(e,{parent:!0}).node,i=wt.lookupPath(t,{parent:!0}).node,!s||!i)throw new wt.ErrnoError(44);if(s.mount!==i.mount)throw new wt.ErrnoError(75);var l,h=wt.lookupNode(s,n),c=Ct.relative(e,o);if("."!==c.charAt(0))throw new wt.ErrnoError(28);if("."!==(c=Ct.relative(t,r)).charAt(0))throw new wt.ErrnoError(55);try{l=wt.lookupNode(i,a)}catch(e){}if(h!==l){var u=wt.isDir(h.mode),A=wt.mayDelete(s,n,u);if(A)throw new wt.ErrnoError(A);if(A=l?wt.mayDelete(i,a,u):wt.mayCreate(i,a))throw new wt.ErrnoError(A);if(!s.node_ops.rename)throw new wt.ErrnoError(63);if(wt.isMountpoint(h)||l&&wt.isMountpoint(l))throw new wt.ErrnoError(10);if(i!==s&&(A=wt.nodePermissions(s,"w")))throw new wt.ErrnoError(A);wt.hashRemoveNode(h);try{s.node_ops.rename(h,i,a)}catch(e){throw e}finally{wt.hashAddNode(h)}}},rmdir:e=>{var t=wt.lookupPath(e,{parent:!0}).node,s=Rt.basename(e),i=wt.lookupNode(t,s),r=wt.mayDelete(t,s,!0);if(r)throw new wt.ErrnoError(r);if(!t.node_ops.rmdir)throw new wt.ErrnoError(63);if(wt.isMountpoint(i))throw new wt.ErrnoError(10);t.node_ops.rmdir(t,s),wt.destroyNode(i)},readdir:e=>{var t=wt.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new wt.ErrnoError(54);return t.node_ops.readdir(t)},unlink:e=>{var t=wt.lookupPath(e,{parent:!0}).node;if(!t)throw new wt.ErrnoError(44);var s=Rt.basename(e),i=wt.lookupNode(t,s),r=wt.mayDelete(t,s,!1);if(r)throw new wt.ErrnoError(r);if(!t.node_ops.unlink)throw new wt.ErrnoError(63);if(wt.isMountpoint(i))throw new wt.ErrnoError(10);t.node_ops.unlink(t,s),wt.destroyNode(i)},readlink:e=>{var t=wt.lookupPath(e).node;if(!t)throw new wt.ErrnoError(44);if(!t.node_ops.readlink)throw new wt.ErrnoError(28);return Ct.resolve(wt.getPath(t.parent),t.node_ops.readlink(t))},stat:(e,t)=>{var s=wt.lookupPath(e,{follow:!t}).node;if(!s)throw new wt.ErrnoError(44);if(!s.node_ops.getattr)throw new wt.ErrnoError(63);return s.node_ops.getattr(s)},lstat:e=>wt.stat(e,!0),chmod:(e,t,s)=>{var i;if(!(i="string"==typeof e?wt.lookupPath(e,{follow:!s}).node:e).node_ops.setattr)throw new wt.ErrnoError(63);i.node_ops.setattr(i,{mode:4095&t|-4096&i.mode,timestamp:Date.now()})},lchmod:(e,t)=>{wt.chmod(e,t,!0)},fchmod:(e,t)=>{var s=wt.getStream(e);if(!s)throw new wt.ErrnoError(8);wt.chmod(s.node,t)},chown:(e,t,s,i)=>{var r;if(!(r="string"==typeof e?wt.lookupPath(e,{follow:!i}).node:e).node_ops.setattr)throw new wt.ErrnoError(63);r.node_ops.setattr(r,{timestamp:Date.now()})},lchown:(e,t,s)=>{wt.chown(e,t,s,!0)},fchown:(e,t,s)=>{var i=wt.getStream(e);if(!i)throw new wt.ErrnoError(8);wt.chown(i.node,t,s)},truncate:(e,t)=>{if(t<0)throw new wt.ErrnoError(28);var s;if(!(s="string"==typeof e?wt.lookupPath(e,{follow:!0}).node:e).node_ops.setattr)throw new wt.ErrnoError(63);if(wt.isDir(s.mode))throw new wt.ErrnoError(31);if(!wt.isFile(s.mode))throw new wt.ErrnoError(28);var i=wt.nodePermissions(s,"w");if(i)throw new wt.ErrnoError(i);s.node_ops.setattr(s,{size:t,timestamp:Date.now()})},ftruncate:(e,t)=>{var s=wt.getStream(e);if(!s)throw new wt.ErrnoError(8);if(0==(2097155&s.flags))throw new wt.ErrnoError(28);wt.truncate(s.node,t)},utime:(e,t,s)=>{var i=wt.lookupPath(e,{follow:!0}).node;i.node_ops.setattr(i,{timestamp:Math.max(t,s)})},open:(e,t,s)=>{if(""===e)throw new wt.ErrnoError(44);var i;if(s=void 0===s?438:s,s=64&(t="string"==typeof t?wt.modeStringToFlags(t):t)?4095&s|32768:0,"object"==typeof e)i=e;else{e=Rt.normalize(e);try{i=wt.lookupPath(e,{follow:!(131072&t)}).node}catch(e){}}var o=!1;if(64&t)if(i){if(128&t)throw new wt.ErrnoError(20)}else i=wt.mknod(e,s,0),o=!0;if(!i)throw new wt.ErrnoError(44);if(wt.isChrdev(i.mode)&&(t&=-513),65536&t&&!wt.isDir(i.mode))throw new wt.ErrnoError(54);if(!o){var n=wt.mayOpen(i,t);if(n)throw new wt.ErrnoError(n)}512&t&&!o&&wt.truncate(i,0),t&=-131713;var a=wt.createStream({node:i,path:wt.getPath(i),flags:t,seekable:!0,position:0,stream_ops:i.stream_ops,ungotten:[],error:!1});return a.stream_ops.open&&a.stream_ops.open(a),!r.logReadFiles||1&t||(wt.readFiles||(wt.readFiles={}),e in wt.readFiles||(wt.readFiles[e]=1)),a},close:e=>{if(wt.isClosed(e))throw new wt.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{wt.closeStream(e.fd)}e.fd=null},isClosed:e=>null===e.fd,llseek:(e,t,s)=>{if(wt.isClosed(e))throw new wt.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new wt.ErrnoError(70);if(0!=s&&1!=s&&2!=s)throw new wt.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,s),e.ungotten=[],e.position},read:(e,t,s,i,r)=>{if(s>>>=0,i<0||r<0)throw new wt.ErrnoError(28);if(wt.isClosed(e))throw new wt.ErrnoError(8);if(1==(2097155&e.flags))throw new wt.ErrnoError(8);if(wt.isDir(e.node.mode))throw new wt.ErrnoError(31);if(!e.stream_ops.read)throw new wt.ErrnoError(28);var o=void 0!==r;if(o){if(!e.seekable)throw new wt.ErrnoError(70)}else r=e.position;var n=e.stream_ops.read(e,t,s,i,r);return o||(e.position+=n),n},write:(e,t,s,i,r,o)=>{if(s>>>=0,i<0||r<0)throw new wt.ErrnoError(28);if(wt.isClosed(e))throw new wt.ErrnoError(8);if(0==(2097155&e.flags))throw new wt.ErrnoError(8);if(wt.isDir(e.node.mode))throw new wt.ErrnoError(31);if(!e.stream_ops.write)throw new wt.ErrnoError(28);e.seekable&&1024&e.flags&&wt.llseek(e,0,2);var n=void 0!==r;if(n){if(!e.seekable)throw new wt.ErrnoError(70)}else r=e.position;var a=e.stream_ops.write(e,t,s,i,r,o);return n||(e.position+=a),a},allocate:(e,t,s)=>{if(wt.isClosed(e))throw new wt.ErrnoError(8);if(t<0||s<=0)throw new wt.ErrnoError(28);if(0==(2097155&e.flags))throw new wt.ErrnoError(8);if(!wt.isFile(e.node.mode)&&!wt.isDir(e.node.mode))throw new wt.ErrnoError(43);if(!e.stream_ops.allocate)throw new wt.ErrnoError(138);e.stream_ops.allocate(e,t,s)},mmap:(e,t,s,i,r)=>{if(0!=(2&i)&&0==(2&r)&&2!=(2097155&e.flags))throw new wt.ErrnoError(2);if(1==(2097155&e.flags))throw new wt.ErrnoError(2);if(!e.stream_ops.mmap)throw new wt.ErrnoError(43);return e.stream_ops.mmap(e,t,s,i,r)},msync:(e,t,s,i,r)=>(s>>>=0,e.stream_ops.msync?e.stream_ops.msync(e,t,s,i,r):0),munmap:e=>0,ioctl:(e,t,s)=>{if(!e.stream_ops.ioctl)throw new wt.ErrnoError(59);return e.stream_ops.ioctl(e,t,s)},readFile:(e,t={})=>{if(t.flags=t.flags||0,t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error('Invalid encoding type "'+t.encoding+'"');var s,i=wt.open(e,t.flags),r=wt.stat(e).size,o=new Uint8Array(r);return wt.read(i,o,0,r,0),"utf8"===t.encoding?s=b(o,0):"binary"===t.encoding&&(s=o),wt.close(i),s},writeFile:(e,t,s={})=>{s.flags=s.flags||577;var i=wt.open(e,s.flags,s.mode);if("string"==typeof t){var r=new Uint8Array(x(t)+1),o=C(t,r,0,r.length);wt.write(i,r,0,o,void 0,s.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");wt.write(i,t,0,t.byteLength,void 0,s.canOwn)}wt.close(i)},cwd:()=>wt.currentPath,chdir:e=>{var t=wt.lookupPath(e,{follow:!0});if(null===t.node)throw new wt.ErrnoError(44);if(!wt.isDir(t.node.mode))throw new wt.ErrnoError(54);var s=wt.nodePermissions(t.node,"x");if(s)throw new wt.ErrnoError(s);wt.currentPath=t.path},createDefaultDirectories:()=>{wt.mkdir("/tmp"),wt.mkdir("/home"),wt.mkdir("/home/web_user")},createDefaultDevices:()=>{wt.mkdir("/dev"),wt.registerDevice(wt.makedev(1,3),{read:()=>0,write:(e,t,s,i,r)=>i}),wt.mkdev("/dev/null",wt.makedev(1,3)),Nt.register(wt.makedev(5,0),Nt.default_tty_ops),Nt.register(wt.makedev(6,0),Nt.default_tty1_ops),wt.mkdev("/dev/tty",wt.makedev(5,0)),wt.mkdev("/dev/tty1",wt.makedev(6,0));var e=function(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var e=new Uint8Array(1);return()=>(crypto.getRandomValues(e),e[0])}return()=>k("randomDevice")}();wt.createDevice("/dev","random",e),wt.createDevice("/dev","urandom",e),wt.mkdir("/dev/shm"),wt.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{wt.mkdir("/proc");var e=wt.mkdir("/proc/self");wt.mkdir("/proc/self/fd"),wt.mount({mount:()=>{var t=wt.createNode(e,"fd",16895,73);return t.node_ops={lookup:(e,t)=>{var s=+t,i=wt.getStream(s);if(!i)throw new wt.ErrnoError(8);var r={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>i.path}};return r.parent=r,r}},t}},{},"/proc/self/fd")},createStandardStreams:()=>{r.stdin?wt.createDevice("/dev","stdin",r.stdin):wt.symlink("/dev/tty","/dev/stdin"),r.stdout?wt.createDevice("/dev","stdout",null,r.stdout):wt.symlink("/dev/tty","/dev/stdout"),r.stderr?wt.createDevice("/dev","stderr",null,r.stderr):wt.symlink("/dev/tty1","/dev/stderr"),wt.open("/dev/stdin",0),wt.open("/dev/stdout",1),wt.open("/dev/stderr",1)},ensureErrnoError:()=>{wt.ErrnoError||(wt.ErrnoError=function(e,t){this.node=t,this.setErrno=function(e){this.errno=e},this.setErrno(e),this.message="FS error"},wt.ErrnoError.prototype=new Error,wt.ErrnoError.prototype.constructor=wt.ErrnoError,[44].forEach((e=>{wt.genericErrors[e]=new wt.ErrnoError(e),wt.genericErrors[e].stack="<generic error, no stack>"})))},staticInit:()=>{wt.ensureErrnoError(),wt.nameTable=new Array(4096),wt.mount(St,{},"/"),wt.createDefaultDirectories(),wt.createDefaultDevices(),wt.createSpecialDirectories(),wt.filesystems={MEMFS:St}},init:(e,t,s)=>{wt.init.initialized=!0,wt.ensureErrnoError(),r.stdin=e||r.stdin,r.stdout=t||r.stdout,r.stderr=s||r.stderr,wt.createStandardStreams()},quit:()=>{wt.init.initialized=!1;for(var e=0;e<wt.streams.length;e++){var t=wt.streams[e];t&&wt.close(t)}},getMode:(e,t)=>{var s=0;return e&&(s|=365),t&&(s|=146),s},findObject:(e,t)=>{var s=wt.analyzePath(e,t);return s.exists?s.object:null},analyzePath:(e,t)=>{try{e=(i=wt.lookupPath(e,{follow:!t})).path}catch(e){}var s={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var i=wt.lookupPath(e,{parent:!0});s.parentExists=!0,s.parentPath=i.path,s.parentObject=i.node,s.name=Rt.basename(e),i=wt.lookupPath(e,{follow:!t}),s.exists=!0,s.path=i.path,s.object=i.node,s.name=i.node.name,s.isRoot="/"===i.path}catch(e){s.error=e.errno}return s},createPath:(e,t,s,i)=>{e="string"==typeof e?e:wt.getPath(e);for(var r=t.split("/").reverse();r.length;){var o=r.pop();if(o){var n=Rt.join2(e,o);try{wt.mkdir(n)}catch(e){}e=n}}return n},createFile:(e,t,s,i,r)=>{var o=Rt.join2("string"==typeof e?e:wt.getPath(e),t),n=wt.getMode(i,r);return wt.create(o,n)},createDataFile:(e,t,s,i,r,o)=>{var n=t;e&&(e="string"==typeof e?e:wt.getPath(e),n=t?Rt.join2(e,t):e);var a=wt.getMode(i,r),l=wt.create(n,a);if(s){if("string"==typeof s){for(var h=new Array(s.length),c=0,u=s.length;c<u;++c)h[c]=s.charCodeAt(c);s=h}wt.chmod(l,146|a);var A=wt.open(l,577);wt.write(A,s,0,s.length,0,o),wt.close(A),wt.chmod(l,a)}return l},createDevice:(e,t,s,i)=>{var r=Rt.join2("string"==typeof e?e:wt.getPath(e),t),o=wt.getMode(!!s,!!i);wt.createDevice.major||(wt.createDevice.major=64);var n=wt.makedev(wt.createDevice.major++,0);return wt.registerDevice(n,{open:e=>{e.seekable=!1},close:e=>{i&&i.buffer&&i.buffer.length&&i(10)},read:(e,t,i,r,o)=>{for(var n=0,a=0;a<r;a++){var l;try{l=s()}catch(e){throw new wt.ErrnoError(29)}if(void 0===l&&0===n)throw new wt.ErrnoError(6);if(null==l)break;n++,t[i+a]=l}return n&&(e.node.timestamp=Date.now()),n},write:(e,t,s,r,o)=>{for(var n=0;n<r;n++)try{i(t[s+n])}catch(e){throw new wt.ErrnoError(29)}return r&&(e.node.timestamp=Date.now()),n}}),wt.mkdev(r,o,n)},forceLoadFile:e=>{if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!o)throw new Error("Cannot load without read() or XMLHttpRequest.");try{e.contents=xt(o(e.url),!0),e.usedBytes=e.contents.length}catch(e){throw new wt.ErrnoError(29)}},createLazyFile:(e,t,s,i,r)=>{function o(){this.lengthKnown=!1,this.chunks=[]}if(o.prototype.get=function(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,s=e/this.chunkSize|0;return this.getter(s)[t]}},o.prototype.setDataGetter=function(e){this.getter=e},o.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",s,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+s+". Status: "+e.status);var t,i=Number(e.getResponseHeader("Content-length")),r=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,o=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,n=1048576;r||(n=i);var a=this;a.setDataGetter((e=>{var t=e*n,r=(e+1)*n-1;if(r=Math.min(r,i-1),void 0===a.chunks[e]&&(a.chunks[e]=((e,t)=>{if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>i-1)throw new Error("only "+i+" bytes available! programmer error!");var r=new XMLHttpRequest;if(r.open("GET",s,!1),i!==n&&r.setRequestHeader("Range","bytes="+e+"-"+t),r.responseType="arraybuffer",r.overrideMimeType&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.send(null),!(r.status>=200&&r.status<300||304===r.status))throw new Error("Couldn't load "+s+". Status: "+r.status);return void 0!==r.response?new Uint8Array(r.response||[]):xt(r.responseText||"",!0)})(t,r)),void 0===a.chunks[e])throw new Error("doXHR failed!");return a.chunks[e]})),!o&&i||(n=i=1,i=this.getter(0).length,n=i,A("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=i,this._chunkSize=n,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var n={isDevice:!1,url:s},a=wt.createFile(e,t,n,i,r);n.contents?a.contents=n.contents:n.url&&(a.contents=null,a.url=n.url),Object.defineProperties(a,{usedBytes:{get:function(){return this.contents.length}}});var l={};function h(e,t,s,i,r){var o=e.node.contents;if(r>=o.length)return 0;var n=Math.min(o.length-r,i);if(o.slice)for(var a=0;a<n;a++)t[s+a]=o[r+a];else for(a=0;a<n;a++)t[s+a]=o.get(r+a);return n}return Object.keys(a.stream_ops).forEach((e=>{var t=a.stream_ops[e];l[e]=function(){return wt.forceLoadFile(a),t.apply(null,arguments)}})),l.read=(e,t,s,i,r)=>(wt.forceLoadFile(a),h(e,t,s,i,r)),l.mmap=(e,t,s,i,r)=>{wt.forceLoadFile(a);var o=Ot();if(!o)throw new wt.ErrnoError(48);return h(e,m,o,t,s),{ptr:o,allocated:!0}},a.stream_ops=l,a},createPreloadedFile:(e,t,s,i,r,o,a,l,h,c)=>{var u=t?Ct.resolve(Rt.join2(e,t)):e;function A(s){function n(s){c&&c(),l||wt.createDataFile(e,t,s,i,r,h),o&&o(),V()}Browser.handledByPreloadPlugin(s,u,n,(()=>{a&&a(),V()}))||n(s)}G(),"string"==typeof s?function(e,t,s,i){var r=i?"":"al "+e;n(e,(s=>{f(s,'Loading data file "'+e+'" failed (no arrayBuffer).'),t(new Uint8Array(s)),r&&V()}),(t=>{if(!s)throw'Loading data file "'+e+'" failed.';s()})),r&&G()}(s,(e=>A(e)),a):A(s)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(e,t=(()=>{}),s=(()=>{}))=>{var i=wt.indexedDB();try{var r=i.open(wt.DB_NAME(),wt.DB_VERSION)}catch(e){return s(e)}r.onupgradeneeded=()=>{A("creating db"),r.result.createObjectStore(wt.DB_STORE_NAME)},r.onsuccess=()=>{var i=r.result.transaction([wt.DB_STORE_NAME],"readwrite"),o=i.objectStore(wt.DB_STORE_NAME),n=0,a=0,l=e.length;function h(){0==a?t():s()}e.forEach((e=>{var t=o.put(wt.analyzePath(e).object.contents,e);t.onsuccess=()=>{++n+a==l&&h()},t.onerror=()=>{a++,n+a==l&&h()}})),i.onerror=s},r.onerror=s},loadFilesFromDB:(e,t=(()=>{}),s=(()=>{}))=>{var i=wt.indexedDB();try{var r=i.open(wt.DB_NAME(),wt.DB_VERSION)}catch(e){return s(e)}r.onupgradeneeded=s,r.onsuccess=()=>{var i=r.result;try{var o=i.transaction([wt.DB_STORE_NAME],"readonly")}catch(e){return void s(e)}var n=o.objectStore(wt.DB_STORE_NAME),a=0,l=0,h=e.length;function c(){0==l?t():s()}e.forEach((e=>{var t=n.get(e);t.onsuccess=()=>{wt.analyzePath(e).exists&&wt.unlink(e),wt.createDataFile(Rt.dirname(e),Rt.basename(e),t.result,!0,!0,!0),++a+l==h&&c()},t.onerror=()=>{l++,a+l==h&&c()}})),o.onerror=s},r.onerror=s}},Mt={DEFAULT_POLLMASK:5,calculateAt:function(e,t,s){if(Rt.isAbs(t))return t;var i;if(i=-100===e?wt.cwd():Mt.getStreamFromFD(e).path,0==t.length){if(!s)throw new wt.ErrnoError(44);return i}return Rt.join2(i,t)},doStat:function(e,t,s){try{var i=e(t)}catch(e){if(e&&e.node&&Rt.normalize(t)!==Rt.normalize(wt.getPath(e.node)))return-54;throw e}v[s>>>2]=i.dev,v[s+8>>>2]=i.ino,v[s+12>>>2]=i.mode,_[s+16>>>2]=i.nlink,v[s+20>>>2]=i.uid,v[s+24>>>2]=i.gid,v[s+28>>>2]=i.rdev,M=[i.size>>>0,(w=i.size,+Math.abs(w)>=1?w>0?(0|Math.min(+Math.floor(w/4294967296),4294967295))>>>0:~~+Math.ceil((w-+(~~w>>>0))/4294967296)>>>0:0)],v[s+40>>>2]=M[0],v[s+44>>>2]=M[1],v[s+48>>>2]=4096,v[s+52>>>2]=i.blocks;var r=i.atime.getTime(),o=i.mtime.getTime(),n=i.ctime.getTime();return M=[Math.floor(r/1e3)>>>0,(w=Math.floor(r/1e3),+Math.abs(w)>=1?w>0?(0|Math.min(+Math.floor(w/4294967296),4294967295))>>>0:~~+Math.ceil((w-+(~~w>>>0))/4294967296)>>>0:0)],v[s+56>>>2]=M[0],v[s+60>>>2]=M[1],_[s+64>>>2]=r%1e3*1e3,M=[Math.floor(o/1e3)>>>0,(w=Math.floor(o/1e3),+Math.abs(w)>=1?w>0?(0|Math.min(+Math.floor(w/4294967296),4294967295))>>>0:~~+Math.ceil((w-+(~~w>>>0))/4294967296)>>>0:0)],v[s+72>>>2]=M[0],v[s+76>>>2]=M[1],_[s+80>>>2]=o%1e3*1e3,M=[Math.floor(n/1e3)>>>0,(w=Math.floor(n/1e3),+Math.abs(w)>=1?w>0?(0|Math.min(+Math.floor(w/4294967296),4294967295))>>>0:~~+Math.ceil((w-+(~~w>>>0))/4294967296)>>>0:0)],v[s+88>>>2]=M[0],v[s+92>>>2]=M[1],_[s+96>>>2]=n%1e3*1e3,M=[i.ino>>>0,(w=i.ino,+Math.abs(w)>=1?w>0?(0|Math.min(+Math.floor(w/4294967296),4294967295))>>>0:~~+Math.ceil((w-+(~~w>>>0))/4294967296)>>>0:0)],v[s+104>>>2]=M[0],v[s+108>>>2]=M[1],0},doMsync:function(e,t,s,i,r){if(!wt.isFile(t.node.mode))throw new wt.ErrnoError(43);if(2&i)return 0;e>>>=0;var o=g.slice(e,e+s);wt.msync(t,o,r,s,i)},varargs:void 0,get:function(){return Mt.varargs+=4,v[Mt.varargs-4>>>2]},getStr:function(e){return R(e)},getStreamFromFD:function(e){var t=wt.getStream(e);if(!t)throw new wt.ErrnoError(8);return t}};function Bt(e){return e%4==0&&(e%100!=0||e%400==0)}var Ft=[31,29,31,30,31,30,31,31,30,31,30,31],Lt=[31,28,31,30,31,30,31,31,30,31,30,31];function Ut(e,t,s,i){var r=v[i+40>>>2],o={tm_sec:v[i>>>2],tm_min:v[i+4>>>2],tm_hour:v[i+8>>>2],tm_mday:v[i+12>>>2],tm_mon:v[i+16>>>2],tm_year:v[i+20>>>2],tm_wday:v[i+24>>>2],tm_yday:v[i+28>>>2],tm_isdst:v[i+32>>>2],tm_gmtoff:v[i+36>>>2],tm_zone:r?R(r):""},n=R(s),a={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var l in a)n=n.replace(new RegExp(l,"g"),a[l]);var h=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=["January","February","March","April","May","June","July","August","September","October","November","December"];function u(e,t,s){for(var i="number"==typeof e?e.toString():e||"";i.length<t;)i=s[0]+i;return i}function A(e,t){return u(e,t,"0")}function p(e,t){function s(e){return e<0?-1:e>0?1:0}var i;return 0===(i=s(e.getFullYear()-t.getFullYear()))&&0===(i=s(e.getMonth()-t.getMonth()))&&(i=s(e.getDate()-t.getDate())),i}function d(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function f(e){var t=function(e,t){for(var s=new Date(e.getTime());t>0;){var i=Bt(s.getFullYear()),r=s.getMonth(),o=(i?Ft:Lt)[r];if(!(t>o-s.getDate()))return s.setDate(s.getDate()+t),s;t-=o-s.getDate()+1,s.setDate(1),r<11?s.setMonth(r+1):(s.setMonth(0),s.setFullYear(s.getFullYear()+1))}return s}(new Date(e.tm_year+1900,0,1),e.tm_yday),s=new Date(t.getFullYear(),0,4),i=new Date(t.getFullYear()+1,0,4),r=d(s),o=d(i);return p(r,t)<=0?p(o,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var g={"%a":function(e){return h[e.tm_wday].substring(0,3)},"%A":function(e){return h[e.tm_wday]},"%b":function(e){return c[e.tm_mon].substring(0,3)},"%B":function(e){return c[e.tm_mon]},"%C":function(e){return A((e.tm_year+1900)/100|0,2)},"%d":function(e){return A(e.tm_mday,2)},"%e":function(e){return u(e.tm_mday,2," ")},"%g":function(e){return f(e).toString().substring(2)},"%G":function(e){return f(e)},"%H":function(e){return A(e.tm_hour,2)},"%I":function(e){var t=e.tm_hour;return 0==t?t=12:t>12&&(t-=12),A(t,2)},"%j":function(e){return A(e.tm_mday+function(e,t){for(var s=0,i=0;i<=t;s+=e[i++]);return s}(Bt(e.tm_year+1900)?Ft:Lt,e.tm_mon-1),3)},"%m":function(e){return A(e.tm_mon+1,2)},"%M":function(e){return A(e.tm_min,2)},"%n":function(){return"\n"},"%p":function(e){return e.tm_hour>=0&&e.tm_hour<12?"AM":"PM"},"%S":function(e){return A(e.tm_sec,2)},"%t":function(){return"\t"},"%u":function(e){return e.tm_wday||7},"%U":function(e){var t=e.tm_yday+7-e.tm_wday;return A(Math.floor(t/7),2)},"%V":function(e){var t=Math.floor((e.tm_yday+7-(e.tm_wday+6)%7)/7);if((e.tm_wday+371-e.tm_yday-2)%7<=2&&t++,t){if(53==t){var s=(e.tm_wday+371-e.tm_yday)%7;4==s||3==s&&Bt(e.tm_year)||(t=1)}}else{t=52;var i=(e.tm_wday+7-e.tm_yday-1)%7;(4==i||5==i&&Bt(e.tm_year%400-1))&&t++}return A(t,2)},"%w":function(e){return e.tm_wday},"%W":function(e){var t=e.tm_yday+7-(e.tm_wday+6)%7;return A(Math.floor(t/7),2)},"%y":function(e){return(e.tm_year+1900).toString().substring(2)},"%Y":function(e){return e.tm_year+1900},"%z":function(e){var t=e.tm_gmtoff,s=t>=0;return t=(t=Math.abs(t)/60)/60*100+t%60,(s?"+":"-")+String("0000"+t).slice(-4)},"%Z":function(e){return e.tm_zone},"%%":function(){return"%"}};for(var l in n=n.replace(/%%/g,"\0\0"),g)n.includes(l)&&(n=n.replace(new RegExp(l,"g"),g[l](o)));var y,E,_=xt(n=n.replace(/\0\0/g,"%"),!1);return _.length>t?0:(y=_,E=e,m.set(y,E>>>0),_.length-1)}se=r.InternalError=te(Error,"InternalError"),function(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);ae=e}(),he=r.BindingError=te(Error,"BindingError"),Be.prototype.isAliasOf=Ae,Be.prototype.clone=Oe,Be.prototype.delete=Se,Be.prototype.isDeleted=we,Be.prototype.deleteLater=Me,r.getInheritedInstanceCount=ve,r.getLiveInheritedInstances=_e,r.flushPendingDeletes=Te,r.setDelayFunction=De,ze.prototype.getPointee=je,ze.prototype.destructor=Qe,ze.prototype.argPackAdvance=8,ze.prototype.readValueFromPointer=X,ze.prototype.deleteObject=We,ze.prototype.fromWireType=xe,Je=r.UnboundTypeError=te(Error,"UnboundTypeError"),r.count_emval_handles=nt,r.get_first_emval=at;var Ht=function(e,t,s,i){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=wt.nextInode++,this.name=t,this.mode=s,this.node_ops={},this.stream_ops={},this.rdev=i},Gt=365,Vt=146;Object.defineProperties(Ht.prototype,{read:{get:function(){return(this.mode&Gt)===Gt},set:function(e){e?this.mode|=Gt:this.mode&=-366}},write:{get:function(){return(this.mode&Vt)===Vt},set:function(e){e?this.mode|=Vt:this.mode&=-147}},isFolder:{get:function(){return wt.isDir(this.mode)}},isDevice:{get:function(){return wt.isChrdev(this.mode)}}}),wt.FSNode=Ht,wt.staticInit();var kt={f:function(e,t,s){throw new z(e).init(t,s),e},R:function(e){var t=K[e];delete K[e];var s=t.elements,i=s.length,r=s.map((function(e){return e.getterReturnType})).concat(s.map((function(e){return e.setterArgumentType}))),o=t.rawConstructor,n=t.rawDestructor;re([e],r,(function(e){return s.forEach(((t,s)=>{var r=e[s],o=t.getter,n=t.getterContext,a=e[s+i],l=t.setter,h=t.setterContext;t.read=e=>r.fromWireType(o(n,e)),t.write=(e,t)=>{var s=[];l(h,e,a.toWireType(s,t)),Y(s)}})),[{name:t.name,fromWireType:function(e){for(var t=new Array(i),r=0;r<i;++r)t[r]=s[r].read(e);return n(e),t},toWireType:function(e,r){if(i!==r.length)throw new TypeError("Incorrect number of tuple elements for "+t.name+": expected="+i+", actual="+r.length);for(var a=o(),l=0;l<i;++l)s[l].write(a,r[l]);return null!==e&&e.push(n,a),a},argPackAdvance:8,readValueFromPointer:X,destructorFunction:n}]}))},p:function(e){var t=oe[e];delete oe[e];var s=t.rawConstructor,i=t.rawDestructor,r=t.fields;re([e],r.map((e=>e.getterReturnType)).concat(r.map((e=>e.setterArgumentType))),(e=>{var o={};return r.forEach(((t,s)=>{var i=t.fieldName,n=e[s],a=t.getter,l=t.getterContext,h=e[s+r.length],c=t.setter,u=t.setterContext;o[i]={read:e=>n.fromWireType(a(l,e)),write:(e,t)=>{var s=[];c(u,e,h.toWireType(s,t)),Y(s)}}})),[{name:t.name,fromWireType:function(e){var t={};for(var s in o)t[s]=o[s].read(e);return i(e),t},toWireType:function(e,t){for(var r in o)if(!(r in t))throw new TypeError('Missing field:  "'+r+'"');var n=s();for(r in o)o[r].write(n,t[r]);return null!==e&&e.push(i,n),n},argPackAdvance:8,readValueFromPointer:X,destructorFunction:i}]}))},F:function(e,t,s,i,r){},P:function(e,t,s,i,r){var o=ne(s);ue(e,{name:t=le(t),fromWireType:function(e){return!!e},toWireType:function(e,t){return t?i:r},argPackAdvance:8,readValueFromPointer:function(e){var i;if(1===s)i=m;else if(2===s)i=y;else{if(4!==s)throw new TypeError("Unknown boolean type size: "+t);i=v}return this.fromWireType(i[e>>>o])},destructorFunction:null})},o:function(e,t,s,i,r,o,n,a,l,h,c,u,A){c=le(c),o=qe(r,o),a&&(a=qe(n,a)),h&&(h=qe(l,h)),A=qe(u,A);var p=$(c);Le(p,(function(){et("Cannot construct "+c+" due to unbound types",[i])})),re([e,t,s],i?[i]:[],(function(t){var s,r;t=t[0],r=i?(s=t.registeredClass).instancePrototype:Be.prototype;var n=ee(p,(function(){if(Object.getPrototypeOf(this)!==l)throw new he("Use 'new' to construct "+c);if(void 0===u.constructor_body)throw new he(c+" has no accessible constructor");var e=u.constructor_body[arguments.length];if(void 0===e)throw new he("Tried to invoke ctor of "+c+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(u.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)})),l=Object.create(r,{constructor:{value:n}});n.prototype=l;var u=new Ue(c,n,l,A,s,o,a,h),d=new ze(c,u,!0,!1,!1),f=new ze(c+"*",u,!1,!1,!1),m=new ze(c+" const*",u,!1,!0,!1);return Ee[e]={pointerType:f,constPointerType:m},Ke(p,n),[d,f,m]}))},n:function(e,t,s,i,r,o){f(t>0);var n=tt(t,s);r=qe(i,r),re([],[e],(function(e){var s="constructor "+(e=e[0]).name;if(void 0===e.registeredClass.constructor_body&&(e.registeredClass.constructor_body=[]),void 0!==e.registeredClass.constructor_body[t-1])throw new he("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.registeredClass.constructor_body[t-1]=()=>{et("Cannot construct "+e.name+" due to unbound types",n)},re([],n,(function(i){return i.splice(1,0,null),e.registeredClass.constructor_body[t-1]=st(s,i,null,r,o),[]})),[]}))},b:function(e,t,s,i,r,o,n,a){var l=tt(s,i);t=le(t),o=qe(r,o),re([],[e],(function(e){var i=(e=e[0]).name+"."+t;function r(){et("Cannot call "+i+" due to unbound types",l)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]),a&&e.registeredClass.pureVirtualFunctions.push(t);var h=e.registeredClass.instancePrototype,c=h[t];return void 0===c||void 0===c.overloadTable&&c.className!==e.name&&c.argCount===s-2?(r.argCount=s-2,r.className=e.name,h[t]=r):(Fe(h,t,i),h[t].overloadTable[s-2]=r),re([],l,(function(r){var a=st(i,r,e,o,n);return void 0===h[t].overloadTable?(a.argCount=s-2,h[t]=a):h[t].overloadTable[s-2]=a,[]})),[]}))},O:function(e,t){ue(e,{name:t=le(t),fromWireType:function(e){var t=lt.toValue(e);return ot(e),t},toWireType:function(e,t){return lt.toHandle(t)},argPackAdvance:8,readValueFromPointer:X,destructorFunction:null})},B:function(e,t,s,i){var r=ne(s);function o(){}t=le(t),o.values={},ue(e,{name:t,constructor:o,fromWireType:function(e){return this.constructor.values[e]},toWireType:function(e,t){return t.value},argPackAdvance:8,readValueFromPointer:ht(t,r,i),destructorFunction:null}),Le(t,o)},s:function(e,t,s){var i=ct(e,"enum");t=le(t);var r=i.constructor,o=Object.create(i.constructor.prototype,{value:{value:s},constructor:{value:ee(i.name+"_"+t,(function(){}))}});r.values[s]=o,r[t]=o},z:function(e,t,s){var i=ne(s);ue(e,{name:t=le(t),fromWireType:function(e){return e},toWireType:function(e,t){return t},argPackAdvance:8,readValueFromPointer:At(t,i),destructorFunction:null})},c:function(e,t,s,i,r,o){var n=tt(t,s);e=le(e),r=qe(i,r),Le(e,(function(){et("Cannot call "+e+" due to unbound types",n)}),t-1),re([],n,(function(s){var i=[s[0],null].concat(s.slice(1));return Ke(e,st(e,i,null,r,o),t-1),[]}))},r:function(e,t,s,i,r){t=le(t);var o=ne(s),n=e=>e;if(0===i){var a=32-8*s;n=e=>e<<a>>>a}var l=t.includes("unsigned");ue(e,{name:t,fromWireType:n,toWireType:l?function(e,t){return this.name,t>>>0}:function(e,t){return this.name,t},argPackAdvance:8,readValueFromPointer:pt(t,o,0!==i),destructorFunction:null})},h:function(e,t,s){var i=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function r(e){var t=_,s=t[(e>>=2)>>>0],r=t[e+1>>>0];return new i(t.buffer,r,s)}ue(e,{name:s=le(s),fromWireType:r,argPackAdvance:8,readValueFromPointer:r},{ignoreDuplicateRegistrations:!0})},A:function(e,t){var s="std::string"===(t=le(t));ue(e,{name:t,fromWireType:function(e){var t,i=_[e>>>2],r=e+4;if(s)for(var o=r,n=0;n<=i;++n){var a=r+n;if(n==i||0==g[a>>>0]){var l=R(o,a-o);void 0===t?t=l:(t+=String.fromCharCode(0),t+=l),o=a+1}}else{var h=new Array(i);for(n=0;n<i;++n)h[n]=String.fromCharCode(g[r+n>>>0]);t=h.join("")}return zt(e),t},toWireType:function(e,t){var i;t instanceof ArrayBuffer&&(t=new Uint8Array(t));var r="string"==typeof t;r||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int8Array||ce("Cannot pass non-string to std::string"),i=s&&r?x(t):t.length;var o=jt(4+i+1),n=o+4;if(n>>>=0,_[o>>>2]=i,s&&r)C(t,g,n,i+1);else if(r)for(var a=0;a<i;++a){var l=t.charCodeAt(a);l>255&&(zt(n),ce("String has UTF-16 code units that do not fit in 8 bits")),g[n+a>>>0]=l}else for(a=0;a<i;++a)g[n+a>>>0]=t[a];return null!==e&&e.push(zt,o),o},argPackAdvance:8,readValueFromPointer:X,destructorFunction:function(e){zt(e)}})},v:function(e,t,s){var i,r,o,n,a;s=le(s),2===t?(i=ft,r=mt,n=gt,o=()=>E,a=1):4===t&&(i=yt,r=Et,n=vt,o=()=>_,a=2),ue(e,{name:s,fromWireType:function(e){for(var s,r=_[e>>>2],n=o(),l=e+4,h=0;h<=r;++h){var c=e+4+h*t;if(h==r||0==n[c>>>a]){var u=i(l,c-l);void 0===s?s=u:(s+=String.fromCharCode(0),s+=u),l=c+t}}return zt(e),s},toWireType:function(e,i){"string"!=typeof i&&ce("Cannot pass non-string to C++ string type "+s);var o=n(i),l=jt(4+o+t);return _[(l>>>=0)>>>2]=o>>a,r(i,l+4,o+t),null!==e&&e.push(zt,l),l},argPackAdvance:8,readValueFromPointer:X,destructorFunction:function(e){zt(e)}})},S:function(e,t,s,i,r,o){K[e]={name:le(t),rawConstructor:qe(s,i),rawDestructor:qe(r,o),elements:[]}},i:function(e,t,s,i,r,o,n,a,l){K[e].elements.push({getterReturnType:t,getter:qe(s,i),getterContext:r,setterArgumentType:o,setter:qe(n,a),setterContext:l})},q:function(e,t,s,i,r,o){oe[e]={name:le(t),rawConstructor:qe(s,i),rawDestructor:qe(r,o),fields:[]}},e:function(e,t,s,i,r,o,n,a,l,h){oe[e].fields.push({fieldName:le(t),getterReturnType:s,getter:qe(i,r),getterContext:o,setterArgumentType:n,setter:qe(a,l),setterContext:h})},Q:function(e,t){ue(e,{isVoid:!0,name:t=le(t),argPackAdvance:0,fromWireType:function(){},toWireType:function(e,t){}})},m:function(e,t,s){e=lt.toValue(e),t=ct(t,"emval::as");var i=[],r=lt.toHandle(i);return _[s>>>2]=r,t.toWireType(i,e)},x:function(e,t,s,i){e=lt.toValue(e);for(var r=function(e,t){for(var s=new Array(e),i=0;i<e;++i)s[i]=ct(_[t+4*i>>>2],"parameter "+i);return s}(t,s),o=new Array(t),n=0;n<t;++n){var a=r[n];o[n]=a.readValueFromPointer(i),i+=a.argPackAdvance}var l=e.apply(void 0,o);return lt.toHandle(l)},a:ot,D:function(e){return 0===e?lt.toHandle(Tt()):(e=It(e),lt.toHandle(Tt()[e]))},k:function(e,t){return e=lt.toValue(e),t=lt.toValue(t),lt.toHandle(e[t])},t:function(e){e>4&&(rt[e].refcount+=1)},U:function(e,t){return(e=lt.toValue(e))instanceof(t=lt.toValue(t))},w:function(e){return"number"==typeof(e=lt.toValue(e))},C:function(e){return"string"==typeof(e=lt.toValue(e))},T:function(){return lt.toHandle([])},g:function(e){return lt.toHandle(It(e))},u:function(){return lt.toHandle({})},l:function(e){Y(lt.toValue(e)),ot(e)},j:function(e,t,s){e=lt.toValue(e),t=lt.toValue(t),s=lt.toValue(s),e[t]=s},d:function(e,t){var s=(e=ct(e,"_emval_take_value")).readValueFromPointer(t);return lt.toHandle(s)},y:function(){k("")},N:function(e,t,s){g.copyWithin(e>>>0,t>>>0,t+s>>>0)},L:function(e){var t,s,i=g.length,r=4294901760;if((e>>>=0)>r)return!1;for(var o=1;o<=4;o*=2){var n=i*(1+.2/o);if(n=Math.min(n,e+100663296),Pt(Math.min(r,(t=Math.max(e,n))+((s=65536)-t%s)%s)))return!0}return!1},H:function(e,t){var s=0;return bt().forEach((function(i,r){var o=t+s;_[e+4*r>>>2]=o,function(e,t,s){for(var i=0;i<e.length;++i)m[t++>>>0]=e.charCodeAt(i);s||(m[t>>>0]=0)}(i,o),s+=i.length+1})),0},I:function(e,t){var s=bt();_[e>>>2]=s.length;var i=0;return s.forEach((function(e){i+=e.length+1})),_[t>>>2]=i,0},J:function(e){try{var t=Mt.getStreamFromFD(e);return wt.close(t),0}catch(e){if(void 0===wt||!(e instanceof wt.ErrnoError))throw e;return e.errno}},K:function(e,t,s,i){try{var r=function(e,t,s,i){for(var r=0,o=0;o<s;o++){var n=_[t>>>2],a=_[t+4>>>2];t+=8;var l=wt.read(e,m,n,a,i);if(l<0)return-1;if(r+=l,l<a)break;void 0!==i&&(i+=l)}return r}(Mt.getStreamFromFD(e),t,s);return _[i>>>2]=r,0}catch(e){if(void 0===wt||!(e instanceof wt.ErrnoError))throw e;return e.errno}},E:function(e,t,s,i,r){try{var o=(l=s)+2097152>>>0<4194305-!!(a=t)?(a>>>0)+4294967296*l:NaN;if(isNaN(o))return 61;var n=Mt.getStreamFromFD(e);return wt.llseek(n,o,i),M=[n.position>>>0,(w=n.position,+Math.abs(w)>=1?w>0?(0|Math.min(+Math.floor(w/4294967296),4294967295))>>>0:~~+Math.ceil((w-+(~~w>>>0))/4294967296)>>>0:0)],v[r>>>2]=M[0],v[r+4>>>2]=M[1],n.getdents&&0===o&&0===i&&(n.getdents=null),0}catch(e){if(void 0===wt||!(e instanceof wt.ErrnoError))throw e;return e.errno}var a,l},M:function(e,t,s,i){try{var r=function(e,t,s,i){for(var r=0,o=0;o<s;o++){var n=_[t>>>2],a=_[t+4>>>2];t+=8;var l=wt.write(e,m,n,a,i);if(l<0)return-1;r+=l,void 0!==i&&(i+=l)}return r}(Mt.getStreamFromFD(e),t,s);return _[i>>>2]=r,0}catch(e){if(void 0===wt||!(e instanceof wt.ErrnoError))throw e;return e.errno}},G:function(e,t,s,i,r){return Ut(e,t,s,i)}};!function(){var e={a:kt};function t(e,t){var s,i=e.exports;r.asm=i,u=r.asm.V,N(),P=r.asm.X,s=r.asm.W,F.unshift(s),V()}function s(e){t(e.instance)}function o(t){return(c||"function"!=typeof fetch?Promise.resolve().then((function(){return Q(O)})):fetch(O,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+O+"'";return e.arrayBuffer()})).catch((function(){return Q(O)}))).then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){p("failed to asynchronously prepare wasm: "+e),k(e)}))}if(G(),r.instantiateWasm)try{return r.instantiateWasm(e,t)}catch(e){p("Module.instantiateWasm callback failed with error: "+e),i(e)}(c||"function"!=typeof WebAssembly.instantiateStreaming||j(O)||"function"!=typeof fetch?o(s):fetch(O,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(s,(function(e){return p("wasm streaming compile failed: "+e),p("falling back to ArrayBuffer instantiation"),o(s)}))}))).catch(i)}();var jt=function(){return(jt=r.asm.Y).apply(null,arguments)},Qt=r.___getTypeName=function(){return(Qt=r.___getTypeName=r.asm.Z).apply(null,arguments)};r.__embind_initialize_bindings=function(){return(r.__embind_initialize_bindings=r.asm._).apply(null,arguments)};var Wt,zt=function(){return(zt=r.asm.$).apply(null,arguments)},Kt=function(){return(Kt=r.asm.aa).apply(null,arguments)};function Yt(){function e(){Wt||(Wt=!0,r.calledRun=!0,d||(r.noFSInit||wt.init.initialized||wt.init(),wt.ignorePermissions=!1,W(F),t(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),function(){if(r.postRun)for("function"==typeof r.postRun&&(r.postRun=[r.postRun]);r.postRun.length;)e=r.postRun.shift(),L.unshift(e);var e;W(L)}()))}U>0||(function(){if(r.preRun)for("function"==typeof r.preRun&&(r.preRun=[r.preRun]);r.preRun.length;)e=r.preRun.shift(),B.unshift(e);var e;W(B)}(),U>0||(r.setStatus?(r.setStatus("Running..."),setTimeout((function(){setTimeout((function(){r.setStatus("")}),1),e()}),1)):e()))}if(r.dynCall_jiji=function(){return(r.dynCall_jiji=r.asm.ba).apply(null,arguments)},r.dynCall_viijii=function(){return(r.dynCall_viijii=r.asm.ca).apply(null,arguments)},r.dynCall_iiiiij=function(){return(r.dynCall_iiiiij=r.asm.da).apply(null,arguments)},r.dynCall_iiiiijj=function(){return(r.dynCall_iiiiijj=r.asm.ea).apply(null,arguments)},r.dynCall_iiiiiijj=function(){return(r.dynCall_iiiiiijj=r.asm.fa).apply(null,arguments)},H=function e(){Wt||Yt(),Wt||(H=e)},r.preInit)for("function"==typeof r.preInit&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return Yt(),e.ready});"object"==typeof e&&"object"==typeof t?t.exports=i:"function"==typeof define&&define.amd?define([],(function(){return i})):"object"==typeof e&&(e.WebIFCWasm=i)}}),Zv=class{constructor(e){this.value=e,this.type=5}},qv=class{constructor(e){this.expressID=e,this.type=0}};if((Vv=Gv||(Gv={})).IFC2X3="IFC2X3",Vv.IFC4="IFC4",Vv.IFC4X3="IFC4X3",function(e){e.IfcAbsorbedDoseMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcAccelerationMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcAmountOfSubstanceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcAngularVelocityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcAreaMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcBoolean=class{constructor(e){this.type=3,this.value="true"==e}};e.IfcBoxAlignment=class{constructor(e){this.value=e,this.type=1}};e.IfcComplexNumber=class{constructor(e){this.value=e}};e.IfcCompoundPlaneAngleMeasure=class{constructor(e){this.value=e}};e.IfcContextDependentMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcCountMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcCurvatureMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcDayInMonthNumber=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcDaylightSavingHour=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcDescriptiveMeasure=class{constructor(e){this.value=e,this.type=1}};class t{constructor(e){this.type=4,this.value=parseFloat(e)}}e.IfcDimensionCount=t;e.IfcDoseEquivalentMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcDynamicViscosityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcElectricCapacitanceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcElectricChargeMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcElectricConductanceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcElectricCurrentMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcElectricResistanceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcElectricVoltageMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcEnergyMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcFontStyle=class{constructor(e){this.value=e,this.type=1}};e.IfcFontVariant=class{constructor(e){this.value=e,this.type=1}};e.IfcFontWeight=class{constructor(e){this.value=e,this.type=1}};e.IfcForceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcFrequencyMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcGloballyUniqueId=class{constructor(e){this.value=e,this.type=1}};e.IfcHeatFluxDensityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcHeatingValueMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcHourInDay=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcIdentifier=class{constructor(e){this.value=e,this.type=1}};e.IfcIlluminanceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcInductanceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcInteger=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcIntegerCountRateMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcIonConcentrationMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcIsothermalMoistureCapacityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcKinematicViscosityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcLabel=class{constructor(e){this.value=e,this.type=1}};e.IfcLengthMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcLinearForceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcLinearMomentMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcLinearStiffnessMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcLinearVelocityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcLogical=class{constructor(e){this.type=3,this.value="true"==e}};e.IfcLuminousFluxMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcLuminousIntensityDistributionMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcLuminousIntensityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMagneticFluxDensityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMagneticFluxMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMassDensityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMassFlowRateMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMassMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMassPerLengthMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMinuteInHour=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcModulusOfElasticityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcModulusOfLinearSubgradeReactionMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcModulusOfRotationalSubgradeReactionMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcModulusOfSubgradeReactionMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMoistureDiffusivityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMolecularWeightMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMomentOfInertiaMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMonetaryMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMonthInYearNumber=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcNormalisedRatioMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcNumericMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcPHMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcParameterValue=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcPlanarForceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcPlaneAngleMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcPositiveLengthMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcPositivePlaneAngleMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcPositiveRatioMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcPowerMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcPresentableText=class{constructor(e){this.value=e,this.type=1}};e.IfcPressureMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcRadioActivityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcRatioMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcReal=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcRotationalFrequencyMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcRotationalMassMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcRotationalStiffnessMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcSecondInMinute=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcSectionModulusMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcSectionalAreaIntegralMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcShearModulusMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcSolidAngleMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcSoundPowerMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcSoundPressureMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcSpecificHeatCapacityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcSpecularExponent=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcSpecularRoughness=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcTemperatureGradientMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcText=class{constructor(e){this.value=e,this.type=1}};e.IfcTextAlignment=class{constructor(e){this.value=e,this.type=1}};e.IfcTextDecoration=class{constructor(e){this.value=e,this.type=1}};e.IfcTextFontName=class{constructor(e){this.value=e,this.type=1}};e.IfcTextTransformation=class{constructor(e){this.value=e,this.type=1}};e.IfcThermalAdmittanceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcThermalConductivityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcThermalExpansionCoefficientMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcThermalResistanceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcThermalTransmittanceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcThermodynamicTemperatureMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcTimeMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcTimeStamp=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcTorqueMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcVaporPermeabilityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcVolumeMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcVolumetricFlowRateMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcWarpingConstantMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcWarpingMomentMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcYearNumber=class{constructor(e){this.type=4,this.value=parseFloat(e)}};class s{}s.DEAD_LOAD_G={type:3,value:"DEAD_LOAD_G"},s.COMPLETION_G1={type:3,value:"COMPLETION_G1"},s.LIVE_LOAD_Q={type:3,value:"LIVE_LOAD_Q"},s.SNOW_S={type:3,value:"SNOW_S"},s.WIND_W={type:3,value:"WIND_W"},s.PRESTRESSING_P={type:3,value:"PRESTRESSING_P"},s.SETTLEMENT_U={type:3,value:"SETTLEMENT_U"},s.TEMPERATURE_T={type:3,value:"TEMPERATURE_T"},s.EARTHQUAKE_E={type:3,value:"EARTHQUAKE_E"},s.FIRE={type:3,value:"FIRE"},s.IMPULSE={type:3,value:"IMPULSE"},s.IMPACT={type:3,value:"IMPACT"},s.TRANSPORT={type:3,value:"TRANSPORT"},s.ERECTION={type:3,value:"ERECTION"},s.PROPPING={type:3,value:"PROPPING"},s.SYSTEM_IMPERFECTION={type:3,value:"SYSTEM_IMPERFECTION"},s.SHRINKAGE={type:3,value:"SHRINKAGE"},s.CREEP={type:3,value:"CREEP"},s.LACK_OF_FIT={type:3,value:"LACK_OF_FIT"},s.BUOYANCY={type:3,value:"BUOYANCY"},s.ICE={type:3,value:"ICE"},s.CURRENT={type:3,value:"CURRENT"},s.WAVE={type:3,value:"WAVE"},s.RAIN={type:3,value:"RAIN"},s.BRAKES={type:3,value:"BRAKES"},s.USERDEFINED={type:3,value:"USERDEFINED"},s.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcActionSourceTypeEnum=s;class i{}i.PERMANENT_G={type:3,value:"PERMANENT_G"},i.VARIABLE_Q={type:3,value:"VARIABLE_Q"},i.EXTRAORDINARY_A={type:3,value:"EXTRAORDINARY_A"},i.USERDEFINED={type:3,value:"USERDEFINED"},i.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcActionTypeEnum=i;class r{}r.ELECTRICACTUATOR={type:3,value:"ELECTRICACTUATOR"},r.HANDOPERATEDACTUATOR={type:3,value:"HANDOPERATEDACTUATOR"},r.HYDRAULICACTUATOR={type:3,value:"HYDRAULICACTUATOR"},r.PNEUMATICACTUATOR={type:3,value:"PNEUMATICACTUATOR"},r.THERMOSTATICACTUATOR={type:3,value:"THERMOSTATICACTUATOR"},r.USERDEFINED={type:3,value:"USERDEFINED"},r.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcActuatorTypeEnum=r;class o{}o.OFFICE={type:3,value:"OFFICE"},o.SITE={type:3,value:"SITE"},o.HOME={type:3,value:"HOME"},o.DISTRIBUTIONPOINT={type:3,value:"DISTRIBUTIONPOINT"},o.USERDEFINED={type:3,value:"USERDEFINED"},e.IfcAddressTypeEnum=o;class n{}n.AHEAD={type:3,value:"AHEAD"},n.BEHIND={type:3,value:"BEHIND"},e.IfcAheadOrBehind=n;class a{}a.CONSTANTFLOW={type:3,value:"CONSTANTFLOW"},a.VARIABLEFLOWPRESSUREDEPENDANT={type:3,value:"VARIABLEFLOWPRESSUREDEPENDANT"},a.VARIABLEFLOWPRESSUREINDEPENDANT={type:3,value:"VARIABLEFLOWPRESSUREINDEPENDANT"},a.USERDEFINED={type:3,value:"USERDEFINED"},a.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcAirTerminalBoxTypeEnum=a;class l{}l.GRILLE={type:3,value:"GRILLE"},l.REGISTER={type:3,value:"REGISTER"},l.DIFFUSER={type:3,value:"DIFFUSER"},l.EYEBALL={type:3,value:"EYEBALL"},l.IRIS={type:3,value:"IRIS"},l.LINEARGRILLE={type:3,value:"LINEARGRILLE"},l.LINEARDIFFUSER={type:3,value:"LINEARDIFFUSER"},l.USERDEFINED={type:3,value:"USERDEFINED"},l.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcAirTerminalTypeEnum=l;class h{}h.FIXEDPLATECOUNTERFLOWEXCHANGER={type:3,value:"FIXEDPLATECOUNTERFLOWEXCHANGER"},h.FIXEDPLATECROSSFLOWEXCHANGER={type:3,value:"FIXEDPLATECROSSFLOWEXCHANGER"},h.FIXEDPLATEPARALLELFLOWEXCHANGER={type:3,value:"FIXEDPLATEPARALLELFLOWEXCHANGER"},h.ROTARYWHEEL={type:3,value:"ROTARYWHEEL"},h.RUNAROUNDCOILLOOP={type:3,value:"RUNAROUNDCOILLOOP"},h.HEATPIPE={type:3,value:"HEATPIPE"},h.TWINTOWERENTHALPYRECOVERYLOOPS={type:3,value:"TWINTOWERENTHALPYRECOVERYLOOPS"},h.THERMOSIPHONSEALEDTUBEHEATEXCHANGERS={type:3,value:"THERMOSIPHONSEALEDTUBEHEATEXCHANGERS"},h.THERMOSIPHONCOILTYPEHEATEXCHANGERS={type:3,value:"THERMOSIPHONCOILTYPEHEATEXCHANGERS"},h.USERDEFINED={type:3,value:"USERDEFINED"},h.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcAirToAirHeatRecoveryTypeEnum=h;class c{}c.BELL={type:3,value:"BELL"},c.BREAKGLASSBUTTON={type:3,value:"BREAKGLASSBUTTON"},c.LIGHT={type:3,value:"LIGHT"},c.MANUALPULLBOX={type:3,value:"MANUALPULLBOX"},c.SIREN={type:3,value:"SIREN"},c.WHISTLE={type:3,value:"WHISTLE"},c.USERDEFINED={type:3,value:"USERDEFINED"},c.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcAlarmTypeEnum=c;class u{}u.IN_PLANE_LOADING_2D={type:3,value:"IN_PLANE_LOADING_2D"},u.OUT_PLANE_LOADING_2D={type:3,value:"OUT_PLANE_LOADING_2D"},u.LOADING_3D={type:3,value:"LOADING_3D"},u.USERDEFINED={type:3,value:"USERDEFINED"},u.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcAnalysisModelTypeEnum=u;class A{}A.FIRST_ORDER_THEORY={type:3,value:"FIRST_ORDER_THEORY"},A.SECOND_ORDER_THEORY={type:3,value:"SECOND_ORDER_THEORY"},A.THIRD_ORDER_THEORY={type:3,value:"THIRD_ORDER_THEORY"},A.FULL_NONLINEAR_THEORY={type:3,value:"FULL_NONLINEAR_THEORY"},A.USERDEFINED={type:3,value:"USERDEFINED"},A.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcAnalysisTheoryTypeEnum=A;class p{}p.ADD={type:3,value:"ADD"},p.DIVIDE={type:3,value:"DIVIDE"},p.MULTIPLY={type:3,value:"MULTIPLY"},p.SUBTRACT={type:3,value:"SUBTRACT"},e.IfcArithmeticOperatorEnum=p;class d{}d.SITE={type:3,value:"SITE"},d.FACTORY={type:3,value:"FACTORY"},d.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcAssemblyPlaceEnum=d;class f{}f.POLYLINE_FORM={type:3,value:"POLYLINE_FORM"},f.CIRCULAR_ARC={type:3,value:"CIRCULAR_ARC"},f.ELLIPTIC_ARC={type:3,value:"ELLIPTIC_ARC"},f.PARABOLIC_ARC={type:3,value:"PARABOLIC_ARC"},f.HYPERBOLIC_ARC={type:3,value:"HYPERBOLIC_ARC"},f.UNSPECIFIED={type:3,value:"UNSPECIFIED"},e.IfcBSplineCurveForm=f;class m{}m.BEAM={type:3,value:"BEAM"},m.JOIST={type:3,value:"JOIST"},m.LINTEL={type:3,value:"LINTEL"},m.T_BEAM={type:3,value:"T_BEAM"},m.USERDEFINED={type:3,value:"USERDEFINED"},m.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcBeamTypeEnum=m;class g{}g.GREATERTHAN={type:3,value:"GREATERTHAN"},g.GREATERTHANOREQUALTO={type:3,value:"GREATERTHANOREQUALTO"},g.LESSTHAN={type:3,value:"LESSTHAN"},g.LESSTHANOREQUALTO={type:3,value:"LESSTHANOREQUALTO"},g.EQUALTO={type:3,value:"EQUALTO"},g.NOTEQUALTO={type:3,value:"NOTEQUALTO"},e.IfcBenchmarkEnum=g;class y{}y.WATER={type:3,value:"WATER"},y.STEAM={type:3,value:"STEAM"},y.USERDEFINED={type:3,value:"USERDEFINED"},y.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcBoilerTypeEnum=y;class E{}E.UNION={type:3,value:"UNION"},E.INTERSECTION={type:3,value:"INTERSECTION"},E.DIFFERENCE={type:3,value:"DIFFERENCE"},e.IfcBooleanOperator=E;class v{}v.USERDEFINED={type:3,value:"USERDEFINED"},v.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcBuildingElementProxyTypeEnum=v;class _{}_.BEND={type:3,value:"BEND"},_.CROSS={type:3,value:"CROSS"},_.REDUCER={type:3,value:"REDUCER"},_.TEE={type:3,value:"TEE"},_.USERDEFINED={type:3,value:"USERDEFINED"},_.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCableCarrierFittingTypeEnum=_;class I{}I.CABLELADDERSEGMENT={type:3,value:"CABLELADDERSEGMENT"},I.CABLETRAYSEGMENT={type:3,value:"CABLETRAYSEGMENT"},I.CABLETRUNKINGSEGMENT={type:3,value:"CABLETRUNKINGSEGMENT"},I.CONDUITSEGMENT={type:3,value:"CONDUITSEGMENT"},I.USERDEFINED={type:3,value:"USERDEFINED"},I.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCableCarrierSegmentTypeEnum=I;class T{}T.CABLESEGMENT={type:3,value:"CABLESEGMENT"},T.CONDUCTORSEGMENT={type:3,value:"CONDUCTORSEGMENT"},T.USERDEFINED={type:3,value:"USERDEFINED"},T.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCableSegmentTypeEnum=T;class P{}P.NOCHANGE={type:3,value:"NOCHANGE"},P.MODIFIED={type:3,value:"MODIFIED"},P.ADDED={type:3,value:"ADDED"},P.DELETED={type:3,value:"DELETED"},P.MODIFIEDADDED={type:3,value:"MODIFIEDADDED"},P.MODIFIEDDELETED={type:3,value:"MODIFIEDDELETED"},e.IfcChangeActionEnum=P;class D{}D.AIRCOOLED={type:3,value:"AIRCOOLED"},D.WATERCOOLED={type:3,value:"WATERCOOLED"},D.HEATRECOVERY={type:3,value:"HEATRECOVERY"},D.USERDEFINED={type:3,value:"USERDEFINED"},D.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcChillerTypeEnum=D;class b{}b.DXCOOLINGCOIL={type:3,value:"DXCOOLINGCOIL"},b.WATERCOOLINGCOIL={type:3,value:"WATERCOOLINGCOIL"},b.STEAMHEATINGCOIL={type:3,value:"STEAMHEATINGCOIL"},b.WATERHEATINGCOIL={type:3,value:"WATERHEATINGCOIL"},b.ELECTRICHEATINGCOIL={type:3,value:"ELECTRICHEATINGCOIL"},b.GASHEATINGCOIL={type:3,value:"GASHEATINGCOIL"},b.USERDEFINED={type:3,value:"USERDEFINED"},b.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCoilTypeEnum=b;class R{}R.COLUMN={type:3,value:"COLUMN"},R.USERDEFINED={type:3,value:"USERDEFINED"},R.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcColumnTypeEnum=R;class C{}C.DYNAMIC={type:3,value:"DYNAMIC"},C.RECIPROCATING={type:3,value:"RECIPROCATING"},C.ROTARY={type:3,value:"ROTARY"},C.SCROLL={type:3,value:"SCROLL"},C.TROCHOIDAL={type:3,value:"TROCHOIDAL"},C.SINGLESTAGE={type:3,value:"SINGLESTAGE"},C.BOOSTER={type:3,value:"BOOSTER"},C.OPENTYPE={type:3,value:"OPENTYPE"},C.HERMETIC={type:3,value:"HERMETIC"},C.SEMIHERMETIC={type:3,value:"SEMIHERMETIC"},C.WELDEDSHELLHERMETIC={type:3,value:"WELDEDSHELLHERMETIC"},C.ROLLINGPISTON={type:3,value:"ROLLINGPISTON"},C.ROTARYVANE={type:3,value:"ROTARYVANE"},C.SINGLESCREW={type:3,value:"SINGLESCREW"},C.TWINSCREW={type:3,value:"TWINSCREW"},C.USERDEFINED={type:3,value:"USERDEFINED"},C.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCompressorTypeEnum=C;class x{}x.WATERCOOLEDSHELLTUBE={type:3,value:"WATERCOOLEDSHELLTUBE"},x.WATERCOOLEDSHELLCOIL={type:3,value:"WATERCOOLEDSHELLCOIL"},x.WATERCOOLEDTUBEINTUBE={type:3,value:"WATERCOOLEDTUBEINTUBE"},x.WATERCOOLEDBRAZEDPLATE={type:3,value:"WATERCOOLEDBRAZEDPLATE"},x.AIRCOOLED={type:3,value:"AIRCOOLED"},x.EVAPORATIVECOOLED={type:3,value:"EVAPORATIVECOOLED"},x.USERDEFINED={type:3,value:"USERDEFINED"},x.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCondenserTypeEnum=x;class N{}N.ATPATH={type:3,value:"ATPATH"},N.ATSTART={type:3,value:"ATSTART"},N.ATEND={type:3,value:"ATEND"},N.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcConnectionTypeEnum=N;class O{}O.HARD={type:3,value:"HARD"},O.SOFT={type:3,value:"SOFT"},O.ADVISORY={type:3,value:"ADVISORY"},O.USERDEFINED={type:3,value:"USERDEFINED"},O.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcConstraintEnum=O;class S{}S.FLOATING={type:3,value:"FLOATING"},S.PROPORTIONAL={type:3,value:"PROPORTIONAL"},S.PROPORTIONALINTEGRAL={type:3,value:"PROPORTIONALINTEGRAL"},S.PROPORTIONALINTEGRALDERIVATIVE={type:3,value:"PROPORTIONALINTEGRALDERIVATIVE"},S.TIMEDTWOPOSITION={type:3,value:"TIMEDTWOPOSITION"},S.TWOPOSITION={type:3,value:"TWOPOSITION"},S.USERDEFINED={type:3,value:"USERDEFINED"},S.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcControllerTypeEnum=S;class w{}w.ACTIVE={type:3,value:"ACTIVE"},w.PASSIVE={type:3,value:"PASSIVE"},w.USERDEFINED={type:3,value:"USERDEFINED"},w.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCooledBeamTypeEnum=w;class M{}M.NATURALDRAFT={type:3,value:"NATURALDRAFT"},M.MECHANICALINDUCEDDRAFT={type:3,value:"MECHANICALINDUCEDDRAFT"},M.MECHANICALFORCEDDRAFT={type:3,value:"MECHANICALFORCEDDRAFT"},M.USERDEFINED={type:3,value:"USERDEFINED"},M.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCoolingTowerTypeEnum=M;class B{}B.BUDGET={type:3,value:"BUDGET"},B.COSTPLAN={type:3,value:"COSTPLAN"},B.ESTIMATE={type:3,value:"ESTIMATE"},B.TENDER={type:3,value:"TENDER"},B.PRICEDBILLOFQUANTITIES={type:3,value:"PRICEDBILLOFQUANTITIES"},B.UNPRICEDBILLOFQUANTITIES={type:3,value:"UNPRICEDBILLOFQUANTITIES"},B.SCHEDULEOFRATES={type:3,value:"SCHEDULEOFRATES"},B.USERDEFINED={type:3,value:"USERDEFINED"},B.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCostScheduleTypeEnum=B;class F{}F.CEILING={type:3,value:"CEILING"},F.FLOORING={type:3,value:"FLOORING"},F.CLADDING={type:3,value:"CLADDING"},F.ROOFING={type:3,value:"ROOFING"},F.INSULATION={type:3,value:"INSULATION"},F.MEMBRANE={type:3,value:"MEMBRANE"},F.SLEEVING={type:3,value:"SLEEVING"},F.WRAPPING={type:3,value:"WRAPPING"},F.USERDEFINED={type:3,value:"USERDEFINED"},F.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCoveringTypeEnum=F;class L{}L.AED={type:3,value:"AED"},L.AES={type:3,value:"AES"},L.ATS={type:3,value:"ATS"},L.AUD={type:3,value:"AUD"},L.BBD={type:3,value:"BBD"},L.BEG={type:3,value:"BEG"},L.BGL={type:3,value:"BGL"},L.BHD={type:3,value:"BHD"},L.BMD={type:3,value:"BMD"},L.BND={type:3,value:"BND"},L.BRL={type:3,value:"BRL"},L.BSD={type:3,value:"BSD"},L.BWP={type:3,value:"BWP"},L.BZD={type:3,value:"BZD"},L.CAD={type:3,value:"CAD"},L.CBD={type:3,value:"CBD"},L.CHF={type:3,value:"CHF"},L.CLP={type:3,value:"CLP"},L.CNY={type:3,value:"CNY"},L.CYS={type:3,value:"CYS"},L.CZK={type:3,value:"CZK"},L.DDP={type:3,value:"DDP"},L.DEM={type:3,value:"DEM"},L.DKK={type:3,value:"DKK"},L.EGL={type:3,value:"EGL"},L.EST={type:3,value:"EST"},L.EUR={type:3,value:"EUR"},L.FAK={type:3,value:"FAK"},L.FIM={type:3,value:"FIM"},L.FJD={type:3,value:"FJD"},L.FKP={type:3,value:"FKP"},L.FRF={type:3,value:"FRF"},L.GBP={type:3,value:"GBP"},L.GIP={type:3,value:"GIP"},L.GMD={type:3,value:"GMD"},L.GRX={type:3,value:"GRX"},L.HKD={type:3,value:"HKD"},L.HUF={type:3,value:"HUF"},L.ICK={type:3,value:"ICK"},L.IDR={type:3,value:"IDR"},L.ILS={type:3,value:"ILS"},L.INR={type:3,value:"INR"},L.IRP={type:3,value:"IRP"},L.ITL={type:3,value:"ITL"},L.JMD={type:3,value:"JMD"},L.JOD={type:3,value:"JOD"},L.JPY={type:3,value:"JPY"},L.KES={type:3,value:"KES"},L.KRW={type:3,value:"KRW"},L.KWD={type:3,value:"KWD"},L.KYD={type:3,value:"KYD"},L.LKR={type:3,value:"LKR"},L.LUF={type:3,value:"LUF"},L.MTL={type:3,value:"MTL"},L.MUR={type:3,value:"MUR"},L.MXN={type:3,value:"MXN"},L.MYR={type:3,value:"MYR"},L.NLG={type:3,value:"NLG"},L.NZD={type:3,value:"NZD"},L.OMR={type:3,value:"OMR"},L.PGK={type:3,value:"PGK"},L.PHP={type:3,value:"PHP"},L.PKR={type:3,value:"PKR"},L.PLN={type:3,value:"PLN"},L.PTN={type:3,value:"PTN"},L.QAR={type:3,value:"QAR"},L.RUR={type:3,value:"RUR"},L.SAR={type:3,value:"SAR"},L.SCR={type:3,value:"SCR"},L.SEK={type:3,value:"SEK"},L.SGD={type:3,value:"SGD"},L.SKP={type:3,value:"SKP"},L.THB={type:3,value:"THB"},L.TRL={type:3,value:"TRL"},L.TTD={type:3,value:"TTD"},L.TWD={type:3,value:"TWD"},L.USD={type:3,value:"USD"},L.VEB={type:3,value:"VEB"},L.VND={type:3,value:"VND"},L.XEU={type:3,value:"XEU"},L.ZAR={type:3,value:"ZAR"},L.ZWD={type:3,value:"ZWD"},L.NOK={type:3,value:"NOK"},e.IfcCurrencyEnum=L;class U{}U.USERDEFINED={type:3,value:"USERDEFINED"},U.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCurtainWallTypeEnum=U;class H{}H.CONTROLDAMPER={type:3,value:"CONTROLDAMPER"},H.FIREDAMPER={type:3,value:"FIREDAMPER"},H.SMOKEDAMPER={type:3,value:"SMOKEDAMPER"},H.FIRESMOKEDAMPER={type:3,value:"FIRESMOKEDAMPER"},H.BACKDRAFTDAMPER={type:3,value:"BACKDRAFTDAMPER"},H.RELIEFDAMPER={type:3,value:"RELIEFDAMPER"},H.BLASTDAMPER={type:3,value:"BLASTDAMPER"},H.GRAVITYDAMPER={type:3,value:"GRAVITYDAMPER"},H.GRAVITYRELIEFDAMPER={type:3,value:"GRAVITYRELIEFDAMPER"},H.BALANCINGDAMPER={type:3,value:"BALANCINGDAMPER"},H.FUMEHOODEXHAUST={type:3,value:"FUMEHOODEXHAUST"},H.USERDEFINED={type:3,value:"USERDEFINED"},H.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDamperTypeEnum=H;class G{}G.MEASURED={type:3,value:"MEASURED"},G.PREDICTED={type:3,value:"PREDICTED"},G.SIMULATED={type:3,value:"SIMULATED"},G.USERDEFINED={type:3,value:"USERDEFINED"},G.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDataOriginEnum=G;class V{}V.ANGULARVELOCITYUNIT={type:3,value:"ANGULARVELOCITYUNIT"},V.COMPOUNDPLANEANGLEUNIT={type:3,value:"COMPOUNDPLANEANGLEUNIT"},V.DYNAMICVISCOSITYUNIT={type:3,value:"DYNAMICVISCOSITYUNIT"},V.HEATFLUXDENSITYUNIT={type:3,value:"HEATFLUXDENSITYUNIT"},V.INTEGERCOUNTRATEUNIT={type:3,value:"INTEGERCOUNTRATEUNIT"},V.ISOTHERMALMOISTURECAPACITYUNIT={type:3,value:"ISOTHERMALMOISTURECAPACITYUNIT"},V.KINEMATICVISCOSITYUNIT={type:3,value:"KINEMATICVISCOSITYUNIT"},V.LINEARVELOCITYUNIT={type:3,value:"LINEARVELOCITYUNIT"},V.MASSDENSITYUNIT={type:3,value:"MASSDENSITYUNIT"},V.MASSFLOWRATEUNIT={type:3,value:"MASSFLOWRATEUNIT"},V.MOISTUREDIFFUSIVITYUNIT={type:3,value:"MOISTUREDIFFUSIVITYUNIT"},V.MOLECULARWEIGHTUNIT={type:3,value:"MOLECULARWEIGHTUNIT"},V.SPECIFICHEATCAPACITYUNIT={type:3,value:"SPECIFICHEATCAPACITYUNIT"},V.THERMALADMITTANCEUNIT={type:3,value:"THERMALADMITTANCEUNIT"},V.THERMALCONDUCTANCEUNIT={type:3,value:"THERMALCONDUCTANCEUNIT"},V.THERMALRESISTANCEUNIT={type:3,value:"THERMALRESISTANCEUNIT"},V.THERMALTRANSMITTANCEUNIT={type:3,value:"THERMALTRANSMITTANCEUNIT"},V.VAPORPERMEABILITYUNIT={type:3,value:"VAPORPERMEABILITYUNIT"},V.VOLUMETRICFLOWRATEUNIT={type:3,value:"VOLUMETRICFLOWRATEUNIT"},V.ROTATIONALFREQUENCYUNIT={type:3,value:"ROTATIONALFREQUENCYUNIT"},V.TORQUEUNIT={type:3,value:"TORQUEUNIT"},V.MOMENTOFINERTIAUNIT={type:3,value:"MOMENTOFINERTIAUNIT"},V.LINEARMOMENTUNIT={type:3,value:"LINEARMOMENTUNIT"},V.LINEARFORCEUNIT={type:3,value:"LINEARFORCEUNIT"},V.PLANARFORCEUNIT={type:3,value:"PLANARFORCEUNIT"},V.MODULUSOFELASTICITYUNIT={type:3,value:"MODULUSOFELASTICITYUNIT"},V.SHEARMODULUSUNIT={type:3,value:"SHEARMODULUSUNIT"},V.LINEARSTIFFNESSUNIT={type:3,value:"LINEARSTIFFNESSUNIT"},V.ROTATIONALSTIFFNESSUNIT={type:3,value:"ROTATIONALSTIFFNESSUNIT"},V.MODULUSOFSUBGRADEREACTIONUNIT={type:3,value:"MODULUSOFSUBGRADEREACTIONUNIT"},V.ACCELERATIONUNIT={type:3,value:"ACCELERATIONUNIT"},V.CURVATUREUNIT={type:3,value:"CURVATUREUNIT"},V.HEATINGVALUEUNIT={type:3,value:"HEATINGVALUEUNIT"},V.IONCONCENTRATIONUNIT={type:3,value:"IONCONCENTRATIONUNIT"},V.LUMINOUSINTENSITYDISTRIBUTIONUNIT={type:3,value:"LUMINOUSINTENSITYDISTRIBUTIONUNIT"},V.MASSPERLENGTHUNIT={type:3,value:"MASSPERLENGTHUNIT"},V.MODULUSOFLINEARSUBGRADEREACTIONUNIT={type:3,value:"MODULUSOFLINEARSUBGRADEREACTIONUNIT"},V.MODULUSOFROTATIONALSUBGRADEREACTIONUNIT={type:3,value:"MODULUSOFROTATIONALSUBGRADEREACTIONUNIT"},V.PHUNIT={type:3,value:"PHUNIT"},V.ROTATIONALMASSUNIT={type:3,value:"ROTATIONALMASSUNIT"},V.SECTIONAREAINTEGRALUNIT={type:3,value:"SECTIONAREAINTEGRALUNIT"},V.SECTIONMODULUSUNIT={type:3,value:"SECTIONMODULUSUNIT"},V.SOUNDPOWERUNIT={type:3,value:"SOUNDPOWERUNIT"},V.SOUNDPRESSUREUNIT={type:3,value:"SOUNDPRESSUREUNIT"},V.TEMPERATUREGRADIENTUNIT={type:3,value:"TEMPERATUREGRADIENTUNIT"},V.THERMALEXPANSIONCOEFFICIENTUNIT={type:3,value:"THERMALEXPANSIONCOEFFICIENTUNIT"},V.WARPINGCONSTANTUNIT={type:3,value:"WARPINGCONSTANTUNIT"},V.WARPINGMOMENTUNIT={type:3,value:"WARPINGMOMENTUNIT"},V.USERDEFINED={type:3,value:"USERDEFINED"},e.IfcDerivedUnitEnum=V;class k{}k.ORIGIN={type:3,value:"ORIGIN"},k.TARGET={type:3,value:"TARGET"},e.IfcDimensionExtentUsage=k;class j{}j.POSITIVE={type:3,value:"POSITIVE"},j.NEGATIVE={type:3,value:"NEGATIVE"},e.IfcDirectionSenseEnum=j;class Q{}Q.FORMEDDUCT={type:3,value:"FORMEDDUCT"},Q.INSPECTIONCHAMBER={type:3,value:"INSPECTIONCHAMBER"},Q.INSPECTIONPIT={type:3,value:"INSPECTIONPIT"},Q.MANHOLE={type:3,value:"MANHOLE"},Q.METERCHAMBER={type:3,value:"METERCHAMBER"},Q.SUMP={type:3,value:"SUMP"},Q.TRENCH={type:3,value:"TRENCH"},Q.VALVECHAMBER={type:3,value:"VALVECHAMBER"},Q.USERDEFINED={type:3,value:"USERDEFINED"},Q.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDistributionChamberElementTypeEnum=Q;class W{}W.PUBLIC={type:3,value:"PUBLIC"},W.RESTRICTED={type:3,value:"RESTRICTED"},W.CONFIDENTIAL={type:3,value:"CONFIDENTIAL"},W.PERSONAL={type:3,value:"PERSONAL"},W.USERDEFINED={type:3,value:"USERDEFINED"},W.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDocumentConfidentialityEnum=W;class z{}z.DRAFT={type:3,value:"DRAFT"},z.FINALDRAFT={type:3,value:"FINALDRAFT"},z.FINAL={type:3,value:"FINAL"},z.REVISION={type:3,value:"REVISION"},z.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDocumentStatusEnum=z;class K{}K.SWINGING={type:3,value:"SWINGING"},K.DOUBLE_ACTING={type:3,value:"DOUBLE_ACTING"},K.SLIDING={type:3,value:"SLIDING"},K.FOLDING={type:3,value:"FOLDING"},K.REVOLVING={type:3,value:"REVOLVING"},K.ROLLINGUP={type:3,value:"ROLLINGUP"},K.USERDEFINED={type:3,value:"USERDEFINED"},K.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDoorPanelOperationEnum=K;class Y{}Y.LEFT={type:3,value:"LEFT"},Y.MIDDLE={type:3,value:"MIDDLE"},Y.RIGHT={type:3,value:"RIGHT"},Y.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDoorPanelPositionEnum=Y;class X{}X.ALUMINIUM={type:3,value:"ALUMINIUM"},X.HIGH_GRADE_STEEL={type:3,value:"HIGH_GRADE_STEEL"},X.STEEL={type:3,value:"STEEL"},X.WOOD={type:3,value:"WOOD"},X.ALUMINIUM_WOOD={type:3,value:"ALUMINIUM_WOOD"},X.ALUMINIUM_PLASTIC={type:3,value:"ALUMINIUM_PLASTIC"},X.PLASTIC={type:3,value:"PLASTIC"},X.USERDEFINED={type:3,value:"USERDEFINED"},X.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDoorStyleConstructionEnum=X;class Z{}Z.SINGLE_SWING_LEFT={type:3,value:"SINGLE_SWING_LEFT"},Z.SINGLE_SWING_RIGHT={type:3,value:"SINGLE_SWING_RIGHT"},Z.DOUBLE_DOOR_SINGLE_SWING={type:3,value:"DOUBLE_DOOR_SINGLE_SWING"},Z.DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_LEFT={type:3,value:"DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_LEFT"},Z.DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_RIGHT={type:3,value:"DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_RIGHT"},Z.DOUBLE_SWING_LEFT={type:3,value:"DOUBLE_SWING_LEFT"},Z.DOUBLE_SWING_RIGHT={type:3,value:"DOUBLE_SWING_RIGHT"},Z.DOUBLE_DOOR_DOUBLE_SWING={type:3,value:"DOUBLE_DOOR_DOUBLE_SWING"},Z.SLIDING_TO_LEFT={type:3,value:"SLIDING_TO_LEFT"},Z.SLIDING_TO_RIGHT={type:3,value:"SLIDING_TO_RIGHT"},Z.DOUBLE_DOOR_SLIDING={type:3,value:"DOUBLE_DOOR_SLIDING"},Z.FOLDING_TO_LEFT={type:3,value:"FOLDING_TO_LEFT"},Z.FOLDING_TO_RIGHT={type:3,value:"FOLDING_TO_RIGHT"},Z.DOUBLE_DOOR_FOLDING={type:3,value:"DOUBLE_DOOR_FOLDING"},Z.REVOLVING={type:3,value:"REVOLVING"},Z.ROLLINGUP={type:3,value:"ROLLINGUP"},Z.USERDEFINED={type:3,value:"USERDEFINED"},Z.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDoorStyleOperationEnum=Z;class q{}q.BEND={type:3,value:"BEND"},q.CONNECTOR={type:3,value:"CONNECTOR"},q.ENTRY={type:3,value:"ENTRY"},q.EXIT={type:3,value:"EXIT"},q.JUNCTION={type:3,value:"JUNCTION"},q.OBSTRUCTION={type:3,value:"OBSTRUCTION"},q.TRANSITION={type:3,value:"TRANSITION"},q.USERDEFINED={type:3,value:"USERDEFINED"},q.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDuctFittingTypeEnum=q;class J{}J.RIGIDSEGMENT={type:3,value:"RIGIDSEGMENT"},J.FLEXIBLESEGMENT={type:3,value:"FLEXIBLESEGMENT"},J.USERDEFINED={type:3,value:"USERDEFINED"},J.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDuctSegmentTypeEnum=J;class ${}$.FLATOVAL={type:3,value:"FLATOVAL"},$.RECTANGULAR={type:3,value:"RECTANGULAR"},$.ROUND={type:3,value:"ROUND"},$.USERDEFINED={type:3,value:"USERDEFINED"},$.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDuctSilencerTypeEnum=$;class ee{}ee.COMPUTER={type:3,value:"COMPUTER"},ee.DIRECTWATERHEATER={type:3,value:"DIRECTWATERHEATER"},ee.DISHWASHER={type:3,value:"DISHWASHER"},ee.ELECTRICCOOKER={type:3,value:"ELECTRICCOOKER"},ee.ELECTRICHEATER={type:3,value:"ELECTRICHEATER"},ee.FACSIMILE={type:3,value:"FACSIMILE"},ee.FREESTANDINGFAN={type:3,value:"FREESTANDINGFAN"},ee.FREEZER={type:3,value:"FREEZER"},ee.FRIDGE_FREEZER={type:3,value:"FRIDGE_FREEZER"},ee.HANDDRYER={type:3,value:"HANDDRYER"},ee.INDIRECTWATERHEATER={type:3,value:"INDIRECTWATERHEATER"},ee.MICROWAVE={type:3,value:"MICROWAVE"},ee.PHOTOCOPIER={type:3,value:"PHOTOCOPIER"},ee.PRINTER={type:3,value:"PRINTER"},ee.REFRIGERATOR={type:3,value:"REFRIGERATOR"},ee.RADIANTHEATER={type:3,value:"RADIANTHEATER"},ee.SCANNER={type:3,value:"SCANNER"},ee.TELEPHONE={type:3,value:"TELEPHONE"},ee.TUMBLEDRYER={type:3,value:"TUMBLEDRYER"},ee.TV={type:3,value:"TV"},ee.VENDINGMACHINE={type:3,value:"VENDINGMACHINE"},ee.WASHINGMACHINE={type:3,value:"WASHINGMACHINE"},ee.WATERHEATER={type:3,value:"WATERHEATER"},ee.WATERCOOLER={type:3,value:"WATERCOOLER"},ee.USERDEFINED={type:3,value:"USERDEFINED"},ee.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcElectricApplianceTypeEnum=ee;class te{}te.ALTERNATING={type:3,value:"ALTERNATING"},te.DIRECT={type:3,value:"DIRECT"},te.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcElectricCurrentEnum=te;class se{}se.ALARMPANEL={type:3,value:"ALARMPANEL"},se.CONSUMERUNIT={type:3,value:"CONSUMERUNIT"},se.CONTROLPANEL={type:3,value:"CONTROLPANEL"},se.DISTRIBUTIONBOARD={type:3,value:"DISTRIBUTIONBOARD"},se.GASDETECTORPANEL={type:3,value:"GASDETECTORPANEL"},se.INDICATORPANEL={type:3,value:"INDICATORPANEL"},se.MIMICPANEL={type:3,value:"MIMICPANEL"},se.MOTORCONTROLCENTRE={type:3,value:"MOTORCONTROLCENTRE"},se.SWITCHBOARD={type:3,value:"SWITCHBOARD"},se.USERDEFINED={type:3,value:"USERDEFINED"},se.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcElectricDistributionPointFunctionEnum=se;class ie{}ie.BATTERY={type:3,value:"BATTERY"},ie.CAPACITORBANK={type:3,value:"CAPACITORBANK"},ie.HARMONICFILTER={type:3,value:"HARMONICFILTER"},ie.INDUCTORBANK={type:3,value:"INDUCTORBANK"},ie.UPS={type:3,value:"UPS"},ie.USERDEFINED={type:3,value:"USERDEFINED"},ie.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcElectricFlowStorageDeviceTypeEnum=ie;class re{}re.USERDEFINED={type:3,value:"USERDEFINED"},re.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcElectricGeneratorTypeEnum=re;class oe{}oe.ELECTRICPOINTHEATER={type:3,value:"ELECTRICPOINTHEATER"},oe.ELECTRICCABLEHEATER={type:3,value:"ELECTRICCABLEHEATER"},oe.ELECTRICMATHEATER={type:3,value:"ELECTRICMATHEATER"},oe.USERDEFINED={type:3,value:"USERDEFINED"},oe.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcElectricHeaterTypeEnum=oe;class ne{}ne.DC={type:3,value:"DC"},ne.INDUCTION={type:3,value:"INDUCTION"},ne.POLYPHASE={type:3,value:"POLYPHASE"},ne.RELUCTANCESYNCHRONOUS={type:3,value:"RELUCTANCESYNCHRONOUS"},ne.SYNCHRONOUS={type:3,value:"SYNCHRONOUS"},ne.USERDEFINED={type:3,value:"USERDEFINED"},ne.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcElectricMotorTypeEnum=ne;class ae{}ae.TIMECLOCK={type:3,value:"TIMECLOCK"},ae.TIMEDELAY={type:3,value:"TIMEDELAY"},ae.RELAY={type:3,value:"RELAY"},ae.USERDEFINED={type:3,value:"USERDEFINED"},ae.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcElectricTimeControlTypeEnum=ae;class le{}le.ACCESSORY_ASSEMBLY={type:3,value:"ACCESSORY_ASSEMBLY"},le.ARCH={type:3,value:"ARCH"},le.BEAM_GRID={type:3,value:"BEAM_GRID"},le.BRACED_FRAME={type:3,value:"BRACED_FRAME"},le.GIRDER={type:3,value:"GIRDER"},le.REINFORCEMENT_UNIT={type:3,value:"REINFORCEMENT_UNIT"},le.RIGID_FRAME={type:3,value:"RIGID_FRAME"},le.SLAB_FIELD={type:3,value:"SLAB_FIELD"},le.TRUSS={type:3,value:"TRUSS"},le.USERDEFINED={type:3,value:"USERDEFINED"},le.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcElementAssemblyTypeEnum=le;class he{}he.COMPLEX={type:3,value:"COMPLEX"},he.ELEMENT={type:3,value:"ELEMENT"},he.PARTIAL={type:3,value:"PARTIAL"},e.IfcElementCompositionEnum=he;class ce{}ce.PRIMARY={type:3,value:"PRIMARY"},ce.SECONDARY={type:3,value:"SECONDARY"},ce.TERTIARY={type:3,value:"TERTIARY"},ce.AUXILIARY={type:3,value:"AUXILIARY"},ce.USERDEFINED={type:3,value:"USERDEFINED"},ce.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcEnergySequenceEnum=ce;class ue{}ue.COMBINEDVALUE={type:3,value:"COMBINEDVALUE"},ue.DISPOSAL={type:3,value:"DISPOSAL"},ue.EXTRACTION={type:3,value:"EXTRACTION"},ue.INSTALLATION={type:3,value:"INSTALLATION"},ue.MANUFACTURE={type:3,value:"MANUFACTURE"},ue.TRANSPORTATION={type:3,value:"TRANSPORTATION"},ue.USERDEFINED={type:3,value:"USERDEFINED"},ue.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcEnvironmentalImpactCategoryEnum=ue;class Ae{}Ae.DIRECTEVAPORATIVERANDOMMEDIAAIRCOOLER={type:3,value:"DIRECTEVAPORATIVERANDOMMEDIAAIRCOOLER"},Ae.DIRECTEVAPORATIVERIGIDMEDIAAIRCOOLER={type:3,value:"DIRECTEVAPORATIVERIGIDMEDIAAIRCOOLER"},Ae.DIRECTEVAPORATIVESLINGERSPACKAGEDAIRCOOLER={type:3,value:"DIRECTEVAPORATIVESLINGERSPACKAGEDAIRCOOLER"},Ae.DIRECTEVAPORATIVEPACKAGEDROTARYAIRCOOLER={type:3,value:"DIRECTEVAPORATIVEPACKAGEDROTARYAIRCOOLER"},Ae.DIRECTEVAPORATIVEAIRWASHER={type:3,value:"DIRECTEVAPORATIVEAIRWASHER"},Ae.INDIRECTEVAPORATIVEPACKAGEAIRCOOLER={type:3,value:"INDIRECTEVAPORATIVEPACKAGEAIRCOOLER"},Ae.INDIRECTEVAPORATIVEWETCOIL={type:3,value:"INDIRECTEVAPORATIVEWETCOIL"},Ae.INDIRECTEVAPORATIVECOOLINGTOWERORCOILCOOLER={type:3,value:"INDIRECTEVAPORATIVECOOLINGTOWERORCOILCOOLER"},Ae.INDIRECTDIRECTCOMBINATION={type:3,value:"INDIRECTDIRECTCOMBINATION"},Ae.USERDEFINED={type:3,value:"USERDEFINED"},Ae.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcEvaporativeCoolerTypeEnum=Ae;class pe{}pe.DIRECTEXPANSIONSHELLANDTUBE={type:3,value:"DIRECTEXPANSIONSHELLANDTUBE"},pe.DIRECTEXPANSIONTUBEINTUBE={type:3,value:"DIRECTEXPANSIONTUBEINTUBE"},pe.DIRECTEXPANSIONBRAZEDPLATE={type:3,value:"DIRECTEXPANSIONBRAZEDPLATE"},pe.FLOODEDSHELLANDTUBE={type:3,value:"FLOODEDSHELLANDTUBE"},pe.SHELLANDCOIL={type:3,value:"SHELLANDCOIL"},pe.USERDEFINED={type:3,value:"USERDEFINED"},pe.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcEvaporatorTypeEnum=pe;class de{}de.CENTRIFUGALFORWARDCURVED={type:3,value:"CENTRIFUGALFORWARDCURVED"},de.CENTRIFUGALRADIAL={type:3,value:"CENTRIFUGALRADIAL"},de.CENTRIFUGALBACKWARDINCLINEDCURVED={type:3,value:"CENTRIFUGALBACKWARDINCLINEDCURVED"},de.CENTRIFUGALAIRFOIL={type:3,value:"CENTRIFUGALAIRFOIL"},de.TUBEAXIAL={type:3,value:"TUBEAXIAL"},de.VANEAXIAL={type:3,value:"VANEAXIAL"},de.PROPELLORAXIAL={type:3,value:"PROPELLORAXIAL"},de.USERDEFINED={type:3,value:"USERDEFINED"},de.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcFanTypeEnum=de;class fe{}fe.AIRPARTICLEFILTER={type:3,value:"AIRPARTICLEFILTER"},fe.ODORFILTER={type:3,value:"ODORFILTER"},fe.OILFILTER={type:3,value:"OILFILTER"},fe.STRAINER={type:3,value:"STRAINER"},fe.WATERFILTER={type:3,value:"WATERFILTER"},fe.USERDEFINED={type:3,value:"USERDEFINED"},fe.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcFilterTypeEnum=fe;class me{}me.BREECHINGINLET={type:3,value:"BREECHINGINLET"},me.FIREHYDRANT={type:3,value:"FIREHYDRANT"},me.HOSEREEL={type:3,value:"HOSEREEL"},me.SPRINKLER={type:3,value:"SPRINKLER"},me.SPRINKLERDEFLECTOR={type:3,value:"SPRINKLERDEFLECTOR"},me.USERDEFINED={type:3,value:"USERDEFINED"},me.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcFireSuppressionTerminalTypeEnum=me;class ge{}ge.SOURCE={type:3,value:"SOURCE"},ge.SINK={type:3,value:"SINK"},ge.SOURCEANDSINK={type:3,value:"SOURCEANDSINK"},ge.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcFlowDirectionEnum=ge;class ye{}ye.PRESSUREGAUGE={type:3,value:"PRESSUREGAUGE"},ye.THERMOMETER={type:3,value:"THERMOMETER"},ye.AMMETER={type:3,value:"AMMETER"},ye.FREQUENCYMETER={type:3,value:"FREQUENCYMETER"},ye.POWERFACTORMETER={type:3,value:"POWERFACTORMETER"},ye.PHASEANGLEMETER={type:3,value:"PHASEANGLEMETER"},ye.VOLTMETER_PEAK={type:3,value:"VOLTMETER_PEAK"},ye.VOLTMETER_RMS={type:3,value:"VOLTMETER_RMS"},ye.USERDEFINED={type:3,value:"USERDEFINED"},ye.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcFlowInstrumentTypeEnum=ye;class Ee{}Ee.ELECTRICMETER={type:3,value:"ELECTRICMETER"},Ee.ENERGYMETER={type:3,value:"ENERGYMETER"},Ee.FLOWMETER={type:3,value:"FLOWMETER"},Ee.GASMETER={type:3,value:"GASMETER"},Ee.OILMETER={type:3,value:"OILMETER"},Ee.WATERMETER={type:3,value:"WATERMETER"},Ee.USERDEFINED={type:3,value:"USERDEFINED"},Ee.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcFlowMeterTypeEnum=Ee;class ve{}ve.FOOTING_BEAM={type:3,value:"FOOTING_BEAM"},ve.PAD_FOOTING={type:3,value:"PAD_FOOTING"},ve.PILE_CAP={type:3,value:"PILE_CAP"},ve.STRIP_FOOTING={type:3,value:"STRIP_FOOTING"},ve.USERDEFINED={type:3,value:"USERDEFINED"},ve.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcFootingTypeEnum=ve;class _e{}_e.GASAPPLIANCE={type:3,value:"GASAPPLIANCE"},_e.GASBOOSTER={type:3,value:"GASBOOSTER"},_e.GASBURNER={type:3,value:"GASBURNER"},_e.USERDEFINED={type:3,value:"USERDEFINED"},_e.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcGasTerminalTypeEnum=_e;class Ie{}Ie.GRAPH_VIEW={type:3,value:"GRAPH_VIEW"},Ie.SKETCH_VIEW={type:3,value:"SKETCH_VIEW"},Ie.MODEL_VIEW={type:3,value:"MODEL_VIEW"},Ie.PLAN_VIEW={type:3,value:"PLAN_VIEW"},Ie.REFLECTED_PLAN_VIEW={type:3,value:"REFLECTED_PLAN_VIEW"},Ie.SECTION_VIEW={type:3,value:"SECTION_VIEW"},Ie.ELEVATION_VIEW={type:3,value:"ELEVATION_VIEW"},Ie.USERDEFINED={type:3,value:"USERDEFINED"},Ie.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcGeometricProjectionEnum=Ie;class Te{}Te.GLOBAL_COORDS={type:3,value:"GLOBAL_COORDS"},Te.LOCAL_COORDS={type:3,value:"LOCAL_COORDS"},e.IfcGlobalOrLocalEnum=Te;class Pe{}Pe.PLATE={type:3,value:"PLATE"},Pe.SHELLANDTUBE={type:3,value:"SHELLANDTUBE"},Pe.USERDEFINED={type:3,value:"USERDEFINED"},Pe.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcHeatExchangerTypeEnum=Pe;class De{}De.STEAMINJECTION={type:3,value:"STEAMINJECTION"},De.ADIABATICAIRWASHER={type:3,value:"ADIABATICAIRWASHER"},De.ADIABATICPAN={type:3,value:"ADIABATICPAN"},De.ADIABATICWETTEDELEMENT={type:3,value:"ADIABATICWETTEDELEMENT"},De.ADIABATICATOMIZING={type:3,value:"ADIABATICATOMIZING"},De.ADIABATICULTRASONIC={type:3,value:"ADIABATICULTRASONIC"},De.ADIABATICRIGIDMEDIA={type:3,value:"ADIABATICRIGIDMEDIA"},De.ADIABATICCOMPRESSEDAIRNOZZLE={type:3,value:"ADIABATICCOMPRESSEDAIRNOZZLE"},De.ASSISTEDELECTRIC={type:3,value:"ASSISTEDELECTRIC"},De.ASSISTEDNATURALGAS={type:3,value:"ASSISTEDNATURALGAS"},De.ASSISTEDPROPANE={type:3,value:"ASSISTEDPROPANE"},De.ASSISTEDBUTANE={type:3,value:"ASSISTEDBUTANE"},De.ASSISTEDSTEAM={type:3,value:"ASSISTEDSTEAM"},De.USERDEFINED={type:3,value:"USERDEFINED"},De.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcHumidifierTypeEnum=De;class be{}be.INTERNAL={type:3,value:"INTERNAL"},be.EXTERNAL={type:3,value:"EXTERNAL"},be.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcInternalOrExternalEnum=be;class Re{}Re.ASSETINVENTORY={type:3,value:"ASSETINVENTORY"},Re.SPACEINVENTORY={type:3,value:"SPACEINVENTORY"},Re.FURNITUREINVENTORY={type:3,value:"FURNITUREINVENTORY"},Re.USERDEFINED={type:3,value:"USERDEFINED"},Re.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcInventoryTypeEnum=Re;class Ce{}Ce.USERDEFINED={type:3,value:"USERDEFINED"},Ce.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcJunctionBoxTypeEnum=Ce;class xe{}xe.COMPACTFLUORESCENT={type:3,value:"COMPACTFLUORESCENT"},xe.FLUORESCENT={type:3,value:"FLUORESCENT"},xe.HIGHPRESSUREMERCURY={type:3,value:"HIGHPRESSUREMERCURY"},xe.HIGHPRESSURESODIUM={type:3,value:"HIGHPRESSURESODIUM"},xe.METALHALIDE={type:3,value:"METALHALIDE"},xe.TUNGSTENFILAMENT={type:3,value:"TUNGSTENFILAMENT"},xe.USERDEFINED={type:3,value:"USERDEFINED"},xe.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcLampTypeEnum=xe;class Ne{}Ne.AXIS1={type:3,value:"AXIS1"},Ne.AXIS2={type:3,value:"AXIS2"},Ne.AXIS3={type:3,value:"AXIS3"},e.IfcLayerSetDirectionEnum=Ne;class Oe{}Oe.TYPE_A={type:3,value:"TYPE_A"},Oe.TYPE_B={type:3,value:"TYPE_B"},Oe.TYPE_C={type:3,value:"TYPE_C"},Oe.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcLightDistributionCurveEnum=Oe;class Se{}Se.COMPACTFLUORESCENT={type:3,value:"COMPACTFLUORESCENT"},Se.FLUORESCENT={type:3,value:"FLUORESCENT"},Se.HIGHPRESSUREMERCURY={type:3,value:"HIGHPRESSUREMERCURY"},Se.HIGHPRESSURESODIUM={type:3,value:"HIGHPRESSURESODIUM"},Se.LIGHTEMITTINGDIODE={type:3,value:"LIGHTEMITTINGDIODE"},Se.LOWPRESSURESODIUM={type:3,value:"LOWPRESSURESODIUM"},Se.LOWVOLTAGEHALOGEN={type:3,value:"LOWVOLTAGEHALOGEN"},Se.MAINVOLTAGEHALOGEN={type:3,value:"MAINVOLTAGEHALOGEN"},Se.METALHALIDE={type:3,value:"METALHALIDE"},Se.TUNGSTENFILAMENT={type:3,value:"TUNGSTENFILAMENT"},Se.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcLightEmissionSourceEnum=Se;class we{}we.POINTSOURCE={type:3,value:"POINTSOURCE"},we.DIRECTIONSOURCE={type:3,value:"DIRECTIONSOURCE"},we.USERDEFINED={type:3,value:"USERDEFINED"},we.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcLightFixtureTypeEnum=we;class Me{}Me.LOAD_GROUP={type:3,value:"LOAD_GROUP"},Me.LOAD_CASE={type:3,value:"LOAD_CASE"},Me.LOAD_COMBINATION_GROUP={type:3,value:"LOAD_COMBINATION_GROUP"},Me.LOAD_COMBINATION={type:3,value:"LOAD_COMBINATION"},Me.USERDEFINED={type:3,value:"USERDEFINED"},Me.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcLoadGroupTypeEnum=Me;class Be{}Be.LOGICALAND={type:3,value:"LOGICALAND"},Be.LOGICALOR={type:3,value:"LOGICALOR"},e.IfcLogicalOperatorEnum=Be;class Fe{}Fe.BRACE={type:3,value:"BRACE"},Fe.CHORD={type:3,value:"CHORD"},Fe.COLLAR={type:3,value:"COLLAR"},Fe.MEMBER={type:3,value:"MEMBER"},Fe.MULLION={type:3,value:"MULLION"},Fe.PLATE={type:3,value:"PLATE"},Fe.POST={type:3,value:"POST"},Fe.PURLIN={type:3,value:"PURLIN"},Fe.RAFTER={type:3,value:"RAFTER"},Fe.STRINGER={type:3,value:"STRINGER"},Fe.STRUT={type:3,value:"STRUT"},Fe.STUD={type:3,value:"STUD"},Fe.USERDEFINED={type:3,value:"USERDEFINED"},Fe.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcMemberTypeEnum=Fe;class Le{}Le.BELTDRIVE={type:3,value:"BELTDRIVE"},Le.COUPLING={type:3,value:"COUPLING"},Le.DIRECTDRIVE={type:3,value:"DIRECTDRIVE"},Le.USERDEFINED={type:3,value:"USERDEFINED"},Le.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcMotorConnectionTypeEnum=Le;class Ue{}Ue.NULL={type:3,value:"NULL"},e.IfcNullStyle=Ue;class He{}He.PRODUCT={type:3,value:"PRODUCT"},He.PROCESS={type:3,value:"PROCESS"},He.CONTROL={type:3,value:"CONTROL"},He.RESOURCE={type:3,value:"RESOURCE"},He.ACTOR={type:3,value:"ACTOR"},He.GROUP={type:3,value:"GROUP"},He.PROJECT={type:3,value:"PROJECT"},He.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcObjectTypeEnum=He;class Ge{}Ge.CODECOMPLIANCE={type:3,value:"CODECOMPLIANCE"},Ge.DESIGNINTENT={type:3,value:"DESIGNINTENT"},Ge.HEALTHANDSAFETY={type:3,value:"HEALTHANDSAFETY"},Ge.REQUIREMENT={type:3,value:"REQUIREMENT"},Ge.SPECIFICATION={type:3,value:"SPECIFICATION"},Ge.TRIGGERCONDITION={type:3,value:"TRIGGERCONDITION"},Ge.USERDEFINED={type:3,value:"USERDEFINED"},Ge.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcObjectiveEnum=Ge;class Ve{}Ve.ASSIGNEE={type:3,value:"ASSIGNEE"},Ve.ASSIGNOR={type:3,value:"ASSIGNOR"},Ve.LESSEE={type:3,value:"LESSEE"},Ve.LESSOR={type:3,value:"LESSOR"},Ve.LETTINGAGENT={type:3,value:"LETTINGAGENT"},Ve.OWNER={type:3,value:"OWNER"},Ve.TENANT={type:3,value:"TENANT"},Ve.USERDEFINED={type:3,value:"USERDEFINED"},Ve.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcOccupantTypeEnum=Ve;class ke{}ke.AUDIOVISUALOUTLET={type:3,value:"AUDIOVISUALOUTLET"},ke.COMMUNICATIONSOUTLET={type:3,value:"COMMUNICATIONSOUTLET"},ke.POWEROUTLET={type:3,value:"POWEROUTLET"},ke.USERDEFINED={type:3,value:"USERDEFINED"},ke.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcOutletTypeEnum=ke;class je{}je.GRILL={type:3,value:"GRILL"},je.LOUVER={type:3,value:"LOUVER"},je.SCREEN={type:3,value:"SCREEN"},je.USERDEFINED={type:3,value:"USERDEFINED"},je.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcPermeableCoveringOperationEnum=je;class Qe{}Qe.PHYSICAL={type:3,value:"PHYSICAL"},Qe.VIRTUAL={type:3,value:"VIRTUAL"},Qe.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcPhysicalOrVirtualEnum=Qe;class We{}We.CAST_IN_PLACE={type:3,value:"CAST_IN_PLACE"},We.COMPOSITE={type:3,value:"COMPOSITE"},We.PRECAST_CONCRETE={type:3,value:"PRECAST_CONCRETE"},We.PREFAB_STEEL={type:3,value:"PREFAB_STEEL"},We.USERDEFINED={type:3,value:"USERDEFINED"},We.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcPileConstructionEnum=We;class ze{}ze.COHESION={type:3,value:"COHESION"},ze.FRICTION={type:3,value:"FRICTION"},ze.SUPPORT={type:3,value:"SUPPORT"},ze.USERDEFINED={type:3,value:"USERDEFINED"},ze.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcPileTypeEnum=ze;class Ke{}Ke.BEND={type:3,value:"BEND"},Ke.CONNECTOR={type:3,value:"CONNECTOR"},Ke.ENTRY={type:3,value:"ENTRY"},Ke.EXIT={type:3,value:"EXIT"},Ke.JUNCTION={type:3,value:"JUNCTION"},Ke.OBSTRUCTION={type:3,value:"OBSTRUCTION"},Ke.TRANSITION={type:3,value:"TRANSITION"},Ke.USERDEFINED={type:3,value:"USERDEFINED"},Ke.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcPipeFittingTypeEnum=Ke;class Ye{}Ye.FLEXIBLESEGMENT={type:3,value:"FLEXIBLESEGMENT"},Ye.RIGIDSEGMENT={type:3,value:"RIGIDSEGMENT"},Ye.GUTTER={type:3,value:"GUTTER"},Ye.SPOOL={type:3,value:"SPOOL"},Ye.USERDEFINED={type:3,value:"USERDEFINED"},Ye.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcPipeSegmentTypeEnum=Ye;class Xe{}Xe.CURTAIN_PANEL={type:3,value:"CURTAIN_PANEL"},Xe.SHEET={type:3,value:"SHEET"},Xe.USERDEFINED={type:3,value:"USERDEFINED"},Xe.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcPlateTypeEnum=Xe;class Ze{}Ze.ADVICE_CAUTION={type:3,value:"ADVICE_CAUTION"},Ze.ADVICE_NOTE={type:3,value:"ADVICE_NOTE"},Ze.ADVICE_WARNING={type:3,value:"ADVICE_WARNING"},Ze.CALIBRATION={type:3,value:"CALIBRATION"},Ze.DIAGNOSTIC={type:3,value:"DIAGNOSTIC"},Ze.SHUTDOWN={type:3,value:"SHUTDOWN"},Ze.STARTUP={type:3,value:"STARTUP"},Ze.USERDEFINED={type:3,value:"USERDEFINED"},Ze.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcProcedureTypeEnum=Ze;class qe{}qe.CURVE={type:3,value:"CURVE"},qe.AREA={type:3,value:"AREA"},e.IfcProfileTypeEnum=qe;class Je{}Je.CHANGE={type:3,value:"CHANGE"},Je.MAINTENANCE={type:3,value:"MAINTENANCE"},Je.MOVE={type:3,value:"MOVE"},Je.PURCHASE={type:3,value:"PURCHASE"},Je.WORK={type:3,value:"WORK"},Je.USERDEFINED={type:3,value:"USERDEFINED"},Je.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcProjectOrderRecordTypeEnum=Je;class $e{}$e.CHANGEORDER={type:3,value:"CHANGEORDER"},$e.MAINTENANCEWORKORDER={type:3,value:"MAINTENANCEWORKORDER"},$e.MOVEORDER={type:3,value:"MOVEORDER"},$e.PURCHASEORDER={type:3,value:"PURCHASEORDER"},$e.WORKORDER={type:3,value:"WORKORDER"},$e.USERDEFINED={type:3,value:"USERDEFINED"},$e.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcProjectOrderTypeEnum=$e;class et{}et.PROJECTED_LENGTH={type:3,value:"PROJECTED_LENGTH"},et.TRUE_LENGTH={type:3,value:"TRUE_LENGTH"},e.IfcProjectedOrTrueLengthEnum=et;class tt{}tt.DESIGN={type:3,value:"DESIGN"},tt.DESIGNMAXIMUM={type:3,value:"DESIGNMAXIMUM"},tt.DESIGNMINIMUM={type:3,value:"DESIGNMINIMUM"},tt.SIMULATED={type:3,value:"SIMULATED"},tt.ASBUILT={type:3,value:"ASBUILT"},tt.COMMISSIONING={type:3,value:"COMMISSIONING"},tt.MEASURED={type:3,value:"MEASURED"},tt.USERDEFINED={type:3,value:"USERDEFINED"},tt.NOTKNOWN={type:3,value:"NOTKNOWN"},e.IfcPropertySourceEnum=tt;class st{}st.FUSEDISCONNECTOR={type:3,value:"FUSEDISCONNECTOR"},st.CIRCUITBREAKER={type:3,value:"CIRCUITBREAKER"},st.EARTHFAILUREDEVICE={type:3,value:"EARTHFAILUREDEVICE"},st.RESIDUALCURRENTCIRCUITBREAKER={type:3,value:"RESIDUALCURRENTCIRCUITBREAKER"},st.RESIDUALCURRENTSWITCH={type:3,value:"RESIDUALCURRENTSWITCH"},st.VARISTOR={type:3,value:"VARISTOR"},st.USERDEFINED={type:3,value:"USERDEFINED"},st.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcProtectiveDeviceTypeEnum=st;class it{}it.CIRCULATOR={type:3,value:"CIRCULATOR"},it.ENDSUCTION={type:3,value:"ENDSUCTION"},it.SPLITCASE={type:3,value:"SPLITCASE"},it.VERTICALINLINE={type:3,value:"VERTICALINLINE"},it.VERTICALTURBINE={type:3,value:"VERTICALTURBINE"},it.USERDEFINED={type:3,value:"USERDEFINED"},it.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcPumpTypeEnum=it;class rt{}rt.HANDRAIL={type:3,value:"HANDRAIL"},rt.GUARDRAIL={type:3,value:"GUARDRAIL"},rt.BALUSTRADE={type:3,value:"BALUSTRADE"},rt.USERDEFINED={type:3,value:"USERDEFINED"},rt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcRailingTypeEnum=rt;class ot{}ot.STRAIGHT={type:3,value:"STRAIGHT"},ot.SPIRAL={type:3,value:"SPIRAL"},ot.USERDEFINED={type:3,value:"USERDEFINED"},ot.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcRampFlightTypeEnum=ot;class nt{}nt.STRAIGHT_RUN_RAMP={type:3,value:"STRAIGHT_RUN_RAMP"},nt.TWO_STRAIGHT_RUN_RAMP={type:3,value:"TWO_STRAIGHT_RUN_RAMP"},nt.QUARTER_TURN_RAMP={type:3,value:"QUARTER_TURN_RAMP"},nt.TWO_QUARTER_TURN_RAMP={type:3,value:"TWO_QUARTER_TURN_RAMP"},nt.HALF_TURN_RAMP={type:3,value:"HALF_TURN_RAMP"},nt.SPIRAL_RAMP={type:3,value:"SPIRAL_RAMP"},nt.USERDEFINED={type:3,value:"USERDEFINED"},nt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcRampTypeEnum=nt;class at{}at.BLINN={type:3,value:"BLINN"},at.FLAT={type:3,value:"FLAT"},at.GLASS={type:3,value:"GLASS"},at.MATT={type:3,value:"MATT"},at.METAL={type:3,value:"METAL"},at.MIRROR={type:3,value:"MIRROR"},at.PHONG={type:3,value:"PHONG"},at.PLASTIC={type:3,value:"PLASTIC"},at.STRAUSS={type:3,value:"STRAUSS"},at.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcReflectanceMethodEnum=at;class lt{}lt.MAIN={type:3,value:"MAIN"},lt.SHEAR={type:3,value:"SHEAR"},lt.LIGATURE={type:3,value:"LIGATURE"},lt.STUD={type:3,value:"STUD"},lt.PUNCHING={type:3,value:"PUNCHING"},lt.EDGE={type:3,value:"EDGE"},lt.RING={type:3,value:"RING"},lt.USERDEFINED={type:3,value:"USERDEFINED"},lt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcReinforcingBarRoleEnum=lt;class ht{}ht.PLAIN={type:3,value:"PLAIN"},ht.TEXTURED={type:3,value:"TEXTURED"},e.IfcReinforcingBarSurfaceEnum=ht;class ct{}ct.CONSUMED={type:3,value:"CONSUMED"},ct.PARTIALLYCONSUMED={type:3,value:"PARTIALLYCONSUMED"},ct.NOTCONSUMED={type:3,value:"NOTCONSUMED"},ct.OCCUPIED={type:3,value:"OCCUPIED"},ct.PARTIALLYOCCUPIED={type:3,value:"PARTIALLYOCCUPIED"},ct.NOTOCCUPIED={type:3,value:"NOTOCCUPIED"},ct.USERDEFINED={type:3,value:"USERDEFINED"},ct.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcResourceConsumptionEnum=ct;class ut{}ut.DIRECTION_X={type:3,value:"DIRECTION_X"},ut.DIRECTION_Y={type:3,value:"DIRECTION_Y"},e.IfcRibPlateDirectionEnum=ut;class At{}At.SUPPLIER={type:3,value:"SUPPLIER"},At.MANUFACTURER={type:3,value:"MANUFACTURER"},At.CONTRACTOR={type:3,value:"CONTRACTOR"},At.SUBCONTRACTOR={type:3,value:"SUBCONTRACTOR"},At.ARCHITECT={type:3,value:"ARCHITECT"},At.STRUCTURALENGINEER={type:3,value:"STRUCTURALENGINEER"},At.COSTENGINEER={type:3,value:"COSTENGINEER"},At.CLIENT={type:3,value:"CLIENT"},At.BUILDINGOWNER={type:3,value:"BUILDINGOWNER"},At.BUILDINGOPERATOR={type:3,value:"BUILDINGOPERATOR"},At.MECHANICALENGINEER={type:3,value:"MECHANICALENGINEER"},At.ELECTRICALENGINEER={type:3,value:"ELECTRICALENGINEER"},At.PROJECTMANAGER={type:3,value:"PROJECTMANAGER"},At.FACILITIESMANAGER={type:3,value:"FACILITIESMANAGER"},At.CIVILENGINEER={type:3,value:"CIVILENGINEER"},At.COMISSIONINGENGINEER={type:3,value:"COMISSIONINGENGINEER"},At.ENGINEER={type:3,value:"ENGINEER"},At.OWNER={type:3,value:"OWNER"},At.CONSULTANT={type:3,value:"CONSULTANT"},At.CONSTRUCTIONMANAGER={type:3,value:"CONSTRUCTIONMANAGER"},At.FIELDCONSTRUCTIONMANAGER={type:3,value:"FIELDCONSTRUCTIONMANAGER"},At.RESELLER={type:3,value:"RESELLER"},At.USERDEFINED={type:3,value:"USERDEFINED"},e.IfcRoleEnum=At;class pt{}pt.FLAT_ROOF={type:3,value:"FLAT_ROOF"},pt.SHED_ROOF={type:3,value:"SHED_ROOF"},pt.GABLE_ROOF={type:3,value:"GABLE_ROOF"},pt.HIP_ROOF={type:3,value:"HIP_ROOF"},pt.HIPPED_GABLE_ROOF={type:3,value:"HIPPED_GABLE_ROOF"},pt.GAMBREL_ROOF={type:3,value:"GAMBREL_ROOF"},pt.MANSARD_ROOF={type:3,value:"MANSARD_ROOF"},pt.BARREL_ROOF={type:3,value:"BARREL_ROOF"},pt.RAINBOW_ROOF={type:3,value:"RAINBOW_ROOF"},pt.BUTTERFLY_ROOF={type:3,value:"BUTTERFLY_ROOF"},pt.PAVILION_ROOF={type:3,value:"PAVILION_ROOF"},pt.DOME_ROOF={type:3,value:"DOME_ROOF"},pt.FREEFORM={type:3,value:"FREEFORM"},pt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcRoofTypeEnum=pt;class dt{}dt.EXA={type:3,value:"EXA"},dt.PETA={type:3,value:"PETA"},dt.TERA={type:3,value:"TERA"},dt.GIGA={type:3,value:"GIGA"},dt.MEGA={type:3,value:"MEGA"},dt.KILO={type:3,value:"KILO"},dt.HECTO={type:3,value:"HECTO"},dt.DECA={type:3,value:"DECA"},dt.DECI={type:3,value:"DECI"},dt.CENTI={type:3,value:"CENTI"},dt.MILLI={type:3,value:"MILLI"},dt.MICRO={type:3,value:"MICRO"},dt.NANO={type:3,value:"NANO"},dt.PICO={type:3,value:"PICO"},dt.FEMTO={type:3,value:"FEMTO"},dt.ATTO={type:3,value:"ATTO"},e.IfcSIPrefix=dt;class ft{}ft.AMPERE={type:3,value:"AMPERE"},ft.BECQUEREL={type:3,value:"BECQUEREL"},ft.CANDELA={type:3,value:"CANDELA"},ft.COULOMB={type:3,value:"COULOMB"},ft.CUBIC_METRE={type:3,value:"CUBIC_METRE"},ft.DEGREE_CELSIUS={type:3,value:"DEGREE_CELSIUS"},ft.FARAD={type:3,value:"FARAD"},ft.GRAM={type:3,value:"GRAM"},ft.GRAY={type:3,value:"GRAY"},ft.HENRY={type:3,value:"HENRY"},ft.HERTZ={type:3,value:"HERTZ"},ft.JOULE={type:3,value:"JOULE"},ft.KELVIN={type:3,value:"KELVIN"},ft.LUMEN={type:3,value:"LUMEN"},ft.LUX={type:3,value:"LUX"},ft.METRE={type:3,value:"METRE"},ft.MOLE={type:3,value:"MOLE"},ft.NEWTON={type:3,value:"NEWTON"},ft.OHM={type:3,value:"OHM"},ft.PASCAL={type:3,value:"PASCAL"},ft.RADIAN={type:3,value:"RADIAN"},ft.SECOND={type:3,value:"SECOND"},ft.SIEMENS={type:3,value:"SIEMENS"},ft.SIEVERT={type:3,value:"SIEVERT"},ft.SQUARE_METRE={type:3,value:"SQUARE_METRE"},ft.STERADIAN={type:3,value:"STERADIAN"},ft.TESLA={type:3,value:"TESLA"},ft.VOLT={type:3,value:"VOLT"},ft.WATT={type:3,value:"WATT"},ft.WEBER={type:3,value:"WEBER"},e.IfcSIUnitName=ft;class mt{}mt.BATH={type:3,value:"BATH"},mt.BIDET={type:3,value:"BIDET"},mt.CISTERN={type:3,value:"CISTERN"},mt.SHOWER={type:3,value:"SHOWER"},mt.SINK={type:3,value:"SINK"},mt.SANITARYFOUNTAIN={type:3,value:"SANITARYFOUNTAIN"},mt.TOILETPAN={type:3,value:"TOILETPAN"},mt.URINAL={type:3,value:"URINAL"},mt.WASHHANDBASIN={type:3,value:"WASHHANDBASIN"},mt.WCSEAT={type:3,value:"WCSEAT"},mt.USERDEFINED={type:3,value:"USERDEFINED"},mt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSanitaryTerminalTypeEnum=mt;class gt{}gt.UNIFORM={type:3,value:"UNIFORM"},gt.TAPERED={type:3,value:"TAPERED"},e.IfcSectionTypeEnum=gt;class yt{}yt.CO2SENSOR={type:3,value:"CO2SENSOR"},yt.FIRESENSOR={type:3,value:"FIRESENSOR"},yt.FLOWSENSOR={type:3,value:"FLOWSENSOR"},yt.GASSENSOR={type:3,value:"GASSENSOR"},yt.HEATSENSOR={type:3,value:"HEATSENSOR"},yt.HUMIDITYSENSOR={type:3,value:"HUMIDITYSENSOR"},yt.LIGHTSENSOR={type:3,value:"LIGHTSENSOR"},yt.MOISTURESENSOR={type:3,value:"MOISTURESENSOR"},yt.MOVEMENTSENSOR={type:3,value:"MOVEMENTSENSOR"},yt.PRESSURESENSOR={type:3,value:"PRESSURESENSOR"},yt.SMOKESENSOR={type:3,value:"SMOKESENSOR"},yt.SOUNDSENSOR={type:3,value:"SOUNDSENSOR"},yt.TEMPERATURESENSOR={type:3,value:"TEMPERATURESENSOR"},yt.USERDEFINED={type:3,value:"USERDEFINED"},yt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSensorTypeEnum=yt;class Et{}Et.START_START={type:3,value:"START_START"},Et.START_FINISH={type:3,value:"START_FINISH"},Et.FINISH_START={type:3,value:"FINISH_START"},Et.FINISH_FINISH={type:3,value:"FINISH_FINISH"},Et.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSequenceEnum=Et;class vt{}vt.A_QUALITYOFCOMPONENTS={type:3,value:"A_QUALITYOFCOMPONENTS"},vt.B_DESIGNLEVEL={type:3,value:"B_DESIGNLEVEL"},vt.C_WORKEXECUTIONLEVEL={type:3,value:"C_WORKEXECUTIONLEVEL"},vt.D_INDOORENVIRONMENT={type:3,value:"D_INDOORENVIRONMENT"},vt.E_OUTDOORENVIRONMENT={type:3,value:"E_OUTDOORENVIRONMENT"},vt.F_INUSECONDITIONS={type:3,value:"F_INUSECONDITIONS"},vt.G_MAINTENANCELEVEL={type:3,value:"G_MAINTENANCELEVEL"},vt.USERDEFINED={type:3,value:"USERDEFINED"},vt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcServiceLifeFactorTypeEnum=vt;class _t{}_t.ACTUALSERVICELIFE={type:3,value:"ACTUALSERVICELIFE"},_t.EXPECTEDSERVICELIFE={type:3,value:"EXPECTEDSERVICELIFE"},_t.OPTIMISTICREFERENCESERVICELIFE={type:3,value:"OPTIMISTICREFERENCESERVICELIFE"},_t.PESSIMISTICREFERENCESERVICELIFE={type:3,value:"PESSIMISTICREFERENCESERVICELIFE"},_t.REFERENCESERVICELIFE={type:3,value:"REFERENCESERVICELIFE"},e.IfcServiceLifeTypeEnum=_t;class It{}It.FLOOR={type:3,value:"FLOOR"},It.ROOF={type:3,value:"ROOF"},It.LANDING={type:3,value:"LANDING"},It.BASESLAB={type:3,value:"BASESLAB"},It.USERDEFINED={type:3,value:"USERDEFINED"},It.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSlabTypeEnum=It;class Tt{}Tt.DBA={type:3,value:"DBA"},Tt.DBB={type:3,value:"DBB"},Tt.DBC={type:3,value:"DBC"},Tt.NC={type:3,value:"NC"},Tt.NR={type:3,value:"NR"},Tt.USERDEFINED={type:3,value:"USERDEFINED"},Tt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSoundScaleEnum=Tt;class Pt{}Pt.SECTIONALRADIATOR={type:3,value:"SECTIONALRADIATOR"},Pt.PANELRADIATOR={type:3,value:"PANELRADIATOR"},Pt.TUBULARRADIATOR={type:3,value:"TUBULARRADIATOR"},Pt.CONVECTOR={type:3,value:"CONVECTOR"},Pt.BASEBOARDHEATER={type:3,value:"BASEBOARDHEATER"},Pt.FINNEDTUBEUNIT={type:3,value:"FINNEDTUBEUNIT"},Pt.UNITHEATER={type:3,value:"UNITHEATER"},Pt.USERDEFINED={type:3,value:"USERDEFINED"},Pt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSpaceHeaterTypeEnum=Pt;class Dt{}Dt.USERDEFINED={type:3,value:"USERDEFINED"},Dt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSpaceTypeEnum=Dt;class bt{}bt.BIRDCAGE={type:3,value:"BIRDCAGE"},bt.COWL={type:3,value:"COWL"},bt.RAINWATERHOPPER={type:3,value:"RAINWATERHOPPER"},bt.USERDEFINED={type:3,value:"USERDEFINED"},bt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcStackTerminalTypeEnum=bt;class Rt{}Rt.STRAIGHT={type:3,value:"STRAIGHT"},Rt.WINDER={type:3,value:"WINDER"},Rt.SPIRAL={type:3,value:"SPIRAL"},Rt.CURVED={type:3,value:"CURVED"},Rt.FREEFORM={type:3,value:"FREEFORM"},Rt.USERDEFINED={type:3,value:"USERDEFINED"},Rt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcStairFlightTypeEnum=Rt;class Ct{}Ct.STRAIGHT_RUN_STAIR={type:3,value:"STRAIGHT_RUN_STAIR"},Ct.TWO_STRAIGHT_RUN_STAIR={type:3,value:"TWO_STRAIGHT_RUN_STAIR"},Ct.QUARTER_WINDING_STAIR={type:3,value:"QUARTER_WINDING_STAIR"},Ct.QUARTER_TURN_STAIR={type:3,value:"QUARTER_TURN_STAIR"},Ct.HALF_WINDING_STAIR={type:3,value:"HALF_WINDING_STAIR"},Ct.HALF_TURN_STAIR={type:3,value:"HALF_TURN_STAIR"},Ct.TWO_QUARTER_WINDING_STAIR={type:3,value:"TWO_QUARTER_WINDING_STAIR"},Ct.TWO_QUARTER_TURN_STAIR={type:3,value:"TWO_QUARTER_TURN_STAIR"},Ct.THREE_QUARTER_WINDING_STAIR={type:3,value:"THREE_QUARTER_WINDING_STAIR"},Ct.THREE_QUARTER_TURN_STAIR={type:3,value:"THREE_QUARTER_TURN_STAIR"},Ct.SPIRAL_STAIR={type:3,value:"SPIRAL_STAIR"},Ct.DOUBLE_RETURN_STAIR={type:3,value:"DOUBLE_RETURN_STAIR"},Ct.CURVED_RUN_STAIR={type:3,value:"CURVED_RUN_STAIR"},Ct.TWO_CURVED_RUN_STAIR={type:3,value:"TWO_CURVED_RUN_STAIR"},Ct.USERDEFINED={type:3,value:"USERDEFINED"},Ct.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcStairTypeEnum=Ct;class xt{}xt.READWRITE={type:3,value:"READWRITE"},xt.READONLY={type:3,value:"READONLY"},xt.LOCKED={type:3,value:"LOCKED"},xt.READWRITELOCKED={type:3,value:"READWRITELOCKED"},xt.READONLYLOCKED={type:3,value:"READONLYLOCKED"},e.IfcStateEnum=xt;class Nt{}Nt.RIGID_JOINED_MEMBER={type:3,value:"RIGID_JOINED_MEMBER"},Nt.PIN_JOINED_MEMBER={type:3,value:"PIN_JOINED_MEMBER"},Nt.CABLE={type:3,value:"CABLE"},Nt.TENSION_MEMBER={type:3,value:"TENSION_MEMBER"},Nt.COMPRESSION_MEMBER={type:3,value:"COMPRESSION_MEMBER"},Nt.USERDEFINED={type:3,value:"USERDEFINED"},Nt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcStructuralCurveTypeEnum=Nt;class Ot{}Ot.BENDING_ELEMENT={type:3,value:"BENDING_ELEMENT"},Ot.MEMBRANE_ELEMENT={type:3,value:"MEMBRANE_ELEMENT"},Ot.SHELL={type:3,value:"SHELL"},Ot.USERDEFINED={type:3,value:"USERDEFINED"},Ot.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcStructuralSurfaceTypeEnum=Ot;class St{}St.POSITIVE={type:3,value:"POSITIVE"},St.NEGATIVE={type:3,value:"NEGATIVE"},St.BOTH={type:3,value:"BOTH"},e.IfcSurfaceSide=St;class wt{}wt.BUMP={type:3,value:"BUMP"},wt.OPACITY={type:3,value:"OPACITY"},wt.REFLECTION={type:3,value:"REFLECTION"},wt.SELFILLUMINATION={type:3,value:"SELFILLUMINATION"},wt.SHININESS={type:3,value:"SHININESS"},wt.SPECULAR={type:3,value:"SPECULAR"},wt.TEXTURE={type:3,value:"TEXTURE"},wt.TRANSPARENCYMAP={type:3,value:"TRANSPARENCYMAP"},wt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSurfaceTextureEnum=wt;class Mt{}Mt.CONTACTOR={type:3,value:"CONTACTOR"},Mt.EMERGENCYSTOP={type:3,value:"EMERGENCYSTOP"},Mt.STARTER={type:3,value:"STARTER"},Mt.SWITCHDISCONNECTOR={type:3,value:"SWITCHDISCONNECTOR"},Mt.TOGGLESWITCH={type:3,value:"TOGGLESWITCH"},Mt.USERDEFINED={type:3,value:"USERDEFINED"},Mt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSwitchingDeviceTypeEnum=Mt;class Bt{}Bt.PREFORMED={type:3,value:"PREFORMED"},Bt.SECTIONAL={type:3,value:"SECTIONAL"},Bt.EXPANSION={type:3,value:"EXPANSION"},Bt.PRESSUREVESSEL={type:3,value:"PRESSUREVESSEL"},Bt.USERDEFINED={type:3,value:"USERDEFINED"},Bt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcTankTypeEnum=Bt;class Ft{}Ft.STRAND={type:3,value:"STRAND"},Ft.WIRE={type:3,value:"WIRE"},Ft.BAR={type:3,value:"BAR"},Ft.COATED={type:3,value:"COATED"},Ft.USERDEFINED={type:3,value:"USERDEFINED"},Ft.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcTendonTypeEnum=Ft;class Lt{}Lt.LEFT={type:3,value:"LEFT"},Lt.RIGHT={type:3,value:"RIGHT"},Lt.UP={type:3,value:"UP"},Lt.DOWN={type:3,value:"DOWN"},e.IfcTextPath=Lt;class Ut{}Ut.PEOPLE={type:3,value:"PEOPLE"},Ut.LIGHTING={type:3,value:"LIGHTING"},Ut.EQUIPMENT={type:3,value:"EQUIPMENT"},Ut.VENTILATIONINDOORAIR={type:3,value:"VENTILATIONINDOORAIR"},Ut.VENTILATIONOUTSIDEAIR={type:3,value:"VENTILATIONOUTSIDEAIR"},Ut.RECIRCULATEDAIR={type:3,value:"RECIRCULATEDAIR"},Ut.EXHAUSTAIR={type:3,value:"EXHAUSTAIR"},Ut.AIREXCHANGERATE={type:3,value:"AIREXCHANGERATE"},Ut.DRYBULBTEMPERATURE={type:3,value:"DRYBULBTEMPERATURE"},Ut.RELATIVEHUMIDITY={type:3,value:"RELATIVEHUMIDITY"},Ut.INFILTRATION={type:3,value:"INFILTRATION"},Ut.USERDEFINED={type:3,value:"USERDEFINED"},Ut.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcThermalLoadSourceEnum=Ut;class Ht{}Ht.SENSIBLE={type:3,value:"SENSIBLE"},Ht.LATENT={type:3,value:"LATENT"},Ht.RADIANT={type:3,value:"RADIANT"},Ht.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcThermalLoadTypeEnum=Ht;class Gt{}Gt.CONTINUOUS={type:3,value:"CONTINUOUS"},Gt.DISCRETE={type:3,value:"DISCRETE"},Gt.DISCRETEBINARY={type:3,value:"DISCRETEBINARY"},Gt.PIECEWISEBINARY={type:3,value:"PIECEWISEBINARY"},Gt.PIECEWISECONSTANT={type:3,value:"PIECEWISECONSTANT"},Gt.PIECEWISECONTINUOUS={type:3,value:"PIECEWISECONTINUOUS"},Gt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcTimeSeriesDataTypeEnum=Gt;class Vt{}Vt.ANNUAL={type:3,value:"ANNUAL"},Vt.MONTHLY={type:3,value:"MONTHLY"},Vt.WEEKLY={type:3,value:"WEEKLY"},Vt.DAILY={type:3,value:"DAILY"},Vt.USERDEFINED={type:3,value:"USERDEFINED"},Vt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcTimeSeriesScheduleTypeEnum=Vt;class kt{}kt.CURRENT={type:3,value:"CURRENT"},kt.FREQUENCY={type:3,value:"FREQUENCY"},kt.VOLTAGE={type:3,value:"VOLTAGE"},kt.USERDEFINED={type:3,value:"USERDEFINED"},kt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcTransformerTypeEnum=kt;class jt{}jt.DISCONTINUOUS={type:3,value:"DISCONTINUOUS"},jt.CONTINUOUS={type:3,value:"CONTINUOUS"},jt.CONTSAMEGRADIENT={type:3,value:"CONTSAMEGRADIENT"},jt.CONTSAMEGRADIENTSAMECURVATURE={type:3,value:"CONTSAMEGRADIENTSAMECURVATURE"},e.IfcTransitionCode=jt;class Qt{}Qt.ELEVATOR={type:3,value:"ELEVATOR"},Qt.ESCALATOR={type:3,value:"ESCALATOR"},Qt.MOVINGWALKWAY={type:3,value:"MOVINGWALKWAY"},Qt.USERDEFINED={type:3,value:"USERDEFINED"},Qt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcTransportElementTypeEnum=Qt;class Wt{}Wt.CARTESIAN={type:3,value:"CARTESIAN"},Wt.PARAMETER={type:3,value:"PARAMETER"},Wt.UNSPECIFIED={type:3,value:"UNSPECIFIED"},e.IfcTrimmingPreference=Wt;class zt{}zt.FINNED={type:3,value:"FINNED"},zt.USERDEFINED={type:3,value:"USERDEFINED"},zt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcTubeBundleTypeEnum=zt;class Kt{}Kt.ABSORBEDDOSEUNIT={type:3,value:"ABSORBEDDOSEUNIT"},Kt.AMOUNTOFSUBSTANCEUNIT={type:3,value:"AMOUNTOFSUBSTANCEUNIT"},Kt.AREAUNIT={type:3,value:"AREAUNIT"},Kt.DOSEEQUIVALENTUNIT={type:3,value:"DOSEEQUIVALENTUNIT"},Kt.ELECTRICCAPACITANCEUNIT={type:3,value:"ELECTRICCAPACITANCEUNIT"},Kt.ELECTRICCHARGEUNIT={type:3,value:"ELECTRICCHARGEUNIT"},Kt.ELECTRICCONDUCTANCEUNIT={type:3,value:"ELECTRICCONDUCTANCEUNIT"},Kt.ELECTRICCURRENTUNIT={type:3,value:"ELECTRICCURRENTUNIT"},Kt.ELECTRICRESISTANCEUNIT={type:3,value:"ELECTRICRESISTANCEUNIT"},Kt.ELECTRICVOLTAGEUNIT={type:3,value:"ELECTRICVOLTAGEUNIT"},Kt.ENERGYUNIT={type:3,value:"ENERGYUNIT"},Kt.FORCEUNIT={type:3,value:"FORCEUNIT"},Kt.FREQUENCYUNIT={type:3,value:"FREQUENCYUNIT"},Kt.ILLUMINANCEUNIT={type:3,value:"ILLUMINANCEUNIT"},Kt.INDUCTANCEUNIT={type:3,value:"INDUCTANCEUNIT"},Kt.LENGTHUNIT={type:3,value:"LENGTHUNIT"},Kt.LUMINOUSFLUXUNIT={type:3,value:"LUMINOUSFLUXUNIT"},Kt.LUMINOUSINTENSITYUNIT={type:3,value:"LUMINOUSINTENSITYUNIT"},Kt.MAGNETICFLUXDENSITYUNIT={type:3,value:"MAGNETICFLUXDENSITYUNIT"},Kt.MAGNETICFLUXUNIT={type:3,value:"MAGNETICFLUXUNIT"},Kt.MASSUNIT={type:3,value:"MASSUNIT"},Kt.PLANEANGLEUNIT={type:3,value:"PLANEANGLEUNIT"},Kt.POWERUNIT={type:3,value:"POWERUNIT"},Kt.PRESSUREUNIT={type:3,value:"PRESSUREUNIT"},Kt.RADIOACTIVITYUNIT={type:3,value:"RADIOACTIVITYUNIT"},Kt.SOLIDANGLEUNIT={type:3,value:"SOLIDANGLEUNIT"},Kt.THERMODYNAMICTEMPERATUREUNIT={type:3,value:"THERMODYNAMICTEMPERATUREUNIT"},Kt.TIMEUNIT={type:3,value:"TIMEUNIT"},Kt.VOLUMEUNIT={type:3,value:"VOLUMEUNIT"},Kt.USERDEFINED={type:3,value:"USERDEFINED"},e.IfcUnitEnum=Kt;class Yt{}Yt.AIRHANDLER={type:3,value:"AIRHANDLER"},Yt.AIRCONDITIONINGUNIT={type:3,value:"AIRCONDITIONINGUNIT"},Yt.SPLITSYSTEM={type:3,value:"SPLITSYSTEM"},Yt.ROOFTOPUNIT={type:3,value:"ROOFTOPUNIT"},Yt.USERDEFINED={type:3,value:"USERDEFINED"},Yt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcUnitaryEquipmentTypeEnum=Yt;class Xt{}Xt.AIRRELEASE={type:3,value:"AIRRELEASE"},Xt.ANTIVACUUM={type:3,value:"ANTIVACUUM"},Xt.CHANGEOVER={type:3,value:"CHANGEOVER"},Xt.CHECK={type:3,value:"CHECK"},Xt.COMMISSIONING={type:3,value:"COMMISSIONING"},Xt.DIVERTING={type:3,value:"DIVERTING"},Xt.DRAWOFFCOCK={type:3,value:"DRAWOFFCOCK"},Xt.DOUBLECHECK={type:3,value:"DOUBLECHECK"},Xt.DOUBLEREGULATING={type:3,value:"DOUBLEREGULATING"},Xt.FAUCET={type:3,value:"FAUCET"},Xt.FLUSHING={type:3,value:"FLUSHING"},Xt.GASCOCK={type:3,value:"GASCOCK"},Xt.GASTAP={type:3,value:"GASTAP"},Xt.ISOLATING={type:3,value:"ISOLATING"},Xt.MIXING={type:3,value:"MIXING"},Xt.PRESSUREREDUCING={type:3,value:"PRESSUREREDUCING"},Xt.PRESSURERELIEF={type:3,value:"PRESSURERELIEF"},Xt.REGULATING={type:3,value:"REGULATING"},Xt.SAFETYCUTOFF={type:3,value:"SAFETYCUTOFF"},Xt.STEAMTRAP={type:3,value:"STEAMTRAP"},Xt.STOPCOCK={type:3,value:"STOPCOCK"},Xt.USERDEFINED={type:3,value:"USERDEFINED"},Xt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcValveTypeEnum=Xt;class Zt{}Zt.COMPRESSION={type:3,value:"COMPRESSION"},Zt.SPRING={type:3,value:"SPRING"},Zt.USERDEFINED={type:3,value:"USERDEFINED"},Zt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcVibrationIsolatorTypeEnum=Zt;class qt{}qt.STANDARD={type:3,value:"STANDARD"},qt.POLYGONAL={type:3,value:"POLYGONAL"},qt.SHEAR={type:3,value:"SHEAR"},qt.ELEMENTEDWALL={type:3,value:"ELEMENTEDWALL"},qt.PLUMBINGWALL={type:3,value:"PLUMBINGWALL"},qt.USERDEFINED={type:3,value:"USERDEFINED"},qt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcWallTypeEnum=qt;class Jt{}Jt.FLOORTRAP={type:3,value:"FLOORTRAP"},Jt.FLOORWASTE={type:3,value:"FLOORWASTE"},Jt.GULLYSUMP={type:3,value:"GULLYSUMP"},Jt.GULLYTRAP={type:3,value:"GULLYTRAP"},Jt.GREASEINTERCEPTOR={type:3,value:"GREASEINTERCEPTOR"},Jt.OILINTERCEPTOR={type:3,value:"OILINTERCEPTOR"},Jt.PETROLINTERCEPTOR={type:3,value:"PETROLINTERCEPTOR"},Jt.ROOFDRAIN={type:3,value:"ROOFDRAIN"},Jt.WASTEDISPOSALUNIT={type:3,value:"WASTEDISPOSALUNIT"},Jt.WASTETRAP={type:3,value:"WASTETRAP"},Jt.USERDEFINED={type:3,value:"USERDEFINED"},Jt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcWasteTerminalTypeEnum=Jt;class $t{}$t.SIDEHUNGRIGHTHAND={type:3,value:"SIDEHUNGRIGHTHAND"},$t.SIDEHUNGLEFTHAND={type:3,value:"SIDEHUNGLEFTHAND"},$t.TILTANDTURNRIGHTHAND={type:3,value:"TILTANDTURNRIGHTHAND"},$t.TILTANDTURNLEFTHAND={type:3,value:"TILTANDTURNLEFTHAND"},$t.TOPHUNG={type:3,value:"TOPHUNG"},$t.BOTTOMHUNG={type:3,value:"BOTTOMHUNG"},$t.PIVOTHORIZONTAL={type:3,value:"PIVOTHORIZONTAL"},$t.PIVOTVERTICAL={type:3,value:"PIVOTVERTICAL"},$t.SLIDINGHORIZONTAL={type:3,value:"SLIDINGHORIZONTAL"},$t.SLIDINGVERTICAL={type:3,value:"SLIDINGVERTICAL"},$t.REMOVABLECASEMENT={type:3,value:"REMOVABLECASEMENT"},$t.FIXEDCASEMENT={type:3,value:"FIXEDCASEMENT"},$t.OTHEROPERATION={type:3,value:"OTHEROPERATION"},$t.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcWindowPanelOperationEnum=$t;class es{}es.LEFT={type:3,value:"LEFT"},es.MIDDLE={type:3,value:"MIDDLE"},es.RIGHT={type:3,value:"RIGHT"},es.BOTTOM={type:3,value:"BOTTOM"},es.TOP={type:3,value:"TOP"},es.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcWindowPanelPositionEnum=es;class ts{}ts.ALUMINIUM={type:3,value:"ALUMINIUM"},ts.HIGH_GRADE_STEEL={type:3,value:"HIGH_GRADE_STEEL"},ts.STEEL={type:3,value:"STEEL"},ts.WOOD={type:3,value:"WOOD"},ts.ALUMINIUM_WOOD={type:3,value:"ALUMINIUM_WOOD"},ts.PLASTIC={type:3,value:"PLASTIC"},ts.OTHER_CONSTRUCTION={type:3,value:"OTHER_CONSTRUCTION"},ts.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcWindowStyleConstructionEnum=ts;class ss{}ss.SINGLE_PANEL={type:3,value:"SINGLE_PANEL"},ss.DOUBLE_PANEL_VERTICAL={type:3,value:"DOUBLE_PANEL_VERTICAL"},ss.DOUBLE_PANEL_HORIZONTAL={type:3,value:"DOUBLE_PANEL_HORIZONTAL"},ss.TRIPLE_PANEL_VERTICAL={type:3,value:"TRIPLE_PANEL_VERTICAL"},ss.TRIPLE_PANEL_BOTTOM={type:3,value:"TRIPLE_PANEL_BOTTOM"},ss.TRIPLE_PANEL_TOP={type:3,value:"TRIPLE_PANEL_TOP"},ss.TRIPLE_PANEL_LEFT={type:3,value:"TRIPLE_PANEL_LEFT"},ss.TRIPLE_PANEL_RIGHT={type:3,value:"TRIPLE_PANEL_RIGHT"},ss.TRIPLE_PANEL_HORIZONTAL={type:3,value:"TRIPLE_PANEL_HORIZONTAL"},ss.USERDEFINED={type:3,value:"USERDEFINED"},ss.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcWindowStyleOperationEnum=ss;class is{}is.ACTUAL={type:3,value:"ACTUAL"},is.BASELINE={type:3,value:"BASELINE"},is.PLANNED={type:3,value:"PLANNED"},is.USERDEFINED={type:3,value:"USERDEFINED"},is.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcWorkControlTypeEnum=is;e.IfcActorRole=class extends qv{constructor(e,t,s,i){super(e),this.Role=t,this.UserDefinedRole=s,this.Description=i,this.type=3630933823}};class rs extends qv{constructor(e,t,s,i){super(e),this.Purpose=t,this.Description=s,this.UserDefinedPurpose=i,this.type=618182010}}e.IfcAddress=rs;e.IfcApplication=class extends qv{constructor(e,t,s,i,r){super(e),this.ApplicationDeveloper=t,this.Version=s,this.ApplicationFullName=i,this.ApplicationIdentifier=r,this.type=639542469}};class os extends qv{constructor(e,t,s,i,r,o,n){super(e),this.Name=t,this.Description=s,this.AppliedValue=i,this.UnitBasis=r,this.ApplicableDate=o,this.FixedUntilDate=n,this.type=411424972}}e.IfcAppliedValue=os;e.IfcAppliedValueRelationship=class extends qv{constructor(e,t,s,i,r,o){super(e),this.ComponentOfTotal=t,this.Components=s,this.ArithmeticOperator=i,this.Name=r,this.Description=o,this.type=1110488051}};e.IfcApproval=class extends qv{constructor(e,t,s,i,r,o,n,a){super(e),this.Description=t,this.ApprovalDateTime=s,this.ApprovalStatus=i,this.ApprovalLevel=r,this.ApprovalQualifier=o,this.Name=n,this.Identifier=a,this.type=130549933}};e.IfcApprovalActorRelationship=class extends qv{constructor(e,t,s,i){super(e),this.Actor=t,this.Approval=s,this.Role=i,this.type=2080292479}};e.IfcApprovalPropertyRelationship=class extends qv{constructor(e,t,s){super(e),this.ApprovedProperties=t,this.Approval=s,this.type=390851274}};e.IfcApprovalRelationship=class extends qv{constructor(e,t,s,i,r){super(e),this.RelatedApproval=t,this.RelatingApproval=s,this.Description=i,this.Name=r,this.type=3869604511}};class ns extends qv{constructor(e,t){super(e),this.Name=t,this.type=4037036970}}e.IfcBoundaryCondition=ns;e.IfcBoundaryEdgeCondition=class extends ns{constructor(e,t,s,i,r,o,n,a){super(e,t),this.Name=t,this.LinearStiffnessByLengthX=s,this.LinearStiffnessByLengthY=i,this.LinearStiffnessByLengthZ=r,this.RotationalStiffnessByLengthX=o,this.RotationalStiffnessByLengthY=n,this.RotationalStiffnessByLengthZ=a,this.type=1560379544}};e.IfcBoundaryFaceCondition=class extends ns{constructor(e,t,s,i,r){super(e,t),this.Name=t,this.LinearStiffnessByAreaX=s,this.LinearStiffnessByAreaY=i,this.LinearStiffnessByAreaZ=r,this.type=3367102660}};class as extends ns{constructor(e,t,s,i,r,o,n,a){super(e,t),this.Name=t,this.LinearStiffnessX=s,this.LinearStiffnessY=i,this.LinearStiffnessZ=r,this.RotationalStiffnessX=o,this.RotationalStiffnessY=n,this.RotationalStiffnessZ=a,this.type=1387855156}}e.IfcBoundaryNodeCondition=as;e.IfcBoundaryNodeConditionWarping=class extends as{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a),this.Name=t,this.LinearStiffnessX=s,this.LinearStiffnessY=i,this.LinearStiffnessZ=r,this.RotationalStiffnessX=o,this.RotationalStiffnessY=n,this.RotationalStiffnessZ=a,this.WarpingStiffness=l,this.type=2069777674}};e.IfcCalendarDate=class extends qv{constructor(e,t,s,i){super(e),this.DayComponent=t,this.MonthComponent=s,this.YearComponent=i,this.type=622194075}};e.IfcClassification=class extends qv{constructor(e,t,s,i,r){super(e),this.Source=t,this.Edition=s,this.EditionDate=i,this.Name=r,this.type=747523909}};e.IfcClassificationItem=class extends qv{constructor(e,t,s,i){super(e),this.Notation=t,this.ItemOf=s,this.Title=i,this.type=1767535486}};e.IfcClassificationItemRelationship=class extends qv{constructor(e,t,s){super(e),this.RelatingItem=t,this.RelatedItems=s,this.type=1098599126}};e.IfcClassificationNotation=class extends qv{constructor(e,t){super(e),this.NotationFacets=t,this.type=938368621}};e.IfcClassificationNotationFacet=class extends qv{constructor(e,t){super(e),this.NotationValue=t,this.type=3639012971}};class ls extends qv{constructor(e,t){super(e),this.Name=t,this.type=3264961684}}e.IfcColourSpecification=ls;class hs extends qv{constructor(e){super(e),this.type=2859738748}}e.IfcConnectionGeometry=hs;class cs extends hs{constructor(e,t,s){super(e),this.PointOnRelatingElement=t,this.PointOnRelatedElement=s,this.type=2614616156}}e.IfcConnectionPointGeometry=cs;e.IfcConnectionPortGeometry=class extends hs{constructor(e,t,s,i){super(e),this.LocationAtRelatingElement=t,this.LocationAtRelatedElement=s,this.ProfileOfPort=i,this.type=4257277454}};e.IfcConnectionSurfaceGeometry=class extends hs{constructor(e,t,s){super(e),this.SurfaceOnRelatingElement=t,this.SurfaceOnRelatedElement=s,this.type=2732653382}};class us extends qv{constructor(e,t,s,i,r,o,n,a){super(e),this.Name=t,this.Description=s,this.ConstraintGrade=i,this.ConstraintSource=r,this.CreatingActor=o,this.CreationTime=n,this.UserDefinedGrade=a,this.type=1959218052}}e.IfcConstraint=us;e.IfcConstraintAggregationRelationship=class extends qv{constructor(e,t,s,i,r,o){super(e),this.Name=t,this.Description=s,this.RelatingConstraint=i,this.RelatedConstraints=r,this.LogicalAggregator=o,this.type=1658513725}};e.IfcConstraintClassificationRelationship=class extends qv{constructor(e,t,s){super(e),this.ClassifiedConstraint=t,this.RelatedClassifications=s,this.type=613356794}};e.IfcConstraintRelationship=class extends qv{constructor(e,t,s,i,r){super(e),this.Name=t,this.Description=s,this.RelatingConstraint=i,this.RelatedConstraints=r,this.type=347226245}};e.IfcCoordinatedUniversalTimeOffset=class extends qv{constructor(e,t,s,i){super(e),this.HourOffset=t,this.MinuteOffset=s,this.Sense=i,this.type=1065062679}};e.IfcCostValue=class extends os{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n),this.Name=t,this.Description=s,this.AppliedValue=i,this.UnitBasis=r,this.ApplicableDate=o,this.FixedUntilDate=n,this.CostType=a,this.Condition=l,this.type=602808272}};e.IfcCurrencyRelationship=class extends qv{constructor(e,t,s,i,r,o){super(e),this.RelatingMonetaryUnit=t,this.RelatedMonetaryUnit=s,this.ExchangeRate=i,this.RateDateTime=r,this.RateSource=o,this.type=539742890}};e.IfcCurveStyleFont=class extends qv{constructor(e,t,s){super(e),this.Name=t,this.PatternList=s,this.type=1105321065}};e.IfcCurveStyleFontAndScaling=class extends qv{constructor(e,t,s,i){super(e),this.Name=t,this.CurveFont=s,this.CurveFontScaling=i,this.type=2367409068}};e.IfcCurveStyleFontPattern=class extends qv{constructor(e,t,s){super(e),this.VisibleSegmentLength=t,this.InvisibleSegmentLength=s,this.type=3510044353}};e.IfcDateAndTime=class extends qv{constructor(e,t,s){super(e),this.DateComponent=t,this.TimeComponent=s,this.type=1072939445}};e.IfcDerivedUnit=class extends qv{constructor(e,t,s,i){super(e),this.Elements=t,this.UnitType=s,this.UserDefinedType=i,this.type=1765591967}};e.IfcDerivedUnitElement=class extends qv{constructor(e,t,s){super(e),this.Unit=t,this.Exponent=s,this.type=1045800335}};e.IfcDimensionalExponents=class extends qv{constructor(e,t,s,i,r,o,n,a){super(e),this.LengthExponent=t,this.MassExponent=s,this.TimeExponent=i,this.ElectricCurrentExponent=r,this.ThermodynamicTemperatureExponent=o,this.AmountOfSubstanceExponent=n,this.LuminousIntensityExponent=a,this.type=2949456006}};e.IfcDocumentElectronicFormat=class extends qv{constructor(e,t,s,i){super(e),this.FileExtension=t,this.MimeContentType=s,this.MimeSubtype=i,this.type=1376555844}};e.IfcDocumentInformation=class extends qv{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f,m,g){super(e),this.DocumentId=t,this.Name=s,this.Description=i,this.DocumentReferences=r,this.Purpose=o,this.IntendedUse=n,this.Scope=a,this.Revision=l,this.DocumentOwner=h,this.Editors=c,this.CreationTime=u,this.LastRevisionTime=A,this.ElectronicFormat=p,this.ValidFrom=d,this.ValidUntil=f,this.Confidentiality=m,this.Status=g,this.type=1154170062}};e.IfcDocumentInformationRelationship=class extends qv{constructor(e,t,s,i){super(e),this.RelatingDocument=t,this.RelatedDocuments=s,this.RelationshipType=i,this.type=770865208}};class As extends qv{constructor(e,t,s,i,r){super(e),this.Name=t,this.Description=s,this.RelatingDraughtingCallout=i,this.RelatedDraughtingCallout=r,this.type=3796139169}}e.IfcDraughtingCalloutRelationship=As;e.IfcEnvironmentalImpactValue=class extends os{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n),this.Name=t,this.Description=s,this.AppliedValue=i,this.UnitBasis=r,this.ApplicableDate=o,this.FixedUntilDate=n,this.ImpactType=a,this.Category=l,this.UserDefinedCategory=h,this.type=1648886627}};class ps extends qv{constructor(e,t,s,i){super(e),this.Location=t,this.ItemReference=s,this.Name=i,this.type=3200245327}}e.IfcExternalReference=ps;e.IfcExternallyDefinedHatchStyle=class extends ps{constructor(e,t,s,i){super(e,t,s,i),this.Location=t,this.ItemReference=s,this.Name=i,this.type=2242383968}};e.IfcExternallyDefinedSurfaceStyle=class extends ps{constructor(e,t,s,i){super(e,t,s,i),this.Location=t,this.ItemReference=s,this.Name=i,this.type=1040185647}};e.IfcExternallyDefinedSymbol=class extends ps{constructor(e,t,s,i){super(e,t,s,i),this.Location=t,this.ItemReference=s,this.Name=i,this.type=3207319532}};e.IfcExternallyDefinedTextFont=class extends ps{constructor(e,t,s,i){super(e,t,s,i),this.Location=t,this.ItemReference=s,this.Name=i,this.type=3548104201}};e.IfcGridAxis=class extends qv{constructor(e,t,s,i){super(e),this.AxisTag=t,this.AxisCurve=s,this.SameSense=i,this.type=852622518}};e.IfcIrregularTimeSeriesValue=class extends qv{constructor(e,t,s){super(e),this.TimeStamp=t,this.ListValues=s,this.type=3020489413}};e.IfcLibraryInformation=class extends qv{constructor(e,t,s,i,r,o){super(e),this.Name=t,this.Version=s,this.Publisher=i,this.VersionDate=r,this.LibraryReference=o,this.type=2655187982}};e.IfcLibraryReference=class extends ps{constructor(e,t,s,i){super(e,t,s,i),this.Location=t,this.ItemReference=s,this.Name=i,this.type=3452421091}};e.IfcLightDistributionData=class extends qv{constructor(e,t,s,i){super(e),this.MainPlaneAngle=t,this.SecondaryPlaneAngle=s,this.LuminousIntensity=i,this.type=4162380809}};e.IfcLightIntensityDistribution=class extends qv{constructor(e,t,s){super(e),this.LightDistributionCurve=t,this.DistributionData=s,this.type=1566485204}};e.IfcLocalTime=class extends qv{constructor(e,t,s,i,r,o){super(e),this.HourComponent=t,this.MinuteComponent=s,this.SecondComponent=i,this.Zone=r,this.DaylightSavingOffset=o,this.type=30780891}};e.IfcMaterial=class extends qv{constructor(e,t){super(e),this.Name=t,this.type=1838606355}};e.IfcMaterialClassificationRelationship=class extends qv{constructor(e,t,s){super(e),this.MaterialClassifications=t,this.ClassifiedMaterial=s,this.type=1847130766}};e.IfcMaterialLayer=class extends qv{constructor(e,t,s,i){super(e),this.Material=t,this.LayerThickness=s,this.IsVentilated=i,this.type=248100487}};e.IfcMaterialLayerSet=class extends qv{constructor(e,t,s){super(e),this.MaterialLayers=t,this.LayerSetName=s,this.type=3303938423}};e.IfcMaterialLayerSetUsage=class extends qv{constructor(e,t,s,i,r){super(e),this.ForLayerSet=t,this.LayerSetDirection=s,this.DirectionSense=i,this.OffsetFromReferenceLine=r,this.type=1303795690}};e.IfcMaterialList=class extends qv{constructor(e,t){super(e),this.Materials=t,this.type=2199411900}};class ds extends qv{constructor(e,t){super(e),this.Material=t,this.type=3265635763}}e.IfcMaterialProperties=ds;e.IfcMeasureWithUnit=class extends qv{constructor(e,t,s){super(e),this.ValueComponent=t,this.UnitComponent=s,this.type=2597039031}};class fs extends ds{constructor(e,t,s,i,r,o,n){super(e,t),this.Material=t,this.DynamicViscosity=s,this.YoungModulus=i,this.ShearModulus=r,this.PoissonRatio=o,this.ThermalExpansionCoefficient=n,this.type=4256014907}}e.IfcMechanicalMaterialProperties=fs;e.IfcMechanicalSteelMaterialProperties=class extends fs{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p){super(e,t,s,i,r,o,n),this.Material=t,this.DynamicViscosity=s,this.YoungModulus=i,this.ShearModulus=r,this.PoissonRatio=o,this.ThermalExpansionCoefficient=n,this.YieldStress=a,this.UltimateStress=l,this.UltimateStrain=h,this.HardeningModule=c,this.ProportionalStress=u,this.PlasticStrain=A,this.Relaxations=p,this.type=677618848}};e.IfcMetric=class extends us{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a),this.Name=t,this.Description=s,this.ConstraintGrade=i,this.ConstraintSource=r,this.CreatingActor=o,this.CreationTime=n,this.UserDefinedGrade=a,this.Benchmark=l,this.ValueSource=h,this.DataValue=c,this.type=3368373690}};e.IfcMonetaryUnit=class extends qv{constructor(e,t){super(e),this.Currency=t,this.type=2706619895}};class ms extends qv{constructor(e,t,s){super(e),this.Dimensions=t,this.UnitType=s,this.type=1918398963}}e.IfcNamedUnit=ms;class gs extends qv{constructor(e){super(e),this.type=3701648758}}e.IfcObjectPlacement=gs;e.IfcObjective=class extends us{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a),this.Name=t,this.Description=s,this.ConstraintGrade=i,this.ConstraintSource=r,this.CreatingActor=o,this.CreationTime=n,this.UserDefinedGrade=a,this.BenchmarkValues=l,this.ResultValues=h,this.ObjectiveQualifier=c,this.UserDefinedQualifier=u,this.type=2251480897}};e.IfcOpticalMaterialProperties=class extends ds{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t),this.Material=t,this.VisibleTransmittance=s,this.SolarTransmittance=i,this.ThermalIrTransmittance=r,this.ThermalIrEmissivityBack=o,this.ThermalIrEmissivityFront=n,this.VisibleReflectanceBack=a,this.VisibleReflectanceFront=l,this.SolarReflectanceFront=h,this.SolarReflectanceBack=c,this.type=1227763645}};e.IfcOrganization=class extends qv{constructor(e,t,s,i,r,o){super(e),this.Id=t,this.Name=s,this.Description=i,this.Roles=r,this.Addresses=o,this.type=4251960020}};e.IfcOrganizationRelationship=class extends qv{constructor(e,t,s,i,r){super(e),this.Name=t,this.Description=s,this.RelatingOrganization=i,this.RelatedOrganizations=r,this.type=1411181986}};e.IfcOwnerHistory=class extends qv{constructor(e,t,s,i,r,o,n,a,l){super(e),this.OwningUser=t,this.OwningApplication=s,this.State=i,this.ChangeAction=r,this.LastModifiedDate=o,this.LastModifyingUser=n,this.LastModifyingApplication=a,this.CreationDate=l,this.type=1207048766}};e.IfcPerson=class extends qv{constructor(e,t,s,i,r,o,n,a,l){super(e),this.Id=t,this.FamilyName=s,this.GivenName=i,this.MiddleNames=r,this.PrefixTitles=o,this.SuffixTitles=n,this.Roles=a,this.Addresses=l,this.type=2077209135}};e.IfcPersonAndOrganization=class extends qv{constructor(e,t,s,i){super(e),this.ThePerson=t,this.TheOrganization=s,this.Roles=i,this.type=101040310}};class ys extends qv{constructor(e,t,s){super(e),this.Name=t,this.Description=s,this.type=2483315170}}e.IfcPhysicalQuantity=ys;class Es extends ys{constructor(e,t,s,i){super(e,t,s),this.Name=t,this.Description=s,this.Unit=i,this.type=2226359599}}e.IfcPhysicalSimpleQuantity=Es;e.IfcPostalAddress=class extends rs{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i),this.Purpose=t,this.Description=s,this.UserDefinedPurpose=i,this.InternalLocation=r,this.AddressLines=o,this.PostalBox=n,this.Town=a,this.Region=l,this.PostalCode=h,this.Country=c,this.type=3355820592}};class vs extends qv{constructor(e,t){super(e),this.Name=t,this.type=3727388367}}e.IfcPreDefinedItem=vs;class _s extends vs{constructor(e,t){super(e,t),this.Name=t,this.type=990879717}}e.IfcPreDefinedSymbol=_s;e.IfcPreDefinedTerminatorSymbol=class extends _s{constructor(e,t){super(e,t),this.Name=t,this.type=3213052703}};class Is extends vs{constructor(e,t){super(e,t),this.Name=t,this.type=1775413392}}e.IfcPreDefinedTextFont=Is;class Ts extends qv{constructor(e,t,s,i,r){super(e),this.Name=t,this.Description=s,this.AssignedItems=i,this.Identifier=r,this.type=2022622350}}e.IfcPresentationLayerAssignment=Ts;e.IfcPresentationLayerWithStyle=class extends Ts{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r),this.Name=t,this.Description=s,this.AssignedItems=i,this.Identifier=r,this.LayerOn=o,this.LayerFrozen=n,this.LayerBlocked=a,this.LayerStyles=l,this.type=1304840413}};class Ps extends qv{constructor(e,t){super(e),this.Name=t,this.type=3119450353}}e.IfcPresentationStyle=Ps;e.IfcPresentationStyleAssignment=class extends qv{constructor(e,t){super(e),this.Styles=t,this.type=2417041796}};class Ds extends qv{constructor(e,t,s,i){super(e),this.Name=t,this.Description=s,this.Representations=i,this.type=2095639259}}e.IfcProductRepresentation=Ds;e.IfcProductsOfCombustionProperties=class extends ds{constructor(e,t,s,i,r,o){super(e,t),this.Material=t,this.SpecificHeatCapacity=s,this.N20Content=i,this.COContent=r,this.CO2Content=o,this.type=2267347899}};class bs extends qv{constructor(e,t,s){super(e),this.ProfileType=t,this.ProfileName=s,this.type=3958567839}}e.IfcProfileDef=bs;class Rs extends qv{constructor(e,t,s){super(e),this.ProfileName=t,this.ProfileDefinition=s,this.type=2802850158}}e.IfcProfileProperties=Rs;class Cs extends qv{constructor(e,t,s){super(e),this.Name=t,this.Description=s,this.type=2598011224}}e.IfcProperty=Cs;e.IfcPropertyConstraintRelationship=class extends qv{constructor(e,t,s,i,r){super(e),this.RelatingConstraint=t,this.RelatedProperties=s,this.Name=i,this.Description=r,this.type=3896028662}};e.IfcPropertyDependencyRelationship=class extends qv{constructor(e,t,s,i,r,o){super(e),this.DependingProperty=t,this.DependantProperty=s,this.Name=i,this.Description=r,this.Expression=o,this.type=148025276}};e.IfcPropertyEnumeration=class extends qv{constructor(e,t,s,i){super(e),this.Name=t,this.EnumerationValues=s,this.Unit=i,this.type=3710013099}};e.IfcQuantityArea=class extends Es{constructor(e,t,s,i,r){super(e,t,s,i),this.Name=t,this.Description=s,this.Unit=i,this.AreaValue=r,this.type=2044713172}};e.IfcQuantityCount=class extends Es{constructor(e,t,s,i,r){super(e,t,s,i),this.Name=t,this.Description=s,this.Unit=i,this.CountValue=r,this.type=2093928680}};e.IfcQuantityLength=class extends Es{constructor(e,t,s,i,r){super(e,t,s,i),this.Name=t,this.Description=s,this.Unit=i,this.LengthValue=r,this.type=931644368}};e.IfcQuantityTime=class extends Es{constructor(e,t,s,i,r){super(e,t,s,i),this.Name=t,this.Description=s,this.Unit=i,this.TimeValue=r,this.type=3252649465}};e.IfcQuantityVolume=class extends Es{constructor(e,t,s,i,r){super(e,t,s,i),this.Name=t,this.Description=s,this.Unit=i,this.VolumeValue=r,this.type=2405470396}};e.IfcQuantityWeight=class extends Es{constructor(e,t,s,i,r){super(e,t,s,i),this.Name=t,this.Description=s,this.Unit=i,this.WeightValue=r,this.type=825690147}};e.IfcReferencesValueDocument=class extends qv{constructor(e,t,s,i,r){super(e),this.ReferencedDocument=t,this.ReferencingValues=s,this.Name=i,this.Description=r,this.type=2692823254}};e.IfcReinforcementBarProperties=class extends qv{constructor(e,t,s,i,r,o,n){super(e),this.TotalCrossSectionArea=t,this.SteelGrade=s,this.BarSurface=i,this.EffectiveDepth=r,this.NominalBarDiameter=o,this.BarCount=n,this.type=1580146022}};e.IfcRelaxation=class extends qv{constructor(e,t,s){super(e),this.RelaxationValue=t,this.InitialStress=s,this.type=1222501353}};class xs extends qv{constructor(e,t,s,i,r){super(e),this.ContextOfItems=t,this.RepresentationIdentifier=s,this.RepresentationType=i,this.Items=r,this.type=1076942058}}e.IfcRepresentation=xs;class Ns extends qv{constructor(e,t,s){super(e),this.ContextIdentifier=t,this.ContextType=s,this.type=3377609919}}e.IfcRepresentationContext=Ns;class Os extends qv{constructor(e){super(e),this.type=3008791417}}e.IfcRepresentationItem=Os;e.IfcRepresentationMap=class extends qv{constructor(e,t,s){super(e),this.MappingOrigin=t,this.MappedRepresentation=s,this.type=1660063152}};e.IfcRibPlateProfileProperties=class extends Rs{constructor(e,t,s,i,r,o,n,a){super(e,t,s),this.ProfileName=t,this.ProfileDefinition=s,this.Thickness=i,this.RibHeight=r,this.RibWidth=o,this.RibSpacing=n,this.Direction=a,this.type=3679540991}};class Ss extends qv{constructor(e,t,s,i,r){super(e),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.type=2341007311}}e.IfcRoot=Ss;e.IfcSIUnit=class extends ms{constructor(e,t,s,i){super(e,new Zv(0),t),this.UnitType=t,this.Prefix=s,this.Name=i,this.type=448429030}};e.IfcSectionProperties=class extends qv{constructor(e,t,s,i){super(e),this.SectionType=t,this.StartProfile=s,this.EndProfile=i,this.type=2042790032}};e.IfcSectionReinforcementProperties=class extends qv{constructor(e,t,s,i,r,o,n){super(e),this.LongitudinalStartPosition=t,this.LongitudinalEndPosition=s,this.TransversePosition=i,this.ReinforcementRole=r,this.SectionDefinition=o,this.CrossSectionReinforcementDefinitions=n,this.type=4165799628}};e.IfcShapeAspect=class extends qv{constructor(e,t,s,i,r,o){super(e),this.ShapeRepresentations=t,this.Name=s,this.Description=i,this.ProductDefinitional=r,this.PartOfProductDefinitionShape=o,this.type=867548509}};class ws extends xs{constructor(e,t,s,i,r){super(e,t,s,i,r),this.ContextOfItems=t,this.RepresentationIdentifier=s,this.RepresentationType=i,this.Items=r,this.type=3982875396}}e.IfcShapeModel=ws;e.IfcShapeRepresentation=class extends ws{constructor(e,t,s,i,r){super(e,t,s,i,r),this.ContextOfItems=t,this.RepresentationIdentifier=s,this.RepresentationType=i,this.Items=r,this.type=4240577450}};class Ms extends Cs{constructor(e,t,s){super(e,t,s),this.Name=t,this.Description=s,this.type=3692461612}}e.IfcSimpleProperty=Ms;class Bs extends qv{constructor(e,t){super(e),this.Name=t,this.type=2273995522}}e.IfcStructuralConnectionCondition=Bs;class Fs extends qv{constructor(e,t){super(e),this.Name=t,this.type=2162789131}}e.IfcStructuralLoad=Fs;class Ls extends Fs{constructor(e,t){super(e,t),this.Name=t,this.type=2525727697}}e.IfcStructuralLoadStatic=Ls;e.IfcStructuralLoadTemperature=class extends Ls{constructor(e,t,s,i,r){super(e,t),this.Name=t,this.DeltaT_Constant=s,this.DeltaT_Y=i,this.DeltaT_Z=r,this.type=3408363356}};class Us extends xs{constructor(e,t,s,i,r){super(e,t,s,i,r),this.ContextOfItems=t,this.RepresentationIdentifier=s,this.RepresentationType=i,this.Items=r,this.type=2830218821}}e.IfcStyleModel=Us;class Hs extends Os{constructor(e,t,s,i){super(e),this.Item=t,this.Styles=s,this.Name=i,this.type=3958052878}}e.IfcStyledItem=Hs;e.IfcStyledRepresentation=class extends Us{constructor(e,t,s,i,r){super(e,t,s,i,r),this.ContextOfItems=t,this.RepresentationIdentifier=s,this.RepresentationType=i,this.Items=r,this.type=3049322572}};e.IfcSurfaceStyle=class extends Ps{constructor(e,t,s,i){super(e,t),this.Name=t,this.Side=s,this.Styles=i,this.type=1300840506}};e.IfcSurfaceStyleLighting=class extends qv{constructor(e,t,s,i,r){super(e),this.DiffuseTransmissionColour=t,this.DiffuseReflectionColour=s,this.TransmissionColour=i,this.ReflectanceColour=r,this.type=3303107099}};e.IfcSurfaceStyleRefraction=class extends qv{constructor(e,t,s){super(e),this.RefractionIndex=t,this.DispersionFactor=s,this.type=1607154358}};class Gs extends qv{constructor(e,t){super(e),this.SurfaceColour=t,this.type=846575682}}e.IfcSurfaceStyleShading=Gs;e.IfcSurfaceStyleWithTextures=class extends qv{constructor(e,t){super(e),this.Textures=t,this.type=1351298697}};class Vs extends qv{constructor(e,t,s,i,r){super(e),this.RepeatS=t,this.RepeatT=s,this.TextureType=i,this.TextureTransform=r,this.type=626085974}}e.IfcSurfaceTexture=Vs;e.IfcSymbolStyle=class extends Ps{constructor(e,t,s){super(e,t),this.Name=t,this.StyleOfSymbol=s,this.type=1290481447}};e.IfcTable=class extends qv{constructor(e,t,s){super(e),this.Name=t,this.Rows=s,this.type=985171141}};e.IfcTableRow=class extends qv{constructor(e,t,s){super(e),this.RowCells=t,this.IsHeading=s,this.type=531007025}};e.IfcTelecomAddress=class extends rs{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i),this.Purpose=t,this.Description=s,this.UserDefinedPurpose=i,this.TelephoneNumbers=r,this.FacsimileNumbers=o,this.PagerNumber=n,this.ElectronicMailAddresses=a,this.WWWHomePageURL=l,this.type=912023232}};e.IfcTextStyle=class extends Ps{constructor(e,t,s,i,r){super(e,t),this.Name=t,this.TextCharacterAppearance=s,this.TextStyle=i,this.TextFontStyle=r,this.type=1447204868}};e.IfcTextStyleFontModel=class extends Is{constructor(e,t,s,i,r,o,n){super(e,t),this.Name=t,this.FontFamily=s,this.FontStyle=i,this.FontVariant=r,this.FontWeight=o,this.FontSize=n,this.type=1983826977}};e.IfcTextStyleForDefinedFont=class extends qv{constructor(e,t,s){super(e),this.Colour=t,this.BackgroundColour=s,this.type=2636378356}};e.IfcTextStyleTextModel=class extends qv{constructor(e,t,s,i,r,o,n,a){super(e),this.TextIndent=t,this.TextAlign=s,this.TextDecoration=i,this.LetterSpacing=r,this.WordSpacing=o,this.TextTransform=n,this.LineHeight=a,this.type=1640371178}};e.IfcTextStyleWithBoxCharacteristics=class extends qv{constructor(e,t,s,i,r,o){super(e),this.BoxHeight=t,this.BoxWidth=s,this.BoxSlantAngle=i,this.BoxRotateAngle=r,this.CharacterSpacing=o,this.type=1484833681}};class ks extends qv{constructor(e){super(e),this.type=280115917}}e.IfcTextureCoordinate=ks;e.IfcTextureCoordinateGenerator=class extends ks{constructor(e,t,s){super(e),this.Mode=t,this.Parameter=s,this.type=1742049831}};e.IfcTextureMap=class extends ks{constructor(e,t){super(e),this.TextureMaps=t,this.type=2552916305}};e.IfcTextureVertex=class extends qv{constructor(e,t){super(e),this.Coordinates=t,this.type=1210645708}};e.IfcThermalMaterialProperties=class extends ds{constructor(e,t,s,i,r,o){super(e,t),this.Material=t,this.SpecificHeatCapacity=s,this.BoilingPoint=i,this.FreezingPoint=r,this.ThermalConductivity=o,this.type=3317419933}};class js extends qv{constructor(e,t,s,i,r,o,n,a,l){super(e),this.Name=t,this.Description=s,this.StartTime=i,this.EndTime=r,this.TimeSeriesDataType=o,this.DataOrigin=n,this.UserDefinedDataOrigin=a,this.Unit=l,this.type=3101149627}}e.IfcTimeSeries=js;e.IfcTimeSeriesReferenceRelationship=class extends qv{constructor(e,t,s){super(e),this.ReferencedTimeSeries=t,this.TimeSeriesReferences=s,this.type=1718945513}};e.IfcTimeSeriesValue=class extends qv{constructor(e,t){super(e),this.ListValues=t,this.type=581633288}};class Qs extends Os{constructor(e){super(e),this.type=1377556343}}e.IfcTopologicalRepresentationItem=Qs;e.IfcTopologyRepresentation=class extends ws{constructor(e,t,s,i,r){super(e,t,s,i,r),this.ContextOfItems=t,this.RepresentationIdentifier=s,this.RepresentationType=i,this.Items=r,this.type=1735638870}};e.IfcUnitAssignment=class extends qv{constructor(e,t){super(e),this.Units=t,this.type=180925521}};class Ws extends Qs{constructor(e){super(e),this.type=2799835756}}e.IfcVertex=Ws;e.IfcVertexBasedTextureMap=class extends qv{constructor(e,t,s){super(e),this.TextureVertices=t,this.TexturePoints=s,this.type=3304826586}};e.IfcVertexPoint=class extends Ws{constructor(e,t){super(e),this.VertexGeometry=t,this.type=1907098498}};e.IfcVirtualGridIntersection=class extends qv{constructor(e,t,s){super(e),this.IntersectingAxes=t,this.OffsetDistances=s,this.type=891718957}};e.IfcWaterProperties=class extends ds{constructor(e,t,s,i,r,o,n,a,l){super(e,t),this.Material=t,this.IsPotable=s,this.Hardness=i,this.AlkalinityConcentration=r,this.AcidityConcentration=o,this.ImpuritiesContent=n,this.PHLevel=a,this.DissolvedSolidsContent=l,this.type=1065908215}};class zs extends Hs{constructor(e,t,s,i){super(e,t,s,i),this.Item=t,this.Styles=s,this.Name=i,this.type=2442683028}}e.IfcAnnotationOccurrence=zs;e.IfcAnnotationSurfaceOccurrence=class extends zs{constructor(e,t,s,i){super(e,t,s,i),this.Item=t,this.Styles=s,this.Name=i,this.type=962685235}};class Ks extends zs{constructor(e,t,s,i){super(e,t,s,i),this.Item=t,this.Styles=s,this.Name=i,this.type=3612888222}}e.IfcAnnotationSymbolOccurrence=Ks;e.IfcAnnotationTextOccurrence=class extends zs{constructor(e,t,s,i){super(e,t,s,i),this.Item=t,this.Styles=s,this.Name=i,this.type=2297822566}};class Ys extends bs{constructor(e,t,s,i){super(e,t,s),this.ProfileType=t,this.ProfileName=s,this.OuterCurve=i,this.type=3798115385}}e.IfcArbitraryClosedProfileDef=Ys;class Xs extends bs{constructor(e,t,s,i){super(e,t,s),this.ProfileType=t,this.ProfileName=s,this.Curve=i,this.type=1310608509}}e.IfcArbitraryOpenProfileDef=Xs;e.IfcArbitraryProfileDefWithVoids=class extends Ys{constructor(e,t,s,i,r){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.OuterCurve=i,this.InnerCurves=r,this.type=2705031697}};e.IfcBlobTexture=class extends Vs{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.RepeatS=t,this.RepeatT=s,this.TextureType=i,this.TextureTransform=r,this.RasterFormat=o,this.RasterCode=n,this.type=616511568}};e.IfcCenterLineProfileDef=class extends Xs{constructor(e,t,s,i,r){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Curve=i,this.Thickness=r,this.type=3150382593}};e.IfcClassificationReference=class extends ps{constructor(e,t,s,i,r){super(e,t,s,i),this.Location=t,this.ItemReference=s,this.Name=i,this.ReferencedSource=r,this.type=647927063}};e.IfcColourRgb=class extends ls{constructor(e,t,s,i,r){super(e,t),this.Name=t,this.Red=s,this.Green=i,this.Blue=r,this.type=776857604}};e.IfcComplexProperty=class extends Cs{constructor(e,t,s,i,r){super(e,t,s),this.Name=t,this.Description=s,this.UsageName=i,this.HasProperties=r,this.type=2542286263}};e.IfcCompositeProfileDef=class extends bs{constructor(e,t,s,i,r){super(e,t,s),this.ProfileType=t,this.ProfileName=s,this.Profiles=i,this.Label=r,this.type=1485152156}};class Zs extends Qs{constructor(e,t){super(e),this.CfsFaces=t,this.type=370225590}}e.IfcConnectedFaceSet=Zs;e.IfcConnectionCurveGeometry=class extends hs{constructor(e,t,s){super(e),this.CurveOnRelatingElement=t,this.CurveOnRelatedElement=s,this.type=1981873012}};e.IfcConnectionPointEccentricity=class extends cs{constructor(e,t,s,i,r,o){super(e,t,s),this.PointOnRelatingElement=t,this.PointOnRelatedElement=s,this.EccentricityInX=i,this.EccentricityInY=r,this.EccentricityInZ=o,this.type=45288368}};e.IfcContextDependentUnit=class extends ms{constructor(e,t,s,i){super(e,t,s),this.Dimensions=t,this.UnitType=s,this.Name=i,this.type=3050246964}};e.IfcConversionBasedUnit=class extends ms{constructor(e,t,s,i,r){super(e,t,s),this.Dimensions=t,this.UnitType=s,this.Name=i,this.ConversionFactor=r,this.type=2889183280}};e.IfcCurveStyle=class extends Ps{constructor(e,t,s,i,r){super(e,t),this.Name=t,this.CurveFont=s,this.CurveWidth=i,this.CurveColour=r,this.type=3800577675}};e.IfcDerivedProfileDef=class extends bs{constructor(e,t,s,i,r,o){super(e,t,s),this.ProfileType=t,this.ProfileName=s,this.ParentProfile=i,this.Operator=r,this.Label=o,this.type=3632507154}};e.IfcDimensionCalloutRelationship=class extends As{constructor(e,t,s,i,r){super(e,t,s,i,r),this.Name=t,this.Description=s,this.RelatingDraughtingCallout=i,this.RelatedDraughtingCallout=r,this.type=2273265877}};e.IfcDimensionPair=class extends As{constructor(e,t,s,i,r){super(e,t,s,i,r),this.Name=t,this.Description=s,this.RelatingDraughtingCallout=i,this.RelatedDraughtingCallout=r,this.type=1694125774}};e.IfcDocumentReference=class extends ps{constructor(e,t,s,i){super(e,t,s,i),this.Location=t,this.ItemReference=s,this.Name=i,this.type=3732053477}};e.IfcDraughtingPreDefinedTextFont=class extends Is{constructor(e,t){super(e,t),this.Name=t,this.type=4170525392}};class qs extends Qs{constructor(e,t,s){super(e),this.EdgeStart=t,this.EdgeEnd=s,this.type=3900360178}}e.IfcEdge=qs;e.IfcEdgeCurve=class extends qs{constructor(e,t,s,i,r){super(e,t,s),this.EdgeStart=t,this.EdgeEnd=s,this.EdgeGeometry=i,this.SameSense=r,this.type=476780140}};e.IfcExtendedMaterialProperties=class extends ds{constructor(e,t,s,i,r){super(e,t),this.Material=t,this.ExtendedProperties=s,this.Description=i,this.Name=r,this.type=1860660968}};class Js extends Qs{constructor(e,t){super(e),this.Bounds=t,this.type=2556980723}}e.IfcFace=Js;class $s extends Qs{constructor(e,t,s){super(e),this.Bound=t,this.Orientation=s,this.type=1809719519}}e.IfcFaceBound=$s;e.IfcFaceOuterBound=class extends $s{constructor(e,t,s){super(e,t,s),this.Bound=t,this.Orientation=s,this.type=803316827}};e.IfcFaceSurface=class extends Js{constructor(e,t,s,i){super(e,t),this.Bounds=t,this.FaceSurface=s,this.SameSense=i,this.type=3008276851}};e.IfcFailureConnectionCondition=class extends Bs{constructor(e,t,s,i,r,o,n,a){super(e,t),this.Name=t,this.TensionFailureX=s,this.TensionFailureY=i,this.TensionFailureZ=r,this.CompressionFailureX=o,this.CompressionFailureY=n,this.CompressionFailureZ=a,this.type=4219587988}};e.IfcFillAreaStyle=class extends Ps{constructor(e,t,s){super(e,t),this.Name=t,this.FillStyles=s,this.type=738692330}};e.IfcFuelProperties=class extends ds{constructor(e,t,s,i,r,o){super(e,t),this.Material=t,this.CombustionTemperature=s,this.CarbonContent=i,this.LowerHeatingValue=r,this.HigherHeatingValue=o,this.type=3857492461}};e.IfcGeneralMaterialProperties=class extends ds{constructor(e,t,s,i,r){super(e,t),this.Material=t,this.MolecularWeight=s,this.Porosity=i,this.MassDensity=r,this.type=803998398}};class ei extends Rs{constructor(e,t,s,i,r,o,n,a){super(e,t,s),this.ProfileName=t,this.ProfileDefinition=s,this.PhysicalWeight=i,this.Perimeter=r,this.MinimumPlateThickness=o,this.MaximumPlateThickness=n,this.CrossSectionArea=a,this.type=1446786286}}e.IfcGeneralProfileProperties=ei;class ti extends Ns{constructor(e,t,s,i,r,o,n){super(e,t,s),this.ContextIdentifier=t,this.ContextType=s,this.CoordinateSpaceDimension=i,this.Precision=r,this.WorldCoordinateSystem=o,this.TrueNorth=n,this.type=3448662350}}e.IfcGeometricRepresentationContext=ti;class si extends Os{constructor(e){super(e),this.type=2453401579}}e.IfcGeometricRepresentationItem=si;e.IfcGeometricRepresentationSubContext=class extends ti{constructor(e,s,i,r,o,n,a){super(e,s,i,new t(0),null,new Zv(0),null),this.ContextIdentifier=s,this.ContextType=i,this.ParentContext=r,this.TargetScale=o,this.TargetView=n,this.UserDefinedTargetView=a,this.type=4142052618}};class ii extends si{constructor(e,t){super(e),this.Elements=t,this.type=3590301190}}e.IfcGeometricSet=ii;e.IfcGridPlacement=class extends gs{constructor(e,t,s){super(e),this.PlacementLocation=t,this.PlacementRefDirection=s,this.type=178086475}};class ri extends si{constructor(e,t,s){super(e),this.BaseSurface=t,this.AgreementFlag=s,this.type=812098782}}e.IfcHalfSpaceSolid=ri;e.IfcHygroscopicMaterialProperties=class extends ds{constructor(e,t,s,i,r,o,n){super(e,t),this.Material=t,this.UpperVaporResistanceFactor=s,this.LowerVaporResistanceFactor=i,this.IsothermalMoistureCapacity=r,this.VaporPermeability=o,this.MoistureDiffusivity=n,this.type=2445078500}};e.IfcImageTexture=class extends Vs{constructor(e,t,s,i,r,o){super(e,t,s,i,r),this.RepeatS=t,this.RepeatT=s,this.TextureType=i,this.TextureTransform=r,this.UrlReference=o,this.type=3905492369}};e.IfcIrregularTimeSeries=class extends js{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.Name=t,this.Description=s,this.StartTime=i,this.EndTime=r,this.TimeSeriesDataType=o,this.DataOrigin=n,this.UserDefinedDataOrigin=a,this.Unit=l,this.Values=h,this.type=3741457305}};class oi extends si{constructor(e,t,s,i,r){super(e),this.Name=t,this.LightColour=s,this.AmbientIntensity=i,this.Intensity=r,this.type=1402838566}}e.IfcLightSource=oi;e.IfcLightSourceAmbient=class extends oi{constructor(e,t,s,i,r){super(e,t,s,i,r),this.Name=t,this.LightColour=s,this.AmbientIntensity=i,this.Intensity=r,this.type=125510826}};e.IfcLightSourceDirectional=class extends oi{constructor(e,t,s,i,r,o){super(e,t,s,i,r),this.Name=t,this.LightColour=s,this.AmbientIntensity=i,this.Intensity=r,this.Orientation=o,this.type=2604431987}};e.IfcLightSourceGoniometric=class extends oi{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r),this.Name=t,this.LightColour=s,this.AmbientIntensity=i,this.Intensity=r,this.Position=o,this.ColourAppearance=n,this.ColourTemperature=a,this.LuminousFlux=l,this.LightEmissionSource=h,this.LightDistributionDataSource=c,this.type=4266656042}};class ni extends oi{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r),this.Name=t,this.LightColour=s,this.AmbientIntensity=i,this.Intensity=r,this.Position=o,this.Radius=n,this.ConstantAttenuation=a,this.DistanceAttenuation=l,this.QuadricAttenuation=h,this.type=1520743889}}e.IfcLightSourcePositional=ni;e.IfcLightSourceSpot=class extends ni{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p){super(e,t,s,i,r,o,n,a,l,h),this.Name=t,this.LightColour=s,this.AmbientIntensity=i,this.Intensity=r,this.Position=o,this.Radius=n,this.ConstantAttenuation=a,this.DistanceAttenuation=l,this.QuadricAttenuation=h,this.Orientation=c,this.ConcentrationExponent=u,this.SpreadAngle=A,this.BeamWidthAngle=p,this.type=3422422726}};e.IfcLocalPlacement=class extends gs{constructor(e,t,s){super(e),this.PlacementRelTo=t,this.RelativePlacement=s,this.type=2624227202}};class ai extends Qs{constructor(e){super(e),this.type=1008929658}}e.IfcLoop=ai;e.IfcMappedItem=class extends Os{constructor(e,t,s){super(e),this.MappingSource=t,this.MappingTarget=s,this.type=2347385850}};e.IfcMaterialDefinitionRepresentation=class extends Ds{constructor(e,t,s,i,r){super(e,t,s,i),this.Name=t,this.Description=s,this.Representations=i,this.RepresentedMaterial=r,this.type=2022407955}};e.IfcMechanicalConcreteMaterialProperties=class extends fs{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n),this.Material=t,this.DynamicViscosity=s,this.YoungModulus=i,this.ShearModulus=r,this.PoissonRatio=o,this.ThermalExpansionCoefficient=n,this.CompressiveStrength=a,this.MaxAggregateSize=l,this.AdmixturesDescription=h,this.Workability=c,this.ProtectivePoreRatio=u,this.WaterImpermeability=A,this.type=1430189142}};class li extends Ss{constructor(e,t,s,i,r){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.type=219451334}}e.IfcObjectDefinition=li;class hi extends si{constructor(e,t){super(e),this.RepeatFactor=t,this.type=2833995503}}e.IfcOneDirectionRepeatFactor=hi;e.IfcOpenShell=class extends Zs{constructor(e,t){super(e,t),this.CfsFaces=t,this.type=2665983363}};e.IfcOrientedEdge=class extends qs{constructor(e,t,s){super(e,new Zv(0),new Zv(0)),this.EdgeElement=t,this.Orientation=s,this.type=1029017970}};class ci extends bs{constructor(e,t,s,i){super(e,t,s),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.type=2529465313}}e.IfcParameterizedProfileDef=ci;e.IfcPath=class extends Qs{constructor(e,t){super(e),this.EdgeList=t,this.type=2519244187}};e.IfcPhysicalComplexQuantity=class extends ys{constructor(e,t,s,i,r,o,n){super(e,t,s),this.Name=t,this.Description=s,this.HasQuantities=i,this.Discrimination=r,this.Quality=o,this.Usage=n,this.type=3021840470}};e.IfcPixelTexture=class extends Vs{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r),this.RepeatS=t,this.RepeatT=s,this.TextureType=i,this.TextureTransform=r,this.Width=o,this.Height=n,this.ColourComponents=a,this.Pixel=l,this.type=597895409}};class ui extends si{constructor(e,t){super(e),this.Location=t,this.type=2004835150}}e.IfcPlacement=ui;class Ai extends si{constructor(e,t,s){super(e),this.SizeInX=t,this.SizeInY=s,this.type=1663979128}}e.IfcPlanarExtent=Ai;class pi extends si{constructor(e){super(e),this.type=2067069095}}e.IfcPoint=pi;e.IfcPointOnCurve=class extends pi{constructor(e,t,s){super(e),this.BasisCurve=t,this.PointParameter=s,this.type=4022376103}};e.IfcPointOnSurface=class extends pi{constructor(e,t,s,i){super(e),this.BasisSurface=t,this.PointParameterU=s,this.PointParameterV=i,this.type=1423911732}};e.IfcPolyLoop=class extends ai{constructor(e,t){super(e),this.Polygon=t,this.type=2924175390}};e.IfcPolygonalBoundedHalfSpace=class extends ri{constructor(e,t,s,i,r){super(e,t,s),this.BaseSurface=t,this.AgreementFlag=s,this.Position=i,this.PolygonalBoundary=r,this.type=2775532180}};class di extends vs{constructor(e,t){super(e,t),this.Name=t,this.type=759155922}}e.IfcPreDefinedColour=di;class fi extends vs{constructor(e,t){super(e,t),this.Name=t,this.type=2559016684}}e.IfcPreDefinedCurveFont=fi;e.IfcPreDefinedDimensionSymbol=class extends _s{constructor(e,t){super(e,t),this.Name=t,this.type=433424934}};e.IfcPreDefinedPointMarkerSymbol=class extends _s{constructor(e,t){super(e,t),this.Name=t,this.type=179317114}};e.IfcProductDefinitionShape=class extends Ds{constructor(e,t,s,i){super(e,t,s,i),this.Name=t,this.Description=s,this.Representations=i,this.type=673634403}};e.IfcPropertyBoundedValue=class extends Ms{constructor(e,t,s,i,r,o){super(e,t,s),this.Name=t,this.Description=s,this.UpperBoundValue=i,this.LowerBoundValue=r,this.Unit=o,this.type=871118103}};class mi extends Ss{constructor(e,t,s,i,r){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.type=1680319473}}e.IfcPropertyDefinition=mi;e.IfcPropertyEnumeratedValue=class extends Ms{constructor(e,t,s,i,r){super(e,t,s),this.Name=t,this.Description=s,this.EnumerationValues=i,this.EnumerationReference=r,this.type=4166981789}};e.IfcPropertyListValue=class extends Ms{constructor(e,t,s,i,r){super(e,t,s),this.Name=t,this.Description=s,this.ListValues=i,this.Unit=r,this.type=2752243245}};e.IfcPropertyReferenceValue=class extends Ms{constructor(e,t,s,i,r){super(e,t,s),this.Name=t,this.Description=s,this.UsageName=i,this.PropertyReference=r,this.type=941946838}};class gi extends mi{constructor(e,t,s,i,r){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.type=3357820518}}e.IfcPropertySetDefinition=gi;e.IfcPropertySingleValue=class extends Ms{constructor(e,t,s,i,r){super(e,t,s),this.Name=t,this.Description=s,this.NominalValue=i,this.Unit=r,this.type=3650150729}};e.IfcPropertyTableValue=class extends Ms{constructor(e,t,s,i,r,o,n,a){super(e,t,s),this.Name=t,this.Description=s,this.DefiningValues=i,this.DefinedValues=r,this.Expression=o,this.DefiningUnit=n,this.DefinedUnit=a,this.type=110355661}};class yi extends ci{constructor(e,t,s,i,r,o){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.XDim=r,this.YDim=o,this.type=3615266464}}e.IfcRectangleProfileDef=yi;e.IfcRegularTimeSeries=class extends js{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l),this.Name=t,this.Description=s,this.StartTime=i,this.EndTime=r,this.TimeSeriesDataType=o,this.DataOrigin=n,this.UserDefinedDataOrigin=a,this.Unit=l,this.TimeStep=h,this.Values=c,this.type=3413951693}};e.IfcReinforcementDefinitionProperties=class extends gi{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.DefinitionType=o,this.ReinforcementSectionDefinitions=n,this.type=3765753017}};class Ei extends Ss{constructor(e,t,s,i,r){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.type=478536968}}e.IfcRelationship=Ei;e.IfcRoundedRectangleProfileDef=class extends yi{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.XDim=r,this.YDim=o,this.RoundingRadius=n,this.type=2778083089}};e.IfcSectionedSpine=class extends si{constructor(e,t,s,i){super(e),this.SpineCurve=t,this.CrossSections=s,this.CrossSectionPositions=i,this.type=1509187699}};e.IfcServiceLifeFactor=class extends gi{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.PredefinedType=o,this.UpperValue=n,this.MostUsedValue=a,this.LowerValue=l,this.type=2411513650}};e.IfcShellBasedSurfaceModel=class extends si{constructor(e,t){super(e),this.SbsmBoundary=t,this.type=4124623270}};e.IfcSlippageConnectionCondition=class extends Bs{constructor(e,t,s,i,r){super(e,t),this.Name=t,this.SlippageX=s,this.SlippageY=i,this.SlippageZ=r,this.type=2609359061}};class vi extends si{constructor(e){super(e),this.type=723233188}}e.IfcSolidModel=vi;e.IfcSoundProperties=class extends gi{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.IsAttenuating=o,this.SoundScale=n,this.SoundValues=a,this.type=2485662743}};e.IfcSoundValue=class extends gi{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.SoundLevelTimeSeries=o,this.Frequency=n,this.SoundLevelSingleValue=a,this.type=1202362311}};e.IfcSpaceThermalLoadProperties=class extends gi{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableValueRatio=o,this.ThermalLoadSource=n,this.PropertySource=a,this.SourceDescription=l,this.MaximumValue=h,this.MinimumValue=c,this.ThermalLoadTimeSeriesValues=u,this.UserDefinedThermalLoadSource=A,this.UserDefinedPropertySource=p,this.ThermalLoadType=d,this.type=390701378}};e.IfcStructuralLoadLinearForce=class extends Ls{constructor(e,t,s,i,r,o,n,a){super(e,t),this.Name=t,this.LinearForceX=s,this.LinearForceY=i,this.LinearForceZ=r,this.LinearMomentX=o,this.LinearMomentY=n,this.LinearMomentZ=a,this.type=1595516126}};e.IfcStructuralLoadPlanarForce=class extends Ls{constructor(e,t,s,i,r){super(e,t),this.Name=t,this.PlanarForceX=s,this.PlanarForceY=i,this.PlanarForceZ=r,this.type=2668620305}};class _i extends Ls{constructor(e,t,s,i,r,o,n,a){super(e,t),this.Name=t,this.DisplacementX=s,this.DisplacementY=i,this.DisplacementZ=r,this.RotationalDisplacementRX=o,this.RotationalDisplacementRY=n,this.RotationalDisplacementRZ=a,this.type=2473145415}}e.IfcStructuralLoadSingleDisplacement=_i;e.IfcStructuralLoadSingleDisplacementDistortion=class extends _i{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a),this.Name=t,this.DisplacementX=s,this.DisplacementY=i,this.DisplacementZ=r,this.RotationalDisplacementRX=o,this.RotationalDisplacementRY=n,this.RotationalDisplacementRZ=a,this.Distortion=l,this.type=1973038258}};class Ii extends Ls{constructor(e,t,s,i,r,o,n,a){super(e,t),this.Name=t,this.ForceX=s,this.ForceY=i,this.ForceZ=r,this.MomentX=o,this.MomentY=n,this.MomentZ=a,this.type=1597423693}}e.IfcStructuralLoadSingleForce=Ii;e.IfcStructuralLoadSingleForceWarping=class extends Ii{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a),this.Name=t,this.ForceX=s,this.ForceY=i,this.ForceZ=r,this.MomentX=o,this.MomentY=n,this.MomentZ=a,this.WarpingMoment=l,this.type=1190533807}};class Ti extends ei{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f,m,g,y,E,v,_,I,T){super(e,t,s,i,r,o,n,a),this.ProfileName=t,this.ProfileDefinition=s,this.PhysicalWeight=i,this.Perimeter=r,this.MinimumPlateThickness=o,this.MaximumPlateThickness=n,this.CrossSectionArea=a,this.TorsionalConstantX=l,this.MomentOfInertiaYZ=h,this.MomentOfInertiaY=c,this.MomentOfInertiaZ=u,this.WarpingConstant=A,this.ShearCentreZ=p,this.ShearCentreY=d,this.ShearDeformationAreaZ=f,this.ShearDeformationAreaY=m,this.MaximumSectionModulusY=g,this.MinimumSectionModulusY=y,this.MaximumSectionModulusZ=E,this.MinimumSectionModulusZ=v,this.TorsionalSectionModulus=_,this.CentreOfGravityInX=I,this.CentreOfGravityInY=T,this.type=3843319758}}e.IfcStructuralProfileProperties=Ti;e.IfcStructuralSteelProfileProperties=class extends Ti{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f,m,g,y,E,v,_,I,T,P,D,b,R){super(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f,m,g,y,E,v,_,I,T),this.ProfileName=t,this.ProfileDefinition=s,this.PhysicalWeight=i,this.Perimeter=r,this.MinimumPlateThickness=o,this.MaximumPlateThickness=n,this.CrossSectionArea=a,this.TorsionalConstantX=l,this.MomentOfInertiaYZ=h,this.MomentOfInertiaY=c,this.MomentOfInertiaZ=u,this.WarpingConstant=A,this.ShearCentreZ=p,this.ShearCentreY=d,this.ShearDeformationAreaZ=f,this.ShearDeformationAreaY=m,this.MaximumSectionModulusY=g,this.MinimumSectionModulusY=y,this.MaximumSectionModulusZ=E,this.MinimumSectionModulusZ=v,this.TorsionalSectionModulus=_,this.CentreOfGravityInX=I,this.CentreOfGravityInY=T,this.ShearAreaZ=P,this.ShearAreaY=D,this.PlasticShapeFactorY=b,this.PlasticShapeFactorZ=R,this.type=3653947884}};e.IfcSubedge=class extends qs{constructor(e,t,s,i){super(e,t,s),this.EdgeStart=t,this.EdgeEnd=s,this.ParentEdge=i,this.type=2233826070}};class Pi extends si{constructor(e){super(e),this.type=2513912981}}e.IfcSurface=Pi;e.IfcSurfaceStyleRendering=class extends Gs{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t),this.SurfaceColour=t,this.Transparency=s,this.DiffuseColour=i,this.TransmissionColour=r,this.DiffuseTransmissionColour=o,this.ReflectionColour=n,this.SpecularColour=a,this.SpecularHighlight=l,this.ReflectanceMethod=h,this.type=1878645084}};class Di extends vi{constructor(e,t,s){super(e),this.SweptArea=t,this.Position=s,this.type=2247615214}}e.IfcSweptAreaSolid=Di;e.IfcSweptDiskSolid=class extends vi{constructor(e,t,s,i,r,o){super(e),this.Directrix=t,this.Radius=s,this.InnerRadius=i,this.StartParam=r,this.EndParam=o,this.type=1260650574}};class bi extends Pi{constructor(e,t,s){super(e),this.SweptCurve=t,this.Position=s,this.type=230924584}}e.IfcSweptSurface=bi;e.IfcTShapeProfileDef=class extends ci{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.Depth=r,this.FlangeWidth=o,this.WebThickness=n,this.FlangeThickness=a,this.FilletRadius=l,this.FlangeEdgeRadius=h,this.WebEdgeRadius=c,this.WebSlope=u,this.FlangeSlope=A,this.CentreOfGravityInY=p,this.type=3071757647}};class Ri extends Ks{constructor(e,t,s,i,r){super(e,t,s,i),this.Item=t,this.Styles=s,this.Name=i,this.AnnotatedCurve=r,this.type=3028897424}}e.IfcTerminatorSymbol=Ri;class Ci extends si{constructor(e,t,s,i){super(e),this.Literal=t,this.Placement=s,this.Path=i,this.type=4282788508}}e.IfcTextLiteral=Ci;e.IfcTextLiteralWithExtent=class extends Ci{constructor(e,t,s,i,r,o){super(e,t,s,i),this.Literal=t,this.Placement=s,this.Path=i,this.Extent=r,this.BoxAlignment=o,this.type=3124975700}};e.IfcTrapeziumProfileDef=class extends ci{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.BottomXDim=r,this.TopXDim=o,this.YDim=n,this.TopXOffset=a,this.type=2715220739}};e.IfcTwoDirectionRepeatFactor=class extends hi{constructor(e,t,s){super(e,t),this.RepeatFactor=t,this.SecondRepeatFactor=s,this.type=1345879162}};class xi extends li{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.type=1628702193}}e.IfcTypeObject=xi;class Ni extends xi{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.type=2347495698}}e.IfcTypeProduct=Ni;e.IfcUShapeProfileDef=class extends ci{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.Depth=r,this.FlangeWidth=o,this.WebThickness=n,this.FlangeThickness=a,this.FilletRadius=l,this.EdgeRadius=h,this.FlangeSlope=c,this.CentreOfGravityInX=u,this.type=427810014}};e.IfcVector=class extends si{constructor(e,t,s){super(e),this.Orientation=t,this.Magnitude=s,this.type=1417489154}};e.IfcVertexLoop=class extends ai{constructor(e,t){super(e),this.LoopVertex=t,this.type=2759199220}};e.IfcWindowLiningProperties=class extends gi{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.LiningDepth=o,this.LiningThickness=n,this.TransomThickness=a,this.MullionThickness=l,this.FirstTransomOffset=h,this.SecondTransomOffset=c,this.FirstMullionOffset=u,this.SecondMullionOffset=A,this.ShapeAspectStyle=p,this.type=336235671}};e.IfcWindowPanelProperties=class extends gi{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.OperationType=o,this.PanelPosition=n,this.FrameDepth=a,this.FrameThickness=l,this.ShapeAspectStyle=h,this.type=512836454}};e.IfcWindowStyle=class extends Ni{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ConstructionType=h,this.OperationType=c,this.ParameterTakesPrecedence=u,this.Sizeable=A,this.type=1299126871}};e.IfcZShapeProfileDef=class extends ci{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.Depth=r,this.FlangeWidth=o,this.WebThickness=n,this.FlangeThickness=a,this.FilletRadius=l,this.EdgeRadius=h,this.type=2543172580}};class Oi extends zs{constructor(e,t,s,i){super(e,t,s,i),this.Item=t,this.Styles=s,this.Name=i,this.type=3288037868}}e.IfcAnnotationCurveOccurrence=Oi;e.IfcAnnotationFillArea=class extends si{constructor(e,t,s){super(e),this.OuterBoundary=t,this.InnerBoundaries=s,this.type=669184980}};e.IfcAnnotationFillAreaOccurrence=class extends zs{constructor(e,t,s,i,r,o){super(e,t,s,i),this.Item=t,this.Styles=s,this.Name=i,this.FillStyleTarget=r,this.GlobalOrLocal=o,this.type=2265737646}};e.IfcAnnotationSurface=class extends si{constructor(e,t,s){super(e),this.Item=t,this.TextureCoordinates=s,this.type=1302238472}};e.IfcAxis1Placement=class extends ui{constructor(e,t,s){super(e,t),this.Location=t,this.Axis=s,this.type=4261334040}};e.IfcAxis2Placement2D=class extends ui{constructor(e,t,s){super(e,t),this.Location=t,this.RefDirection=s,this.type=3125803723}};e.IfcAxis2Placement3D=class extends ui{constructor(e,t,s,i){super(e,t),this.Location=t,this.Axis=s,this.RefDirection=i,this.type=2740243338}};class Si extends si{constructor(e,t,s,i){super(e),this.Operator=t,this.FirstOperand=s,this.SecondOperand=i,this.type=2736907675}}e.IfcBooleanResult=Si;class wi extends Pi{constructor(e){super(e),this.type=4182860854}}e.IfcBoundedSurface=wi;e.IfcBoundingBox=class extends si{constructor(e,t,s,i,r){super(e),this.Corner=t,this.XDim=s,this.YDim=i,this.ZDim=r,this.type=2581212453}};e.IfcBoxedHalfSpace=class extends ri{constructor(e,t,s,i){super(e,t,s),this.BaseSurface=t,this.AgreementFlag=s,this.Enclosure=i,this.type=2713105998}};e.IfcCShapeProfileDef=class extends ci{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.Depth=r,this.Width=o,this.WallThickness=n,this.Girth=a,this.InternalFilletRadius=l,this.CentreOfGravityInX=h,this.type=2898889636}};e.IfcCartesianPoint=class extends pi{constructor(e,t){super(e),this.Coordinates=t,this.type=1123145078}};class Mi extends si{constructor(e,t,s,i,r){super(e),this.Axis1=t,this.Axis2=s,this.LocalOrigin=i,this.Scale=r,this.type=59481748}}e.IfcCartesianTransformationOperator=Mi;class Bi extends Mi{constructor(e,t,s,i,r){super(e,t,s,i,r),this.Axis1=t,this.Axis2=s,this.LocalOrigin=i,this.Scale=r,this.type=3749851601}}e.IfcCartesianTransformationOperator2D=Bi;e.IfcCartesianTransformationOperator2DnonUniform=class extends Bi{constructor(e,t,s,i,r,o){super(e,t,s,i,r),this.Axis1=t,this.Axis2=s,this.LocalOrigin=i,this.Scale=r,this.Scale2=o,this.type=3486308946}};class Fi extends Mi{constructor(e,t,s,i,r,o){super(e,t,s,i,r),this.Axis1=t,this.Axis2=s,this.LocalOrigin=i,this.Scale=r,this.Axis3=o,this.type=3331915920}}e.IfcCartesianTransformationOperator3D=Fi;e.IfcCartesianTransformationOperator3DnonUniform=class extends Fi{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o),this.Axis1=t,this.Axis2=s,this.LocalOrigin=i,this.Scale=r,this.Axis3=o,this.Scale2=n,this.Scale3=a,this.type=1416205885}};class Li extends ci{constructor(e,t,s,i,r){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.Radius=r,this.type=1383045692}}e.IfcCircleProfileDef=Li;e.IfcClosedShell=class extends Zs{constructor(e,t){super(e,t),this.CfsFaces=t,this.type=2205249479}};e.IfcCompositeCurveSegment=class extends si{constructor(e,t,s,i){super(e),this.Transition=t,this.SameSense=s,this.ParentCurve=i,this.type=2485617015}};e.IfcCraneRailAShapeProfileDef=class extends ci{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.OverallHeight=r,this.BaseWidth2=o,this.Radius=n,this.HeadWidth=a,this.HeadDepth2=l,this.HeadDepth3=h,this.WebThickness=c,this.BaseWidth4=u,this.BaseDepth1=A,this.BaseDepth2=p,this.BaseDepth3=d,this.CentreOfGravityInY=f,this.type=4133800736}};e.IfcCraneRailFShapeProfileDef=class extends ci{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.OverallHeight=r,this.HeadWidth=o,this.Radius=n,this.HeadDepth2=a,this.HeadDepth3=l,this.WebThickness=h,this.BaseDepth1=c,this.BaseDepth2=u,this.CentreOfGravityInY=A,this.type=194851669}};class Ui extends si{constructor(e,t){super(e),this.Position=t,this.type=2506170314}}e.IfcCsgPrimitive3D=Ui;e.IfcCsgSolid=class extends vi{constructor(e,t){super(e),this.TreeRootExpression=t,this.type=2147822146}};class Hi extends si{constructor(e){super(e),this.type=2601014836}}e.IfcCurve=Hi;e.IfcCurveBoundedPlane=class extends wi{constructor(e,t,s,i){super(e),this.BasisSurface=t,this.OuterBoundary=s,this.InnerBoundaries=i,this.type=2827736869}};e.IfcDefinedSymbol=class extends si{constructor(e,t,s){super(e),this.Definition=t,this.Target=s,this.type=693772133}};e.IfcDimensionCurve=class extends Oi{constructor(e,t,s,i){super(e,t,s,i),this.Item=t,this.Styles=s,this.Name=i,this.type=606661476}};e.IfcDimensionCurveTerminator=class extends Ri{constructor(e,t,s,i,r,o){super(e,t,s,i,r),this.Item=t,this.Styles=s,this.Name=i,this.AnnotatedCurve=r,this.Role=o,this.type=4054601972}};e.IfcDirection=class extends si{constructor(e,t){super(e),this.DirectionRatios=t,this.type=32440307}};e.IfcDoorLiningProperties=class extends gi{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.LiningDepth=o,this.LiningThickness=n,this.ThresholdDepth=a,this.ThresholdThickness=l,this.TransomThickness=h,this.TransomOffset=c,this.LiningOffset=u,this.ThresholdOffset=A,this.CasingThickness=p,this.CasingDepth=d,this.ShapeAspectStyle=f,this.type=2963535650}};e.IfcDoorPanelProperties=class extends gi{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.PanelDepth=o,this.PanelOperation=n,this.PanelWidth=a,this.PanelPosition=l,this.ShapeAspectStyle=h,this.type=1714330368}};e.IfcDoorStyle=class extends Ni{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.OperationType=h,this.ConstructionType=c,this.ParameterTakesPrecedence=u,this.Sizeable=A,this.type=526551008}};class Gi extends si{constructor(e,t){super(e),this.Contents=t,this.type=3073041342}}e.IfcDraughtingCallout=Gi;e.IfcDraughtingPreDefinedColour=class extends di{constructor(e,t){super(e,t),this.Name=t,this.type=445594917}};e.IfcDraughtingPreDefinedCurveFont=class extends fi{constructor(e,t){super(e,t),this.Name=t,this.type=4006246654}};e.IfcEdgeLoop=class extends ai{constructor(e,t){super(e),this.EdgeList=t,this.type=1472233963}};e.IfcElementQuantity=class extends gi{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.MethodOfMeasurement=o,this.Quantities=n,this.type=1883228015}};class Vi extends Ni{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=339256511}}e.IfcElementType=Vi;class ki extends Pi{constructor(e,t){super(e),this.Position=t,this.type=2777663545}}e.IfcElementarySurface=ki;e.IfcEllipseProfileDef=class extends ci{constructor(e,t,s,i,r,o){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.SemiAxis1=r,this.SemiAxis2=o,this.type=2835456948}};class ji extends gi{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.EnergySequence=o,this.UserDefinedEnergySequence=n,this.type=80994333}}e.IfcEnergyProperties=ji;e.IfcExtrudedAreaSolid=class extends Di{constructor(e,t,s,i,r){super(e,t,s),this.SweptArea=t,this.Position=s,this.ExtrudedDirection=i,this.Depth=r,this.type=477187591}};e.IfcFaceBasedSurfaceModel=class extends si{constructor(e,t){super(e),this.FbsmFaces=t,this.type=2047409740}};e.IfcFillAreaStyleHatching=class extends si{constructor(e,t,s,i,r,o){super(e),this.HatchLineAppearance=t,this.StartOfNextHatchLine=s,this.PointOfReferenceHatchLine=i,this.PatternStart=r,this.HatchLineAngle=o,this.type=374418227}};e.IfcFillAreaStyleTileSymbolWithStyle=class extends si{constructor(e,t){super(e),this.Symbol=t,this.type=4203026998}};e.IfcFillAreaStyleTiles=class extends si{constructor(e,t,s,i){super(e),this.TilingPattern=t,this.Tiles=s,this.TilingScale=i,this.type=315944413}};e.IfcFluidFlowProperties=class extends gi{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f,m,g,y,E){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.PropertySource=o,this.FlowConditionTimeSeries=n,this.VelocityTimeSeries=a,this.FlowrateTimeSeries=l,this.Fluid=h,this.PressureTimeSeries=c,this.UserDefinedPropertySource=u,this.TemperatureSingleValue=A,this.WetBulbTemperatureSingleValue=p,this.WetBulbTemperatureTimeSeries=d,this.TemperatureTimeSeries=f,this.FlowrateSingleValue=m,this.FlowConditionSingleValue=g,this.VelocitySingleValue=y,this.PressureSingleValue=E,this.type=3455213021}};class Qi extends Vi{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=4238390223}}e.IfcFurnishingElementType=Qi;e.IfcFurnitureType=class extends Qi{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.AssemblyPlace=c,this.type=1268542332}};e.IfcGeometricCurveSet=class extends ii{constructor(e,t){super(e,t),this.Elements=t,this.type=987898635}};class Wi extends ci{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.OverallWidth=r,this.OverallDepth=o,this.WebThickness=n,this.FlangeThickness=a,this.FilletRadius=l,this.type=1484403080}}e.IfcIShapeProfileDef=Wi;e.IfcLShapeProfileDef=class extends ci{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.Depth=r,this.Width=o,this.Thickness=n,this.FilletRadius=a,this.EdgeRadius=l,this.LegSlope=h,this.CentreOfGravityInX=c,this.CentreOfGravityInY=u,this.type=572779678}};e.IfcLine=class extends Hi{constructor(e,t,s){super(e),this.Pnt=t,this.Dir=s,this.type=1281925730}};class zi extends vi{constructor(e,t){super(e),this.Outer=t,this.type=1425443689}}e.IfcManifoldSolidBrep=zi;class Ki extends li{constructor(e,t,s,i,r,o){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.type=3888040117}}e.IfcObject=Ki;e.IfcOffsetCurve2D=class extends Hi{constructor(e,t,s,i){super(e),this.BasisCurve=t,this.Distance=s,this.SelfIntersect=i,this.type=3388369263}};e.IfcOffsetCurve3D=class extends Hi{constructor(e,t,s,i,r){super(e),this.BasisCurve=t,this.Distance=s,this.SelfIntersect=i,this.RefDirection=r,this.type=3505215534}};e.IfcPermeableCoveringProperties=class extends gi{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.OperationType=o,this.PanelPosition=n,this.FrameDepth=a,this.FrameThickness=l,this.ShapeAspectStyle=h,this.type=3566463478}};e.IfcPlanarBox=class extends Ai{constructor(e,t,s,i){super(e,t,s),this.SizeInX=t,this.SizeInY=s,this.Placement=i,this.type=603570806}};e.IfcPlane=class extends ki{constructor(e,t){super(e,t),this.Position=t,this.type=220341763}};class Yi extends Ki{constructor(e,t,s,i,r,o){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.type=2945172077}}e.IfcProcess=Yi;class Xi extends Ki{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.type=4208778838}}e.IfcProduct=Xi;e.IfcProject=class extends Ki{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.LongName=n,this.Phase=a,this.RepresentationContexts=l,this.UnitsInContext=h,this.type=103090709}};e.IfcProjectionCurve=class extends Oi{constructor(e,t,s,i){super(e,t,s,i),this.Item=t,this.Styles=s,this.Name=i,this.type=4194566429}};e.IfcPropertySet=class extends gi{constructor(e,t,s,i,r,o){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.HasProperties=o,this.type=1451395588}};e.IfcProxy=class extends Xi{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.ProxyType=l,this.Tag=h,this.type=3219374653}};e.IfcRectangleHollowProfileDef=class extends yi{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.XDim=r,this.YDim=o,this.WallThickness=n,this.InnerFilletRadius=a,this.OuterFilletRadius=l,this.type=2770003689}};e.IfcRectangularPyramid=class extends Ui{constructor(e,t,s,i,r){super(e,t),this.Position=t,this.XLength=s,this.YLength=i,this.Height=r,this.type=2798486643}};e.IfcRectangularTrimmedSurface=class extends wi{constructor(e,t,s,i,r,o,n,a){super(e),this.BasisSurface=t,this.U1=s,this.V1=i,this.U2=r,this.V2=o,this.Usense=n,this.Vsense=a,this.type=3454111270}};class Zi extends Ei{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatedObjectsType=n,this.type=3939117080}}e.IfcRelAssigns=Zi;class qi extends Zi{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatedObjectsType=n,this.RelatingActor=a,this.ActingRole=l,this.type=1683148259}}e.IfcRelAssignsToActor=qi;class Ji extends Zi{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatedObjectsType=n,this.RelatingControl=a,this.type=2495723537}}e.IfcRelAssignsToControl=Ji;e.IfcRelAssignsToGroup=class extends Zi{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatedObjectsType=n,this.RelatingGroup=a,this.type=1307041759}};e.IfcRelAssignsToProcess=class extends Zi{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatedObjectsType=n,this.RelatingProcess=a,this.QuantityInProcess=l,this.type=4278684876}};e.IfcRelAssignsToProduct=class extends Zi{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatedObjectsType=n,this.RelatingProduct=a,this.type=2857406711}};e.IfcRelAssignsToProjectOrder=class extends Ji{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatedObjectsType=n,this.RelatingControl=a,this.type=3372526763}};e.IfcRelAssignsToResource=class extends Zi{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatedObjectsType=n,this.RelatingResource=a,this.type=205026976}};class $i extends Ei{constructor(e,t,s,i,r,o){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.type=1865459582}}e.IfcRelAssociates=$i;e.IfcRelAssociatesAppliedValue=class extends $i{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatingAppliedValue=n,this.type=1327628568}};e.IfcRelAssociatesApproval=class extends $i{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatingApproval=n,this.type=4095574036}};e.IfcRelAssociatesClassification=class extends $i{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatingClassification=n,this.type=919958153}};e.IfcRelAssociatesConstraint=class extends $i{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.Intent=n,this.RelatingConstraint=a,this.type=2728634034}};e.IfcRelAssociatesDocument=class extends $i{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatingDocument=n,this.type=982818633}};e.IfcRelAssociatesLibrary=class extends $i{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatingLibrary=n,this.type=3840914261}};e.IfcRelAssociatesMaterial=class extends $i{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatingMaterial=n,this.type=2655215786}};e.IfcRelAssociatesProfileProperties=class extends $i{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatingProfileProperties=n,this.ProfileSectionLocation=a,this.ProfileOrientation=l,this.type=2851387026}};class er extends Ei{constructor(e,t,s,i,r){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.type=826625072}}e.IfcRelConnects=er;class tr extends er{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ConnectionGeometry=o,this.RelatingElement=n,this.RelatedElement=a,this.type=1204542856}}e.IfcRelConnectsElements=tr;e.IfcRelConnectsPathElements=class extends tr{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ConnectionGeometry=o,this.RelatingElement=n,this.RelatedElement=a,this.RelatingPriorities=l,this.RelatedPriorities=h,this.RelatedConnectionType=c,this.RelatingConnectionType=u,this.type=3945020480}};e.IfcRelConnectsPortToElement=class extends er{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingPort=o,this.RelatedElement=n,this.type=4201705270}};e.IfcRelConnectsPorts=class extends er{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingPort=o,this.RelatedPort=n,this.RealizingElement=a,this.type=3190031847}};e.IfcRelConnectsStructuralActivity=class extends er{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingElement=o,this.RelatedStructuralActivity=n,this.type=2127690289}};e.IfcRelConnectsStructuralElement=class extends er{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingElement=o,this.RelatedStructuralMember=n,this.type=3912681535}};class sr extends er{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingStructuralMember=o,this.RelatedStructuralConnection=n,this.AppliedCondition=a,this.AdditionalConditions=l,this.SupportedLength=h,this.ConditionCoordinateSystem=c,this.type=1638771189}}e.IfcRelConnectsStructuralMember=sr;e.IfcRelConnectsWithEccentricity=class extends sr{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingStructuralMember=o,this.RelatedStructuralConnection=n,this.AppliedCondition=a,this.AdditionalConditions=l,this.SupportedLength=h,this.ConditionCoordinateSystem=c,this.ConnectionConstraint=u,this.type=504942748}};e.IfcRelConnectsWithRealizingElements=class extends tr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ConnectionGeometry=o,this.RelatingElement=n,this.RelatedElement=a,this.RealizingElements=l,this.ConnectionType=h,this.type=3678494232}};e.IfcRelContainedInSpatialStructure=class extends er{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedElements=o,this.RelatingStructure=n,this.type=3242617779}};e.IfcRelCoversBldgElements=class extends er{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingBuildingElement=o,this.RelatedCoverings=n,this.type=886880790}};e.IfcRelCoversSpaces=class extends er{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedSpace=o,this.RelatedCoverings=n,this.type=2802773753}};class ir extends Ei{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingObject=o,this.RelatedObjects=n,this.type=2551354335}}e.IfcRelDecomposes=ir;class rr extends Ei{constructor(e,t,s,i,r,o){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.type=693640335}}e.IfcRelDefines=rr;class or extends rr{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatingPropertyDefinition=n,this.type=4186316022}}e.IfcRelDefinesByProperties=or;e.IfcRelDefinesByType=class extends rr{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatingType=n,this.type=781010003}};e.IfcRelFillsElement=class extends er{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingOpeningElement=o,this.RelatedBuildingElement=n,this.type=3940055652}};e.IfcRelFlowControlElements=class extends er{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedControlElements=o,this.RelatingFlowElement=n,this.type=279856033}};e.IfcRelInteractionRequirements=class extends er{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.DailyInteraction=o,this.ImportanceRating=n,this.LocationOfInteraction=a,this.RelatedSpaceProgram=l,this.RelatingSpaceProgram=h,this.type=4189434867}};e.IfcRelNests=class extends ir{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingObject=o,this.RelatedObjects=n,this.type=3268803585}};e.IfcRelOccupiesSpaces=class extends qi{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatedObjectsType=n,this.RelatingActor=a,this.ActingRole=l,this.type=2051452291}};e.IfcRelOverridesProperties=class extends or{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatingPropertyDefinition=n,this.OverridingProperties=a,this.type=202636808}};e.IfcRelProjectsElement=class extends er{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingElement=o,this.RelatedFeatureElement=n,this.type=750771296}};e.IfcRelReferencedInSpatialStructure=class extends er{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedElements=o,this.RelatingStructure=n,this.type=1245217292}};e.IfcRelSchedulesCostItems=class extends Ji{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatedObjectsType=n,this.RelatingControl=a,this.type=1058617721}};e.IfcRelSequence=class extends er{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingProcess=o,this.RelatedProcess=n,this.TimeLag=a,this.SequenceType=l,this.type=4122056220}};e.IfcRelServicesBuildings=class extends er{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingSystem=o,this.RelatedBuildings=n,this.type=366585022}};e.IfcRelSpaceBoundary=class extends er{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingSpace=o,this.RelatedBuildingElement=n,this.ConnectionGeometry=a,this.PhysicalOrVirtualBoundary=l,this.InternalOrExternalBoundary=h,this.type=3451746338}};e.IfcRelVoidsElement=class extends er{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingBuildingElement=o,this.RelatedOpeningElement=n,this.type=1401173127}};class nr extends Ki{constructor(e,t,s,i,r,o){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.type=2914609552}}e.IfcResource=nr;e.IfcRevolvedAreaSolid=class extends Di{constructor(e,t,s,i,r){super(e,t,s),this.SweptArea=t,this.Position=s,this.Axis=i,this.Angle=r,this.type=1856042241}};e.IfcRightCircularCone=class extends Ui{constructor(e,t,s,i){super(e,t),this.Position=t,this.Height=s,this.BottomRadius=i,this.type=4158566097}};e.IfcRightCircularCylinder=class extends Ui{constructor(e,t,s,i){super(e,t),this.Position=t,this.Height=s,this.Radius=i,this.type=3626867408}};class ar extends Xi{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.CompositionType=h,this.type=2706606064}}e.IfcSpatialStructureElement=ar;class lr extends Vi{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=3893378262}}e.IfcSpatialStructureElementType=lr;e.IfcSphere=class extends Ui{constructor(e,t,s){super(e,t),this.Position=t,this.Radius=s,this.type=451544542}};class hr extends Xi{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedLoad=l,this.GlobalOrLocal=h,this.type=3544373492}}e.IfcStructuralActivity=hr;class cr extends Xi{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.type=3136571912}}e.IfcStructuralItem=cr;class ur extends cr{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.type=530289379}}e.IfcStructuralMember=ur;class Ar extends hr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedLoad=l,this.GlobalOrLocal=h,this.type=3689010777}}e.IfcStructuralReaction=Ar;class pr extends ur{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.PredefinedType=l,this.Thickness=h,this.type=3979015343}}e.IfcStructuralSurfaceMember=pr;e.IfcStructuralSurfaceMemberVarying=class extends pr{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.PredefinedType=l,this.Thickness=h,this.SubsequentThickness=c,this.VaryingThicknessLocation=u,this.type=2218152070}};e.IfcStructuredDimensionCallout=class extends Gi{constructor(e,t){super(e,t),this.Contents=t,this.type=4070609034}};e.IfcSurfaceCurveSweptAreaSolid=class extends Di{constructor(e,t,s,i,r,o,n){super(e,t,s),this.SweptArea=t,this.Position=s,this.Directrix=i,this.StartParam=r,this.EndParam=o,this.ReferenceSurface=n,this.type=2028607225}};e.IfcSurfaceOfLinearExtrusion=class extends bi{constructor(e,t,s,i,r){super(e,t,s),this.SweptCurve=t,this.Position=s,this.ExtrudedDirection=i,this.Depth=r,this.type=2809605785}};e.IfcSurfaceOfRevolution=class extends bi{constructor(e,t,s,i){super(e,t,s),this.SweptCurve=t,this.Position=s,this.AxisPosition=i,this.type=4124788165}};e.IfcSystemFurnitureElementType=class extends Qi{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=1580310250}};class dr extends Yi{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.TaskId=n,this.Status=a,this.WorkMethod=l,this.IsMilestone=h,this.Priority=c,this.type=3473067441}}e.IfcTask=dr;e.IfcTransportElementType=class extends Vi{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2097647324}};class fr extends Ki{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.TheActor=n,this.type=2296667514}}e.IfcActor=fr;e.IfcAnnotation=class extends Xi{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.type=1674181508}};e.IfcAsymmetricIShapeProfileDef=class extends Wi{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.OverallWidth=r,this.OverallDepth=o,this.WebThickness=n,this.FlangeThickness=a,this.FilletRadius=l,this.TopFlangeWidth=h,this.TopFlangeThickness=c,this.TopFlangeFilletRadius=u,this.CentreOfGravityInY=A,this.type=3207858831}};e.IfcBlock=class extends Ui{constructor(e,t,s,i,r){super(e,t),this.Position=t,this.XLength=s,this.YLength=i,this.ZLength=r,this.type=1334484129}};e.IfcBooleanClippingResult=class extends Si{constructor(e,t,s,i){super(e,t,s,i),this.Operator=t,this.FirstOperand=s,this.SecondOperand=i,this.type=3649129432}};class mr extends Hi{constructor(e){super(e),this.type=1260505505}}e.IfcBoundedCurve=mr;e.IfcBuilding=class extends ar{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.CompositionType=h,this.ElevationOfRefHeight=c,this.ElevationOfTerrain=u,this.BuildingAddress=A,this.type=4031249490}};class gr extends Vi{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=1950629157}}e.IfcBuildingElementType=gr;e.IfcBuildingStorey=class extends ar{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.CompositionType=h,this.Elevation=c,this.type=3124254112}};e.IfcCircleHollowProfileDef=class extends Li{constructor(e,t,s,i,r,o){super(e,t,s,i,r),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.Radius=r,this.WallThickness=o,this.type=2937912522}};e.IfcColumnType=class extends gr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=300633059}};class yr extends mr{constructor(e,t,s){super(e),this.Segments=t,this.SelfIntersect=s,this.type=3732776249}}e.IfcCompositeCurve=yr;class Er extends Hi{constructor(e,t){super(e),this.Position=t,this.type=2510884976}}e.IfcConic=Er;class vr extends nr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ResourceIdentifier=n,this.ResourceGroup=a,this.ResourceConsumption=l,this.BaseQuantity=h,this.type=2559216714}}e.IfcConstructionResource=vr;class _r extends Ki{constructor(e,t,s,i,r,o){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.type=3293443760}}e.IfcControl=_r;e.IfcCostItem=class extends _r{constructor(e,t,s,i,r,o){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.type=3895139033}};e.IfcCostSchedule=class extends _r{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.SubmittedBy=n,this.PreparedBy=a,this.SubmittedOn=l,this.Status=h,this.TargetUsers=c,this.UpdateDate=u,this.ID=A,this.PredefinedType=p,this.type=1419761937}};e.IfcCoveringType=class extends gr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1916426348}};e.IfcCrewResource=class extends vr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ResourceIdentifier=n,this.ResourceGroup=a,this.ResourceConsumption=l,this.BaseQuantity=h,this.type=3295246426}};e.IfcCurtainWallType=class extends gr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1457835157}};class Ir extends Gi{constructor(e,t){super(e,t),this.Contents=t,this.type=681481545}}e.IfcDimensionCurveDirectedCallout=Ir;class Tr extends Vi{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=3256556792}}e.IfcDistributionElementType=Tr;class Pr extends Tr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=3849074793}}e.IfcDistributionFlowElementType=Pr;e.IfcElectricalBaseProperties=class extends ji{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.EnergySequence=o,this.UserDefinedEnergySequence=n,this.ElectricCurrentType=a,this.InputVoltage=l,this.InputFrequency=h,this.FullLoadCurrent=c,this.MinimumCircuitCurrent=u,this.MaximumPowerInput=A,this.RatedPowerInput=p,this.InputPhase=d,this.type=360485395}};class Dr extends Xi{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=1758889154}}e.IfcElement=Dr;e.IfcElementAssembly=class extends Dr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.AssemblyPlace=h,this.PredefinedType=c,this.type=4123344466}};class br extends Dr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=1623761950}}e.IfcElementComponent=br;class Rr extends Vi{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=2590856083}}e.IfcElementComponentType=Rr;e.IfcEllipse=class extends Er{constructor(e,t,s,i){super(e,t),this.Position=t,this.SemiAxis1=s,this.SemiAxis2=i,this.type=1704287377}};class Cr extends Pr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=2107101300}}e.IfcEnergyConversionDeviceType=Cr;e.IfcEquipmentElement=class extends Dr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=1962604670}};e.IfcEquipmentStandard=class extends _r{constructor(e,t,s,i,r,o){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.type=3272907226}};e.IfcEvaporativeCoolerType=class extends Cr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3174744832}};e.IfcEvaporatorType=class extends Cr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3390157468}};e.IfcFacetedBrep=class extends zi{constructor(e,t){super(e,t),this.Outer=t,this.type=807026263}};e.IfcFacetedBrepWithVoids=class extends zi{constructor(e,t,s){super(e,t),this.Outer=t,this.Voids=s,this.type=3737207727}};class xr extends br{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=647756555}}e.IfcFastener=xr;class Nr extends Rr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=2489546625}}e.IfcFastenerType=Nr;class Or extends Dr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=2827207264}}e.IfcFeatureElement=Or;class Sr extends Or{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=2143335405}}e.IfcFeatureElementAddition=Sr;class wr extends Or{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=1287392070}}e.IfcFeatureElementSubtraction=wr;class Mr extends Pr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=3907093117}}e.IfcFlowControllerType=Mr;class Br extends Pr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=3198132628}}e.IfcFlowFittingType=Br;e.IfcFlowMeterType=class extends Mr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3815607619}};class Fr extends Pr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=1482959167}}e.IfcFlowMovingDeviceType=Fr;class Lr extends Pr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=1834744321}}e.IfcFlowSegmentType=Lr;class Ur extends Pr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=1339347760}}e.IfcFlowStorageDeviceType=Ur;class Hr extends Pr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=2297155007}}e.IfcFlowTerminalType=Hr;class Gr extends Pr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=3009222698}}e.IfcFlowTreatmentDeviceType=Gr;e.IfcFurnishingElement=class extends Dr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=263784265}};e.IfcFurnitureStandard=class extends _r{constructor(e,t,s,i,r,o){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.type=814719939}};e.IfcGasTerminalType=class extends Hr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=200128114}};e.IfcGrid=class extends Xi{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.UAxes=l,this.VAxes=h,this.WAxes=c,this.type=3009204131}};class Vr extends Ki{constructor(e,t,s,i,r,o){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.type=2706460486}}e.IfcGroup=Vr;e.IfcHeatExchangerType=class extends Cr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1251058090}};e.IfcHumidifierType=class extends Cr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1806887404}};e.IfcInventory=class extends Vr{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.InventoryType=n,this.Jurisdiction=a,this.ResponsiblePersons=l,this.LastUpdateDate=h,this.CurrentValue=c,this.OriginalValue=u,this.type=2391368822}};e.IfcJunctionBoxType=class extends Br{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=4288270099}};e.IfcLaborResource=class extends vr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ResourceIdentifier=n,this.ResourceGroup=a,this.ResourceConsumption=l,this.BaseQuantity=h,this.SkillSet=c,this.type=3827777499}};e.IfcLampType=class extends Hr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1051575348}};e.IfcLightFixtureType=class extends Hr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1161773419}};e.IfcLinearDimension=class extends Ir{constructor(e,t){super(e,t),this.Contents=t,this.type=2506943328}};e.IfcMechanicalFastener=class extends xr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.NominalDiameter=h,this.NominalLength=c,this.type=377706215}};e.IfcMechanicalFastenerType=class extends Nr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=2108223431}};e.IfcMemberType=class extends gr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3181161470}};e.IfcMotorConnectionType=class extends Cr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=977012517}};e.IfcMove=class extends dr{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.TaskId=n,this.Status=a,this.WorkMethod=l,this.IsMilestone=h,this.Priority=c,this.MoveFrom=u,this.MoveTo=A,this.PunchList=p,this.type=1916936684}};e.IfcOccupant=class extends fr{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.TheActor=n,this.PredefinedType=a,this.type=4143007308}};e.IfcOpeningElement=class extends wr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=3588315303}};e.IfcOrderAction=class extends dr{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.TaskId=n,this.Status=a,this.WorkMethod=l,this.IsMilestone=h,this.Priority=c,this.ActionID=u,this.type=3425660407}};e.IfcOutletType=class extends Hr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2837617999}};e.IfcPerformanceHistory=class extends _r{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.LifeCyclePhase=n,this.type=2382730787}};e.IfcPermit=class extends _r{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.PermitID=n,this.type=3327091369}};e.IfcPipeFittingType=class extends Br{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=804291784}};e.IfcPipeSegmentType=class extends Lr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=4231323485}};e.IfcPlateType=class extends gr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=4017108033}};e.IfcPolyline=class extends mr{constructor(e,t){super(e),this.Points=t,this.type=3724593414}};class kr extends Xi{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.type=3740093272}}e.IfcPort=kr;e.IfcProcedure=class extends Yi{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ProcedureID=n,this.ProcedureType=a,this.UserDefinedProcedureType=l,this.type=2744685151}};e.IfcProjectOrder=class extends _r{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ID=n,this.PredefinedType=a,this.Status=l,this.type=2904328755}};e.IfcProjectOrderRecord=class extends _r{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Records=n,this.PredefinedType=a,this.type=3642467123}};e.IfcProjectionElement=class extends Sr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=3651124850}};e.IfcProtectiveDeviceType=class extends Mr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1842657554}};e.IfcPumpType=class extends Fr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2250791053}};e.IfcRadiusDimension=class extends Ir{constructor(e,t){super(e,t),this.Contents=t,this.type=3248260540}};e.IfcRailingType=class extends gr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2893384427}};e.IfcRampFlightType=class extends gr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2324767716}};e.IfcRelAggregates=class extends ir{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingObject=o,this.RelatedObjects=n,this.type=160246688}};e.IfcRelAssignsTasks=class extends Ji{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatedObjectsType=n,this.RelatingControl=a,this.TimeForTask=l,this.type=2863920197}};e.IfcSanitaryTerminalType=class extends Hr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1768891740}};e.IfcScheduleTimeControl=class extends _r{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f,m,g,y,E,v,_,I,T){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ActualStart=n,this.EarlyStart=a,this.LateStart=l,this.ScheduleStart=h,this.ActualFinish=c,this.EarlyFinish=u,this.LateFinish=A,this.ScheduleFinish=p,this.ScheduleDuration=d,this.ActualDuration=f,this.RemainingTime=m,this.FreeFloat=g,this.TotalFloat=y,this.IsCritical=E,this.StatusTime=v,this.StartFloat=_,this.FinishFloat=I,this.Completion=T,this.type=3517283431}};e.IfcServiceLife=class extends _r{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ServiceLifeType=n,this.ServiceLifeDuration=a,this.type=4105383287}};e.IfcSite=class extends ar{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.CompositionType=h,this.RefLatitude=c,this.RefLongitude=u,this.RefElevation=A,this.LandTitleNumber=p,this.SiteAddress=d,this.type=4097777520}};e.IfcSlabType=class extends gr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2533589738}};e.IfcSpace=class extends ar{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.CompositionType=h,this.InteriorOrExteriorSpace=c,this.ElevationWithFlooring=u,this.type=3856911033}};e.IfcSpaceHeaterType=class extends Cr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1305183839}};e.IfcSpaceProgram=class extends _r{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.SpaceProgramIdentifier=n,this.MaxRequiredArea=a,this.MinRequiredArea=l,this.RequestedLocation=h,this.StandardRequiredArea=c,this.type=652456506}};e.IfcSpaceType=class extends lr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3812236995}};e.IfcStackTerminalType=class extends Hr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3112655638}};e.IfcStairFlightType=class extends gr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1039846685}};class jr extends hr{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedLoad=l,this.GlobalOrLocal=h,this.DestabilizingLoad=c,this.CausedBy=u,this.type=682877961}}e.IfcStructuralAction=jr;class Qr extends cr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedCondition=l,this.type=1179482911}}e.IfcStructuralConnection=Qr;e.IfcStructuralCurveConnection=class extends Qr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedCondition=l,this.type=4243806635}};class Wr extends ur{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.PredefinedType=l,this.type=214636428}}e.IfcStructuralCurveMember=Wr;e.IfcStructuralCurveMemberVarying=class extends Wr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.PredefinedType=l,this.type=2445595289}};class zr extends jr{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l,h,c,u),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedLoad=l,this.GlobalOrLocal=h,this.DestabilizingLoad=c,this.CausedBy=u,this.ProjectedOrTrue=A,this.type=1807405624}}e.IfcStructuralLinearAction=zr;e.IfcStructuralLinearActionVarying=class extends zr{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d){super(e,t,s,i,r,o,n,a,l,h,c,u,A),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedLoad=l,this.GlobalOrLocal=h,this.DestabilizingLoad=c,this.CausedBy=u,this.ProjectedOrTrue=A,this.VaryingAppliedLoadLocation=p,this.SubsequentAppliedLoads=d,this.type=1721250024}};e.IfcStructuralLoadGroup=class extends Vr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.PredefinedType=n,this.ActionType=a,this.ActionSource=l,this.Coefficient=h,this.Purpose=c,this.type=1252848954}};class Kr extends jr{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l,h,c,u),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedLoad=l,this.GlobalOrLocal=h,this.DestabilizingLoad=c,this.CausedBy=u,this.ProjectedOrTrue=A,this.type=1621171031}}e.IfcStructuralPlanarAction=Kr;e.IfcStructuralPlanarActionVarying=class extends Kr{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d){super(e,t,s,i,r,o,n,a,l,h,c,u,A),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedLoad=l,this.GlobalOrLocal=h,this.DestabilizingLoad=c,this.CausedBy=u,this.ProjectedOrTrue=A,this.VaryingAppliedLoadLocation=p,this.SubsequentAppliedLoads=d,this.type=3987759626}};e.IfcStructuralPointAction=class extends jr{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h,c,u),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedLoad=l,this.GlobalOrLocal=h,this.DestabilizingLoad=c,this.CausedBy=u,this.type=2082059205}};e.IfcStructuralPointConnection=class extends Qr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedCondition=l,this.type=734778138}};e.IfcStructuralPointReaction=class extends Ar{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedLoad=l,this.GlobalOrLocal=h,this.type=1235345126}};e.IfcStructuralResultGroup=class extends Vr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.TheoryType=n,this.ResultForLoadGroup=a,this.IsLinear=l,this.type=2986769608}};e.IfcStructuralSurfaceConnection=class extends Qr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedCondition=l,this.type=1975003073}};e.IfcSubContractResource=class extends vr{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ResourceIdentifier=n,this.ResourceGroup=a,this.ResourceConsumption=l,this.BaseQuantity=h,this.SubContractor=c,this.JobDescription=u,this.type=148013059}};e.IfcSwitchingDeviceType=class extends Mr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2315554128}};class Yr extends Vr{constructor(e,t,s,i,r,o){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.type=2254336722}}e.IfcSystem=Yr;e.IfcTankType=class extends Ur{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=5716631}};e.IfcTimeSeriesSchedule=class extends _r{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ApplicableDates=n,this.TimeSeriesScheduleType=a,this.TimeSeries=l,this.type=1637806684}};e.IfcTransformerType=class extends Cr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1692211062}};e.IfcTransportElement=class extends Dr{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.OperationType=h,this.CapacityByWeight=c,this.CapacityByNumber=u,this.type=1620046519}};e.IfcTrimmedCurve=class extends mr{constructor(e,t,s,i,r,o){super(e),this.BasisCurve=t,this.Trim1=s,this.Trim2=i,this.SenseAgreement=r,this.MasterRepresentation=o,this.type=3593883385}};e.IfcTubeBundleType=class extends Cr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1600972822}};e.IfcUnitaryEquipmentType=class extends Cr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1911125066}};e.IfcValveType=class extends Mr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=728799441}};e.IfcVirtualElement=class extends Dr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=2769231204}};e.IfcWallType=class extends gr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1898987631}};e.IfcWasteTerminalType=class extends Hr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1133259667}};class Xr extends _r{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identifier=n,this.CreationDate=a,this.Creators=l,this.Purpose=h,this.Duration=c,this.TotalFloat=u,this.StartTime=A,this.FinishTime=p,this.WorkControlType=d,this.UserDefinedControlType=f,this.type=1028945134}}e.IfcWorkControl=Xr;e.IfcWorkPlan=class extends Xr{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f){super(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identifier=n,this.CreationDate=a,this.Creators=l,this.Purpose=h,this.Duration=c,this.TotalFloat=u,this.StartTime=A,this.FinishTime=p,this.WorkControlType=d,this.UserDefinedControlType=f,this.type=4218914973}};e.IfcWorkSchedule=class extends Xr{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f){super(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identifier=n,this.CreationDate=a,this.Creators=l,this.Purpose=h,this.Duration=c,this.TotalFloat=u,this.StartTime=A,this.FinishTime=p,this.WorkControlType=d,this.UserDefinedControlType=f,this.type=3342526732}};e.IfcZone=class extends Vr{constructor(e,t,s,i,r,o){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.type=1033361043}};e.Ifc2DCompositeCurve=class extends yr{constructor(e,t,s){super(e,t,s),this.Segments=t,this.SelfIntersect=s,this.type=1213861670}};e.IfcActionRequest=class extends _r{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.RequestID=n,this.type=3821786052}};e.IfcAirTerminalBoxType=class extends Mr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1411407467}};e.IfcAirTerminalType=class extends Hr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3352864051}};e.IfcAirToAirHeatRecoveryType=class extends Cr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1871374353}};e.IfcAngularDimension=class extends Ir{constructor(e,t){super(e,t),this.Contents=t,this.type=2470393545}};e.IfcAsset=class extends Vr{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.AssetID=n,this.OriginalValue=a,this.CurrentValue=l,this.TotalReplacementCost=h,this.Owner=c,this.User=u,this.ResponsiblePerson=A,this.IncorporationDate=p,this.DepreciatedValue=d,this.type=3460190687}};class Zr extends mr{constructor(e,t,s,i,r,o){super(e),this.Degree=t,this.ControlPointsList=s,this.CurveForm=i,this.ClosedCurve=r,this.SelfIntersect=o,this.type=1967976161}}e.IfcBSplineCurve=Zr;e.IfcBeamType=class extends gr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=819618141}};class qr extends Zr{constructor(e,t,s,i,r,o){super(e,t,s,i,r,o),this.Degree=t,this.ControlPointsList=s,this.CurveForm=i,this.ClosedCurve=r,this.SelfIntersect=o,this.type=1916977116}}e.IfcBezierCurve=qr;e.IfcBoilerType=class extends Cr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=231477066}};class Jr extends Dr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=3299480353}}e.IfcBuildingElement=Jr;class $r extends Jr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=52481810}}e.IfcBuildingElementComponent=$r;e.IfcBuildingElementPart=class extends $r{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=2979338954}};e.IfcBuildingElementProxy=class extends Jr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.CompositionType=h,this.type=1095909175}};e.IfcBuildingElementProxyType=class extends gr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1909888760}};e.IfcCableCarrierFittingType=class extends Br{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=395041908}};e.IfcCableCarrierSegmentType=class extends Lr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3293546465}};e.IfcCableSegmentType=class extends Lr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1285652485}};e.IfcChillerType=class extends Cr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2951183804}};e.IfcCircle=class extends Er{constructor(e,t,s){super(e,t),this.Position=t,this.Radius=s,this.type=2611217952}};e.IfcCoilType=class extends Cr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2301859152}};e.IfcColumn=class extends Jr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=843113511}};e.IfcCompressorType=class extends Fr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3850581409}};e.IfcCondenserType=class extends Cr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2816379211}};e.IfcCondition=class extends Vr{constructor(e,t,s,i,r,o){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.type=2188551683}};e.IfcConditionCriterion=class extends _r{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Criterion=n,this.CriterionDateTime=a,this.type=1163958913}};e.IfcConstructionEquipmentResource=class extends vr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ResourceIdentifier=n,this.ResourceGroup=a,this.ResourceConsumption=l,this.BaseQuantity=h,this.type=3898045240}};e.IfcConstructionMaterialResource=class extends vr{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ResourceIdentifier=n,this.ResourceGroup=a,this.ResourceConsumption=l,this.BaseQuantity=h,this.Suppliers=c,this.UsageRatio=u,this.type=1060000209}};e.IfcConstructionProductResource=class extends vr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ResourceIdentifier=n,this.ResourceGroup=a,this.ResourceConsumption=l,this.BaseQuantity=h,this.type=488727124}};e.IfcCooledBeamType=class extends Cr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=335055490}};e.IfcCoolingTowerType=class extends Cr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2954562838}};e.IfcCovering=class extends Jr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1973544240}};e.IfcCurtainWall=class extends Jr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=3495092785}};e.IfcDamperType=class extends Mr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3961806047}};e.IfcDiameterDimension=class extends Ir{constructor(e,t){super(e,t),this.Contents=t,this.type=4147604152}};e.IfcDiscreteAccessory=class extends br{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=1335981549}};class eo extends Rr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=2635815018}}e.IfcDiscreteAccessoryType=eo;e.IfcDistributionChamberElementType=class extends Pr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1599208980}};class to extends Tr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=2063403501}}e.IfcDistributionControlElementType=to;class so extends Dr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=1945004755}}e.IfcDistributionElement=so;class io extends so{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=3040386961}}e.IfcDistributionFlowElement=io;e.IfcDistributionPort=class extends kr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.FlowDirection=l,this.type=3041715199}};e.IfcDoor=class extends Jr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.OverallHeight=h,this.OverallWidth=c,this.type=395920057}};e.IfcDuctFittingType=class extends Br{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=869906466}};e.IfcDuctSegmentType=class extends Lr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3760055223}};e.IfcDuctSilencerType=class extends Gr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2030761528}};class ro extends wr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.FeatureLength=h,this.type=855621170}}e.IfcEdgeFeature=ro;e.IfcElectricApplianceType=class extends Hr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=663422040}};e.IfcElectricFlowStorageDeviceType=class extends Ur{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3277789161}};e.IfcElectricGeneratorType=class extends Cr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1534661035}};e.IfcElectricHeaterType=class extends Hr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1365060375}};e.IfcElectricMotorType=class extends Cr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1217240411}};e.IfcElectricTimeControlType=class extends Mr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=712377611}};e.IfcElectricalCircuit=class extends Yr{constructor(e,t,s,i,r,o){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.type=1634875225}};e.IfcElectricalElement=class extends Dr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=857184966}};e.IfcEnergyConversionDevice=class extends io{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=1658829314}};e.IfcFanType=class extends Fr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=346874300}};e.IfcFilterType=class extends Gr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1810631287}};e.IfcFireSuppressionTerminalType=class extends Hr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=4222183408}};class oo extends io{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=2058353004}}e.IfcFlowController=oo;e.IfcFlowFitting=class extends io{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=4278956645}};e.IfcFlowInstrumentType=class extends to{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=4037862832}};e.IfcFlowMovingDevice=class extends io{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=3132237377}};e.IfcFlowSegment=class extends io{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=987401354}};e.IfcFlowStorageDevice=class extends io{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=707683696}};e.IfcFlowTerminal=class extends io{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=2223149337}};e.IfcFlowTreatmentDevice=class extends io{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=3508470533}};e.IfcFooting=class extends Jr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=900683007}};e.IfcMember=class extends Jr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=1073191201}};e.IfcPile=class extends Jr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.ConstructionType=c,this.type=1687234759}};e.IfcPlate=class extends Jr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=3171933400}};e.IfcRailing=class extends Jr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2262370178}};e.IfcRamp=class extends Jr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.ShapeType=h,this.type=3024970846}};e.IfcRampFlight=class extends Jr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=3283111854}};e.IfcRationalBezierCurve=class extends qr{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.Degree=t,this.ControlPointsList=s,this.CurveForm=i,this.ClosedCurve=r,this.SelfIntersect=o,this.WeightsData=n,this.type=3055160366}};class no extends $r{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.SteelGrade=h,this.type=3027567501}}e.IfcReinforcingElement=no;e.IfcReinforcingMesh=class extends no{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f,m,g){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.SteelGrade=h,this.MeshLength=c,this.MeshWidth=u,this.LongitudinalBarNominalDiameter=A,this.TransverseBarNominalDiameter=p,this.LongitudinalBarCrossSectionArea=d,this.TransverseBarCrossSectionArea=f,this.LongitudinalBarSpacing=m,this.TransverseBarSpacing=g,this.type=2320036040}};e.IfcRoof=class extends Jr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.ShapeType=h,this.type=2016517767}};e.IfcRoundedEdgeFeature=class extends ro{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.FeatureLength=h,this.Radius=c,this.type=1376911519}};e.IfcSensorType=class extends to{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1783015770}};e.IfcSlab=class extends Jr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1529196076}};e.IfcStair=class extends Jr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.ShapeType=h,this.type=331165859}};e.IfcStairFlight=class extends Jr{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.NumberOfRiser=h,this.NumberOfTreads=c,this.RiserHeight=u,this.TreadLength=A,this.type=4252922144}};e.IfcStructuralAnalysisModel=class extends Yr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.PredefinedType=n,this.OrientationOf2DPlane=a,this.LoadedBy=l,this.HasResults=h,this.type=2515109513}};e.IfcTendon=class extends no{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f,m,g){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.SteelGrade=h,this.PredefinedType=c,this.NominalDiameter=u,this.CrossSectionArea=A,this.TensionForce=p,this.PreStress=d,this.FrictionCoefficient=f,this.AnchorageSlip=m,this.MinCurvatureRadius=g,this.type=3824725483}};e.IfcTendonAnchor=class extends no{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.SteelGrade=h,this.type=2347447852}};e.IfcVibrationIsolatorType=class extends eo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3313531582}};class ao extends Jr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=2391406946}}e.IfcWall=ao;e.IfcWallStandardCase=class extends ao{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=3512223829}};e.IfcWindow=class extends Jr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.OverallHeight=h,this.OverallWidth=c,this.type=3304561284}};e.IfcActuatorType=class extends to{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2874132201}};e.IfcAlarmType=class extends to{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3001207471}};e.IfcBeam=class extends Jr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=753842376}};e.IfcChamferEdgeFeature=class extends ro{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.FeatureLength=h,this.Width=c,this.Height=u,this.type=2454782716}};e.IfcControllerType=class extends to{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=578613899}};e.IfcDistributionChamberElement=class extends io{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=1052013943}};e.IfcDistributionControlElement=class extends so{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.ControlElementId=h,this.type=1062813311}};e.IfcElectricDistributionPoint=class extends oo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.DistributionPointFunction=h,this.UserDefinedFunction=c,this.type=3700593921}};e.IfcReinforcingBar=class extends no{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.SteelGrade=h,this.NominalDiameter=c,this.CrossSectionArea=u,this.BarLength=A,this.BarRole=p,this.BarSurface=d,this.type=979691226}}}(kv||(kv={})),function(e){e.IfcAbsorbedDoseMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcAccelerationMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcAmountOfSubstanceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcAngularVelocityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcArcIndex=class{constructor(e){this.value=e}};e.IfcAreaDensityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcAreaMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcBinary=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcBoolean=class{constructor(e){this.type=3,this.value="true"==e}};e.IfcBoxAlignment=class{constructor(e){this.value=e,this.type=1}};e.IfcCardinalPointReference=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcComplexNumber=class{constructor(e){this.value=e}};e.IfcCompoundPlaneAngleMeasure=class{constructor(e){this.value=e}};e.IfcContextDependentMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcCountMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcCurvatureMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcDate=class{constructor(e){this.value=e,this.type=1}};e.IfcDateTime=class{constructor(e){this.value=e,this.type=1}};e.IfcDayInMonthNumber=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcDayInWeekNumber=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcDescriptiveMeasure=class{constructor(e){this.value=e,this.type=1}};class t{constructor(e){this.type=4,this.value=parseFloat(e)}}e.IfcDimensionCount=t;e.IfcDoseEquivalentMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcDuration=class{constructor(e){this.value=e,this.type=1}};e.IfcDynamicViscosityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcElectricCapacitanceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcElectricChargeMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcElectricConductanceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcElectricCurrentMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcElectricResistanceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcElectricVoltageMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcEnergyMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcFontStyle=class{constructor(e){this.value=e,this.type=1}};e.IfcFontVariant=class{constructor(e){this.value=e,this.type=1}};e.IfcFontWeight=class{constructor(e){this.value=e,this.type=1}};e.IfcForceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcFrequencyMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcGloballyUniqueId=class{constructor(e){this.value=e,this.type=1}};e.IfcHeatFluxDensityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcHeatingValueMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcIdentifier=class{constructor(e){this.value=e,this.type=1}};e.IfcIlluminanceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcInductanceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcInteger=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcIntegerCountRateMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcIonConcentrationMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcIsothermalMoistureCapacityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcKinematicViscosityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcLabel=class{constructor(e){this.value=e,this.type=1}};e.IfcLanguageId=class{constructor(e){this.value=e,this.type=1}};e.IfcLengthMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcLineIndex=class{constructor(e){this.value=e}};e.IfcLinearForceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcLinearMomentMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcLinearStiffnessMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcLinearVelocityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcLogical=class{constructor(e){this.type=3,this.value="true"==e}};e.IfcLuminousFluxMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcLuminousIntensityDistributionMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcLuminousIntensityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMagneticFluxDensityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMagneticFluxMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMassDensityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMassFlowRateMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMassMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMassPerLengthMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcModulusOfElasticityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcModulusOfLinearSubgradeReactionMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcModulusOfRotationalSubgradeReactionMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcModulusOfSubgradeReactionMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMoistureDiffusivityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMolecularWeightMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMomentOfInertiaMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMonetaryMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMonthInYearNumber=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcNonNegativeLengthMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcNormalisedRatioMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcNumericMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcPHMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcParameterValue=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcPlanarForceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcPlaneAngleMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcPositiveInteger=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcPositiveLengthMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcPositivePlaneAngleMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcPositiveRatioMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcPowerMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcPresentableText=class{constructor(e){this.value=e,this.type=1}};e.IfcPressureMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcPropertySetDefinitionSet=class{constructor(e){this.value=e}};e.IfcRadioActivityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcRatioMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcReal=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcRotationalFrequencyMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcRotationalMassMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcRotationalStiffnessMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcSectionModulusMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcSectionalAreaIntegralMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcShearModulusMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcSolidAngleMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcSoundPowerLevelMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcSoundPowerMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcSoundPressureLevelMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcSoundPressureMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcSpecificHeatCapacityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcSpecularExponent=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcSpecularRoughness=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcTemperatureGradientMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcTemperatureRateOfChangeMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcText=class{constructor(e){this.value=e,this.type=1}};e.IfcTextAlignment=class{constructor(e){this.value=e,this.type=1}};e.IfcTextDecoration=class{constructor(e){this.value=e,this.type=1}};e.IfcTextFontName=class{constructor(e){this.value=e,this.type=1}};e.IfcTextTransformation=class{constructor(e){this.value=e,this.type=1}};e.IfcThermalAdmittanceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcThermalConductivityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcThermalExpansionCoefficientMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcThermalResistanceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcThermalTransmittanceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcThermodynamicTemperatureMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcTime=class{constructor(e){this.value=e,this.type=1}};e.IfcTimeMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcTimeStamp=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcTorqueMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcURIReference=class{constructor(e){this.value=e,this.type=1}};e.IfcVaporPermeabilityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcVolumeMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcVolumetricFlowRateMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcWarpingConstantMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcWarpingMomentMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};class s{}s.EMAIL={type:3,value:"EMAIL"},s.FAX={type:3,value:"FAX"},s.PHONE={type:3,value:"PHONE"},s.POST={type:3,value:"POST"},s.VERBAL={type:3,value:"VERBAL"},s.USERDEFINED={type:3,value:"USERDEFINED"},s.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcActionRequestTypeEnum=s;class i{}i.DEAD_LOAD_G={type:3,value:"DEAD_LOAD_G"},i.COMPLETION_G1={type:3,value:"COMPLETION_G1"},i.LIVE_LOAD_Q={type:3,value:"LIVE_LOAD_Q"},i.SNOW_S={type:3,value:"SNOW_S"},i.WIND_W={type:3,value:"WIND_W"},i.PRESTRESSING_P={type:3,value:"PRESTRESSING_P"},i.SETTLEMENT_U={type:3,value:"SETTLEMENT_U"},i.TEMPERATURE_T={type:3,value:"TEMPERATURE_T"},i.EARTHQUAKE_E={type:3,value:"EARTHQUAKE_E"},i.FIRE={type:3,value:"FIRE"},i.IMPULSE={type:3,value:"IMPULSE"},i.IMPACT={type:3,value:"IMPACT"},i.TRANSPORT={type:3,value:"TRANSPORT"},i.ERECTION={type:3,value:"ERECTION"},i.PROPPING={type:3,value:"PROPPING"},i.SYSTEM_IMPERFECTION={type:3,value:"SYSTEM_IMPERFECTION"},i.SHRINKAGE={type:3,value:"SHRINKAGE"},i.CREEP={type:3,value:"CREEP"},i.LACK_OF_FIT={type:3,value:"LACK_OF_FIT"},i.BUOYANCY={type:3,value:"BUOYANCY"},i.ICE={type:3,value:"ICE"},i.CURRENT={type:3,value:"CURRENT"},i.WAVE={type:3,value:"WAVE"},i.RAIN={type:3,value:"RAIN"},i.BRAKES={type:3,value:"BRAKES"},i.USERDEFINED={type:3,value:"USERDEFINED"},i.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcActionSourceTypeEnum=i;class r{}r.PERMANENT_G={type:3,value:"PERMANENT_G"},r.VARIABLE_Q={type:3,value:"VARIABLE_Q"},r.EXTRAORDINARY_A={type:3,value:"EXTRAORDINARY_A"},r.USERDEFINED={type:3,value:"USERDEFINED"},r.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcActionTypeEnum=r;class o{}o.ELECTRICACTUATOR={type:3,value:"ELECTRICACTUATOR"},o.HANDOPERATEDACTUATOR={type:3,value:"HANDOPERATEDACTUATOR"},o.HYDRAULICACTUATOR={type:3,value:"HYDRAULICACTUATOR"},o.PNEUMATICACTUATOR={type:3,value:"PNEUMATICACTUATOR"},o.THERMOSTATICACTUATOR={type:3,value:"THERMOSTATICACTUATOR"},o.USERDEFINED={type:3,value:"USERDEFINED"},o.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcActuatorTypeEnum=o;class n{}n.OFFICE={type:3,value:"OFFICE"},n.SITE={type:3,value:"SITE"},n.HOME={type:3,value:"HOME"},n.DISTRIBUTIONPOINT={type:3,value:"DISTRIBUTIONPOINT"},n.USERDEFINED={type:3,value:"USERDEFINED"},e.IfcAddressTypeEnum=n;class a{}a.CONSTANTFLOW={type:3,value:"CONSTANTFLOW"},a.VARIABLEFLOWPRESSUREDEPENDANT={type:3,value:"VARIABLEFLOWPRESSUREDEPENDANT"},a.VARIABLEFLOWPRESSUREINDEPENDANT={type:3,value:"VARIABLEFLOWPRESSUREINDEPENDANT"},a.USERDEFINED={type:3,value:"USERDEFINED"},a.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcAirTerminalBoxTypeEnum=a;class l{}l.DIFFUSER={type:3,value:"DIFFUSER"},l.GRILLE={type:3,value:"GRILLE"},l.LOUVRE={type:3,value:"LOUVRE"},l.REGISTER={type:3,value:"REGISTER"},l.USERDEFINED={type:3,value:"USERDEFINED"},l.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcAirTerminalTypeEnum=l;class h{}h.FIXEDPLATECOUNTERFLOWEXCHANGER={type:3,value:"FIXEDPLATECOUNTERFLOWEXCHANGER"},h.FIXEDPLATECROSSFLOWEXCHANGER={type:3,value:"FIXEDPLATECROSSFLOWEXCHANGER"},h.FIXEDPLATEPARALLELFLOWEXCHANGER={type:3,value:"FIXEDPLATEPARALLELFLOWEXCHANGER"},h.ROTARYWHEEL={type:3,value:"ROTARYWHEEL"},h.RUNAROUNDCOILLOOP={type:3,value:"RUNAROUNDCOILLOOP"},h.HEATPIPE={type:3,value:"HEATPIPE"},h.TWINTOWERENTHALPYRECOVERYLOOPS={type:3,value:"TWINTOWERENTHALPYRECOVERYLOOPS"},h.THERMOSIPHONSEALEDTUBEHEATEXCHANGERS={type:3,value:"THERMOSIPHONSEALEDTUBEHEATEXCHANGERS"},h.THERMOSIPHONCOILTYPEHEATEXCHANGERS={type:3,value:"THERMOSIPHONCOILTYPEHEATEXCHANGERS"},h.USERDEFINED={type:3,value:"USERDEFINED"},h.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcAirToAirHeatRecoveryTypeEnum=h;class c{}c.BELL={type:3,value:"BELL"},c.BREAKGLASSBUTTON={type:3,value:"BREAKGLASSBUTTON"},c.LIGHT={type:3,value:"LIGHT"},c.MANUALPULLBOX={type:3,value:"MANUALPULLBOX"},c.SIREN={type:3,value:"SIREN"},c.WHISTLE={type:3,value:"WHISTLE"},c.USERDEFINED={type:3,value:"USERDEFINED"},c.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcAlarmTypeEnum=c;class u{}u.IN_PLANE_LOADING_2D={type:3,value:"IN_PLANE_LOADING_2D"},u.OUT_PLANE_LOADING_2D={type:3,value:"OUT_PLANE_LOADING_2D"},u.LOADING_3D={type:3,value:"LOADING_3D"},u.USERDEFINED={type:3,value:"USERDEFINED"},u.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcAnalysisModelTypeEnum=u;class A{}A.FIRST_ORDER_THEORY={type:3,value:"FIRST_ORDER_THEORY"},A.SECOND_ORDER_THEORY={type:3,value:"SECOND_ORDER_THEORY"},A.THIRD_ORDER_THEORY={type:3,value:"THIRD_ORDER_THEORY"},A.FULL_NONLINEAR_THEORY={type:3,value:"FULL_NONLINEAR_THEORY"},A.USERDEFINED={type:3,value:"USERDEFINED"},A.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcAnalysisTheoryTypeEnum=A;class p{}p.ADD={type:3,value:"ADD"},p.DIVIDE={type:3,value:"DIVIDE"},p.MULTIPLY={type:3,value:"MULTIPLY"},p.SUBTRACT={type:3,value:"SUBTRACT"},e.IfcArithmeticOperatorEnum=p;class d{}d.SITE={type:3,value:"SITE"},d.FACTORY={type:3,value:"FACTORY"},d.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcAssemblyPlaceEnum=d;class f{}f.AMPLIFIER={type:3,value:"AMPLIFIER"},f.CAMERA={type:3,value:"CAMERA"},f.DISPLAY={type:3,value:"DISPLAY"},f.MICROPHONE={type:3,value:"MICROPHONE"},f.PLAYER={type:3,value:"PLAYER"},f.PROJECTOR={type:3,value:"PROJECTOR"},f.RECEIVER={type:3,value:"RECEIVER"},f.SPEAKER={type:3,value:"SPEAKER"},f.SWITCHER={type:3,value:"SWITCHER"},f.TELEPHONE={type:3,value:"TELEPHONE"},f.TUNER={type:3,value:"TUNER"},f.USERDEFINED={type:3,value:"USERDEFINED"},f.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcAudioVisualApplianceTypeEnum=f;class m{}m.POLYLINE_FORM={type:3,value:"POLYLINE_FORM"},m.CIRCULAR_ARC={type:3,value:"CIRCULAR_ARC"},m.ELLIPTIC_ARC={type:3,value:"ELLIPTIC_ARC"},m.PARABOLIC_ARC={type:3,value:"PARABOLIC_ARC"},m.HYPERBOLIC_ARC={type:3,value:"HYPERBOLIC_ARC"},m.UNSPECIFIED={type:3,value:"UNSPECIFIED"},e.IfcBSplineCurveForm=m;class g{}g.PLANE_SURF={type:3,value:"PLANE_SURF"},g.CYLINDRICAL_SURF={type:3,value:"CYLINDRICAL_SURF"},g.CONICAL_SURF={type:3,value:"CONICAL_SURF"},g.SPHERICAL_SURF={type:3,value:"SPHERICAL_SURF"},g.TOROIDAL_SURF={type:3,value:"TOROIDAL_SURF"},g.SURF_OF_REVOLUTION={type:3,value:"SURF_OF_REVOLUTION"},g.RULED_SURF={type:3,value:"RULED_SURF"},g.GENERALISED_CONE={type:3,value:"GENERALISED_CONE"},g.QUADRIC_SURF={type:3,value:"QUADRIC_SURF"},g.SURF_OF_LINEAR_EXTRUSION={type:3,value:"SURF_OF_LINEAR_EXTRUSION"},g.UNSPECIFIED={type:3,value:"UNSPECIFIED"},e.IfcBSplineSurfaceForm=g;class y{}y.BEAM={type:3,value:"BEAM"},y.JOIST={type:3,value:"JOIST"},y.HOLLOWCORE={type:3,value:"HOLLOWCORE"},y.LINTEL={type:3,value:"LINTEL"},y.SPANDREL={type:3,value:"SPANDREL"},y.T_BEAM={type:3,value:"T_BEAM"},y.USERDEFINED={type:3,value:"USERDEFINED"},y.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcBeamTypeEnum=y;class E{}E.GREATERTHAN={type:3,value:"GREATERTHAN"},E.GREATERTHANOREQUALTO={type:3,value:"GREATERTHANOREQUALTO"},E.LESSTHAN={type:3,value:"LESSTHAN"},E.LESSTHANOREQUALTO={type:3,value:"LESSTHANOREQUALTO"},E.EQUALTO={type:3,value:"EQUALTO"},E.NOTEQUALTO={type:3,value:"NOTEQUALTO"},E.INCLUDES={type:3,value:"INCLUDES"},E.NOTINCLUDES={type:3,value:"NOTINCLUDES"},E.INCLUDEDIN={type:3,value:"INCLUDEDIN"},E.NOTINCLUDEDIN={type:3,value:"NOTINCLUDEDIN"},e.IfcBenchmarkEnum=E;class v{}v.WATER={type:3,value:"WATER"},v.STEAM={type:3,value:"STEAM"},v.USERDEFINED={type:3,value:"USERDEFINED"},v.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcBoilerTypeEnum=v;class _{}_.UNION={type:3,value:"UNION"},_.INTERSECTION={type:3,value:"INTERSECTION"},_.DIFFERENCE={type:3,value:"DIFFERENCE"},e.IfcBooleanOperator=_;class I{}I.INSULATION={type:3,value:"INSULATION"},I.PRECASTPANEL={type:3,value:"PRECASTPANEL"},I.USERDEFINED={type:3,value:"USERDEFINED"},I.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcBuildingElementPartTypeEnum=I;class T{}T.COMPLEX={type:3,value:"COMPLEX"},T.ELEMENT={type:3,value:"ELEMENT"},T.PARTIAL={type:3,value:"PARTIAL"},T.PROVISIONFORVOID={type:3,value:"PROVISIONFORVOID"},T.PROVISIONFORSPACE={type:3,value:"PROVISIONFORSPACE"},T.USERDEFINED={type:3,value:"USERDEFINED"},T.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcBuildingElementProxyTypeEnum=T;class P{}P.FENESTRATION={type:3,value:"FENESTRATION"},P.FOUNDATION={type:3,value:"FOUNDATION"},P.LOADBEARING={type:3,value:"LOADBEARING"},P.OUTERSHELL={type:3,value:"OUTERSHELL"},P.SHADING={type:3,value:"SHADING"},P.TRANSPORT={type:3,value:"TRANSPORT"},P.USERDEFINED={type:3,value:"USERDEFINED"},P.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcBuildingSystemTypeEnum=P;class D{}D.USERDEFINED={type:3,value:"USERDEFINED"},D.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcBurnerTypeEnum=D;class b{}b.BEND={type:3,value:"BEND"},b.CROSS={type:3,value:"CROSS"},b.REDUCER={type:3,value:"REDUCER"},b.TEE={type:3,value:"TEE"},b.USERDEFINED={type:3,value:"USERDEFINED"},b.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCableCarrierFittingTypeEnum=b;class R{}R.CABLELADDERSEGMENT={type:3,value:"CABLELADDERSEGMENT"},R.CABLETRAYSEGMENT={type:3,value:"CABLETRAYSEGMENT"},R.CABLETRUNKINGSEGMENT={type:3,value:"CABLETRUNKINGSEGMENT"},R.CONDUITSEGMENT={type:3,value:"CONDUITSEGMENT"},R.USERDEFINED={type:3,value:"USERDEFINED"},R.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCableCarrierSegmentTypeEnum=R;class C{}C.CONNECTOR={type:3,value:"CONNECTOR"},C.ENTRY={type:3,value:"ENTRY"},C.EXIT={type:3,value:"EXIT"},C.JUNCTION={type:3,value:"JUNCTION"},C.TRANSITION={type:3,value:"TRANSITION"},C.USERDEFINED={type:3,value:"USERDEFINED"},C.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCableFittingTypeEnum=C;class x{}x.BUSBARSEGMENT={type:3,value:"BUSBARSEGMENT"},x.CABLESEGMENT={type:3,value:"CABLESEGMENT"},x.CONDUCTORSEGMENT={type:3,value:"CONDUCTORSEGMENT"},x.CORESEGMENT={type:3,value:"CORESEGMENT"},x.USERDEFINED={type:3,value:"USERDEFINED"},x.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCableSegmentTypeEnum=x;class N{}N.NOCHANGE={type:3,value:"NOCHANGE"},N.MODIFIED={type:3,value:"MODIFIED"},N.ADDED={type:3,value:"ADDED"},N.DELETED={type:3,value:"DELETED"},N.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcChangeActionEnum=N;class O{}O.AIRCOOLED={type:3,value:"AIRCOOLED"},O.WATERCOOLED={type:3,value:"WATERCOOLED"},O.HEATRECOVERY={type:3,value:"HEATRECOVERY"},O.USERDEFINED={type:3,value:"USERDEFINED"},O.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcChillerTypeEnum=O;class S{}S.USERDEFINED={type:3,value:"USERDEFINED"},S.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcChimneyTypeEnum=S;class w{}w.DXCOOLINGCOIL={type:3,value:"DXCOOLINGCOIL"},w.ELECTRICHEATINGCOIL={type:3,value:"ELECTRICHEATINGCOIL"},w.GASHEATINGCOIL={type:3,value:"GASHEATINGCOIL"},w.HYDRONICCOIL={type:3,value:"HYDRONICCOIL"},w.STEAMHEATINGCOIL={type:3,value:"STEAMHEATINGCOIL"},w.WATERCOOLINGCOIL={type:3,value:"WATERCOOLINGCOIL"},w.WATERHEATINGCOIL={type:3,value:"WATERHEATINGCOIL"},w.USERDEFINED={type:3,value:"USERDEFINED"},w.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCoilTypeEnum=w;class M{}M.COLUMN={type:3,value:"COLUMN"},M.PILASTER={type:3,value:"PILASTER"},M.USERDEFINED={type:3,value:"USERDEFINED"},M.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcColumnTypeEnum=M;class B{}B.ANTENNA={type:3,value:"ANTENNA"},B.COMPUTER={type:3,value:"COMPUTER"},B.FAX={type:3,value:"FAX"},B.GATEWAY={type:3,value:"GATEWAY"},B.MODEM={type:3,value:"MODEM"},B.NETWORKAPPLIANCE={type:3,value:"NETWORKAPPLIANCE"},B.NETWORKBRIDGE={type:3,value:"NETWORKBRIDGE"},B.NETWORKHUB={type:3,value:"NETWORKHUB"},B.PRINTER={type:3,value:"PRINTER"},B.REPEATER={type:3,value:"REPEATER"},B.ROUTER={type:3,value:"ROUTER"},B.SCANNER={type:3,value:"SCANNER"},B.USERDEFINED={type:3,value:"USERDEFINED"},B.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCommunicationsApplianceTypeEnum=B;class F{}F.P_COMPLEX={type:3,value:"P_COMPLEX"},F.Q_COMPLEX={type:3,value:"Q_COMPLEX"},e.IfcComplexPropertyTemplateTypeEnum=F;class L{}L.DYNAMIC={type:3,value:"DYNAMIC"},L.RECIPROCATING={type:3,value:"RECIPROCATING"},L.ROTARY={type:3,value:"ROTARY"},L.SCROLL={type:3,value:"SCROLL"},L.TROCHOIDAL={type:3,value:"TROCHOIDAL"},L.SINGLESTAGE={type:3,value:"SINGLESTAGE"},L.BOOSTER={type:3,value:"BOOSTER"},L.OPENTYPE={type:3,value:"OPENTYPE"},L.HERMETIC={type:3,value:"HERMETIC"},L.SEMIHERMETIC={type:3,value:"SEMIHERMETIC"},L.WELDEDSHELLHERMETIC={type:3,value:"WELDEDSHELLHERMETIC"},L.ROLLINGPISTON={type:3,value:"ROLLINGPISTON"},L.ROTARYVANE={type:3,value:"ROTARYVANE"},L.SINGLESCREW={type:3,value:"SINGLESCREW"},L.TWINSCREW={type:3,value:"TWINSCREW"},L.USERDEFINED={type:3,value:"USERDEFINED"},L.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCompressorTypeEnum=L;class U{}U.AIRCOOLED={type:3,value:"AIRCOOLED"},U.EVAPORATIVECOOLED={type:3,value:"EVAPORATIVECOOLED"},U.WATERCOOLED={type:3,value:"WATERCOOLED"},U.WATERCOOLEDBRAZEDPLATE={type:3,value:"WATERCOOLEDBRAZEDPLATE"},U.WATERCOOLEDSHELLCOIL={type:3,value:"WATERCOOLEDSHELLCOIL"},U.WATERCOOLEDSHELLTUBE={type:3,value:"WATERCOOLEDSHELLTUBE"},U.WATERCOOLEDTUBEINTUBE={type:3,value:"WATERCOOLEDTUBEINTUBE"},U.USERDEFINED={type:3,value:"USERDEFINED"},U.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCondenserTypeEnum=U;class H{}H.ATPATH={type:3,value:"ATPATH"},H.ATSTART={type:3,value:"ATSTART"},H.ATEND={type:3,value:"ATEND"},H.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcConnectionTypeEnum=H;class G{}G.HARD={type:3,value:"HARD"},G.SOFT={type:3,value:"SOFT"},G.ADVISORY={type:3,value:"ADVISORY"},G.USERDEFINED={type:3,value:"USERDEFINED"},G.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcConstraintEnum=G;class V{}V.DEMOLISHING={type:3,value:"DEMOLISHING"},V.EARTHMOVING={type:3,value:"EARTHMOVING"},V.ERECTING={type:3,value:"ERECTING"},V.HEATING={type:3,value:"HEATING"},V.LIGHTING={type:3,value:"LIGHTING"},V.PAVING={type:3,value:"PAVING"},V.PUMPING={type:3,value:"PUMPING"},V.TRANSPORTING={type:3,value:"TRANSPORTING"},V.USERDEFINED={type:3,value:"USERDEFINED"},V.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcConstructionEquipmentResourceTypeEnum=V;class k{}k.AGGREGATES={type:3,value:"AGGREGATES"},k.CONCRETE={type:3,value:"CONCRETE"},k.DRYWALL={type:3,value:"DRYWALL"},k.FUEL={type:3,value:"FUEL"},k.GYPSUM={type:3,value:"GYPSUM"},k.MASONRY={type:3,value:"MASONRY"},k.METAL={type:3,value:"METAL"},k.PLASTIC={type:3,value:"PLASTIC"},k.WOOD={type:3,value:"WOOD"},k.NOTDEFINED={type:3,value:"NOTDEFINED"},k.USERDEFINED={type:3,value:"USERDEFINED"},e.IfcConstructionMaterialResourceTypeEnum=k;class j{}j.ASSEMBLY={type:3,value:"ASSEMBLY"},j.FORMWORK={type:3,value:"FORMWORK"},j.USERDEFINED={type:3,value:"USERDEFINED"},j.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcConstructionProductResourceTypeEnum=j;class Q{}Q.FLOATING={type:3,value:"FLOATING"},Q.PROGRAMMABLE={type:3,value:"PROGRAMMABLE"},Q.PROPORTIONAL={type:3,value:"PROPORTIONAL"},Q.MULTIPOSITION={type:3,value:"MULTIPOSITION"},Q.TWOPOSITION={type:3,value:"TWOPOSITION"},Q.USERDEFINED={type:3,value:"USERDEFINED"},Q.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcControllerTypeEnum=Q;class W{}W.ACTIVE={type:3,value:"ACTIVE"},W.PASSIVE={type:3,value:"PASSIVE"},W.USERDEFINED={type:3,value:"USERDEFINED"},W.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCooledBeamTypeEnum=W;class z{}z.NATURALDRAFT={type:3,value:"NATURALDRAFT"},z.MECHANICALINDUCEDDRAFT={type:3,value:"MECHANICALINDUCEDDRAFT"},z.MECHANICALFORCEDDRAFT={type:3,value:"MECHANICALFORCEDDRAFT"},z.USERDEFINED={type:3,value:"USERDEFINED"},z.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCoolingTowerTypeEnum=z;class K{}K.USERDEFINED={type:3,value:"USERDEFINED"},K.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCostItemTypeEnum=K;class Y{}Y.BUDGET={type:3,value:"BUDGET"},Y.COSTPLAN={type:3,value:"COSTPLAN"},Y.ESTIMATE={type:3,value:"ESTIMATE"},Y.TENDER={type:3,value:"TENDER"},Y.PRICEDBILLOFQUANTITIES={type:3,value:"PRICEDBILLOFQUANTITIES"},Y.UNPRICEDBILLOFQUANTITIES={type:3,value:"UNPRICEDBILLOFQUANTITIES"},Y.SCHEDULEOFRATES={type:3,value:"SCHEDULEOFRATES"},Y.USERDEFINED={type:3,value:"USERDEFINED"},Y.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCostScheduleTypeEnum=Y;class X{}X.CEILING={type:3,value:"CEILING"},X.FLOORING={type:3,value:"FLOORING"},X.CLADDING={type:3,value:"CLADDING"},X.ROOFING={type:3,value:"ROOFING"},X.MOLDING={type:3,value:"MOLDING"},X.SKIRTINGBOARD={type:3,value:"SKIRTINGBOARD"},X.INSULATION={type:3,value:"INSULATION"},X.MEMBRANE={type:3,value:"MEMBRANE"},X.SLEEVING={type:3,value:"SLEEVING"},X.WRAPPING={type:3,value:"WRAPPING"},X.USERDEFINED={type:3,value:"USERDEFINED"},X.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCoveringTypeEnum=X;class Z{}Z.OFFICE={type:3,value:"OFFICE"},Z.SITE={type:3,value:"SITE"},Z.USERDEFINED={type:3,value:"USERDEFINED"},Z.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCrewResourceTypeEnum=Z;class q{}q.USERDEFINED={type:3,value:"USERDEFINED"},q.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCurtainWallTypeEnum=q;class J{}J.LINEAR={type:3,value:"LINEAR"},J.LOG_LINEAR={type:3,value:"LOG_LINEAR"},J.LOG_LOG={type:3,value:"LOG_LOG"},J.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCurveInterpolationEnum=J;class ${}$.BACKDRAFTDAMPER={type:3,value:"BACKDRAFTDAMPER"},$.BALANCINGDAMPER={type:3,value:"BALANCINGDAMPER"},$.BLASTDAMPER={type:3,value:"BLASTDAMPER"},$.CONTROLDAMPER={type:3,value:"CONTROLDAMPER"},$.FIREDAMPER={type:3,value:"FIREDAMPER"},$.FIRESMOKEDAMPER={type:3,value:"FIRESMOKEDAMPER"},$.FUMEHOODEXHAUST={type:3,value:"FUMEHOODEXHAUST"},$.GRAVITYDAMPER={type:3,value:"GRAVITYDAMPER"},$.GRAVITYRELIEFDAMPER={type:3,value:"GRAVITYRELIEFDAMPER"},$.RELIEFDAMPER={type:3,value:"RELIEFDAMPER"},$.SMOKEDAMPER={type:3,value:"SMOKEDAMPER"},$.USERDEFINED={type:3,value:"USERDEFINED"},$.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDamperTypeEnum=$;class ee{}ee.MEASURED={type:3,value:"MEASURED"},ee.PREDICTED={type:3,value:"PREDICTED"},ee.SIMULATED={type:3,value:"SIMULATED"},ee.USERDEFINED={type:3,value:"USERDEFINED"},ee.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDataOriginEnum=ee;class te{}te.ANGULARVELOCITYUNIT={type:3,value:"ANGULARVELOCITYUNIT"},te.AREADENSITYUNIT={type:3,value:"AREADENSITYUNIT"},te.COMPOUNDPLANEANGLEUNIT={type:3,value:"COMPOUNDPLANEANGLEUNIT"},te.DYNAMICVISCOSITYUNIT={type:3,value:"DYNAMICVISCOSITYUNIT"},te.HEATFLUXDENSITYUNIT={type:3,value:"HEATFLUXDENSITYUNIT"},te.INTEGERCOUNTRATEUNIT={type:3,value:"INTEGERCOUNTRATEUNIT"},te.ISOTHERMALMOISTURECAPACITYUNIT={type:3,value:"ISOTHERMALMOISTURECAPACITYUNIT"},te.KINEMATICVISCOSITYUNIT={type:3,value:"KINEMATICVISCOSITYUNIT"},te.LINEARVELOCITYUNIT={type:3,value:"LINEARVELOCITYUNIT"},te.MASSDENSITYUNIT={type:3,value:"MASSDENSITYUNIT"},te.MASSFLOWRATEUNIT={type:3,value:"MASSFLOWRATEUNIT"},te.MOISTUREDIFFUSIVITYUNIT={type:3,value:"MOISTUREDIFFUSIVITYUNIT"},te.MOLECULARWEIGHTUNIT={type:3,value:"MOLECULARWEIGHTUNIT"},te.SPECIFICHEATCAPACITYUNIT={type:3,value:"SPECIFICHEATCAPACITYUNIT"},te.THERMALADMITTANCEUNIT={type:3,value:"THERMALADMITTANCEUNIT"},te.THERMALCONDUCTANCEUNIT={type:3,value:"THERMALCONDUCTANCEUNIT"},te.THERMALRESISTANCEUNIT={type:3,value:"THERMALRESISTANCEUNIT"},te.THERMALTRANSMITTANCEUNIT={type:3,value:"THERMALTRANSMITTANCEUNIT"},te.VAPORPERMEABILITYUNIT={type:3,value:"VAPORPERMEABILITYUNIT"},te.VOLUMETRICFLOWRATEUNIT={type:3,value:"VOLUMETRICFLOWRATEUNIT"},te.ROTATIONALFREQUENCYUNIT={type:3,value:"ROTATIONALFREQUENCYUNIT"},te.TORQUEUNIT={type:3,value:"TORQUEUNIT"},te.MOMENTOFINERTIAUNIT={type:3,value:"MOMENTOFINERTIAUNIT"},te.LINEARMOMENTUNIT={type:3,value:"LINEARMOMENTUNIT"},te.LINEARFORCEUNIT={type:3,value:"LINEARFORCEUNIT"},te.PLANARFORCEUNIT={type:3,value:"PLANARFORCEUNIT"},te.MODULUSOFELASTICITYUNIT={type:3,value:"MODULUSOFELASTICITYUNIT"},te.SHEARMODULUSUNIT={type:3,value:"SHEARMODULUSUNIT"},te.LINEARSTIFFNESSUNIT={type:3,value:"LINEARSTIFFNESSUNIT"},te.ROTATIONALSTIFFNESSUNIT={type:3,value:"ROTATIONALSTIFFNESSUNIT"},te.MODULUSOFSUBGRADEREACTIONUNIT={type:3,value:"MODULUSOFSUBGRADEREACTIONUNIT"},te.ACCELERATIONUNIT={type:3,value:"ACCELERATIONUNIT"},te.CURVATUREUNIT={type:3,value:"CURVATUREUNIT"},te.HEATINGVALUEUNIT={type:3,value:"HEATINGVALUEUNIT"},te.IONCONCENTRATIONUNIT={type:3,value:"IONCONCENTRATIONUNIT"},te.LUMINOUSINTENSITYDISTRIBUTIONUNIT={type:3,value:"LUMINOUSINTENSITYDISTRIBUTIONUNIT"},te.MASSPERLENGTHUNIT={type:3,value:"MASSPERLENGTHUNIT"},te.MODULUSOFLINEARSUBGRADEREACTIONUNIT={type:3,value:"MODULUSOFLINEARSUBGRADEREACTIONUNIT"},te.MODULUSOFROTATIONALSUBGRADEREACTIONUNIT={type:3,value:"MODULUSOFROTATIONALSUBGRADEREACTIONUNIT"},te.PHUNIT={type:3,value:"PHUNIT"},te.ROTATIONALMASSUNIT={type:3,value:"ROTATIONALMASSUNIT"},te.SECTIONAREAINTEGRALUNIT={type:3,value:"SECTIONAREAINTEGRALUNIT"},te.SECTIONMODULUSUNIT={type:3,value:"SECTIONMODULUSUNIT"},te.SOUNDPOWERLEVELUNIT={type:3,value:"SOUNDPOWERLEVELUNIT"},te.SOUNDPOWERUNIT={type:3,value:"SOUNDPOWERUNIT"},te.SOUNDPRESSURELEVELUNIT={type:3,value:"SOUNDPRESSURELEVELUNIT"},te.SOUNDPRESSUREUNIT={type:3,value:"SOUNDPRESSUREUNIT"},te.TEMPERATUREGRADIENTUNIT={type:3,value:"TEMPERATUREGRADIENTUNIT"},te.TEMPERATURERATEOFCHANGEUNIT={type:3,value:"TEMPERATURERATEOFCHANGEUNIT"},te.THERMALEXPANSIONCOEFFICIENTUNIT={type:3,value:"THERMALEXPANSIONCOEFFICIENTUNIT"},te.WARPINGCONSTANTUNIT={type:3,value:"WARPINGCONSTANTUNIT"},te.WARPINGMOMENTUNIT={type:3,value:"WARPINGMOMENTUNIT"},te.USERDEFINED={type:3,value:"USERDEFINED"},e.IfcDerivedUnitEnum=te;class se{}se.POSITIVE={type:3,value:"POSITIVE"},se.NEGATIVE={type:3,value:"NEGATIVE"},e.IfcDirectionSenseEnum=se;class ie{}ie.ANCHORPLATE={type:3,value:"ANCHORPLATE"},ie.BRACKET={type:3,value:"BRACKET"},ie.SHOE={type:3,value:"SHOE"},ie.USERDEFINED={type:3,value:"USERDEFINED"},ie.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDiscreteAccessoryTypeEnum=ie;class re{}re.FORMEDDUCT={type:3,value:"FORMEDDUCT"},re.INSPECTIONCHAMBER={type:3,value:"INSPECTIONCHAMBER"},re.INSPECTIONPIT={type:3,value:"INSPECTIONPIT"},re.MANHOLE={type:3,value:"MANHOLE"},re.METERCHAMBER={type:3,value:"METERCHAMBER"},re.SUMP={type:3,value:"SUMP"},re.TRENCH={type:3,value:"TRENCH"},re.VALVECHAMBER={type:3,value:"VALVECHAMBER"},re.USERDEFINED={type:3,value:"USERDEFINED"},re.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDistributionChamberElementTypeEnum=re;class oe{}oe.CABLE={type:3,value:"CABLE"},oe.CABLECARRIER={type:3,value:"CABLECARRIER"},oe.DUCT={type:3,value:"DUCT"},oe.PIPE={type:3,value:"PIPE"},oe.USERDEFINED={type:3,value:"USERDEFINED"},oe.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDistributionPortTypeEnum=oe;class ne{}ne.AIRCONDITIONING={type:3,value:"AIRCONDITIONING"},ne.AUDIOVISUAL={type:3,value:"AUDIOVISUAL"},ne.CHEMICAL={type:3,value:"CHEMICAL"},ne.CHILLEDWATER={type:3,value:"CHILLEDWATER"},ne.COMMUNICATION={type:3,value:"COMMUNICATION"},ne.COMPRESSEDAIR={type:3,value:"COMPRESSEDAIR"},ne.CONDENSERWATER={type:3,value:"CONDENSERWATER"},ne.CONTROL={type:3,value:"CONTROL"},ne.CONVEYING={type:3,value:"CONVEYING"},ne.DATA={type:3,value:"DATA"},ne.DISPOSAL={type:3,value:"DISPOSAL"},ne.DOMESTICCOLDWATER={type:3,value:"DOMESTICCOLDWATER"},ne.DOMESTICHOTWATER={type:3,value:"DOMESTICHOTWATER"},ne.DRAINAGE={type:3,value:"DRAINAGE"},ne.EARTHING={type:3,value:"EARTHING"},ne.ELECTRICAL={type:3,value:"ELECTRICAL"},ne.ELECTROACOUSTIC={type:3,value:"ELECTROACOUSTIC"},ne.EXHAUST={type:3,value:"EXHAUST"},ne.FIREPROTECTION={type:3,value:"FIREPROTECTION"},ne.FUEL={type:3,value:"FUEL"},ne.GAS={type:3,value:"GAS"},ne.HAZARDOUS={type:3,value:"HAZARDOUS"},ne.HEATING={type:3,value:"HEATING"},ne.LIGHTING={type:3,value:"LIGHTING"},ne.LIGHTNINGPROTECTION={type:3,value:"LIGHTNINGPROTECTION"},ne.MUNICIPALSOLIDWASTE={type:3,value:"MUNICIPALSOLIDWASTE"},ne.OIL={type:3,value:"OIL"},ne.OPERATIONAL={type:3,value:"OPERATIONAL"},ne.POWERGENERATION={type:3,value:"POWERGENERATION"},ne.RAINWATER={type:3,value:"RAINWATER"},ne.REFRIGERATION={type:3,value:"REFRIGERATION"},ne.SECURITY={type:3,value:"SECURITY"},ne.SEWAGE={type:3,value:"SEWAGE"},ne.SIGNAL={type:3,value:"SIGNAL"},ne.STORMWATER={type:3,value:"STORMWATER"},ne.TELEPHONE={type:3,value:"TELEPHONE"},ne.TV={type:3,value:"TV"},ne.VACUUM={type:3,value:"VACUUM"},ne.VENT={type:3,value:"VENT"},ne.VENTILATION={type:3,value:"VENTILATION"},ne.WASTEWATER={type:3,value:"WASTEWATER"},ne.WATERSUPPLY={type:3,value:"WATERSUPPLY"},ne.USERDEFINED={type:3,value:"USERDEFINED"},ne.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDistributionSystemEnum=ne;class ae{}ae.PUBLIC={type:3,value:"PUBLIC"},ae.RESTRICTED={type:3,value:"RESTRICTED"},ae.CONFIDENTIAL={type:3,value:"CONFIDENTIAL"},ae.PERSONAL={type:3,value:"PERSONAL"},ae.USERDEFINED={type:3,value:"USERDEFINED"},ae.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDocumentConfidentialityEnum=ae;class le{}le.DRAFT={type:3,value:"DRAFT"},le.FINALDRAFT={type:3,value:"FINALDRAFT"},le.FINAL={type:3,value:"FINAL"},le.REVISION={type:3,value:"REVISION"},le.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDocumentStatusEnum=le;class he{}he.SWINGING={type:3,value:"SWINGING"},he.DOUBLE_ACTING={type:3,value:"DOUBLE_ACTING"},he.SLIDING={type:3,value:"SLIDING"},he.FOLDING={type:3,value:"FOLDING"},he.REVOLVING={type:3,value:"REVOLVING"},he.ROLLINGUP={type:3,value:"ROLLINGUP"},he.FIXEDPANEL={type:3,value:"FIXEDPANEL"},he.USERDEFINED={type:3,value:"USERDEFINED"},he.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDoorPanelOperationEnum=he;class ce{}ce.LEFT={type:3,value:"LEFT"},ce.MIDDLE={type:3,value:"MIDDLE"},ce.RIGHT={type:3,value:"RIGHT"},ce.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDoorPanelPositionEnum=ce;class ue{}ue.ALUMINIUM={type:3,value:"ALUMINIUM"},ue.HIGH_GRADE_STEEL={type:3,value:"HIGH_GRADE_STEEL"},ue.STEEL={type:3,value:"STEEL"},ue.WOOD={type:3,value:"WOOD"},ue.ALUMINIUM_WOOD={type:3,value:"ALUMINIUM_WOOD"},ue.ALUMINIUM_PLASTIC={type:3,value:"ALUMINIUM_PLASTIC"},ue.PLASTIC={type:3,value:"PLASTIC"},ue.USERDEFINED={type:3,value:"USERDEFINED"},ue.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDoorStyleConstructionEnum=ue;class Ae{}Ae.SINGLE_SWING_LEFT={type:3,value:"SINGLE_SWING_LEFT"},Ae.SINGLE_SWING_RIGHT={type:3,value:"SINGLE_SWING_RIGHT"},Ae.DOUBLE_DOOR_SINGLE_SWING={type:3,value:"DOUBLE_DOOR_SINGLE_SWING"},Ae.DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_LEFT={type:3,value:"DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_LEFT"},Ae.DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_RIGHT={type:3,value:"DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_RIGHT"},Ae.DOUBLE_SWING_LEFT={type:3,value:"DOUBLE_SWING_LEFT"},Ae.DOUBLE_SWING_RIGHT={type:3,value:"DOUBLE_SWING_RIGHT"},Ae.DOUBLE_DOOR_DOUBLE_SWING={type:3,value:"DOUBLE_DOOR_DOUBLE_SWING"},Ae.SLIDING_TO_LEFT={type:3,value:"SLIDING_TO_LEFT"},Ae.SLIDING_TO_RIGHT={type:3,value:"SLIDING_TO_RIGHT"},Ae.DOUBLE_DOOR_SLIDING={type:3,value:"DOUBLE_DOOR_SLIDING"},Ae.FOLDING_TO_LEFT={type:3,value:"FOLDING_TO_LEFT"},Ae.FOLDING_TO_RIGHT={type:3,value:"FOLDING_TO_RIGHT"},Ae.DOUBLE_DOOR_FOLDING={type:3,value:"DOUBLE_DOOR_FOLDING"},Ae.REVOLVING={type:3,value:"REVOLVING"},Ae.ROLLINGUP={type:3,value:"ROLLINGUP"},Ae.USERDEFINED={type:3,value:"USERDEFINED"},Ae.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDoorStyleOperationEnum=Ae;class pe{}pe.DOOR={type:3,value:"DOOR"},pe.GATE={type:3,value:"GATE"},pe.TRAPDOOR={type:3,value:"TRAPDOOR"},pe.USERDEFINED={type:3,value:"USERDEFINED"},pe.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDoorTypeEnum=pe;class de{}de.SINGLE_SWING_LEFT={type:3,value:"SINGLE_SWING_LEFT"},de.SINGLE_SWING_RIGHT={type:3,value:"SINGLE_SWING_RIGHT"},de.DOUBLE_DOOR_SINGLE_SWING={type:3,value:"DOUBLE_DOOR_SINGLE_SWING"},de.DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_LEFT={type:3,value:"DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_LEFT"},de.DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_RIGHT={type:3,value:"DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_RIGHT"},de.DOUBLE_SWING_LEFT={type:3,value:"DOUBLE_SWING_LEFT"},de.DOUBLE_SWING_RIGHT={type:3,value:"DOUBLE_SWING_RIGHT"},de.DOUBLE_DOOR_DOUBLE_SWING={type:3,value:"DOUBLE_DOOR_DOUBLE_SWING"},de.SLIDING_TO_LEFT={type:3,value:"SLIDING_TO_LEFT"},de.SLIDING_TO_RIGHT={type:3,value:"SLIDING_TO_RIGHT"},de.DOUBLE_DOOR_SLIDING={type:3,value:"DOUBLE_DOOR_SLIDING"},de.FOLDING_TO_LEFT={type:3,value:"FOLDING_TO_LEFT"},de.FOLDING_TO_RIGHT={type:3,value:"FOLDING_TO_RIGHT"},de.DOUBLE_DOOR_FOLDING={type:3,value:"DOUBLE_DOOR_FOLDING"},de.REVOLVING={type:3,value:"REVOLVING"},de.ROLLINGUP={type:3,value:"ROLLINGUP"},de.SWING_FIXED_LEFT={type:3,value:"SWING_FIXED_LEFT"},de.SWING_FIXED_RIGHT={type:3,value:"SWING_FIXED_RIGHT"},de.USERDEFINED={type:3,value:"USERDEFINED"},de.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDoorTypeOperationEnum=de;class fe{}fe.BEND={type:3,value:"BEND"},fe.CONNECTOR={type:3,value:"CONNECTOR"},fe.ENTRY={type:3,value:"ENTRY"},fe.EXIT={type:3,value:"EXIT"},fe.JUNCTION={type:3,value:"JUNCTION"},fe.OBSTRUCTION={type:3,value:"OBSTRUCTION"},fe.TRANSITION={type:3,value:"TRANSITION"},fe.USERDEFINED={type:3,value:"USERDEFINED"},fe.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDuctFittingTypeEnum=fe;class me{}me.RIGIDSEGMENT={type:3,value:"RIGIDSEGMENT"},me.FLEXIBLESEGMENT={type:3,value:"FLEXIBLESEGMENT"},me.USERDEFINED={type:3,value:"USERDEFINED"},me.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDuctSegmentTypeEnum=me;class ge{}ge.FLATOVAL={type:3,value:"FLATOVAL"},ge.RECTANGULAR={type:3,value:"RECTANGULAR"},ge.ROUND={type:3,value:"ROUND"},ge.USERDEFINED={type:3,value:"USERDEFINED"},ge.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDuctSilencerTypeEnum=ge;class ye{}ye.DISHWASHER={type:3,value:"DISHWASHER"},ye.ELECTRICCOOKER={type:3,value:"ELECTRICCOOKER"},ye.FREESTANDINGELECTRICHEATER={type:3,value:"FREESTANDINGELECTRICHEATER"},ye.FREESTANDINGFAN={type:3,value:"FREESTANDINGFAN"},ye.FREESTANDINGWATERHEATER={type:3,value:"FREESTANDINGWATERHEATER"},ye.FREESTANDINGWATERCOOLER={type:3,value:"FREESTANDINGWATERCOOLER"},ye.FREEZER={type:3,value:"FREEZER"},ye.FRIDGE_FREEZER={type:3,value:"FRIDGE_FREEZER"},ye.HANDDRYER={type:3,value:"HANDDRYER"},ye.KITCHENMACHINE={type:3,value:"KITCHENMACHINE"},ye.MICROWAVE={type:3,value:"MICROWAVE"},ye.PHOTOCOPIER={type:3,value:"PHOTOCOPIER"},ye.REFRIGERATOR={type:3,value:"REFRIGERATOR"},ye.TUMBLEDRYER={type:3,value:"TUMBLEDRYER"},ye.VENDINGMACHINE={type:3,value:"VENDINGMACHINE"},ye.WASHINGMACHINE={type:3,value:"WASHINGMACHINE"},ye.USERDEFINED={type:3,value:"USERDEFINED"},ye.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcElectricApplianceTypeEnum=ye;class Ee{}Ee.CONSUMERUNIT={type:3,value:"CONSUMERUNIT"},Ee.DISTRIBUTIONBOARD={type:3,value:"DISTRIBUTIONBOARD"},Ee.MOTORCONTROLCENTRE={type:3,value:"MOTORCONTROLCENTRE"},Ee.SWITCHBOARD={type:3,value:"SWITCHBOARD"},Ee.USERDEFINED={type:3,value:"USERDEFINED"},Ee.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcElectricDistributionBoardTypeEnum=Ee;class ve{}ve.BATTERY={type:3,value:"BATTERY"},ve.CAPACITORBANK={type:3,value:"CAPACITORBANK"},ve.HARMONICFILTER={type:3,value:"HARMONICFILTER"},ve.INDUCTORBANK={type:3,value:"INDUCTORBANK"},ve.UPS={type:3,value:"UPS"},ve.USERDEFINED={type:3,value:"USERDEFINED"},ve.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcElectricFlowStorageDeviceTypeEnum=ve;class _e{}_e.CHP={type:3,value:"CHP"},_e.ENGINEGENERATOR={type:3,value:"ENGINEGENERATOR"},_e.STANDALONE={type:3,value:"STANDALONE"},_e.USERDEFINED={type:3,value:"USERDEFINED"},_e.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcElectricGeneratorTypeEnum=_e;class Ie{}Ie.DC={type:3,value:"DC"},Ie.INDUCTION={type:3,value:"INDUCTION"},Ie.POLYPHASE={type:3,value:"POLYPHASE"},Ie.RELUCTANCESYNCHRONOUS={type:3,value:"RELUCTANCESYNCHRONOUS"},Ie.SYNCHRONOUS={type:3,value:"SYNCHRONOUS"},Ie.USERDEFINED={type:3,value:"USERDEFINED"},Ie.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcElectricMotorTypeEnum=Ie;class Te{}Te.TIMECLOCK={type:3,value:"TIMECLOCK"},Te.TIMEDELAY={type:3,value:"TIMEDELAY"},Te.RELAY={type:3,value:"RELAY"},Te.USERDEFINED={type:3,value:"USERDEFINED"},Te.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcElectricTimeControlTypeEnum=Te;class Pe{}Pe.ACCESSORY_ASSEMBLY={type:3,value:"ACCESSORY_ASSEMBLY"},Pe.ARCH={type:3,value:"ARCH"},Pe.BEAM_GRID={type:3,value:"BEAM_GRID"},Pe.BRACED_FRAME={type:3,value:"BRACED_FRAME"},Pe.GIRDER={type:3,value:"GIRDER"},Pe.REINFORCEMENT_UNIT={type:3,value:"REINFORCEMENT_UNIT"},Pe.RIGID_FRAME={type:3,value:"RIGID_FRAME"},Pe.SLAB_FIELD={type:3,value:"SLAB_FIELD"},Pe.TRUSS={type:3,value:"TRUSS"},Pe.USERDEFINED={type:3,value:"USERDEFINED"},Pe.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcElementAssemblyTypeEnum=Pe;class De{}De.COMPLEX={type:3,value:"COMPLEX"},De.ELEMENT={type:3,value:"ELEMENT"},De.PARTIAL={type:3,value:"PARTIAL"},e.IfcElementCompositionEnum=De;class be{}be.EXTERNALCOMBUSTION={type:3,value:"EXTERNALCOMBUSTION"},be.INTERNALCOMBUSTION={type:3,value:"INTERNALCOMBUSTION"},be.USERDEFINED={type:3,value:"USERDEFINED"},be.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcEngineTypeEnum=be;class Re{}Re.DIRECTEVAPORATIVERANDOMMEDIAAIRCOOLER={type:3,value:"DIRECTEVAPORATIVERANDOMMEDIAAIRCOOLER"},Re.DIRECTEVAPORATIVERIGIDMEDIAAIRCOOLER={type:3,value:"DIRECTEVAPORATIVERIGIDMEDIAAIRCOOLER"},Re.DIRECTEVAPORATIVESLINGERSPACKAGEDAIRCOOLER={type:3,value:"DIRECTEVAPORATIVESLINGERSPACKAGEDAIRCOOLER"},Re.DIRECTEVAPORATIVEPACKAGEDROTARYAIRCOOLER={type:3,value:"DIRECTEVAPORATIVEPACKAGEDROTARYAIRCOOLER"},Re.DIRECTEVAPORATIVEAIRWASHER={type:3,value:"DIRECTEVAPORATIVEAIRWASHER"},Re.INDIRECTEVAPORATIVEPACKAGEAIRCOOLER={type:3,value:"INDIRECTEVAPORATIVEPACKAGEAIRCOOLER"},Re.INDIRECTEVAPORATIVEWETCOIL={type:3,value:"INDIRECTEVAPORATIVEWETCOIL"},Re.INDIRECTEVAPORATIVECOOLINGTOWERORCOILCOOLER={type:3,value:"INDIRECTEVAPORATIVECOOLINGTOWERORCOILCOOLER"},Re.INDIRECTDIRECTCOMBINATION={type:3,value:"INDIRECTDIRECTCOMBINATION"},Re.USERDEFINED={type:3,value:"USERDEFINED"},Re.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcEvaporativeCoolerTypeEnum=Re;class Ce{}Ce.DIRECTEXPANSION={type:3,value:"DIRECTEXPANSION"},Ce.DIRECTEXPANSIONSHELLANDTUBE={type:3,value:"DIRECTEXPANSIONSHELLANDTUBE"},Ce.DIRECTEXPANSIONTUBEINTUBE={type:3,value:"DIRECTEXPANSIONTUBEINTUBE"},Ce.DIRECTEXPANSIONBRAZEDPLATE={type:3,value:"DIRECTEXPANSIONBRAZEDPLATE"},Ce.FLOODEDSHELLANDTUBE={type:3,value:"FLOODEDSHELLANDTUBE"},Ce.SHELLANDCOIL={type:3,value:"SHELLANDCOIL"},Ce.USERDEFINED={type:3,value:"USERDEFINED"},Ce.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcEvaporatorTypeEnum=Ce;class xe{}xe.EVENTRULE={type:3,value:"EVENTRULE"},xe.EVENTMESSAGE={type:3,value:"EVENTMESSAGE"},xe.EVENTTIME={type:3,value:"EVENTTIME"},xe.EVENTCOMPLEX={type:3,value:"EVENTCOMPLEX"},xe.USERDEFINED={type:3,value:"USERDEFINED"},xe.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcEventTriggerTypeEnum=xe;class Ne{}Ne.STARTEVENT={type:3,value:"STARTEVENT"},Ne.ENDEVENT={type:3,value:"ENDEVENT"},Ne.INTERMEDIATEEVENT={type:3,value:"INTERMEDIATEEVENT"},Ne.USERDEFINED={type:3,value:"USERDEFINED"},Ne.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcEventTypeEnum=Ne;class Oe{}Oe.EXTERNAL={type:3,value:"EXTERNAL"},Oe.EXTERNAL_EARTH={type:3,value:"EXTERNAL_EARTH"},Oe.EXTERNAL_WATER={type:3,value:"EXTERNAL_WATER"},Oe.EXTERNAL_FIRE={type:3,value:"EXTERNAL_FIRE"},Oe.USERDEFINED={type:3,value:"USERDEFINED"},Oe.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcExternalSpatialElementTypeEnum=Oe;class Se{}Se.CENTRIFUGALFORWARDCURVED={type:3,value:"CENTRIFUGALFORWARDCURVED"},Se.CENTRIFUGALRADIAL={type:3,value:"CENTRIFUGALRADIAL"},Se.CENTRIFUGALBACKWARDINCLINEDCURVED={type:3,value:"CENTRIFUGALBACKWARDINCLINEDCURVED"},Se.CENTRIFUGALAIRFOIL={type:3,value:"CENTRIFUGALAIRFOIL"},Se.TUBEAXIAL={type:3,value:"TUBEAXIAL"},Se.VANEAXIAL={type:3,value:"VANEAXIAL"},Se.PROPELLORAXIAL={type:3,value:"PROPELLORAXIAL"},Se.USERDEFINED={type:3,value:"USERDEFINED"},Se.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcFanTypeEnum=Se;class we{}we.GLUE={type:3,value:"GLUE"},we.MORTAR={type:3,value:"MORTAR"},we.WELD={type:3,value:"WELD"},we.USERDEFINED={type:3,value:"USERDEFINED"},we.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcFastenerTypeEnum=we;class Me{}Me.AIRPARTICLEFILTER={type:3,value:"AIRPARTICLEFILTER"},Me.COMPRESSEDAIRFILTER={type:3,value:"COMPRESSEDAIRFILTER"},Me.ODORFILTER={type:3,value:"ODORFILTER"},Me.OILFILTER={type:3,value:"OILFILTER"},Me.STRAINER={type:3,value:"STRAINER"},Me.WATERFILTER={type:3,value:"WATERFILTER"},Me.USERDEFINED={type:3,value:"USERDEFINED"},Me.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcFilterTypeEnum=Me;class Be{}Be.BREECHINGINLET={type:3,value:"BREECHINGINLET"},Be.FIREHYDRANT={type:3,value:"FIREHYDRANT"},Be.HOSEREEL={type:3,value:"HOSEREEL"},Be.SPRINKLER={type:3,value:"SPRINKLER"},Be.SPRINKLERDEFLECTOR={type:3,value:"SPRINKLERDEFLECTOR"},Be.USERDEFINED={type:3,value:"USERDEFINED"},Be.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcFireSuppressionTerminalTypeEnum=Be;class Fe{}Fe.SOURCE={type:3,value:"SOURCE"},Fe.SINK={type:3,value:"SINK"},Fe.SOURCEANDSINK={type:3,value:"SOURCEANDSINK"},Fe.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcFlowDirectionEnum=Fe;class Le{}Le.PRESSUREGAUGE={type:3,value:"PRESSUREGAUGE"},Le.THERMOMETER={type:3,value:"THERMOMETER"},Le.AMMETER={type:3,value:"AMMETER"},Le.FREQUENCYMETER={type:3,value:"FREQUENCYMETER"},Le.POWERFACTORMETER={type:3,value:"POWERFACTORMETER"},Le.PHASEANGLEMETER={type:3,value:"PHASEANGLEMETER"},Le.VOLTMETER_PEAK={type:3,value:"VOLTMETER_PEAK"},Le.VOLTMETER_RMS={type:3,value:"VOLTMETER_RMS"},Le.USERDEFINED={type:3,value:"USERDEFINED"},Le.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcFlowInstrumentTypeEnum=Le;class Ue{}Ue.ENERGYMETER={type:3,value:"ENERGYMETER"},Ue.GASMETER={type:3,value:"GASMETER"},Ue.OILMETER={type:3,value:"OILMETER"},Ue.WATERMETER={type:3,value:"WATERMETER"},Ue.USERDEFINED={type:3,value:"USERDEFINED"},Ue.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcFlowMeterTypeEnum=Ue;class He{}He.CAISSON_FOUNDATION={type:3,value:"CAISSON_FOUNDATION"},He.FOOTING_BEAM={type:3,value:"FOOTING_BEAM"},He.PAD_FOOTING={type:3,value:"PAD_FOOTING"},He.PILE_CAP={type:3,value:"PILE_CAP"},He.STRIP_FOOTING={type:3,value:"STRIP_FOOTING"},He.USERDEFINED={type:3,value:"USERDEFINED"},He.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcFootingTypeEnum=He;class Ge{}Ge.CHAIR={type:3,value:"CHAIR"},Ge.TABLE={type:3,value:"TABLE"},Ge.DESK={type:3,value:"DESK"},Ge.BED={type:3,value:"BED"},Ge.FILECABINET={type:3,value:"FILECABINET"},Ge.SHELF={type:3,value:"SHELF"},Ge.SOFA={type:3,value:"SOFA"},Ge.USERDEFINED={type:3,value:"USERDEFINED"},Ge.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcFurnitureTypeEnum=Ge;class Ve{}Ve.TERRAIN={type:3,value:"TERRAIN"},Ve.USERDEFINED={type:3,value:"USERDEFINED"},Ve.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcGeographicElementTypeEnum=Ve;class ke{}ke.GRAPH_VIEW={type:3,value:"GRAPH_VIEW"},ke.SKETCH_VIEW={type:3,value:"SKETCH_VIEW"},ke.MODEL_VIEW={type:3,value:"MODEL_VIEW"},ke.PLAN_VIEW={type:3,value:"PLAN_VIEW"},ke.REFLECTED_PLAN_VIEW={type:3,value:"REFLECTED_PLAN_VIEW"},ke.SECTION_VIEW={type:3,value:"SECTION_VIEW"},ke.ELEVATION_VIEW={type:3,value:"ELEVATION_VIEW"},ke.USERDEFINED={type:3,value:"USERDEFINED"},ke.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcGeometricProjectionEnum=ke;class je{}je.GLOBAL_COORDS={type:3,value:"GLOBAL_COORDS"},je.LOCAL_COORDS={type:3,value:"LOCAL_COORDS"},e.IfcGlobalOrLocalEnum=je;class Qe{}Qe.RECTANGULAR={type:3,value:"RECTANGULAR"},Qe.RADIAL={type:3,value:"RADIAL"},Qe.TRIANGULAR={type:3,value:"TRIANGULAR"},Qe.IRREGULAR={type:3,value:"IRREGULAR"},Qe.USERDEFINED={type:3,value:"USERDEFINED"},Qe.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcGridTypeEnum=Qe;class We{}We.PLATE={type:3,value:"PLATE"},We.SHELLANDTUBE={type:3,value:"SHELLANDTUBE"},We.USERDEFINED={type:3,value:"USERDEFINED"},We.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcHeatExchangerTypeEnum=We;class ze{}ze.STEAMINJECTION={type:3,value:"STEAMINJECTION"},ze.ADIABATICAIRWASHER={type:3,value:"ADIABATICAIRWASHER"},ze.ADIABATICPAN={type:3,value:"ADIABATICPAN"},ze.ADIABATICWETTEDELEMENT={type:3,value:"ADIABATICWETTEDELEMENT"},ze.ADIABATICATOMIZING={type:3,value:"ADIABATICATOMIZING"},ze.ADIABATICULTRASONIC={type:3,value:"ADIABATICULTRASONIC"},ze.ADIABATICRIGIDMEDIA={type:3,value:"ADIABATICRIGIDMEDIA"},ze.ADIABATICCOMPRESSEDAIRNOZZLE={type:3,value:"ADIABATICCOMPRESSEDAIRNOZZLE"},ze.ASSISTEDELECTRIC={type:3,value:"ASSISTEDELECTRIC"},ze.ASSISTEDNATURALGAS={type:3,value:"ASSISTEDNATURALGAS"},ze.ASSISTEDPROPANE={type:3,value:"ASSISTEDPROPANE"},ze.ASSISTEDBUTANE={type:3,value:"ASSISTEDBUTANE"},ze.ASSISTEDSTEAM={type:3,value:"ASSISTEDSTEAM"},ze.USERDEFINED={type:3,value:"USERDEFINED"},ze.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcHumidifierTypeEnum=ze;class Ke{}Ke.CYCLONIC={type:3,value:"CYCLONIC"},Ke.GREASE={type:3,value:"GREASE"},Ke.OIL={type:3,value:"OIL"},Ke.PETROL={type:3,value:"PETROL"},Ke.USERDEFINED={type:3,value:"USERDEFINED"},Ke.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcInterceptorTypeEnum=Ke;class Ye{}Ye.INTERNAL={type:3,value:"INTERNAL"},Ye.EXTERNAL={type:3,value:"EXTERNAL"},Ye.EXTERNAL_EARTH={type:3,value:"EXTERNAL_EARTH"},Ye.EXTERNAL_WATER={type:3,value:"EXTERNAL_WATER"},Ye.EXTERNAL_FIRE={type:3,value:"EXTERNAL_FIRE"},Ye.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcInternalOrExternalEnum=Ye;class Xe{}Xe.ASSETINVENTORY={type:3,value:"ASSETINVENTORY"},Xe.SPACEINVENTORY={type:3,value:"SPACEINVENTORY"},Xe.FURNITUREINVENTORY={type:3,value:"FURNITUREINVENTORY"},Xe.USERDEFINED={type:3,value:"USERDEFINED"},Xe.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcInventoryTypeEnum=Xe;class Ze{}Ze.DATA={type:3,value:"DATA"},Ze.POWER={type:3,value:"POWER"},Ze.USERDEFINED={type:3,value:"USERDEFINED"},Ze.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcJunctionBoxTypeEnum=Ze;class qe{}qe.UNIFORM_KNOTS={type:3,value:"UNIFORM_KNOTS"},qe.QUASI_UNIFORM_KNOTS={type:3,value:"QUASI_UNIFORM_KNOTS"},qe.PIECEWISE_BEZIER_KNOTS={type:3,value:"PIECEWISE_BEZIER_KNOTS"},qe.UNSPECIFIED={type:3,value:"UNSPECIFIED"},e.IfcKnotType=qe;class Je{}Je.ADMINISTRATION={type:3,value:"ADMINISTRATION"},Je.CARPENTRY={type:3,value:"CARPENTRY"},Je.CLEANING={type:3,value:"CLEANING"},Je.CONCRETE={type:3,value:"CONCRETE"},Je.DRYWALL={type:3,value:"DRYWALL"},Je.ELECTRIC={type:3,value:"ELECTRIC"},Je.FINISHING={type:3,value:"FINISHING"},Je.FLOORING={type:3,value:"FLOORING"},Je.GENERAL={type:3,value:"GENERAL"},Je.HVAC={type:3,value:"HVAC"},Je.LANDSCAPING={type:3,value:"LANDSCAPING"},Je.MASONRY={type:3,value:"MASONRY"},Je.PAINTING={type:3,value:"PAINTING"},Je.PAVING={type:3,value:"PAVING"},Je.PLUMBING={type:3,value:"PLUMBING"},Je.ROOFING={type:3,value:"ROOFING"},Je.SITEGRADING={type:3,value:"SITEGRADING"},Je.STEELWORK={type:3,value:"STEELWORK"},Je.SURVEYING={type:3,value:"SURVEYING"},Je.USERDEFINED={type:3,value:"USERDEFINED"},Je.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcLaborResourceTypeEnum=Je;class $e{}$e.COMPACTFLUORESCENT={type:3,value:"COMPACTFLUORESCENT"},$e.FLUORESCENT={type:3,value:"FLUORESCENT"},$e.HALOGEN={type:3,value:"HALOGEN"},$e.HIGHPRESSUREMERCURY={type:3,value:"HIGHPRESSUREMERCURY"},$e.HIGHPRESSURESODIUM={type:3,value:"HIGHPRESSURESODIUM"},$e.LED={type:3,value:"LED"},$e.METALHALIDE={type:3,value:"METALHALIDE"},$e.OLED={type:3,value:"OLED"},$e.TUNGSTENFILAMENT={type:3,value:"TUNGSTENFILAMENT"},$e.USERDEFINED={type:3,value:"USERDEFINED"},$e.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcLampTypeEnum=$e;class et{}et.AXIS1={type:3,value:"AXIS1"},et.AXIS2={type:3,value:"AXIS2"},et.AXIS3={type:3,value:"AXIS3"},e.IfcLayerSetDirectionEnum=et;class tt{}tt.TYPE_A={type:3,value:"TYPE_A"},tt.TYPE_B={type:3,value:"TYPE_B"},tt.TYPE_C={type:3,value:"TYPE_C"},tt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcLightDistributionCurveEnum=tt;class st{}st.COMPACTFLUORESCENT={type:3,value:"COMPACTFLUORESCENT"},st.FLUORESCENT={type:3,value:"FLUORESCENT"},st.HIGHPRESSUREMERCURY={type:3,value:"HIGHPRESSUREMERCURY"},st.HIGHPRESSURESODIUM={type:3,value:"HIGHPRESSURESODIUM"},st.LIGHTEMITTINGDIODE={type:3,value:"LIGHTEMITTINGDIODE"},st.LOWPRESSURESODIUM={type:3,value:"LOWPRESSURESODIUM"},st.LOWVOLTAGEHALOGEN={type:3,value:"LOWVOLTAGEHALOGEN"},st.MAINVOLTAGEHALOGEN={type:3,value:"MAINVOLTAGEHALOGEN"},st.METALHALIDE={type:3,value:"METALHALIDE"},st.TUNGSTENFILAMENT={type:3,value:"TUNGSTENFILAMENT"},st.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcLightEmissionSourceEnum=st;class it{}it.POINTSOURCE={type:3,value:"POINTSOURCE"},it.DIRECTIONSOURCE={type:3,value:"DIRECTIONSOURCE"},it.SECURITYLIGHTING={type:3,value:"SECURITYLIGHTING"},it.USERDEFINED={type:3,value:"USERDEFINED"},it.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcLightFixtureTypeEnum=it;class rt{}rt.LOAD_GROUP={type:3,value:"LOAD_GROUP"},rt.LOAD_CASE={type:3,value:"LOAD_CASE"},rt.LOAD_COMBINATION={type:3,value:"LOAD_COMBINATION"},rt.USERDEFINED={type:3,value:"USERDEFINED"},rt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcLoadGroupTypeEnum=rt;class ot{}ot.LOGICALAND={type:3,value:"LOGICALAND"},ot.LOGICALOR={type:3,value:"LOGICALOR"},ot.LOGICALXOR={type:3,value:"LOGICALXOR"},ot.LOGICALNOTAND={type:3,value:"LOGICALNOTAND"},ot.LOGICALNOTOR={type:3,value:"LOGICALNOTOR"},e.IfcLogicalOperatorEnum=ot;class nt{}nt.ANCHORBOLT={type:3,value:"ANCHORBOLT"},nt.BOLT={type:3,value:"BOLT"},nt.DOWEL={type:3,value:"DOWEL"},nt.NAIL={type:3,value:"NAIL"},nt.NAILPLATE={type:3,value:"NAILPLATE"},nt.RIVET={type:3,value:"RIVET"},nt.SCREW={type:3,value:"SCREW"},nt.SHEARCONNECTOR={type:3,value:"SHEARCONNECTOR"},nt.STAPLE={type:3,value:"STAPLE"},nt.STUDSHEARCONNECTOR={type:3,value:"STUDSHEARCONNECTOR"},nt.USERDEFINED={type:3,value:"USERDEFINED"},nt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcMechanicalFastenerTypeEnum=nt;class at{}at.AIRSTATION={type:3,value:"AIRSTATION"},at.FEEDAIRUNIT={type:3,value:"FEEDAIRUNIT"},at.OXYGENGENERATOR={type:3,value:"OXYGENGENERATOR"},at.OXYGENPLANT={type:3,value:"OXYGENPLANT"},at.VACUUMSTATION={type:3,value:"VACUUMSTATION"},at.USERDEFINED={type:3,value:"USERDEFINED"},at.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcMedicalDeviceTypeEnum=at;class lt{}lt.BRACE={type:3,value:"BRACE"},lt.CHORD={type:3,value:"CHORD"},lt.COLLAR={type:3,value:"COLLAR"},lt.MEMBER={type:3,value:"MEMBER"},lt.MULLION={type:3,value:"MULLION"},lt.PLATE={type:3,value:"PLATE"},lt.POST={type:3,value:"POST"},lt.PURLIN={type:3,value:"PURLIN"},lt.RAFTER={type:3,value:"RAFTER"},lt.STRINGER={type:3,value:"STRINGER"},lt.STRUT={type:3,value:"STRUT"},lt.STUD={type:3,value:"STUD"},lt.USERDEFINED={type:3,value:"USERDEFINED"},lt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcMemberTypeEnum=lt;class ht{}ht.BELTDRIVE={type:3,value:"BELTDRIVE"},ht.COUPLING={type:3,value:"COUPLING"},ht.DIRECTDRIVE={type:3,value:"DIRECTDRIVE"},ht.USERDEFINED={type:3,value:"USERDEFINED"},ht.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcMotorConnectionTypeEnum=ht;class ct{}ct.NULL={type:3,value:"NULL"},e.IfcNullStyle=ct;class ut{}ut.PRODUCT={type:3,value:"PRODUCT"},ut.PROCESS={type:3,value:"PROCESS"},ut.CONTROL={type:3,value:"CONTROL"},ut.RESOURCE={type:3,value:"RESOURCE"},ut.ACTOR={type:3,value:"ACTOR"},ut.GROUP={type:3,value:"GROUP"},ut.PROJECT={type:3,value:"PROJECT"},ut.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcObjectTypeEnum=ut;class At{}At.CODECOMPLIANCE={type:3,value:"CODECOMPLIANCE"},At.CODEWAIVER={type:3,value:"CODEWAIVER"},At.DESIGNINTENT={type:3,value:"DESIGNINTENT"},At.EXTERNAL={type:3,value:"EXTERNAL"},At.HEALTHANDSAFETY={type:3,value:"HEALTHANDSAFETY"},At.MERGECONFLICT={type:3,value:"MERGECONFLICT"},At.MODELVIEW={type:3,value:"MODELVIEW"},At.PARAMETER={type:3,value:"PARAMETER"},At.REQUIREMENT={type:3,value:"REQUIREMENT"},At.SPECIFICATION={type:3,value:"SPECIFICATION"},At.TRIGGERCONDITION={type:3,value:"TRIGGERCONDITION"},At.USERDEFINED={type:3,value:"USERDEFINED"},At.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcObjectiveEnum=At;class pt{}pt.ASSIGNEE={type:3,value:"ASSIGNEE"},pt.ASSIGNOR={type:3,value:"ASSIGNOR"},pt.LESSEE={type:3,value:"LESSEE"},pt.LESSOR={type:3,value:"LESSOR"},pt.LETTINGAGENT={type:3,value:"LETTINGAGENT"},pt.OWNER={type:3,value:"OWNER"},pt.TENANT={type:3,value:"TENANT"},pt.USERDEFINED={type:3,value:"USERDEFINED"},pt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcOccupantTypeEnum=pt;class dt{}dt.OPENING={type:3,value:"OPENING"},dt.RECESS={type:3,value:"RECESS"},dt.USERDEFINED={type:3,value:"USERDEFINED"},dt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcOpeningElementTypeEnum=dt;class ft{}ft.AUDIOVISUALOUTLET={type:3,value:"AUDIOVISUALOUTLET"},ft.COMMUNICATIONSOUTLET={type:3,value:"COMMUNICATIONSOUTLET"},ft.POWEROUTLET={type:3,value:"POWEROUTLET"},ft.DATAOUTLET={type:3,value:"DATAOUTLET"},ft.TELEPHONEOUTLET={type:3,value:"TELEPHONEOUTLET"},ft.USERDEFINED={type:3,value:"USERDEFINED"},ft.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcOutletTypeEnum=ft;class mt{}mt.USERDEFINED={type:3,value:"USERDEFINED"},mt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcPerformanceHistoryTypeEnum=mt;class gt{}gt.GRILL={type:3,value:"GRILL"},gt.LOUVER={type:3,value:"LOUVER"},gt.SCREEN={type:3,value:"SCREEN"},gt.USERDEFINED={type:3,value:"USERDEFINED"},gt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcPermeableCoveringOperationEnum=gt;class yt{}yt.ACCESS={type:3,value:"ACCESS"},yt.BUILDING={type:3,value:"BUILDING"},yt.WORK={type:3,value:"WORK"},yt.USERDEFINED={type:3,value:"USERDEFINED"},yt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcPermitTypeEnum=yt;class Et{}Et.PHYSICAL={type:3,value:"PHYSICAL"},Et.VIRTUAL={type:3,value:"VIRTUAL"},Et.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcPhysicalOrVirtualEnum=Et;class vt{}vt.CAST_IN_PLACE={type:3,value:"CAST_IN_PLACE"},vt.COMPOSITE={type:3,value:"COMPOSITE"},vt.PRECAST_CONCRETE={type:3,value:"PRECAST_CONCRETE"},vt.PREFAB_STEEL={type:3,value:"PREFAB_STEEL"},vt.USERDEFINED={type:3,value:"USERDEFINED"},vt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcPileConstructionEnum=vt;class _t{}_t.BORED={type:3,value:"BORED"},_t.DRIVEN={type:3,value:"DRIVEN"},_t.JETGROUTING={type:3,value:"JETGROUTING"},_t.COHESION={type:3,value:"COHESION"},_t.FRICTION={type:3,value:"FRICTION"},_t.SUPPORT={type:3,value:"SUPPORT"},_t.USERDEFINED={type:3,value:"USERDEFINED"},_t.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcPileTypeEnum=_t;class It{}It.BEND={type:3,value:"BEND"},It.CONNECTOR={type:3,value:"CONNECTOR"},It.ENTRY={type:3,value:"ENTRY"},It.EXIT={type:3,value:"EXIT"},It.JUNCTION={type:3,value:"JUNCTION"},It.OBSTRUCTION={type:3,value:"OBSTRUCTION"},It.TRANSITION={type:3,value:"TRANSITION"},It.USERDEFINED={type:3,value:"USERDEFINED"},It.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcPipeFittingTypeEnum=It;class Tt{}Tt.CULVERT={type:3,value:"CULVERT"},Tt.FLEXIBLESEGMENT={type:3,value:"FLEXIBLESEGMENT"},Tt.RIGIDSEGMENT={type:3,value:"RIGIDSEGMENT"},Tt.GUTTER={type:3,value:"GUTTER"},Tt.SPOOL={type:3,value:"SPOOL"},Tt.USERDEFINED={type:3,value:"USERDEFINED"},Tt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcPipeSegmentTypeEnum=Tt;class Pt{}Pt.CURTAIN_PANEL={type:3,value:"CURTAIN_PANEL"},Pt.SHEET={type:3,value:"SHEET"},Pt.USERDEFINED={type:3,value:"USERDEFINED"},Pt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcPlateTypeEnum=Pt;class Dt{}Dt.CURVE3D={type:3,value:"CURVE3D"},Dt.PCURVE_S1={type:3,value:"PCURVE_S1"},Dt.PCURVE_S2={type:3,value:"PCURVE_S2"},e.IfcPreferredSurfaceCurveRepresentation=Dt;class bt{}bt.ADVICE_CAUTION={type:3,value:"ADVICE_CAUTION"},bt.ADVICE_NOTE={type:3,value:"ADVICE_NOTE"},bt.ADVICE_WARNING={type:3,value:"ADVICE_WARNING"},bt.CALIBRATION={type:3,value:"CALIBRATION"},bt.DIAGNOSTIC={type:3,value:"DIAGNOSTIC"},bt.SHUTDOWN={type:3,value:"SHUTDOWN"},bt.STARTUP={type:3,value:"STARTUP"},bt.USERDEFINED={type:3,value:"USERDEFINED"},bt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcProcedureTypeEnum=bt;class Rt{}Rt.CURVE={type:3,value:"CURVE"},Rt.AREA={type:3,value:"AREA"},e.IfcProfileTypeEnum=Rt;class Ct{}Ct.CHANGEORDER={type:3,value:"CHANGEORDER"},Ct.MAINTENANCEWORKORDER={type:3,value:"MAINTENANCEWORKORDER"},Ct.MOVEORDER={type:3,value:"MOVEORDER"},Ct.PURCHASEORDER={type:3,value:"PURCHASEORDER"},Ct.WORKORDER={type:3,value:"WORKORDER"},Ct.USERDEFINED={type:3,value:"USERDEFINED"},Ct.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcProjectOrderTypeEnum=Ct;class xt{}xt.PROJECTED_LENGTH={type:3,value:"PROJECTED_LENGTH"},xt.TRUE_LENGTH={type:3,value:"TRUE_LENGTH"},e.IfcProjectedOrTrueLengthEnum=xt;class Nt{}Nt.USERDEFINED={type:3,value:"USERDEFINED"},Nt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcProjectionElementTypeEnum=Nt;class Ot{}Ot.PSET_TYPEDRIVENONLY={type:3,value:"PSET_TYPEDRIVENONLY"},Ot.PSET_TYPEDRIVENOVERRIDE={type:3,value:"PSET_TYPEDRIVENOVERRIDE"},Ot.PSET_OCCURRENCEDRIVEN={type:3,value:"PSET_OCCURRENCEDRIVEN"},Ot.PSET_PERFORMANCEDRIVEN={type:3,value:"PSET_PERFORMANCEDRIVEN"},Ot.QTO_TYPEDRIVENONLY={type:3,value:"QTO_TYPEDRIVENONLY"},Ot.QTO_TYPEDRIVENOVERRIDE={type:3,value:"QTO_TYPEDRIVENOVERRIDE"},Ot.QTO_OCCURRENCEDRIVEN={type:3,value:"QTO_OCCURRENCEDRIVEN"},Ot.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcPropertySetTemplateTypeEnum=Ot;class St{}St.ELECTRONIC={type:3,value:"ELECTRONIC"},St.ELECTROMAGNETIC={type:3,value:"ELECTROMAGNETIC"},St.RESIDUALCURRENT={type:3,value:"RESIDUALCURRENT"},St.THERMAL={type:3,value:"THERMAL"},St.USERDEFINED={type:3,value:"USERDEFINED"},St.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcProtectiveDeviceTrippingUnitTypeEnum=St;class wt{}wt.CIRCUITBREAKER={type:3,value:"CIRCUITBREAKER"},wt.EARTHLEAKAGECIRCUITBREAKER={type:3,value:"EARTHLEAKAGECIRCUITBREAKER"},wt.EARTHINGSWITCH={type:3,value:"EARTHINGSWITCH"},wt.FUSEDISCONNECTOR={type:3,value:"FUSEDISCONNECTOR"},wt.RESIDUALCURRENTCIRCUITBREAKER={type:3,value:"RESIDUALCURRENTCIRCUITBREAKER"},wt.RESIDUALCURRENTSWITCH={type:3,value:"RESIDUALCURRENTSWITCH"},wt.VARISTOR={type:3,value:"VARISTOR"},wt.USERDEFINED={type:3,value:"USERDEFINED"},wt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcProtectiveDeviceTypeEnum=wt;class Mt{}Mt.CIRCULATOR={type:3,value:"CIRCULATOR"},Mt.ENDSUCTION={type:3,value:"ENDSUCTION"},Mt.SPLITCASE={type:3,value:"SPLITCASE"},Mt.SUBMERSIBLEPUMP={type:3,value:"SUBMERSIBLEPUMP"},Mt.SUMPPUMP={type:3,value:"SUMPPUMP"},Mt.VERTICALINLINE={type:3,value:"VERTICALINLINE"},Mt.VERTICALTURBINE={type:3,value:"VERTICALTURBINE"},Mt.USERDEFINED={type:3,value:"USERDEFINED"},Mt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcPumpTypeEnum=Mt;class Bt{}Bt.HANDRAIL={type:3,value:"HANDRAIL"},Bt.GUARDRAIL={type:3,value:"GUARDRAIL"},Bt.BALUSTRADE={type:3,value:"BALUSTRADE"},Bt.USERDEFINED={type:3,value:"USERDEFINED"},Bt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcRailingTypeEnum=Bt;class Ft{}Ft.STRAIGHT={type:3,value:"STRAIGHT"},Ft.SPIRAL={type:3,value:"SPIRAL"},Ft.USERDEFINED={type:3,value:"USERDEFINED"},Ft.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcRampFlightTypeEnum=Ft;class Lt{}Lt.STRAIGHT_RUN_RAMP={type:3,value:"STRAIGHT_RUN_RAMP"},Lt.TWO_STRAIGHT_RUN_RAMP={type:3,value:"TWO_STRAIGHT_RUN_RAMP"},Lt.QUARTER_TURN_RAMP={type:3,value:"QUARTER_TURN_RAMP"},Lt.TWO_QUARTER_TURN_RAMP={type:3,value:"TWO_QUARTER_TURN_RAMP"},Lt.HALF_TURN_RAMP={type:3,value:"HALF_TURN_RAMP"},Lt.SPIRAL_RAMP={type:3,value:"SPIRAL_RAMP"},Lt.USERDEFINED={type:3,value:"USERDEFINED"},Lt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcRampTypeEnum=Lt;class Ut{}Ut.DAILY={type:3,value:"DAILY"},Ut.WEEKLY={type:3,value:"WEEKLY"},Ut.MONTHLY_BY_DAY_OF_MONTH={type:3,value:"MONTHLY_BY_DAY_OF_MONTH"},Ut.MONTHLY_BY_POSITION={type:3,value:"MONTHLY_BY_POSITION"},Ut.BY_DAY_COUNT={type:3,value:"BY_DAY_COUNT"},Ut.BY_WEEKDAY_COUNT={type:3,value:"BY_WEEKDAY_COUNT"},Ut.YEARLY_BY_DAY_OF_MONTH={type:3,value:"YEARLY_BY_DAY_OF_MONTH"},Ut.YEARLY_BY_POSITION={type:3,value:"YEARLY_BY_POSITION"},e.IfcRecurrenceTypeEnum=Ut;class Ht{}Ht.BLINN={type:3,value:"BLINN"},Ht.FLAT={type:3,value:"FLAT"},Ht.GLASS={type:3,value:"GLASS"},Ht.MATT={type:3,value:"MATT"},Ht.METAL={type:3,value:"METAL"},Ht.MIRROR={type:3,value:"MIRROR"},Ht.PHONG={type:3,value:"PHONG"},Ht.PLASTIC={type:3,value:"PLASTIC"},Ht.STRAUSS={type:3,value:"STRAUSS"},Ht.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcReflectanceMethodEnum=Ht;class Gt{}Gt.MAIN={type:3,value:"MAIN"},Gt.SHEAR={type:3,value:"SHEAR"},Gt.LIGATURE={type:3,value:"LIGATURE"},Gt.STUD={type:3,value:"STUD"},Gt.PUNCHING={type:3,value:"PUNCHING"},Gt.EDGE={type:3,value:"EDGE"},Gt.RING={type:3,value:"RING"},Gt.ANCHORING={type:3,value:"ANCHORING"},Gt.USERDEFINED={type:3,value:"USERDEFINED"},Gt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcReinforcingBarRoleEnum=Gt;class Vt{}Vt.PLAIN={type:3,value:"PLAIN"},Vt.TEXTURED={type:3,value:"TEXTURED"},e.IfcReinforcingBarSurfaceEnum=Vt;class kt{}kt.ANCHORING={type:3,value:"ANCHORING"},kt.EDGE={type:3,value:"EDGE"},kt.LIGATURE={type:3,value:"LIGATURE"},kt.MAIN={type:3,value:"MAIN"},kt.PUNCHING={type:3,value:"PUNCHING"},kt.RING={type:3,value:"RING"},kt.SHEAR={type:3,value:"SHEAR"},kt.STUD={type:3,value:"STUD"},kt.USERDEFINED={type:3,value:"USERDEFINED"},kt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcReinforcingBarTypeEnum=kt;class jt{}jt.USERDEFINED={type:3,value:"USERDEFINED"},jt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcReinforcingMeshTypeEnum=jt;class Qt{}Qt.SUPPLIER={type:3,value:"SUPPLIER"},Qt.MANUFACTURER={type:3,value:"MANUFACTURER"},Qt.CONTRACTOR={type:3,value:"CONTRACTOR"},Qt.SUBCONTRACTOR={type:3,value:"SUBCONTRACTOR"},Qt.ARCHITECT={type:3,value:"ARCHITECT"},Qt.STRUCTURALENGINEER={type:3,value:"STRUCTURALENGINEER"},Qt.COSTENGINEER={type:3,value:"COSTENGINEER"},Qt.CLIENT={type:3,value:"CLIENT"},Qt.BUILDINGOWNER={type:3,value:"BUILDINGOWNER"},Qt.BUILDINGOPERATOR={type:3,value:"BUILDINGOPERATOR"},Qt.MECHANICALENGINEER={type:3,value:"MECHANICALENGINEER"},Qt.ELECTRICALENGINEER={type:3,value:"ELECTRICALENGINEER"},Qt.PROJECTMANAGER={type:3,value:"PROJECTMANAGER"},Qt.FACILITIESMANAGER={type:3,value:"FACILITIESMANAGER"},Qt.CIVILENGINEER={type:3,value:"CIVILENGINEER"},Qt.COMMISSIONINGENGINEER={type:3,value:"COMMISSIONINGENGINEER"},Qt.ENGINEER={type:3,value:"ENGINEER"},Qt.OWNER={type:3,value:"OWNER"},Qt.CONSULTANT={type:3,value:"CONSULTANT"},Qt.CONSTRUCTIONMANAGER={type:3,value:"CONSTRUCTIONMANAGER"},Qt.FIELDCONSTRUCTIONMANAGER={type:3,value:"FIELDCONSTRUCTIONMANAGER"},Qt.RESELLER={type:3,value:"RESELLER"},Qt.USERDEFINED={type:3,value:"USERDEFINED"},e.IfcRoleEnum=Qt;class Wt{}Wt.FLAT_ROOF={type:3,value:"FLAT_ROOF"},Wt.SHED_ROOF={type:3,value:"SHED_ROOF"},Wt.GABLE_ROOF={type:3,value:"GABLE_ROOF"},Wt.HIP_ROOF={type:3,value:"HIP_ROOF"},Wt.HIPPED_GABLE_ROOF={type:3,value:"HIPPED_GABLE_ROOF"},Wt.GAMBREL_ROOF={type:3,value:"GAMBREL_ROOF"},Wt.MANSARD_ROOF={type:3,value:"MANSARD_ROOF"},Wt.BARREL_ROOF={type:3,value:"BARREL_ROOF"},Wt.RAINBOW_ROOF={type:3,value:"RAINBOW_ROOF"},Wt.BUTTERFLY_ROOF={type:3,value:"BUTTERFLY_ROOF"},Wt.PAVILION_ROOF={type:3,value:"PAVILION_ROOF"},Wt.DOME_ROOF={type:3,value:"DOME_ROOF"},Wt.FREEFORM={type:3,value:"FREEFORM"},Wt.USERDEFINED={type:3,value:"USERDEFINED"},Wt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcRoofTypeEnum=Wt;class zt{}zt.EXA={type:3,value:"EXA"},zt.PETA={type:3,value:"PETA"},zt.TERA={type:3,value:"TERA"},zt.GIGA={type:3,value:"GIGA"},zt.MEGA={type:3,value:"MEGA"},zt.KILO={type:3,value:"KILO"},zt.HECTO={type:3,value:"HECTO"},zt.DECA={type:3,value:"DECA"},zt.DECI={type:3,value:"DECI"},zt.CENTI={type:3,value:"CENTI"},zt.MILLI={type:3,value:"MILLI"},zt.MICRO={type:3,value:"MICRO"},zt.NANO={type:3,value:"NANO"},zt.PICO={type:3,value:"PICO"},zt.FEMTO={type:3,value:"FEMTO"},zt.ATTO={type:3,value:"ATTO"},e.IfcSIPrefix=zt;class Kt{}Kt.AMPERE={type:3,value:"AMPERE"},Kt.BECQUEREL={type:3,value:"BECQUEREL"},Kt.CANDELA={type:3,value:"CANDELA"},Kt.COULOMB={type:3,value:"COULOMB"},Kt.CUBIC_METRE={type:3,value:"CUBIC_METRE"},Kt.DEGREE_CELSIUS={type:3,value:"DEGREE_CELSIUS"},Kt.FARAD={type:3,value:"FARAD"},Kt.GRAM={type:3,value:"GRAM"},Kt.GRAY={type:3,value:"GRAY"},Kt.HENRY={type:3,value:"HENRY"},Kt.HERTZ={type:3,value:"HERTZ"},Kt.JOULE={type:3,value:"JOULE"},Kt.KELVIN={type:3,value:"KELVIN"},Kt.LUMEN={type:3,value:"LUMEN"},Kt.LUX={type:3,value:"LUX"},Kt.METRE={type:3,value:"METRE"},Kt.MOLE={type:3,value:"MOLE"},Kt.NEWTON={type:3,value:"NEWTON"},Kt.OHM={type:3,value:"OHM"},Kt.PASCAL={type:3,value:"PASCAL"},Kt.RADIAN={type:3,value:"RADIAN"},Kt.SECOND={type:3,value:"SECOND"},Kt.SIEMENS={type:3,value:"SIEMENS"},Kt.SIEVERT={type:3,value:"SIEVERT"},Kt.SQUARE_METRE={type:3,value:"SQUARE_METRE"},Kt.STERADIAN={type:3,value:"STERADIAN"},Kt.TESLA={type:3,value:"TESLA"},Kt.VOLT={type:3,value:"VOLT"},Kt.WATT={type:3,value:"WATT"},Kt.WEBER={type:3,value:"WEBER"},e.IfcSIUnitName=Kt;class Yt{}Yt.BATH={type:3,value:"BATH"},Yt.BIDET={type:3,value:"BIDET"},Yt.CISTERN={type:3,value:"CISTERN"},Yt.SHOWER={type:3,value:"SHOWER"},Yt.SINK={type:3,value:"SINK"},Yt.SANITARYFOUNTAIN={type:3,value:"SANITARYFOUNTAIN"},Yt.TOILETPAN={type:3,value:"TOILETPAN"},Yt.URINAL={type:3,value:"URINAL"},Yt.WASHHANDBASIN={type:3,value:"WASHHANDBASIN"},Yt.WCSEAT={type:3,value:"WCSEAT"},Yt.USERDEFINED={type:3,value:"USERDEFINED"},Yt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSanitaryTerminalTypeEnum=Yt;class Xt{}Xt.UNIFORM={type:3,value:"UNIFORM"},Xt.TAPERED={type:3,value:"TAPERED"},e.IfcSectionTypeEnum=Xt;class Zt{}Zt.COSENSOR={type:3,value:"COSENSOR"},Zt.CO2SENSOR={type:3,value:"CO2SENSOR"},Zt.CONDUCTANCESENSOR={type:3,value:"CONDUCTANCESENSOR"},Zt.CONTACTSENSOR={type:3,value:"CONTACTSENSOR"},Zt.FIRESENSOR={type:3,value:"FIRESENSOR"},Zt.FLOWSENSOR={type:3,value:"FLOWSENSOR"},Zt.FROSTSENSOR={type:3,value:"FROSTSENSOR"},Zt.GASSENSOR={type:3,value:"GASSENSOR"},Zt.HEATSENSOR={type:3,value:"HEATSENSOR"},Zt.HUMIDITYSENSOR={type:3,value:"HUMIDITYSENSOR"},Zt.IDENTIFIERSENSOR={type:3,value:"IDENTIFIERSENSOR"},Zt.IONCONCENTRATIONSENSOR={type:3,value:"IONCONCENTRATIONSENSOR"},Zt.LEVELSENSOR={type:3,value:"LEVELSENSOR"},Zt.LIGHTSENSOR={type:3,value:"LIGHTSENSOR"},Zt.MOISTURESENSOR={type:3,value:"MOISTURESENSOR"},Zt.MOVEMENTSENSOR={type:3,value:"MOVEMENTSENSOR"},Zt.PHSENSOR={type:3,value:"PHSENSOR"},Zt.PRESSURESENSOR={type:3,value:"PRESSURESENSOR"},Zt.RADIATIONSENSOR={type:3,value:"RADIATIONSENSOR"},Zt.RADIOACTIVITYSENSOR={type:3,value:"RADIOACTIVITYSENSOR"},Zt.SMOKESENSOR={type:3,value:"SMOKESENSOR"},Zt.SOUNDSENSOR={type:3,value:"SOUNDSENSOR"},Zt.TEMPERATURESENSOR={type:3,value:"TEMPERATURESENSOR"},Zt.WINDSENSOR={type:3,value:"WINDSENSOR"},Zt.USERDEFINED={type:3,value:"USERDEFINED"},Zt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSensorTypeEnum=Zt;class qt{}qt.START_START={type:3,value:"START_START"},qt.START_FINISH={type:3,value:"START_FINISH"},qt.FINISH_START={type:3,value:"FINISH_START"},qt.FINISH_FINISH={type:3,value:"FINISH_FINISH"},qt.USERDEFINED={type:3,value:"USERDEFINED"},qt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSequenceEnum=qt;class Jt{}Jt.JALOUSIE={type:3,value:"JALOUSIE"},Jt.SHUTTER={type:3,value:"SHUTTER"},Jt.AWNING={type:3,value:"AWNING"},Jt.USERDEFINED={type:3,value:"USERDEFINED"},Jt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcShadingDeviceTypeEnum=Jt;class $t{}$t.P_SINGLEVALUE={type:3,value:"P_SINGLEVALUE"},$t.P_ENUMERATEDVALUE={type:3,value:"P_ENUMERATEDVALUE"},$t.P_BOUNDEDVALUE={type:3,value:"P_BOUNDEDVALUE"},$t.P_LISTVALUE={type:3,value:"P_LISTVALUE"},$t.P_TABLEVALUE={type:3,value:"P_TABLEVALUE"},$t.P_REFERENCEVALUE={type:3,value:"P_REFERENCEVALUE"},$t.Q_LENGTH={type:3,value:"Q_LENGTH"},$t.Q_AREA={type:3,value:"Q_AREA"},$t.Q_VOLUME={type:3,value:"Q_VOLUME"},$t.Q_COUNT={type:3,value:"Q_COUNT"},$t.Q_WEIGHT={type:3,value:"Q_WEIGHT"},$t.Q_TIME={type:3,value:"Q_TIME"},e.IfcSimplePropertyTemplateTypeEnum=$t;class es{}es.FLOOR={type:3,value:"FLOOR"},es.ROOF={type:3,value:"ROOF"},es.LANDING={type:3,value:"LANDING"},es.BASESLAB={type:3,value:"BASESLAB"},es.USERDEFINED={type:3,value:"USERDEFINED"},es.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSlabTypeEnum=es;class ts{}ts.SOLARCOLLECTOR={type:3,value:"SOLARCOLLECTOR"},ts.SOLARPANEL={type:3,value:"SOLARPANEL"},ts.USERDEFINED={type:3,value:"USERDEFINED"},ts.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSolarDeviceTypeEnum=ts;class ss{}ss.CONVECTOR={type:3,value:"CONVECTOR"},ss.RADIATOR={type:3,value:"RADIATOR"},ss.USERDEFINED={type:3,value:"USERDEFINED"},ss.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSpaceHeaterTypeEnum=ss;class is{}is.SPACE={type:3,value:"SPACE"},is.PARKING={type:3,value:"PARKING"},is.GFA={type:3,value:"GFA"},is.INTERNAL={type:3,value:"INTERNAL"},is.EXTERNAL={type:3,value:"EXTERNAL"},is.USERDEFINED={type:3,value:"USERDEFINED"},is.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSpaceTypeEnum=is;class rs{}rs.CONSTRUCTION={type:3,value:"CONSTRUCTION"},rs.FIRESAFETY={type:3,value:"FIRESAFETY"},rs.LIGHTING={type:3,value:"LIGHTING"},rs.OCCUPANCY={type:3,value:"OCCUPANCY"},rs.SECURITY={type:3,value:"SECURITY"},rs.THERMAL={type:3,value:"THERMAL"},rs.TRANSPORT={type:3,value:"TRANSPORT"},rs.VENTILATION={type:3,value:"VENTILATION"},rs.USERDEFINED={type:3,value:"USERDEFINED"},rs.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSpatialZoneTypeEnum=rs;class os{}os.BIRDCAGE={type:3,value:"BIRDCAGE"},os.COWL={type:3,value:"COWL"},os.RAINWATERHOPPER={type:3,value:"RAINWATERHOPPER"},os.USERDEFINED={type:3,value:"USERDEFINED"},os.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcStackTerminalTypeEnum=os;class ns{}ns.STRAIGHT={type:3,value:"STRAIGHT"},ns.WINDER={type:3,value:"WINDER"},ns.SPIRAL={type:3,value:"SPIRAL"},ns.CURVED={type:3,value:"CURVED"},ns.FREEFORM={type:3,value:"FREEFORM"},ns.USERDEFINED={type:3,value:"USERDEFINED"},ns.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcStairFlightTypeEnum=ns;class as{}as.STRAIGHT_RUN_STAIR={type:3,value:"STRAIGHT_RUN_STAIR"},as.TWO_STRAIGHT_RUN_STAIR={type:3,value:"TWO_STRAIGHT_RUN_STAIR"},as.QUARTER_WINDING_STAIR={type:3,value:"QUARTER_WINDING_STAIR"},as.QUARTER_TURN_STAIR={type:3,value:"QUARTER_TURN_STAIR"},as.HALF_WINDING_STAIR={type:3,value:"HALF_WINDING_STAIR"},as.HALF_TURN_STAIR={type:3,value:"HALF_TURN_STAIR"},as.TWO_QUARTER_WINDING_STAIR={type:3,value:"TWO_QUARTER_WINDING_STAIR"},as.TWO_QUARTER_TURN_STAIR={type:3,value:"TWO_QUARTER_TURN_STAIR"},as.THREE_QUARTER_WINDING_STAIR={type:3,value:"THREE_QUARTER_WINDING_STAIR"},as.THREE_QUARTER_TURN_STAIR={type:3,value:"THREE_QUARTER_TURN_STAIR"},as.SPIRAL_STAIR={type:3,value:"SPIRAL_STAIR"},as.DOUBLE_RETURN_STAIR={type:3,value:"DOUBLE_RETURN_STAIR"},as.CURVED_RUN_STAIR={type:3,value:"CURVED_RUN_STAIR"},as.TWO_CURVED_RUN_STAIR={type:3,value:"TWO_CURVED_RUN_STAIR"},as.USERDEFINED={type:3,value:"USERDEFINED"},as.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcStairTypeEnum=as;class ls{}ls.READWRITE={type:3,value:"READWRITE"},ls.READONLY={type:3,value:"READONLY"},ls.LOCKED={type:3,value:"LOCKED"},ls.READWRITELOCKED={type:3,value:"READWRITELOCKED"},ls.READONLYLOCKED={type:3,value:"READONLYLOCKED"},e.IfcStateEnum=ls;class hs{}hs.CONST={type:3,value:"CONST"},hs.LINEAR={type:3,value:"LINEAR"},hs.POLYGONAL={type:3,value:"POLYGONAL"},hs.EQUIDISTANT={type:3,value:"EQUIDISTANT"},hs.SINUS={type:3,value:"SINUS"},hs.PARABOLA={type:3,value:"PARABOLA"},hs.DISCRETE={type:3,value:"DISCRETE"},hs.USERDEFINED={type:3,value:"USERDEFINED"},hs.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcStructuralCurveActivityTypeEnum=hs;class cs{}cs.RIGID_JOINED_MEMBER={type:3,value:"RIGID_JOINED_MEMBER"},cs.PIN_JOINED_MEMBER={type:3,value:"PIN_JOINED_MEMBER"},cs.CABLE={type:3,value:"CABLE"},cs.TENSION_MEMBER={type:3,value:"TENSION_MEMBER"},cs.COMPRESSION_MEMBER={type:3,value:"COMPRESSION_MEMBER"},cs.USERDEFINED={type:3,value:"USERDEFINED"},cs.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcStructuralCurveMemberTypeEnum=cs;class us{}us.CONST={type:3,value:"CONST"},us.BILINEAR={type:3,value:"BILINEAR"},us.DISCRETE={type:3,value:"DISCRETE"},us.ISOCONTOUR={type:3,value:"ISOCONTOUR"},us.USERDEFINED={type:3,value:"USERDEFINED"},us.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcStructuralSurfaceActivityTypeEnum=us;class As{}As.BENDING_ELEMENT={type:3,value:"BENDING_ELEMENT"},As.MEMBRANE_ELEMENT={type:3,value:"MEMBRANE_ELEMENT"},As.SHELL={type:3,value:"SHELL"},As.USERDEFINED={type:3,value:"USERDEFINED"},As.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcStructuralSurfaceMemberTypeEnum=As;class ps{}ps.PURCHASE={type:3,value:"PURCHASE"},ps.WORK={type:3,value:"WORK"},ps.USERDEFINED={type:3,value:"USERDEFINED"},ps.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSubContractResourceTypeEnum=ps;class ds{}ds.MARK={type:3,value:"MARK"},ds.TAG={type:3,value:"TAG"},ds.TREATMENT={type:3,value:"TREATMENT"},ds.USERDEFINED={type:3,value:"USERDEFINED"},ds.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSurfaceFeatureTypeEnum=ds;class fs{}fs.POSITIVE={type:3,value:"POSITIVE"},fs.NEGATIVE={type:3,value:"NEGATIVE"},fs.BOTH={type:3,value:"BOTH"},e.IfcSurfaceSide=fs;class ms{}ms.CONTACTOR={type:3,value:"CONTACTOR"},ms.DIMMERSWITCH={type:3,value:"DIMMERSWITCH"},ms.EMERGENCYSTOP={type:3,value:"EMERGENCYSTOP"},ms.KEYPAD={type:3,value:"KEYPAD"},ms.MOMENTARYSWITCH={type:3,value:"MOMENTARYSWITCH"},ms.SELECTORSWITCH={type:3,value:"SELECTORSWITCH"},ms.STARTER={type:3,value:"STARTER"},ms.SWITCHDISCONNECTOR={type:3,value:"SWITCHDISCONNECTOR"},ms.TOGGLESWITCH={type:3,value:"TOGGLESWITCH"},ms.USERDEFINED={type:3,value:"USERDEFINED"},ms.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSwitchingDeviceTypeEnum=ms;class gs{}gs.PANEL={type:3,value:"PANEL"},gs.WORKSURFACE={type:3,value:"WORKSURFACE"},gs.USERDEFINED={type:3,value:"USERDEFINED"},gs.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSystemFurnitureElementTypeEnum=gs;class ys{}ys.BASIN={type:3,value:"BASIN"},ys.BREAKPRESSURE={type:3,value:"BREAKPRESSURE"},ys.EXPANSION={type:3,value:"EXPANSION"},ys.FEEDANDEXPANSION={type:3,value:"FEEDANDEXPANSION"},ys.PRESSUREVESSEL={type:3,value:"PRESSUREVESSEL"},ys.STORAGE={type:3,value:"STORAGE"},ys.VESSEL={type:3,value:"VESSEL"},ys.USERDEFINED={type:3,value:"USERDEFINED"},ys.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcTankTypeEnum=ys;class Es{}Es.ELAPSEDTIME={type:3,value:"ELAPSEDTIME"},Es.WORKTIME={type:3,value:"WORKTIME"},Es.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcTaskDurationEnum=Es;class vs{}vs.ATTENDANCE={type:3,value:"ATTENDANCE"},vs.CONSTRUCTION={type:3,value:"CONSTRUCTION"},vs.DEMOLITION={type:3,value:"DEMOLITION"},vs.DISMANTLE={type:3,value:"DISMANTLE"},vs.DISPOSAL={type:3,value:"DISPOSAL"},vs.INSTALLATION={type:3,value:"INSTALLATION"},vs.LOGISTIC={type:3,value:"LOGISTIC"},vs.MAINTENANCE={type:3,value:"MAINTENANCE"},vs.MOVE={type:3,value:"MOVE"},vs.OPERATION={type:3,value:"OPERATION"},vs.REMOVAL={type:3,value:"REMOVAL"},vs.RENOVATION={type:3,value:"RENOVATION"},vs.USERDEFINED={type:3,value:"USERDEFINED"},vs.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcTaskTypeEnum=vs;class _s{}_s.COUPLER={type:3,value:"COUPLER"},_s.FIXED_END={type:3,value:"FIXED_END"},_s.TENSIONING_END={type:3,value:"TENSIONING_END"},_s.USERDEFINED={type:3,value:"USERDEFINED"},_s.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcTendonAnchorTypeEnum=_s;class Is{}Is.BAR={type:3,value:"BAR"},Is.COATED={type:3,value:"COATED"},Is.STRAND={type:3,value:"STRAND"},Is.WIRE={type:3,value:"WIRE"},Is.USERDEFINED={type:3,value:"USERDEFINED"},Is.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcTendonTypeEnum=Is;class Ts{}Ts.LEFT={type:3,value:"LEFT"},Ts.RIGHT={type:3,value:"RIGHT"},Ts.UP={type:3,value:"UP"},Ts.DOWN={type:3,value:"DOWN"},e.IfcTextPath=Ts;class Ps{}Ps.CONTINUOUS={type:3,value:"CONTINUOUS"},Ps.DISCRETE={type:3,value:"DISCRETE"},Ps.DISCRETEBINARY={type:3,value:"DISCRETEBINARY"},Ps.PIECEWISEBINARY={type:3,value:"PIECEWISEBINARY"},Ps.PIECEWISECONSTANT={type:3,value:"PIECEWISECONSTANT"},Ps.PIECEWISECONTINUOUS={type:3,value:"PIECEWISECONTINUOUS"},Ps.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcTimeSeriesDataTypeEnum=Ps;class Ds{}Ds.CURRENT={type:3,value:"CURRENT"},Ds.FREQUENCY={type:3,value:"FREQUENCY"},Ds.INVERTER={type:3,value:"INVERTER"},Ds.RECTIFIER={type:3,value:"RECTIFIER"},Ds.VOLTAGE={type:3,value:"VOLTAGE"},Ds.USERDEFINED={type:3,value:"USERDEFINED"},Ds.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcTransformerTypeEnum=Ds;class bs{}bs.DISCONTINUOUS={type:3,value:"DISCONTINUOUS"},bs.CONTINUOUS={type:3,value:"CONTINUOUS"},bs.CONTSAMEGRADIENT={type:3,value:"CONTSAMEGRADIENT"},bs.CONTSAMEGRADIENTSAMECURVATURE={type:3,value:"CONTSAMEGRADIENTSAMECURVATURE"},e.IfcTransitionCode=bs;class Rs{}Rs.ELEVATOR={type:3,value:"ELEVATOR"},Rs.ESCALATOR={type:3,value:"ESCALATOR"},Rs.MOVINGWALKWAY={type:3,value:"MOVINGWALKWAY"},Rs.CRANEWAY={type:3,value:"CRANEWAY"},Rs.LIFTINGGEAR={type:3,value:"LIFTINGGEAR"},Rs.USERDEFINED={type:3,value:"USERDEFINED"},Rs.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcTransportElementTypeEnum=Rs;class Cs{}Cs.CARTESIAN={type:3,value:"CARTESIAN"},Cs.PARAMETER={type:3,value:"PARAMETER"},Cs.UNSPECIFIED={type:3,value:"UNSPECIFIED"},e.IfcTrimmingPreference=Cs;class xs{}xs.FINNED={type:3,value:"FINNED"},xs.USERDEFINED={type:3,value:"USERDEFINED"},xs.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcTubeBundleTypeEnum=xs;class Ns{}Ns.ABSORBEDDOSEUNIT={type:3,value:"ABSORBEDDOSEUNIT"},Ns.AMOUNTOFSUBSTANCEUNIT={type:3,value:"AMOUNTOFSUBSTANCEUNIT"},Ns.AREAUNIT={type:3,value:"AREAUNIT"},Ns.DOSEEQUIVALENTUNIT={type:3,value:"DOSEEQUIVALENTUNIT"},Ns.ELECTRICCAPACITANCEUNIT={type:3,value:"ELECTRICCAPACITANCEUNIT"},Ns.ELECTRICCHARGEUNIT={type:3,value:"ELECTRICCHARGEUNIT"},Ns.ELECTRICCONDUCTANCEUNIT={type:3,value:"ELECTRICCONDUCTANCEUNIT"},Ns.ELECTRICCURRENTUNIT={type:3,value:"ELECTRICCURRENTUNIT"},Ns.ELECTRICRESISTANCEUNIT={type:3,value:"ELECTRICRESISTANCEUNIT"},Ns.ELECTRICVOLTAGEUNIT={type:3,value:"ELECTRICVOLTAGEUNIT"},Ns.ENERGYUNIT={type:3,value:"ENERGYUNIT"},Ns.FORCEUNIT={type:3,value:"FORCEUNIT"},Ns.FREQUENCYUNIT={type:3,value:"FREQUENCYUNIT"},Ns.ILLUMINANCEUNIT={type:3,value:"ILLUMINANCEUNIT"},Ns.INDUCTANCEUNIT={type:3,value:"INDUCTANCEUNIT"},Ns.LENGTHUNIT={type:3,value:"LENGTHUNIT"},Ns.LUMINOUSFLUXUNIT={type:3,value:"LUMINOUSFLUXUNIT"},Ns.LUMINOUSINTENSITYUNIT={type:3,value:"LUMINOUSINTENSITYUNIT"},Ns.MAGNETICFLUXDENSITYUNIT={type:3,value:"MAGNETICFLUXDENSITYUNIT"},Ns.MAGNETICFLUXUNIT={type:3,value:"MAGNETICFLUXUNIT"},Ns.MASSUNIT={type:3,value:"MASSUNIT"},Ns.PLANEANGLEUNIT={type:3,value:"PLANEANGLEUNIT"},Ns.POWERUNIT={type:3,value:"POWERUNIT"},Ns.PRESSUREUNIT={type:3,value:"PRESSUREUNIT"},Ns.RADIOACTIVITYUNIT={type:3,value:"RADIOACTIVITYUNIT"},Ns.SOLIDANGLEUNIT={type:3,value:"SOLIDANGLEUNIT"},Ns.THERMODYNAMICTEMPERATUREUNIT={type:3,value:"THERMODYNAMICTEMPERATUREUNIT"},Ns.TIMEUNIT={type:3,value:"TIMEUNIT"},Ns.VOLUMEUNIT={type:3,value:"VOLUMEUNIT"},Ns.USERDEFINED={type:3,value:"USERDEFINED"},e.IfcUnitEnum=Ns;class Os{}Os.ALARMPANEL={type:3,value:"ALARMPANEL"},Os.CONTROLPANEL={type:3,value:"CONTROLPANEL"},Os.GASDETECTIONPANEL={type:3,value:"GASDETECTIONPANEL"},Os.INDICATORPANEL={type:3,value:"INDICATORPANEL"},Os.MIMICPANEL={type:3,value:"MIMICPANEL"},Os.HUMIDISTAT={type:3,value:"HUMIDISTAT"},Os.THERMOSTAT={type:3,value:"THERMOSTAT"},Os.WEATHERSTATION={type:3,value:"WEATHERSTATION"},Os.USERDEFINED={type:3,value:"USERDEFINED"},Os.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcUnitaryControlElementTypeEnum=Os;class Ss{}Ss.AIRHANDLER={type:3,value:"AIRHANDLER"},Ss.AIRCONDITIONINGUNIT={type:3,value:"AIRCONDITIONINGUNIT"},Ss.DEHUMIDIFIER={type:3,value:"DEHUMIDIFIER"},Ss.SPLITSYSTEM={type:3,value:"SPLITSYSTEM"},Ss.ROOFTOPUNIT={type:3,value:"ROOFTOPUNIT"},Ss.USERDEFINED={type:3,value:"USERDEFINED"},Ss.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcUnitaryEquipmentTypeEnum=Ss;class ws{}ws.AIRRELEASE={type:3,value:"AIRRELEASE"},ws.ANTIVACUUM={type:3,value:"ANTIVACUUM"},ws.CHANGEOVER={type:3,value:"CHANGEOVER"},ws.CHECK={type:3,value:"CHECK"},ws.COMMISSIONING={type:3,value:"COMMISSIONING"},ws.DIVERTING={type:3,value:"DIVERTING"},ws.DRAWOFFCOCK={type:3,value:"DRAWOFFCOCK"},ws.DOUBLECHECK={type:3,value:"DOUBLECHECK"},ws.DOUBLEREGULATING={type:3,value:"DOUBLEREGULATING"},ws.FAUCET={type:3,value:"FAUCET"},ws.FLUSHING={type:3,value:"FLUSHING"},ws.GASCOCK={type:3,value:"GASCOCK"},ws.GASTAP={type:3,value:"GASTAP"},ws.ISOLATING={type:3,value:"ISOLATING"},ws.MIXING={type:3,value:"MIXING"},ws.PRESSUREREDUCING={type:3,value:"PRESSUREREDUCING"},ws.PRESSURERELIEF={type:3,value:"PRESSURERELIEF"},ws.REGULATING={type:3,value:"REGULATING"},ws.SAFETYCUTOFF={type:3,value:"SAFETYCUTOFF"},ws.STEAMTRAP={type:3,value:"STEAMTRAP"},ws.STOPCOCK={type:3,value:"STOPCOCK"},ws.USERDEFINED={type:3,value:"USERDEFINED"},ws.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcValveTypeEnum=ws;class Ms{}Ms.COMPRESSION={type:3,value:"COMPRESSION"},Ms.SPRING={type:3,value:"SPRING"},Ms.USERDEFINED={type:3,value:"USERDEFINED"},Ms.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcVibrationIsolatorTypeEnum=Ms;class Bs{}Bs.CUTOUT={type:3,value:"CUTOUT"},Bs.NOTCH={type:3,value:"NOTCH"},Bs.HOLE={type:3,value:"HOLE"},Bs.MITER={type:3,value:"MITER"},Bs.CHAMFER={type:3,value:"CHAMFER"},Bs.EDGE={type:3,value:"EDGE"},Bs.USERDEFINED={type:3,value:"USERDEFINED"},Bs.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcVoidingFeatureTypeEnum=Bs;class Fs{}Fs.MOVABLE={type:3,value:"MOVABLE"},Fs.PARAPET={type:3,value:"PARAPET"},Fs.PARTITIONING={type:3,value:"PARTITIONING"},Fs.PLUMBINGWALL={type:3,value:"PLUMBINGWALL"},Fs.SHEAR={type:3,value:"SHEAR"},Fs.SOLIDWALL={type:3,value:"SOLIDWALL"},Fs.STANDARD={type:3,value:"STANDARD"},Fs.POLYGONAL={type:3,value:"POLYGONAL"},Fs.ELEMENTEDWALL={type:3,value:"ELEMENTEDWALL"},Fs.USERDEFINED={type:3,value:"USERDEFINED"},Fs.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcWallTypeEnum=Fs;class Ls{}Ls.FLOORTRAP={type:3,value:"FLOORTRAP"},Ls.FLOORWASTE={type:3,value:"FLOORWASTE"},Ls.GULLYSUMP={type:3,value:"GULLYSUMP"},Ls.GULLYTRAP={type:3,value:"GULLYTRAP"},Ls.ROOFDRAIN={type:3,value:"ROOFDRAIN"},Ls.WASTEDISPOSALUNIT={type:3,value:"WASTEDISPOSALUNIT"},Ls.WASTETRAP={type:3,value:"WASTETRAP"},Ls.USERDEFINED={type:3,value:"USERDEFINED"},Ls.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcWasteTerminalTypeEnum=Ls;class Us{}Us.SIDEHUNGRIGHTHAND={type:3,value:"SIDEHUNGRIGHTHAND"},Us.SIDEHUNGLEFTHAND={type:3,value:"SIDEHUNGLEFTHAND"},Us.TILTANDTURNRIGHTHAND={type:3,value:"TILTANDTURNRIGHTHAND"},Us.TILTANDTURNLEFTHAND={type:3,value:"TILTANDTURNLEFTHAND"},Us.TOPHUNG={type:3,value:"TOPHUNG"},Us.BOTTOMHUNG={type:3,value:"BOTTOMHUNG"},Us.PIVOTHORIZONTAL={type:3,value:"PIVOTHORIZONTAL"},Us.PIVOTVERTICAL={type:3,value:"PIVOTVERTICAL"},Us.SLIDINGHORIZONTAL={type:3,value:"SLIDINGHORIZONTAL"},Us.SLIDINGVERTICAL={type:3,value:"SLIDINGVERTICAL"},Us.REMOVABLECASEMENT={type:3,value:"REMOVABLECASEMENT"},Us.FIXEDCASEMENT={type:3,value:"FIXEDCASEMENT"},Us.OTHEROPERATION={type:3,value:"OTHEROPERATION"},Us.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcWindowPanelOperationEnum=Us;class Hs{}Hs.LEFT={type:3,value:"LEFT"},Hs.MIDDLE={type:3,value:"MIDDLE"},Hs.RIGHT={type:3,value:"RIGHT"},Hs.BOTTOM={type:3,value:"BOTTOM"},Hs.TOP={type:3,value:"TOP"},Hs.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcWindowPanelPositionEnum=Hs;class Gs{}Gs.ALUMINIUM={type:3,value:"ALUMINIUM"},Gs.HIGH_GRADE_STEEL={type:3,value:"HIGH_GRADE_STEEL"},Gs.STEEL={type:3,value:"STEEL"},Gs.WOOD={type:3,value:"WOOD"},Gs.ALUMINIUM_WOOD={type:3,value:"ALUMINIUM_WOOD"},Gs.PLASTIC={type:3,value:"PLASTIC"},Gs.OTHER_CONSTRUCTION={type:3,value:"OTHER_CONSTRUCTION"},Gs.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcWindowStyleConstructionEnum=Gs;class Vs{}Vs.SINGLE_PANEL={type:3,value:"SINGLE_PANEL"},Vs.DOUBLE_PANEL_VERTICAL={type:3,value:"DOUBLE_PANEL_VERTICAL"},Vs.DOUBLE_PANEL_HORIZONTAL={type:3,value:"DOUBLE_PANEL_HORIZONTAL"},Vs.TRIPLE_PANEL_VERTICAL={type:3,value:"TRIPLE_PANEL_VERTICAL"},Vs.TRIPLE_PANEL_BOTTOM={type:3,value:"TRIPLE_PANEL_BOTTOM"},Vs.TRIPLE_PANEL_TOP={type:3,value:"TRIPLE_PANEL_TOP"},Vs.TRIPLE_PANEL_LEFT={type:3,value:"TRIPLE_PANEL_LEFT"},Vs.TRIPLE_PANEL_RIGHT={type:3,value:"TRIPLE_PANEL_RIGHT"},Vs.TRIPLE_PANEL_HORIZONTAL={type:3,value:"TRIPLE_PANEL_HORIZONTAL"},Vs.USERDEFINED={type:3,value:"USERDEFINED"},Vs.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcWindowStyleOperationEnum=Vs;class ks{}ks.WINDOW={type:3,value:"WINDOW"},ks.SKYLIGHT={type:3,value:"SKYLIGHT"},ks.LIGHTDOME={type:3,value:"LIGHTDOME"},ks.USERDEFINED={type:3,value:"USERDEFINED"},ks.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcWindowTypeEnum=ks;class js{}js.SINGLE_PANEL={type:3,value:"SINGLE_PANEL"},js.DOUBLE_PANEL_VERTICAL={type:3,value:"DOUBLE_PANEL_VERTICAL"},js.DOUBLE_PANEL_HORIZONTAL={type:3,value:"DOUBLE_PANEL_HORIZONTAL"},js.TRIPLE_PANEL_VERTICAL={type:3,value:"TRIPLE_PANEL_VERTICAL"},js.TRIPLE_PANEL_BOTTOM={type:3,value:"TRIPLE_PANEL_BOTTOM"},js.TRIPLE_PANEL_TOP={type:3,value:"TRIPLE_PANEL_TOP"},js.TRIPLE_PANEL_LEFT={type:3,value:"TRIPLE_PANEL_LEFT"},js.TRIPLE_PANEL_RIGHT={type:3,value:"TRIPLE_PANEL_RIGHT"},js.TRIPLE_PANEL_HORIZONTAL={type:3,value:"TRIPLE_PANEL_HORIZONTAL"},js.USERDEFINED={type:3,value:"USERDEFINED"},js.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcWindowTypePartitioningEnum=js;class Qs{}Qs.FIRSTSHIFT={type:3,value:"FIRSTSHIFT"},Qs.SECONDSHIFT={type:3,value:"SECONDSHIFT"},Qs.THIRDSHIFT={type:3,value:"THIRDSHIFT"},Qs.USERDEFINED={type:3,value:"USERDEFINED"},Qs.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcWorkCalendarTypeEnum=Qs;class Ws{}Ws.ACTUAL={type:3,value:"ACTUAL"},Ws.BASELINE={type:3,value:"BASELINE"},Ws.PLANNED={type:3,value:"PLANNED"},Ws.USERDEFINED={type:3,value:"USERDEFINED"},Ws.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcWorkPlanTypeEnum=Ws;class zs{}zs.ACTUAL={type:3,value:"ACTUAL"},zs.BASELINE={type:3,value:"BASELINE"},zs.PLANNED={type:3,value:"PLANNED"},zs.USERDEFINED={type:3,value:"USERDEFINED"},zs.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcWorkScheduleTypeEnum=zs;e.IfcActorRole=class extends qv{constructor(e,t,s,i){super(e),this.Role=t,this.UserDefinedRole=s,this.Description=i,this.type=3630933823}};class Ks extends qv{constructor(e,t,s,i){super(e),this.Purpose=t,this.Description=s,this.UserDefinedPurpose=i,this.type=618182010}}e.IfcAddress=Ks;e.IfcApplication=class extends qv{constructor(e,t,s,i,r){super(e),this.ApplicationDeveloper=t,this.Version=s,this.ApplicationFullName=i,this.ApplicationIdentifier=r,this.type=639542469}};class Ys extends qv{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e),this.Name=t,this.Description=s,this.AppliedValue=i,this.UnitBasis=r,this.ApplicableDate=o,this.FixedUntilDate=n,this.Category=a,this.Condition=l,this.ArithmeticOperator=h,this.Components=c,this.type=411424972}}e.IfcAppliedValue=Ys;e.IfcApproval=class extends qv{constructor(e,t,s,i,r,o,n,a,l,h){super(e),this.Identifier=t,this.Name=s,this.Description=i,this.TimeOfApproval=r,this.Status=o,this.Level=n,this.Qualifier=a,this.RequestingApproval=l,this.GivingApproval=h,this.type=130549933}};class Xs extends qv{constructor(e,t){super(e),this.Name=t,this.type=4037036970}}e.IfcBoundaryCondition=Xs;e.IfcBoundaryEdgeCondition=class extends Xs{constructor(e,t,s,i,r,o,n,a){super(e,t),this.Name=t,this.TranslationalStiffnessByLengthX=s,this.TranslationalStiffnessByLengthY=i,this.TranslationalStiffnessByLengthZ=r,this.RotationalStiffnessByLengthX=o,this.RotationalStiffnessByLengthY=n,this.RotationalStiffnessByLengthZ=a,this.type=1560379544}};e.IfcBoundaryFaceCondition=class extends Xs{constructor(e,t,s,i,r){super(e,t),this.Name=t,this.TranslationalStiffnessByAreaX=s,this.TranslationalStiffnessByAreaY=i,this.TranslationalStiffnessByAreaZ=r,this.type=3367102660}};class Zs extends Xs{constructor(e,t,s,i,r,o,n,a){super(e,t),this.Name=t,this.TranslationalStiffnessX=s,this.TranslationalStiffnessY=i,this.TranslationalStiffnessZ=r,this.RotationalStiffnessX=o,this.RotationalStiffnessY=n,this.RotationalStiffnessZ=a,this.type=1387855156}}e.IfcBoundaryNodeCondition=Zs;e.IfcBoundaryNodeConditionWarping=class extends Zs{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a),this.Name=t,this.TranslationalStiffnessX=s,this.TranslationalStiffnessY=i,this.TranslationalStiffnessZ=r,this.RotationalStiffnessX=o,this.RotationalStiffnessY=n,this.RotationalStiffnessZ=a,this.WarpingStiffness=l,this.type=2069777674}};class qs extends qv{constructor(e){super(e),this.type=2859738748}}e.IfcConnectionGeometry=qs;class Js extends qs{constructor(e,t,s){super(e),this.PointOnRelatingElement=t,this.PointOnRelatedElement=s,this.type=2614616156}}e.IfcConnectionPointGeometry=Js;e.IfcConnectionSurfaceGeometry=class extends qs{constructor(e,t,s){super(e),this.SurfaceOnRelatingElement=t,this.SurfaceOnRelatedElement=s,this.type=2732653382}};e.IfcConnectionVolumeGeometry=class extends qs{constructor(e,t,s){super(e),this.VolumeOnRelatingElement=t,this.VolumeOnRelatedElement=s,this.type=775493141}};class $s extends qv{constructor(e,t,s,i,r,o,n,a){super(e),this.Name=t,this.Description=s,this.ConstraintGrade=i,this.ConstraintSource=r,this.CreatingActor=o,this.CreationTime=n,this.UserDefinedGrade=a,this.type=1959218052}}e.IfcConstraint=$s;class ei extends qv{constructor(e,t,s){super(e),this.SourceCRS=t,this.TargetCRS=s,this.type=1785450214}}e.IfcCoordinateOperation=ei;class ti extends qv{constructor(e,t,s,i,r){super(e),this.Name=t,this.Description=s,this.GeodeticDatum=i,this.VerticalDatum=r,this.type=1466758467}}e.IfcCoordinateReferenceSystem=ti;e.IfcCostValue=class extends Ys{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h,c),this.Name=t,this.Description=s,this.AppliedValue=i,this.UnitBasis=r,this.ApplicableDate=o,this.FixedUntilDate=n,this.Category=a,this.Condition=l,this.ArithmeticOperator=h,this.Components=c,this.type=602808272}};e.IfcDerivedUnit=class extends qv{constructor(e,t,s,i){super(e),this.Elements=t,this.UnitType=s,this.UserDefinedType=i,this.type=1765591967}};e.IfcDerivedUnitElement=class extends qv{constructor(e,t,s){super(e),this.Unit=t,this.Exponent=s,this.type=1045800335}};e.IfcDimensionalExponents=class extends qv{constructor(e,t,s,i,r,o,n,a){super(e),this.LengthExponent=t,this.MassExponent=s,this.TimeExponent=i,this.ElectricCurrentExponent=r,this.ThermodynamicTemperatureExponent=o,this.AmountOfSubstanceExponent=n,this.LuminousIntensityExponent=a,this.type=2949456006}};class si extends qv{constructor(e){super(e),this.type=4294318154}}e.IfcExternalInformation=si;class ii extends qv{constructor(e,t,s,i){super(e),this.Location=t,this.Identification=s,this.Name=i,this.type=3200245327}}e.IfcExternalReference=ii;e.IfcExternallyDefinedHatchStyle=class extends ii{constructor(e,t,s,i){super(e,t,s,i),this.Location=t,this.Identification=s,this.Name=i,this.type=2242383968}};e.IfcExternallyDefinedSurfaceStyle=class extends ii{constructor(e,t,s,i){super(e,t,s,i),this.Location=t,this.Identification=s,this.Name=i,this.type=1040185647}};e.IfcExternallyDefinedTextFont=class extends ii{constructor(e,t,s,i){super(e,t,s,i),this.Location=t,this.Identification=s,this.Name=i,this.type=3548104201}};e.IfcGridAxis=class extends qv{constructor(e,t,s,i){super(e),this.AxisTag=t,this.AxisCurve=s,this.SameSense=i,this.type=852622518}};e.IfcIrregularTimeSeriesValue=class extends qv{constructor(e,t,s){super(e),this.TimeStamp=t,this.ListValues=s,this.type=3020489413}};e.IfcLibraryInformation=class extends si{constructor(e,t,s,i,r,o,n){super(e),this.Name=t,this.Version=s,this.Publisher=i,this.VersionDate=r,this.Location=o,this.Description=n,this.type=2655187982}};e.IfcLibraryReference=class extends ii{constructor(e,t,s,i,r,o,n){super(e,t,s,i),this.Location=t,this.Identification=s,this.Name=i,this.Description=r,this.Language=o,this.ReferencedLibrary=n,this.type=3452421091}};e.IfcLightDistributionData=class extends qv{constructor(e,t,s,i){super(e),this.MainPlaneAngle=t,this.SecondaryPlaneAngle=s,this.LuminousIntensity=i,this.type=4162380809}};e.IfcLightIntensityDistribution=class extends qv{constructor(e,t,s){super(e),this.LightDistributionCurve=t,this.DistributionData=s,this.type=1566485204}};e.IfcMapConversion=class extends ei{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s),this.SourceCRS=t,this.TargetCRS=s,this.Eastings=i,this.Northings=r,this.OrthogonalHeight=o,this.XAxisAbscissa=n,this.XAxisOrdinate=a,this.Scale=l,this.type=3057273783}};e.IfcMaterialClassificationRelationship=class extends qv{constructor(e,t,s){super(e),this.MaterialClassifications=t,this.ClassifiedMaterial=s,this.type=1847130766}};class ri extends qv{constructor(e){super(e),this.type=760658860}}e.IfcMaterialDefinition=ri;class oi extends ri{constructor(e,t,s,i,r,o,n,a){super(e),this.Material=t,this.LayerThickness=s,this.IsVentilated=i,this.Name=r,this.Description=o,this.Category=n,this.Priority=a,this.type=248100487}}e.IfcMaterialLayer=oi;e.IfcMaterialLayerSet=class extends ri{constructor(e,t,s,i){super(e),this.MaterialLayers=t,this.LayerSetName=s,this.Description=i,this.type=3303938423}};e.IfcMaterialLayerWithOffsets=class extends oi{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a),this.Material=t,this.LayerThickness=s,this.IsVentilated=i,this.Name=r,this.Description=o,this.Category=n,this.Priority=a,this.OffsetDirection=l,this.OffsetValues=h,this.type=1847252529}};e.IfcMaterialList=class extends qv{constructor(e,t){super(e),this.Materials=t,this.type=2199411900}};class ni extends ri{constructor(e,t,s,i,r,o,n){super(e),this.Name=t,this.Description=s,this.Material=i,this.Profile=r,this.Priority=o,this.Category=n,this.type=2235152071}}e.IfcMaterialProfile=ni;e.IfcMaterialProfileSet=class extends ri{constructor(e,t,s,i,r){super(e),this.Name=t,this.Description=s,this.MaterialProfiles=i,this.CompositeProfile=r,this.type=164193824}};e.IfcMaterialProfileWithOffsets=class extends ni{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n),this.Name=t,this.Description=s,this.Material=i,this.Profile=r,this.Priority=o,this.Category=n,this.OffsetValues=a,this.type=552965576}};class ai extends qv{constructor(e){super(e),this.type=1507914824}}e.IfcMaterialUsageDefinition=ai;e.IfcMeasureWithUnit=class extends qv{constructor(e,t,s){super(e),this.ValueComponent=t,this.UnitComponent=s,this.type=2597039031}};e.IfcMetric=class extends $s{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a),this.Name=t,this.Description=s,this.ConstraintGrade=i,this.ConstraintSource=r,this.CreatingActor=o,this.CreationTime=n,this.UserDefinedGrade=a,this.Benchmark=l,this.ValueSource=h,this.DataValue=c,this.ReferencePath=u,this.type=3368373690}};e.IfcMonetaryUnit=class extends qv{constructor(e,t){super(e),this.Currency=t,this.type=2706619895}};class li extends qv{constructor(e,t,s){super(e),this.Dimensions=t,this.UnitType=s,this.type=1918398963}}e.IfcNamedUnit=li;class hi extends qv{constructor(e){super(e),this.type=3701648758}}e.IfcObjectPlacement=hi;e.IfcObjective=class extends $s{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a),this.Name=t,this.Description=s,this.ConstraintGrade=i,this.ConstraintSource=r,this.CreatingActor=o,this.CreationTime=n,this.UserDefinedGrade=a,this.BenchmarkValues=l,this.LogicalAggregator=h,this.ObjectiveQualifier=c,this.UserDefinedQualifier=u,this.type=2251480897}};e.IfcOrganization=class extends qv{constructor(e,t,s,i,r,o){super(e),this.Identification=t,this.Name=s,this.Description=i,this.Roles=r,this.Addresses=o,this.type=4251960020}};e.IfcOwnerHistory=class extends qv{constructor(e,t,s,i,r,o,n,a,l){super(e),this.OwningUser=t,this.OwningApplication=s,this.State=i,this.ChangeAction=r,this.LastModifiedDate=o,this.LastModifyingUser=n,this.LastModifyingApplication=a,this.CreationDate=l,this.type=1207048766}};e.IfcPerson=class extends qv{constructor(e,t,s,i,r,o,n,a,l){super(e),this.Identification=t,this.FamilyName=s,this.GivenName=i,this.MiddleNames=r,this.PrefixTitles=o,this.SuffixTitles=n,this.Roles=a,this.Addresses=l,this.type=2077209135}};e.IfcPersonAndOrganization=class extends qv{constructor(e,t,s,i){super(e),this.ThePerson=t,this.TheOrganization=s,this.Roles=i,this.type=101040310}};class ci extends qv{constructor(e,t,s){super(e),this.Name=t,this.Description=s,this.type=2483315170}}e.IfcPhysicalQuantity=ci;class ui extends ci{constructor(e,t,s,i){super(e,t,s),this.Name=t,this.Description=s,this.Unit=i,this.type=2226359599}}e.IfcPhysicalSimpleQuantity=ui;e.IfcPostalAddress=class extends Ks{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i),this.Purpose=t,this.Description=s,this.UserDefinedPurpose=i,this.InternalLocation=r,this.AddressLines=o,this.PostalBox=n,this.Town=a,this.Region=l,this.PostalCode=h,this.Country=c,this.type=3355820592}};class Ai extends qv{constructor(e){super(e),this.type=677532197}}e.IfcPresentationItem=Ai;class pi extends qv{constructor(e,t,s,i,r){super(e),this.Name=t,this.Description=s,this.AssignedItems=i,this.Identifier=r,this.type=2022622350}}e.IfcPresentationLayerAssignment=pi;e.IfcPresentationLayerWithStyle=class extends pi{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r),this.Name=t,this.Description=s,this.AssignedItems=i,this.Identifier=r,this.LayerOn=o,this.LayerFrozen=n,this.LayerBlocked=a,this.LayerStyles=l,this.type=1304840413}};class di extends qv{constructor(e,t){super(e),this.Name=t,this.type=3119450353}}e.IfcPresentationStyle=di;e.IfcPresentationStyleAssignment=class extends qv{constructor(e,t){super(e),this.Styles=t,this.type=2417041796}};class fi extends qv{constructor(e,t,s,i){super(e),this.Name=t,this.Description=s,this.Representations=i,this.type=2095639259}}e.IfcProductRepresentation=fi;class mi extends qv{constructor(e,t,s){super(e),this.ProfileType=t,this.ProfileName=s,this.type=3958567839}}e.IfcProfileDef=mi;e.IfcProjectedCRS=class extends ti{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r),this.Name=t,this.Description=s,this.GeodeticDatum=i,this.VerticalDatum=r,this.MapProjection=o,this.MapZone=n,this.MapUnit=a,this.type=3843373140}};class gi extends qv{constructor(e){super(e),this.type=986844984}}e.IfcPropertyAbstraction=gi;e.IfcPropertyEnumeration=class extends gi{constructor(e,t,s,i){super(e),this.Name=t,this.EnumerationValues=s,this.Unit=i,this.type=3710013099}};e.IfcQuantityArea=class extends ui{constructor(e,t,s,i,r,o){super(e,t,s,i),this.Name=t,this.Description=s,this.Unit=i,this.AreaValue=r,this.Formula=o,this.type=2044713172}};e.IfcQuantityCount=class extends ui{constructor(e,t,s,i,r,o){super(e,t,s,i),this.Name=t,this.Description=s,this.Unit=i,this.CountValue=r,this.Formula=o,this.type=2093928680}};e.IfcQuantityLength=class extends ui{constructor(e,t,s,i,r,o){super(e,t,s,i),this.Name=t,this.Description=s,this.Unit=i,this.LengthValue=r,this.Formula=o,this.type=931644368}};e.IfcQuantityTime=class extends ui{constructor(e,t,s,i,r,o){super(e,t,s,i),this.Name=t,this.Description=s,this.Unit=i,this.TimeValue=r,this.Formula=o,this.type=3252649465}};e.IfcQuantityVolume=class extends ui{constructor(e,t,s,i,r,o){super(e,t,s,i),this.Name=t,this.Description=s,this.Unit=i,this.VolumeValue=r,this.Formula=o,this.type=2405470396}};e.IfcQuantityWeight=class extends ui{constructor(e,t,s,i,r,o){super(e,t,s,i),this.Name=t,this.Description=s,this.Unit=i,this.WeightValue=r,this.Formula=o,this.type=825690147}};e.IfcRecurrencePattern=class extends qv{constructor(e,t,s,i,r,o,n,a,l){super(e),this.RecurrenceType=t,this.DayComponent=s,this.WeekdayComponent=i,this.MonthComponent=r,this.Position=o,this.Interval=n,this.Occurrences=a,this.TimePeriods=l,this.type=3915482550}};e.IfcReference=class extends qv{constructor(e,t,s,i,r,o){super(e),this.TypeIdentifier=t,this.AttributeIdentifier=s,this.InstanceName=i,this.ListPositions=r,this.InnerReference=o,this.type=2433181523}};class yi extends qv{constructor(e,t,s,i,r){super(e),this.ContextOfItems=t,this.RepresentationIdentifier=s,this.RepresentationType=i,this.Items=r,this.type=1076942058}}e.IfcRepresentation=yi;class Ei extends qv{constructor(e,t,s){super(e),this.ContextIdentifier=t,this.ContextType=s,this.type=3377609919}}e.IfcRepresentationContext=Ei;class vi extends qv{constructor(e){super(e),this.type=3008791417}}e.IfcRepresentationItem=vi;e.IfcRepresentationMap=class extends qv{constructor(e,t,s){super(e),this.MappingOrigin=t,this.MappedRepresentation=s,this.type=1660063152}};class _i extends qv{constructor(e,t,s){super(e),this.Name=t,this.Description=s,this.type=2439245199}}e.IfcResourceLevelRelationship=_i;class Ii extends qv{constructor(e,t,s,i,r){super(e),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.type=2341007311}}e.IfcRoot=Ii;e.IfcSIUnit=class extends li{constructor(e,t,s,i){super(e,new Zv(0),t),this.UnitType=t,this.Prefix=s,this.Name=i,this.type=448429030}};class Ti extends qv{constructor(e,t,s,i){super(e),this.Name=t,this.DataOrigin=s,this.UserDefinedDataOrigin=i,this.type=1054537805}}e.IfcSchedulingTime=Ti;e.IfcShapeAspect=class extends qv{constructor(e,t,s,i,r,o){super(e),this.ShapeRepresentations=t,this.Name=s,this.Description=i,this.ProductDefinitional=r,this.PartOfProductDefinitionShape=o,this.type=867548509}};class Pi extends yi{constructor(e,t,s,i,r){super(e,t,s,i,r),this.ContextOfItems=t,this.RepresentationIdentifier=s,this.RepresentationType=i,this.Items=r,this.type=3982875396}}e.IfcShapeModel=Pi;e.IfcShapeRepresentation=class extends Pi{constructor(e,t,s,i,r){super(e,t,s,i,r),this.ContextOfItems=t,this.RepresentationIdentifier=s,this.RepresentationType=i,this.Items=r,this.type=4240577450}};class Di extends qv{constructor(e,t){super(e),this.Name=t,this.type=2273995522}}e.IfcStructuralConnectionCondition=Di;class bi extends qv{constructor(e,t){super(e),this.Name=t,this.type=2162789131}}e.IfcStructuralLoad=bi;e.IfcStructuralLoadConfiguration=class extends bi{constructor(e,t,s,i){super(e,t),this.Name=t,this.Values=s,this.Locations=i,this.type=3478079324}};class Ri extends bi{constructor(e,t){super(e,t),this.Name=t,this.type=609421318}}e.IfcStructuralLoadOrResult=Ri;class Ci extends Ri{constructor(e,t){super(e,t),this.Name=t,this.type=2525727697}}e.IfcStructuralLoadStatic=Ci;e.IfcStructuralLoadTemperature=class extends Ci{constructor(e,t,s,i,r){super(e,t),this.Name=t,this.DeltaTConstant=s,this.DeltaTY=i,this.DeltaTZ=r,this.type=3408363356}};class xi extends yi{constructor(e,t,s,i,r){super(e,t,s,i,r),this.ContextOfItems=t,this.RepresentationIdentifier=s,this.RepresentationType=i,this.Items=r,this.type=2830218821}}e.IfcStyleModel=xi;e.IfcStyledItem=class extends vi{constructor(e,t,s,i){super(e),this.Item=t,this.Styles=s,this.Name=i,this.type=3958052878}};e.IfcStyledRepresentation=class extends xi{constructor(e,t,s,i,r){super(e,t,s,i,r),this.ContextOfItems=t,this.RepresentationIdentifier=s,this.RepresentationType=i,this.Items=r,this.type=3049322572}};e.IfcSurfaceReinforcementArea=class extends Ri{constructor(e,t,s,i,r){super(e,t),this.Name=t,this.SurfaceReinforcement1=s,this.SurfaceReinforcement2=i,this.ShearReinforcement=r,this.type=2934153892}};e.IfcSurfaceStyle=class extends di{constructor(e,t,s,i){super(e,t),this.Name=t,this.Side=s,this.Styles=i,this.type=1300840506}};e.IfcSurfaceStyleLighting=class extends Ai{constructor(e,t,s,i,r){super(e),this.DiffuseTransmissionColour=t,this.DiffuseReflectionColour=s,this.TransmissionColour=i,this.ReflectanceColour=r,this.type=3303107099}};e.IfcSurfaceStyleRefraction=class extends Ai{constructor(e,t,s){super(e),this.RefractionIndex=t,this.DispersionFactor=s,this.type=1607154358}};class Ni extends Ai{constructor(e,t,s){super(e),this.SurfaceColour=t,this.Transparency=s,this.type=846575682}}e.IfcSurfaceStyleShading=Ni;e.IfcSurfaceStyleWithTextures=class extends Ai{constructor(e,t){super(e),this.Textures=t,this.type=1351298697}};class Oi extends Ai{constructor(e,t,s,i,r,o){super(e),this.RepeatS=t,this.RepeatT=s,this.Mode=i,this.TextureTransform=r,this.Parameter=o,this.type=626085974}}e.IfcSurfaceTexture=Oi;e.IfcTable=class extends qv{constructor(e,t,s,i){super(e),this.Name=t,this.Rows=s,this.Columns=i,this.type=985171141}};e.IfcTableColumn=class extends qv{constructor(e,t,s,i,r,o){super(e),this.Identifier=t,this.Name=s,this.Description=i,this.Unit=r,this.ReferencePath=o,this.type=2043862942}};e.IfcTableRow=class extends qv{constructor(e,t,s){super(e),this.RowCells=t,this.IsHeading=s,this.type=531007025}};class Si extends Ti{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f,m,g,y,E,v){super(e,t,s,i),this.Name=t,this.DataOrigin=s,this.UserDefinedDataOrigin=i,this.DurationType=r,this.ScheduleDuration=o,this.ScheduleStart=n,this.ScheduleFinish=a,this.EarlyStart=l,this.EarlyFinish=h,this.LateStart=c,this.LateFinish=u,this.FreeFloat=A,this.TotalFloat=p,this.IsCritical=d,this.StatusTime=f,this.ActualDuration=m,this.ActualStart=g,this.ActualFinish=y,this.RemainingTime=E,this.Completion=v,this.type=1549132990}}e.IfcTaskTime=Si;e.IfcTaskTimeRecurring=class extends Si{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f,m,g,y,E,v,_){super(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f,m,g,y,E,v),this.Name=t,this.DataOrigin=s,this.UserDefinedDataOrigin=i,this.DurationType=r,this.ScheduleDuration=o,this.ScheduleStart=n,this.ScheduleFinish=a,this.EarlyStart=l,this.EarlyFinish=h,this.LateStart=c,this.LateFinish=u,this.FreeFloat=A,this.TotalFloat=p,this.IsCritical=d,this.StatusTime=f,this.ActualDuration=m,this.ActualStart=g,this.ActualFinish=y,this.RemainingTime=E,this.Completion=v,this.Recurrence=_,this.type=2771591690}};e.IfcTelecomAddress=class extends Ks{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i),this.Purpose=t,this.Description=s,this.UserDefinedPurpose=i,this.TelephoneNumbers=r,this.FacsimileNumbers=o,this.PagerNumber=n,this.ElectronicMailAddresses=a,this.WWWHomePageURL=l,this.MessagingIDs=h,this.type=912023232}};e.IfcTextStyle=class extends di{constructor(e,t,s,i,r,o){super(e,t),this.Name=t,this.TextCharacterAppearance=s,this.TextStyle=i,this.TextFontStyle=r,this.ModelOrDraughting=o,this.type=1447204868}};e.IfcTextStyleForDefinedFont=class extends Ai{constructor(e,t,s){super(e),this.Colour=t,this.BackgroundColour=s,this.type=2636378356}};e.IfcTextStyleTextModel=class extends Ai{constructor(e,t,s,i,r,o,n,a){super(e),this.TextIndent=t,this.TextAlign=s,this.TextDecoration=i,this.LetterSpacing=r,this.WordSpacing=o,this.TextTransform=n,this.LineHeight=a,this.type=1640371178}};class wi extends Ai{constructor(e,t){super(e),this.Maps=t,this.type=280115917}}e.IfcTextureCoordinate=wi;e.IfcTextureCoordinateGenerator=class extends wi{constructor(e,t,s,i){super(e,t),this.Maps=t,this.Mode=s,this.Parameter=i,this.type=1742049831}};e.IfcTextureMap=class extends wi{constructor(e,t,s,i){super(e,t),this.Maps=t,this.Vertices=s,this.MappedTo=i,this.type=2552916305}};e.IfcTextureVertex=class extends Ai{constructor(e,t){super(e),this.Coordinates=t,this.type=1210645708}};e.IfcTextureVertexList=class extends Ai{constructor(e,t){super(e),this.TexCoordsList=t,this.type=3611470254}};e.IfcTimePeriod=class extends qv{constructor(e,t,s){super(e),this.StartTime=t,this.EndTime=s,this.type=1199560280}};class Mi extends qv{constructor(e,t,s,i,r,o,n,a,l){super(e),this.Name=t,this.Description=s,this.StartTime=i,this.EndTime=r,this.TimeSeriesDataType=o,this.DataOrigin=n,this.UserDefinedDataOrigin=a,this.Unit=l,this.type=3101149627}}e.IfcTimeSeries=Mi;e.IfcTimeSeriesValue=class extends qv{constructor(e,t){super(e),this.ListValues=t,this.type=581633288}};class Bi extends vi{constructor(e){super(e),this.type=1377556343}}e.IfcTopologicalRepresentationItem=Bi;e.IfcTopologyRepresentation=class extends Pi{constructor(e,t,s,i,r){super(e,t,s,i,r),this.ContextOfItems=t,this.RepresentationIdentifier=s,this.RepresentationType=i,this.Items=r,this.type=1735638870}};e.IfcUnitAssignment=class extends qv{constructor(e,t){super(e),this.Units=t,this.type=180925521}};class Fi extends Bi{constructor(e){super(e),this.type=2799835756}}e.IfcVertex=Fi;e.IfcVertexPoint=class extends Fi{constructor(e,t){super(e),this.VertexGeometry=t,this.type=1907098498}};e.IfcVirtualGridIntersection=class extends qv{constructor(e,t,s){super(e),this.IntersectingAxes=t,this.OffsetDistances=s,this.type=891718957}};e.IfcWorkTime=class extends Ti{constructor(e,t,s,i,r,o,n){super(e,t,s,i),this.Name=t,this.DataOrigin=s,this.UserDefinedDataOrigin=i,this.RecurrencePattern=r,this.Start=o,this.Finish=n,this.type=1236880293}};e.IfcApprovalRelationship=class extends _i{constructor(e,t,s,i,r){super(e,t,s),this.Name=t,this.Description=s,this.RelatingApproval=i,this.RelatedApprovals=r,this.type=3869604511}};class Li extends mi{constructor(e,t,s,i){super(e,t,s),this.ProfileType=t,this.ProfileName=s,this.OuterCurve=i,this.type=3798115385}}e.IfcArbitraryClosedProfileDef=Li;class Ui extends mi{constructor(e,t,s,i){super(e,t,s),this.ProfileType=t,this.ProfileName=s,this.Curve=i,this.type=1310608509}}e.IfcArbitraryOpenProfileDef=Ui;e.IfcArbitraryProfileDefWithVoids=class extends Li{constructor(e,t,s,i,r){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.OuterCurve=i,this.InnerCurves=r,this.type=2705031697}};e.IfcBlobTexture=class extends Oi{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o),this.RepeatS=t,this.RepeatT=s,this.Mode=i,this.TextureTransform=r,this.Parameter=o,this.RasterFormat=n,this.RasterCode=a,this.type=616511568}};e.IfcCenterLineProfileDef=class extends Ui{constructor(e,t,s,i,r){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Curve=i,this.Thickness=r,this.type=3150382593}};e.IfcClassification=class extends si{constructor(e,t,s,i,r,o,n,a){super(e),this.Source=t,this.Edition=s,this.EditionDate=i,this.Name=r,this.Description=o,this.Location=n,this.ReferenceTokens=a,this.type=747523909}};e.IfcClassificationReference=class extends ii{constructor(e,t,s,i,r,o,n){super(e,t,s,i),this.Location=t,this.Identification=s,this.Name=i,this.ReferencedSource=r,this.Description=o,this.Sort=n,this.type=647927063}};e.IfcColourRgbList=class extends Ai{constructor(e,t){super(e),this.ColourList=t,this.type=3285139300}};class Hi extends Ai{constructor(e,t){super(e),this.Name=t,this.type=3264961684}}e.IfcColourSpecification=Hi;e.IfcCompositeProfileDef=class extends mi{constructor(e,t,s,i,r){super(e,t,s),this.ProfileType=t,this.ProfileName=s,this.Profiles=i,this.Label=r,this.type=1485152156}};class Gi extends Bi{constructor(e,t){super(e),this.CfsFaces=t,this.type=370225590}}e.IfcConnectedFaceSet=Gi;e.IfcConnectionCurveGeometry=class extends qs{constructor(e,t,s){super(e),this.CurveOnRelatingElement=t,this.CurveOnRelatedElement=s,this.type=1981873012}};e.IfcConnectionPointEccentricity=class extends Js{constructor(e,t,s,i,r,o){super(e,t,s),this.PointOnRelatingElement=t,this.PointOnRelatedElement=s,this.EccentricityInX=i,this.EccentricityInY=r,this.EccentricityInZ=o,this.type=45288368}};e.IfcContextDependentUnit=class extends li{constructor(e,t,s,i){super(e,t,s),this.Dimensions=t,this.UnitType=s,this.Name=i,this.type=3050246964}};class Vi extends li{constructor(e,t,s,i,r){super(e,t,s),this.Dimensions=t,this.UnitType=s,this.Name=i,this.ConversionFactor=r,this.type=2889183280}}e.IfcConversionBasedUnit=Vi;e.IfcConversionBasedUnitWithOffset=class extends Vi{constructor(e,t,s,i,r,o){super(e,t,s,i,r),this.Dimensions=t,this.UnitType=s,this.Name=i,this.ConversionFactor=r,this.ConversionOffset=o,this.type=2713554722}};e.IfcCurrencyRelationship=class extends _i{constructor(e,t,s,i,r,o,n,a){super(e,t,s),this.Name=t,this.Description=s,this.RelatingMonetaryUnit=i,this.RelatedMonetaryUnit=r,this.ExchangeRate=o,this.RateDateTime=n,this.RateSource=a,this.type=539742890}};e.IfcCurveStyle=class extends di{constructor(e,t,s,i,r,o){super(e,t),this.Name=t,this.CurveFont=s,this.CurveWidth=i,this.CurveColour=r,this.ModelOrDraughting=o,this.type=3800577675}};e.IfcCurveStyleFont=class extends Ai{constructor(e,t,s){super(e),this.Name=t,this.PatternList=s,this.type=1105321065}};e.IfcCurveStyleFontAndScaling=class extends Ai{constructor(e,t,s,i){super(e),this.Name=t,this.CurveFont=s,this.CurveFontScaling=i,this.type=2367409068}};e.IfcCurveStyleFontPattern=class extends Ai{constructor(e,t,s){super(e),this.VisibleSegmentLength=t,this.InvisibleSegmentLength=s,this.type=3510044353}};class ki extends mi{constructor(e,t,s,i,r,o){super(e,t,s),this.ProfileType=t,this.ProfileName=s,this.ParentProfile=i,this.Operator=r,this.Label=o,this.type=3632507154}}e.IfcDerivedProfileDef=ki;e.IfcDocumentInformation=class extends si{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f,m,g){super(e),this.Identification=t,this.Name=s,this.Description=i,this.Location=r,this.Purpose=o,this.IntendedUse=n,this.Scope=a,this.Revision=l,this.DocumentOwner=h,this.Editors=c,this.CreationTime=u,this.LastRevisionTime=A,this.ElectronicFormat=p,this.ValidFrom=d,this.ValidUntil=f,this.Confidentiality=m,this.Status=g,this.type=1154170062}};e.IfcDocumentInformationRelationship=class extends _i{constructor(e,t,s,i,r,o){super(e,t,s),this.Name=t,this.Description=s,this.RelatingDocument=i,this.RelatedDocuments=r,this.RelationshipType=o,this.type=770865208}};e.IfcDocumentReference=class extends ii{constructor(e,t,s,i,r,o){super(e,t,s,i),this.Location=t,this.Identification=s,this.Name=i,this.Description=r,this.ReferencedDocument=o,this.type=3732053477}};class ji extends Bi{constructor(e,t,s){super(e),this.EdgeStart=t,this.EdgeEnd=s,this.type=3900360178}}e.IfcEdge=ji;e.IfcEdgeCurve=class extends ji{constructor(e,t,s,i,r){super(e,t,s),this.EdgeStart=t,this.EdgeEnd=s,this.EdgeGeometry=i,this.SameSense=r,this.type=476780140}};e.IfcEventTime=class extends Ti{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i),this.Name=t,this.DataOrigin=s,this.UserDefinedDataOrigin=i,this.ActualDate=r,this.EarlyDate=o,this.LateDate=n,this.ScheduleDate=a,this.type=211053100}};class Qi extends gi{constructor(e,t,s,i){super(e),this.Name=t,this.Description=s,this.Properties=i,this.type=297599258}}e.IfcExtendedProperties=Qi;e.IfcExternalReferenceRelationship=class extends _i{constructor(e,t,s,i,r){super(e,t,s),this.Name=t,this.Description=s,this.RelatingReference=i,this.RelatedResourceObjects=r,this.type=1437805879}};class Wi extends Bi{constructor(e,t){super(e),this.Bounds=t,this.type=2556980723}}e.IfcFace=Wi;class zi extends Bi{constructor(e,t,s){super(e),this.Bound=t,this.Orientation=s,this.type=1809719519}}e.IfcFaceBound=zi;e.IfcFaceOuterBound=class extends zi{constructor(e,t,s){super(e,t,s),this.Bound=t,this.Orientation=s,this.type=803316827}};class Ki extends Wi{constructor(e,t,s,i){super(e,t),this.Bounds=t,this.FaceSurface=s,this.SameSense=i,this.type=3008276851}}e.IfcFaceSurface=Ki;e.IfcFailureConnectionCondition=class extends Di{constructor(e,t,s,i,r,o,n,a){super(e,t),this.Name=t,this.TensionFailureX=s,this.TensionFailureY=i,this.TensionFailureZ=r,this.CompressionFailureX=o,this.CompressionFailureY=n,this.CompressionFailureZ=a,this.type=4219587988}};e.IfcFillAreaStyle=class extends di{constructor(e,t,s,i){super(e,t),this.Name=t,this.FillStyles=s,this.ModelorDraughting=i,this.type=738692330}};class Yi extends Ei{constructor(e,t,s,i,r,o,n){super(e,t,s),this.ContextIdentifier=t,this.ContextType=s,this.CoordinateSpaceDimension=i,this.Precision=r,this.WorldCoordinateSystem=o,this.TrueNorth=n,this.type=3448662350}}e.IfcGeometricRepresentationContext=Yi;class Xi extends vi{constructor(e){super(e),this.type=2453401579}}e.IfcGeometricRepresentationItem=Xi;e.IfcGeometricRepresentationSubContext=class extends Yi{constructor(e,s,i,r,o,n,a){super(e,s,i,new t(0),null,new Zv(0),null),this.ContextIdentifier=s,this.ContextType=i,this.ParentContext=r,this.TargetScale=o,this.TargetView=n,this.UserDefinedTargetView=a,this.type=4142052618}};class Zi extends Xi{constructor(e,t){super(e),this.Elements=t,this.type=3590301190}}e.IfcGeometricSet=Zi;e.IfcGridPlacement=class extends hi{constructor(e,t,s){super(e),this.PlacementLocation=t,this.PlacementRefDirection=s,this.type=178086475}};class qi extends Xi{constructor(e,t,s){super(e),this.BaseSurface=t,this.AgreementFlag=s,this.type=812098782}}e.IfcHalfSpaceSolid=qi;e.IfcImageTexture=class extends Oi{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.RepeatS=t,this.RepeatT=s,this.Mode=i,this.TextureTransform=r,this.Parameter=o,this.URLReference=n,this.type=3905492369}};e.IfcIndexedColourMap=class extends Ai{constructor(e,t,s,i,r){super(e),this.MappedTo=t,this.Opacity=s,this.Colours=i,this.ColourIndex=r,this.type=3570813810}};class Ji extends wi{constructor(e,t,s,i){super(e,t),this.Maps=t,this.MappedTo=s,this.TexCoords=i,this.type=1437953363}}e.IfcIndexedTextureMap=Ji;e.IfcIndexedTriangleTextureMap=class extends Ji{constructor(e,t,s,i,r){super(e,t,s,i),this.Maps=t,this.MappedTo=s,this.TexCoords=i,this.TexCoordIndex=r,this.type=2133299955}};e.IfcIrregularTimeSeries=class extends Mi{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.Name=t,this.Description=s,this.StartTime=i,this.EndTime=r,this.TimeSeriesDataType=o,this.DataOrigin=n,this.UserDefinedDataOrigin=a,this.Unit=l,this.Values=h,this.type=3741457305}};e.IfcLagTime=class extends Ti{constructor(e,t,s,i,r,o){super(e,t,s,i),this.Name=t,this.DataOrigin=s,this.UserDefinedDataOrigin=i,this.LagValue=r,this.DurationType=o,this.type=1585845231}};class $i extends Xi{constructor(e,t,s,i,r){super(e),this.Name=t,this.LightColour=s,this.AmbientIntensity=i,this.Intensity=r,this.type=1402838566}}e.IfcLightSource=$i;e.IfcLightSourceAmbient=class extends $i{constructor(e,t,s,i,r){super(e,t,s,i,r),this.Name=t,this.LightColour=s,this.AmbientIntensity=i,this.Intensity=r,this.type=125510826}};e.IfcLightSourceDirectional=class extends $i{constructor(e,t,s,i,r,o){super(e,t,s,i,r),this.Name=t,this.LightColour=s,this.AmbientIntensity=i,this.Intensity=r,this.Orientation=o,this.type=2604431987}};e.IfcLightSourceGoniometric=class extends $i{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r),this.Name=t,this.LightColour=s,this.AmbientIntensity=i,this.Intensity=r,this.Position=o,this.ColourAppearance=n,this.ColourTemperature=a,this.LuminousFlux=l,this.LightEmissionSource=h,this.LightDistributionDataSource=c,this.type=4266656042}};class er extends $i{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r),this.Name=t,this.LightColour=s,this.AmbientIntensity=i,this.Intensity=r,this.Position=o,this.Radius=n,this.ConstantAttenuation=a,this.DistanceAttenuation=l,this.QuadricAttenuation=h,this.type=1520743889}}e.IfcLightSourcePositional=er;e.IfcLightSourceSpot=class extends er{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p){super(e,t,s,i,r,o,n,a,l,h),this.Name=t,this.LightColour=s,this.AmbientIntensity=i,this.Intensity=r,this.Position=o,this.Radius=n,this.ConstantAttenuation=a,this.DistanceAttenuation=l,this.QuadricAttenuation=h,this.Orientation=c,this.ConcentrationExponent=u,this.SpreadAngle=A,this.BeamWidthAngle=p,this.type=3422422726}};e.IfcLocalPlacement=class extends hi{constructor(e,t,s){super(e),this.PlacementRelTo=t,this.RelativePlacement=s,this.type=2624227202}};class tr extends Bi{constructor(e){super(e),this.type=1008929658}}e.IfcLoop=tr;e.IfcMappedItem=class extends vi{constructor(e,t,s){super(e),this.MappingSource=t,this.MappingTarget=s,this.type=2347385850}};e.IfcMaterial=class extends ri{constructor(e,t,s,i){super(e),this.Name=t,this.Description=s,this.Category=i,this.type=1838606355}};e.IfcMaterialConstituent=class extends ri{constructor(e,t,s,i,r,o){super(e),this.Name=t,this.Description=s,this.Material=i,this.Fraction=r,this.Category=o,this.type=3708119e3}};e.IfcMaterialConstituentSet=class extends ri{constructor(e,t,s,i){super(e),this.Name=t,this.Description=s,this.MaterialConstituents=i,this.type=2852063980}};e.IfcMaterialDefinitionRepresentation=class extends fi{constructor(e,t,s,i,r){super(e,t,s,i),this.Name=t,this.Description=s,this.Representations=i,this.RepresentedMaterial=r,this.type=2022407955}};e.IfcMaterialLayerSetUsage=class extends ai{constructor(e,t,s,i,r,o){super(e),this.ForLayerSet=t,this.LayerSetDirection=s,this.DirectionSense=i,this.OffsetFromReferenceLine=r,this.ReferenceExtent=o,this.type=1303795690}};class sr extends ai{constructor(e,t,s,i){super(e),this.ForProfileSet=t,this.CardinalPoint=s,this.ReferenceExtent=i,this.type=3079605661}}e.IfcMaterialProfileSetUsage=sr;e.IfcMaterialProfileSetUsageTapering=class extends sr{constructor(e,t,s,i,r,o){super(e,t,s,i),this.ForProfileSet=t,this.CardinalPoint=s,this.ReferenceExtent=i,this.ForProfileEndSet=r,this.CardinalEndPoint=o,this.type=3404854881}};e.IfcMaterialProperties=class extends Qi{constructor(e,t,s,i,r){super(e,t,s,i),this.Name=t,this.Description=s,this.Properties=i,this.Material=r,this.type=3265635763}};e.IfcMaterialRelationship=class extends _i{constructor(e,t,s,i,r,o){super(e,t,s),this.Name=t,this.Description=s,this.RelatingMaterial=i,this.RelatedMaterials=r,this.Expression=o,this.type=853536259}};e.IfcMirroredProfileDef=class extends ki{constructor(e,t,s,i,r){super(e,t,s,i,new Zv(0),r),this.ProfileType=t,this.ProfileName=s,this.ParentProfile=i,this.Label=r,this.type=2998442950}};class ir extends Ii{constructor(e,t,s,i,r){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.type=219451334}}e.IfcObjectDefinition=ir;e.IfcOpenShell=class extends Gi{constructor(e,t){super(e,t),this.CfsFaces=t,this.type=2665983363}};e.IfcOrganizationRelationship=class extends _i{constructor(e,t,s,i,r){super(e,t,s),this.Name=t,this.Description=s,this.RelatingOrganization=i,this.RelatedOrganizations=r,this.type=1411181986}};e.IfcOrientedEdge=class extends ji{constructor(e,t,s){super(e,new Zv(0),new Zv(0)),this.EdgeElement=t,this.Orientation=s,this.type=1029017970}};class rr extends mi{constructor(e,t,s,i){super(e,t,s),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.type=2529465313}}e.IfcParameterizedProfileDef=rr;e.IfcPath=class extends Bi{constructor(e,t){super(e),this.EdgeList=t,this.type=2519244187}};e.IfcPhysicalComplexQuantity=class extends ci{constructor(e,t,s,i,r,o,n){super(e,t,s),this.Name=t,this.Description=s,this.HasQuantities=i,this.Discrimination=r,this.Quality=o,this.Usage=n,this.type=3021840470}};e.IfcPixelTexture=class extends Oi{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o),this.RepeatS=t,this.RepeatT=s,this.Mode=i,this.TextureTransform=r,this.Parameter=o,this.Width=n,this.Height=a,this.ColourComponents=l,this.Pixel=h,this.type=597895409}};class or extends Xi{constructor(e,t){super(e),this.Location=t,this.type=2004835150}}e.IfcPlacement=or;class nr extends Xi{constructor(e,t,s){super(e),this.SizeInX=t,this.SizeInY=s,this.type=1663979128}}e.IfcPlanarExtent=nr;class ar extends Xi{constructor(e){super(e),this.type=2067069095}}e.IfcPoint=ar;e.IfcPointOnCurve=class extends ar{constructor(e,t,s){super(e),this.BasisCurve=t,this.PointParameter=s,this.type=4022376103}};e.IfcPointOnSurface=class extends ar{constructor(e,t,s,i){super(e),this.BasisSurface=t,this.PointParameterU=s,this.PointParameterV=i,this.type=1423911732}};e.IfcPolyLoop=class extends tr{constructor(e,t){super(e),this.Polygon=t,this.type=2924175390}};e.IfcPolygonalBoundedHalfSpace=class extends qi{constructor(e,t,s,i,r){super(e,t,s),this.BaseSurface=t,this.AgreementFlag=s,this.Position=i,this.PolygonalBoundary=r,this.type=2775532180}};class lr extends Ai{constructor(e,t){super(e),this.Name=t,this.type=3727388367}}e.IfcPreDefinedItem=lr;class hr extends gi{constructor(e){super(e),this.type=3778827333}}e.IfcPreDefinedProperties=hr;class cr extends lr{constructor(e,t){super(e,t),this.Name=t,this.type=1775413392}}e.IfcPreDefinedTextFont=cr;e.IfcProductDefinitionShape=class extends fi{constructor(e,t,s,i){super(e,t,s,i),this.Name=t,this.Description=s,this.Representations=i,this.type=673634403}};e.IfcProfileProperties=class extends Qi{constructor(e,t,s,i,r){super(e,t,s,i),this.Name=t,this.Description=s,this.Properties=i,this.ProfileDefinition=r,this.type=2802850158}};class ur extends gi{constructor(e,t,s){super(e),this.Name=t,this.Description=s,this.type=2598011224}}e.IfcProperty=ur;class Ar extends Ii{constructor(e,t,s,i,r){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.type=1680319473}}e.IfcPropertyDefinition=Ar;e.IfcPropertyDependencyRelationship=class extends _i{constructor(e,t,s,i,r,o){super(e,t,s),this.Name=t,this.Description=s,this.DependingProperty=i,this.DependantProperty=r,this.Expression=o,this.type=148025276}};class pr extends Ar{constructor(e,t,s,i,r){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.type=3357820518}}e.IfcPropertySetDefinition=pr;class dr extends Ar{constructor(e,t,s,i,r){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.type=1482703590}}e.IfcPropertyTemplateDefinition=dr;class fr extends pr{constructor(e,t,s,i,r){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.type=2090586900}}e.IfcQuantitySet=fr;class mr extends rr{constructor(e,t,s,i,r,o){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.XDim=r,this.YDim=o,this.type=3615266464}}e.IfcRectangleProfileDef=mr;e.IfcRegularTimeSeries=class extends Mi{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l),this.Name=t,this.Description=s,this.StartTime=i,this.EndTime=r,this.TimeSeriesDataType=o,this.DataOrigin=n,this.UserDefinedDataOrigin=a,this.Unit=l,this.TimeStep=h,this.Values=c,this.type=3413951693}};e.IfcReinforcementBarProperties=class extends hr{constructor(e,t,s,i,r,o,n){super(e),this.TotalCrossSectionArea=t,this.SteelGrade=s,this.BarSurface=i,this.EffectiveDepth=r,this.NominalBarDiameter=o,this.BarCount=n,this.type=1580146022}};class gr extends Ii{constructor(e,t,s,i,r){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.type=478536968}}e.IfcRelationship=gr;e.IfcResourceApprovalRelationship=class extends _i{constructor(e,t,s,i,r){super(e,t,s),this.Name=t,this.Description=s,this.RelatedResourceObjects=i,this.RelatingApproval=r,this.type=2943643501}};e.IfcResourceConstraintRelationship=class extends _i{constructor(e,t,s,i,r){super(e,t,s),this.Name=t,this.Description=s,this.RelatingConstraint=i,this.RelatedResourceObjects=r,this.type=1608871552}};e.IfcResourceTime=class extends Ti{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f,m,g,y){super(e,t,s,i),this.Name=t,this.DataOrigin=s,this.UserDefinedDataOrigin=i,this.ScheduleWork=r,this.ScheduleUsage=o,this.ScheduleStart=n,this.ScheduleFinish=a,this.ScheduleContour=l,this.LevelingDelay=h,this.IsOverAllocated=c,this.StatusTime=u,this.ActualWork=A,this.ActualUsage=p,this.ActualStart=d,this.ActualFinish=f,this.RemainingWork=m,this.RemainingUsage=g,this.Completion=y,this.type=1042787934}};e.IfcRoundedRectangleProfileDef=class extends mr{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.XDim=r,this.YDim=o,this.RoundingRadius=n,this.type=2778083089}};e.IfcSectionProperties=class extends hr{constructor(e,t,s,i){super(e),this.SectionType=t,this.StartProfile=s,this.EndProfile=i,this.type=2042790032}};e.IfcSectionReinforcementProperties=class extends hr{constructor(e,t,s,i,r,o,n){super(e),this.LongitudinalStartPosition=t,this.LongitudinalEndPosition=s,this.TransversePosition=i,this.ReinforcementRole=r,this.SectionDefinition=o,this.CrossSectionReinforcementDefinitions=n,this.type=4165799628}};e.IfcSectionedSpine=class extends Xi{constructor(e,t,s,i){super(e),this.SpineCurve=t,this.CrossSections=s,this.CrossSectionPositions=i,this.type=1509187699}};e.IfcShellBasedSurfaceModel=class extends Xi{constructor(e,t){super(e),this.SbsmBoundary=t,this.type=4124623270}};class yr extends ur{constructor(e,t,s){super(e,t,s),this.Name=t,this.Description=s,this.type=3692461612}}e.IfcSimpleProperty=yr;e.IfcSlippageConnectionCondition=class extends Di{constructor(e,t,s,i,r){super(e,t),this.Name=t,this.SlippageX=s,this.SlippageY=i,this.SlippageZ=r,this.type=2609359061}};class Er extends Xi{constructor(e){super(e),this.type=723233188}}e.IfcSolidModel=Er;e.IfcStructuralLoadLinearForce=class extends Ci{constructor(e,t,s,i,r,o,n,a){super(e,t),this.Name=t,this.LinearForceX=s,this.LinearForceY=i,this.LinearForceZ=r,this.LinearMomentX=o,this.LinearMomentY=n,this.LinearMomentZ=a,this.type=1595516126}};e.IfcStructuralLoadPlanarForce=class extends Ci{constructor(e,t,s,i,r){super(e,t),this.Name=t,this.PlanarForceX=s,this.PlanarForceY=i,this.PlanarForceZ=r,this.type=2668620305}};class vr extends Ci{constructor(e,t,s,i,r,o,n,a){super(e,t),this.Name=t,this.DisplacementX=s,this.DisplacementY=i,this.DisplacementZ=r,this.RotationalDisplacementRX=o,this.RotationalDisplacementRY=n,this.RotationalDisplacementRZ=a,this.type=2473145415}}e.IfcStructuralLoadSingleDisplacement=vr;e.IfcStructuralLoadSingleDisplacementDistortion=class extends vr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a),this.Name=t,this.DisplacementX=s,this.DisplacementY=i,this.DisplacementZ=r,this.RotationalDisplacementRX=o,this.RotationalDisplacementRY=n,this.RotationalDisplacementRZ=a,this.Distortion=l,this.type=1973038258}};class _r extends Ci{constructor(e,t,s,i,r,o,n,a){super(e,t),this.Name=t,this.ForceX=s,this.ForceY=i,this.ForceZ=r,this.MomentX=o,this.MomentY=n,this.MomentZ=a,this.type=1597423693}}e.IfcStructuralLoadSingleForce=_r;e.IfcStructuralLoadSingleForceWarping=class extends _r{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a),this.Name=t,this.ForceX=s,this.ForceY=i,this.ForceZ=r,this.MomentX=o,this.MomentY=n,this.MomentZ=a,this.WarpingMoment=l,this.type=1190533807}};e.IfcSubedge=class extends ji{constructor(e,t,s,i){super(e,t,s),this.EdgeStart=t,this.EdgeEnd=s,this.ParentEdge=i,this.type=2233826070}};class Ir extends Xi{constructor(e){super(e),this.type=2513912981}}e.IfcSurface=Ir;e.IfcSurfaceStyleRendering=class extends Ni{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s),this.SurfaceColour=t,this.Transparency=s,this.DiffuseColour=i,this.TransmissionColour=r,this.DiffuseTransmissionColour=o,this.ReflectionColour=n,this.SpecularColour=a,this.SpecularHighlight=l,this.ReflectanceMethod=h,this.type=1878645084}};class Tr extends Er{constructor(e,t,s){super(e),this.SweptArea=t,this.Position=s,this.type=2247615214}}e.IfcSweptAreaSolid=Tr;class Pr extends Er{constructor(e,t,s,i,r,o){super(e),this.Directrix=t,this.Radius=s,this.InnerRadius=i,this.StartParam=r,this.EndParam=o,this.type=1260650574}}e.IfcSweptDiskSolid=Pr;e.IfcSweptDiskSolidPolygonal=class extends Pr{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.Directrix=t,this.Radius=s,this.InnerRadius=i,this.StartParam=r,this.EndParam=o,this.FilletRadius=n,this.type=1096409881}};class Dr extends Ir{constructor(e,t,s){super(e),this.SweptCurve=t,this.Position=s,this.type=230924584}}e.IfcSweptSurface=Dr;e.IfcTShapeProfileDef=class extends rr{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.Depth=r,this.FlangeWidth=o,this.WebThickness=n,this.FlangeThickness=a,this.FilletRadius=l,this.FlangeEdgeRadius=h,this.WebEdgeRadius=c,this.WebSlope=u,this.FlangeSlope=A,this.type=3071757647}};class br extends Xi{constructor(e){super(e),this.type=901063453}}e.IfcTessellatedItem=br;class Rr extends Xi{constructor(e,t,s,i){super(e),this.Literal=t,this.Placement=s,this.Path=i,this.type=4282788508}}e.IfcTextLiteral=Rr;e.IfcTextLiteralWithExtent=class extends Rr{constructor(e,t,s,i,r,o){super(e,t,s,i),this.Literal=t,this.Placement=s,this.Path=i,this.Extent=r,this.BoxAlignment=o,this.type=3124975700}};e.IfcTextStyleFontModel=class extends cr{constructor(e,t,s,i,r,o,n){super(e,t),this.Name=t,this.FontFamily=s,this.FontStyle=i,this.FontVariant=r,this.FontWeight=o,this.FontSize=n,this.type=1983826977}};e.IfcTrapeziumProfileDef=class extends rr{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.BottomXDim=r,this.TopXDim=o,this.YDim=n,this.TopXOffset=a,this.type=2715220739}};class Cr extends ir{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.type=1628702193}}e.IfcTypeObject=Cr;class xr extends Cr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.Identification=a,this.LongDescription=l,this.ProcessType=h,this.type=3736923433}}e.IfcTypeProcess=xr;class Nr extends Cr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.type=2347495698}}e.IfcTypeProduct=Nr;class Or extends Cr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.Identification=a,this.LongDescription=l,this.ResourceType=h,this.type=3698973494}}e.IfcTypeResource=Or;e.IfcUShapeProfileDef=class extends rr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.Depth=r,this.FlangeWidth=o,this.WebThickness=n,this.FlangeThickness=a,this.FilletRadius=l,this.EdgeRadius=h,this.FlangeSlope=c,this.type=427810014}};e.IfcVector=class extends Xi{constructor(e,t,s){super(e),this.Orientation=t,this.Magnitude=s,this.type=1417489154}};e.IfcVertexLoop=class extends tr{constructor(e,t){super(e),this.LoopVertex=t,this.type=2759199220}};e.IfcWindowStyle=class extends Nr{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ConstructionType=h,this.OperationType=c,this.ParameterTakesPrecedence=u,this.Sizeable=A,this.type=1299126871}};e.IfcZShapeProfileDef=class extends rr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.Depth=r,this.FlangeWidth=o,this.WebThickness=n,this.FlangeThickness=a,this.FilletRadius=l,this.EdgeRadius=h,this.type=2543172580}};e.IfcAdvancedFace=class extends Ki{constructor(e,t,s,i){super(e,t,s,i),this.Bounds=t,this.FaceSurface=s,this.SameSense=i,this.type=3406155212}};e.IfcAnnotationFillArea=class extends Xi{constructor(e,t,s){super(e),this.OuterBoundary=t,this.InnerBoundaries=s,this.type=669184980}};e.IfcAsymmetricIShapeProfileDef=class extends rr{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.BottomFlangeWidth=r,this.OverallDepth=o,this.WebThickness=n,this.BottomFlangeThickness=a,this.BottomFlangeFilletRadius=l,this.TopFlangeWidth=h,this.TopFlangeThickness=c,this.TopFlangeFilletRadius=u,this.BottomFlangeEdgeRadius=A,this.BottomFlangeSlope=p,this.TopFlangeEdgeRadius=d,this.TopFlangeSlope=f,this.type=3207858831}};e.IfcAxis1Placement=class extends or{constructor(e,t,s){super(e,t),this.Location=t,this.Axis=s,this.type=4261334040}};e.IfcAxis2Placement2D=class extends or{constructor(e,t,s){super(e,t),this.Location=t,this.RefDirection=s,this.type=3125803723}};e.IfcAxis2Placement3D=class extends or{constructor(e,t,s,i){super(e,t),this.Location=t,this.Axis=s,this.RefDirection=i,this.type=2740243338}};class Sr extends Xi{constructor(e,t,s,i){super(e),this.Operator=t,this.FirstOperand=s,this.SecondOperand=i,this.type=2736907675}}e.IfcBooleanResult=Sr;class wr extends Ir{constructor(e){super(e),this.type=4182860854}}e.IfcBoundedSurface=wr;e.IfcBoundingBox=class extends Xi{constructor(e,t,s,i,r){super(e),this.Corner=t,this.XDim=s,this.YDim=i,this.ZDim=r,this.type=2581212453}};e.IfcBoxedHalfSpace=class extends qi{constructor(e,t,s,i){super(e,t,s),this.BaseSurface=t,this.AgreementFlag=s,this.Enclosure=i,this.type=2713105998}};e.IfcCShapeProfileDef=class extends rr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.Depth=r,this.Width=o,this.WallThickness=n,this.Girth=a,this.InternalFilletRadius=l,this.type=2898889636}};e.IfcCartesianPoint=class extends ar{constructor(e,t){super(e),this.Coordinates=t,this.type=1123145078}};class Mr extends Xi{constructor(e){super(e),this.type=574549367}}e.IfcCartesianPointList=Mr;e.IfcCartesianPointList2D=class extends Mr{constructor(e,t){super(e),this.CoordList=t,this.type=1675464909}};e.IfcCartesianPointList3D=class extends Mr{constructor(e,t){super(e),this.CoordList=t,this.type=2059837836}};class Br extends Xi{constructor(e,t,s,i,r){super(e),this.Axis1=t,this.Axis2=s,this.LocalOrigin=i,this.Scale=r,this.type=59481748}}e.IfcCartesianTransformationOperator=Br;class Fr extends Br{constructor(e,t,s,i,r){super(e,t,s,i,r),this.Axis1=t,this.Axis2=s,this.LocalOrigin=i,this.Scale=r,this.type=3749851601}}e.IfcCartesianTransformationOperator2D=Fr;e.IfcCartesianTransformationOperator2DnonUniform=class extends Fr{constructor(e,t,s,i,r,o){super(e,t,s,i,r),this.Axis1=t,this.Axis2=s,this.LocalOrigin=i,this.Scale=r,this.Scale2=o,this.type=3486308946}};class Lr extends Br{constructor(e,t,s,i,r,o){super(e,t,s,i,r),this.Axis1=t,this.Axis2=s,this.LocalOrigin=i,this.Scale=r,this.Axis3=o,this.type=3331915920}}e.IfcCartesianTransformationOperator3D=Lr;e.IfcCartesianTransformationOperator3DnonUniform=class extends Lr{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o),this.Axis1=t,this.Axis2=s,this.LocalOrigin=i,this.Scale=r,this.Axis3=o,this.Scale2=n,this.Scale3=a,this.type=1416205885}};class Ur extends rr{constructor(e,t,s,i,r){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.Radius=r,this.type=1383045692}}e.IfcCircleProfileDef=Ur;e.IfcClosedShell=class extends Gi{constructor(e,t){super(e,t),this.CfsFaces=t,this.type=2205249479}};e.IfcColourRgb=class extends Hi{constructor(e,t,s,i,r){super(e,t),this.Name=t,this.Red=s,this.Green=i,this.Blue=r,this.type=776857604}};e.IfcComplexProperty=class extends ur{constructor(e,t,s,i,r){super(e,t,s),this.Name=t,this.Description=s,this.UsageName=i,this.HasProperties=r,this.type=2542286263}};class Hr extends Xi{constructor(e,t,s,i){super(e),this.Transition=t,this.SameSense=s,this.ParentCurve=i,this.type=2485617015}}e.IfcCompositeCurveSegment=Hr;class Gr extends Or{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.Identification=a,this.LongDescription=l,this.ResourceType=h,this.BaseCosts=c,this.BaseQuantity=u,this.type=2574617495}}e.IfcConstructionResourceType=Gr;class Vr extends ir{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.LongName=n,this.Phase=a,this.RepresentationContexts=l,this.UnitsInContext=h,this.type=3419103109}}e.IfcContext=Vr;e.IfcCrewResourceType=class extends Gr{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l,h,c,u),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.Identification=a,this.LongDescription=l,this.ResourceType=h,this.BaseCosts=c,this.BaseQuantity=u,this.PredefinedType=A,this.type=1815067380}};class kr extends Xi{constructor(e,t){super(e),this.Position=t,this.type=2506170314}}e.IfcCsgPrimitive3D=kr;e.IfcCsgSolid=class extends Er{constructor(e,t){super(e),this.TreeRootExpression=t,this.type=2147822146}};class jr extends Xi{constructor(e){super(e),this.type=2601014836}}e.IfcCurve=jr;e.IfcCurveBoundedPlane=class extends wr{constructor(e,t,s,i){super(e),this.BasisSurface=t,this.OuterBoundary=s,this.InnerBoundaries=i,this.type=2827736869}};e.IfcCurveBoundedSurface=class extends wr{constructor(e,t,s,i){super(e),this.BasisSurface=t,this.Boundaries=s,this.ImplicitOuter=i,this.type=2629017746}};e.IfcDirection=class extends Xi{constructor(e,t){super(e),this.DirectionRatios=t,this.type=32440307}};e.IfcDoorStyle=class extends Nr{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.OperationType=h,this.ConstructionType=c,this.ParameterTakesPrecedence=u,this.Sizeable=A,this.type=526551008}};e.IfcEdgeLoop=class extends tr{constructor(e,t){super(e),this.EdgeList=t,this.type=1472233963}};e.IfcElementQuantity=class extends fr{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.MethodOfMeasurement=o,this.Quantities=n,this.type=1883228015}};class Qr extends Nr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=339256511}}e.IfcElementType=Qr;class Wr extends Ir{constructor(e,t){super(e),this.Position=t,this.type=2777663545}}e.IfcElementarySurface=Wr;e.IfcEllipseProfileDef=class extends rr{constructor(e,t,s,i,r,o){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.SemiAxis1=r,this.SemiAxis2=o,this.type=2835456948}};e.IfcEventType=class extends xr{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.Identification=a,this.LongDescription=l,this.ProcessType=h,this.PredefinedType=c,this.EventTriggerType=u,this.UserDefinedEventTriggerType=A,this.type=4024345920}};class zr extends Tr{constructor(e,t,s,i,r){super(e,t,s),this.SweptArea=t,this.Position=s,this.ExtrudedDirection=i,this.Depth=r,this.type=477187591}}e.IfcExtrudedAreaSolid=zr;e.IfcExtrudedAreaSolidTapered=class extends zr{constructor(e,t,s,i,r,o){super(e,t,s,i,r),this.SweptArea=t,this.Position=s,this.ExtrudedDirection=i,this.Depth=r,this.EndSweptArea=o,this.type=2804161546}};e.IfcFaceBasedSurfaceModel=class extends Xi{constructor(e,t){super(e),this.FbsmFaces=t,this.type=2047409740}};e.IfcFillAreaStyleHatching=class extends Xi{constructor(e,t,s,i,r,o){super(e),this.HatchLineAppearance=t,this.StartOfNextHatchLine=s,this.PointOfReferenceHatchLine=i,this.PatternStart=r,this.HatchLineAngle=o,this.type=374418227}};e.IfcFillAreaStyleTiles=class extends Xi{constructor(e,t,s,i){super(e),this.TilingPattern=t,this.Tiles=s,this.TilingScale=i,this.type=315944413}};e.IfcFixedReferenceSweptAreaSolid=class extends Tr{constructor(e,t,s,i,r,o,n){super(e,t,s),this.SweptArea=t,this.Position=s,this.Directrix=i,this.StartParam=r,this.EndParam=o,this.FixedReference=n,this.type=2652556860}};class Kr extends Qr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=4238390223}}e.IfcFurnishingElementType=Kr;e.IfcFurnitureType=class extends Kr{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.AssemblyPlace=c,this.PredefinedType=u,this.type=1268542332}};e.IfcGeographicElementType=class extends Qr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=4095422895}};e.IfcGeometricCurveSet=class extends Zi{constructor(e,t){super(e,t),this.Elements=t,this.type=987898635}};e.IfcIShapeProfileDef=class extends rr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.OverallWidth=r,this.OverallDepth=o,this.WebThickness=n,this.FlangeThickness=a,this.FilletRadius=l,this.FlangeEdgeRadius=h,this.FlangeSlope=c,this.type=1484403080}};class Yr extends br{constructor(e,t){super(e),this.CoordIndex=t,this.type=178912537}}e.IfcIndexedPolygonalFace=Yr;e.IfcIndexedPolygonalFaceWithVoids=class extends Yr{constructor(e,t,s){super(e,t),this.CoordIndex=t,this.InnerCoordIndices=s,this.type=2294589976}};e.IfcLShapeProfileDef=class extends rr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.Depth=r,this.Width=o,this.Thickness=n,this.FilletRadius=a,this.EdgeRadius=l,this.LegSlope=h,this.type=572779678}};e.IfcLaborResourceType=class extends Gr{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l,h,c,u),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.Identification=a,this.LongDescription=l,this.ResourceType=h,this.BaseCosts=c,this.BaseQuantity=u,this.PredefinedType=A,this.type=428585644}};e.IfcLine=class extends jr{constructor(e,t,s){super(e),this.Pnt=t,this.Dir=s,this.type=1281925730}};class Xr extends Er{constructor(e,t){super(e),this.Outer=t,this.type=1425443689}}e.IfcManifoldSolidBrep=Xr;class Zr extends ir{constructor(e,t,s,i,r,o){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.type=3888040117}}e.IfcObject=Zr;e.IfcOffsetCurve2D=class extends jr{constructor(e,t,s,i){super(e),this.BasisCurve=t,this.Distance=s,this.SelfIntersect=i,this.type=3388369263}};e.IfcOffsetCurve3D=class extends jr{constructor(e,t,s,i,r){super(e),this.BasisCurve=t,this.Distance=s,this.SelfIntersect=i,this.RefDirection=r,this.type=3505215534}};e.IfcPcurve=class extends jr{constructor(e,t,s){super(e),this.BasisSurface=t,this.ReferenceCurve=s,this.type=1682466193}};e.IfcPlanarBox=class extends nr{constructor(e,t,s,i){super(e,t,s),this.SizeInX=t,this.SizeInY=s,this.Placement=i,this.type=603570806}};e.IfcPlane=class extends Wr{constructor(e,t){super(e,t),this.Position=t,this.type=220341763}};class qr extends lr{constructor(e,t){super(e,t),this.Name=t,this.type=759155922}}e.IfcPreDefinedColour=qr;class Jr extends lr{constructor(e,t){super(e,t),this.Name=t,this.type=2559016684}}e.IfcPreDefinedCurveFont=Jr;class $r extends pr{constructor(e,t,s,i,r){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.type=3967405729}}e.IfcPreDefinedPropertySet=$r;e.IfcProcedureType=class extends xr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.Identification=a,this.LongDescription=l,this.ProcessType=h,this.PredefinedType=c,this.type=569719735}};class eo extends Zr{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.LongDescription=a,this.type=2945172077}}e.IfcProcess=eo;class to extends Zr{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.type=4208778838}}e.IfcProduct=to;e.IfcProject=class extends Vr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.LongName=n,this.Phase=a,this.RepresentationContexts=l,this.UnitsInContext=h,this.type=103090709}};e.IfcProjectLibrary=class extends Vr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.LongName=n,this.Phase=a,this.RepresentationContexts=l,this.UnitsInContext=h,this.type=653396225}};e.IfcPropertyBoundedValue=class extends yr{constructor(e,t,s,i,r,o,n){super(e,t,s),this.Name=t,this.Description=s,this.UpperBoundValue=i,this.LowerBoundValue=r,this.Unit=o,this.SetPointValue=n,this.type=871118103}};e.IfcPropertyEnumeratedValue=class extends yr{constructor(e,t,s,i,r){super(e,t,s),this.Name=t,this.Description=s,this.EnumerationValues=i,this.EnumerationReference=r,this.type=4166981789}};e.IfcPropertyListValue=class extends yr{constructor(e,t,s,i,r){super(e,t,s),this.Name=t,this.Description=s,this.ListValues=i,this.Unit=r,this.type=2752243245}};e.IfcPropertyReferenceValue=class extends yr{constructor(e,t,s,i,r){super(e,t,s),this.Name=t,this.Description=s,this.UsageName=i,this.PropertyReference=r,this.type=941946838}};e.IfcPropertySet=class extends pr{constructor(e,t,s,i,r,o){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.HasProperties=o,this.type=1451395588}};e.IfcPropertySetTemplate=class extends dr{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.TemplateType=o,this.ApplicableEntity=n,this.HasPropertyTemplates=a,this.type=492091185}};e.IfcPropertySingleValue=class extends yr{constructor(e,t,s,i,r){super(e,t,s),this.Name=t,this.Description=s,this.NominalValue=i,this.Unit=r,this.type=3650150729}};e.IfcPropertyTableValue=class extends yr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s),this.Name=t,this.Description=s,this.DefiningValues=i,this.DefinedValues=r,this.Expression=o,this.DefiningUnit=n,this.DefinedUnit=a,this.CurveInterpolation=l,this.type=110355661}};class so extends dr{constructor(e,t,s,i,r){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.type=3521284610}}e.IfcPropertyTemplate=so;e.IfcProxy=class extends to{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.ProxyType=l,this.Tag=h,this.type=3219374653}};e.IfcRectangleHollowProfileDef=class extends mr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.XDim=r,this.YDim=o,this.WallThickness=n,this.InnerFilletRadius=a,this.OuterFilletRadius=l,this.type=2770003689}};e.IfcRectangularPyramid=class extends kr{constructor(e,t,s,i,r){super(e,t),this.Position=t,this.XLength=s,this.YLength=i,this.Height=r,this.type=2798486643}};e.IfcRectangularTrimmedSurface=class extends wr{constructor(e,t,s,i,r,o,n,a){super(e),this.BasisSurface=t,this.U1=s,this.V1=i,this.U2=r,this.V2=o,this.Usense=n,this.Vsense=a,this.type=3454111270}};e.IfcReinforcementDefinitionProperties=class extends $r{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.DefinitionType=o,this.ReinforcementSectionDefinitions=n,this.type=3765753017}};class io extends gr{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatedObjectsType=n,this.type=3939117080}}e.IfcRelAssigns=io;e.IfcRelAssignsToActor=class extends io{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatedObjectsType=n,this.RelatingActor=a,this.ActingRole=l,this.type=1683148259}};e.IfcRelAssignsToControl=class extends io{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatedObjectsType=n,this.RelatingControl=a,this.type=2495723537}};class ro extends io{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatedObjectsType=n,this.RelatingGroup=a,this.type=1307041759}}e.IfcRelAssignsToGroup=ro;e.IfcRelAssignsToGroupByFactor=class extends ro{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatedObjectsType=n,this.RelatingGroup=a,this.Factor=l,this.type=1027710054}};e.IfcRelAssignsToProcess=class extends io{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatedObjectsType=n,this.RelatingProcess=a,this.QuantityInProcess=l,this.type=4278684876}};e.IfcRelAssignsToProduct=class extends io{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatedObjectsType=n,this.RelatingProduct=a,this.type=2857406711}};e.IfcRelAssignsToResource=class extends io{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatedObjectsType=n,this.RelatingResource=a,this.type=205026976}};class oo extends gr{constructor(e,t,s,i,r,o){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.type=1865459582}}e.IfcRelAssociates=oo;e.IfcRelAssociatesApproval=class extends oo{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatingApproval=n,this.type=4095574036}};e.IfcRelAssociatesClassification=class extends oo{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatingClassification=n,this.type=919958153}};e.IfcRelAssociatesConstraint=class extends oo{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.Intent=n,this.RelatingConstraint=a,this.type=2728634034}};e.IfcRelAssociatesDocument=class extends oo{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatingDocument=n,this.type=982818633}};e.IfcRelAssociatesLibrary=class extends oo{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatingLibrary=n,this.type=3840914261}};e.IfcRelAssociatesMaterial=class extends oo{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatingMaterial=n,this.type=2655215786}};class no extends gr{constructor(e,t,s,i,r){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.type=826625072}}e.IfcRelConnects=no;class ao extends no{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ConnectionGeometry=o,this.RelatingElement=n,this.RelatedElement=a,this.type=1204542856}}e.IfcRelConnectsElements=ao;e.IfcRelConnectsPathElements=class extends ao{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ConnectionGeometry=o,this.RelatingElement=n,this.RelatedElement=a,this.RelatingPriorities=l,this.RelatedPriorities=h,this.RelatedConnectionType=c,this.RelatingConnectionType=u,this.type=3945020480}};e.IfcRelConnectsPortToElement=class extends no{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingPort=o,this.RelatedElement=n,this.type=4201705270}};e.IfcRelConnectsPorts=class extends no{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingPort=o,this.RelatedPort=n,this.RealizingElement=a,this.type=3190031847}};e.IfcRelConnectsStructuralActivity=class extends no{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingElement=o,this.RelatedStructuralActivity=n,this.type=2127690289}};class lo extends no{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingStructuralMember=o,this.RelatedStructuralConnection=n,this.AppliedCondition=a,this.AdditionalConditions=l,this.SupportedLength=h,this.ConditionCoordinateSystem=c,this.type=1638771189}}e.IfcRelConnectsStructuralMember=lo;e.IfcRelConnectsWithEccentricity=class extends lo{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingStructuralMember=o,this.RelatedStructuralConnection=n,this.AppliedCondition=a,this.AdditionalConditions=l,this.SupportedLength=h,this.ConditionCoordinateSystem=c,this.ConnectionConstraint=u,this.type=504942748}};e.IfcRelConnectsWithRealizingElements=class extends ao{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ConnectionGeometry=o,this.RelatingElement=n,this.RelatedElement=a,this.RealizingElements=l,this.ConnectionType=h,this.type=3678494232}};e.IfcRelContainedInSpatialStructure=class extends no{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedElements=o,this.RelatingStructure=n,this.type=3242617779}};e.IfcRelCoversBldgElements=class extends no{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingBuildingElement=o,this.RelatedCoverings=n,this.type=886880790}};e.IfcRelCoversSpaces=class extends no{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingSpace=o,this.RelatedCoverings=n,this.type=2802773753}};e.IfcRelDeclares=class extends gr{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingContext=o,this.RelatedDefinitions=n,this.type=2565941209}};class ho extends gr{constructor(e,t,s,i,r){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.type=2551354335}}e.IfcRelDecomposes=ho;class co extends gr{constructor(e,t,s,i,r){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.type=693640335}}e.IfcRelDefines=co;e.IfcRelDefinesByObject=class extends co{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatingObject=n,this.type=1462361463}};e.IfcRelDefinesByProperties=class extends co{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatingPropertyDefinition=n,this.type=4186316022}};e.IfcRelDefinesByTemplate=class extends co{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedPropertySets=o,this.RelatingTemplate=n,this.type=307848117}};e.IfcRelDefinesByType=class extends co{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatingType=n,this.type=781010003}};e.IfcRelFillsElement=class extends no{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingOpeningElement=o,this.RelatedBuildingElement=n,this.type=3940055652}};e.IfcRelFlowControlElements=class extends no{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedControlElements=o,this.RelatingFlowElement=n,this.type=279856033}};e.IfcRelInterferesElements=class extends no{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingElement=o,this.RelatedElement=n,this.InterferenceGeometry=a,this.InterferenceType=l,this.ImpliedOrder=h,this.type=427948657}};e.IfcRelNests=class extends ho{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingObject=o,this.RelatedObjects=n,this.type=3268803585}};e.IfcRelProjectsElement=class extends ho{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingElement=o,this.RelatedFeatureElement=n,this.type=750771296}};e.IfcRelReferencedInSpatialStructure=class extends no{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedElements=o,this.RelatingStructure=n,this.type=1245217292}};e.IfcRelSequence=class extends no{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingProcess=o,this.RelatedProcess=n,this.TimeLag=a,this.SequenceType=l,this.UserDefinedSequenceType=h,this.type=4122056220}};e.IfcRelServicesBuildings=class extends no{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingSystem=o,this.RelatedBuildings=n,this.type=366585022}};class uo extends no{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingSpace=o,this.RelatedBuildingElement=n,this.ConnectionGeometry=a,this.PhysicalOrVirtualBoundary=l,this.InternalOrExternalBoundary=h,this.type=3451746338}}e.IfcRelSpaceBoundary=uo;class Ao extends uo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingSpace=o,this.RelatedBuildingElement=n,this.ConnectionGeometry=a,this.PhysicalOrVirtualBoundary=l,this.InternalOrExternalBoundary=h,this.ParentBoundary=c,this.type=3523091289}}e.IfcRelSpaceBoundary1stLevel=Ao;e.IfcRelSpaceBoundary2ndLevel=class extends Ao{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingSpace=o,this.RelatedBuildingElement=n,this.ConnectionGeometry=a,this.PhysicalOrVirtualBoundary=l,this.InternalOrExternalBoundary=h,this.ParentBoundary=c,this.CorrespondingBoundary=u,this.type=1521410863}};e.IfcRelVoidsElement=class extends ho{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingBuildingElement=o,this.RelatedOpeningElement=n,this.type=1401173127}};e.IfcReparametrisedCompositeCurveSegment=class extends Hr{constructor(e,t,s,i,r){super(e,t,s,i),this.Transition=t,this.SameSense=s,this.ParentCurve=i,this.ParamLength=r,this.type=816062949}};class po extends Zr{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.LongDescription=a,this.type=2914609552}}e.IfcResource=po;class fo extends Tr{constructor(e,t,s,i,r){super(e,t,s),this.SweptArea=t,this.Position=s,this.Axis=i,this.Angle=r,this.type=1856042241}}e.IfcRevolvedAreaSolid=fo;e.IfcRevolvedAreaSolidTapered=class extends fo{constructor(e,t,s,i,r,o){super(e,t,s,i,r),this.SweptArea=t,this.Position=s,this.Axis=i,this.Angle=r,this.EndSweptArea=o,this.type=3243963512}};e.IfcRightCircularCone=class extends kr{constructor(e,t,s,i){super(e,t),this.Position=t,this.Height=s,this.BottomRadius=i,this.type=4158566097}};e.IfcRightCircularCylinder=class extends kr{constructor(e,t,s,i){super(e,t),this.Position=t,this.Height=s,this.Radius=i,this.type=3626867408}};e.IfcSimplePropertyTemplate=class extends so{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.TemplateType=o,this.PrimaryMeasureType=n,this.SecondaryMeasureType=a,this.Enumerators=l,this.PrimaryUnit=h,this.SecondaryUnit=c,this.Expression=u,this.AccessState=A,this.type=3663146110}};class mo extends to{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.type=1412071761}}e.IfcSpatialElement=mo;class go extends Nr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=710998568}}e.IfcSpatialElementType=go;class yo extends mo{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.CompositionType=h,this.type=2706606064}}e.IfcSpatialStructureElement=yo;class Eo extends go{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=3893378262}}e.IfcSpatialStructureElementType=Eo;e.IfcSpatialZone=class extends mo{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.PredefinedType=h,this.type=463610769}};e.IfcSpatialZoneType=class extends go{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.LongName=u,this.type=2481509218}};e.IfcSphere=class extends kr{constructor(e,t,s){super(e,t),this.Position=t,this.Radius=s,this.type=451544542}};e.IfcSphericalSurface=class extends Wr{constructor(e,t,s){super(e,t),this.Position=t,this.Radius=s,this.type=4015995234}};class vo extends to{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedLoad=l,this.GlobalOrLocal=h,this.type=3544373492}}e.IfcStructuralActivity=vo;class _o extends to{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.type=3136571912}}e.IfcStructuralItem=_o;class Io extends _o{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.type=530289379}}e.IfcStructuralMember=Io;class To extends vo{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedLoad=l,this.GlobalOrLocal=h,this.type=3689010777}}e.IfcStructuralReaction=To;class Po extends Io{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.PredefinedType=l,this.Thickness=h,this.type=3979015343}}e.IfcStructuralSurfaceMember=Po;e.IfcStructuralSurfaceMemberVarying=class extends Po{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.PredefinedType=l,this.Thickness=h,this.type=2218152070}};e.IfcStructuralSurfaceReaction=class extends To{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedLoad=l,this.GlobalOrLocal=h,this.PredefinedType=c,this.type=603775116}};e.IfcSubContractResourceType=class extends Gr{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l,h,c,u),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.Identification=a,this.LongDescription=l,this.ResourceType=h,this.BaseCosts=c,this.BaseQuantity=u,this.PredefinedType=A,this.type=4095615324}};class Do extends jr{constructor(e,t,s,i){super(e),this.Curve3D=t,this.AssociatedGeometry=s,this.MasterRepresentation=i,this.type=699246055}}e.IfcSurfaceCurve=Do;e.IfcSurfaceCurveSweptAreaSolid=class extends Tr{constructor(e,t,s,i,r,o,n){super(e,t,s),this.SweptArea=t,this.Position=s,this.Directrix=i,this.StartParam=r,this.EndParam=o,this.ReferenceSurface=n,this.type=2028607225}};e.IfcSurfaceOfLinearExtrusion=class extends Dr{constructor(e,t,s,i,r){super(e,t,s),this.SweptCurve=t,this.Position=s,this.ExtrudedDirection=i,this.Depth=r,this.type=2809605785}};e.IfcSurfaceOfRevolution=class extends Dr{constructor(e,t,s,i){super(e,t,s),this.SweptCurve=t,this.Position=s,this.AxisPosition=i,this.type=4124788165}};e.IfcSystemFurnitureElementType=class extends Kr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1580310250}};e.IfcTask=class extends eo{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.LongDescription=a,this.Status=l,this.WorkMethod=h,this.IsMilestone=c,this.Priority=u,this.TaskTime=A,this.PredefinedType=p,this.type=3473067441}};e.IfcTaskType=class extends xr{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.Identification=a,this.LongDescription=l,this.ProcessType=h,this.PredefinedType=c,this.WorkMethod=u,this.type=3206491090}};class bo extends br{constructor(e,t){super(e),this.Coordinates=t,this.type=2387106220}}e.IfcTessellatedFaceSet=bo;e.IfcToroidalSurface=class extends Wr{constructor(e,t,s,i){super(e,t),this.Position=t,this.MajorRadius=s,this.MinorRadius=i,this.type=1935646853}};e.IfcTransportElementType=class extends Qr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2097647324}};e.IfcTriangulatedFaceSet=class extends bo{constructor(e,t,s,i,r,o){super(e,t),this.Coordinates=t,this.Normals=s,this.Closed=i,this.CoordIndex=r,this.PnIndex=o,this.type=2916149573}};e.IfcWindowLiningProperties=class extends $r{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f,m){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.LiningDepth=o,this.LiningThickness=n,this.TransomThickness=a,this.MullionThickness=l,this.FirstTransomOffset=h,this.SecondTransomOffset=c,this.FirstMullionOffset=u,this.SecondMullionOffset=A,this.ShapeAspectStyle=p,this.LiningOffset=d,this.LiningToPanelOffsetX=f,this.LiningToPanelOffsetY=m,this.type=336235671}};e.IfcWindowPanelProperties=class extends $r{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.OperationType=o,this.PanelPosition=n,this.FrameDepth=a,this.FrameThickness=l,this.ShapeAspectStyle=h,this.type=512836454}};class Ro extends Zr{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.TheActor=n,this.type=2296667514}}e.IfcActor=Ro;class Co extends Xr{constructor(e,t){super(e,t),this.Outer=t,this.type=1635779807}}e.IfcAdvancedBrep=Co;e.IfcAdvancedBrepWithVoids=class extends Co{constructor(e,t,s){super(e,t),this.Outer=t,this.Voids=s,this.type=2603310189}};e.IfcAnnotation=class extends to{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.type=1674181508}};class xo extends wr{constructor(e,t,s,i,r,o,n,a){super(e),this.UDegree=t,this.VDegree=s,this.ControlPointsList=i,this.SurfaceForm=r,this.UClosed=o,this.VClosed=n,this.SelfIntersect=a,this.type=2887950389}}e.IfcBSplineSurface=xo;class No extends xo{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a),this.UDegree=t,this.VDegree=s,this.ControlPointsList=i,this.SurfaceForm=r,this.UClosed=o,this.VClosed=n,this.SelfIntersect=a,this.UMultiplicities=l,this.VMultiplicities=h,this.UKnots=c,this.VKnots=u,this.KnotSpec=A,this.type=167062518}}e.IfcBSplineSurfaceWithKnots=No;e.IfcBlock=class extends kr{constructor(e,t,s,i,r){super(e,t),this.Position=t,this.XLength=s,this.YLength=i,this.ZLength=r,this.type=1334484129}};e.IfcBooleanClippingResult=class extends Sr{constructor(e,t,s,i){super(e,t,s,i),this.Operator=t,this.FirstOperand=s,this.SecondOperand=i,this.type=3649129432}};class Oo extends jr{constructor(e){super(e),this.type=1260505505}}e.IfcBoundedCurve=Oo;e.IfcBuilding=class extends yo{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.CompositionType=h,this.ElevationOfRefHeight=c,this.ElevationOfTerrain=u,this.BuildingAddress=A,this.type=4031249490}};class So extends Qr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=1950629157}}e.IfcBuildingElementType=So;e.IfcBuildingStorey=class extends yo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.CompositionType=h,this.Elevation=c,this.type=3124254112}};e.IfcChimneyType=class extends So{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2197970202}};e.IfcCircleHollowProfileDef=class extends Ur{constructor(e,t,s,i,r,o){super(e,t,s,i,r),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.Radius=r,this.WallThickness=o,this.type=2937912522}};e.IfcCivilElementType=class extends Qr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=3893394355}};e.IfcColumnType=class extends So{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=300633059}};e.IfcComplexPropertyTemplate=class extends so{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.UsageName=o,this.TemplateType=n,this.HasPropertyTemplates=a,this.type=3875453745}};class wo extends Oo{constructor(e,t,s){super(e),this.Segments=t,this.SelfIntersect=s,this.type=3732776249}}e.IfcCompositeCurve=wo;class Mo extends wo{constructor(e,t,s){super(e,t,s),this.Segments=t,this.SelfIntersect=s,this.type=15328376}}e.IfcCompositeCurveOnSurface=Mo;class Bo extends jr{constructor(e,t){super(e),this.Position=t,this.type=2510884976}}e.IfcConic=Bo;e.IfcConstructionEquipmentResourceType=class extends Gr{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l,h,c,u),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.Identification=a,this.LongDescription=l,this.ResourceType=h,this.BaseCosts=c,this.BaseQuantity=u,this.PredefinedType=A,this.type=2185764099}};e.IfcConstructionMaterialResourceType=class extends Gr{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l,h,c,u),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.Identification=a,this.LongDescription=l,this.ResourceType=h,this.BaseCosts=c,this.BaseQuantity=u,this.PredefinedType=A,this.type=4105962743}};e.IfcConstructionProductResourceType=class extends Gr{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l,h,c,u),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.Identification=a,this.LongDescription=l,this.ResourceType=h,this.BaseCosts=c,this.BaseQuantity=u,this.PredefinedType=A,this.type=1525564444}};class Fo extends po{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.LongDescription=a,this.Usage=l,this.BaseCosts=h,this.BaseQuantity=c,this.type=2559216714}}e.IfcConstructionResource=Fo;class Lo extends Zr{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.type=3293443760}}e.IfcControl=Lo;e.IfcCostItem=class extends Lo{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.PredefinedType=a,this.CostValues=l,this.CostQuantities=h,this.type=3895139033}};e.IfcCostSchedule=class extends Lo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.PredefinedType=a,this.Status=l,this.SubmittedOn=h,this.UpdateDate=c,this.type=1419761937}};e.IfcCoveringType=class extends So{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1916426348}};e.IfcCrewResource=class extends Fo{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.LongDescription=a,this.Usage=l,this.BaseCosts=h,this.BaseQuantity=c,this.PredefinedType=u,this.type=3295246426}};e.IfcCurtainWallType=class extends So{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1457835157}};e.IfcCylindricalSurface=class extends Wr{constructor(e,t,s){super(e,t),this.Position=t,this.Radius=s,this.type=1213902940}};class Uo extends Qr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=3256556792}}e.IfcDistributionElementType=Uo;class Ho extends Uo{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=3849074793}}e.IfcDistributionFlowElementType=Ho;e.IfcDoorLiningProperties=class extends $r{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f,m,g){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.LiningDepth=o,this.LiningThickness=n,this.ThresholdDepth=a,this.ThresholdThickness=l,this.TransomThickness=h,this.TransomOffset=c,this.LiningOffset=u,this.ThresholdOffset=A,this.CasingThickness=p,this.CasingDepth=d,this.ShapeAspectStyle=f,this.LiningToPanelOffsetX=m,this.LiningToPanelOffsetY=g,this.type=2963535650}};e.IfcDoorPanelProperties=class extends $r{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.PanelDepth=o,this.PanelOperation=n,this.PanelWidth=a,this.PanelPosition=l,this.ShapeAspectStyle=h,this.type=1714330368}};e.IfcDoorType=class extends So{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.OperationType=u,this.ParameterTakesPrecedence=A,this.UserDefinedOperationType=p,this.type=2323601079}};e.IfcDraughtingPreDefinedColour=class extends qr{constructor(e,t){super(e,t),this.Name=t,this.type=445594917}};e.IfcDraughtingPreDefinedCurveFont=class extends Jr{constructor(e,t){super(e,t),this.Name=t,this.type=4006246654}};class Go extends to{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=1758889154}}e.IfcElement=Go;e.IfcElementAssembly=class extends Go{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.AssemblyPlace=h,this.PredefinedType=c,this.type=4123344466}};e.IfcElementAssemblyType=class extends Qr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2397081782}};class Vo extends Go{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=1623761950}}e.IfcElementComponent=Vo;class ko extends Qr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=2590856083}}e.IfcElementComponentType=ko;e.IfcEllipse=class extends Bo{constructor(e,t,s,i){super(e,t),this.Position=t,this.SemiAxis1=s,this.SemiAxis2=i,this.type=1704287377}};class jo extends Ho{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=2107101300}}e.IfcEnergyConversionDeviceType=jo;e.IfcEngineType=class extends jo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=132023988}};e.IfcEvaporativeCoolerType=class extends jo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3174744832}};e.IfcEvaporatorType=class extends jo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3390157468}};e.IfcEvent=class extends eo{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.LongDescription=a,this.PredefinedType=l,this.EventTriggerType=h,this.UserDefinedEventTriggerType=c,this.EventOccurenceTime=u,this.type=4148101412}};class Qo extends mo{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.type=2853485674}}e.IfcExternalSpatialStructureElement=Qo;class Wo extends Xr{constructor(e,t){super(e,t),this.Outer=t,this.type=807026263}}e.IfcFacetedBrep=Wo;e.IfcFacetedBrepWithVoids=class extends Wo{constructor(e,t,s){super(e,t),this.Outer=t,this.Voids=s,this.type=3737207727}};e.IfcFastener=class extends Vo{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=647756555}};e.IfcFastenerType=class extends ko{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2489546625}};class zo extends Go{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=2827207264}}e.IfcFeatureElement=zo;class Ko extends zo{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=2143335405}}e.IfcFeatureElementAddition=Ko;class Yo extends zo{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=1287392070}}e.IfcFeatureElementSubtraction=Yo;class Xo extends Ho{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=3907093117}}e.IfcFlowControllerType=Xo;class Zo extends Ho{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=3198132628}}e.IfcFlowFittingType=Zo;e.IfcFlowMeterType=class extends Xo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3815607619}};class qo extends Ho{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=1482959167}}e.IfcFlowMovingDeviceType=qo;class Jo extends Ho{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=1834744321}}e.IfcFlowSegmentType=Jo;class $o extends Ho{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=1339347760}}e.IfcFlowStorageDeviceType=$o;class en extends Ho{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=2297155007}}e.IfcFlowTerminalType=en;class tn extends Ho{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=3009222698}}e.IfcFlowTreatmentDeviceType=tn;e.IfcFootingType=class extends So{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1893162501}};class sn extends Go{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=263784265}}e.IfcFurnishingElement=sn;e.IfcFurniture=class extends sn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1509553395}};e.IfcGeographicElement=class extends Go{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3493046030}};e.IfcGrid=class extends to{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.UAxes=l,this.VAxes=h,this.WAxes=c,this.PredefinedType=u,this.type=3009204131}};class rn extends Zr{constructor(e,t,s,i,r,o){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.type=2706460486}}e.IfcGroup=rn;e.IfcHeatExchangerType=class extends jo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1251058090}};e.IfcHumidifierType=class extends jo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1806887404}};e.IfcIndexedPolyCurve=class extends Oo{constructor(e,t,s,i){super(e),this.Points=t,this.Segments=s,this.SelfIntersect=i,this.type=2571569899}};e.IfcInterceptorType=class extends tn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3946677679}};e.IfcIntersectionCurve=class extends Do{constructor(e,t,s,i){super(e,t,s,i),this.Curve3D=t,this.AssociatedGeometry=s,this.MasterRepresentation=i,this.type=3113134337}};e.IfcInventory=class extends rn{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.PredefinedType=n,this.Jurisdiction=a,this.ResponsiblePersons=l,this.LastUpdateDate=h,this.CurrentValue=c,this.OriginalValue=u,this.type=2391368822}};e.IfcJunctionBoxType=class extends Zo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=4288270099}};e.IfcLaborResource=class extends Fo{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.LongDescription=a,this.Usage=l,this.BaseCosts=h,this.BaseQuantity=c,this.PredefinedType=u,this.type=3827777499}};e.IfcLampType=class extends en{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1051575348}};e.IfcLightFixtureType=class extends en{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1161773419}};e.IfcMechanicalFastener=class extends Vo{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.NominalDiameter=h,this.NominalLength=c,this.PredefinedType=u,this.type=377706215}};e.IfcMechanicalFastenerType=class extends ko{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.NominalDiameter=u,this.NominalLength=A,this.type=2108223431}};e.IfcMedicalDeviceType=class extends en{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1114901282}};e.IfcMemberType=class extends So{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3181161470}};e.IfcMotorConnectionType=class extends jo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=977012517}};e.IfcOccupant=class extends Ro{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.TheActor=n,this.PredefinedType=a,this.type=4143007308}};class on extends Yo{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3588315303}}e.IfcOpeningElement=on;e.IfcOpeningStandardCase=class extends on{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3079942009}};e.IfcOutletType=class extends en{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2837617999}};e.IfcPerformanceHistory=class extends Lo{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.LifeCyclePhase=a,this.PredefinedType=l,this.type=2382730787}};e.IfcPermeableCoveringProperties=class extends $r{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.OperationType=o,this.PanelPosition=n,this.FrameDepth=a,this.FrameThickness=l,this.ShapeAspectStyle=h,this.type=3566463478}};e.IfcPermit=class extends Lo{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.PredefinedType=a,this.Status=l,this.LongDescription=h,this.type=3327091369}};e.IfcPileType=class extends So{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1158309216}};e.IfcPipeFittingType=class extends Zo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=804291784}};e.IfcPipeSegmentType=class extends Jo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=4231323485}};e.IfcPlateType=class extends So{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=4017108033}};e.IfcPolygonalFaceSet=class extends bo{constructor(e,t,s,i,r){super(e,t),this.Coordinates=t,this.Closed=s,this.Faces=i,this.PnIndex=r,this.type=2839578677}};e.IfcPolyline=class extends Oo{constructor(e,t){super(e),this.Points=t,this.type=3724593414}};class nn extends to{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.type=3740093272}}e.IfcPort=nn;e.IfcProcedure=class extends eo{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.LongDescription=a,this.PredefinedType=l,this.type=2744685151}};e.IfcProjectOrder=class extends Lo{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.PredefinedType=a,this.Status=l,this.LongDescription=h,this.type=2904328755}};e.IfcProjectionElement=class extends Ko{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3651124850}};e.IfcProtectiveDeviceType=class extends Xo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1842657554}};e.IfcPumpType=class extends qo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2250791053}};e.IfcRailingType=class extends So{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2893384427}};e.IfcRampFlightType=class extends So{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2324767716}};e.IfcRampType=class extends So{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1469900589}};e.IfcRationalBSplineSurfaceWithKnots=class extends No{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p){super(e,t,s,i,r,o,n,a,l,h,c,u,A),this.UDegree=t,this.VDegree=s,this.ControlPointsList=i,this.SurfaceForm=r,this.UClosed=o,this.VClosed=n,this.SelfIntersect=a,this.UMultiplicities=l,this.VMultiplicities=h,this.UKnots=c,this.VKnots=u,this.KnotSpec=A,this.WeightsData=p,this.type=683857671}};class an extends Vo{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.SteelGrade=h,this.type=3027567501}}e.IfcReinforcingElement=an;class ln extends ko{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=964333572}}e.IfcReinforcingElementType=ln;e.IfcReinforcingMesh=class extends an{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f,m,g,y){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.SteelGrade=h,this.MeshLength=c,this.MeshWidth=u,this.LongitudinalBarNominalDiameter=A,this.TransverseBarNominalDiameter=p,this.LongitudinalBarCrossSectionArea=d,this.TransverseBarCrossSectionArea=f,this.LongitudinalBarSpacing=m,this.TransverseBarSpacing=g,this.PredefinedType=y,this.type=2320036040}};e.IfcReinforcingMeshType=class extends ln{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f,m,g,y,E,v){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.MeshLength=u,this.MeshWidth=A,this.LongitudinalBarNominalDiameter=p,this.TransverseBarNominalDiameter=d,this.LongitudinalBarCrossSectionArea=f,this.TransverseBarCrossSectionArea=m,this.LongitudinalBarSpacing=g,this.TransverseBarSpacing=y,this.BendingShapeCode=E,this.BendingParameters=v,this.type=2310774935}};e.IfcRelAggregates=class extends ho{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingObject=o,this.RelatedObjects=n,this.type=160246688}};e.IfcRoofType=class extends So{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2781568857}};e.IfcSanitaryTerminalType=class extends en{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1768891740}};e.IfcSeamCurve=class extends Do{constructor(e,t,s,i){super(e,t,s,i),this.Curve3D=t,this.AssociatedGeometry=s,this.MasterRepresentation=i,this.type=2157484638}};e.IfcShadingDeviceType=class extends So{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=4074543187}};e.IfcSite=class extends yo{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.CompositionType=h,this.RefLatitude=c,this.RefLongitude=u,this.RefElevation=A,this.LandTitleNumber=p,this.SiteAddress=d,this.type=4097777520}};e.IfcSlabType=class extends So{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2533589738}};e.IfcSolarDeviceType=class extends jo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1072016465}};e.IfcSpace=class extends yo{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.CompositionType=h,this.PredefinedType=c,this.ElevationWithFlooring=u,this.type=3856911033}};e.IfcSpaceHeaterType=class extends en{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1305183839}};e.IfcSpaceType=class extends Eo{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.LongName=u,this.type=3812236995}};e.IfcStackTerminalType=class extends en{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3112655638}};e.IfcStairFlightType=class extends So{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1039846685}};e.IfcStairType=class extends So{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=338393293}};class hn extends vo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedLoad=l,this.GlobalOrLocal=h,this.DestabilizingLoad=c,this.type=682877961}}e.IfcStructuralAction=hn;class cn extends _o{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedCondition=l,this.type=1179482911}}e.IfcStructuralConnection=cn;class un extends hn{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedLoad=l,this.GlobalOrLocal=h,this.DestabilizingLoad=c,this.ProjectedOrTrue=u,this.PredefinedType=A,this.type=1004757350}}e.IfcStructuralCurveAction=un;e.IfcStructuralCurveConnection=class extends cn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedCondition=l,this.Axis=h,this.type=4243806635}};class An extends Io{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.PredefinedType=l,this.Axis=h,this.type=214636428}}e.IfcStructuralCurveMember=An;e.IfcStructuralCurveMemberVarying=class extends An{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.PredefinedType=l,this.Axis=h,this.type=2445595289}};e.IfcStructuralCurveReaction=class extends To{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedLoad=l,this.GlobalOrLocal=h,this.PredefinedType=c,this.type=2757150158}};e.IfcStructuralLinearAction=class extends un{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l,h,c,u,A),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedLoad=l,this.GlobalOrLocal=h,this.DestabilizingLoad=c,this.ProjectedOrTrue=u,this.PredefinedType=A,this.type=1807405624}};class pn extends rn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.PredefinedType=n,this.ActionType=a,this.ActionSource=l,this.Coefficient=h,this.Purpose=c,this.type=1252848954}}e.IfcStructuralLoadGroup=pn;e.IfcStructuralPointAction=class extends hn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedLoad=l,this.GlobalOrLocal=h,this.DestabilizingLoad=c,this.type=2082059205}};e.IfcStructuralPointConnection=class extends cn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedCondition=l,this.ConditionCoordinateSystem=h,this.type=734778138}};e.IfcStructuralPointReaction=class extends To{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedLoad=l,this.GlobalOrLocal=h,this.type=1235345126}};e.IfcStructuralResultGroup=class extends rn{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.TheoryType=n,this.ResultForLoadGroup=a,this.IsLinear=l,this.type=2986769608}};class dn extends hn{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedLoad=l,this.GlobalOrLocal=h,this.DestabilizingLoad=c,this.ProjectedOrTrue=u,this.PredefinedType=A,this.type=3657597509}}e.IfcStructuralSurfaceAction=dn;e.IfcStructuralSurfaceConnection=class extends cn{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedCondition=l,this.type=1975003073}};e.IfcSubContractResource=class extends Fo{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.LongDescription=a,this.Usage=l,this.BaseCosts=h,this.BaseQuantity=c,this.PredefinedType=u,this.type=148013059}};e.IfcSurfaceFeature=class extends zo{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3101698114}};e.IfcSwitchingDeviceType=class extends Xo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2315554128}};class fn extends rn{constructor(e,t,s,i,r,o){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.type=2254336722}}e.IfcSystem=fn;e.IfcSystemFurnitureElement=class extends sn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=413509423}};e.IfcTankType=class extends $o{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=5716631}};e.IfcTendon=class extends an{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f,m,g){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.SteelGrade=h,this.PredefinedType=c,this.NominalDiameter=u,this.CrossSectionArea=A,this.TensionForce=p,this.PreStress=d,this.FrictionCoefficient=f,this.AnchorageSlip=m,this.MinCurvatureRadius=g,this.type=3824725483}};e.IfcTendonAnchor=class extends an{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.SteelGrade=h,this.PredefinedType=c,this.type=2347447852}};e.IfcTendonAnchorType=class extends ln{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3081323446}};e.IfcTendonType=class extends ln{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.NominalDiameter=u,this.CrossSectionArea=A,this.SheathDiameter=p,this.type=2415094496}};e.IfcTransformerType=class extends jo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1692211062}};e.IfcTransportElement=class extends Go{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1620046519}};e.IfcTrimmedCurve=class extends Oo{constructor(e,t,s,i,r,o){super(e),this.BasisCurve=t,this.Trim1=s,this.Trim2=i,this.SenseAgreement=r,this.MasterRepresentation=o,this.type=3593883385}};e.IfcTubeBundleType=class extends jo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1600972822}};e.IfcUnitaryEquipmentType=class extends jo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1911125066}};e.IfcValveType=class extends Xo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=728799441}};e.IfcVibrationIsolator=class extends Vo{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2391383451}};e.IfcVibrationIsolatorType=class extends ko{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3313531582}};e.IfcVirtualElement=class extends Go{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=2769231204}};e.IfcVoidingFeature=class extends Yo{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=926996030}};e.IfcWallType=class extends So{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1898987631}};e.IfcWasteTerminalType=class extends en{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1133259667}};e.IfcWindowType=class extends So{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.PartitioningType=u,this.ParameterTakesPrecedence=A,this.UserDefinedPartitioningType=p,this.type=4009809668}};e.IfcWorkCalendar=class extends Lo{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.WorkingTimes=a,this.ExceptionTimes=l,this.PredefinedType=h,this.type=4088093105}};class mn extends Lo{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.CreationDate=a,this.Creators=l,this.Purpose=h,this.Duration=c,this.TotalFloat=u,this.StartTime=A,this.FinishTime=p,this.type=1028945134}}e.IfcWorkControl=mn;e.IfcWorkPlan=class extends mn{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d){super(e,t,s,i,r,o,n,a,l,h,c,u,A,p),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.CreationDate=a,this.Creators=l,this.Purpose=h,this.Duration=c,this.TotalFloat=u,this.StartTime=A,this.FinishTime=p,this.PredefinedType=d,this.type=4218914973}};e.IfcWorkSchedule=class extends mn{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d){super(e,t,s,i,r,o,n,a,l,h,c,u,A,p),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.CreationDate=a,this.Creators=l,this.Purpose=h,this.Duration=c,this.TotalFloat=u,this.StartTime=A,this.FinishTime=p,this.PredefinedType=d,this.type=3342526732}};e.IfcZone=class extends fn{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.LongName=n,this.type=1033361043}};e.IfcActionRequest=class extends Lo{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.PredefinedType=a,this.Status=l,this.LongDescription=h,this.type=3821786052}};e.IfcAirTerminalBoxType=class extends Xo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1411407467}};e.IfcAirTerminalType=class extends en{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3352864051}};e.IfcAirToAirHeatRecoveryType=class extends jo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1871374353}};e.IfcAsset=class extends rn{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.OriginalValue=a,this.CurrentValue=l,this.TotalReplacementCost=h,this.Owner=c,this.User=u,this.ResponsiblePerson=A,this.IncorporationDate=p,this.DepreciatedValue=d,this.type=3460190687}};e.IfcAudioVisualApplianceType=class extends en{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1532957894}};class gn extends Oo{constructor(e,t,s,i,r,o){super(e),this.Degree=t,this.ControlPointsList=s,this.CurveForm=i,this.ClosedCurve=r,this.SelfIntersect=o,this.type=1967976161}}e.IfcBSplineCurve=gn;class yn extends gn{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o),this.Degree=t,this.ControlPointsList=s,this.CurveForm=i,this.ClosedCurve=r,this.SelfIntersect=o,this.KnotMultiplicities=n,this.Knots=a,this.KnotSpec=l,this.type=2461110595}}e.IfcBSplineCurveWithKnots=yn;e.IfcBeamType=class extends So{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=819618141}};e.IfcBoilerType=class extends jo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=231477066}};class En extends Mo{constructor(e,t,s){super(e,t,s),this.Segments=t,this.SelfIntersect=s,this.type=1136057603}}e.IfcBoundaryCurve=En;class vn extends Go{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=3299480353}}e.IfcBuildingElement=vn;e.IfcBuildingElementPart=class extends Vo{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2979338954}};e.IfcBuildingElementPartType=class extends ko{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=39481116}};e.IfcBuildingElementProxy=class extends vn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1095909175}};e.IfcBuildingElementProxyType=class extends So{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1909888760}};e.IfcBuildingSystem=class extends fn{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.PredefinedType=n,this.LongName=a,this.type=1177604601}};e.IfcBurnerType=class extends jo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2188180465}};e.IfcCableCarrierFittingType=class extends Zo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=395041908}};e.IfcCableCarrierSegmentType=class extends Jo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3293546465}};e.IfcCableFittingType=class extends Zo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2674252688}};e.IfcCableSegmentType=class extends Jo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1285652485}};e.IfcChillerType=class extends jo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2951183804}};e.IfcChimney=class extends vn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3296154744}};e.IfcCircle=class extends Bo{constructor(e,t,s){super(e,t),this.Position=t,this.Radius=s,this.type=2611217952}};e.IfcCivilElement=class extends Go{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=1677625105}};e.IfcCoilType=class extends jo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2301859152}};class _n extends vn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=843113511}}e.IfcColumn=_n;e.IfcColumnStandardCase=class extends _n{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=905975707}};e.IfcCommunicationsApplianceType=class extends en{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=400855858}};e.IfcCompressorType=class extends qo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3850581409}};e.IfcCondenserType=class extends jo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2816379211}};e.IfcConstructionEquipmentResource=class extends Fo{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.LongDescription=a,this.Usage=l,this.BaseCosts=h,this.BaseQuantity=c,this.PredefinedType=u,this.type=3898045240}};e.IfcConstructionMaterialResource=class extends Fo{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.LongDescription=a,this.Usage=l,this.BaseCosts=h,this.BaseQuantity=c,this.PredefinedType=u,this.type=1060000209}};e.IfcConstructionProductResource=class extends Fo{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.LongDescription=a,this.Usage=l,this.BaseCosts=h,this.BaseQuantity=c,this.PredefinedType=u,this.type=488727124}};e.IfcCooledBeamType=class extends jo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=335055490}};e.IfcCoolingTowerType=class extends jo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2954562838}};e.IfcCovering=class extends vn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1973544240}};e.IfcCurtainWall=class extends vn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3495092785}};e.IfcDamperType=class extends Xo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3961806047}};e.IfcDiscreteAccessory=class extends Vo{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1335981549}};e.IfcDiscreteAccessoryType=class extends ko{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2635815018}};e.IfcDistributionChamberElementType=class extends Ho{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1599208980}};class In extends Uo{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=2063403501}}e.IfcDistributionControlElementType=In;class Tn extends Go{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=1945004755}}e.IfcDistributionElement=Tn;class Pn extends Tn{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=3040386961}}e.IfcDistributionFlowElement=Pn;e.IfcDistributionPort=class extends nn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.FlowDirection=l,this.PredefinedType=h,this.SystemType=c,this.type=3041715199}};class Dn extends fn{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.LongName=n,this.PredefinedType=a,this.type=3205830791}}e.IfcDistributionSystem=Dn;class bn extends vn{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.OverallHeight=h,this.OverallWidth=c,this.PredefinedType=u,this.OperationType=A,this.UserDefinedOperationType=p,this.type=395920057}}e.IfcDoor=bn;e.IfcDoorStandardCase=class extends bn{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p){super(e,t,s,i,r,o,n,a,l,h,c,u,A,p),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.OverallHeight=h,this.OverallWidth=c,this.PredefinedType=u,this.OperationType=A,this.UserDefinedOperationType=p,this.type=3242481149}};e.IfcDuctFittingType=class extends Zo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=869906466}};e.IfcDuctSegmentType=class extends Jo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3760055223}};e.IfcDuctSilencerType=class extends tn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2030761528}};e.IfcElectricApplianceType=class extends en{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=663422040}};e.IfcElectricDistributionBoardType=class extends Xo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2417008758}};e.IfcElectricFlowStorageDeviceType=class extends $o{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3277789161}};e.IfcElectricGeneratorType=class extends jo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1534661035}};e.IfcElectricMotorType=class extends jo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1217240411}};e.IfcElectricTimeControlType=class extends Xo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=712377611}};class Rn extends Pn{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=1658829314}}e.IfcEnergyConversionDevice=Rn;e.IfcEngine=class extends Rn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2814081492}};e.IfcEvaporativeCooler=class extends Rn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3747195512}};e.IfcEvaporator=class extends Rn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=484807127}};e.IfcExternalSpatialElement=class extends Qo{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.PredefinedType=h,this.type=1209101575}};e.IfcFanType=class extends qo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=346874300}};e.IfcFilterType=class extends tn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1810631287}};e.IfcFireSuppressionTerminalType=class extends en{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=4222183408}};class Cn extends Pn{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=2058353004}}e.IfcFlowController=Cn;class xn extends Pn{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=4278956645}}e.IfcFlowFitting=xn;e.IfcFlowInstrumentType=class extends In{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=4037862832}};e.IfcFlowMeter=class extends Cn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2188021234}};class Nn extends Pn{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=3132237377}}e.IfcFlowMovingDevice=Nn;class On extends Pn{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=987401354}}e.IfcFlowSegment=On;class Sn extends Pn{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=707683696}}e.IfcFlowStorageDevice=Sn;class wn extends Pn{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=2223149337}}e.IfcFlowTerminal=wn;class Mn extends Pn{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=3508470533}}e.IfcFlowTreatmentDevice=Mn;e.IfcFooting=class extends vn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=900683007}};e.IfcHeatExchanger=class extends Rn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3319311131}};e.IfcHumidifier=class extends Rn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2068733104}};e.IfcInterceptor=class extends Mn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=4175244083}};e.IfcJunctionBox=class extends xn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2176052936}};e.IfcLamp=class extends wn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=76236018}};e.IfcLightFixture=class extends wn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=629592764}};e.IfcMedicalDevice=class extends wn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1437502449}};class Bn extends vn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1073191201}}e.IfcMember=Bn;e.IfcMemberStandardCase=class extends Bn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1911478936}};e.IfcMotorConnection=class extends Rn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2474470126}};e.IfcOuterBoundaryCurve=class extends En{constructor(e,t,s){super(e,t,s),this.Segments=t,this.SelfIntersect=s,this.type=144952367}};e.IfcOutlet=class extends wn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3694346114}};e.IfcPile=class extends vn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.ConstructionType=c,this.type=1687234759}};e.IfcPipeFitting=class extends xn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=310824031}};e.IfcPipeSegment=class extends On{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3612865200}};class Fn extends vn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3171933400}}e.IfcPlate=Fn;e.IfcPlateStandardCase=class extends Fn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1156407060}};e.IfcProtectiveDevice=class extends Cn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=738039164}};e.IfcProtectiveDeviceTrippingUnitType=class extends In{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=655969474}};e.IfcPump=class extends Nn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=90941305}};e.IfcRailing=class extends vn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2262370178}};e.IfcRamp=class extends vn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3024970846}};e.IfcRampFlight=class extends vn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3283111854}};e.IfcRationalBSplineCurveWithKnots=class extends yn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.Degree=t,this.ControlPointsList=s,this.CurveForm=i,this.ClosedCurve=r,this.SelfIntersect=o,this.KnotMultiplicities=n,this.Knots=a,this.KnotSpec=l,this.WeightsData=h,this.type=1232101972}};e.IfcReinforcingBar=class extends an{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.SteelGrade=h,this.NominalDiameter=c,this.CrossSectionArea=u,this.BarLength=A,this.PredefinedType=p,this.BarSurface=d,this.type=979691226}};e.IfcReinforcingBarType=class extends ln{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f,m){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.NominalDiameter=u,this.CrossSectionArea=A,this.BarLength=p,this.BarSurface=d,this.BendingShapeCode=f,this.BendingParameters=m,this.type=2572171363}};e.IfcRoof=class extends vn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2016517767}};e.IfcSanitaryTerminal=class extends wn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3053780830}};e.IfcSensorType=class extends In{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1783015770}};e.IfcShadingDevice=class extends vn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1329646415}};class Ln extends vn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1529196076}}e.IfcSlab=Ln;e.IfcSlabElementedCase=class extends Ln{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3127900445}};e.IfcSlabStandardCase=class extends Ln{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3027962421}};e.IfcSolarDevice=class extends Rn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3420628829}};e.IfcSpaceHeater=class extends wn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1999602285}};e.IfcStackTerminal=class extends wn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1404847402}};e.IfcStair=class extends vn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=331165859}};e.IfcStairFlight=class extends vn{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.NumberOfRisers=h,this.NumberOfTreads=c,this.RiserHeight=u,this.TreadLength=A,this.PredefinedType=p,this.type=4252922144}};e.IfcStructuralAnalysisModel=class extends fn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.PredefinedType=n,this.OrientationOf2DPlane=a,this.LoadedBy=l,this.HasResults=h,this.SharedPlacement=c,this.type=2515109513}};e.IfcStructuralLoadCase=class extends pn{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.PredefinedType=n,this.ActionType=a,this.ActionSource=l,this.Coefficient=h,this.Purpose=c,this.SelfWeightCoefficients=u,this.type=385403989}};e.IfcStructuralPlanarAction=class extends dn{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l,h,c,u,A),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedLoad=l,this.GlobalOrLocal=h,this.DestabilizingLoad=c,this.ProjectedOrTrue=u,this.PredefinedType=A,this.type=1621171031}};e.IfcSwitchingDevice=class extends Cn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1162798199}};e.IfcTank=class extends Sn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=812556717}};e.IfcTransformer=class extends Rn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3825984169}};e.IfcTubeBundle=class extends Rn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3026737570}};e.IfcUnitaryControlElementType=class extends In{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3179687236}};e.IfcUnitaryEquipment=class extends Rn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=4292641817}};e.IfcValve=class extends Cn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=4207607924}};class Un extends vn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2391406946}}e.IfcWall=Un;e.IfcWallElementedCase=class extends Un{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=4156078855}};e.IfcWallStandardCase=class extends Un{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3512223829}};e.IfcWasteTerminal=class extends wn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=4237592921}};class Hn extends vn{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.OverallHeight=h,this.OverallWidth=c,this.PredefinedType=u,this.PartitioningType=A,this.UserDefinedPartitioningType=p,this.type=3304561284}}e.IfcWindow=Hn;e.IfcWindowStandardCase=class extends Hn{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p){super(e,t,s,i,r,o,n,a,l,h,c,u,A,p),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.OverallHeight=h,this.OverallWidth=c,this.PredefinedType=u,this.PartitioningType=A,this.UserDefinedPartitioningType=p,this.type=486154966}};e.IfcActuatorType=class extends In{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2874132201}};e.IfcAirTerminal=class extends wn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1634111441}};e.IfcAirTerminalBox=class extends Cn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=177149247}};e.IfcAirToAirHeatRecovery=class extends Rn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2056796094}};e.IfcAlarmType=class extends In{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3001207471}};e.IfcAudioVisualAppliance=class extends wn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=277319702}};class Gn extends vn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=753842376}}e.IfcBeam=Gn;e.IfcBeamStandardCase=class extends Gn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2906023776}};e.IfcBoiler=class extends Rn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=32344328}};e.IfcBurner=class extends Rn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2938176219}};e.IfcCableCarrierFitting=class extends xn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=635142910}};e.IfcCableCarrierSegment=class extends On{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3758799889}};e.IfcCableFitting=class extends xn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1051757585}};e.IfcCableSegment=class extends On{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=4217484030}};e.IfcChiller=class extends Rn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3902619387}};e.IfcCoil=class extends Rn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=639361253}};e.IfcCommunicationsAppliance=class extends wn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3221913625}};e.IfcCompressor=class extends Nn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3571504051}};e.IfcCondenser=class extends Rn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2272882330}};e.IfcControllerType=class extends In{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=578613899}};e.IfcCooledBeam=class extends Rn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=4136498852}};e.IfcCoolingTower=class extends Rn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3640358203}};e.IfcDamper=class extends Cn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=4074379575}};e.IfcDistributionChamberElement=class extends Pn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1052013943}};e.IfcDistributionCircuit=class extends Dn{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.LongName=n,this.PredefinedType=a,this.type=562808652}};class Vn extends Tn{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=1062813311}}e.IfcDistributionControlElement=Vn;e.IfcDuctFitting=class extends xn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=342316401}};e.IfcDuctSegment=class extends On{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3518393246}};e.IfcDuctSilencer=class extends Mn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1360408905}};e.IfcElectricAppliance=class extends wn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1904799276}};e.IfcElectricDistributionBoard=class extends Cn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=862014818}};e.IfcElectricFlowStorageDevice=class extends Sn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3310460725}};e.IfcElectricGenerator=class extends Rn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=264262732}};e.IfcElectricMotor=class extends Rn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=402227799}};e.IfcElectricTimeControl=class extends Cn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1003880860}};e.IfcFan=class extends Nn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3415622556}};e.IfcFilter=class extends Mn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=819412036}};e.IfcFireSuppressionTerminal=class extends wn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1426591983}};e.IfcFlowInstrument=class extends Vn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=182646315}};e.IfcProtectiveDeviceTrippingUnit=class extends Vn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2295281155}};e.IfcSensor=class extends Vn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=4086658281}};e.IfcUnitaryControlElement=class extends Vn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=630975310}};e.IfcActuator=class extends Vn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=4288193352}};e.IfcAlarm=class extends Vn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3087945054}};e.IfcController=class extends Vn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=25142252}}}(jv||(jv={})),function(e){e.IfcAbsorbedDoseMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcAccelerationMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcAmountOfSubstanceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcAngularVelocityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcArcIndex=class{constructor(e){this.value=e}};e.IfcAreaDensityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcAreaMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcBinary=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcBoolean=class{constructor(e){this.type=3,this.value="true"==e}};e.IfcBoxAlignment=class{constructor(e){this.value=e,this.type=1}};e.IfcCardinalPointReference=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcComplexNumber=class{constructor(e){this.value=e}};e.IfcCompoundPlaneAngleMeasure=class{constructor(e){this.value=e}};e.IfcContextDependentMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcCountMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcCurvatureMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcDate=class{constructor(e){this.value=e,this.type=1}};e.IfcDateTime=class{constructor(e){this.value=e,this.type=1}};e.IfcDayInMonthNumber=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcDayInWeekNumber=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcDescriptiveMeasure=class{constructor(e){this.value=e,this.type=1}};class t{constructor(e){this.type=4,this.value=parseFloat(e)}}e.IfcDimensionCount=t;e.IfcDoseEquivalentMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcDuration=class{constructor(e){this.value=e,this.type=1}};e.IfcDynamicViscosityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcElectricCapacitanceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcElectricChargeMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcElectricConductanceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcElectricCurrentMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcElectricResistanceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcElectricVoltageMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcEnergyMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcFontStyle=class{constructor(e){this.value=e,this.type=1}};e.IfcFontVariant=class{constructor(e){this.value=e,this.type=1}};e.IfcFontWeight=class{constructor(e){this.value=e,this.type=1}};e.IfcForceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcFrequencyMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcGloballyUniqueId=class{constructor(e){this.value=e,this.type=1}};e.IfcHeatFluxDensityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcHeatingValueMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcIdentifier=class{constructor(e){this.value=e,this.type=1}};e.IfcIlluminanceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcInductanceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcInteger=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcIntegerCountRateMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcIonConcentrationMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcIsothermalMoistureCapacityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcKinematicViscosityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcLabel=class{constructor(e){this.value=e,this.type=1}};e.IfcLanguageId=class{constructor(e){this.value=e,this.type=1}};e.IfcLengthMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcLineIndex=class{constructor(e){this.value=e}};e.IfcLinearForceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcLinearMomentMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcLinearStiffnessMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcLinearVelocityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcLogical=class{constructor(e){this.type=3,this.value="true"==e}};e.IfcLuminousFluxMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcLuminousIntensityDistributionMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcLuminousIntensityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMagneticFluxDensityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMagneticFluxMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMassDensityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMassFlowRateMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMassMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMassPerLengthMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcModulusOfElasticityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcModulusOfLinearSubgradeReactionMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcModulusOfRotationalSubgradeReactionMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcModulusOfSubgradeReactionMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMoistureDiffusivityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMolecularWeightMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMomentOfInertiaMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMonetaryMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcMonthInYearNumber=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcNonNegativeLengthMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcNormalisedRatioMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcNumericMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcPHMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcParameterValue=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcPlanarForceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcPlaneAngleMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcPositiveInteger=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcPositiveLengthMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcPositivePlaneAngleMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcPositiveRatioMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcPowerMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcPresentableText=class{constructor(e){this.value=e,this.type=1}};e.IfcPressureMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcPropertySetDefinitionSet=class{constructor(e){this.value=e}};e.IfcRadioActivityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcRatioMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcReal=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcRotationalFrequencyMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcRotationalMassMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcRotationalStiffnessMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcSectionModulusMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcSectionalAreaIntegralMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcShearModulusMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcSolidAngleMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcSoundPowerLevelMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcSoundPowerMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcSoundPressureLevelMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcSoundPressureMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcSpecificHeatCapacityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcSpecularExponent=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcSpecularRoughness=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcTemperatureGradientMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcTemperatureRateOfChangeMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcText=class{constructor(e){this.value=e,this.type=1}};e.IfcTextAlignment=class{constructor(e){this.value=e,this.type=1}};e.IfcTextDecoration=class{constructor(e){this.value=e,this.type=1}};e.IfcTextFontName=class{constructor(e){this.value=e,this.type=1}};e.IfcTextTransformation=class{constructor(e){this.value=e,this.type=1}};e.IfcThermalAdmittanceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcThermalConductivityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcThermalExpansionCoefficientMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcThermalResistanceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcThermalTransmittanceMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcThermodynamicTemperatureMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcTime=class{constructor(e){this.value=e,this.type=1}};e.IfcTimeMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcTimeStamp=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcTorqueMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcURIReference=class{constructor(e){this.value=e,this.type=1}};e.IfcVaporPermeabilityMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcVolumeMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcVolumetricFlowRateMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcWarpingConstantMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};e.IfcWarpingMomentMeasure=class{constructor(e){this.type=4,this.value=parseFloat(e)}};class s{}s.EMAIL={type:3,value:"EMAIL"},s.FAX={type:3,value:"FAX"},s.PHONE={type:3,value:"PHONE"},s.POST={type:3,value:"POST"},s.VERBAL={type:3,value:"VERBAL"},s.USERDEFINED={type:3,value:"USERDEFINED"},s.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcActionRequestTypeEnum=s;class i{}i.BRAKES={type:3,value:"BRAKES"},i.BUOYANCY={type:3,value:"BUOYANCY"},i.COMPLETION_G1={type:3,value:"COMPLETION_G1"},i.CREEP={type:3,value:"CREEP"},i.CURRENT={type:3,value:"CURRENT"},i.DEAD_LOAD_G={type:3,value:"DEAD_LOAD_G"},i.EARTHQUAKE_E={type:3,value:"EARTHQUAKE_E"},i.ERECTION={type:3,value:"ERECTION"},i.FIRE={type:3,value:"FIRE"},i.ICE={type:3,value:"ICE"},i.IMPACT={type:3,value:"IMPACT"},i.IMPULSE={type:3,value:"IMPULSE"},i.LACK_OF_FIT={type:3,value:"LACK_OF_FIT"},i.LIVE_LOAD_Q={type:3,value:"LIVE_LOAD_Q"},i.PRESTRESSING_P={type:3,value:"PRESTRESSING_P"},i.PROPPING={type:3,value:"PROPPING"},i.RAIN={type:3,value:"RAIN"},i.SETTLEMENT_U={type:3,value:"SETTLEMENT_U"},i.SHRINKAGE={type:3,value:"SHRINKAGE"},i.SNOW_S={type:3,value:"SNOW_S"},i.SYSTEM_IMPERFECTION={type:3,value:"SYSTEM_IMPERFECTION"},i.TEMPERATURE_T={type:3,value:"TEMPERATURE_T"},i.TRANSPORT={type:3,value:"TRANSPORT"},i.WAVE={type:3,value:"WAVE"},i.WIND_W={type:3,value:"WIND_W"},i.USERDEFINED={type:3,value:"USERDEFINED"},i.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcActionSourceTypeEnum=i;class r{}r.EXTRAORDINARY_A={type:3,value:"EXTRAORDINARY_A"},r.PERMANENT_G={type:3,value:"PERMANENT_G"},r.VARIABLE_Q={type:3,value:"VARIABLE_Q"},r.USERDEFINED={type:3,value:"USERDEFINED"},r.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcActionTypeEnum=r;class o{}o.ELECTRICACTUATOR={type:3,value:"ELECTRICACTUATOR"},o.HANDOPERATEDACTUATOR={type:3,value:"HANDOPERATEDACTUATOR"},o.HYDRAULICACTUATOR={type:3,value:"HYDRAULICACTUATOR"},o.PNEUMATICACTUATOR={type:3,value:"PNEUMATICACTUATOR"},o.THERMOSTATICACTUATOR={type:3,value:"THERMOSTATICACTUATOR"},o.USERDEFINED={type:3,value:"USERDEFINED"},o.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcActuatorTypeEnum=o;class n{}n.DISTRIBUTIONPOINT={type:3,value:"DISTRIBUTIONPOINT"},n.HOME={type:3,value:"HOME"},n.OFFICE={type:3,value:"OFFICE"},n.SITE={type:3,value:"SITE"},n.USERDEFINED={type:3,value:"USERDEFINED"},e.IfcAddressTypeEnum=n;class a{}a.CONSTANTFLOW={type:3,value:"CONSTANTFLOW"},a.VARIABLEFLOWPRESSUREDEPENDANT={type:3,value:"VARIABLEFLOWPRESSUREDEPENDANT"},a.VARIABLEFLOWPRESSUREINDEPENDANT={type:3,value:"VARIABLEFLOWPRESSUREINDEPENDANT"},a.USERDEFINED={type:3,value:"USERDEFINED"},a.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcAirTerminalBoxTypeEnum=a;class l{}l.DIFFUSER={type:3,value:"DIFFUSER"},l.GRILLE={type:3,value:"GRILLE"},l.LOUVRE={type:3,value:"LOUVRE"},l.REGISTER={type:3,value:"REGISTER"},l.USERDEFINED={type:3,value:"USERDEFINED"},l.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcAirTerminalTypeEnum=l;class h{}h.FIXEDPLATECOUNTERFLOWEXCHANGER={type:3,value:"FIXEDPLATECOUNTERFLOWEXCHANGER"},h.FIXEDPLATECROSSFLOWEXCHANGER={type:3,value:"FIXEDPLATECROSSFLOWEXCHANGER"},h.FIXEDPLATEPARALLELFLOWEXCHANGER={type:3,value:"FIXEDPLATEPARALLELFLOWEXCHANGER"},h.HEATPIPE={type:3,value:"HEATPIPE"},h.ROTARYWHEEL={type:3,value:"ROTARYWHEEL"},h.RUNAROUNDCOILLOOP={type:3,value:"RUNAROUNDCOILLOOP"},h.THERMOSIPHONCOILTYPEHEATEXCHANGERS={type:3,value:"THERMOSIPHONCOILTYPEHEATEXCHANGERS"},h.THERMOSIPHONSEALEDTUBEHEATEXCHANGERS={type:3,value:"THERMOSIPHONSEALEDTUBEHEATEXCHANGERS"},h.TWINTOWERENTHALPYRECOVERYLOOPS={type:3,value:"TWINTOWERENTHALPYRECOVERYLOOPS"},h.USERDEFINED={type:3,value:"USERDEFINED"},h.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcAirToAirHeatRecoveryTypeEnum=h;class c{}c.BELL={type:3,value:"BELL"},c.BREAKGLASSBUTTON={type:3,value:"BREAKGLASSBUTTON"},c.LIGHT={type:3,value:"LIGHT"},c.MANUALPULLBOX={type:3,value:"MANUALPULLBOX"},c.RAILWAYCROCODILE={type:3,value:"RAILWAYCROCODILE"},c.RAILWAYDETONATOR={type:3,value:"RAILWAYDETONATOR"},c.SIREN={type:3,value:"SIREN"},c.WHISTLE={type:3,value:"WHISTLE"},c.USERDEFINED={type:3,value:"USERDEFINED"},c.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcAlarmTypeEnum=c;class u{}u.BLOSSCURVE={type:3,value:"BLOSSCURVE"},u.CONSTANTCANT={type:3,value:"CONSTANTCANT"},u.COSINECURVE={type:3,value:"COSINECURVE"},u.HELMERTCURVE={type:3,value:"HELMERTCURVE"},u.LINEARTRANSITION={type:3,value:"LINEARTRANSITION"},u.SINECURVE={type:3,value:"SINECURVE"},u.VIENNESEBEND={type:3,value:"VIENNESEBEND"},e.IfcAlignmentCantSegmentTypeEnum=u;class A{}A.BLOSSCURVE={type:3,value:"BLOSSCURVE"},A.CIRCULARARC={type:3,value:"CIRCULARARC"},A.CLOTHOID={type:3,value:"CLOTHOID"},A.COSINECURVE={type:3,value:"COSINECURVE"},A.CUBIC={type:3,value:"CUBIC"},A.HELMERTCURVE={type:3,value:"HELMERTCURVE"},A.LINE={type:3,value:"LINE"},A.SINECURVE={type:3,value:"SINECURVE"},A.VIENNESEBEND={type:3,value:"VIENNESEBEND"},e.IfcAlignmentHorizontalSegmentTypeEnum=A;class p{}p.USERDEFINED={type:3,value:"USERDEFINED"},p.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcAlignmentTypeEnum=p;class d{}d.CIRCULARARC={type:3,value:"CIRCULARARC"},d.CLOTHOID={type:3,value:"CLOTHOID"},d.CONSTANTGRADIENT={type:3,value:"CONSTANTGRADIENT"},d.PARABOLICARC={type:3,value:"PARABOLICARC"},e.IfcAlignmentVerticalSegmentTypeEnum=d;class f{}f.IN_PLANE_LOADING_2D={type:3,value:"IN_PLANE_LOADING_2D"},f.LOADING_3D={type:3,value:"LOADING_3D"},f.OUT_PLANE_LOADING_2D={type:3,value:"OUT_PLANE_LOADING_2D"},f.USERDEFINED={type:3,value:"USERDEFINED"},f.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcAnalysisModelTypeEnum=f;class m{}m.FIRST_ORDER_THEORY={type:3,value:"FIRST_ORDER_THEORY"},m.FULL_NONLINEAR_THEORY={type:3,value:"FULL_NONLINEAR_THEORY"},m.SECOND_ORDER_THEORY={type:3,value:"SECOND_ORDER_THEORY"},m.THIRD_ORDER_THEORY={type:3,value:"THIRD_ORDER_THEORY"},m.USERDEFINED={type:3,value:"USERDEFINED"},m.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcAnalysisTheoryTypeEnum=m;class g{}g.ASBUILTAREA={type:3,value:"ASBUILTAREA"},g.ASBUILTLINE={type:3,value:"ASBUILTLINE"},g.ASBUILTPOINT={type:3,value:"ASBUILTPOINT"},g.ASSUMEDAREA={type:3,value:"ASSUMEDAREA"},g.ASSUMEDLINE={type:3,value:"ASSUMEDLINE"},g.ASSUMEDPOINT={type:3,value:"ASSUMEDPOINT"},g.NON_PHYSICAL_SIGNAL={type:3,value:"NON_PHYSICAL_SIGNAL"},g.SUPERELEVATIONEVENT={type:3,value:"SUPERELEVATIONEVENT"},g.WIDTHEVENT={type:3,value:"WIDTHEVENT"},g.USERDEFINED={type:3,value:"USERDEFINED"},g.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcAnnotationTypeEnum=g;class y{}y.ADD={type:3,value:"ADD"},y.DIVIDE={type:3,value:"DIVIDE"},y.MULTIPLY={type:3,value:"MULTIPLY"},y.SUBTRACT={type:3,value:"SUBTRACT"},e.IfcArithmeticOperatorEnum=y;class E{}E.FACTORY={type:3,value:"FACTORY"},E.SITE={type:3,value:"SITE"},E.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcAssemblyPlaceEnum=E;class v{}v.AMPLIFIER={type:3,value:"AMPLIFIER"},v.CAMERA={type:3,value:"CAMERA"},v.COMMUNICATIONTERMINAL={type:3,value:"COMMUNICATIONTERMINAL"},v.DISPLAY={type:3,value:"DISPLAY"},v.MICROPHONE={type:3,value:"MICROPHONE"},v.PLAYER={type:3,value:"PLAYER"},v.PROJECTOR={type:3,value:"PROJECTOR"},v.RECEIVER={type:3,value:"RECEIVER"},v.RECORDINGEQUIPMENT={type:3,value:"RECORDINGEQUIPMENT"},v.SPEAKER={type:3,value:"SPEAKER"},v.SWITCHER={type:3,value:"SWITCHER"},v.TELEPHONE={type:3,value:"TELEPHONE"},v.TUNER={type:3,value:"TUNER"},v.USERDEFINED={type:3,value:"USERDEFINED"},v.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcAudioVisualApplianceTypeEnum=v;class _{}_.CIRCULAR_ARC={type:3,value:"CIRCULAR_ARC"},_.ELLIPTIC_ARC={type:3,value:"ELLIPTIC_ARC"},_.HYPERBOLIC_ARC={type:3,value:"HYPERBOLIC_ARC"},_.PARABOLIC_ARC={type:3,value:"PARABOLIC_ARC"},_.POLYLINE_FORM={type:3,value:"POLYLINE_FORM"},_.UNSPECIFIED={type:3,value:"UNSPECIFIED"},e.IfcBSplineCurveForm=_;class I{}I.CONICAL_SURF={type:3,value:"CONICAL_SURF"},I.CYLINDRICAL_SURF={type:3,value:"CYLINDRICAL_SURF"},I.GENERALISED_CONE={type:3,value:"GENERALISED_CONE"},I.PLANE_SURF={type:3,value:"PLANE_SURF"},I.QUADRIC_SURF={type:3,value:"QUADRIC_SURF"},I.RULED_SURF={type:3,value:"RULED_SURF"},I.SPHERICAL_SURF={type:3,value:"SPHERICAL_SURF"},I.SURF_OF_LINEAR_EXTRUSION={type:3,value:"SURF_OF_LINEAR_EXTRUSION"},I.SURF_OF_REVOLUTION={type:3,value:"SURF_OF_REVOLUTION"},I.TOROIDAL_SURF={type:3,value:"TOROIDAL_SURF"},I.UNSPECIFIED={type:3,value:"UNSPECIFIED"},e.IfcBSplineSurfaceForm=I;class T{}T.BEAM={type:3,value:"BEAM"},T.CORNICE={type:3,value:"CORNICE"},T.DIAPHRAGM={type:3,value:"DIAPHRAGM"},T.EDGEBEAM={type:3,value:"EDGEBEAM"},T.GIRDER_SEGMENT={type:3,value:"GIRDER_SEGMENT"},T.HATSTONE={type:3,value:"HATSTONE"},T.HOLLOWCORE={type:3,value:"HOLLOWCORE"},T.JOIST={type:3,value:"JOIST"},T.LINTEL={type:3,value:"LINTEL"},T.PIERCAP={type:3,value:"PIERCAP"},T.SPANDREL={type:3,value:"SPANDREL"},T.T_BEAM={type:3,value:"T_BEAM"},T.USERDEFINED={type:3,value:"USERDEFINED"},T.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcBeamTypeEnum=T;class P{}P.FIXED_MOVEMENT={type:3,value:"FIXED_MOVEMENT"},P.FREE_MOVEMENT={type:3,value:"FREE_MOVEMENT"},P.GUIDED_LONGITUDINAL={type:3,value:"GUIDED_LONGITUDINAL"},P.GUIDED_TRANSVERSAL={type:3,value:"GUIDED_TRANSVERSAL"},P.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcBearingTypeDisplacementEnum=P;class D{}D.CYLINDRICAL={type:3,value:"CYLINDRICAL"},D.DISK={type:3,value:"DISK"},D.ELASTOMERIC={type:3,value:"ELASTOMERIC"},D.GUIDE={type:3,value:"GUIDE"},D.POT={type:3,value:"POT"},D.ROCKER={type:3,value:"ROCKER"},D.ROLLER={type:3,value:"ROLLER"},D.SPHERICAL={type:3,value:"SPHERICAL"},D.USERDEFINED={type:3,value:"USERDEFINED"},D.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcBearingTypeEnum=D;class b{}b.EQUALTO={type:3,value:"EQUALTO"},b.GREATERTHAN={type:3,value:"GREATERTHAN"},b.GREATERTHANOREQUALTO={type:3,value:"GREATERTHANOREQUALTO"},b.INCLUDEDIN={type:3,value:"INCLUDEDIN"},b.INCLUDES={type:3,value:"INCLUDES"},b.LESSTHAN={type:3,value:"LESSTHAN"},b.LESSTHANOREQUALTO={type:3,value:"LESSTHANOREQUALTO"},b.NOTEQUALTO={type:3,value:"NOTEQUALTO"},b.NOTINCLUDEDIN={type:3,value:"NOTINCLUDEDIN"},b.NOTINCLUDES={type:3,value:"NOTINCLUDES"},e.IfcBenchmarkEnum=b;class R{}R.STEAM={type:3,value:"STEAM"},R.WATER={type:3,value:"WATER"},R.USERDEFINED={type:3,value:"USERDEFINED"},R.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcBoilerTypeEnum=R;class C{}C.DIFFERENCE={type:3,value:"DIFFERENCE"},C.INTERSECTION={type:3,value:"INTERSECTION"},C.UNION={type:3,value:"UNION"},e.IfcBooleanOperator=C;class x{}x.ABUTMENT={type:3,value:"ABUTMENT"},x.DECK={type:3,value:"DECK"},x.DECK_SEGMENT={type:3,value:"DECK_SEGMENT"},x.FOUNDATION={type:3,value:"FOUNDATION"},x.PIER={type:3,value:"PIER"},x.PIER_SEGMENT={type:3,value:"PIER_SEGMENT"},x.PYLON={type:3,value:"PYLON"},x.SUBSTRUCTURE={type:3,value:"SUBSTRUCTURE"},x.SUPERSTRUCTURE={type:3,value:"SUPERSTRUCTURE"},x.SURFACESTRUCTURE={type:3,value:"SURFACESTRUCTURE"},x.USERDEFINED={type:3,value:"USERDEFINED"},x.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcBridgePartTypeEnum=x;class N{}N.ARCHED={type:3,value:"ARCHED"},N.CABLE_STAYED={type:3,value:"CABLE_STAYED"},N.CANTILEVER={type:3,value:"CANTILEVER"},N.CULVERT={type:3,value:"CULVERT"},N.FRAMEWORK={type:3,value:"FRAMEWORK"},N.GIRDER={type:3,value:"GIRDER"},N.SUSPENSION={type:3,value:"SUSPENSION"},N.TRUSS={type:3,value:"TRUSS"},N.USERDEFINED={type:3,value:"USERDEFINED"},N.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcBridgeTypeEnum=N;class O{}O.APRON={type:3,value:"APRON"},O.ARMOURUNIT={type:3,value:"ARMOURUNIT"},O.INSULATION={type:3,value:"INSULATION"},O.PRECASTPANEL={type:3,value:"PRECASTPANEL"},O.SAFETYCAGE={type:3,value:"SAFETYCAGE"},O.USERDEFINED={type:3,value:"USERDEFINED"},O.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcBuildingElementPartTypeEnum=O;class S{}S.COMPLEX={type:3,value:"COMPLEX"},S.ELEMENT={type:3,value:"ELEMENT"},S.PARTIAL={type:3,value:"PARTIAL"},S.USERDEFINED={type:3,value:"USERDEFINED"},S.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcBuildingElementProxyTypeEnum=S;class w{}w.EROSIONPREVENTION={type:3,value:"EROSIONPREVENTION"},w.FENESTRATION={type:3,value:"FENESTRATION"},w.FOUNDATION={type:3,value:"FOUNDATION"},w.LOADBEARING={type:3,value:"LOADBEARING"},w.OUTERSHELL={type:3,value:"OUTERSHELL"},w.PRESTRESSING={type:3,value:"PRESTRESSING"},w.REINFORCING={type:3,value:"REINFORCING"},w.SHADING={type:3,value:"SHADING"},w.TRANSPORT={type:3,value:"TRANSPORT"},w.USERDEFINED={type:3,value:"USERDEFINED"},w.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcBuildingSystemTypeEnum=w;class M{}M.EROSIONPREVENTION={type:3,value:"EROSIONPREVENTION"},M.FENESTRATION={type:3,value:"FENESTRATION"},M.FOUNDATION={type:3,value:"FOUNDATION"},M.LOADBEARING={type:3,value:"LOADBEARING"},M.MOORING={type:3,value:"MOORING"},M.OUTERSHELL={type:3,value:"OUTERSHELL"},M.PRESTRESSING={type:3,value:"PRESTRESSING"},M.RAILWAYLINE={type:3,value:"RAILWAYLINE"},M.RAILWAYTRACK={type:3,value:"RAILWAYTRACK"},M.REINFORCING={type:3,value:"REINFORCING"},M.SHADING={type:3,value:"SHADING"},M.TRACKCIRCUIT={type:3,value:"TRACKCIRCUIT"},M.TRANSPORT={type:3,value:"TRANSPORT"},M.USERDEFINED={type:3,value:"USERDEFINED"},M.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcBuiltSystemTypeEnum=M;class B{}B.USERDEFINED={type:3,value:"USERDEFINED"},B.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcBurnerTypeEnum=B;class F{}F.BEND={type:3,value:"BEND"},F.CONNECTOR={type:3,value:"CONNECTOR"},F.CROSS={type:3,value:"CROSS"},F.JUNCTION={type:3,value:"JUNCTION"},F.TEE={type:3,value:"TEE"},F.TRANSITION={type:3,value:"TRANSITION"},F.USERDEFINED={type:3,value:"USERDEFINED"},F.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCableCarrierFittingTypeEnum=F;class L{}L.CABLEBRACKET={type:3,value:"CABLEBRACKET"},L.CABLELADDERSEGMENT={type:3,value:"CABLELADDERSEGMENT"},L.CABLETRAYSEGMENT={type:3,value:"CABLETRAYSEGMENT"},L.CABLETRUNKINGSEGMENT={type:3,value:"CABLETRUNKINGSEGMENT"},L.CATENARYWIRE={type:3,value:"CATENARYWIRE"},L.CONDUITSEGMENT={type:3,value:"CONDUITSEGMENT"},L.DROPPER={type:3,value:"DROPPER"},L.USERDEFINED={type:3,value:"USERDEFINED"},L.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCableCarrierSegmentTypeEnum=L;class U{}U.CONNECTOR={type:3,value:"CONNECTOR"},U.ENTRY={type:3,value:"ENTRY"},U.EXIT={type:3,value:"EXIT"},U.FANOUT={type:3,value:"FANOUT"},U.JUNCTION={type:3,value:"JUNCTION"},U.TRANSITION={type:3,value:"TRANSITION"},U.USERDEFINED={type:3,value:"USERDEFINED"},U.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCableFittingTypeEnum=U;class H{}H.BUSBARSEGMENT={type:3,value:"BUSBARSEGMENT"},H.CABLESEGMENT={type:3,value:"CABLESEGMENT"},H.CONDUCTORSEGMENT={type:3,value:"CONDUCTORSEGMENT"},H.CONTACTWIRESEGMENT={type:3,value:"CONTACTWIRESEGMENT"},H.CORESEGMENT={type:3,value:"CORESEGMENT"},H.FIBERSEGMENT={type:3,value:"FIBERSEGMENT"},H.FIBERTUBE={type:3,value:"FIBERTUBE"},H.OPTICALCABLESEGMENT={type:3,value:"OPTICALCABLESEGMENT"},H.STITCHWIRE={type:3,value:"STITCHWIRE"},H.WIREPAIRSEGMENT={type:3,value:"WIREPAIRSEGMENT"},H.USERDEFINED={type:3,value:"USERDEFINED"},H.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCableSegmentTypeEnum=H;class G{}G.CAISSON={type:3,value:"CAISSON"},G.WELL={type:3,value:"WELL"},G.USERDEFINED={type:3,value:"USERDEFINED"},G.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCaissonFoundationTypeEnum=G;class V{}V.ADDED={type:3,value:"ADDED"},V.DELETED={type:3,value:"DELETED"},V.MODIFIED={type:3,value:"MODIFIED"},V.NOCHANGE={type:3,value:"NOCHANGE"},V.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcChangeActionEnum=V;class k{}k.AIRCOOLED={type:3,value:"AIRCOOLED"},k.HEATRECOVERY={type:3,value:"HEATRECOVERY"},k.WATERCOOLED={type:3,value:"WATERCOOLED"},k.USERDEFINED={type:3,value:"USERDEFINED"},k.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcChillerTypeEnum=k;class j{}j.USERDEFINED={type:3,value:"USERDEFINED"},j.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcChimneyTypeEnum=j;class Q{}Q.DXCOOLINGCOIL={type:3,value:"DXCOOLINGCOIL"},Q.ELECTRICHEATINGCOIL={type:3,value:"ELECTRICHEATINGCOIL"},Q.GASHEATINGCOIL={type:3,value:"GASHEATINGCOIL"},Q.HYDRONICCOIL={type:3,value:"HYDRONICCOIL"},Q.STEAMHEATINGCOIL={type:3,value:"STEAMHEATINGCOIL"},Q.WATERCOOLINGCOIL={type:3,value:"WATERCOOLINGCOIL"},Q.WATERHEATINGCOIL={type:3,value:"WATERHEATINGCOIL"},Q.USERDEFINED={type:3,value:"USERDEFINED"},Q.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCoilTypeEnum=Q;class W{}W.COLUMN={type:3,value:"COLUMN"},W.PIERSTEM={type:3,value:"PIERSTEM"},W.PIERSTEM_SEGMENT={type:3,value:"PIERSTEM_SEGMENT"},W.PILASTER={type:3,value:"PILASTER"},W.STANDCOLUMN={type:3,value:"STANDCOLUMN"},W.USERDEFINED={type:3,value:"USERDEFINED"},W.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcColumnTypeEnum=W;class z{}z.ANTENNA={type:3,value:"ANTENNA"},z.AUTOMATON={type:3,value:"AUTOMATON"},z.COMPUTER={type:3,value:"COMPUTER"},z.FAX={type:3,value:"FAX"},z.GATEWAY={type:3,value:"GATEWAY"},z.INTELLIGENTPERIPHERAL={type:3,value:"INTELLIGENTPERIPHERAL"},z.IPNETWORKEQUIPMENT={type:3,value:"IPNETWORKEQUIPMENT"},z.LINESIDEELECTRONICUNIT={type:3,value:"LINESIDEELECTRONICUNIT"},z.MODEM={type:3,value:"MODEM"},z.NETWORKAPPLIANCE={type:3,value:"NETWORKAPPLIANCE"},z.NETWORKBRIDGE={type:3,value:"NETWORKBRIDGE"},z.NETWORKHUB={type:3,value:"NETWORKHUB"},z.OPTICALLINETERMINAL={type:3,value:"OPTICALLINETERMINAL"},z.OPTICALNETWORKUNIT={type:3,value:"OPTICALNETWORKUNIT"},z.PRINTER={type:3,value:"PRINTER"},z.RADIOBLOCKCENTER={type:3,value:"RADIOBLOCKCENTER"},z.REPEATER={type:3,value:"REPEATER"},z.ROUTER={type:3,value:"ROUTER"},z.SCANNER={type:3,value:"SCANNER"},z.TELECOMMAND={type:3,value:"TELECOMMAND"},z.TELEPHONYEXCHANGE={type:3,value:"TELEPHONYEXCHANGE"},z.TRANSITIONCOMPONENT={type:3,value:"TRANSITIONCOMPONENT"},z.TRANSPONDER={type:3,value:"TRANSPONDER"},z.TRANSPORTEQUIPMENT={type:3,value:"TRANSPORTEQUIPMENT"},z.USERDEFINED={type:3,value:"USERDEFINED"},z.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCommunicationsApplianceTypeEnum=z;class K{}K.P_COMPLEX={type:3,value:"P_COMPLEX"},K.Q_COMPLEX={type:3,value:"Q_COMPLEX"},e.IfcComplexPropertyTemplateTypeEnum=K;class Y{}Y.BOOSTER={type:3,value:"BOOSTER"},Y.DYNAMIC={type:3,value:"DYNAMIC"},Y.HERMETIC={type:3,value:"HERMETIC"},Y.OPENTYPE={type:3,value:"OPENTYPE"},Y.RECIPROCATING={type:3,value:"RECIPROCATING"},Y.ROLLINGPISTON={type:3,value:"ROLLINGPISTON"},Y.ROTARY={type:3,value:"ROTARY"},Y.ROTARYVANE={type:3,value:"ROTARYVANE"},Y.SCROLL={type:3,value:"SCROLL"},Y.SEMIHERMETIC={type:3,value:"SEMIHERMETIC"},Y.SINGLESCREW={type:3,value:"SINGLESCREW"},Y.SINGLESTAGE={type:3,value:"SINGLESTAGE"},Y.TROCHOIDAL={type:3,value:"TROCHOIDAL"},Y.TWINSCREW={type:3,value:"TWINSCREW"},Y.WELDEDSHELLHERMETIC={type:3,value:"WELDEDSHELLHERMETIC"},Y.USERDEFINED={type:3,value:"USERDEFINED"},Y.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCompressorTypeEnum=Y;class X{}X.AIRCOOLED={type:3,value:"AIRCOOLED"},X.EVAPORATIVECOOLED={type:3,value:"EVAPORATIVECOOLED"},X.WATERCOOLED={type:3,value:"WATERCOOLED"},X.WATERCOOLEDBRAZEDPLATE={type:3,value:"WATERCOOLEDBRAZEDPLATE"},X.WATERCOOLEDSHELLCOIL={type:3,value:"WATERCOOLEDSHELLCOIL"},X.WATERCOOLEDSHELLTUBE={type:3,value:"WATERCOOLEDSHELLTUBE"},X.WATERCOOLEDTUBEINTUBE={type:3,value:"WATERCOOLEDTUBEINTUBE"},X.USERDEFINED={type:3,value:"USERDEFINED"},X.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCondenserTypeEnum=X;class Z{}Z.ATEND={type:3,value:"ATEND"},Z.ATPATH={type:3,value:"ATPATH"},Z.ATSTART={type:3,value:"ATSTART"},Z.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcConnectionTypeEnum=Z;class q{}q.ADVISORY={type:3,value:"ADVISORY"},q.HARD={type:3,value:"HARD"},q.SOFT={type:3,value:"SOFT"},q.USERDEFINED={type:3,value:"USERDEFINED"},q.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcConstraintEnum=q;class J{}J.DEMOLISHING={type:3,value:"DEMOLISHING"},J.EARTHMOVING={type:3,value:"EARTHMOVING"},J.ERECTING={type:3,value:"ERECTING"},J.HEATING={type:3,value:"HEATING"},J.LIGHTING={type:3,value:"LIGHTING"},J.PAVING={type:3,value:"PAVING"},J.PUMPING={type:3,value:"PUMPING"},J.TRANSPORTING={type:3,value:"TRANSPORTING"},J.USERDEFINED={type:3,value:"USERDEFINED"},J.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcConstructionEquipmentResourceTypeEnum=J;class ${}$.AGGREGATES={type:3,value:"AGGREGATES"},$.CONCRETE={type:3,value:"CONCRETE"},$.DRYWALL={type:3,value:"DRYWALL"},$.FUEL={type:3,value:"FUEL"},$.GYPSUM={type:3,value:"GYPSUM"},$.MASONRY={type:3,value:"MASONRY"},$.METAL={type:3,value:"METAL"},$.PLASTIC={type:3,value:"PLASTIC"},$.WOOD={type:3,value:"WOOD"},$.USERDEFINED={type:3,value:"USERDEFINED"},$.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcConstructionMaterialResourceTypeEnum=$;class ee{}ee.ASSEMBLY={type:3,value:"ASSEMBLY"},ee.FORMWORK={type:3,value:"FORMWORK"},ee.USERDEFINED={type:3,value:"USERDEFINED"},ee.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcConstructionProductResourceTypeEnum=ee;class te{}te.FLOATING={type:3,value:"FLOATING"},te.MULTIPOSITION={type:3,value:"MULTIPOSITION"},te.PROGRAMMABLE={type:3,value:"PROGRAMMABLE"},te.PROPORTIONAL={type:3,value:"PROPORTIONAL"},te.TWOPOSITION={type:3,value:"TWOPOSITION"},te.USERDEFINED={type:3,value:"USERDEFINED"},te.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcControllerTypeEnum=te;class se{}se.BELTCONVEYOR={type:3,value:"BELTCONVEYOR"},se.BUCKETCONVEYOR={type:3,value:"BUCKETCONVEYOR"},se.CHUTECONVEYOR={type:3,value:"CHUTECONVEYOR"},se.SCREWCONVEYOR={type:3,value:"SCREWCONVEYOR"},se.USERDEFINED={type:3,value:"USERDEFINED"},se.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcConveyorSegmentTypeEnum=se;class ie{}ie.ACTIVE={type:3,value:"ACTIVE"},ie.PASSIVE={type:3,value:"PASSIVE"},ie.USERDEFINED={type:3,value:"USERDEFINED"},ie.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCooledBeamTypeEnum=ie;class re{}re.MECHANICALFORCEDDRAFT={type:3,value:"MECHANICALFORCEDDRAFT"},re.MECHANICALINDUCEDDRAFT={type:3,value:"MECHANICALINDUCEDDRAFT"},re.NATURALDRAFT={type:3,value:"NATURALDRAFT"},re.USERDEFINED={type:3,value:"USERDEFINED"},re.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCoolingTowerTypeEnum=re;class oe{}oe.USERDEFINED={type:3,value:"USERDEFINED"},oe.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCostItemTypeEnum=oe;class ne{}ne.BUDGET={type:3,value:"BUDGET"},ne.COSTPLAN={type:3,value:"COSTPLAN"},ne.ESTIMATE={type:3,value:"ESTIMATE"},ne.PRICEDBILLOFQUANTITIES={type:3,value:"PRICEDBILLOFQUANTITIES"},ne.SCHEDULEOFRATES={type:3,value:"SCHEDULEOFRATES"},ne.TENDER={type:3,value:"TENDER"},ne.UNPRICEDBILLOFQUANTITIES={type:3,value:"UNPRICEDBILLOFQUANTITIES"},ne.USERDEFINED={type:3,value:"USERDEFINED"},ne.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCostScheduleTypeEnum=ne;class ae{}ae.ARMOUR={type:3,value:"ARMOUR"},ae.BALLASTBED={type:3,value:"BALLASTBED"},ae.CORE={type:3,value:"CORE"},ae.FILTER={type:3,value:"FILTER"},ae.PAVEMENT={type:3,value:"PAVEMENT"},ae.PROTECTION={type:3,value:"PROTECTION"},ae.USERDEFINED={type:3,value:"USERDEFINED"},ae.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCourseTypeEnum=ae;class le{}le.CEILING={type:3,value:"CEILING"},le.CLADDING={type:3,value:"CLADDING"},le.COPING={type:3,value:"COPING"},le.FLOORING={type:3,value:"FLOORING"},le.INSULATION={type:3,value:"INSULATION"},le.MEMBRANE={type:3,value:"MEMBRANE"},le.MOLDING={type:3,value:"MOLDING"},le.ROOFING={type:3,value:"ROOFING"},le.SKIRTINGBOARD={type:3,value:"SKIRTINGBOARD"},le.SLEEVING={type:3,value:"SLEEVING"},le.TOPPING={type:3,value:"TOPPING"},le.WRAPPING={type:3,value:"WRAPPING"},le.USERDEFINED={type:3,value:"USERDEFINED"},le.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCoveringTypeEnum=le;class he{}he.OFFICE={type:3,value:"OFFICE"},he.SITE={type:3,value:"SITE"},he.USERDEFINED={type:3,value:"USERDEFINED"},he.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCrewResourceTypeEnum=he;class ce{}ce.USERDEFINED={type:3,value:"USERDEFINED"},ce.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCurtainWallTypeEnum=ce;class ue{}ue.LINEAR={type:3,value:"LINEAR"},ue.LOG_LINEAR={type:3,value:"LOG_LINEAR"},ue.LOG_LOG={type:3,value:"LOG_LOG"},ue.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcCurveInterpolationEnum=ue;class Ae{}Ae.BACKDRAFTDAMPER={type:3,value:"BACKDRAFTDAMPER"},Ae.BALANCINGDAMPER={type:3,value:"BALANCINGDAMPER"},Ae.BLASTDAMPER={type:3,value:"BLASTDAMPER"},Ae.CONTROLDAMPER={type:3,value:"CONTROLDAMPER"},Ae.FIREDAMPER={type:3,value:"FIREDAMPER"},Ae.FIRESMOKEDAMPER={type:3,value:"FIRESMOKEDAMPER"},Ae.FUMEHOODEXHAUST={type:3,value:"FUMEHOODEXHAUST"},Ae.GRAVITYDAMPER={type:3,value:"GRAVITYDAMPER"},Ae.GRAVITYRELIEFDAMPER={type:3,value:"GRAVITYRELIEFDAMPER"},Ae.RELIEFDAMPER={type:3,value:"RELIEFDAMPER"},Ae.SMOKEDAMPER={type:3,value:"SMOKEDAMPER"},Ae.USERDEFINED={type:3,value:"USERDEFINED"},Ae.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDamperTypeEnum=Ae;class pe{}pe.MEASURED={type:3,value:"MEASURED"},pe.PREDICTED={type:3,value:"PREDICTED"},pe.SIMULATED={type:3,value:"SIMULATED"},pe.USERDEFINED={type:3,value:"USERDEFINED"},pe.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDataOriginEnum=pe;class de{}de.ACCELERATIONUNIT={type:3,value:"ACCELERATIONUNIT"},de.ANGULARVELOCITYUNIT={type:3,value:"ANGULARVELOCITYUNIT"},de.AREADENSITYUNIT={type:3,value:"AREADENSITYUNIT"},de.COMPOUNDPLANEANGLEUNIT={type:3,value:"COMPOUNDPLANEANGLEUNIT"},de.CURVATUREUNIT={type:3,value:"CURVATUREUNIT"},de.DYNAMICVISCOSITYUNIT={type:3,value:"DYNAMICVISCOSITYUNIT"},de.HEATFLUXDENSITYUNIT={type:3,value:"HEATFLUXDENSITYUNIT"},de.HEATINGVALUEUNIT={type:3,value:"HEATINGVALUEUNIT"},de.INTEGERCOUNTRATEUNIT={type:3,value:"INTEGERCOUNTRATEUNIT"},de.IONCONCENTRATIONUNIT={type:3,value:"IONCONCENTRATIONUNIT"},de.ISOTHERMALMOISTURECAPACITYUNIT={type:3,value:"ISOTHERMALMOISTURECAPACITYUNIT"},de.KINEMATICVISCOSITYUNIT={type:3,value:"KINEMATICVISCOSITYUNIT"},de.LINEARFORCEUNIT={type:3,value:"LINEARFORCEUNIT"},de.LINEARMOMENTUNIT={type:3,value:"LINEARMOMENTUNIT"},de.LINEARSTIFFNESSUNIT={type:3,value:"LINEARSTIFFNESSUNIT"},de.LINEARVELOCITYUNIT={type:3,value:"LINEARVELOCITYUNIT"},de.LUMINOUSINTENSITYDISTRIBUTIONUNIT={type:3,value:"LUMINOUSINTENSITYDISTRIBUTIONUNIT"},de.MASSDENSITYUNIT={type:3,value:"MASSDENSITYUNIT"},de.MASSFLOWRATEUNIT={type:3,value:"MASSFLOWRATEUNIT"},de.MASSPERLENGTHUNIT={type:3,value:"MASSPERLENGTHUNIT"},de.MODULUSOFELASTICITYUNIT={type:3,value:"MODULUSOFELASTICITYUNIT"},de.MODULUSOFLINEARSUBGRADEREACTIONUNIT={type:3,value:"MODULUSOFLINEARSUBGRADEREACTIONUNIT"},de.MODULUSOFROTATIONALSUBGRADEREACTIONUNIT={type:3,value:"MODULUSOFROTATIONALSUBGRADEREACTIONUNIT"},de.MODULUSOFSUBGRADEREACTIONUNIT={type:3,value:"MODULUSOFSUBGRADEREACTIONUNIT"},de.MOISTUREDIFFUSIVITYUNIT={type:3,value:"MOISTUREDIFFUSIVITYUNIT"},de.MOLECULARWEIGHTUNIT={type:3,value:"MOLECULARWEIGHTUNIT"},de.MOMENTOFINERTIAUNIT={type:3,value:"MOMENTOFINERTIAUNIT"},de.PHUNIT={type:3,value:"PHUNIT"},de.PLANARFORCEUNIT={type:3,value:"PLANARFORCEUNIT"},de.ROTATIONALFREQUENCYUNIT={type:3,value:"ROTATIONALFREQUENCYUNIT"},de.ROTATIONALMASSUNIT={type:3,value:"ROTATIONALMASSUNIT"},de.ROTATIONALSTIFFNESSUNIT={type:3,value:"ROTATIONALSTIFFNESSUNIT"},de.SECTIONAREAINTEGRALUNIT={type:3,value:"SECTIONAREAINTEGRALUNIT"},de.SECTIONMODULUSUNIT={type:3,value:"SECTIONMODULUSUNIT"},de.SHEARMODULUSUNIT={type:3,value:"SHEARMODULUSUNIT"},de.SOUNDPOWERLEVELUNIT={type:3,value:"SOUNDPOWERLEVELUNIT"},de.SOUNDPOWERUNIT={type:3,value:"SOUNDPOWERUNIT"},de.SOUNDPRESSURELEVELUNIT={type:3,value:"SOUNDPRESSURELEVELUNIT"},de.SOUNDPRESSUREUNIT={type:3,value:"SOUNDPRESSUREUNIT"},de.SPECIFICHEATCAPACITYUNIT={type:3,value:"SPECIFICHEATCAPACITYUNIT"},de.TEMPERATUREGRADIENTUNIT={type:3,value:"TEMPERATUREGRADIENTUNIT"},de.TEMPERATURERATEOFCHANGEUNIT={type:3,value:"TEMPERATURERATEOFCHANGEUNIT"},de.THERMALADMITTANCEUNIT={type:3,value:"THERMALADMITTANCEUNIT"},de.THERMALCONDUCTANCEUNIT={type:3,value:"THERMALCONDUCTANCEUNIT"},de.THERMALEXPANSIONCOEFFICIENTUNIT={type:3,value:"THERMALEXPANSIONCOEFFICIENTUNIT"},de.THERMALRESISTANCEUNIT={type:3,value:"THERMALRESISTANCEUNIT"},de.THERMALTRANSMITTANCEUNIT={type:3,value:"THERMALTRANSMITTANCEUNIT"},de.TORQUEUNIT={type:3,value:"TORQUEUNIT"},de.VAPORPERMEABILITYUNIT={type:3,value:"VAPORPERMEABILITYUNIT"},de.VOLUMETRICFLOWRATEUNIT={type:3,value:"VOLUMETRICFLOWRATEUNIT"},de.WARPINGCONSTANTUNIT={type:3,value:"WARPINGCONSTANTUNIT"},de.WARPINGMOMENTUNIT={type:3,value:"WARPINGMOMENTUNIT"},de.USERDEFINED={type:3,value:"USERDEFINED"},e.IfcDerivedUnitEnum=de;class fe{}fe.NEGATIVE={type:3,value:"NEGATIVE"},fe.POSITIVE={type:3,value:"POSITIVE"},e.IfcDirectionSenseEnum=fe;class me{}me.ANCHORPLATE={type:3,value:"ANCHORPLATE"},me.BIRDPROTECTION={type:3,value:"BIRDPROTECTION"},me.BRACKET={type:3,value:"BRACKET"},me.CABLEARRANGER={type:3,value:"CABLEARRANGER"},me.ELASTIC_CUSHION={type:3,value:"ELASTIC_CUSHION"},me.EXPANSION_JOINT_DEVICE={type:3,value:"EXPANSION_JOINT_DEVICE"},me.FILLER={type:3,value:"FILLER"},me.FLASHING={type:3,value:"FLASHING"},me.INSULATOR={type:3,value:"INSULATOR"},me.LOCK={type:3,value:"LOCK"},me.PANEL_STRENGTHENING={type:3,value:"PANEL_STRENGTHENING"},me.POINTMACHINEMOUNTINGDEVICE={type:3,value:"POINTMACHINEMOUNTINGDEVICE"},me.POINT_MACHINE_LOCKING_DEVICE={type:3,value:"POINT_MACHINE_LOCKING_DEVICE"},me.RAILBRACE={type:3,value:"RAILBRACE"},me.RAILPAD={type:3,value:"RAILPAD"},me.RAIL_LUBRICATION={type:3,value:"RAIL_LUBRICATION"},me.RAIL_MECHANICAL_EQUIPMENT={type:3,value:"RAIL_MECHANICAL_EQUIPMENT"},me.SHOE={type:3,value:"SHOE"},me.SLIDINGCHAIR={type:3,value:"SLIDINGCHAIR"},me.SOUNDABSORPTION={type:3,value:"SOUNDABSORPTION"},me.TENSIONINGEQUIPMENT={type:3,value:"TENSIONINGEQUIPMENT"},me.USERDEFINED={type:3,value:"USERDEFINED"},me.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDiscreteAccessoryTypeEnum=me;class ge{}ge.CONSUMERUNIT={type:3,value:"CONSUMERUNIT"},ge.DISPATCHINGBOARD={type:3,value:"DISPATCHINGBOARD"},ge.DISTRIBUTIONBOARD={type:3,value:"DISTRIBUTIONBOARD"},ge.DISTRIBUTIONFRAME={type:3,value:"DISTRIBUTIONFRAME"},ge.MOTORCONTROLCENTRE={type:3,value:"MOTORCONTROLCENTRE"},ge.SWITCHBOARD={type:3,value:"SWITCHBOARD"},ge.USERDEFINED={type:3,value:"USERDEFINED"},ge.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDistributionBoardTypeEnum=ge;class ye{}ye.FORMEDDUCT={type:3,value:"FORMEDDUCT"},ye.INSPECTIONCHAMBER={type:3,value:"INSPECTIONCHAMBER"},ye.INSPECTIONPIT={type:3,value:"INSPECTIONPIT"},ye.MANHOLE={type:3,value:"MANHOLE"},ye.METERCHAMBER={type:3,value:"METERCHAMBER"},ye.SUMP={type:3,value:"SUMP"},ye.TRENCH={type:3,value:"TRENCH"},ye.VALVECHAMBER={type:3,value:"VALVECHAMBER"},ye.USERDEFINED={type:3,value:"USERDEFINED"},ye.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDistributionChamberElementTypeEnum=ye;class Ee{}Ee.CABLE={type:3,value:"CABLE"},Ee.CABLECARRIER={type:3,value:"CABLECARRIER"},Ee.DUCT={type:3,value:"DUCT"},Ee.PIPE={type:3,value:"PIPE"},Ee.WIRELESS={type:3,value:"WIRELESS"},Ee.USERDEFINED={type:3,value:"USERDEFINED"},Ee.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDistributionPortTypeEnum=Ee;class ve{}ve.AIRCONDITIONING={type:3,value:"AIRCONDITIONING"},ve.AUDIOVISUAL={type:3,value:"AUDIOVISUAL"},ve.CATENARY_SYSTEM={type:3,value:"CATENARY_SYSTEM"},ve.CHEMICAL={type:3,value:"CHEMICAL"},ve.CHILLEDWATER={type:3,value:"CHILLEDWATER"},ve.COMMUNICATION={type:3,value:"COMMUNICATION"},ve.COMPRESSEDAIR={type:3,value:"COMPRESSEDAIR"},ve.CONDENSERWATER={type:3,value:"CONDENSERWATER"},ve.CONTROL={type:3,value:"CONTROL"},ve.CONVEYING={type:3,value:"CONVEYING"},ve.DATA={type:3,value:"DATA"},ve.DISPOSAL={type:3,value:"DISPOSAL"},ve.DOMESTICCOLDWATER={type:3,value:"DOMESTICCOLDWATER"},ve.DOMESTICHOTWATER={type:3,value:"DOMESTICHOTWATER"},ve.DRAINAGE={type:3,value:"DRAINAGE"},ve.EARTHING={type:3,value:"EARTHING"},ve.ELECTRICAL={type:3,value:"ELECTRICAL"},ve.ELECTROACOUSTIC={type:3,value:"ELECTROACOUSTIC"},ve.EXHAUST={type:3,value:"EXHAUST"},ve.FIREPROTECTION={type:3,value:"FIREPROTECTION"},ve.FIXEDTRANSMISSIONNETWORK={type:3,value:"FIXEDTRANSMISSIONNETWORK"},ve.FUEL={type:3,value:"FUEL"},ve.GAS={type:3,value:"GAS"},ve.HAZARDOUS={type:3,value:"HAZARDOUS"},ve.HEATING={type:3,value:"HEATING"},ve.LIGHTING={type:3,value:"LIGHTING"},ve.LIGHTNINGPROTECTION={type:3,value:"LIGHTNINGPROTECTION"},ve.MOBILENETWORK={type:3,value:"MOBILENETWORK"},ve.MONITORINGSYSTEM={type:3,value:"MONITORINGSYSTEM"},ve.MUNICIPALSOLIDWASTE={type:3,value:"MUNICIPALSOLIDWASTE"},ve.OIL={type:3,value:"OIL"},ve.OPERATIONAL={type:3,value:"OPERATIONAL"},ve.OPERATIONALTELEPHONYSYSTEM={type:3,value:"OPERATIONALTELEPHONYSYSTEM"},ve.OVERHEAD_CONTACTLINE_SYSTEM={type:3,value:"OVERHEAD_CONTACTLINE_SYSTEM"},ve.POWERGENERATION={type:3,value:"POWERGENERATION"},ve.RAINWATER={type:3,value:"RAINWATER"},ve.REFRIGERATION={type:3,value:"REFRIGERATION"},ve.RETURN_CIRCUIT={type:3,value:"RETURN_CIRCUIT"},ve.SECURITY={type:3,value:"SECURITY"},ve.SEWAGE={type:3,value:"SEWAGE"},ve.SIGNAL={type:3,value:"SIGNAL"},ve.STORMWATER={type:3,value:"STORMWATER"},ve.TELEPHONE={type:3,value:"TELEPHONE"},ve.TV={type:3,value:"TV"},ve.VACUUM={type:3,value:"VACUUM"},ve.VENT={type:3,value:"VENT"},ve.VENTILATION={type:3,value:"VENTILATION"},ve.WASTEWATER={type:3,value:"WASTEWATER"},ve.WATERSUPPLY={type:3,value:"WATERSUPPLY"},ve.USERDEFINED={type:3,value:"USERDEFINED"},ve.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDistributionSystemEnum=ve;class _e{}_e.CONFIDENTIAL={type:3,value:"CONFIDENTIAL"},_e.PERSONAL={type:3,value:"PERSONAL"},_e.PUBLIC={type:3,value:"PUBLIC"},_e.RESTRICTED={type:3,value:"RESTRICTED"},_e.USERDEFINED={type:3,value:"USERDEFINED"},_e.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDocumentConfidentialityEnum=_e;class Ie{}Ie.DRAFT={type:3,value:"DRAFT"},Ie.FINAL={type:3,value:"FINAL"},Ie.FINALDRAFT={type:3,value:"FINALDRAFT"},Ie.REVISION={type:3,value:"REVISION"},Ie.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDocumentStatusEnum=Ie;class Te{}Te.DOUBLE_ACTING={type:3,value:"DOUBLE_ACTING"},Te.FIXEDPANEL={type:3,value:"FIXEDPANEL"},Te.FOLDING={type:3,value:"FOLDING"},Te.REVOLVING={type:3,value:"REVOLVING"},Te.ROLLINGUP={type:3,value:"ROLLINGUP"},Te.SLIDING={type:3,value:"SLIDING"},Te.SWINGING={type:3,value:"SWINGING"},Te.USERDEFINED={type:3,value:"USERDEFINED"},Te.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDoorPanelOperationEnum=Te;class Pe{}Pe.LEFT={type:3,value:"LEFT"},Pe.MIDDLE={type:3,value:"MIDDLE"},Pe.RIGHT={type:3,value:"RIGHT"},Pe.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDoorPanelPositionEnum=Pe;class De{}De.ALUMINIUM={type:3,value:"ALUMINIUM"},De.ALUMINIUM_PLASTIC={type:3,value:"ALUMINIUM_PLASTIC"},De.ALUMINIUM_WOOD={type:3,value:"ALUMINIUM_WOOD"},De.HIGH_GRADE_STEEL={type:3,value:"HIGH_GRADE_STEEL"},De.PLASTIC={type:3,value:"PLASTIC"},De.STEEL={type:3,value:"STEEL"},De.WOOD={type:3,value:"WOOD"},De.USERDEFINED={type:3,value:"USERDEFINED"},De.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDoorStyleConstructionEnum=De;class be{}be.DOUBLE_DOOR_DOUBLE_SWING={type:3,value:"DOUBLE_DOOR_DOUBLE_SWING"},be.DOUBLE_DOOR_FOLDING={type:3,value:"DOUBLE_DOOR_FOLDING"},be.DOUBLE_DOOR_SINGLE_SWING={type:3,value:"DOUBLE_DOOR_SINGLE_SWING"},be.DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_LEFT={type:3,value:"DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_LEFT"},be.DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_RIGHT={type:3,value:"DOUBLE_DOOR_SINGLE_SWING_OPPOSITE_RIGHT"},be.DOUBLE_DOOR_SLIDING={type:3,value:"DOUBLE_DOOR_SLIDING"},be.DOUBLE_SWING_LEFT={type:3,value:"DOUBLE_SWING_LEFT"},be.DOUBLE_SWING_RIGHT={type:3,value:"DOUBLE_SWING_RIGHT"},be.FOLDING_TO_LEFT={type:3,value:"FOLDING_TO_LEFT"},be.FOLDING_TO_RIGHT={type:3,value:"FOLDING_TO_RIGHT"},be.REVOLVING={type:3,value:"REVOLVING"},be.ROLLINGUP={type:3,value:"ROLLINGUP"},be.SINGLE_SWING_LEFT={type:3,value:"SINGLE_SWING_LEFT"},be.SINGLE_SWING_RIGHT={type:3,value:"SINGLE_SWING_RIGHT"},be.SLIDING_TO_LEFT={type:3,value:"SLIDING_TO_LEFT"},be.SLIDING_TO_RIGHT={type:3,value:"SLIDING_TO_RIGHT"},be.USERDEFINED={type:3,value:"USERDEFINED"},be.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDoorStyleOperationEnum=be;class Re{}Re.BOOM_BARRIER={type:3,value:"BOOM_BARRIER"},Re.DOOR={type:3,value:"DOOR"},Re.GATE={type:3,value:"GATE"},Re.TRAPDOOR={type:3,value:"TRAPDOOR"},Re.TURNSTILE={type:3,value:"TURNSTILE"},Re.USERDEFINED={type:3,value:"USERDEFINED"},Re.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDoorTypeEnum=Re;class Ce{}Ce.DOUBLE_PANEL_DOUBLE_SWING={type:3,value:"DOUBLE_PANEL_DOUBLE_SWING"},Ce.DOUBLE_PANEL_FOLDING={type:3,value:"DOUBLE_PANEL_FOLDING"},Ce.DOUBLE_PANEL_LIFTING_VERTICAL={type:3,value:"DOUBLE_PANEL_LIFTING_VERTICAL"},Ce.DOUBLE_PANEL_SINGLE_SWING={type:3,value:"DOUBLE_PANEL_SINGLE_SWING"},Ce.DOUBLE_PANEL_SINGLE_SWING_OPPOSITE_LEFT={type:3,value:"DOUBLE_PANEL_SINGLE_SWING_OPPOSITE_LEFT"},Ce.DOUBLE_PANEL_SINGLE_SWING_OPPOSITE_RIGHT={type:3,value:"DOUBLE_PANEL_SINGLE_SWING_OPPOSITE_RIGHT"},Ce.DOUBLE_PANEL_SLIDING={type:3,value:"DOUBLE_PANEL_SLIDING"},Ce.DOUBLE_SWING_LEFT={type:3,value:"DOUBLE_SWING_LEFT"},Ce.DOUBLE_SWING_RIGHT={type:3,value:"DOUBLE_SWING_RIGHT"},Ce.FOLDING_TO_LEFT={type:3,value:"FOLDING_TO_LEFT"},Ce.FOLDING_TO_RIGHT={type:3,value:"FOLDING_TO_RIGHT"},Ce.LIFTING_HORIZONTAL={type:3,value:"LIFTING_HORIZONTAL"},Ce.LIFTING_VERTICAL_LEFT={type:3,value:"LIFTING_VERTICAL_LEFT"},Ce.LIFTING_VERTICAL_RIGHT={type:3,value:"LIFTING_VERTICAL_RIGHT"},Ce.REVOLVING_HORIZONTAL={type:3,value:"REVOLVING_HORIZONTAL"},Ce.REVOLVING_VERTICAL={type:3,value:"REVOLVING_VERTICAL"},Ce.ROLLINGUP={type:3,value:"ROLLINGUP"},Ce.SINGLE_SWING_LEFT={type:3,value:"SINGLE_SWING_LEFT"},Ce.SINGLE_SWING_RIGHT={type:3,value:"SINGLE_SWING_RIGHT"},Ce.SLIDING_TO_LEFT={type:3,value:"SLIDING_TO_LEFT"},Ce.SLIDING_TO_RIGHT={type:3,value:"SLIDING_TO_RIGHT"},Ce.SWING_FIXED_LEFT={type:3,value:"SWING_FIXED_LEFT"},Ce.SWING_FIXED_RIGHT={type:3,value:"SWING_FIXED_RIGHT"},Ce.USERDEFINED={type:3,value:"USERDEFINED"},Ce.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDoorTypeOperationEnum=Ce;class xe{}xe.BEND={type:3,value:"BEND"},xe.CONNECTOR={type:3,value:"CONNECTOR"},xe.ENTRY={type:3,value:"ENTRY"},xe.EXIT={type:3,value:"EXIT"},xe.JUNCTION={type:3,value:"JUNCTION"},xe.OBSTRUCTION={type:3,value:"OBSTRUCTION"},xe.TRANSITION={type:3,value:"TRANSITION"},xe.USERDEFINED={type:3,value:"USERDEFINED"},xe.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDuctFittingTypeEnum=xe;class Ne{}Ne.FLEXIBLESEGMENT={type:3,value:"FLEXIBLESEGMENT"},Ne.RIGIDSEGMENT={type:3,value:"RIGIDSEGMENT"},Ne.USERDEFINED={type:3,value:"USERDEFINED"},Ne.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDuctSegmentTypeEnum=Ne;class Oe{}Oe.FLATOVAL={type:3,value:"FLATOVAL"},Oe.RECTANGULAR={type:3,value:"RECTANGULAR"},Oe.ROUND={type:3,value:"ROUND"},Oe.USERDEFINED={type:3,value:"USERDEFINED"},Oe.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcDuctSilencerTypeEnum=Oe;class Se{}Se.BASE_EXCAVATION={type:3,value:"BASE_EXCAVATION"},Se.CUT={type:3,value:"CUT"},Se.DREDGING={type:3,value:"DREDGING"},Se.EXCAVATION={type:3,value:"EXCAVATION"},Se.OVEREXCAVATION={type:3,value:"OVEREXCAVATION"},Se.PAVEMENTMILLING={type:3,value:"PAVEMENTMILLING"},Se.STEPEXCAVATION={type:3,value:"STEPEXCAVATION"},Se.TOPSOILREMOVAL={type:3,value:"TOPSOILREMOVAL"},Se.TRENCH={type:3,value:"TRENCH"},Se.USERDEFINED={type:3,value:"USERDEFINED"},Se.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcEarthworksCutTypeEnum=Se;class we{}we.BACKFILL={type:3,value:"BACKFILL"},we.COUNTERWEIGHT={type:3,value:"COUNTERWEIGHT"},we.EMBANKMENT={type:3,value:"EMBANKMENT"},we.SLOPEFILL={type:3,value:"SLOPEFILL"},we.SUBGRADE={type:3,value:"SUBGRADE"},we.SUBGRADEBED={type:3,value:"SUBGRADEBED"},we.TRANSITIONSECTION={type:3,value:"TRANSITIONSECTION"},we.USERDEFINED={type:3,value:"USERDEFINED"},we.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcEarthworksFillTypeEnum=we;class Me{}Me.DISHWASHER={type:3,value:"DISHWASHER"},Me.ELECTRICCOOKER={type:3,value:"ELECTRICCOOKER"},Me.FREESTANDINGELECTRICHEATER={type:3,value:"FREESTANDINGELECTRICHEATER"},Me.FREESTANDINGFAN={type:3,value:"FREESTANDINGFAN"},Me.FREESTANDINGWATERCOOLER={type:3,value:"FREESTANDINGWATERCOOLER"},Me.FREESTANDINGWATERHEATER={type:3,value:"FREESTANDINGWATERHEATER"},Me.FREEZER={type:3,value:"FREEZER"},Me.FRIDGE_FREEZER={type:3,value:"FRIDGE_FREEZER"},Me.HANDDRYER={type:3,value:"HANDDRYER"},Me.KITCHENMACHINE={type:3,value:"KITCHENMACHINE"},Me.MICROWAVE={type:3,value:"MICROWAVE"},Me.PHOTOCOPIER={type:3,value:"PHOTOCOPIER"},Me.REFRIGERATOR={type:3,value:"REFRIGERATOR"},Me.TUMBLEDRYER={type:3,value:"TUMBLEDRYER"},Me.VENDINGMACHINE={type:3,value:"VENDINGMACHINE"},Me.WASHINGMACHINE={type:3,value:"WASHINGMACHINE"},Me.USERDEFINED={type:3,value:"USERDEFINED"},Me.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcElectricApplianceTypeEnum=Me;class Be{}Be.CONSUMERUNIT={type:3,value:"CONSUMERUNIT"},Be.DISTRIBUTIONBOARD={type:3,value:"DISTRIBUTIONBOARD"},Be.MOTORCONTROLCENTRE={type:3,value:"MOTORCONTROLCENTRE"},Be.SWITCHBOARD={type:3,value:"SWITCHBOARD"},Be.USERDEFINED={type:3,value:"USERDEFINED"},Be.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcElectricDistributionBoardTypeEnum=Be;class Fe{}Fe.BATTERY={type:3,value:"BATTERY"},Fe.CAPACITOR={type:3,value:"CAPACITOR"},Fe.CAPACITORBANK={type:3,value:"CAPACITORBANK"},Fe.COMPENSATOR={type:3,value:"COMPENSATOR"},Fe.HARMONICFILTER={type:3,value:"HARMONICFILTER"},Fe.INDUCTOR={type:3,value:"INDUCTOR"},Fe.INDUCTORBANK={type:3,value:"INDUCTORBANK"},Fe.RECHARGER={type:3,value:"RECHARGER"},Fe.UPS={type:3,value:"UPS"},Fe.USERDEFINED={type:3,value:"USERDEFINED"},Fe.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcElectricFlowStorageDeviceTypeEnum=Fe;class Le{}Le.ELECTRONICFILTER={type:3,value:"ELECTRONICFILTER"},Le.USERDEFINED={type:3,value:"USERDEFINED"},Le.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcElectricFlowTreatmentDeviceTypeEnum=Le;class Ue{}Ue.CHP={type:3,value:"CHP"},Ue.ENGINEGENERATOR={type:3,value:"ENGINEGENERATOR"},Ue.STANDALONE={type:3,value:"STANDALONE"},Ue.USERDEFINED={type:3,value:"USERDEFINED"},Ue.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcElectricGeneratorTypeEnum=Ue;class He{}He.DC={type:3,value:"DC"},He.INDUCTION={type:3,value:"INDUCTION"},He.POLYPHASE={type:3,value:"POLYPHASE"},He.RELUCTANCESYNCHRONOUS={type:3,value:"RELUCTANCESYNCHRONOUS"},He.SYNCHRONOUS={type:3,value:"SYNCHRONOUS"},He.USERDEFINED={type:3,value:"USERDEFINED"},He.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcElectricMotorTypeEnum=He;class Ge{}Ge.RELAY={type:3,value:"RELAY"},Ge.TIMECLOCK={type:3,value:"TIMECLOCK"},Ge.TIMEDELAY={type:3,value:"TIMEDELAY"},Ge.USERDEFINED={type:3,value:"USERDEFINED"},Ge.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcElectricTimeControlTypeEnum=Ge;class Ve{}Ve.ABUTMENT={type:3,value:"ABUTMENT"},Ve.ACCESSORY_ASSEMBLY={type:3,value:"ACCESSORY_ASSEMBLY"},Ve.ARCH={type:3,value:"ARCH"},Ve.BEAM_GRID={type:3,value:"BEAM_GRID"},Ve.BRACED_FRAME={type:3,value:"BRACED_FRAME"},Ve.CROSS_BRACING={type:3,value:"CROSS_BRACING"},Ve.DECK={type:3,value:"DECK"},Ve.DILATATIONPANEL={type:3,value:"DILATATIONPANEL"},Ve.ENTRANCEWORKS={type:3,value:"ENTRANCEWORKS"},Ve.GIRDER={type:3,value:"GIRDER"},Ve.GRID={type:3,value:"GRID"},Ve.MAST={type:3,value:"MAST"},Ve.PIER={type:3,value:"PIER"},Ve.PYLON={type:3,value:"PYLON"},Ve.RAIL_MECHANICAL_EQUIPMENT_ASSEMBLY={type:3,value:"RAIL_MECHANICAL_EQUIPMENT_ASSEMBLY"},Ve.REINFORCEMENT_UNIT={type:3,value:"REINFORCEMENT_UNIT"},Ve.RIGID_FRAME={type:3,value:"RIGID_FRAME"},Ve.SHELTER={type:3,value:"SHELTER"},Ve.SIGNALASSEMBLY={type:3,value:"SIGNALASSEMBLY"},Ve.SLAB_FIELD={type:3,value:"SLAB_FIELD"},Ve.SUMPBUSTER={type:3,value:"SUMPBUSTER"},Ve.SUPPORTINGASSEMBLY={type:3,value:"SUPPORTINGASSEMBLY"},Ve.SUSPENSIONASSEMBLY={type:3,value:"SUSPENSIONASSEMBLY"},Ve.TRACKPANEL={type:3,value:"TRACKPANEL"},Ve.TRACTION_SWITCHING_ASSEMBLY={type:3,value:"TRACTION_SWITCHING_ASSEMBLY"},Ve.TRAFFIC_CALMING_DEVICE={type:3,value:"TRAFFIC_CALMING_DEVICE"},Ve.TRUSS={type:3,value:"TRUSS"},Ve.TURNOUTPANEL={type:3,value:"TURNOUTPANEL"},Ve.USERDEFINED={type:3,value:"USERDEFINED"},Ve.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcElementAssemblyTypeEnum=Ve;class ke{}ke.COMPLEX={type:3,value:"COMPLEX"},ke.ELEMENT={type:3,value:"ELEMENT"},ke.PARTIAL={type:3,value:"PARTIAL"},e.IfcElementCompositionEnum=ke;class je{}je.EXTERNALCOMBUSTION={type:3,value:"EXTERNALCOMBUSTION"},je.INTERNALCOMBUSTION={type:3,value:"INTERNALCOMBUSTION"},je.USERDEFINED={type:3,value:"USERDEFINED"},je.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcEngineTypeEnum=je;class Qe{}Qe.DIRECTEVAPORATIVEAIRWASHER={type:3,value:"DIRECTEVAPORATIVEAIRWASHER"},Qe.DIRECTEVAPORATIVEPACKAGEDROTARYAIRCOOLER={type:3,value:"DIRECTEVAPORATIVEPACKAGEDROTARYAIRCOOLER"},Qe.DIRECTEVAPORATIVERANDOMMEDIAAIRCOOLER={type:3,value:"DIRECTEVAPORATIVERANDOMMEDIAAIRCOOLER"},Qe.DIRECTEVAPORATIVERIGIDMEDIAAIRCOOLER={type:3,value:"DIRECTEVAPORATIVERIGIDMEDIAAIRCOOLER"},Qe.DIRECTEVAPORATIVESLINGERSPACKAGEDAIRCOOLER={type:3,value:"DIRECTEVAPORATIVESLINGERSPACKAGEDAIRCOOLER"},Qe.INDIRECTDIRECTCOMBINATION={type:3,value:"INDIRECTDIRECTCOMBINATION"},Qe.INDIRECTEVAPORATIVECOOLINGTOWERORCOILCOOLER={type:3,value:"INDIRECTEVAPORATIVECOOLINGTOWERORCOILCOOLER"},Qe.INDIRECTEVAPORATIVEPACKAGEAIRCOOLER={type:3,value:"INDIRECTEVAPORATIVEPACKAGEAIRCOOLER"},Qe.INDIRECTEVAPORATIVEWETCOIL={type:3,value:"INDIRECTEVAPORATIVEWETCOIL"},Qe.USERDEFINED={type:3,value:"USERDEFINED"},Qe.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcEvaporativeCoolerTypeEnum=Qe;class We{}We.DIRECTEXPANSION={type:3,value:"DIRECTEXPANSION"},We.DIRECTEXPANSIONBRAZEDPLATE={type:3,value:"DIRECTEXPANSIONBRAZEDPLATE"},We.DIRECTEXPANSIONSHELLANDTUBE={type:3,value:"DIRECTEXPANSIONSHELLANDTUBE"},We.DIRECTEXPANSIONTUBEINTUBE={type:3,value:"DIRECTEXPANSIONTUBEINTUBE"},We.FLOODEDSHELLANDTUBE={type:3,value:"FLOODEDSHELLANDTUBE"},We.SHELLANDCOIL={type:3,value:"SHELLANDCOIL"},We.USERDEFINED={type:3,value:"USERDEFINED"},We.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcEvaporatorTypeEnum=We;class ze{}ze.EVENTCOMPLEX={type:3,value:"EVENTCOMPLEX"},ze.EVENTMESSAGE={type:3,value:"EVENTMESSAGE"},ze.EVENTRULE={type:3,value:"EVENTRULE"},ze.EVENTTIME={type:3,value:"EVENTTIME"},ze.USERDEFINED={type:3,value:"USERDEFINED"},ze.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcEventTriggerTypeEnum=ze;class Ke{}Ke.ENDEVENT={type:3,value:"ENDEVENT"},Ke.INTERMEDIATEEVENT={type:3,value:"INTERMEDIATEEVENT"},Ke.STARTEVENT={type:3,value:"STARTEVENT"},Ke.USERDEFINED={type:3,value:"USERDEFINED"},Ke.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcEventTypeEnum=Ke;class Ye{}Ye.EXTERNAL={type:3,value:"EXTERNAL"},Ye.EXTERNAL_EARTH={type:3,value:"EXTERNAL_EARTH"},Ye.EXTERNAL_FIRE={type:3,value:"EXTERNAL_FIRE"},Ye.EXTERNAL_WATER={type:3,value:"EXTERNAL_WATER"},Ye.USERDEFINED={type:3,value:"USERDEFINED"},Ye.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcExternalSpatialElementTypeEnum=Ye;class Xe{}Xe.ABOVEGROUND={type:3,value:"ABOVEGROUND"},Xe.BELOWGROUND={type:3,value:"BELOWGROUND"},Xe.JUNCTION={type:3,value:"JUNCTION"},Xe.LEVELCROSSING={type:3,value:"LEVELCROSSING"},Xe.SEGMENT={type:3,value:"SEGMENT"},Xe.SUBSTRUCTURE={type:3,value:"SUBSTRUCTURE"},Xe.SUPERSTRUCTURE={type:3,value:"SUPERSTRUCTURE"},Xe.TERMINAL={type:3,value:"TERMINAL"},Xe.USERDEFINED={type:3,value:"USERDEFINED"},Xe.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcFacilityPartCommonTypeEnum=Xe;class Ze{}Ze.LATERAL={type:3,value:"LATERAL"},Ze.LONGITUDINAL={type:3,value:"LONGITUDINAL"},Ze.REGION={type:3,value:"REGION"},Ze.VERTICAL={type:3,value:"VERTICAL"},Ze.USERDEFINED={type:3,value:"USERDEFINED"},Ze.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcFacilityUsageEnum=Ze;class qe{}qe.CENTRIFUGALAIRFOIL={type:3,value:"CENTRIFUGALAIRFOIL"},qe.CENTRIFUGALBACKWARDINCLINEDCURVED={type:3,value:"CENTRIFUGALBACKWARDINCLINEDCURVED"},qe.CENTRIFUGALFORWARDCURVED={type:3,value:"CENTRIFUGALFORWARDCURVED"},qe.CENTRIFUGALRADIAL={type:3,value:"CENTRIFUGALRADIAL"},qe.PROPELLORAXIAL={type:3,value:"PROPELLORAXIAL"},qe.TUBEAXIAL={type:3,value:"TUBEAXIAL"},qe.VANEAXIAL={type:3,value:"VANEAXIAL"},qe.USERDEFINED={type:3,value:"USERDEFINED"},qe.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcFanTypeEnum=qe;class Je{}Je.GLUE={type:3,value:"GLUE"},Je.MORTAR={type:3,value:"MORTAR"},Je.WELD={type:3,value:"WELD"},Je.USERDEFINED={type:3,value:"USERDEFINED"},Je.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcFastenerTypeEnum=Je;class $e{}$e.AIRPARTICLEFILTER={type:3,value:"AIRPARTICLEFILTER"},$e.COMPRESSEDAIRFILTER={type:3,value:"COMPRESSEDAIRFILTER"},$e.ODORFILTER={type:3,value:"ODORFILTER"},$e.OILFILTER={type:3,value:"OILFILTER"},$e.STRAINER={type:3,value:"STRAINER"},$e.WATERFILTER={type:3,value:"WATERFILTER"},$e.USERDEFINED={type:3,value:"USERDEFINED"},$e.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcFilterTypeEnum=$e;class et{}et.BREECHINGINLET={type:3,value:"BREECHINGINLET"},et.FIREHYDRANT={type:3,value:"FIREHYDRANT"},et.FIREMONITOR={type:3,value:"FIREMONITOR"},et.HOSEREEL={type:3,value:"HOSEREEL"},et.SPRINKLER={type:3,value:"SPRINKLER"},et.SPRINKLERDEFLECTOR={type:3,value:"SPRINKLERDEFLECTOR"},et.USERDEFINED={type:3,value:"USERDEFINED"},et.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcFireSuppressionTerminalTypeEnum=et;class tt{}tt.SINK={type:3,value:"SINK"},tt.SOURCE={type:3,value:"SOURCE"},tt.SOURCEANDSINK={type:3,value:"SOURCEANDSINK"},tt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcFlowDirectionEnum=tt;class st{}st.AMMETER={type:3,value:"AMMETER"},st.COMBINED={type:3,value:"COMBINED"},st.FREQUENCYMETER={type:3,value:"FREQUENCYMETER"},st.PHASEANGLEMETER={type:3,value:"PHASEANGLEMETER"},st.POWERFACTORMETER={type:3,value:"POWERFACTORMETER"},st.PRESSUREGAUGE={type:3,value:"PRESSUREGAUGE"},st.THERMOMETER={type:3,value:"THERMOMETER"},st.VOLTMETER={type:3,value:"VOLTMETER"},st.VOLTMETER_PEAK={type:3,value:"VOLTMETER_PEAK"},st.VOLTMETER_RMS={type:3,value:"VOLTMETER_RMS"},st.USERDEFINED={type:3,value:"USERDEFINED"},st.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcFlowInstrumentTypeEnum=st;class it{}it.ENERGYMETER={type:3,value:"ENERGYMETER"},it.GASMETER={type:3,value:"GASMETER"},it.OILMETER={type:3,value:"OILMETER"},it.WATERMETER={type:3,value:"WATERMETER"},it.USERDEFINED={type:3,value:"USERDEFINED"},it.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcFlowMeterTypeEnum=it;class rt{}rt.CAISSON_FOUNDATION={type:3,value:"CAISSON_FOUNDATION"},rt.FOOTING_BEAM={type:3,value:"FOOTING_BEAM"},rt.PAD_FOOTING={type:3,value:"PAD_FOOTING"},rt.PILE_CAP={type:3,value:"PILE_CAP"},rt.STRIP_FOOTING={type:3,value:"STRIP_FOOTING"},rt.USERDEFINED={type:3,value:"USERDEFINED"},rt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcFootingTypeEnum=rt;class ot{}ot.BED={type:3,value:"BED"},ot.CHAIR={type:3,value:"CHAIR"},ot.DESK={type:3,value:"DESK"},ot.FILECABINET={type:3,value:"FILECABINET"},ot.SHELF={type:3,value:"SHELF"},ot.SOFA={type:3,value:"SOFA"},ot.TABLE={type:3,value:"TABLE"},ot.TECHNICALCABINET={type:3,value:"TECHNICALCABINET"},ot.USERDEFINED={type:3,value:"USERDEFINED"},ot.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcFurnitureTypeEnum=ot;class nt{}nt.SOIL_BORING_POINT={type:3,value:"SOIL_BORING_POINT"},nt.TERRAIN={type:3,value:"TERRAIN"},nt.VEGETATION={type:3,value:"VEGETATION"},nt.USERDEFINED={type:3,value:"USERDEFINED"},nt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcGeographicElementTypeEnum=nt;class at{}at.ELEVATION_VIEW={type:3,value:"ELEVATION_VIEW"},at.GRAPH_VIEW={type:3,value:"GRAPH_VIEW"},at.MODEL_VIEW={type:3,value:"MODEL_VIEW"},at.PLAN_VIEW={type:3,value:"PLAN_VIEW"},at.REFLECTED_PLAN_VIEW={type:3,value:"REFLECTED_PLAN_VIEW"},at.SECTION_VIEW={type:3,value:"SECTION_VIEW"},at.SKETCH_VIEW={type:3,value:"SKETCH_VIEW"},at.USERDEFINED={type:3,value:"USERDEFINED"},at.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcGeometricProjectionEnum=at;class lt{}lt.SOLID={type:3,value:"SOLID"},lt.VOID={type:3,value:"VOID"},lt.WATER={type:3,value:"WATER"},lt.USERDEFINED={type:3,value:"USERDEFINED"},lt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcGeotechnicalStratumTypeEnum=lt;class ht{}ht.GLOBAL_COORDS={type:3,value:"GLOBAL_COORDS"},ht.LOCAL_COORDS={type:3,value:"LOCAL_COORDS"},e.IfcGlobalOrLocalEnum=ht;class ct{}ct.IRREGULAR={type:3,value:"IRREGULAR"},ct.RADIAL={type:3,value:"RADIAL"},ct.RECTANGULAR={type:3,value:"RECTANGULAR"},ct.TRIANGULAR={type:3,value:"TRIANGULAR"},ct.USERDEFINED={type:3,value:"USERDEFINED"},ct.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcGridTypeEnum=ct;class ut{}ut.PLATE={type:3,value:"PLATE"},ut.SHELLANDTUBE={type:3,value:"SHELLANDTUBE"},ut.TURNOUTHEATING={type:3,value:"TURNOUTHEATING"},ut.USERDEFINED={type:3,value:"USERDEFINED"},ut.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcHeatExchangerTypeEnum=ut;class At{}At.ADIABATICAIRWASHER={type:3,value:"ADIABATICAIRWASHER"},At.ADIABATICATOMIZING={type:3,value:"ADIABATICATOMIZING"},At.ADIABATICCOMPRESSEDAIRNOZZLE={type:3,value:"ADIABATICCOMPRESSEDAIRNOZZLE"},At.ADIABATICPAN={type:3,value:"ADIABATICPAN"},At.ADIABATICRIGIDMEDIA={type:3,value:"ADIABATICRIGIDMEDIA"},At.ADIABATICULTRASONIC={type:3,value:"ADIABATICULTRASONIC"},At.ADIABATICWETTEDELEMENT={type:3,value:"ADIABATICWETTEDELEMENT"},At.ASSISTEDBUTANE={type:3,value:"ASSISTEDBUTANE"},At.ASSISTEDELECTRIC={type:3,value:"ASSISTEDELECTRIC"},At.ASSISTEDNATURALGAS={type:3,value:"ASSISTEDNATURALGAS"},At.ASSISTEDPROPANE={type:3,value:"ASSISTEDPROPANE"},At.ASSISTEDSTEAM={type:3,value:"ASSISTEDSTEAM"},At.STEAMINJECTION={type:3,value:"STEAMINJECTION"},At.USERDEFINED={type:3,value:"USERDEFINED"},At.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcHumidifierTypeEnum=At;class pt{}pt.BUMPER={type:3,value:"BUMPER"},pt.CRASHCUSHION={type:3,value:"CRASHCUSHION"},pt.DAMPINGSYSTEM={type:3,value:"DAMPINGSYSTEM"},pt.FENDER={type:3,value:"FENDER"},pt.USERDEFINED={type:3,value:"USERDEFINED"},pt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcImpactProtectionDeviceTypeEnum=pt;class dt{}dt.CYCLONIC={type:3,value:"CYCLONIC"},dt.GREASE={type:3,value:"GREASE"},dt.OIL={type:3,value:"OIL"},dt.PETROL={type:3,value:"PETROL"},dt.USERDEFINED={type:3,value:"USERDEFINED"},dt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcInterceptorTypeEnum=dt;class ft{}ft.EXTERNAL={type:3,value:"EXTERNAL"},ft.EXTERNAL_EARTH={type:3,value:"EXTERNAL_EARTH"},ft.EXTERNAL_FIRE={type:3,value:"EXTERNAL_FIRE"},ft.EXTERNAL_WATER={type:3,value:"EXTERNAL_WATER"},ft.INTERNAL={type:3,value:"INTERNAL"},ft.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcInternalOrExternalEnum=ft;class mt{}mt.ASSETINVENTORY={type:3,value:"ASSETINVENTORY"},mt.FURNITUREINVENTORY={type:3,value:"FURNITUREINVENTORY"},mt.SPACEINVENTORY={type:3,value:"SPACEINVENTORY"},mt.USERDEFINED={type:3,value:"USERDEFINED"},mt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcInventoryTypeEnum=mt;class gt{}gt.DATA={type:3,value:"DATA"},gt.POWER={type:3,value:"POWER"},gt.USERDEFINED={type:3,value:"USERDEFINED"},gt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcJunctionBoxTypeEnum=gt;class yt{}yt.PIECEWISE_BEZIER_KNOTS={type:3,value:"PIECEWISE_BEZIER_KNOTS"},yt.QUASI_UNIFORM_KNOTS={type:3,value:"QUASI_UNIFORM_KNOTS"},yt.UNIFORM_KNOTS={type:3,value:"UNIFORM_KNOTS"},yt.UNSPECIFIED={type:3,value:"UNSPECIFIED"},e.IfcKnotType=yt;class Et{}Et.ADMINISTRATION={type:3,value:"ADMINISTRATION"},Et.CARPENTRY={type:3,value:"CARPENTRY"},Et.CLEANING={type:3,value:"CLEANING"},Et.CONCRETE={type:3,value:"CONCRETE"},Et.DRYWALL={type:3,value:"DRYWALL"},Et.ELECTRIC={type:3,value:"ELECTRIC"},Et.FINISHING={type:3,value:"FINISHING"},Et.FLOORING={type:3,value:"FLOORING"},Et.GENERAL={type:3,value:"GENERAL"},Et.HVAC={type:3,value:"HVAC"},Et.LANDSCAPING={type:3,value:"LANDSCAPING"},Et.MASONRY={type:3,value:"MASONRY"},Et.PAINTING={type:3,value:"PAINTING"},Et.PAVING={type:3,value:"PAVING"},Et.PLUMBING={type:3,value:"PLUMBING"},Et.ROOFING={type:3,value:"ROOFING"},Et.SITEGRADING={type:3,value:"SITEGRADING"},Et.STEELWORK={type:3,value:"STEELWORK"},Et.SURVEYING={type:3,value:"SURVEYING"},Et.USERDEFINED={type:3,value:"USERDEFINED"},Et.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcLaborResourceTypeEnum=Et;class vt{}vt.COMPACTFLUORESCENT={type:3,value:"COMPACTFLUORESCENT"},vt.FLUORESCENT={type:3,value:"FLUORESCENT"},vt.HALOGEN={type:3,value:"HALOGEN"},vt.HIGHPRESSUREMERCURY={type:3,value:"HIGHPRESSUREMERCURY"},vt.HIGHPRESSURESODIUM={type:3,value:"HIGHPRESSURESODIUM"},vt.LED={type:3,value:"LED"},vt.METALHALIDE={type:3,value:"METALHALIDE"},vt.OLED={type:3,value:"OLED"},vt.TUNGSTENFILAMENT={type:3,value:"TUNGSTENFILAMENT"},vt.USERDEFINED={type:3,value:"USERDEFINED"},vt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcLampTypeEnum=vt;class _t{}_t.AXIS1={type:3,value:"AXIS1"},_t.AXIS2={type:3,value:"AXIS2"},_t.AXIS3={type:3,value:"AXIS3"},e.IfcLayerSetDirectionEnum=_t;class It{}It.TYPE_A={type:3,value:"TYPE_A"},It.TYPE_B={type:3,value:"TYPE_B"},It.TYPE_C={type:3,value:"TYPE_C"},It.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcLightDistributionCurveEnum=It;class Tt{}Tt.COMPACTFLUORESCENT={type:3,value:"COMPACTFLUORESCENT"},Tt.FLUORESCENT={type:3,value:"FLUORESCENT"},Tt.HIGHPRESSUREMERCURY={type:3,value:"HIGHPRESSUREMERCURY"},Tt.HIGHPRESSURESODIUM={type:3,value:"HIGHPRESSURESODIUM"},Tt.LIGHTEMITTINGDIODE={type:3,value:"LIGHTEMITTINGDIODE"},Tt.LOWPRESSURESODIUM={type:3,value:"LOWPRESSURESODIUM"},Tt.LOWVOLTAGEHALOGEN={type:3,value:"LOWVOLTAGEHALOGEN"},Tt.MAINVOLTAGEHALOGEN={type:3,value:"MAINVOLTAGEHALOGEN"},Tt.METALHALIDE={type:3,value:"METALHALIDE"},Tt.TUNGSTENFILAMENT={type:3,value:"TUNGSTENFILAMENT"},Tt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcLightEmissionSourceEnum=Tt;class Pt{}Pt.DIRECTIONSOURCE={type:3,value:"DIRECTIONSOURCE"},Pt.POINTSOURCE={type:3,value:"POINTSOURCE"},Pt.SECURITYLIGHTING={type:3,value:"SECURITYLIGHTING"},Pt.USERDEFINED={type:3,value:"USERDEFINED"},Pt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcLightFixtureTypeEnum=Pt;class Dt{}Dt.HOSEREEL={type:3,value:"HOSEREEL"},Dt.LOADINGARM={type:3,value:"LOADINGARM"},Dt.USERDEFINED={type:3,value:"USERDEFINED"},Dt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcLiquidTerminalTypeEnum=Dt;class bt{}bt.LOAD_CASE={type:3,value:"LOAD_CASE"},bt.LOAD_COMBINATION={type:3,value:"LOAD_COMBINATION"},bt.LOAD_GROUP={type:3,value:"LOAD_GROUP"},bt.USERDEFINED={type:3,value:"USERDEFINED"},bt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcLoadGroupTypeEnum=bt;class Rt{}Rt.LOGICALAND={type:3,value:"LOGICALAND"},Rt.LOGICALNOTAND={type:3,value:"LOGICALNOTAND"},Rt.LOGICALNOTOR={type:3,value:"LOGICALNOTOR"},Rt.LOGICALOR={type:3,value:"LOGICALOR"},Rt.LOGICALXOR={type:3,value:"LOGICALXOR"},e.IfcLogicalOperatorEnum=Rt;class Ct{}Ct.BARRIERBEACH={type:3,value:"BARRIERBEACH"},Ct.BREAKWATER={type:3,value:"BREAKWATER"},Ct.CANAL={type:3,value:"CANAL"},Ct.DRYDOCK={type:3,value:"DRYDOCK"},Ct.FLOATINGDOCK={type:3,value:"FLOATINGDOCK"},Ct.HYDROLIFT={type:3,value:"HYDROLIFT"},Ct.JETTY={type:3,value:"JETTY"},Ct.LAUNCHRECOVERY={type:3,value:"LAUNCHRECOVERY"},Ct.MARINEDEFENCE={type:3,value:"MARINEDEFENCE"},Ct.NAVIGATIONALCHANNEL={type:3,value:"NAVIGATIONALCHANNEL"},Ct.PORT={type:3,value:"PORT"},Ct.QUAY={type:3,value:"QUAY"},Ct.REVETMENT={type:3,value:"REVETMENT"},Ct.SHIPLIFT={type:3,value:"SHIPLIFT"},Ct.SHIPLOCK={type:3,value:"SHIPLOCK"},Ct.SHIPYARD={type:3,value:"SHIPYARD"},Ct.SLIPWAY={type:3,value:"SLIPWAY"},Ct.WATERWAY={type:3,value:"WATERWAY"},Ct.WATERWAYSHIPLIFT={type:3,value:"WATERWAYSHIPLIFT"},Ct.USERDEFINED={type:3,value:"USERDEFINED"},Ct.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcMarineFacilityTypeEnum=Ct;class xt{}xt.ABOVEWATERLINE={type:3,value:"ABOVEWATERLINE"},xt.ANCHORAGE={type:3,value:"ANCHORAGE"},xt.APPROACHCHANNEL={type:3,value:"APPROACHCHANNEL"},xt.BELOWWATERLINE={type:3,value:"BELOWWATERLINE"},xt.BERTHINGSTRUCTURE={type:3,value:"BERTHINGSTRUCTURE"},xt.CHAMBER={type:3,value:"CHAMBER"},xt.CILL_LEVEL={type:3,value:"CILL_LEVEL"},xt.COPELEVEL={type:3,value:"COPELEVEL"},xt.CORE={type:3,value:"CORE"},xt.CREST={type:3,value:"CREST"},xt.GATEHEAD={type:3,value:"GATEHEAD"},xt.GUDINGSTRUCTURE={type:3,value:"GUDINGSTRUCTURE"},xt.HIGHWATERLINE={type:3,value:"HIGHWATERLINE"},xt.LANDFIELD={type:3,value:"LANDFIELD"},xt.LEEWARDSIDE={type:3,value:"LEEWARDSIDE"},xt.LOWWATERLINE={type:3,value:"LOWWATERLINE"},xt.MANUFACTURING={type:3,value:"MANUFACTURING"},xt.NAVIGATIONALAREA={type:3,value:"NAVIGATIONALAREA"},xt.PROTECTION={type:3,value:"PROTECTION"},xt.SHIPTRANSFER={type:3,value:"SHIPTRANSFER"},xt.STORAGEAREA={type:3,value:"STORAGEAREA"},xt.VEHICLESERVICING={type:3,value:"VEHICLESERVICING"},xt.WATERFIELD={type:3,value:"WATERFIELD"},xt.WEATHERSIDE={type:3,value:"WEATHERSIDE"},xt.USERDEFINED={type:3,value:"USERDEFINED"},xt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcMarinePartTypeEnum=xt;class Nt{}Nt.ANCHORBOLT={type:3,value:"ANCHORBOLT"},Nt.BOLT={type:3,value:"BOLT"},Nt.CHAIN={type:3,value:"CHAIN"},Nt.COUPLER={type:3,value:"COUPLER"},Nt.DOWEL={type:3,value:"DOWEL"},Nt.NAIL={type:3,value:"NAIL"},Nt.NAILPLATE={type:3,value:"NAILPLATE"},Nt.RAILFASTENING={type:3,value:"RAILFASTENING"},Nt.RAILJOINT={type:3,value:"RAILJOINT"},Nt.RIVET={type:3,value:"RIVET"},Nt.ROPE={type:3,value:"ROPE"},Nt.SCREW={type:3,value:"SCREW"},Nt.SHEARCONNECTOR={type:3,value:"SHEARCONNECTOR"},Nt.STAPLE={type:3,value:"STAPLE"},Nt.STUDSHEARCONNECTOR={type:3,value:"STUDSHEARCONNECTOR"},Nt.USERDEFINED={type:3,value:"USERDEFINED"},Nt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcMechanicalFastenerTypeEnum=Nt;class Ot{}Ot.AIRSTATION={type:3,value:"AIRSTATION"},Ot.FEEDAIRUNIT={type:3,value:"FEEDAIRUNIT"},Ot.OXYGENGENERATOR={type:3,value:"OXYGENGENERATOR"},Ot.OXYGENPLANT={type:3,value:"OXYGENPLANT"},Ot.VACUUMSTATION={type:3,value:"VACUUMSTATION"},Ot.USERDEFINED={type:3,value:"USERDEFINED"},Ot.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcMedicalDeviceTypeEnum=Ot;class St{}St.ARCH_SEGMENT={type:3,value:"ARCH_SEGMENT"},St.BRACE={type:3,value:"BRACE"},St.CHORD={type:3,value:"CHORD"},St.COLLAR={type:3,value:"COLLAR"},St.MEMBER={type:3,value:"MEMBER"},St.MULLION={type:3,value:"MULLION"},St.PLATE={type:3,value:"PLATE"},St.POST={type:3,value:"POST"},St.PURLIN={type:3,value:"PURLIN"},St.RAFTER={type:3,value:"RAFTER"},St.STAY_CABLE={type:3,value:"STAY_CABLE"},St.STIFFENING_RIB={type:3,value:"STIFFENING_RIB"},St.STRINGER={type:3,value:"STRINGER"},St.STRUCTURALCABLE={type:3,value:"STRUCTURALCABLE"},St.STRUT={type:3,value:"STRUT"},St.STUD={type:3,value:"STUD"},St.SUSPENDER={type:3,value:"SUSPENDER"},St.SUSPENSION_CABLE={type:3,value:"SUSPENSION_CABLE"},St.TIEBAR={type:3,value:"TIEBAR"},St.USERDEFINED={type:3,value:"USERDEFINED"},St.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcMemberTypeEnum=St;class wt{}wt.ACCESSPOINT={type:3,value:"ACCESSPOINT"},wt.BASEBANDUNIT={type:3,value:"BASEBANDUNIT"},wt.BASETRANSCEIVERSTATION={type:3,value:"BASETRANSCEIVERSTATION"},wt.E_UTRAN_NODE_B={type:3,value:"E_UTRAN_NODE_B"},wt.GATEWAY_GPRS_SUPPORT_NODE={type:3,value:"GATEWAY_GPRS_SUPPORT_NODE"},wt.MASTERUNIT={type:3,value:"MASTERUNIT"},wt.MOBILESWITCHINGCENTER={type:3,value:"MOBILESWITCHINGCENTER"},wt.MSCSERVER={type:3,value:"MSCSERVER"},wt.PACKETCONTROLUNIT={type:3,value:"PACKETCONTROLUNIT"},wt.REMOTERADIOUNIT={type:3,value:"REMOTERADIOUNIT"},wt.REMOTEUNIT={type:3,value:"REMOTEUNIT"},wt.SERVICE_GPRS_SUPPORT_NODE={type:3,value:"SERVICE_GPRS_SUPPORT_NODE"},wt.SUBSCRIBERSERVER={type:3,value:"SUBSCRIBERSERVER"},wt.USERDEFINED={type:3,value:"USERDEFINED"},wt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcMobileTelecommunicationsApplianceTypeEnum=wt;class Mt{}Mt.BOLLARD={type:3,value:"BOLLARD"},Mt.LINETENSIONER={type:3,value:"LINETENSIONER"},Mt.MAGNETICDEVICE={type:3,value:"MAGNETICDEVICE"},Mt.MOORINGHOOKS={type:3,value:"MOORINGHOOKS"},Mt.VACUUMDEVICE={type:3,value:"VACUUMDEVICE"},Mt.USERDEFINED={type:3,value:"USERDEFINED"},Mt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcMooringDeviceTypeEnum=Mt;class Bt{}Bt.BELTDRIVE={type:3,value:"BELTDRIVE"},Bt.COUPLING={type:3,value:"COUPLING"},Bt.DIRECTDRIVE={type:3,value:"DIRECTDRIVE"},Bt.USERDEFINED={type:3,value:"USERDEFINED"},Bt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcMotorConnectionTypeEnum=Bt;class Ft{}Ft.BEACON={type:3,value:"BEACON"},Ft.BUOY={type:3,value:"BUOY"},Ft.USERDEFINED={type:3,value:"USERDEFINED"},Ft.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcNavigationElementTypeEnum=Ft;class Lt{}Lt.ACTOR={type:3,value:"ACTOR"},Lt.CONTROL={type:3,value:"CONTROL"},Lt.GROUP={type:3,value:"GROUP"},Lt.PROCESS={type:3,value:"PROCESS"},Lt.PRODUCT={type:3,value:"PRODUCT"},Lt.PROJECT={type:3,value:"PROJECT"},Lt.RESOURCE={type:3,value:"RESOURCE"},Lt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcObjectTypeEnum=Lt;class Ut{}Ut.CODECOMPLIANCE={type:3,value:"CODECOMPLIANCE"},Ut.CODEWAIVER={type:3,value:"CODEWAIVER"},Ut.DESIGNINTENT={type:3,value:"DESIGNINTENT"},Ut.EXTERNAL={type:3,value:"EXTERNAL"},Ut.HEALTHANDSAFETY={type:3,value:"HEALTHANDSAFETY"},Ut.MERGECONFLICT={type:3,value:"MERGECONFLICT"},Ut.MODELVIEW={type:3,value:"MODELVIEW"},Ut.PARAMETER={type:3,value:"PARAMETER"},Ut.REQUIREMENT={type:3,value:"REQUIREMENT"},Ut.SPECIFICATION={type:3,value:"SPECIFICATION"},Ut.TRIGGERCONDITION={type:3,value:"TRIGGERCONDITION"},Ut.USERDEFINED={type:3,value:"USERDEFINED"},Ut.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcObjectiveEnum=Ut;class Ht{}Ht.ASSIGNEE={type:3,value:"ASSIGNEE"},Ht.ASSIGNOR={type:3,value:"ASSIGNOR"},Ht.LESSEE={type:3,value:"LESSEE"},Ht.LESSOR={type:3,value:"LESSOR"},Ht.LETTINGAGENT={type:3,value:"LETTINGAGENT"},Ht.OWNER={type:3,value:"OWNER"},Ht.TENANT={type:3,value:"TENANT"},Ht.USERDEFINED={type:3,value:"USERDEFINED"},Ht.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcOccupantTypeEnum=Ht;class Gt{}Gt.OPENING={type:3,value:"OPENING"},Gt.RECESS={type:3,value:"RECESS"},Gt.USERDEFINED={type:3,value:"USERDEFINED"},Gt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcOpeningElementTypeEnum=Gt;class Vt{}Vt.AUDIOVISUALOUTLET={type:3,value:"AUDIOVISUALOUTLET"},Vt.COMMUNICATIONSOUTLET={type:3,value:"COMMUNICATIONSOUTLET"},Vt.DATAOUTLET={type:3,value:"DATAOUTLET"},Vt.POWEROUTLET={type:3,value:"POWEROUTLET"},Vt.TELEPHONEOUTLET={type:3,value:"TELEPHONEOUTLET"},Vt.USERDEFINED={type:3,value:"USERDEFINED"},Vt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcOutletTypeEnum=Vt;class kt{}kt.FLEXIBLE={type:3,value:"FLEXIBLE"},kt.RIGID={type:3,value:"RIGID"},kt.USERDEFINED={type:3,value:"USERDEFINED"},kt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcPavementTypeEnum=kt;class jt{}jt.USERDEFINED={type:3,value:"USERDEFINED"},jt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcPerformanceHistoryTypeEnum=jt;class Qt{}Qt.GRILL={type:3,value:"GRILL"},Qt.LOUVER={type:3,value:"LOUVER"},Qt.SCREEN={type:3,value:"SCREEN"},Qt.USERDEFINED={type:3,value:"USERDEFINED"},Qt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcPermeableCoveringOperationEnum=Qt;class Wt{}Wt.ACCESS={type:3,value:"ACCESS"},Wt.BUILDING={type:3,value:"BUILDING"},Wt.WORK={type:3,value:"WORK"},Wt.USERDEFINED={type:3,value:"USERDEFINED"},Wt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcPermitTypeEnum=Wt;class zt{}zt.PHYSICAL={type:3,value:"PHYSICAL"},zt.VIRTUAL={type:3,value:"VIRTUAL"},zt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcPhysicalOrVirtualEnum=zt;class Kt{}Kt.CAST_IN_PLACE={type:3,value:"CAST_IN_PLACE"},Kt.COMPOSITE={type:3,value:"COMPOSITE"},Kt.PRECAST_CONCRETE={type:3,value:"PRECAST_CONCRETE"},Kt.PREFAB_STEEL={type:3,value:"PREFAB_STEEL"},Kt.USERDEFINED={type:3,value:"USERDEFINED"},Kt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcPileConstructionEnum=Kt;class Yt{}Yt.BORED={type:3,value:"BORED"},Yt.COHESION={type:3,value:"COHESION"},Yt.DRIVEN={type:3,value:"DRIVEN"},Yt.FRICTION={type:3,value:"FRICTION"},Yt.JETGROUTING={type:3,value:"JETGROUTING"},Yt.SUPPORT={type:3,value:"SUPPORT"},Yt.USERDEFINED={type:3,value:"USERDEFINED"},Yt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcPileTypeEnum=Yt;class Xt{}Xt.BEND={type:3,value:"BEND"},Xt.CONNECTOR={type:3,value:"CONNECTOR"},Xt.ENTRY={type:3,value:"ENTRY"},Xt.EXIT={type:3,value:"EXIT"},Xt.JUNCTION={type:3,value:"JUNCTION"},Xt.OBSTRUCTION={type:3,value:"OBSTRUCTION"},Xt.TRANSITION={type:3,value:"TRANSITION"},Xt.USERDEFINED={type:3,value:"USERDEFINED"},Xt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcPipeFittingTypeEnum=Xt;class Zt{}Zt.CULVERT={type:3,value:"CULVERT"},Zt.FLEXIBLESEGMENT={type:3,value:"FLEXIBLESEGMENT"},Zt.GUTTER={type:3,value:"GUTTER"},Zt.RIGIDSEGMENT={type:3,value:"RIGIDSEGMENT"},Zt.SPOOL={type:3,value:"SPOOL"},Zt.USERDEFINED={type:3,value:"USERDEFINED"},Zt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcPipeSegmentTypeEnum=Zt;class qt{}qt.BASE_PLATE={type:3,value:"BASE_PLATE"},qt.COVER_PLATE={type:3,value:"COVER_PLATE"},qt.CURTAIN_PANEL={type:3,value:"CURTAIN_PANEL"},qt.FLANGE_PLATE={type:3,value:"FLANGE_PLATE"},qt.GUSSET_PLATE={type:3,value:"GUSSET_PLATE"},qt.SHEET={type:3,value:"SHEET"},qt.SPLICE_PLATE={type:3,value:"SPLICE_PLATE"},qt.STIFFENER_PLATE={type:3,value:"STIFFENER_PLATE"},qt.WEB_PLATE={type:3,value:"WEB_PLATE"},qt.USERDEFINED={type:3,value:"USERDEFINED"},qt.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcPlateTypeEnum=qt;class Jt{}Jt.CURVE3D={type:3,value:"CURVE3D"},Jt.PCURVE_S1={type:3,value:"PCURVE_S1"},Jt.PCURVE_S2={type:3,value:"PCURVE_S2"},e.IfcPreferredSurfaceCurveRepresentation=Jt;class $t{}$t.ADVICE_CAUTION={type:3,value:"ADVICE_CAUTION"},$t.ADVICE_NOTE={type:3,value:"ADVICE_NOTE"},$t.ADVICE_WARNING={type:3,value:"ADVICE_WARNING"},$t.CALIBRATION={type:3,value:"CALIBRATION"},$t.DIAGNOSTIC={type:3,value:"DIAGNOSTIC"},$t.SHUTDOWN={type:3,value:"SHUTDOWN"},$t.STARTUP={type:3,value:"STARTUP"},$t.USERDEFINED={type:3,value:"USERDEFINED"},$t.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcProcedureTypeEnum=$t;class es{}es.AREA={type:3,value:"AREA"},es.CURVE={type:3,value:"CURVE"},e.IfcProfileTypeEnum=es;class ts{}ts.CHANGEORDER={type:3,value:"CHANGEORDER"},ts.MAINTENANCEWORKORDER={type:3,value:"MAINTENANCEWORKORDER"},ts.MOVEORDER={type:3,value:"MOVEORDER"},ts.PURCHASEORDER={type:3,value:"PURCHASEORDER"},ts.WORKORDER={type:3,value:"WORKORDER"},ts.USERDEFINED={type:3,value:"USERDEFINED"},ts.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcProjectOrderTypeEnum=ts;class ss{}ss.PROJECTED_LENGTH={type:3,value:"PROJECTED_LENGTH"},ss.TRUE_LENGTH={type:3,value:"TRUE_LENGTH"},e.IfcProjectedOrTrueLengthEnum=ss;class is{}is.BLISTER={type:3,value:"BLISTER"},is.DEVIATOR={type:3,value:"DEVIATOR"},is.USERDEFINED={type:3,value:"USERDEFINED"},is.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcProjectionElementTypeEnum=is;class rs{}rs.PSET_MATERIALDRIVEN={type:3,value:"PSET_MATERIALDRIVEN"},rs.PSET_OCCURRENCEDRIVEN={type:3,value:"PSET_OCCURRENCEDRIVEN"},rs.PSET_PERFORMANCEDRIVEN={type:3,value:"PSET_PERFORMANCEDRIVEN"},rs.PSET_PROFILEDRIVEN={type:3,value:"PSET_PROFILEDRIVEN"},rs.PSET_TYPEDRIVENONLY={type:3,value:"PSET_TYPEDRIVENONLY"},rs.PSET_TYPEDRIVENOVERRIDE={type:3,value:"PSET_TYPEDRIVENOVERRIDE"},rs.QTO_OCCURRENCEDRIVEN={type:3,value:"QTO_OCCURRENCEDRIVEN"},rs.QTO_TYPEDRIVENONLY={type:3,value:"QTO_TYPEDRIVENONLY"},rs.QTO_TYPEDRIVENOVERRIDE={type:3,value:"QTO_TYPEDRIVENOVERRIDE"},rs.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcPropertySetTemplateTypeEnum=rs;class os{}os.ELECTROMAGNETIC={type:3,value:"ELECTROMAGNETIC"},os.ELECTRONIC={type:3,value:"ELECTRONIC"},os.RESIDUALCURRENT={type:3,value:"RESIDUALCURRENT"},os.THERMAL={type:3,value:"THERMAL"},os.USERDEFINED={type:3,value:"USERDEFINED"},os.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcProtectiveDeviceTrippingUnitTypeEnum=os;class ns{}ns.ANTI_ARCING_DEVICE={type:3,value:"ANTI_ARCING_DEVICE"},ns.CIRCUITBREAKER={type:3,value:"CIRCUITBREAKER"},ns.EARTHINGSWITCH={type:3,value:"EARTHINGSWITCH"},ns.EARTHLEAKAGECIRCUITBREAKER={type:3,value:"EARTHLEAKAGECIRCUITBREAKER"},ns.FUSEDISCONNECTOR={type:3,value:"FUSEDISCONNECTOR"},ns.RESIDUALCURRENTCIRCUITBREAKER={type:3,value:"RESIDUALCURRENTCIRCUITBREAKER"},ns.RESIDUALCURRENTSWITCH={type:3,value:"RESIDUALCURRENTSWITCH"},ns.SPARKGAP={type:3,value:"SPARKGAP"},ns.VARISTOR={type:3,value:"VARISTOR"},ns.VOLTAGELIMITER={type:3,value:"VOLTAGELIMITER"},ns.USERDEFINED={type:3,value:"USERDEFINED"},ns.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcProtectiveDeviceTypeEnum=ns;class as{}as.CIRCULATOR={type:3,value:"CIRCULATOR"},as.ENDSUCTION={type:3,value:"ENDSUCTION"},as.SPLITCASE={type:3,value:"SPLITCASE"},as.SUBMERSIBLEPUMP={type:3,value:"SUBMERSIBLEPUMP"},as.SUMPPUMP={type:3,value:"SUMPPUMP"},as.VERTICALINLINE={type:3,value:"VERTICALINLINE"},as.VERTICALTURBINE={type:3,value:"VERTICALTURBINE"},as.USERDEFINED={type:3,value:"USERDEFINED"},as.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcPumpTypeEnum=as;class ls{}ls.BLADE={type:3,value:"BLADE"},ls.CHECKRAIL={type:3,value:"CHECKRAIL"},ls.GUARDRAIL={type:3,value:"GUARDRAIL"},ls.RACKRAIL={type:3,value:"RACKRAIL"},ls.RAIL={type:3,value:"RAIL"},ls.STOCKRAIL={type:3,value:"STOCKRAIL"},ls.USERDEFINED={type:3,value:"USERDEFINED"},ls.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcRailTypeEnum=ls;class hs{}hs.BALUSTRADE={type:3,value:"BALUSTRADE"},hs.FENCE={type:3,value:"FENCE"},hs.GUARDRAIL={type:3,value:"GUARDRAIL"},hs.HANDRAIL={type:3,value:"HANDRAIL"},hs.USERDEFINED={type:3,value:"USERDEFINED"},hs.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcRailingTypeEnum=hs;class cs{}cs.DILATATIONSUPERSTRUCTURE={type:3,value:"DILATATIONSUPERSTRUCTURE"},cs.LINESIDESTRUCTURE={type:3,value:"LINESIDESTRUCTURE"},cs.LINESIDESTRUCTUREPART={type:3,value:"LINESIDESTRUCTUREPART"},cs.PLAINTRACKSUPERSTRUCTURE={type:3,value:"PLAINTRACKSUPERSTRUCTURE"},cs.SUPERSTRUCTURE={type:3,value:"SUPERSTRUCTURE"},cs.TRACKSTRUCTURE={type:3,value:"TRACKSTRUCTURE"},cs.TRACKSTRUCTUREPART={type:3,value:"TRACKSTRUCTUREPART"},cs.TURNOUTSUPERSTRUCTURE={type:3,value:"TURNOUTSUPERSTRUCTURE"},cs.USERDEFINED={type:3,value:"USERDEFINED"},cs.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcRailwayPartTypeEnum=cs;class us{}us.USERDEFINED={type:3,value:"USERDEFINED"},us.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcRailwayTypeEnum=us;class As{}As.SPIRAL={type:3,value:"SPIRAL"},As.STRAIGHT={type:3,value:"STRAIGHT"},As.USERDEFINED={type:3,value:"USERDEFINED"},As.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcRampFlightTypeEnum=As;class ps{}ps.HALF_TURN_RAMP={type:3,value:"HALF_TURN_RAMP"},ps.QUARTER_TURN_RAMP={type:3,value:"QUARTER_TURN_RAMP"},ps.SPIRAL_RAMP={type:3,value:"SPIRAL_RAMP"},ps.STRAIGHT_RUN_RAMP={type:3,value:"STRAIGHT_RUN_RAMP"},ps.TWO_QUARTER_TURN_RAMP={type:3,value:"TWO_QUARTER_TURN_RAMP"},ps.TWO_STRAIGHT_RUN_RAMP={type:3,value:"TWO_STRAIGHT_RUN_RAMP"},ps.USERDEFINED={type:3,value:"USERDEFINED"},ps.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcRampTypeEnum=ps;class ds{}ds.BY_DAY_COUNT={type:3,value:"BY_DAY_COUNT"},ds.BY_WEEKDAY_COUNT={type:3,value:"BY_WEEKDAY_COUNT"},ds.DAILY={type:3,value:"DAILY"},ds.MONTHLY_BY_DAY_OF_MONTH={type:3,value:"MONTHLY_BY_DAY_OF_MONTH"},ds.MONTHLY_BY_POSITION={type:3,value:"MONTHLY_BY_POSITION"},ds.WEEKLY={type:3,value:"WEEKLY"},ds.YEARLY_BY_DAY_OF_MONTH={type:3,value:"YEARLY_BY_DAY_OF_MONTH"},ds.YEARLY_BY_POSITION={type:3,value:"YEARLY_BY_POSITION"},e.IfcRecurrenceTypeEnum=ds;class fs{}fs.BOUNDARY={type:3,value:"BOUNDARY"},fs.INTERSECTION={type:3,value:"INTERSECTION"},fs.KILOPOINT={type:3,value:"KILOPOINT"},fs.LANDMARK={type:3,value:"LANDMARK"},fs.MILEPOINT={type:3,value:"MILEPOINT"},fs.POSITION={type:3,value:"POSITION"},fs.REFERENCEMARKER={type:3,value:"REFERENCEMARKER"},fs.STATION={type:3,value:"STATION"},fs.USERDEFINED={type:3,value:"USERDEFINED"},fs.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcReferentTypeEnum=fs;class ms{}ms.BLINN={type:3,value:"BLINN"},ms.FLAT={type:3,value:"FLAT"},ms.GLASS={type:3,value:"GLASS"},ms.MATT={type:3,value:"MATT"},ms.METAL={type:3,value:"METAL"},ms.MIRROR={type:3,value:"MIRROR"},ms.PHONG={type:3,value:"PHONG"},ms.PHYSICAL={type:3,value:"PHYSICAL"},ms.PLASTIC={type:3,value:"PLASTIC"},ms.STRAUSS={type:3,value:"STRAUSS"},ms.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcReflectanceMethodEnum=ms;class gs{}gs.DYNAMICALLYCOMPACTED={type:3,value:"DYNAMICALLYCOMPACTED"},gs.GROUTED={type:3,value:"GROUTED"},gs.REPLACED={type:3,value:"REPLACED"},gs.ROLLERCOMPACTED={type:3,value:"ROLLERCOMPACTED"},gs.SURCHARGEPRELOADED={type:3,value:"SURCHARGEPRELOADED"},gs.VERTICALLYDRAINED={type:3,value:"VERTICALLYDRAINED"},gs.USERDEFINED={type:3,value:"USERDEFINED"},gs.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcReinforcedSoilTypeEnum=gs;class ys{}ys.ANCHORING={type:3,value:"ANCHORING"},ys.EDGE={type:3,value:"EDGE"},ys.LIGATURE={type:3,value:"LIGATURE"},ys.MAIN={type:3,value:"MAIN"},ys.PUNCHING={type:3,value:"PUNCHING"},ys.RING={type:3,value:"RING"},ys.SHEAR={type:3,value:"SHEAR"},ys.STUD={type:3,value:"STUD"},ys.USERDEFINED={type:3,value:"USERDEFINED"},ys.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcReinforcingBarRoleEnum=ys;class Es{}Es.PLAIN={type:3,value:"PLAIN"},Es.TEXTURED={type:3,value:"TEXTURED"},e.IfcReinforcingBarSurfaceEnum=Es;class vs{}vs.ANCHORING={type:3,value:"ANCHORING"},vs.EDGE={type:3,value:"EDGE"},vs.LIGATURE={type:3,value:"LIGATURE"},vs.MAIN={type:3,value:"MAIN"},vs.PUNCHING={type:3,value:"PUNCHING"},vs.RING={type:3,value:"RING"},vs.SHEAR={type:3,value:"SHEAR"},vs.SPACEBAR={type:3,value:"SPACEBAR"},vs.STUD={type:3,value:"STUD"},vs.USERDEFINED={type:3,value:"USERDEFINED"},vs.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcReinforcingBarTypeEnum=vs;class _s{}_s.USERDEFINED={type:3,value:"USERDEFINED"},_s.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcReinforcingMeshTypeEnum=_s;class Is{}Is.BICYCLECROSSING={type:3,value:"BICYCLECROSSING"},Is.BUS_STOP={type:3,value:"BUS_STOP"},Is.CARRIAGEWAY={type:3,value:"CARRIAGEWAY"},Is.CENTRALISLAND={type:3,value:"CENTRALISLAND"},Is.CENTRALRESERVE={type:3,value:"CENTRALRESERVE"},Is.HARDSHOULDER={type:3,value:"HARDSHOULDER"},Is.INTERSECTION={type:3,value:"INTERSECTION"},Is.LAYBY={type:3,value:"LAYBY"},Is.PARKINGBAY={type:3,value:"PARKINGBAY"},Is.PASSINGBAY={type:3,value:"PASSINGBAY"},Is.PEDESTRIAN_CROSSING={type:3,value:"PEDESTRIAN_CROSSING"},Is.RAILWAYCROSSING={type:3,value:"RAILWAYCROSSING"},Is.REFUGEISLAND={type:3,value:"REFUGEISLAND"},Is.ROADSEGMENT={type:3,value:"ROADSEGMENT"},Is.ROADSIDE={type:3,value:"ROADSIDE"},Is.ROADSIDEPART={type:3,value:"ROADSIDEPART"},Is.ROADWAYPLATEAU={type:3,value:"ROADWAYPLATEAU"},Is.ROUNDABOUT={type:3,value:"ROUNDABOUT"},Is.SHOULDER={type:3,value:"SHOULDER"},Is.SIDEWALK={type:3,value:"SIDEWALK"},Is.SOFTSHOULDER={type:3,value:"SOFTSHOULDER"},Is.TOLLPLAZA={type:3,value:"TOLLPLAZA"},Is.TRAFFICISLAND={type:3,value:"TRAFFICISLAND"},Is.TRAFFICLANE={type:3,value:"TRAFFICLANE"},Is.USERDEFINED={type:3,value:"USERDEFINED"},Is.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcRoadPartTypeEnum=Is;class Ts{}Ts.USERDEFINED={type:3,value:"USERDEFINED"},Ts.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcRoadTypeEnum=Ts;class Ps{}Ps.ARCHITECT={type:3,value:"ARCHITECT"},Ps.BUILDINGOPERATOR={type:3,value:"BUILDINGOPERATOR"},Ps.BUILDINGOWNER={type:3,value:"BUILDINGOWNER"},Ps.CIVILENGINEER={type:3,value:"CIVILENGINEER"},Ps.CLIENT={type:3,value:"CLIENT"},Ps.COMMISSIONINGENGINEER={type:3,value:"COMMISSIONINGENGINEER"},Ps.CONSTRUCTIONMANAGER={type:3,value:"CONSTRUCTIONMANAGER"},Ps.CONSULTANT={type:3,value:"CONSULTANT"},Ps.CONTRACTOR={type:3,value:"CONTRACTOR"},Ps.COSTENGINEER={type:3,value:"COSTENGINEER"},Ps.ELECTRICALENGINEER={type:3,value:"ELECTRICALENGINEER"},Ps.ENGINEER={type:3,value:"ENGINEER"},Ps.FACILITIESMANAGER={type:3,value:"FACILITIESMANAGER"},Ps.FIELDCONSTRUCTIONMANAGER={type:3,value:"FIELDCONSTRUCTIONMANAGER"},Ps.MANUFACTURER={type:3,value:"MANUFACTURER"},Ps.MECHANICALENGINEER={type:3,value:"MECHANICALENGINEER"},Ps.OWNER={type:3,value:"OWNER"},Ps.PROJECTMANAGER={type:3,value:"PROJECTMANAGER"},Ps.RESELLER={type:3,value:"RESELLER"},Ps.STRUCTURALENGINEER={type:3,value:"STRUCTURALENGINEER"},Ps.SUBCONTRACTOR={type:3,value:"SUBCONTRACTOR"},Ps.SUPPLIER={type:3,value:"SUPPLIER"},Ps.USERDEFINED={type:3,value:"USERDEFINED"},e.IfcRoleEnum=Ps;class Ds{}Ds.BARREL_ROOF={type:3,value:"BARREL_ROOF"},Ds.BUTTERFLY_ROOF={type:3,value:"BUTTERFLY_ROOF"},Ds.DOME_ROOF={type:3,value:"DOME_ROOF"},Ds.FLAT_ROOF={type:3,value:"FLAT_ROOF"},Ds.FREEFORM={type:3,value:"FREEFORM"},Ds.GABLE_ROOF={type:3,value:"GABLE_ROOF"},Ds.GAMBREL_ROOF={type:3,value:"GAMBREL_ROOF"},Ds.HIPPED_GABLE_ROOF={type:3,value:"HIPPED_GABLE_ROOF"},Ds.HIP_ROOF={type:3,value:"HIP_ROOF"},Ds.MANSARD_ROOF={type:3,value:"MANSARD_ROOF"},Ds.PAVILION_ROOF={type:3,value:"PAVILION_ROOF"},Ds.RAINBOW_ROOF={type:3,value:"RAINBOW_ROOF"},Ds.SHED_ROOF={type:3,value:"SHED_ROOF"},Ds.USERDEFINED={type:3,value:"USERDEFINED"},Ds.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcRoofTypeEnum=Ds;class bs{}bs.ATTO={type:3,value:"ATTO"},bs.CENTI={type:3,value:"CENTI"},bs.DECA={type:3,value:"DECA"},bs.DECI={type:3,value:"DECI"},bs.EXA={type:3,value:"EXA"},bs.FEMTO={type:3,value:"FEMTO"},bs.GIGA={type:3,value:"GIGA"},bs.HECTO={type:3,value:"HECTO"},bs.KILO={type:3,value:"KILO"},bs.MEGA={type:3,value:"MEGA"},bs.MICRO={type:3,value:"MICRO"},bs.MILLI={type:3,value:"MILLI"},bs.NANO={type:3,value:"NANO"},bs.PETA={type:3,value:"PETA"},bs.PICO={type:3,value:"PICO"},bs.TERA={type:3,value:"TERA"},e.IfcSIPrefix=bs;class Rs{}Rs.AMPERE={type:3,value:"AMPERE"},Rs.BECQUEREL={type:3,value:"BECQUEREL"},Rs.CANDELA={type:3,value:"CANDELA"},Rs.COULOMB={type:3,value:"COULOMB"},Rs.CUBIC_METRE={type:3,value:"CUBIC_METRE"},Rs.DEGREE_CELSIUS={type:3,value:"DEGREE_CELSIUS"},Rs.FARAD={type:3,value:"FARAD"},Rs.GRAM={type:3,value:"GRAM"},Rs.GRAY={type:3,value:"GRAY"},Rs.HENRY={type:3,value:"HENRY"},Rs.HERTZ={type:3,value:"HERTZ"},Rs.JOULE={type:3,value:"JOULE"},Rs.KELVIN={type:3,value:"KELVIN"},Rs.LUMEN={type:3,value:"LUMEN"},Rs.LUX={type:3,value:"LUX"},Rs.METRE={type:3,value:"METRE"},Rs.MOLE={type:3,value:"MOLE"},Rs.NEWTON={type:3,value:"NEWTON"},Rs.OHM={type:3,value:"OHM"},Rs.PASCAL={type:3,value:"PASCAL"},Rs.RADIAN={type:3,value:"RADIAN"},Rs.SECOND={type:3,value:"SECOND"},Rs.SIEMENS={type:3,value:"SIEMENS"},Rs.SIEVERT={type:3,value:"SIEVERT"},Rs.SQUARE_METRE={type:3,value:"SQUARE_METRE"},Rs.STERADIAN={type:3,value:"STERADIAN"},Rs.TESLA={type:3,value:"TESLA"},Rs.VOLT={type:3,value:"VOLT"},Rs.WATT={type:3,value:"WATT"},Rs.WEBER={type:3,value:"WEBER"},e.IfcSIUnitName=Rs;class Cs{}Cs.BATH={type:3,value:"BATH"},Cs.BIDET={type:3,value:"BIDET"},Cs.CISTERN={type:3,value:"CISTERN"},Cs.SANITARYFOUNTAIN={type:3,value:"SANITARYFOUNTAIN"},Cs.SHOWER={type:3,value:"SHOWER"},Cs.SINK={type:3,value:"SINK"},Cs.TOILETPAN={type:3,value:"TOILETPAN"},Cs.URINAL={type:3,value:"URINAL"},Cs.WASHHANDBASIN={type:3,value:"WASHHANDBASIN"},Cs.WCSEAT={type:3,value:"WCSEAT"},Cs.USERDEFINED={type:3,value:"USERDEFINED"},Cs.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSanitaryTerminalTypeEnum=Cs;class xs{}xs.TAPERED={type:3,value:"TAPERED"},xs.UNIFORM={type:3,value:"UNIFORM"},e.IfcSectionTypeEnum=xs;class Ns{}Ns.CO2SENSOR={type:3,value:"CO2SENSOR"},Ns.CONDUCTANCESENSOR={type:3,value:"CONDUCTANCESENSOR"},Ns.CONTACTSENSOR={type:3,value:"CONTACTSENSOR"},Ns.COSENSOR={type:3,value:"COSENSOR"},Ns.EARTHQUAKESENSOR={type:3,value:"EARTHQUAKESENSOR"},Ns.FIRESENSOR={type:3,value:"FIRESENSOR"},Ns.FLOWSENSOR={type:3,value:"FLOWSENSOR"},Ns.FOREIGNOBJECTDETECTIONSENSOR={type:3,value:"FOREIGNOBJECTDETECTIONSENSOR"},Ns.FROSTSENSOR={type:3,value:"FROSTSENSOR"},Ns.GASSENSOR={type:3,value:"GASSENSOR"},Ns.HEATSENSOR={type:3,value:"HEATSENSOR"},Ns.HUMIDITYSENSOR={type:3,value:"HUMIDITYSENSOR"},Ns.IDENTIFIERSENSOR={type:3,value:"IDENTIFIERSENSOR"},Ns.IONCONCENTRATIONSENSOR={type:3,value:"IONCONCENTRATIONSENSOR"},Ns.LEVELSENSOR={type:3,value:"LEVELSENSOR"},Ns.LIGHTSENSOR={type:3,value:"LIGHTSENSOR"},Ns.MOISTURESENSOR={type:3,value:"MOISTURESENSOR"},Ns.MOVEMENTSENSOR={type:3,value:"MOVEMENTSENSOR"},Ns.OBSTACLESENSOR={type:3,value:"OBSTACLESENSOR"},Ns.PHSENSOR={type:3,value:"PHSENSOR"},Ns.PRESSURESENSOR={type:3,value:"PRESSURESENSOR"},Ns.RADIATIONSENSOR={type:3,value:"RADIATIONSENSOR"},Ns.RADIOACTIVITYSENSOR={type:3,value:"RADIOACTIVITYSENSOR"},Ns.RAINSENSOR={type:3,value:"RAINSENSOR"},Ns.SMOKESENSOR={type:3,value:"SMOKESENSOR"},Ns.SNOWDEPTHSENSOR={type:3,value:"SNOWDEPTHSENSOR"},Ns.SOUNDSENSOR={type:3,value:"SOUNDSENSOR"},Ns.TEMPERATURESENSOR={type:3,value:"TEMPERATURESENSOR"},Ns.TRAINSENSOR={type:3,value:"TRAINSENSOR"},Ns.TURNOUTCLOSURESENSOR={type:3,value:"TURNOUTCLOSURESENSOR"},Ns.WHEELSENSOR={type:3,value:"WHEELSENSOR"},Ns.WINDSENSOR={type:3,value:"WINDSENSOR"},Ns.USERDEFINED={type:3,value:"USERDEFINED"},Ns.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSensorTypeEnum=Ns;class Os{}Os.FINISH_FINISH={type:3,value:"FINISH_FINISH"},Os.FINISH_START={type:3,value:"FINISH_START"},Os.START_FINISH={type:3,value:"START_FINISH"},Os.START_START={type:3,value:"START_START"},Os.USERDEFINED={type:3,value:"USERDEFINED"},Os.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSequenceEnum=Os;class Ss{}Ss.AWNING={type:3,value:"AWNING"},Ss.JALOUSIE={type:3,value:"JALOUSIE"},Ss.SHUTTER={type:3,value:"SHUTTER"},Ss.USERDEFINED={type:3,value:"USERDEFINED"},Ss.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcShadingDeviceTypeEnum=Ss;class ws{}ws.MARKER={type:3,value:"MARKER"},ws.MIRROR={type:3,value:"MIRROR"},ws.PICTORAL={type:3,value:"PICTORAL"},ws.USERDEFINED={type:3,value:"USERDEFINED"},ws.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSignTypeEnum=ws;class Ms{}Ms.AUDIO={type:3,value:"AUDIO"},Ms.MIXED={type:3,value:"MIXED"},Ms.VISUAL={type:3,value:"VISUAL"},Ms.USERDEFINED={type:3,value:"USERDEFINED"},Ms.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSignalTypeEnum=Ms;class Bs{}Bs.P_BOUNDEDVALUE={type:3,value:"P_BOUNDEDVALUE"},Bs.P_ENUMERATEDVALUE={type:3,value:"P_ENUMERATEDVALUE"},Bs.P_LISTVALUE={type:3,value:"P_LISTVALUE"},Bs.P_REFERENCEVALUE={type:3,value:"P_REFERENCEVALUE"},Bs.P_SINGLEVALUE={type:3,value:"P_SINGLEVALUE"},Bs.P_TABLEVALUE={type:3,value:"P_TABLEVALUE"},Bs.Q_AREA={type:3,value:"Q_AREA"},Bs.Q_COUNT={type:3,value:"Q_COUNT"},Bs.Q_LENGTH={type:3,value:"Q_LENGTH"},Bs.Q_NUMBER={type:3,value:"Q_NUMBER"},Bs.Q_TIME={type:3,value:"Q_TIME"},Bs.Q_VOLUME={type:3,value:"Q_VOLUME"},Bs.Q_WEIGHT={type:3,value:"Q_WEIGHT"},e.IfcSimplePropertyTemplateTypeEnum=Bs;class Fs{}Fs.APPROACH_SLAB={type:3,value:"APPROACH_SLAB"},Fs.BASESLAB={type:3,value:"BASESLAB"},Fs.FLOOR={type:3,value:"FLOOR"},Fs.LANDING={type:3,value:"LANDING"},Fs.PAVING={type:3,value:"PAVING"},Fs.ROOF={type:3,value:"ROOF"},Fs.SIDEWALK={type:3,value:"SIDEWALK"},Fs.TRACKSLAB={type:3,value:"TRACKSLAB"},Fs.WEARING={type:3,value:"WEARING"},Fs.USERDEFINED={type:3,value:"USERDEFINED"},Fs.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSlabTypeEnum=Fs;class Ls{}Ls.SOLARCOLLECTOR={type:3,value:"SOLARCOLLECTOR"},Ls.SOLARPANEL={type:3,value:"SOLARPANEL"},Ls.USERDEFINED={type:3,value:"USERDEFINED"},Ls.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSolarDeviceTypeEnum=Ls;class Us{}Us.CONVECTOR={type:3,value:"CONVECTOR"},Us.RADIATOR={type:3,value:"RADIATOR"},Us.USERDEFINED={type:3,value:"USERDEFINED"},Us.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSpaceHeaterTypeEnum=Us;class Hs{}Hs.BERTH={type:3,value:"BERTH"},Hs.EXTERNAL={type:3,value:"EXTERNAL"},Hs.GFA={type:3,value:"GFA"},Hs.INTERNAL={type:3,value:"INTERNAL"},Hs.PARKING={type:3,value:"PARKING"},Hs.SPACE={type:3,value:"SPACE"},Hs.USERDEFINED={type:3,value:"USERDEFINED"},Hs.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSpaceTypeEnum=Hs;class Gs{}Gs.CONSTRUCTION={type:3,value:"CONSTRUCTION"},Gs.FIRESAFETY={type:3,value:"FIRESAFETY"},Gs.INTERFERENCE={type:3,value:"INTERFERENCE"},Gs.LIGHTING={type:3,value:"LIGHTING"},Gs.OCCUPANCY={type:3,value:"OCCUPANCY"},Gs.RESERVATION={type:3,value:"RESERVATION"},Gs.SECURITY={type:3,value:"SECURITY"},Gs.THERMAL={type:3,value:"THERMAL"},Gs.TRANSPORT={type:3,value:"TRANSPORT"},Gs.VENTILATION={type:3,value:"VENTILATION"},Gs.USERDEFINED={type:3,value:"USERDEFINED"},Gs.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSpatialZoneTypeEnum=Gs;class Vs{}Vs.BIRDCAGE={type:3,value:"BIRDCAGE"},Vs.COWL={type:3,value:"COWL"},Vs.RAINWATERHOPPER={type:3,value:"RAINWATERHOPPER"},Vs.USERDEFINED={type:3,value:"USERDEFINED"},Vs.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcStackTerminalTypeEnum=Vs;class ks{}ks.CURVED={type:3,value:"CURVED"},ks.FREEFORM={type:3,value:"FREEFORM"},ks.SPIRAL={type:3,value:"SPIRAL"},ks.STRAIGHT={type:3,value:"STRAIGHT"},ks.WINDER={type:3,value:"WINDER"},ks.USERDEFINED={type:3,value:"USERDEFINED"},ks.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcStairFlightTypeEnum=ks;class js{}js.CURVED_RUN_STAIR={type:3,value:"CURVED_RUN_STAIR"},js.DOUBLE_RETURN_STAIR={type:3,value:"DOUBLE_RETURN_STAIR"},js.HALF_TURN_STAIR={type:3,value:"HALF_TURN_STAIR"},js.HALF_WINDING_STAIR={type:3,value:"HALF_WINDING_STAIR"},js.LADDER={type:3,value:"LADDER"},js.QUARTER_TURN_STAIR={type:3,value:"QUARTER_TURN_STAIR"},js.QUARTER_WINDING_STAIR={type:3,value:"QUARTER_WINDING_STAIR"},js.SPIRAL_STAIR={type:3,value:"SPIRAL_STAIR"},js.STRAIGHT_RUN_STAIR={type:3,value:"STRAIGHT_RUN_STAIR"},js.THREE_QUARTER_TURN_STAIR={type:3,value:"THREE_QUARTER_TURN_STAIR"},js.THREE_QUARTER_WINDING_STAIR={type:3,value:"THREE_QUARTER_WINDING_STAIR"},js.TWO_CURVED_RUN_STAIR={type:3,value:"TWO_CURVED_RUN_STAIR"},js.TWO_QUARTER_TURN_STAIR={type:3,value:"TWO_QUARTER_TURN_STAIR"},js.TWO_QUARTER_WINDING_STAIR={type:3,value:"TWO_QUARTER_WINDING_STAIR"},js.TWO_STRAIGHT_RUN_STAIR={type:3,value:"TWO_STRAIGHT_RUN_STAIR"},js.USERDEFINED={type:3,value:"USERDEFINED"},js.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcStairTypeEnum=js;class Qs{}Qs.LOCKED={type:3,value:"LOCKED"},Qs.READONLY={type:3,value:"READONLY"},Qs.READONLYLOCKED={type:3,value:"READONLYLOCKED"},Qs.READWRITE={type:3,value:"READWRITE"},Qs.READWRITELOCKED={type:3,value:"READWRITELOCKED"},e.IfcStateEnum=Qs;class Ws{}Ws.CONST={type:3,value:"CONST"},Ws.DISCRETE={type:3,value:"DISCRETE"},Ws.EQUIDISTANT={type:3,value:"EQUIDISTANT"},Ws.LINEAR={type:3,value:"LINEAR"},Ws.PARABOLA={type:3,value:"PARABOLA"},Ws.POLYGONAL={type:3,value:"POLYGONAL"},Ws.SINUS={type:3,value:"SINUS"},Ws.USERDEFINED={type:3,value:"USERDEFINED"},Ws.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcStructuralCurveActivityTypeEnum=Ws;class zs{}zs.CABLE={type:3,value:"CABLE"},zs.COMPRESSION_MEMBER={type:3,value:"COMPRESSION_MEMBER"},zs.PIN_JOINED_MEMBER={type:3,value:"PIN_JOINED_MEMBER"},zs.RIGID_JOINED_MEMBER={type:3,value:"RIGID_JOINED_MEMBER"},zs.TENSION_MEMBER={type:3,value:"TENSION_MEMBER"},zs.USERDEFINED={type:3,value:"USERDEFINED"},zs.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcStructuralCurveMemberTypeEnum=zs;class Ks{}Ks.BILINEAR={type:3,value:"BILINEAR"},Ks.CONST={type:3,value:"CONST"},Ks.DISCRETE={type:3,value:"DISCRETE"},Ks.ISOCONTOUR={type:3,value:"ISOCONTOUR"},Ks.USERDEFINED={type:3,value:"USERDEFINED"},Ks.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcStructuralSurfaceActivityTypeEnum=Ks;class Ys{}Ys.BENDING_ELEMENT={type:3,value:"BENDING_ELEMENT"},Ys.MEMBRANE_ELEMENT={type:3,value:"MEMBRANE_ELEMENT"},Ys.SHELL={type:3,value:"SHELL"},Ys.USERDEFINED={type:3,value:"USERDEFINED"},Ys.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcStructuralSurfaceMemberTypeEnum=Ys;class Xs{}Xs.PURCHASE={type:3,value:"PURCHASE"},Xs.WORK={type:3,value:"WORK"},Xs.USERDEFINED={type:3,value:"USERDEFINED"},Xs.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSubContractResourceTypeEnum=Xs;class Zs{}Zs.DEFECT={type:3,value:"DEFECT"},Zs.HATCHMARKING={type:3,value:"HATCHMARKING"},Zs.LINEMARKING={type:3,value:"LINEMARKING"},Zs.MARK={type:3,value:"MARK"},Zs.NONSKIDSURFACING={type:3,value:"NONSKIDSURFACING"},Zs.PAVEMENTSURFACEMARKING={type:3,value:"PAVEMENTSURFACEMARKING"},Zs.RUMBLESTRIP={type:3,value:"RUMBLESTRIP"},Zs.SYMBOLMARKING={type:3,value:"SYMBOLMARKING"},Zs.TAG={type:3,value:"TAG"},Zs.TRANSVERSERUMBLESTRIP={type:3,value:"TRANSVERSERUMBLESTRIP"},Zs.TREATMENT={type:3,value:"TREATMENT"},Zs.USERDEFINED={type:3,value:"USERDEFINED"},Zs.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSurfaceFeatureTypeEnum=Zs;class qs{}qs.BOTH={type:3,value:"BOTH"},qs.NEGATIVE={type:3,value:"NEGATIVE"},qs.POSITIVE={type:3,value:"POSITIVE"},e.IfcSurfaceSide=qs;class Js{}Js.CONTACTOR={type:3,value:"CONTACTOR"},Js.DIMMERSWITCH={type:3,value:"DIMMERSWITCH"},Js.EMERGENCYSTOP={type:3,value:"EMERGENCYSTOP"},Js.KEYPAD={type:3,value:"KEYPAD"},Js.MOMENTARYSWITCH={type:3,value:"MOMENTARYSWITCH"},Js.RELAY={type:3,value:"RELAY"},Js.SELECTORSWITCH={type:3,value:"SELECTORSWITCH"},Js.STARTER={type:3,value:"STARTER"},Js.START_AND_STOP_EQUIPMENT={type:3,value:"START_AND_STOP_EQUIPMENT"},Js.SWITCHDISCONNECTOR={type:3,value:"SWITCHDISCONNECTOR"},Js.TOGGLESWITCH={type:3,value:"TOGGLESWITCH"},Js.USERDEFINED={type:3,value:"USERDEFINED"},Js.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSwitchingDeviceTypeEnum=Js;class $s{}$s.PANEL={type:3,value:"PANEL"},$s.SUBRACK={type:3,value:"SUBRACK"},$s.WORKSURFACE={type:3,value:"WORKSURFACE"},$s.USERDEFINED={type:3,value:"USERDEFINED"},$s.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcSystemFurnitureElementTypeEnum=$s;class ei{}ei.BASIN={type:3,value:"BASIN"},ei.BREAKPRESSURE={type:3,value:"BREAKPRESSURE"},ei.EXPANSION={type:3,value:"EXPANSION"},ei.FEEDANDEXPANSION={type:3,value:"FEEDANDEXPANSION"},ei.OILRETENTIONTRAY={type:3,value:"OILRETENTIONTRAY"},ei.PRESSUREVESSEL={type:3,value:"PRESSUREVESSEL"},ei.STORAGE={type:3,value:"STORAGE"},ei.VESSEL={type:3,value:"VESSEL"},ei.USERDEFINED={type:3,value:"USERDEFINED"},ei.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcTankTypeEnum=ei;class ti{}ti.ELAPSEDTIME={type:3,value:"ELAPSEDTIME"},ti.WORKTIME={type:3,value:"WORKTIME"},ti.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcTaskDurationEnum=ti;class si{}si.ADJUSTMENT={type:3,value:"ADJUSTMENT"},si.ATTENDANCE={type:3,value:"ATTENDANCE"},si.CALIBRATION={type:3,value:"CALIBRATION"},si.CONSTRUCTION={type:3,value:"CONSTRUCTION"},si.DEMOLITION={type:3,value:"DEMOLITION"},si.DISMANTLE={type:3,value:"DISMANTLE"},si.DISPOSAL={type:3,value:"DISPOSAL"},si.EMERGENCY={type:3,value:"EMERGENCY"},si.INSPECTION={type:3,value:"INSPECTION"},si.INSTALLATION={type:3,value:"INSTALLATION"},si.LOGISTIC={type:3,value:"LOGISTIC"},si.MAINTENANCE={type:3,value:"MAINTENANCE"},si.MOVE={type:3,value:"MOVE"},si.OPERATION={type:3,value:"OPERATION"},si.REMOVAL={type:3,value:"REMOVAL"},si.RENOVATION={type:3,value:"RENOVATION"},si.SAFETY={type:3,value:"SAFETY"},si.SHUTDOWN={type:3,value:"SHUTDOWN"},si.STARTUP={type:3,value:"STARTUP"},si.TESTING={type:3,value:"TESTING"},si.TROUBLESHOOTING={type:3,value:"TROUBLESHOOTING"},si.USERDEFINED={type:3,value:"USERDEFINED"},si.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcTaskTypeEnum=si;class ii{}ii.COUPLER={type:3,value:"COUPLER"},ii.FIXED_END={type:3,value:"FIXED_END"},ii.TENSIONING_END={type:3,value:"TENSIONING_END"},ii.USERDEFINED={type:3,value:"USERDEFINED"},ii.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcTendonAnchorTypeEnum=ii;class ri{}ri.COUPLER={type:3,value:"COUPLER"},ri.DIABOLO={type:3,value:"DIABOLO"},ri.DUCT={type:3,value:"DUCT"},ri.GROUTING_DUCT={type:3,value:"GROUTING_DUCT"},ri.TRUMPET={type:3,value:"TRUMPET"},ri.USERDEFINED={type:3,value:"USERDEFINED"},ri.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcTendonConduitTypeEnum=ri;class oi{}oi.BAR={type:3,value:"BAR"},oi.COATED={type:3,value:"COATED"},oi.STRAND={type:3,value:"STRAND"},oi.WIRE={type:3,value:"WIRE"},oi.USERDEFINED={type:3,value:"USERDEFINED"},oi.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcTendonTypeEnum=oi;class ni{}ni.DOWN={type:3,value:"DOWN"},ni.LEFT={type:3,value:"LEFT"},ni.RIGHT={type:3,value:"RIGHT"},ni.UP={type:3,value:"UP"},e.IfcTextPath=ni;class ai{}ai.CONTINUOUS={type:3,value:"CONTINUOUS"},ai.DISCRETE={type:3,value:"DISCRETE"},ai.DISCRETEBINARY={type:3,value:"DISCRETEBINARY"},ai.PIECEWISEBINARY={type:3,value:"PIECEWISEBINARY"},ai.PIECEWISECONSTANT={type:3,value:"PIECEWISECONSTANT"},ai.PIECEWISECONTINUOUS={type:3,value:"PIECEWISECONTINUOUS"},ai.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcTimeSeriesDataTypeEnum=ai;class li{}li.BLOCKINGDEVICE={type:3,value:"BLOCKINGDEVICE"},li.DERAILER={type:3,value:"DERAILER"},li.FROG={type:3,value:"FROG"},li.HALF_SET_OF_BLADES={type:3,value:"HALF_SET_OF_BLADES"},li.SLEEPER={type:3,value:"SLEEPER"},li.SPEEDREGULATOR={type:3,value:"SPEEDREGULATOR"},li.TRACKENDOFALIGNMENT={type:3,value:"TRACKENDOFALIGNMENT"},li.VEHICLESTOP={type:3,value:"VEHICLESTOP"},li.USERDEFINED={type:3,value:"USERDEFINED"},li.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcTrackElementTypeEnum=li;class hi{}hi.CHOPPER={type:3,value:"CHOPPER"},hi.COMBINED={type:3,value:"COMBINED"},hi.CURRENT={type:3,value:"CURRENT"},hi.FREQUENCY={type:3,value:"FREQUENCY"},hi.INVERTER={type:3,value:"INVERTER"},hi.RECTIFIER={type:3,value:"RECTIFIER"},hi.VOLTAGE={type:3,value:"VOLTAGE"},hi.USERDEFINED={type:3,value:"USERDEFINED"},hi.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcTransformerTypeEnum=hi;class ci{}ci.CONTINUOUS={type:3,value:"CONTINUOUS"},ci.CONTSAMEGRADIENT={type:3,value:"CONTSAMEGRADIENT"},ci.CONTSAMEGRADIENTSAMECURVATURE={type:3,value:"CONTSAMEGRADIENTSAMECURVATURE"},ci.DISCONTINUOUS={type:3,value:"DISCONTINUOUS"},e.IfcTransitionCode=ci;class ui{}ui.CRANEWAY={type:3,value:"CRANEWAY"},ui.ELEVATOR={type:3,value:"ELEVATOR"},ui.ESCALATOR={type:3,value:"ESCALATOR"},ui.HAULINGGEAR={type:3,value:"HAULINGGEAR"},ui.LIFTINGGEAR={type:3,value:"LIFTINGGEAR"},ui.MOVINGWALKWAY={type:3,value:"MOVINGWALKWAY"},ui.USERDEFINED={type:3,value:"USERDEFINED"},ui.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcTransportElementTypeEnum=ui;class Ai{}Ai.CARTESIAN={type:3,value:"CARTESIAN"},Ai.PARAMETER={type:3,value:"PARAMETER"},Ai.UNSPECIFIED={type:3,value:"UNSPECIFIED"},e.IfcTrimmingPreference=Ai;class pi{}pi.FINNED={type:3,value:"FINNED"},pi.USERDEFINED={type:3,value:"USERDEFINED"},pi.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcTubeBundleTypeEnum=pi;class di{}di.ABSORBEDDOSEUNIT={type:3,value:"ABSORBEDDOSEUNIT"},di.AMOUNTOFSUBSTANCEUNIT={type:3,value:"AMOUNTOFSUBSTANCEUNIT"},di.AREAUNIT={type:3,value:"AREAUNIT"},di.DOSEEQUIVALENTUNIT={type:3,value:"DOSEEQUIVALENTUNIT"},di.ELECTRICCAPACITANCEUNIT={type:3,value:"ELECTRICCAPACITANCEUNIT"},di.ELECTRICCHARGEUNIT={type:3,value:"ELECTRICCHARGEUNIT"},di.ELECTRICCONDUCTANCEUNIT={type:3,value:"ELECTRICCONDUCTANCEUNIT"},di.ELECTRICCURRENTUNIT={type:3,value:"ELECTRICCURRENTUNIT"},di.ELECTRICRESISTANCEUNIT={type:3,value:"ELECTRICRESISTANCEUNIT"},di.ELECTRICVOLTAGEUNIT={type:3,value:"ELECTRICVOLTAGEUNIT"},di.ENERGYUNIT={type:3,value:"ENERGYUNIT"},di.FORCEUNIT={type:3,value:"FORCEUNIT"},di.FREQUENCYUNIT={type:3,value:"FREQUENCYUNIT"},di.ILLUMINANCEUNIT={type:3,value:"ILLUMINANCEUNIT"},di.INDUCTANCEUNIT={type:3,value:"INDUCTANCEUNIT"},di.LENGTHUNIT={type:3,value:"LENGTHUNIT"},di.LUMINOUSFLUXUNIT={type:3,value:"LUMINOUSFLUXUNIT"},di.LUMINOUSINTENSITYUNIT={type:3,value:"LUMINOUSINTENSITYUNIT"},di.MAGNETICFLUXDENSITYUNIT={type:3,value:"MAGNETICFLUXDENSITYUNIT"},di.MAGNETICFLUXUNIT={type:3,value:"MAGNETICFLUXUNIT"},di.MASSUNIT={type:3,value:"MASSUNIT"},di.PLANEANGLEUNIT={type:3,value:"PLANEANGLEUNIT"},di.POWERUNIT={type:3,value:"POWERUNIT"},di.PRESSUREUNIT={type:3,value:"PRESSUREUNIT"},di.RADIOACTIVITYUNIT={type:3,value:"RADIOACTIVITYUNIT"},di.SOLIDANGLEUNIT={type:3,value:"SOLIDANGLEUNIT"},di.THERMODYNAMICTEMPERATUREUNIT={type:3,value:"THERMODYNAMICTEMPERATUREUNIT"},di.TIMEUNIT={type:3,value:"TIMEUNIT"},di.VOLUMEUNIT={type:3,value:"VOLUMEUNIT"},di.USERDEFINED={type:3,value:"USERDEFINED"},e.IfcUnitEnum=di;class fi{}fi.ALARMPANEL={type:3,value:"ALARMPANEL"},fi.BASESTATIONCONTROLLER={type:3,value:"BASESTATIONCONTROLLER"},fi.COMBINED={type:3,value:"COMBINED"},fi.CONTROLPANEL={type:3,value:"CONTROLPANEL"},fi.GASDETECTIONPANEL={type:3,value:"GASDETECTIONPANEL"},fi.HUMIDISTAT={type:3,value:"HUMIDISTAT"},fi.INDICATORPANEL={type:3,value:"INDICATORPANEL"},fi.MIMICPANEL={type:3,value:"MIMICPANEL"},fi.THERMOSTAT={type:3,value:"THERMOSTAT"},fi.WEATHERSTATION={type:3,value:"WEATHERSTATION"},fi.USERDEFINED={type:3,value:"USERDEFINED"},fi.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcUnitaryControlElementTypeEnum=fi;class mi{}mi.AIRCONDITIONINGUNIT={type:3,value:"AIRCONDITIONINGUNIT"},mi.AIRHANDLER={type:3,value:"AIRHANDLER"},mi.DEHUMIDIFIER={type:3,value:"DEHUMIDIFIER"},mi.ROOFTOPUNIT={type:3,value:"ROOFTOPUNIT"},mi.SPLITSYSTEM={type:3,value:"SPLITSYSTEM"},mi.USERDEFINED={type:3,value:"USERDEFINED"},mi.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcUnitaryEquipmentTypeEnum=mi;class gi{}gi.AIRRELEASE={type:3,value:"AIRRELEASE"},gi.ANTIVACUUM={type:3,value:"ANTIVACUUM"},gi.CHANGEOVER={type:3,value:"CHANGEOVER"},gi.CHECK={type:3,value:"CHECK"},gi.COMMISSIONING={type:3,value:"COMMISSIONING"},gi.DIVERTING={type:3,value:"DIVERTING"},gi.DOUBLECHECK={type:3,value:"DOUBLECHECK"},gi.DOUBLEREGULATING={type:3,value:"DOUBLEREGULATING"},gi.DRAWOFFCOCK={type:3,value:"DRAWOFFCOCK"},gi.FAUCET={type:3,value:"FAUCET"},gi.FLUSHING={type:3,value:"FLUSHING"},gi.GASCOCK={type:3,value:"GASCOCK"},gi.GASTAP={type:3,value:"GASTAP"},gi.ISOLATING={type:3,value:"ISOLATING"},gi.MIXING={type:3,value:"MIXING"},gi.PRESSUREREDUCING={type:3,value:"PRESSUREREDUCING"},gi.PRESSURERELIEF={type:3,value:"PRESSURERELIEF"},gi.REGULATING={type:3,value:"REGULATING"},gi.SAFETYCUTOFF={type:3,value:"SAFETYCUTOFF"},gi.STEAMTRAP={type:3,value:"STEAMTRAP"},gi.STOPCOCK={type:3,value:"STOPCOCK"},gi.USERDEFINED={type:3,value:"USERDEFINED"},gi.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcValveTypeEnum=gi;class yi{}yi.CARGO={type:3,value:"CARGO"},yi.ROLLINGSTOCK={type:3,value:"ROLLINGSTOCK"},yi.VEHICLE={type:3,value:"VEHICLE"},yi.VEHICLEAIR={type:3,value:"VEHICLEAIR"},yi.VEHICLEMARINE={type:3,value:"VEHICLEMARINE"},yi.VEHICLETRACKED={type:3,value:"VEHICLETRACKED"},yi.VEHICLEWHEELED={type:3,value:"VEHICLEWHEELED"},yi.USERDEFINED={type:3,value:"USERDEFINED"},yi.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcVehicleTypeEnum=yi;class Ei{}Ei.AXIAL_YIELD={type:3,value:"AXIAL_YIELD"},Ei.BENDING_YIELD={type:3,value:"BENDING_YIELD"},Ei.FRICTION={type:3,value:"FRICTION"},Ei.RUBBER={type:3,value:"RUBBER"},Ei.SHEAR_YIELD={type:3,value:"SHEAR_YIELD"},Ei.VISCOUS={type:3,value:"VISCOUS"},Ei.USERDEFINED={type:3,value:"USERDEFINED"},Ei.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcVibrationDamperTypeEnum=Ei;class vi{}vi.BASE={type:3,value:"BASE"},vi.COMPRESSION={type:3,value:"COMPRESSION"},vi.SPRING={type:3,value:"SPRING"},vi.USERDEFINED={type:3,value:"USERDEFINED"},vi.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcVibrationIsolatorTypeEnum=vi;class _i{}_i.BOUNDARY={type:3,value:"BOUNDARY"},_i.CLEARANCE={type:3,value:"CLEARANCE"},_i.PROVISIONFORVOID={type:3,value:"PROVISIONFORVOID"},_i.USERDEFINED={type:3,value:"USERDEFINED"},_i.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcVirtualElementTypeEnum=_i;class Ii{}Ii.CHAMFER={type:3,value:"CHAMFER"},Ii.CUTOUT={type:3,value:"CUTOUT"},Ii.EDGE={type:3,value:"EDGE"},Ii.HOLE={type:3,value:"HOLE"},Ii.MITER={type:3,value:"MITER"},Ii.NOTCH={type:3,value:"NOTCH"},Ii.USERDEFINED={type:3,value:"USERDEFINED"},Ii.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcVoidingFeatureTypeEnum=Ii;class Ti{}Ti.ELEMENTEDWALL={type:3,value:"ELEMENTEDWALL"},Ti.MOVABLE={type:3,value:"MOVABLE"},Ti.PARAPET={type:3,value:"PARAPET"},Ti.PARTITIONING={type:3,value:"PARTITIONING"},Ti.PLUMBINGWALL={type:3,value:"PLUMBINGWALL"},Ti.POLYGONAL={type:3,value:"POLYGONAL"},Ti.RETAININGWALL={type:3,value:"RETAININGWALL"},Ti.SHEAR={type:3,value:"SHEAR"},Ti.SOLIDWALL={type:3,value:"SOLIDWALL"},Ti.STANDARD={type:3,value:"STANDARD"},Ti.WAVEWALL={type:3,value:"WAVEWALL"},Ti.USERDEFINED={type:3,value:"USERDEFINED"},Ti.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcWallTypeEnum=Ti;class Pi{}Pi.FLOORTRAP={type:3,value:"FLOORTRAP"},Pi.FLOORWASTE={type:3,value:"FLOORWASTE"},Pi.GULLYSUMP={type:3,value:"GULLYSUMP"},Pi.GULLYTRAP={type:3,value:"GULLYTRAP"},Pi.ROOFDRAIN={type:3,value:"ROOFDRAIN"},Pi.WASTEDISPOSALUNIT={type:3,value:"WASTEDISPOSALUNIT"},Pi.WASTETRAP={type:3,value:"WASTETRAP"},Pi.USERDEFINED={type:3,value:"USERDEFINED"},Pi.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcWasteTerminalTypeEnum=Pi;class Di{}Di.BOTTOMHUNG={type:3,value:"BOTTOMHUNG"},Di.FIXEDCASEMENT={type:3,value:"FIXEDCASEMENT"},Di.OTHEROPERATION={type:3,value:"OTHEROPERATION"},Di.PIVOTHORIZONTAL={type:3,value:"PIVOTHORIZONTAL"},Di.PIVOTVERTICAL={type:3,value:"PIVOTVERTICAL"},Di.REMOVABLECASEMENT={type:3,value:"REMOVABLECASEMENT"},Di.SIDEHUNGLEFTHAND={type:3,value:"SIDEHUNGLEFTHAND"},Di.SIDEHUNGRIGHTHAND={type:3,value:"SIDEHUNGRIGHTHAND"},Di.SLIDINGHORIZONTAL={type:3,value:"SLIDINGHORIZONTAL"},Di.SLIDINGVERTICAL={type:3,value:"SLIDINGVERTICAL"},Di.TILTANDTURNLEFTHAND={type:3,value:"TILTANDTURNLEFTHAND"},Di.TILTANDTURNRIGHTHAND={type:3,value:"TILTANDTURNRIGHTHAND"},Di.TOPHUNG={type:3,value:"TOPHUNG"},Di.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcWindowPanelOperationEnum=Di;class bi{}bi.BOTTOM={type:3,value:"BOTTOM"},bi.LEFT={type:3,value:"LEFT"},bi.MIDDLE={type:3,value:"MIDDLE"},bi.RIGHT={type:3,value:"RIGHT"},bi.TOP={type:3,value:"TOP"},bi.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcWindowPanelPositionEnum=bi;class Ri{}Ri.ALUMINIUM={type:3,value:"ALUMINIUM"},Ri.ALUMINIUM_WOOD={type:3,value:"ALUMINIUM_WOOD"},Ri.HIGH_GRADE_STEEL={type:3,value:"HIGH_GRADE_STEEL"},Ri.OTHER_CONSTRUCTION={type:3,value:"OTHER_CONSTRUCTION"},Ri.PLASTIC={type:3,value:"PLASTIC"},Ri.STEEL={type:3,value:"STEEL"},Ri.WOOD={type:3,value:"WOOD"},Ri.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcWindowStyleConstructionEnum=Ri;class Ci{}Ci.DOUBLE_PANEL_HORIZONTAL={type:3,value:"DOUBLE_PANEL_HORIZONTAL"},Ci.DOUBLE_PANEL_VERTICAL={type:3,value:"DOUBLE_PANEL_VERTICAL"},Ci.SINGLE_PANEL={type:3,value:"SINGLE_PANEL"},Ci.TRIPLE_PANEL_BOTTOM={type:3,value:"TRIPLE_PANEL_BOTTOM"},Ci.TRIPLE_PANEL_HORIZONTAL={type:3,value:"TRIPLE_PANEL_HORIZONTAL"},Ci.TRIPLE_PANEL_LEFT={type:3,value:"TRIPLE_PANEL_LEFT"},Ci.TRIPLE_PANEL_RIGHT={type:3,value:"TRIPLE_PANEL_RIGHT"},Ci.TRIPLE_PANEL_TOP={type:3,value:"TRIPLE_PANEL_TOP"},Ci.TRIPLE_PANEL_VERTICAL={type:3,value:"TRIPLE_PANEL_VERTICAL"},Ci.USERDEFINED={type:3,value:"USERDEFINED"},Ci.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcWindowStyleOperationEnum=Ci;class xi{}xi.LIGHTDOME={type:3,value:"LIGHTDOME"},xi.SKYLIGHT={type:3,value:"SKYLIGHT"},xi.WINDOW={type:3,value:"WINDOW"},xi.USERDEFINED={type:3,value:"USERDEFINED"},xi.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcWindowTypeEnum=xi;class Ni{}Ni.DOUBLE_PANEL_HORIZONTAL={type:3,value:"DOUBLE_PANEL_HORIZONTAL"},Ni.DOUBLE_PANEL_VERTICAL={type:3,value:"DOUBLE_PANEL_VERTICAL"},Ni.SINGLE_PANEL={type:3,value:"SINGLE_PANEL"},Ni.TRIPLE_PANEL_BOTTOM={type:3,value:"TRIPLE_PANEL_BOTTOM"},Ni.TRIPLE_PANEL_HORIZONTAL={type:3,value:"TRIPLE_PANEL_HORIZONTAL"},Ni.TRIPLE_PANEL_LEFT={type:3,value:"TRIPLE_PANEL_LEFT"},Ni.TRIPLE_PANEL_RIGHT={type:3,value:"TRIPLE_PANEL_RIGHT"},Ni.TRIPLE_PANEL_TOP={type:3,value:"TRIPLE_PANEL_TOP"},Ni.TRIPLE_PANEL_VERTICAL={type:3,value:"TRIPLE_PANEL_VERTICAL"},Ni.USERDEFINED={type:3,value:"USERDEFINED"},Ni.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcWindowTypePartitioningEnum=Ni;class Oi{}Oi.FIRSTSHIFT={type:3,value:"FIRSTSHIFT"},Oi.SECONDSHIFT={type:3,value:"SECONDSHIFT"},Oi.THIRDSHIFT={type:3,value:"THIRDSHIFT"},Oi.USERDEFINED={type:3,value:"USERDEFINED"},Oi.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcWorkCalendarTypeEnum=Oi;class Si{}Si.ACTUAL={type:3,value:"ACTUAL"},Si.BASELINE={type:3,value:"BASELINE"},Si.PLANNED={type:3,value:"PLANNED"},Si.USERDEFINED={type:3,value:"USERDEFINED"},Si.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcWorkPlanTypeEnum=Si;class wi{}wi.ACTUAL={type:3,value:"ACTUAL"},wi.BASELINE={type:3,value:"BASELINE"},wi.PLANNED={type:3,value:"PLANNED"},wi.USERDEFINED={type:3,value:"USERDEFINED"},wi.NOTDEFINED={type:3,value:"NOTDEFINED"},e.IfcWorkScheduleTypeEnum=wi;e.IfcActorRole=class extends qv{constructor(e,t,s,i){super(e),this.Role=t,this.UserDefinedRole=s,this.Description=i,this.type=3630933823}};class Mi extends qv{constructor(e,t,s,i){super(e),this.Purpose=t,this.Description=s,this.UserDefinedPurpose=i,this.type=618182010}}e.IfcAddress=Mi;class Bi extends qv{constructor(e,t,s){super(e),this.StartTag=t,this.EndTag=s,this.type=2879124712}}e.IfcAlignmentParameterSegment=Bi;e.IfcAlignmentVerticalSegment=class extends Bi{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s),this.StartTag=t,this.EndTag=s,this.StartDistAlong=i,this.HorizontalLength=r,this.StartHeight=o,this.StartGradient=n,this.EndGradient=a,this.RadiusOfCurvature=l,this.PredefinedType=h,this.type=3633395639}};e.IfcApplication=class extends qv{constructor(e,t,s,i,r){super(e),this.ApplicationDeveloper=t,this.Version=s,this.ApplicationFullName=i,this.ApplicationIdentifier=r,this.type=639542469}};class Fi extends qv{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e),this.Name=t,this.Description=s,this.AppliedValue=i,this.UnitBasis=r,this.ApplicableDate=o,this.FixedUntilDate=n,this.Category=a,this.Condition=l,this.ArithmeticOperator=h,this.Components=c,this.type=411424972}}e.IfcAppliedValue=Fi;e.IfcApproval=class extends qv{constructor(e,t,s,i,r,o,n,a,l,h){super(e),this.Identifier=t,this.Name=s,this.Description=i,this.TimeOfApproval=r,this.Status=o,this.Level=n,this.Qualifier=a,this.RequestingApproval=l,this.GivingApproval=h,this.type=130549933}};class Li extends qv{constructor(e,t){super(e),this.Name=t,this.type=4037036970}}e.IfcBoundaryCondition=Li;e.IfcBoundaryEdgeCondition=class extends Li{constructor(e,t,s,i,r,o,n,a){super(e,t),this.Name=t,this.TranslationalStiffnessByLengthX=s,this.TranslationalStiffnessByLengthY=i,this.TranslationalStiffnessByLengthZ=r,this.RotationalStiffnessByLengthX=o,this.RotationalStiffnessByLengthY=n,this.RotationalStiffnessByLengthZ=a,this.type=1560379544}};e.IfcBoundaryFaceCondition=class extends Li{constructor(e,t,s,i,r){super(e,t),this.Name=t,this.TranslationalStiffnessByAreaX=s,this.TranslationalStiffnessByAreaY=i,this.TranslationalStiffnessByAreaZ=r,this.type=3367102660}};class Ui extends Li{constructor(e,t,s,i,r,o,n,a){super(e,t),this.Name=t,this.TranslationalStiffnessX=s,this.TranslationalStiffnessY=i,this.TranslationalStiffnessZ=r,this.RotationalStiffnessX=o,this.RotationalStiffnessY=n,this.RotationalStiffnessZ=a,this.type=1387855156}}e.IfcBoundaryNodeCondition=Ui;e.IfcBoundaryNodeConditionWarping=class extends Ui{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a),this.Name=t,this.TranslationalStiffnessX=s,this.TranslationalStiffnessY=i,this.TranslationalStiffnessZ=r,this.RotationalStiffnessX=o,this.RotationalStiffnessY=n,this.RotationalStiffnessZ=a,this.WarpingStiffness=l,this.type=2069777674}};class Hi extends qv{constructor(e){super(e),this.type=2859738748}}e.IfcConnectionGeometry=Hi;class Gi extends Hi{constructor(e,t,s){super(e),this.PointOnRelatingElement=t,this.PointOnRelatedElement=s,this.type=2614616156}}e.IfcConnectionPointGeometry=Gi;e.IfcConnectionSurfaceGeometry=class extends Hi{constructor(e,t,s){super(e),this.SurfaceOnRelatingElement=t,this.SurfaceOnRelatedElement=s,this.type=2732653382}};e.IfcConnectionVolumeGeometry=class extends Hi{constructor(e,t,s){super(e),this.VolumeOnRelatingElement=t,this.VolumeOnRelatedElement=s,this.type=775493141}};class Vi extends qv{constructor(e,t,s,i,r,o,n,a){super(e),this.Name=t,this.Description=s,this.ConstraintGrade=i,this.ConstraintSource=r,this.CreatingActor=o,this.CreationTime=n,this.UserDefinedGrade=a,this.type=1959218052}}e.IfcConstraint=Vi;class ki extends qv{constructor(e,t,s){super(e),this.SourceCRS=t,this.TargetCRS=s,this.type=1785450214}}e.IfcCoordinateOperation=ki;class ji extends qv{constructor(e,t,s,i,r){super(e),this.Name=t,this.Description=s,this.GeodeticDatum=i,this.VerticalDatum=r,this.type=1466758467}}e.IfcCoordinateReferenceSystem=ji;e.IfcCostValue=class extends Fi{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h,c),this.Name=t,this.Description=s,this.AppliedValue=i,this.UnitBasis=r,this.ApplicableDate=o,this.FixedUntilDate=n,this.Category=a,this.Condition=l,this.ArithmeticOperator=h,this.Components=c,this.type=602808272}};e.IfcDerivedUnit=class extends qv{constructor(e,t,s,i,r){super(e),this.Elements=t,this.UnitType=s,this.UserDefinedType=i,this.Name=r,this.type=1765591967}};e.IfcDerivedUnitElement=class extends qv{constructor(e,t,s){super(e),this.Unit=t,this.Exponent=s,this.type=1045800335}};e.IfcDimensionalExponents=class extends qv{constructor(e,t,s,i,r,o,n,a){super(e),this.LengthExponent=t,this.MassExponent=s,this.TimeExponent=i,this.ElectricCurrentExponent=r,this.ThermodynamicTemperatureExponent=o,this.AmountOfSubstanceExponent=n,this.LuminousIntensityExponent=a,this.type=2949456006}};class Qi extends qv{constructor(e){super(e),this.type=4294318154}}e.IfcExternalInformation=Qi;class Wi extends qv{constructor(e,t,s,i){super(e),this.Location=t,this.Identification=s,this.Name=i,this.type=3200245327}}e.IfcExternalReference=Wi;e.IfcExternallyDefinedHatchStyle=class extends Wi{constructor(e,t,s,i){super(e,t,s,i),this.Location=t,this.Identification=s,this.Name=i,this.type=2242383968}};e.IfcExternallyDefinedSurfaceStyle=class extends Wi{constructor(e,t,s,i){super(e,t,s,i),this.Location=t,this.Identification=s,this.Name=i,this.type=1040185647}};e.IfcExternallyDefinedTextFont=class extends Wi{constructor(e,t,s,i){super(e,t,s,i),this.Location=t,this.Identification=s,this.Name=i,this.type=3548104201}};e.IfcGridAxis=class extends qv{constructor(e,t,s,i){super(e),this.AxisTag=t,this.AxisCurve=s,this.SameSense=i,this.type=852622518}};e.IfcIrregularTimeSeriesValue=class extends qv{constructor(e,t,s){super(e),this.TimeStamp=t,this.ListValues=s,this.type=3020489413}};e.IfcLibraryInformation=class extends Qi{constructor(e,t,s,i,r,o,n){super(e),this.Name=t,this.Version=s,this.Publisher=i,this.VersionDate=r,this.Location=o,this.Description=n,this.type=2655187982}};e.IfcLibraryReference=class extends Wi{constructor(e,t,s,i,r,o,n){super(e,t,s,i),this.Location=t,this.Identification=s,this.Name=i,this.Description=r,this.Language=o,this.ReferencedLibrary=n,this.type=3452421091}};e.IfcLightDistributionData=class extends qv{constructor(e,t,s,i){super(e),this.MainPlaneAngle=t,this.SecondaryPlaneAngle=s,this.LuminousIntensity=i,this.type=4162380809}};e.IfcLightIntensityDistribution=class extends qv{constructor(e,t,s){super(e),this.LightDistributionCurve=t,this.DistributionData=s,this.type=1566485204}};e.IfcMapConversion=class extends ki{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s),this.SourceCRS=t,this.TargetCRS=s,this.Eastings=i,this.Northings=r,this.OrthogonalHeight=o,this.XAxisAbscissa=n,this.XAxisOrdinate=a,this.Scale=l,this.ScaleY=h,this.ScaleZ=c,this.type=3057273783}};e.IfcMaterialClassificationRelationship=class extends qv{constructor(e,t,s){super(e),this.MaterialClassifications=t,this.ClassifiedMaterial=s,this.type=1847130766}};class zi extends qv{constructor(e){super(e),this.type=760658860}}e.IfcMaterialDefinition=zi;class Ki extends zi{constructor(e,t,s,i,r,o,n,a){super(e),this.Material=t,this.LayerThickness=s,this.IsVentilated=i,this.Name=r,this.Description=o,this.Category=n,this.Priority=a,this.type=248100487}}e.IfcMaterialLayer=Ki;e.IfcMaterialLayerSet=class extends zi{constructor(e,t,s,i){super(e),this.MaterialLayers=t,this.LayerSetName=s,this.Description=i,this.type=3303938423}};e.IfcMaterialLayerWithOffsets=class extends Ki{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a),this.Material=t,this.LayerThickness=s,this.IsVentilated=i,this.Name=r,this.Description=o,this.Category=n,this.Priority=a,this.OffsetDirection=l,this.OffsetValues=h,this.type=1847252529}};e.IfcMaterialList=class extends qv{constructor(e,t){super(e),this.Materials=t,this.type=2199411900}};class Yi extends zi{constructor(e,t,s,i,r,o,n){super(e),this.Name=t,this.Description=s,this.Material=i,this.Profile=r,this.Priority=o,this.Category=n,this.type=2235152071}}e.IfcMaterialProfile=Yi;e.IfcMaterialProfileSet=class extends zi{constructor(e,t,s,i,r){super(e),this.Name=t,this.Description=s,this.MaterialProfiles=i,this.CompositeProfile=r,this.type=164193824}};e.IfcMaterialProfileWithOffsets=class extends Yi{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n),this.Name=t,this.Description=s,this.Material=i,this.Profile=r,this.Priority=o,this.Category=n,this.OffsetValues=a,this.type=552965576}};class Xi extends qv{constructor(e){super(e),this.type=1507914824}}e.IfcMaterialUsageDefinition=Xi;e.IfcMeasureWithUnit=class extends qv{constructor(e,t,s){super(e),this.ValueComponent=t,this.UnitComponent=s,this.type=2597039031}};e.IfcMetric=class extends Vi{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a),this.Name=t,this.Description=s,this.ConstraintGrade=i,this.ConstraintSource=r,this.CreatingActor=o,this.CreationTime=n,this.UserDefinedGrade=a,this.Benchmark=l,this.ValueSource=h,this.DataValue=c,this.ReferencePath=u,this.type=3368373690}};e.IfcMonetaryUnit=class extends qv{constructor(e,t){super(e),this.Currency=t,this.type=2706619895}};class Zi extends qv{constructor(e,t,s){super(e),this.Dimensions=t,this.UnitType=s,this.type=1918398963}}e.IfcNamedUnit=Zi;class qi extends qv{constructor(e,t){super(e),this.PlacementRelTo=t,this.type=3701648758}}e.IfcObjectPlacement=qi;e.IfcObjective=class extends Vi{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a),this.Name=t,this.Description=s,this.ConstraintGrade=i,this.ConstraintSource=r,this.CreatingActor=o,this.CreationTime=n,this.UserDefinedGrade=a,this.BenchmarkValues=l,this.LogicalAggregator=h,this.ObjectiveQualifier=c,this.UserDefinedQualifier=u,this.type=2251480897}};e.IfcOrganization=class extends qv{constructor(e,t,s,i,r,o){super(e),this.Identification=t,this.Name=s,this.Description=i,this.Roles=r,this.Addresses=o,this.type=4251960020}};e.IfcOwnerHistory=class extends qv{constructor(e,t,s,i,r,o,n,a,l){super(e),this.OwningUser=t,this.OwningApplication=s,this.State=i,this.ChangeAction=r,this.LastModifiedDate=o,this.LastModifyingUser=n,this.LastModifyingApplication=a,this.CreationDate=l,this.type=1207048766}};e.IfcPerson=class extends qv{constructor(e,t,s,i,r,o,n,a,l){super(e),this.Identification=t,this.FamilyName=s,this.GivenName=i,this.MiddleNames=r,this.PrefixTitles=o,this.SuffixTitles=n,this.Roles=a,this.Addresses=l,this.type=2077209135}};e.IfcPersonAndOrganization=class extends qv{constructor(e,t,s,i){super(e),this.ThePerson=t,this.TheOrganization=s,this.Roles=i,this.type=101040310}};class Ji extends qv{constructor(e,t,s){super(e),this.Name=t,this.Description=s,this.type=2483315170}}e.IfcPhysicalQuantity=Ji;class $i extends Ji{constructor(e,t,s,i){super(e,t,s),this.Name=t,this.Description=s,this.Unit=i,this.type=2226359599}}e.IfcPhysicalSimpleQuantity=$i;e.IfcPostalAddress=class extends Mi{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i),this.Purpose=t,this.Description=s,this.UserDefinedPurpose=i,this.InternalLocation=r,this.AddressLines=o,this.PostalBox=n,this.Town=a,this.Region=l,this.PostalCode=h,this.Country=c,this.type=3355820592}};class er extends qv{constructor(e){super(e),this.type=677532197}}e.IfcPresentationItem=er;class tr extends qv{constructor(e,t,s,i,r){super(e),this.Name=t,this.Description=s,this.AssignedItems=i,this.Identifier=r,this.type=2022622350}}e.IfcPresentationLayerAssignment=tr;e.IfcPresentationLayerWithStyle=class extends tr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r),this.Name=t,this.Description=s,this.AssignedItems=i,this.Identifier=r,this.LayerOn=o,this.LayerFrozen=n,this.LayerBlocked=a,this.LayerStyles=l,this.type=1304840413}};class sr extends qv{constructor(e,t){super(e),this.Name=t,this.type=3119450353}}e.IfcPresentationStyle=sr;class ir extends qv{constructor(e,t,s,i){super(e),this.Name=t,this.Description=s,this.Representations=i,this.type=2095639259}}e.IfcProductRepresentation=ir;class rr extends qv{constructor(e,t,s){super(e),this.ProfileType=t,this.ProfileName=s,this.type=3958567839}}e.IfcProfileDef=rr;e.IfcProjectedCRS=class extends ji{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r),this.Name=t,this.Description=s,this.GeodeticDatum=i,this.VerticalDatum=r,this.MapProjection=o,this.MapZone=n,this.MapUnit=a,this.type=3843373140}};class or extends qv{constructor(e){super(e),this.type=986844984}}e.IfcPropertyAbstraction=or;e.IfcPropertyEnumeration=class extends or{constructor(e,t,s,i){super(e),this.Name=t,this.EnumerationValues=s,this.Unit=i,this.type=3710013099}};e.IfcQuantityArea=class extends $i{constructor(e,t,s,i,r,o){super(e,t,s,i),this.Name=t,this.Description=s,this.Unit=i,this.AreaValue=r,this.Formula=o,this.type=2044713172}};e.IfcQuantityCount=class extends $i{constructor(e,t,s,i,r,o){super(e,t,s,i),this.Name=t,this.Description=s,this.Unit=i,this.CountValue=r,this.Formula=o,this.type=2093928680}};e.IfcQuantityLength=class extends $i{constructor(e,t,s,i,r,o){super(e,t,s,i),this.Name=t,this.Description=s,this.Unit=i,this.LengthValue=r,this.Formula=o,this.type=931644368}};e.IfcQuantityNumber=class extends $i{constructor(e,t,s,i,r,o){super(e,t,s,i),this.Name=t,this.Description=s,this.Unit=i,this.NumberValue=r,this.Formula=o,this.type=2691318326}};e.IfcQuantityTime=class extends $i{constructor(e,t,s,i,r,o){super(e,t,s,i),this.Name=t,this.Description=s,this.Unit=i,this.TimeValue=r,this.Formula=o,this.type=3252649465}};e.IfcQuantityVolume=class extends $i{constructor(e,t,s,i,r,o){super(e,t,s,i),this.Name=t,this.Description=s,this.Unit=i,this.VolumeValue=r,this.Formula=o,this.type=2405470396}};e.IfcQuantityWeight=class extends $i{constructor(e,t,s,i,r,o){super(e,t,s,i),this.Name=t,this.Description=s,this.Unit=i,this.WeightValue=r,this.Formula=o,this.type=825690147}};e.IfcRecurrencePattern=class extends qv{constructor(e,t,s,i,r,o,n,a,l){super(e),this.RecurrenceType=t,this.DayComponent=s,this.WeekdayComponent=i,this.MonthComponent=r,this.Position=o,this.Interval=n,this.Occurrences=a,this.TimePeriods=l,this.type=3915482550}};e.IfcReference=class extends qv{constructor(e,t,s,i,r,o){super(e),this.TypeIdentifier=t,this.AttributeIdentifier=s,this.InstanceName=i,this.ListPositions=r,this.InnerReference=o,this.type=2433181523}};class nr extends qv{constructor(e,t,s,i,r){super(e),this.ContextOfItems=t,this.RepresentationIdentifier=s,this.RepresentationType=i,this.Items=r,this.type=1076942058}}e.IfcRepresentation=nr;class ar extends qv{constructor(e,t,s){super(e),this.ContextIdentifier=t,this.ContextType=s,this.type=3377609919}}e.IfcRepresentationContext=ar;class lr extends qv{constructor(e){super(e),this.type=3008791417}}e.IfcRepresentationItem=lr;e.IfcRepresentationMap=class extends qv{constructor(e,t,s){super(e),this.MappingOrigin=t,this.MappedRepresentation=s,this.type=1660063152}};class hr extends qv{constructor(e,t,s){super(e),this.Name=t,this.Description=s,this.type=2439245199}}e.IfcResourceLevelRelationship=hr;class cr extends qv{constructor(e,t,s,i,r){super(e),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.type=2341007311}}e.IfcRoot=cr;e.IfcSIUnit=class extends Zi{constructor(e,t,s,i,r){super(e,t,s),this.Dimensions=t,this.UnitType=s,this.Prefix=i,this.Name=r,this.type=448429030}};class ur extends qv{constructor(e,t,s,i){super(e),this.Name=t,this.DataOrigin=s,this.UserDefinedDataOrigin=i,this.type=1054537805}}e.IfcSchedulingTime=ur;e.IfcShapeAspect=class extends qv{constructor(e,t,s,i,r,o){super(e),this.ShapeRepresentations=t,this.Name=s,this.Description=i,this.ProductDefinitional=r,this.PartOfProductDefinitionShape=o,this.type=867548509}};class Ar extends nr{constructor(e,t,s,i,r){super(e,t,s,i,r),this.ContextOfItems=t,this.RepresentationIdentifier=s,this.RepresentationType=i,this.Items=r,this.type=3982875396}}e.IfcShapeModel=Ar;e.IfcShapeRepresentation=class extends Ar{constructor(e,t,s,i,r){super(e,t,s,i,r),this.ContextOfItems=t,this.RepresentationIdentifier=s,this.RepresentationType=i,this.Items=r,this.type=4240577450}};class pr extends qv{constructor(e,t){super(e),this.Name=t,this.type=2273995522}}e.IfcStructuralConnectionCondition=pr;class dr extends qv{constructor(e,t){super(e),this.Name=t,this.type=2162789131}}e.IfcStructuralLoad=dr;e.IfcStructuralLoadConfiguration=class extends dr{constructor(e,t,s,i){super(e,t),this.Name=t,this.Values=s,this.Locations=i,this.type=3478079324}};class fr extends dr{constructor(e,t){super(e,t),this.Name=t,this.type=609421318}}e.IfcStructuralLoadOrResult=fr;class mr extends fr{constructor(e,t){super(e,t),this.Name=t,this.type=2525727697}}e.IfcStructuralLoadStatic=mr;e.IfcStructuralLoadTemperature=class extends mr{constructor(e,t,s,i,r){super(e,t),this.Name=t,this.DeltaTConstant=s,this.DeltaTY=i,this.DeltaTZ=r,this.type=3408363356}};class gr extends nr{constructor(e,t,s,i,r){super(e,t,s,i,r),this.ContextOfItems=t,this.RepresentationIdentifier=s,this.RepresentationType=i,this.Items=r,this.type=2830218821}}e.IfcStyleModel=gr;e.IfcStyledItem=class extends lr{constructor(e,t,s,i){super(e),this.Item=t,this.Styles=s,this.Name=i,this.type=3958052878}};e.IfcStyledRepresentation=class extends gr{constructor(e,t,s,i,r){super(e,t,s,i,r),this.ContextOfItems=t,this.RepresentationIdentifier=s,this.RepresentationType=i,this.Items=r,this.type=3049322572}};e.IfcSurfaceReinforcementArea=class extends fr{constructor(e,t,s,i,r){super(e,t),this.Name=t,this.SurfaceReinforcement1=s,this.SurfaceReinforcement2=i,this.ShearReinforcement=r,this.type=2934153892}};e.IfcSurfaceStyle=class extends sr{constructor(e,t,s,i){super(e,t),this.Name=t,this.Side=s,this.Styles=i,this.type=1300840506}};e.IfcSurfaceStyleLighting=class extends er{constructor(e,t,s,i,r){super(e),this.DiffuseTransmissionColour=t,this.DiffuseReflectionColour=s,this.TransmissionColour=i,this.ReflectanceColour=r,this.type=3303107099}};e.IfcSurfaceStyleRefraction=class extends er{constructor(e,t,s){super(e),this.RefractionIndex=t,this.DispersionFactor=s,this.type=1607154358}};class yr extends er{constructor(e,t,s){super(e),this.SurfaceColour=t,this.Transparency=s,this.type=846575682}}e.IfcSurfaceStyleShading=yr;e.IfcSurfaceStyleWithTextures=class extends er{constructor(e,t){super(e),this.Textures=t,this.type=1351298697}};class Er extends er{constructor(e,t,s,i,r,o){super(e),this.RepeatS=t,this.RepeatT=s,this.Mode=i,this.TextureTransform=r,this.Parameter=o,this.type=626085974}}e.IfcSurfaceTexture=Er;e.IfcTable=class extends qv{constructor(e,t,s,i){super(e),this.Name=t,this.Rows=s,this.Columns=i,this.type=985171141}};e.IfcTableColumn=class extends qv{constructor(e,t,s,i,r,o){super(e),this.Identifier=t,this.Name=s,this.Description=i,this.Unit=r,this.ReferencePath=o,this.type=2043862942}};e.IfcTableRow=class extends qv{constructor(e,t,s){super(e),this.RowCells=t,this.IsHeading=s,this.type=531007025}};class vr extends ur{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f,m,g,y,E,v){super(e,t,s,i),this.Name=t,this.DataOrigin=s,this.UserDefinedDataOrigin=i,this.DurationType=r,this.ScheduleDuration=o,this.ScheduleStart=n,this.ScheduleFinish=a,this.EarlyStart=l,this.EarlyFinish=h,this.LateStart=c,this.LateFinish=u,this.FreeFloat=A,this.TotalFloat=p,this.IsCritical=d,this.StatusTime=f,this.ActualDuration=m,this.ActualStart=g,this.ActualFinish=y,this.RemainingTime=E,this.Completion=v,this.type=1549132990}}e.IfcTaskTime=vr;e.IfcTaskTimeRecurring=class extends vr{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f,m,g,y,E,v,_){super(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f,m,g,y,E,v),this.Name=t,this.DataOrigin=s,this.UserDefinedDataOrigin=i,this.DurationType=r,this.ScheduleDuration=o,this.ScheduleStart=n,this.ScheduleFinish=a,this.EarlyStart=l,this.EarlyFinish=h,this.LateStart=c,this.LateFinish=u,this.FreeFloat=A,this.TotalFloat=p,this.IsCritical=d,this.StatusTime=f,this.ActualDuration=m,this.ActualStart=g,this.ActualFinish=y,this.RemainingTime=E,this.Completion=v,this.Recurrence=_,this.type=2771591690}};e.IfcTelecomAddress=class extends Mi{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i),this.Purpose=t,this.Description=s,this.UserDefinedPurpose=i,this.TelephoneNumbers=r,this.FacsimileNumbers=o,this.PagerNumber=n,this.ElectronicMailAddresses=a,this.WWWHomePageURL=l,this.MessagingIDs=h,this.type=912023232}};e.IfcTextStyle=class extends sr{constructor(e,t,s,i,r,o){super(e,t),this.Name=t,this.TextCharacterAppearance=s,this.TextStyle=i,this.TextFontStyle=r,this.ModelOrDraughting=o,this.type=1447204868}};e.IfcTextStyleForDefinedFont=class extends er{constructor(e,t,s){super(e),this.Colour=t,this.BackgroundColour=s,this.type=2636378356}};e.IfcTextStyleTextModel=class extends er{constructor(e,t,s,i,r,o,n,a){super(e),this.TextIndent=t,this.TextAlign=s,this.TextDecoration=i,this.LetterSpacing=r,this.WordSpacing=o,this.TextTransform=n,this.LineHeight=a,this.type=1640371178}};class _r extends er{constructor(e,t){super(e),this.Maps=t,this.type=280115917}}e.IfcTextureCoordinate=_r;e.IfcTextureCoordinateGenerator=class extends _r{constructor(e,t,s,i){super(e,t),this.Maps=t,this.Mode=s,this.Parameter=i,this.type=1742049831}};class Ir extends qv{constructor(e,t,s){super(e),this.TexCoordIndex=t,this.TexCoordsOf=s,this.type=222769930}}e.IfcTextureCoordinateIndices=Ir;e.IfcTextureCoordinateIndicesWithVoids=class extends Ir{constructor(e,t,s,i){super(e,t,s),this.TexCoordIndex=t,this.TexCoordsOf=s,this.InnerTexCoordIndices=i,this.type=1010789467}};e.IfcTextureMap=class extends _r{constructor(e,t,s,i){super(e,t),this.Maps=t,this.Vertices=s,this.MappedTo=i,this.type=2552916305}};e.IfcTextureVertex=class extends er{constructor(e,t){super(e),this.Coordinates=t,this.type=1210645708}};e.IfcTextureVertexList=class extends er{constructor(e,t){super(e),this.TexCoordsList=t,this.type=3611470254}};e.IfcTimePeriod=class extends qv{constructor(e,t,s){super(e),this.StartTime=t,this.EndTime=s,this.type=1199560280}};class Tr extends qv{constructor(e,t,s,i,r,o,n,a,l){super(e),this.Name=t,this.Description=s,this.StartTime=i,this.EndTime=r,this.TimeSeriesDataType=o,this.DataOrigin=n,this.UserDefinedDataOrigin=a,this.Unit=l,this.type=3101149627}}e.IfcTimeSeries=Tr;e.IfcTimeSeriesValue=class extends qv{constructor(e,t){super(e),this.ListValues=t,this.type=581633288}};class Pr extends lr{constructor(e){super(e),this.type=1377556343}}e.IfcTopologicalRepresentationItem=Pr;e.IfcTopologyRepresentation=class extends Ar{constructor(e,t,s,i,r){super(e,t,s,i,r),this.ContextOfItems=t,this.RepresentationIdentifier=s,this.RepresentationType=i,this.Items=r,this.type=1735638870}};e.IfcUnitAssignment=class extends qv{constructor(e,t){super(e),this.Units=t,this.type=180925521}};class Dr extends Pr{constructor(e){super(e),this.type=2799835756}}e.IfcVertex=Dr;e.IfcVertexPoint=class extends Dr{constructor(e,t){super(e),this.VertexGeometry=t,this.type=1907098498}};e.IfcVirtualGridIntersection=class extends qv{constructor(e,t,s){super(e),this.IntersectingAxes=t,this.OffsetDistances=s,this.type=891718957}};e.IfcWorkTime=class extends ur{constructor(e,t,s,i,r,o,n){super(e,t,s,i),this.Name=t,this.DataOrigin=s,this.UserDefinedDataOrigin=i,this.RecurrencePattern=r,this.StartDate=o,this.FinishDate=n,this.type=1236880293}};e.IfcAlignmentCantSegment=class extends Bi{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s),this.StartTag=t,this.EndTag=s,this.StartDistAlong=i,this.HorizontalLength=r,this.StartCantLeft=o,this.EndCantLeft=n,this.StartCantRight=a,this.EndCantRight=l,this.PredefinedType=h,this.type=3752311538}};e.IfcAlignmentHorizontalSegment=class extends Bi{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s),this.StartTag=t,this.EndTag=s,this.StartPoint=i,this.StartDirection=r,this.StartRadiusOfCurvature=o,this.EndRadiusOfCurvature=n,this.SegmentLength=a,this.GravityCenterLineHeight=l,this.PredefinedType=h,this.type=536804194}};e.IfcApprovalRelationship=class extends hr{constructor(e,t,s,i,r){super(e,t,s),this.Name=t,this.Description=s,this.RelatingApproval=i,this.RelatedApprovals=r,this.type=3869604511}};class br extends rr{constructor(e,t,s,i){super(e,t,s),this.ProfileType=t,this.ProfileName=s,this.OuterCurve=i,this.type=3798115385}}e.IfcArbitraryClosedProfileDef=br;class Rr extends rr{constructor(e,t,s,i){super(e,t,s),this.ProfileType=t,this.ProfileName=s,this.Curve=i,this.type=1310608509}}e.IfcArbitraryOpenProfileDef=Rr;e.IfcArbitraryProfileDefWithVoids=class extends br{constructor(e,t,s,i,r){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.OuterCurve=i,this.InnerCurves=r,this.type=2705031697}};e.IfcBlobTexture=class extends Er{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o),this.RepeatS=t,this.RepeatT=s,this.Mode=i,this.TextureTransform=r,this.Parameter=o,this.RasterFormat=n,this.RasterCode=a,this.type=616511568}};e.IfcCenterLineProfileDef=class extends Rr{constructor(e,t,s,i,r){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Curve=i,this.Thickness=r,this.type=3150382593}};e.IfcClassification=class extends Qi{constructor(e,t,s,i,r,o,n,a){super(e),this.Source=t,this.Edition=s,this.EditionDate=i,this.Name=r,this.Description=o,this.Specification=n,this.ReferenceTokens=a,this.type=747523909}};e.IfcClassificationReference=class extends Wi{constructor(e,t,s,i,r,o,n){super(e,t,s,i),this.Location=t,this.Identification=s,this.Name=i,this.ReferencedSource=r,this.Description=o,this.Sort=n,this.type=647927063}};e.IfcColourRgbList=class extends er{constructor(e,t){super(e),this.ColourList=t,this.type=3285139300}};class Cr extends er{constructor(e,t){super(e),this.Name=t,this.type=3264961684}}e.IfcColourSpecification=Cr;e.IfcCompositeProfileDef=class extends rr{constructor(e,t,s,i,r){super(e,t,s),this.ProfileType=t,this.ProfileName=s,this.Profiles=i,this.Label=r,this.type=1485152156}};class xr extends Pr{constructor(e,t){super(e),this.CfsFaces=t,this.type=370225590}}e.IfcConnectedFaceSet=xr;e.IfcConnectionCurveGeometry=class extends Hi{constructor(e,t,s){super(e),this.CurveOnRelatingElement=t,this.CurveOnRelatedElement=s,this.type=1981873012}};e.IfcConnectionPointEccentricity=class extends Gi{constructor(e,t,s,i,r,o){super(e,t,s),this.PointOnRelatingElement=t,this.PointOnRelatedElement=s,this.EccentricityInX=i,this.EccentricityInY=r,this.EccentricityInZ=o,this.type=45288368}};e.IfcContextDependentUnit=class extends Zi{constructor(e,t,s,i){super(e,t,s),this.Dimensions=t,this.UnitType=s,this.Name=i,this.type=3050246964}};class Nr extends Zi{constructor(e,t,s,i,r){super(e,t,s),this.Dimensions=t,this.UnitType=s,this.Name=i,this.ConversionFactor=r,this.type=2889183280}}e.IfcConversionBasedUnit=Nr;e.IfcConversionBasedUnitWithOffset=class extends Nr{constructor(e,t,s,i,r,o){super(e,t,s,i,r),this.Dimensions=t,this.UnitType=s,this.Name=i,this.ConversionFactor=r,this.ConversionOffset=o,this.type=2713554722}};e.IfcCurrencyRelationship=class extends hr{constructor(e,t,s,i,r,o,n,a){super(e,t,s),this.Name=t,this.Description=s,this.RelatingMonetaryUnit=i,this.RelatedMonetaryUnit=r,this.ExchangeRate=o,this.RateDateTime=n,this.RateSource=a,this.type=539742890}};e.IfcCurveStyle=class extends sr{constructor(e,t,s,i,r,o){super(e,t),this.Name=t,this.CurveFont=s,this.CurveWidth=i,this.CurveColour=r,this.ModelOrDraughting=o,this.type=3800577675}};e.IfcCurveStyleFont=class extends er{constructor(e,t,s){super(e),this.Name=t,this.PatternList=s,this.type=1105321065}};e.IfcCurveStyleFontAndScaling=class extends er{constructor(e,t,s,i){super(e),this.Name=t,this.CurveStyleFont=s,this.CurveFontScaling=i,this.type=2367409068}};e.IfcCurveStyleFontPattern=class extends er{constructor(e,t,s){super(e),this.VisibleSegmentLength=t,this.InvisibleSegmentLength=s,this.type=3510044353}};class Or extends rr{constructor(e,t,s,i,r,o){super(e,t,s),this.ProfileType=t,this.ProfileName=s,this.ParentProfile=i,this.Operator=r,this.Label=o,this.type=3632507154}}e.IfcDerivedProfileDef=Or;e.IfcDocumentInformation=class extends Qi{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f,m,g){super(e),this.Identification=t,this.Name=s,this.Description=i,this.Location=r,this.Purpose=o,this.IntendedUse=n,this.Scope=a,this.Revision=l,this.DocumentOwner=h,this.Editors=c,this.CreationTime=u,this.LastRevisionTime=A,this.ElectronicFormat=p,this.ValidFrom=d,this.ValidUntil=f,this.Confidentiality=m,this.Status=g,this.type=1154170062}};e.IfcDocumentInformationRelationship=class extends hr{constructor(e,t,s,i,r,o){super(e,t,s),this.Name=t,this.Description=s,this.RelatingDocument=i,this.RelatedDocuments=r,this.RelationshipType=o,this.type=770865208}};e.IfcDocumentReference=class extends Wi{constructor(e,t,s,i,r,o){super(e,t,s,i),this.Location=t,this.Identification=s,this.Name=i,this.Description=r,this.ReferencedDocument=o,this.type=3732053477}};class Sr extends Pr{constructor(e,t,s){super(e),this.EdgeStart=t,this.EdgeEnd=s,this.type=3900360178}}e.IfcEdge=Sr;e.IfcEdgeCurve=class extends Sr{constructor(e,t,s,i,r){super(e,t,s),this.EdgeStart=t,this.EdgeEnd=s,this.EdgeGeometry=i,this.SameSense=r,this.type=476780140}};e.IfcEventTime=class extends ur{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i),this.Name=t,this.DataOrigin=s,this.UserDefinedDataOrigin=i,this.ActualDate=r,this.EarlyDate=o,this.LateDate=n,this.ScheduleDate=a,this.type=211053100}};class wr extends or{constructor(e,t,s,i){super(e),this.Name=t,this.Description=s,this.Properties=i,this.type=297599258}}e.IfcExtendedProperties=wr;e.IfcExternalReferenceRelationship=class extends hr{constructor(e,t,s,i,r){super(e,t,s),this.Name=t,this.Description=s,this.RelatingReference=i,this.RelatedResourceObjects=r,this.type=1437805879}};class Mr extends Pr{constructor(e,t){super(e),this.Bounds=t,this.type=2556980723}}e.IfcFace=Mr;class Br extends Pr{constructor(e,t,s){super(e),this.Bound=t,this.Orientation=s,this.type=1809719519}}e.IfcFaceBound=Br;e.IfcFaceOuterBound=class extends Br{constructor(e,t,s){super(e,t,s),this.Bound=t,this.Orientation=s,this.type=803316827}};class Fr extends Mr{constructor(e,t,s,i){super(e,t),this.Bounds=t,this.FaceSurface=s,this.SameSense=i,this.type=3008276851}}e.IfcFaceSurface=Fr;e.IfcFailureConnectionCondition=class extends pr{constructor(e,t,s,i,r,o,n,a){super(e,t),this.Name=t,this.TensionFailureX=s,this.TensionFailureY=i,this.TensionFailureZ=r,this.CompressionFailureX=o,this.CompressionFailureY=n,this.CompressionFailureZ=a,this.type=4219587988}};e.IfcFillAreaStyle=class extends sr{constructor(e,t,s,i){super(e,t),this.Name=t,this.FillStyles=s,this.ModelOrDraughting=i,this.type=738692330}};class Lr extends ar{constructor(e,t,s,i,r,o,n){super(e,t,s),this.ContextIdentifier=t,this.ContextType=s,this.CoordinateSpaceDimension=i,this.Precision=r,this.WorldCoordinateSystem=o,this.TrueNorth=n,this.type=3448662350}}e.IfcGeometricRepresentationContext=Lr;class Ur extends lr{constructor(e){super(e),this.type=2453401579}}e.IfcGeometricRepresentationItem=Ur;e.IfcGeometricRepresentationSubContext=class extends Lr{constructor(e,s,i,r,o,n,a,l){super(e,s,i,new t(0),null,r,null),this.ContextIdentifier=s,this.ContextType=i,this.WorldCoordinateSystem=r,this.ParentContext=o,this.TargetScale=n,this.TargetView=a,this.UserDefinedTargetView=l,this.type=4142052618}};class Hr extends Ur{constructor(e,t){super(e),this.Elements=t,this.type=3590301190}}e.IfcGeometricSet=Hr;e.IfcGridPlacement=class extends qi{constructor(e,t,s,i){super(e,t),this.PlacementRelTo=t,this.PlacementLocation=s,this.PlacementRefDirection=i,this.type=178086475}};class Gr extends Ur{constructor(e,t,s){super(e),this.BaseSurface=t,this.AgreementFlag=s,this.type=812098782}}e.IfcHalfSpaceSolid=Gr;e.IfcImageTexture=class extends Er{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.RepeatS=t,this.RepeatT=s,this.Mode=i,this.TextureTransform=r,this.Parameter=o,this.URLReference=n,this.type=3905492369}};e.IfcIndexedColourMap=class extends er{constructor(e,t,s,i,r){super(e),this.MappedTo=t,this.Opacity=s,this.Colours=i,this.ColourIndex=r,this.type=3570813810}};class Vr extends _r{constructor(e,t,s,i){super(e,t),this.Maps=t,this.MappedTo=s,this.TexCoords=i,this.type=1437953363}}e.IfcIndexedTextureMap=Vr;e.IfcIndexedTriangleTextureMap=class extends Vr{constructor(e,t,s,i,r){super(e,t,s,i),this.Maps=t,this.MappedTo=s,this.TexCoords=i,this.TexCoordIndex=r,this.type=2133299955}};e.IfcIrregularTimeSeries=class extends Tr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.Name=t,this.Description=s,this.StartTime=i,this.EndTime=r,this.TimeSeriesDataType=o,this.DataOrigin=n,this.UserDefinedDataOrigin=a,this.Unit=l,this.Values=h,this.type=3741457305}};e.IfcLagTime=class extends ur{constructor(e,t,s,i,r,o){super(e,t,s,i),this.Name=t,this.DataOrigin=s,this.UserDefinedDataOrigin=i,this.LagValue=r,this.DurationType=o,this.type=1585845231}};class kr extends Ur{constructor(e,t,s,i,r){super(e),this.Name=t,this.LightColour=s,this.AmbientIntensity=i,this.Intensity=r,this.type=1402838566}}e.IfcLightSource=kr;e.IfcLightSourceAmbient=class extends kr{constructor(e,t,s,i,r){super(e,t,s,i,r),this.Name=t,this.LightColour=s,this.AmbientIntensity=i,this.Intensity=r,this.type=125510826}};e.IfcLightSourceDirectional=class extends kr{constructor(e,t,s,i,r,o){super(e,t,s,i,r),this.Name=t,this.LightColour=s,this.AmbientIntensity=i,this.Intensity=r,this.Orientation=o,this.type=2604431987}};e.IfcLightSourceGoniometric=class extends kr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r),this.Name=t,this.LightColour=s,this.AmbientIntensity=i,this.Intensity=r,this.Position=o,this.ColourAppearance=n,this.ColourTemperature=a,this.LuminousFlux=l,this.LightEmissionSource=h,this.LightDistributionDataSource=c,this.type=4266656042}};class jr extends kr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r),this.Name=t,this.LightColour=s,this.AmbientIntensity=i,this.Intensity=r,this.Position=o,this.Radius=n,this.ConstantAttenuation=a,this.DistanceAttenuation=l,this.QuadricAttenuation=h,this.type=1520743889}}e.IfcLightSourcePositional=jr;e.IfcLightSourceSpot=class extends jr{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p){super(e,t,s,i,r,o,n,a,l,h),this.Name=t,this.LightColour=s,this.AmbientIntensity=i,this.Intensity=r,this.Position=o,this.Radius=n,this.ConstantAttenuation=a,this.DistanceAttenuation=l,this.QuadricAttenuation=h,this.Orientation=c,this.ConcentrationExponent=u,this.SpreadAngle=A,this.BeamWidthAngle=p,this.type=3422422726}};e.IfcLinearPlacement=class extends qi{constructor(e,t,s,i){super(e,t),this.PlacementRelTo=t,this.RelativePlacement=s,this.CartesianPosition=i,this.type=388784114}};e.IfcLocalPlacement=class extends qi{constructor(e,t,s){super(e,t),this.PlacementRelTo=t,this.RelativePlacement=s,this.type=2624227202}};class Qr extends Pr{constructor(e){super(e),this.type=1008929658}}e.IfcLoop=Qr;e.IfcMappedItem=class extends lr{constructor(e,t,s){super(e),this.MappingSource=t,this.MappingTarget=s,this.type=2347385850}};e.IfcMaterial=class extends zi{constructor(e,t,s,i){super(e),this.Name=t,this.Description=s,this.Category=i,this.type=1838606355}};e.IfcMaterialConstituent=class extends zi{constructor(e,t,s,i,r,o){super(e),this.Name=t,this.Description=s,this.Material=i,this.Fraction=r,this.Category=o,this.type=3708119e3}};e.IfcMaterialConstituentSet=class extends zi{constructor(e,t,s,i){super(e),this.Name=t,this.Description=s,this.MaterialConstituents=i,this.type=2852063980}};e.IfcMaterialDefinitionRepresentation=class extends ir{constructor(e,t,s,i,r){super(e,t,s,i),this.Name=t,this.Description=s,this.Representations=i,this.RepresentedMaterial=r,this.type=2022407955}};e.IfcMaterialLayerSetUsage=class extends Xi{constructor(e,t,s,i,r,o){super(e),this.ForLayerSet=t,this.LayerSetDirection=s,this.DirectionSense=i,this.OffsetFromReferenceLine=r,this.ReferenceExtent=o,this.type=1303795690}};class Wr extends Xi{constructor(e,t,s,i){super(e),this.ForProfileSet=t,this.CardinalPoint=s,this.ReferenceExtent=i,this.type=3079605661}}e.IfcMaterialProfileSetUsage=Wr;e.IfcMaterialProfileSetUsageTapering=class extends Wr{constructor(e,t,s,i,r,o){super(e,t,s,i),this.ForProfileSet=t,this.CardinalPoint=s,this.ReferenceExtent=i,this.ForProfileEndSet=r,this.CardinalEndPoint=o,this.type=3404854881}};e.IfcMaterialProperties=class extends wr{constructor(e,t,s,i,r){super(e,t,s,i),this.Name=t,this.Description=s,this.Properties=i,this.Material=r,this.type=3265635763}};e.IfcMaterialRelationship=class extends hr{constructor(e,t,s,i,r,o){super(e,t,s),this.Name=t,this.Description=s,this.RelatingMaterial=i,this.RelatedMaterials=r,this.MaterialExpression=o,this.type=853536259}};e.IfcMirroredProfileDef=class extends Or{constructor(e,t,s,i,r,o){super(e,t,s,i,r,o),this.ProfileType=t,this.ProfileName=s,this.ParentProfile=i,this.Operator=r,this.Label=o,this.type=2998442950}};class zr extends cr{constructor(e,t,s,i,r){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.type=219451334}}e.IfcObjectDefinition=zr;e.IfcOpenCrossProfileDef=class extends rr{constructor(e,t,s,i,r,o,n,a){super(e,t,s),this.ProfileType=t,this.ProfileName=s,this.HorizontalWidths=i,this.Widths=r,this.Slopes=o,this.Tags=n,this.OffsetPoint=a,this.type=182550632}};e.IfcOpenShell=class extends xr{constructor(e,t){super(e,t),this.CfsFaces=t,this.type=2665983363}};e.IfcOrganizationRelationship=class extends hr{constructor(e,t,s,i,r){super(e,t,s),this.Name=t,this.Description=s,this.RelatingOrganization=i,this.RelatedOrganizations=r,this.type=1411181986}};e.IfcOrientedEdge=class extends Sr{constructor(e,t,s,i){super(e,t,new Zv(0)),this.EdgeStart=t,this.EdgeElement=s,this.Orientation=i,this.type=1029017970}};class Kr extends rr{constructor(e,t,s,i){super(e,t,s),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.type=2529465313}}e.IfcParameterizedProfileDef=Kr;e.IfcPath=class extends Pr{constructor(e,t){super(e),this.EdgeList=t,this.type=2519244187}};e.IfcPhysicalComplexQuantity=class extends Ji{constructor(e,t,s,i,r,o,n){super(e,t,s),this.Name=t,this.Description=s,this.HasQuantities=i,this.Discrimination=r,this.Quality=o,this.Usage=n,this.type=3021840470}};e.IfcPixelTexture=class extends Er{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o),this.RepeatS=t,this.RepeatT=s,this.Mode=i,this.TextureTransform=r,this.Parameter=o,this.Width=n,this.Height=a,this.ColourComponents=l,this.Pixel=h,this.type=597895409}};class Yr extends Ur{constructor(e,t){super(e),this.Location=t,this.type=2004835150}}e.IfcPlacement=Yr;class Xr extends Ur{constructor(e,t,s){super(e),this.SizeInX=t,this.SizeInY=s,this.type=1663979128}}e.IfcPlanarExtent=Xr;class Zr extends Ur{constructor(e){super(e),this.type=2067069095}}e.IfcPoint=Zr;e.IfcPointByDistanceExpression=class extends Zr{constructor(e,t,s,i,r,o){super(e),this.DistanceAlong=t,this.OffsetLateral=s,this.OffsetVertical=i,this.OffsetLongitudinal=r,this.BasisCurve=o,this.type=2165702409}};e.IfcPointOnCurve=class extends Zr{constructor(e,t,s){super(e),this.BasisCurve=t,this.PointParameter=s,this.type=4022376103}};e.IfcPointOnSurface=class extends Zr{constructor(e,t,s,i){super(e),this.BasisSurface=t,this.PointParameterU=s,this.PointParameterV=i,this.type=1423911732}};e.IfcPolyLoop=class extends Qr{constructor(e,t){super(e),this.Polygon=t,this.type=2924175390}};e.IfcPolygonalBoundedHalfSpace=class extends Gr{constructor(e,t,s,i,r){super(e,t,s),this.BaseSurface=t,this.AgreementFlag=s,this.Position=i,this.PolygonalBoundary=r,this.type=2775532180}};class qr extends er{constructor(e,t){super(e),this.Name=t,this.type=3727388367}}e.IfcPreDefinedItem=qr;class Jr extends or{constructor(e){super(e),this.type=3778827333}}e.IfcPreDefinedProperties=Jr;class $r extends qr{constructor(e,t){super(e,t),this.Name=t,this.type=1775413392}}e.IfcPreDefinedTextFont=$r;e.IfcProductDefinitionShape=class extends ir{constructor(e,t,s,i){super(e,t,s,i),this.Name=t,this.Description=s,this.Representations=i,this.type=673634403}};e.IfcProfileProperties=class extends wr{constructor(e,t,s,i,r){super(e,t,s,i),this.Name=t,this.Description=s,this.Properties=i,this.ProfileDefinition=r,this.type=2802850158}};class eo extends or{constructor(e,t,s){super(e),this.Name=t,this.Specification=s,this.type=2598011224}}e.IfcProperty=eo;class to extends cr{constructor(e,t,s,i,r){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.type=1680319473}}e.IfcPropertyDefinition=to;e.IfcPropertyDependencyRelationship=class extends hr{constructor(e,t,s,i,r,o){super(e,t,s),this.Name=t,this.Description=s,this.DependingProperty=i,this.DependantProperty=r,this.Expression=o,this.type=148025276}};class so extends to{constructor(e,t,s,i,r){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.type=3357820518}}e.IfcPropertySetDefinition=so;class io extends to{constructor(e,t,s,i,r){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.type=1482703590}}e.IfcPropertyTemplateDefinition=io;class ro extends so{constructor(e,t,s,i,r){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.type=2090586900}}e.IfcQuantitySet=ro;class oo extends Kr{constructor(e,t,s,i,r,o){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.XDim=r,this.YDim=o,this.type=3615266464}}e.IfcRectangleProfileDef=oo;e.IfcRegularTimeSeries=class extends Tr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l),this.Name=t,this.Description=s,this.StartTime=i,this.EndTime=r,this.TimeSeriesDataType=o,this.DataOrigin=n,this.UserDefinedDataOrigin=a,this.Unit=l,this.TimeStep=h,this.Values=c,this.type=3413951693}};e.IfcReinforcementBarProperties=class extends Jr{constructor(e,t,s,i,r,o,n){super(e),this.TotalCrossSectionArea=t,this.SteelGrade=s,this.BarSurface=i,this.EffectiveDepth=r,this.NominalBarDiameter=o,this.BarCount=n,this.type=1580146022}};class no extends cr{constructor(e,t,s,i,r){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.type=478536968}}e.IfcRelationship=no;e.IfcResourceApprovalRelationship=class extends hr{constructor(e,t,s,i,r){super(e,t,s),this.Name=t,this.Description=s,this.RelatedResourceObjects=i,this.RelatingApproval=r,this.type=2943643501}};e.IfcResourceConstraintRelationship=class extends hr{constructor(e,t,s,i,r){super(e,t,s),this.Name=t,this.Description=s,this.RelatingConstraint=i,this.RelatedResourceObjects=r,this.type=1608871552}};e.IfcResourceTime=class extends ur{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f,m,g,y){super(e,t,s,i),this.Name=t,this.DataOrigin=s,this.UserDefinedDataOrigin=i,this.ScheduleWork=r,this.ScheduleUsage=o,this.ScheduleStart=n,this.ScheduleFinish=a,this.ScheduleContour=l,this.LevelingDelay=h,this.IsOverAllocated=c,this.StatusTime=u,this.ActualWork=A,this.ActualUsage=p,this.ActualStart=d,this.ActualFinish=f,this.RemainingWork=m,this.RemainingUsage=g,this.Completion=y,this.type=1042787934}};e.IfcRoundedRectangleProfileDef=class extends oo{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.XDim=r,this.YDim=o,this.RoundingRadius=n,this.type=2778083089}};e.IfcSectionProperties=class extends Jr{constructor(e,t,s,i){super(e),this.SectionType=t,this.StartProfile=s,this.EndProfile=i,this.type=2042790032}};e.IfcSectionReinforcementProperties=class extends Jr{constructor(e,t,s,i,r,o,n){super(e),this.LongitudinalStartPosition=t,this.LongitudinalEndPosition=s,this.TransversePosition=i,this.ReinforcementRole=r,this.SectionDefinition=o,this.CrossSectionReinforcementDefinitions=n,this.type=4165799628}};e.IfcSectionedSpine=class extends Ur{constructor(e,t,s,i){super(e),this.SpineCurve=t,this.CrossSections=s,this.CrossSectionPositions=i,this.type=1509187699}};class ao extends Ur{constructor(e,t){super(e),this.Transition=t,this.type=823603102}}e.IfcSegment=ao;e.IfcShellBasedSurfaceModel=class extends Ur{constructor(e,t){super(e),this.SbsmBoundary=t,this.type=4124623270}};class lo extends eo{constructor(e,t,s){super(e,t,s),this.Name=t,this.Specification=s,this.type=3692461612}}e.IfcSimpleProperty=lo;e.IfcSlippageConnectionCondition=class extends pr{constructor(e,t,s,i,r){super(e,t),this.Name=t,this.SlippageX=s,this.SlippageY=i,this.SlippageZ=r,this.type=2609359061}};class ho extends Ur{constructor(e){super(e),this.type=723233188}}e.IfcSolidModel=ho;e.IfcStructuralLoadLinearForce=class extends mr{constructor(e,t,s,i,r,o,n,a){super(e,t),this.Name=t,this.LinearForceX=s,this.LinearForceY=i,this.LinearForceZ=r,this.LinearMomentX=o,this.LinearMomentY=n,this.LinearMomentZ=a,this.type=1595516126}};e.IfcStructuralLoadPlanarForce=class extends mr{constructor(e,t,s,i,r){super(e,t),this.Name=t,this.PlanarForceX=s,this.PlanarForceY=i,this.PlanarForceZ=r,this.type=2668620305}};class co extends mr{constructor(e,t,s,i,r,o,n,a){super(e,t),this.Name=t,this.DisplacementX=s,this.DisplacementY=i,this.DisplacementZ=r,this.RotationalDisplacementRX=o,this.RotationalDisplacementRY=n,this.RotationalDisplacementRZ=a,this.type=2473145415}}e.IfcStructuralLoadSingleDisplacement=co;e.IfcStructuralLoadSingleDisplacementDistortion=class extends co{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a),this.Name=t,this.DisplacementX=s,this.DisplacementY=i,this.DisplacementZ=r,this.RotationalDisplacementRX=o,this.RotationalDisplacementRY=n,this.RotationalDisplacementRZ=a,this.Distortion=l,this.type=1973038258}};class uo extends mr{constructor(e,t,s,i,r,o,n,a){super(e,t),this.Name=t,this.ForceX=s,this.ForceY=i,this.ForceZ=r,this.MomentX=o,this.MomentY=n,this.MomentZ=a,this.type=1597423693}}e.IfcStructuralLoadSingleForce=uo;e.IfcStructuralLoadSingleForceWarping=class extends uo{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a),this.Name=t,this.ForceX=s,this.ForceY=i,this.ForceZ=r,this.MomentX=o,this.MomentY=n,this.MomentZ=a,this.WarpingMoment=l,this.type=1190533807}};e.IfcSubedge=class extends Sr{constructor(e,t,s,i){super(e,t,s),this.EdgeStart=t,this.EdgeEnd=s,this.ParentEdge=i,this.type=2233826070}};class Ao extends Ur{constructor(e){super(e),this.type=2513912981}}e.IfcSurface=Ao;e.IfcSurfaceStyleRendering=class extends yr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s),this.SurfaceColour=t,this.Transparency=s,this.DiffuseColour=i,this.TransmissionColour=r,this.DiffuseTransmissionColour=o,this.ReflectionColour=n,this.SpecularColour=a,this.SpecularHighlight=l,this.ReflectanceMethod=h,this.type=1878645084}};class po extends ho{constructor(e,t,s){super(e),this.SweptArea=t,this.Position=s,this.type=2247615214}}e.IfcSweptAreaSolid=po;class fo extends ho{constructor(e,t,s,i,r,o){super(e),this.Directrix=t,this.Radius=s,this.InnerRadius=i,this.StartParam=r,this.EndParam=o,this.type=1260650574}}e.IfcSweptDiskSolid=fo;e.IfcSweptDiskSolidPolygonal=class extends fo{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.Directrix=t,this.Radius=s,this.InnerRadius=i,this.StartParam=r,this.EndParam=o,this.FilletRadius=n,this.type=1096409881}};class mo extends Ao{constructor(e,t,s){super(e),this.SweptCurve=t,this.Position=s,this.type=230924584}}e.IfcSweptSurface=mo;e.IfcTShapeProfileDef=class extends Kr{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.Depth=r,this.FlangeWidth=o,this.WebThickness=n,this.FlangeThickness=a,this.FilletRadius=l,this.FlangeEdgeRadius=h,this.WebEdgeRadius=c,this.WebSlope=u,this.FlangeSlope=A,this.type=3071757647}};class go extends Ur{constructor(e){super(e),this.type=901063453}}e.IfcTessellatedItem=go;class yo extends Ur{constructor(e,t,s,i){super(e),this.Literal=t,this.Placement=s,this.Path=i,this.type=4282788508}}e.IfcTextLiteral=yo;e.IfcTextLiteralWithExtent=class extends yo{constructor(e,t,s,i,r,o){super(e,t,s,i),this.Literal=t,this.Placement=s,this.Path=i,this.Extent=r,this.BoxAlignment=o,this.type=3124975700}};e.IfcTextStyleFontModel=class extends $r{constructor(e,t,s,i,r,o,n){super(e,t),this.Name=t,this.FontFamily=s,this.FontStyle=i,this.FontVariant=r,this.FontWeight=o,this.FontSize=n,this.type=1983826977}};e.IfcTrapeziumProfileDef=class extends Kr{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.BottomXDim=r,this.TopXDim=o,this.YDim=n,this.TopXOffset=a,this.type=2715220739}};class Eo extends zr{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.type=1628702193}}e.IfcTypeObject=Eo;class vo extends Eo{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.Identification=a,this.LongDescription=l,this.ProcessType=h,this.type=3736923433}}e.IfcTypeProcess=vo;class _o extends Eo{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.type=2347495698}}e.IfcTypeProduct=_o;class Io extends Eo{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.Identification=a,this.LongDescription=l,this.ResourceType=h,this.type=3698973494}}e.IfcTypeResource=Io;e.IfcUShapeProfileDef=class extends Kr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.Depth=r,this.FlangeWidth=o,this.WebThickness=n,this.FlangeThickness=a,this.FilletRadius=l,this.EdgeRadius=h,this.FlangeSlope=c,this.type=427810014}};e.IfcVector=class extends Ur{constructor(e,t,s){super(e),this.Orientation=t,this.Magnitude=s,this.type=1417489154}};e.IfcVertexLoop=class extends Qr{constructor(e,t){super(e),this.LoopVertex=t,this.type=2759199220}};e.IfcZShapeProfileDef=class extends Kr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.Depth=r,this.FlangeWidth=o,this.WebThickness=n,this.FlangeThickness=a,this.FilletRadius=l,this.EdgeRadius=h,this.type=2543172580}};e.IfcAdvancedFace=class extends Fr{constructor(e,t,s,i){super(e,t,s,i),this.Bounds=t,this.FaceSurface=s,this.SameSense=i,this.type=3406155212}};e.IfcAnnotationFillArea=class extends Ur{constructor(e,t,s){super(e),this.OuterBoundary=t,this.InnerBoundaries=s,this.type=669184980}};e.IfcAsymmetricIShapeProfileDef=class extends Kr{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.BottomFlangeWidth=r,this.OverallDepth=o,this.WebThickness=n,this.BottomFlangeThickness=a,this.BottomFlangeFilletRadius=l,this.TopFlangeWidth=h,this.TopFlangeThickness=c,this.TopFlangeFilletRadius=u,this.BottomFlangeEdgeRadius=A,this.BottomFlangeSlope=p,this.TopFlangeEdgeRadius=d,this.TopFlangeSlope=f,this.type=3207858831}};e.IfcAxis1Placement=class extends Yr{constructor(e,t,s){super(e,t),this.Location=t,this.Axis=s,this.type=4261334040}};e.IfcAxis2Placement2D=class extends Yr{constructor(e,t,s){super(e,t),this.Location=t,this.RefDirection=s,this.type=3125803723}};e.IfcAxis2Placement3D=class extends Yr{constructor(e,t,s,i){super(e,t),this.Location=t,this.Axis=s,this.RefDirection=i,this.type=2740243338}};e.IfcAxis2PlacementLinear=class extends Yr{constructor(e,t,s,i){super(e,t),this.Location=t,this.Axis=s,this.RefDirection=i,this.type=3425423356}};class To extends Ur{constructor(e,t,s,i){super(e),this.Operator=t,this.FirstOperand=s,this.SecondOperand=i,this.type=2736907675}}e.IfcBooleanResult=To;class Po extends Ao{constructor(e){super(e),this.type=4182860854}}e.IfcBoundedSurface=Po;e.IfcBoundingBox=class extends Ur{constructor(e,t,s,i,r){super(e),this.Corner=t,this.XDim=s,this.YDim=i,this.ZDim=r,this.type=2581212453}};e.IfcBoxedHalfSpace=class extends Gr{constructor(e,t,s,i){super(e,t,s),this.BaseSurface=t,this.AgreementFlag=s,this.Enclosure=i,this.type=2713105998}};e.IfcCShapeProfileDef=class extends Kr{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.Depth=r,this.Width=o,this.WallThickness=n,this.Girth=a,this.InternalFilletRadius=l,this.type=2898889636}};e.IfcCartesianPoint=class extends Zr{constructor(e,t){super(e),this.Coordinates=t,this.type=1123145078}};class Do extends Ur{constructor(e){super(e),this.type=574549367}}e.IfcCartesianPointList=Do;e.IfcCartesianPointList2D=class extends Do{constructor(e,t,s){super(e),this.CoordList=t,this.TagList=s,this.type=1675464909}};e.IfcCartesianPointList3D=class extends Do{constructor(e,t,s){super(e),this.CoordList=t,this.TagList=s,this.type=2059837836}};class bo extends Ur{constructor(e,t,s,i,r){super(e),this.Axis1=t,this.Axis2=s,this.LocalOrigin=i,this.Scale=r,this.type=59481748}}e.IfcCartesianTransformationOperator=bo;class Ro extends bo{constructor(e,t,s,i,r){super(e,t,s,i,r),this.Axis1=t,this.Axis2=s,this.LocalOrigin=i,this.Scale=r,this.type=3749851601}}e.IfcCartesianTransformationOperator2D=Ro;e.IfcCartesianTransformationOperator2DnonUniform=class extends Ro{constructor(e,t,s,i,r,o){super(e,t,s,i,r),this.Axis1=t,this.Axis2=s,this.LocalOrigin=i,this.Scale=r,this.Scale2=o,this.type=3486308946}};class Co extends bo{constructor(e,t,s,i,r,o){super(e,t,s,i,r),this.Axis1=t,this.Axis2=s,this.LocalOrigin=i,this.Scale=r,this.Axis3=o,this.type=3331915920}}e.IfcCartesianTransformationOperator3D=Co;e.IfcCartesianTransformationOperator3DnonUniform=class extends Co{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o),this.Axis1=t,this.Axis2=s,this.LocalOrigin=i,this.Scale=r,this.Axis3=o,this.Scale2=n,this.Scale3=a,this.type=1416205885}};class xo extends Kr{constructor(e,t,s,i,r){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.Radius=r,this.type=1383045692}}e.IfcCircleProfileDef=xo;e.IfcClosedShell=class extends xr{constructor(e,t){super(e,t),this.CfsFaces=t,this.type=2205249479}};e.IfcColourRgb=class extends Cr{constructor(e,t,s,i,r){super(e,t),this.Name=t,this.Red=s,this.Green=i,this.Blue=r,this.type=776857604}};e.IfcComplexProperty=class extends eo{constructor(e,t,s,i,r){super(e,t,s),this.Name=t,this.Specification=s,this.UsageName=i,this.HasProperties=r,this.type=2542286263}};class No extends ao{constructor(e,t,s,i){super(e,t),this.Transition=t,this.SameSense=s,this.ParentCurve=i,this.type=2485617015}}e.IfcCompositeCurveSegment=No;class Oo extends Io{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.Identification=a,this.LongDescription=l,this.ResourceType=h,this.BaseCosts=c,this.BaseQuantity=u,this.type=2574617495}}e.IfcConstructionResourceType=Oo;class So extends zr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.LongName=n,this.Phase=a,this.RepresentationContexts=l,this.UnitsInContext=h,this.type=3419103109}}e.IfcContext=So;e.IfcCrewResourceType=class extends Oo{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l,h,c,u),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.Identification=a,this.LongDescription=l,this.ResourceType=h,this.BaseCosts=c,this.BaseQuantity=u,this.PredefinedType=A,this.type=1815067380}};class wo extends Ur{constructor(e,t){super(e),this.Position=t,this.type=2506170314}}e.IfcCsgPrimitive3D=wo;e.IfcCsgSolid=class extends ho{constructor(e,t){super(e),this.TreeRootExpression=t,this.type=2147822146}};class Mo extends Ur{constructor(e){super(e),this.type=2601014836}}e.IfcCurve=Mo;e.IfcCurveBoundedPlane=class extends Po{constructor(e,t,s,i){super(e),this.BasisSurface=t,this.OuterBoundary=s,this.InnerBoundaries=i,this.type=2827736869}};e.IfcCurveBoundedSurface=class extends Po{constructor(e,t,s,i){super(e),this.BasisSurface=t,this.Boundaries=s,this.ImplicitOuter=i,this.type=2629017746}};e.IfcCurveSegment=class extends ao{constructor(e,t,s,i,r,o){super(e,t),this.Transition=t,this.Placement=s,this.SegmentStart=i,this.SegmentLength=r,this.ParentCurve=o,this.type=4212018352}};e.IfcDirection=class extends Ur{constructor(e,t){super(e),this.DirectionRatios=t,this.type=32440307}};class Bo extends po{constructor(e,t,s,i,r,o){super(e,t,s),this.SweptArea=t,this.Position=s,this.Directrix=i,this.StartParam=r,this.EndParam=o,this.type=593015953}}e.IfcDirectrixCurveSweptAreaSolid=Bo;e.IfcEdgeLoop=class extends Qr{constructor(e,t){super(e),this.EdgeList=t,this.type=1472233963}};e.IfcElementQuantity=class extends ro{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.MethodOfMeasurement=o,this.Quantities=n,this.type=1883228015}};class Fo extends _o{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=339256511}}e.IfcElementType=Fo;class Lo extends Ao{constructor(e,t){super(e),this.Position=t,this.type=2777663545}}e.IfcElementarySurface=Lo;e.IfcEllipseProfileDef=class extends Kr{constructor(e,t,s,i,r,o){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.SemiAxis1=r,this.SemiAxis2=o,this.type=2835456948}};e.IfcEventType=class extends vo{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.Identification=a,this.LongDescription=l,this.ProcessType=h,this.PredefinedType=c,this.EventTriggerType=u,this.UserDefinedEventTriggerType=A,this.type=4024345920}};class Uo extends po{constructor(e,t,s,i,r){super(e,t,s),this.SweptArea=t,this.Position=s,this.ExtrudedDirection=i,this.Depth=r,this.type=477187591}}e.IfcExtrudedAreaSolid=Uo;e.IfcExtrudedAreaSolidTapered=class extends Uo{constructor(e,t,s,i,r,o){super(e,t,s,i,r),this.SweptArea=t,this.Position=s,this.ExtrudedDirection=i,this.Depth=r,this.EndSweptArea=o,this.type=2804161546}};e.IfcFaceBasedSurfaceModel=class extends Ur{constructor(e,t){super(e),this.FbsmFaces=t,this.type=2047409740}};e.IfcFillAreaStyleHatching=class extends Ur{constructor(e,t,s,i,r,o){super(e),this.HatchLineAppearance=t,this.StartOfNextHatchLine=s,this.PointOfReferenceHatchLine=i,this.PatternStart=r,this.HatchLineAngle=o,this.type=374418227}};e.IfcFillAreaStyleTiles=class extends Ur{constructor(e,t,s,i){super(e),this.TilingPattern=t,this.Tiles=s,this.TilingScale=i,this.type=315944413}};class Ho extends Bo{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.SweptArea=t,this.Position=s,this.Directrix=i,this.StartParam=r,this.EndParam=o,this.FixedReference=n,this.type=2652556860}}e.IfcFixedReferenceSweptAreaSolid=Ho;class Go extends Fo{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=4238390223}}e.IfcFurnishingElementType=Go;e.IfcFurnitureType=class extends Go{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.AssemblyPlace=c,this.PredefinedType=u,this.type=1268542332}};e.IfcGeographicElementType=class extends Fo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=4095422895}};e.IfcGeometricCurveSet=class extends Hr{constructor(e,t){super(e,t),this.Elements=t,this.type=987898635}};e.IfcIShapeProfileDef=class extends Kr{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.OverallWidth=r,this.OverallDepth=o,this.WebThickness=n,this.FlangeThickness=a,this.FilletRadius=l,this.FlangeEdgeRadius=h,this.FlangeSlope=c,this.type=1484403080}};class Vo extends go{constructor(e,t){super(e),this.CoordIndex=t,this.type=178912537}}e.IfcIndexedPolygonalFace=Vo;e.IfcIndexedPolygonalFaceWithVoids=class extends Vo{constructor(e,t,s){super(e,t),this.CoordIndex=t,this.InnerCoordIndices=s,this.type=2294589976}};e.IfcIndexedPolygonalTextureMap=class extends Vr{constructor(e,t,s,i,r){super(e,t,s,i),this.Maps=t,this.MappedTo=s,this.TexCoords=i,this.TexCoordIndices=r,this.type=3465909080}};e.IfcLShapeProfileDef=class extends Kr{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.Depth=r,this.Width=o,this.Thickness=n,this.FilletRadius=a,this.EdgeRadius=l,this.LegSlope=h,this.type=572779678}};e.IfcLaborResourceType=class extends Oo{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l,h,c,u),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.Identification=a,this.LongDescription=l,this.ResourceType=h,this.BaseCosts=c,this.BaseQuantity=u,this.PredefinedType=A,this.type=428585644}};e.IfcLine=class extends Mo{constructor(e,t,s){super(e),this.Pnt=t,this.Dir=s,this.type=1281925730}};class ko extends ho{constructor(e,t){super(e),this.Outer=t,this.type=1425443689}}e.IfcManifoldSolidBrep=ko;class jo extends zr{constructor(e,t,s,i,r,o){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.type=3888040117}}e.IfcObject=jo;class Qo extends Mo{constructor(e,t){super(e),this.BasisCurve=t,this.type=590820931}}e.IfcOffsetCurve=Qo;e.IfcOffsetCurve2D=class extends Qo{constructor(e,t,s,i){super(e,t),this.BasisCurve=t,this.Distance=s,this.SelfIntersect=i,this.type=3388369263}};e.IfcOffsetCurve3D=class extends Qo{constructor(e,t,s,i,r){super(e,t),this.BasisCurve=t,this.Distance=s,this.SelfIntersect=i,this.RefDirection=r,this.type=3505215534}};e.IfcOffsetCurveByDistances=class extends Qo{constructor(e,t,s,i){super(e,t),this.BasisCurve=t,this.OffsetValues=s,this.Tag=i,this.type=2485787929}};e.IfcPcurve=class extends Mo{constructor(e,t,s){super(e),this.BasisSurface=t,this.ReferenceCurve=s,this.type=1682466193}};e.IfcPlanarBox=class extends Xr{constructor(e,t,s,i){super(e,t,s),this.SizeInX=t,this.SizeInY=s,this.Placement=i,this.type=603570806}};e.IfcPlane=class extends Lo{constructor(e,t){super(e,t),this.Position=t,this.type=220341763}};e.IfcPolynomialCurve=class extends Mo{constructor(e,t,s,i,r){super(e),this.Position=t,this.CoefficientsX=s,this.CoefficientsY=i,this.CoefficientsZ=r,this.type=3381221214}};class Wo extends qr{constructor(e,t){super(e,t),this.Name=t,this.type=759155922}}e.IfcPreDefinedColour=Wo;class zo extends qr{constructor(e,t){super(e,t),this.Name=t,this.type=2559016684}}e.IfcPreDefinedCurveFont=zo;class Ko extends so{constructor(e,t,s,i,r){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.type=3967405729}}e.IfcPreDefinedPropertySet=Ko;e.IfcProcedureType=class extends vo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.Identification=a,this.LongDescription=l,this.ProcessType=h,this.PredefinedType=c,this.type=569719735}};class Yo extends jo{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.LongDescription=a,this.type=2945172077}}e.IfcProcess=Yo;class Xo extends jo{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.type=4208778838}}e.IfcProduct=Xo;e.IfcProject=class extends So{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.LongName=n,this.Phase=a,this.RepresentationContexts=l,this.UnitsInContext=h,this.type=103090709}};e.IfcProjectLibrary=class extends So{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.LongName=n,this.Phase=a,this.RepresentationContexts=l,this.UnitsInContext=h,this.type=653396225}};e.IfcPropertyBoundedValue=class extends lo{constructor(e,t,s,i,r,o,n){super(e,t,s),this.Name=t,this.Specification=s,this.UpperBoundValue=i,this.LowerBoundValue=r,this.Unit=o,this.SetPointValue=n,this.type=871118103}};e.IfcPropertyEnumeratedValue=class extends lo{constructor(e,t,s,i,r){super(e,t,s),this.Name=t,this.Specification=s,this.EnumerationValues=i,this.EnumerationReference=r,this.type=4166981789}};e.IfcPropertyListValue=class extends lo{constructor(e,t,s,i,r){super(e,t,s),this.Name=t,this.Specification=s,this.ListValues=i,this.Unit=r,this.type=2752243245}};e.IfcPropertyReferenceValue=class extends lo{constructor(e,t,s,i,r){super(e,t,s),this.Name=t,this.Specification=s,this.UsageName=i,this.PropertyReference=r,this.type=941946838}};e.IfcPropertySet=class extends so{constructor(e,t,s,i,r,o){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.HasProperties=o,this.type=1451395588}};e.IfcPropertySetTemplate=class extends io{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.TemplateType=o,this.ApplicableEntity=n,this.HasPropertyTemplates=a,this.type=492091185}};e.IfcPropertySingleValue=class extends lo{constructor(e,t,s,i,r){super(e,t,s),this.Name=t,this.Specification=s,this.NominalValue=i,this.Unit=r,this.type=3650150729}};e.IfcPropertyTableValue=class extends lo{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s),this.Name=t,this.Specification=s,this.DefiningValues=i,this.DefinedValues=r,this.Expression=o,this.DefiningUnit=n,this.DefinedUnit=a,this.CurveInterpolation=l,this.type=110355661}};class Zo extends io{constructor(e,t,s,i,r){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.type=3521284610}}e.IfcPropertyTemplate=Zo;e.IfcRectangleHollowProfileDef=class extends oo{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.XDim=r,this.YDim=o,this.WallThickness=n,this.InnerFilletRadius=a,this.OuterFilletRadius=l,this.type=2770003689}};e.IfcRectangularPyramid=class extends wo{constructor(e,t,s,i,r){super(e,t),this.Position=t,this.XLength=s,this.YLength=i,this.Height=r,this.type=2798486643}};e.IfcRectangularTrimmedSurface=class extends Po{constructor(e,t,s,i,r,o,n,a){super(e),this.BasisSurface=t,this.U1=s,this.V1=i,this.U2=r,this.V2=o,this.Usense=n,this.Vsense=a,this.type=3454111270}};e.IfcReinforcementDefinitionProperties=class extends Ko{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.DefinitionType=o,this.ReinforcementSectionDefinitions=n,this.type=3765753017}};class qo extends no{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatedObjectsType=n,this.type=3939117080}}e.IfcRelAssigns=qo;e.IfcRelAssignsToActor=class extends qo{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatedObjectsType=n,this.RelatingActor=a,this.ActingRole=l,this.type=1683148259}};e.IfcRelAssignsToControl=class extends qo{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatedObjectsType=n,this.RelatingControl=a,this.type=2495723537}};class Jo extends qo{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatedObjectsType=n,this.RelatingGroup=a,this.type=1307041759}}e.IfcRelAssignsToGroup=Jo;e.IfcRelAssignsToGroupByFactor=class extends Jo{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatedObjectsType=n,this.RelatingGroup=a,this.Factor=l,this.type=1027710054}};e.IfcRelAssignsToProcess=class extends qo{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatedObjectsType=n,this.RelatingProcess=a,this.QuantityInProcess=l,this.type=4278684876}};e.IfcRelAssignsToProduct=class extends qo{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatedObjectsType=n,this.RelatingProduct=a,this.type=2857406711}};e.IfcRelAssignsToResource=class extends qo{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatedObjectsType=n,this.RelatingResource=a,this.type=205026976}};class $o extends no{constructor(e,t,s,i,r,o){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.type=1865459582}}e.IfcRelAssociates=$o;e.IfcRelAssociatesApproval=class extends $o{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatingApproval=n,this.type=4095574036}};e.IfcRelAssociatesClassification=class extends $o{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatingClassification=n,this.type=919958153}};e.IfcRelAssociatesConstraint=class extends $o{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.Intent=n,this.RelatingConstraint=a,this.type=2728634034}};e.IfcRelAssociatesDocument=class extends $o{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatingDocument=n,this.type=982818633}};e.IfcRelAssociatesLibrary=class extends $o{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatingLibrary=n,this.type=3840914261}};e.IfcRelAssociatesMaterial=class extends $o{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatingMaterial=n,this.type=2655215786}};e.IfcRelAssociatesProfileDef=class extends $o{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatingProfileDef=n,this.type=1033248425}};class en extends no{constructor(e,t,s,i,r){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.type=826625072}}e.IfcRelConnects=en;class tn extends en{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ConnectionGeometry=o,this.RelatingElement=n,this.RelatedElement=a,this.type=1204542856}}e.IfcRelConnectsElements=tn;e.IfcRelConnectsPathElements=class extends tn{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ConnectionGeometry=o,this.RelatingElement=n,this.RelatedElement=a,this.RelatingPriorities=l,this.RelatedPriorities=h,this.RelatedConnectionType=c,this.RelatingConnectionType=u,this.type=3945020480}};e.IfcRelConnectsPortToElement=class extends en{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingPort=o,this.RelatedElement=n,this.type=4201705270}};e.IfcRelConnectsPorts=class extends en{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingPort=o,this.RelatedPort=n,this.RealizingElement=a,this.type=3190031847}};e.IfcRelConnectsStructuralActivity=class extends en{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingElement=o,this.RelatedStructuralActivity=n,this.type=2127690289}};class sn extends en{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingStructuralMember=o,this.RelatedStructuralConnection=n,this.AppliedCondition=a,this.AdditionalConditions=l,this.SupportedLength=h,this.ConditionCoordinateSystem=c,this.type=1638771189}}e.IfcRelConnectsStructuralMember=sn;e.IfcRelConnectsWithEccentricity=class extends sn{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingStructuralMember=o,this.RelatedStructuralConnection=n,this.AppliedCondition=a,this.AdditionalConditions=l,this.SupportedLength=h,this.ConditionCoordinateSystem=c,this.ConnectionConstraint=u,this.type=504942748}};e.IfcRelConnectsWithRealizingElements=class extends tn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ConnectionGeometry=o,this.RelatingElement=n,this.RelatedElement=a,this.RealizingElements=l,this.ConnectionType=h,this.type=3678494232}};e.IfcRelContainedInSpatialStructure=class extends en{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedElements=o,this.RelatingStructure=n,this.type=3242617779}};e.IfcRelCoversBldgElements=class extends en{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingBuildingElement=o,this.RelatedCoverings=n,this.type=886880790}};e.IfcRelCoversSpaces=class extends en{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingSpace=o,this.RelatedCoverings=n,this.type=2802773753}};e.IfcRelDeclares=class extends no{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingContext=o,this.RelatedDefinitions=n,this.type=2565941209}};class rn extends no{constructor(e,t,s,i,r){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.type=2551354335}}e.IfcRelDecomposes=rn;class on extends no{constructor(e,t,s,i,r){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.type=693640335}}e.IfcRelDefines=on;e.IfcRelDefinesByObject=class extends on{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatingObject=n,this.type=1462361463}};e.IfcRelDefinesByProperties=class extends on{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatingPropertyDefinition=n,this.type=4186316022}};e.IfcRelDefinesByTemplate=class extends on{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedPropertySets=o,this.RelatingTemplate=n,this.type=307848117}};e.IfcRelDefinesByType=class extends on{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedObjects=o,this.RelatingType=n,this.type=781010003}};e.IfcRelFillsElement=class extends en{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingOpeningElement=o,this.RelatedBuildingElement=n,this.type=3940055652}};e.IfcRelFlowControlElements=class extends en{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedControlElements=o,this.RelatingFlowElement=n,this.type=279856033}};e.IfcRelInterferesElements=class extends en{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingElement=o,this.RelatedElement=n,this.InterferenceGeometry=a,this.InterferenceSpace=l,this.InterferenceType=h,this.ImpliedOrder=c,this.type=427948657}};e.IfcRelNests=class extends rn{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingObject=o,this.RelatedObjects=n,this.type=3268803585}};e.IfcRelPositions=class extends en{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingPositioningElement=o,this.RelatedProducts=n,this.type=1441486842}};e.IfcRelProjectsElement=class extends rn{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingElement=o,this.RelatedFeatureElement=n,this.type=750771296}};e.IfcRelReferencedInSpatialStructure=class extends en{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatedElements=o,this.RelatingStructure=n,this.type=1245217292}};e.IfcRelSequence=class extends en{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingProcess=o,this.RelatedProcess=n,this.TimeLag=a,this.SequenceType=l,this.UserDefinedSequenceType=h,this.type=4122056220}};e.IfcRelServicesBuildings=class extends en{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingSystem=o,this.RelatedBuildings=n,this.type=366585022}};class nn extends en{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingSpace=o,this.RelatedBuildingElement=n,this.ConnectionGeometry=a,this.PhysicalOrVirtualBoundary=l,this.InternalOrExternalBoundary=h,this.type=3451746338}}e.IfcRelSpaceBoundary=nn;class an extends nn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingSpace=o,this.RelatedBuildingElement=n,this.ConnectionGeometry=a,this.PhysicalOrVirtualBoundary=l,this.InternalOrExternalBoundary=h,this.ParentBoundary=c,this.type=3523091289}}e.IfcRelSpaceBoundary1stLevel=an;e.IfcRelSpaceBoundary2ndLevel=class extends an{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingSpace=o,this.RelatedBuildingElement=n,this.ConnectionGeometry=a,this.PhysicalOrVirtualBoundary=l,this.InternalOrExternalBoundary=h,this.ParentBoundary=c,this.CorrespondingBoundary=u,this.type=1521410863}};e.IfcRelVoidsElement=class extends rn{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingBuildingElement=o,this.RelatedOpeningElement=n,this.type=1401173127}};e.IfcReparametrisedCompositeCurveSegment=class extends No{constructor(e,t,s,i,r){super(e,t,s,i),this.Transition=t,this.SameSense=s,this.ParentCurve=i,this.ParamLength=r,this.type=816062949}};class ln extends jo{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.LongDescription=a,this.type=2914609552}}e.IfcResource=ln;class hn extends po{constructor(e,t,s,i,r){super(e,t,s),this.SweptArea=t,this.Position=s,this.Axis=i,this.Angle=r,this.type=1856042241}}e.IfcRevolvedAreaSolid=hn;e.IfcRevolvedAreaSolidTapered=class extends hn{constructor(e,t,s,i,r,o){super(e,t,s,i,r),this.SweptArea=t,this.Position=s,this.Axis=i,this.Angle=r,this.EndSweptArea=o,this.type=3243963512}};e.IfcRightCircularCone=class extends wo{constructor(e,t,s,i){super(e,t),this.Position=t,this.Height=s,this.BottomRadius=i,this.type=4158566097}};e.IfcRightCircularCylinder=class extends wo{constructor(e,t,s,i){super(e,t),this.Position=t,this.Height=s,this.Radius=i,this.type=3626867408}};class cn extends ho{constructor(e,t,s){super(e),this.Directrix=t,this.CrossSections=s,this.type=1862484736}}e.IfcSectionedSolid=cn;e.IfcSectionedSolidHorizontal=class extends cn{constructor(e,t,s,i){super(e,t,s),this.Directrix=t,this.CrossSections=s,this.CrossSectionPositions=i,this.type=1290935644}};e.IfcSectionedSurface=class extends Ao{constructor(e,t,s,i){super(e),this.Directrix=t,this.CrossSectionPositions=s,this.CrossSections=i,this.type=1356537516}};e.IfcSimplePropertyTemplate=class extends Zo{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.TemplateType=o,this.PrimaryMeasureType=n,this.SecondaryMeasureType=a,this.Enumerators=l,this.PrimaryUnit=h,this.SecondaryUnit=c,this.Expression=u,this.AccessState=A,this.type=3663146110}};class un extends Xo{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.type=1412071761}}e.IfcSpatialElement=un;class An extends _o{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=710998568}}e.IfcSpatialElementType=An;class pn extends un{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.CompositionType=h,this.type=2706606064}}e.IfcSpatialStructureElement=pn;class dn extends An{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=3893378262}}e.IfcSpatialStructureElementType=dn;e.IfcSpatialZone=class extends un{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.PredefinedType=h,this.type=463610769}};e.IfcSpatialZoneType=class extends An{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.LongName=u,this.type=2481509218}};e.IfcSphere=class extends wo{constructor(e,t,s){super(e,t),this.Position=t,this.Radius=s,this.type=451544542}};e.IfcSphericalSurface=class extends Lo{constructor(e,t,s){super(e,t),this.Position=t,this.Radius=s,this.type=4015995234}};class fn extends Mo{constructor(e,t){super(e),this.Position=t,this.type=2735484536}}e.IfcSpiral=fn;class mn extends Xo{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedLoad=l,this.GlobalOrLocal=h,this.type=3544373492}}e.IfcStructuralActivity=mn;class gn extends Xo{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.type=3136571912}}e.IfcStructuralItem=gn;class yn extends gn{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.type=530289379}}e.IfcStructuralMember=yn;class En extends mn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedLoad=l,this.GlobalOrLocal=h,this.type=3689010777}}e.IfcStructuralReaction=En;class vn extends yn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.PredefinedType=l,this.Thickness=h,this.type=3979015343}}e.IfcStructuralSurfaceMember=vn;e.IfcStructuralSurfaceMemberVarying=class extends vn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.PredefinedType=l,this.Thickness=h,this.type=2218152070}};e.IfcStructuralSurfaceReaction=class extends En{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedLoad=l,this.GlobalOrLocal=h,this.PredefinedType=c,this.type=603775116}};e.IfcSubContractResourceType=class extends Oo{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l,h,c,u),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.Identification=a,this.LongDescription=l,this.ResourceType=h,this.BaseCosts=c,this.BaseQuantity=u,this.PredefinedType=A,this.type=4095615324}};class _n extends Mo{constructor(e,t,s,i){super(e),this.Curve3D=t,this.AssociatedGeometry=s,this.MasterRepresentation=i,this.type=699246055}}e.IfcSurfaceCurve=_n;e.IfcSurfaceCurveSweptAreaSolid=class extends Bo{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.SweptArea=t,this.Position=s,this.Directrix=i,this.StartParam=r,this.EndParam=o,this.ReferenceSurface=n,this.type=2028607225}};e.IfcSurfaceOfLinearExtrusion=class extends mo{constructor(e,t,s,i,r){super(e,t,s),this.SweptCurve=t,this.Position=s,this.ExtrudedDirection=i,this.Depth=r,this.type=2809605785}};e.IfcSurfaceOfRevolution=class extends mo{constructor(e,t,s,i){super(e,t,s),this.SweptCurve=t,this.Position=s,this.AxisPosition=i,this.type=4124788165}};e.IfcSystemFurnitureElementType=class extends Go{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1580310250}};e.IfcTask=class extends Yo{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.LongDescription=a,this.Status=l,this.WorkMethod=h,this.IsMilestone=c,this.Priority=u,this.TaskTime=A,this.PredefinedType=p,this.type=3473067441}};e.IfcTaskType=class extends vo{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.Identification=a,this.LongDescription=l,this.ProcessType=h,this.PredefinedType=c,this.WorkMethod=u,this.type=3206491090}};class In extends go{constructor(e,t,s){super(e),this.Coordinates=t,this.Closed=s,this.type=2387106220}}e.IfcTessellatedFaceSet=In;e.IfcThirdOrderPolynomialSpiral=class extends fn{constructor(e,t,s,i,r,o){super(e,t),this.Position=t,this.CubicTerm=s,this.QuadraticTerm=i,this.LinearTerm=r,this.ConstantTerm=o,this.type=782932809}};e.IfcToroidalSurface=class extends Lo{constructor(e,t,s,i){super(e,t),this.Position=t,this.MajorRadius=s,this.MinorRadius=i,this.type=1935646853}};class Tn extends Fo{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=3665877780}}e.IfcTransportationDeviceType=Tn;class Pn extends In{constructor(e,t,s,i,r,o){super(e,t,s),this.Coordinates=t,this.Closed=s,this.Normals=i,this.CoordIndex=r,this.PnIndex=o,this.type=2916149573}}e.IfcTriangulatedFaceSet=Pn;e.IfcTriangulatedIrregularNetwork=class extends Pn{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.Coordinates=t,this.Closed=s,this.Normals=i,this.CoordIndex=r,this.PnIndex=o,this.Flags=n,this.type=1229763772}};e.IfcVehicleType=class extends Tn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3651464721}};e.IfcWindowLiningProperties=class extends Ko{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f,m){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.LiningDepth=o,this.LiningThickness=n,this.TransomThickness=a,this.MullionThickness=l,this.FirstTransomOffset=h,this.SecondTransomOffset=c,this.FirstMullionOffset=u,this.SecondMullionOffset=A,this.ShapeAspectStyle=p,this.LiningOffset=d,this.LiningToPanelOffsetX=f,this.LiningToPanelOffsetY=m,this.type=336235671}};e.IfcWindowPanelProperties=class extends Ko{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.OperationType=o,this.PanelPosition=n,this.FrameDepth=a,this.FrameThickness=l,this.ShapeAspectStyle=h,this.type=512836454}};class Dn extends jo{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.TheActor=n,this.type=2296667514}}e.IfcActor=Dn;class bn extends ko{constructor(e,t){super(e,t),this.Outer=t,this.type=1635779807}}e.IfcAdvancedBrep=bn;e.IfcAdvancedBrepWithVoids=class extends bn{constructor(e,t,s){super(e,t),this.Outer=t,this.Voids=s,this.type=2603310189}};e.IfcAnnotation=class extends Xo{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.PredefinedType=l,this.type=1674181508}};class Rn extends Po{constructor(e,t,s,i,r,o,n,a){super(e),this.UDegree=t,this.VDegree=s,this.ControlPointsList=i,this.SurfaceForm=r,this.UClosed=o,this.VClosed=n,this.SelfIntersect=a,this.type=2887950389}}e.IfcBSplineSurface=Rn;class Cn extends Rn{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a),this.UDegree=t,this.VDegree=s,this.ControlPointsList=i,this.SurfaceForm=r,this.UClosed=o,this.VClosed=n,this.SelfIntersect=a,this.UMultiplicities=l,this.VMultiplicities=h,this.UKnots=c,this.VKnots=u,this.KnotSpec=A,this.type=167062518}}e.IfcBSplineSurfaceWithKnots=Cn;e.IfcBlock=class extends wo{constructor(e,t,s,i,r){super(e,t),this.Position=t,this.XLength=s,this.YLength=i,this.ZLength=r,this.type=1334484129}};e.IfcBooleanClippingResult=class extends To{constructor(e,t,s,i){super(e,t,s,i),this.Operator=t,this.FirstOperand=s,this.SecondOperand=i,this.type=3649129432}};class xn extends Mo{constructor(e){super(e),this.type=1260505505}}e.IfcBoundedCurve=xn;e.IfcBuildingStorey=class extends pn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.CompositionType=h,this.Elevation=c,this.type=3124254112}};class Nn extends Fo{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=1626504194}}e.IfcBuiltElementType=Nn;e.IfcChimneyType=class extends Nn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2197970202}};e.IfcCircleHollowProfileDef=class extends xo{constructor(e,t,s,i,r,o){super(e,t,s,i,r),this.ProfileType=t,this.ProfileName=s,this.Position=i,this.Radius=r,this.WallThickness=o,this.type=2937912522}};e.IfcCivilElementType=class extends Fo{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=3893394355}};e.IfcClothoid=class extends fn{constructor(e,t,s){super(e,t),this.Position=t,this.ClothoidConstant=s,this.type=3497074424}};e.IfcColumnType=class extends Nn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=300633059}};e.IfcComplexPropertyTemplate=class extends Zo{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.UsageName=o,this.TemplateType=n,this.HasPropertyTemplates=a,this.type=3875453745}};class On extends xn{constructor(e,t,s){super(e),this.Segments=t,this.SelfIntersect=s,this.type=3732776249}}e.IfcCompositeCurve=On;class Sn extends On{constructor(e,t,s){super(e,t,s),this.Segments=t,this.SelfIntersect=s,this.type=15328376}}e.IfcCompositeCurveOnSurface=Sn;class wn extends Mo{constructor(e,t){super(e),this.Position=t,this.type=2510884976}}e.IfcConic=wn;e.IfcConstructionEquipmentResourceType=class extends Oo{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l,h,c,u),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.Identification=a,this.LongDescription=l,this.ResourceType=h,this.BaseCosts=c,this.BaseQuantity=u,this.PredefinedType=A,this.type=2185764099}};e.IfcConstructionMaterialResourceType=class extends Oo{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l,h,c,u),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.Identification=a,this.LongDescription=l,this.ResourceType=h,this.BaseCosts=c,this.BaseQuantity=u,this.PredefinedType=A,this.type=4105962743}};e.IfcConstructionProductResourceType=class extends Oo{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l,h,c,u),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.Identification=a,this.LongDescription=l,this.ResourceType=h,this.BaseCosts=c,this.BaseQuantity=u,this.PredefinedType=A,this.type=1525564444}};class Mn extends ln{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.LongDescription=a,this.Usage=l,this.BaseCosts=h,this.BaseQuantity=c,this.type=2559216714}}e.IfcConstructionResource=Mn;class Bn extends jo{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.type=3293443760}}e.IfcControl=Bn;e.IfcCosineSpiral=class extends fn{constructor(e,t,s,i){super(e,t),this.Position=t,this.CosineTerm=s,this.ConstantTerm=i,this.type=2000195564}};e.IfcCostItem=class extends Bn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.PredefinedType=a,this.CostValues=l,this.CostQuantities=h,this.type=3895139033}};e.IfcCostSchedule=class extends Bn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.PredefinedType=a,this.Status=l,this.SubmittedOn=h,this.UpdateDate=c,this.type=1419761937}};e.IfcCourseType=class extends Nn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=4189326743}};e.IfcCoveringType=class extends Nn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1916426348}};e.IfcCrewResource=class extends Mn{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.LongDescription=a,this.Usage=l,this.BaseCosts=h,this.BaseQuantity=c,this.PredefinedType=u,this.type=3295246426}};e.IfcCurtainWallType=class extends Nn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1457835157}};e.IfcCylindricalSurface=class extends Lo{constructor(e,t,s){super(e,t),this.Position=t,this.Radius=s,this.type=1213902940}};class Fn extends Nn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=1306400036}}e.IfcDeepFoundationType=Fn;e.IfcDirectrixDerivedReferenceSweptAreaSolid=class extends Ho{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o,n),this.SweptArea=t,this.Position=s,this.Directrix=i,this.StartParam=r,this.EndParam=o,this.FixedReference=n,this.type=4234616927}};class Ln extends Fo{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=3256556792}}e.IfcDistributionElementType=Ln;class Un extends Ln{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=3849074793}}e.IfcDistributionFlowElementType=Un;e.IfcDoorLiningProperties=class extends Ko{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f,m,g){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.LiningDepth=o,this.LiningThickness=n,this.ThresholdDepth=a,this.ThresholdThickness=l,this.TransomThickness=h,this.TransomOffset=c,this.LiningOffset=u,this.ThresholdOffset=A,this.CasingThickness=p,this.CasingDepth=d,this.ShapeAspectStyle=f,this.LiningToPanelOffsetX=m,this.LiningToPanelOffsetY=g,this.type=2963535650}};e.IfcDoorPanelProperties=class extends Ko{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.PanelDepth=o,this.PanelOperation=n,this.PanelWidth=a,this.PanelPosition=l,this.ShapeAspectStyle=h,this.type=1714330368}};e.IfcDoorType=class extends Nn{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.OperationType=u,this.ParameterTakesPrecedence=A,this.UserDefinedOperationType=p,this.type=2323601079}};e.IfcDraughtingPreDefinedColour=class extends Wo{constructor(e,t){super(e,t),this.Name=t,this.type=445594917}};e.IfcDraughtingPreDefinedCurveFont=class extends zo{constructor(e,t){super(e,t),this.Name=t,this.type=4006246654}};class Hn extends Xo{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=1758889154}}e.IfcElement=Hn;e.IfcElementAssembly=class extends Hn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.AssemblyPlace=h,this.PredefinedType=c,this.type=4123344466}};e.IfcElementAssemblyType=class extends Fo{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2397081782}};class Gn extends Hn{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=1623761950}}e.IfcElementComponent=Gn;class Vn extends Fo{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=2590856083}}e.IfcElementComponentType=Vn;e.IfcEllipse=class extends wn{constructor(e,t,s,i){super(e,t),this.Position=t,this.SemiAxis1=s,this.SemiAxis2=i,this.type=1704287377}};class kn extends Un{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=2107101300}}e.IfcEnergyConversionDeviceType=kn;e.IfcEngineType=class extends kn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=132023988}};e.IfcEvaporativeCoolerType=class extends kn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3174744832}};e.IfcEvaporatorType=class extends kn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3390157468}};e.IfcEvent=class extends Yo{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.LongDescription=a,this.PredefinedType=l,this.EventTriggerType=h,this.UserDefinedEventTriggerType=c,this.EventOccurenceTime=u,this.type=4148101412}};class jn extends un{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.type=2853485674}}e.IfcExternalSpatialStructureElement=jn;class Qn extends ko{constructor(e,t){super(e,t),this.Outer=t,this.type=807026263}}e.IfcFacetedBrep=Qn;e.IfcFacetedBrepWithVoids=class extends Qn{constructor(e,t,s){super(e,t),this.Outer=t,this.Voids=s,this.type=3737207727}};class Wn extends pn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.CompositionType=h,this.type=24185140}}e.IfcFacility=Wn;class zn extends pn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.CompositionType=h,this.UsageType=c,this.type=1310830890}}e.IfcFacilityPart=zn;e.IfcFacilityPartCommon=class extends zn{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.CompositionType=h,this.UsageType=c,this.PredefinedType=u,this.type=4228831410}};e.IfcFastener=class extends Gn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=647756555}};e.IfcFastenerType=class extends Vn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2489546625}};class Kn extends Hn{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=2827207264}}e.IfcFeatureElement=Kn;class Yn extends Kn{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=2143335405}}e.IfcFeatureElementAddition=Yn;class Xn extends Kn{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=1287392070}}e.IfcFeatureElementSubtraction=Xn;class Zn extends Un{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=3907093117}}e.IfcFlowControllerType=Zn;class qn extends Un{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=3198132628}}e.IfcFlowFittingType=qn;e.IfcFlowMeterType=class extends Zn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3815607619}};class Jn extends Un{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=1482959167}}e.IfcFlowMovingDeviceType=Jn;class $n extends Un{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=1834744321}}e.IfcFlowSegmentType=$n;class ea extends Un{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=1339347760}}e.IfcFlowStorageDeviceType=ea;class ta extends Un{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=2297155007}}e.IfcFlowTerminalType=ta;class sa extends Un{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=3009222698}}e.IfcFlowTreatmentDeviceType=sa;e.IfcFootingType=class extends Nn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1893162501}};class ia extends Hn{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=263784265}}e.IfcFurnishingElement=ia;e.IfcFurniture=class extends ia{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1509553395}};e.IfcGeographicElement=class extends Hn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3493046030}};class ra extends Hn{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=4230923436}}e.IfcGeotechnicalElement=ra;e.IfcGeotechnicalStratum=class extends ra{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1594536857}};e.IfcGradientCurve=class extends On{constructor(e,t,s,i,r){super(e,t,s),this.Segments=t,this.SelfIntersect=s,this.BaseCurve=i,this.EndPoint=r,this.type=2898700619}};class oa extends jo{constructor(e,t,s,i,r,o){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.type=2706460486}}e.IfcGroup=oa;e.IfcHeatExchangerType=class extends kn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1251058090}};e.IfcHumidifierType=class extends kn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1806887404}};e.IfcImpactProtectionDevice=class extends Gn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2568555532}};e.IfcImpactProtectionDeviceType=class extends Vn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3948183225}};e.IfcIndexedPolyCurve=class extends xn{constructor(e,t,s,i){super(e),this.Points=t,this.Segments=s,this.SelfIntersect=i,this.type=2571569899}};e.IfcInterceptorType=class extends sa{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3946677679}};e.IfcIntersectionCurve=class extends _n{constructor(e,t,s,i){super(e,t,s,i),this.Curve3D=t,this.AssociatedGeometry=s,this.MasterRepresentation=i,this.type=3113134337}};e.IfcInventory=class extends oa{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.PredefinedType=n,this.Jurisdiction=a,this.ResponsiblePersons=l,this.LastUpdateDate=h,this.CurrentValue=c,this.OriginalValue=u,this.type=2391368822}};e.IfcJunctionBoxType=class extends qn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=4288270099}};e.IfcKerbType=class extends Nn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.Mountable=c,this.type=679976338}};e.IfcLaborResource=class extends Mn{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.LongDescription=a,this.Usage=l,this.BaseCosts=h,this.BaseQuantity=c,this.PredefinedType=u,this.type=3827777499}};e.IfcLampType=class extends ta{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1051575348}};e.IfcLightFixtureType=class extends ta{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1161773419}};class na extends Xo{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.type=2176059722}}e.IfcLinearElement=na;e.IfcLiquidTerminalType=class extends ta{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1770583370}};e.IfcMarineFacility=class extends Wn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.CompositionType=h,this.PredefinedType=c,this.type=525669439}};e.IfcMarinePart=class extends zn{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.CompositionType=h,this.UsageType=c,this.PredefinedType=u,this.type=976884017}};e.IfcMechanicalFastener=class extends Gn{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.NominalDiameter=h,this.NominalLength=c,this.PredefinedType=u,this.type=377706215}};e.IfcMechanicalFastenerType=class extends Vn{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.NominalDiameter=u,this.NominalLength=A,this.type=2108223431}};e.IfcMedicalDeviceType=class extends ta{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1114901282}};e.IfcMemberType=class extends Nn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3181161470}};e.IfcMobileTelecommunicationsApplianceType=class extends ta{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1950438474}};e.IfcMooringDeviceType=class extends Nn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=710110818}};e.IfcMotorConnectionType=class extends kn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=977012517}};e.IfcNavigationElementType=class extends Nn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=506776471}};e.IfcOccupant=class extends Dn{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.TheActor=n,this.PredefinedType=a,this.type=4143007308}};e.IfcOpeningElement=class extends Xn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3588315303}};e.IfcOutletType=class extends ta{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2837617999}};e.IfcPavementType=class extends Nn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=514975943}};e.IfcPerformanceHistory=class extends Bn{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.LifeCyclePhase=a,this.PredefinedType=l,this.type=2382730787}};e.IfcPermeableCoveringProperties=class extends Ko{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.OperationType=o,this.PanelPosition=n,this.FrameDepth=a,this.FrameThickness=l,this.ShapeAspectStyle=h,this.type=3566463478}};e.IfcPermit=class extends Bn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.PredefinedType=a,this.Status=l,this.LongDescription=h,this.type=3327091369}};e.IfcPileType=class extends Fn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1158309216}};e.IfcPipeFittingType=class extends qn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=804291784}};e.IfcPipeSegmentType=class extends $n{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=4231323485}};e.IfcPlateType=class extends Nn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=4017108033}};e.IfcPolygonalFaceSet=class extends In{constructor(e,t,s,i,r){super(e,t,s),this.Coordinates=t,this.Closed=s,this.Faces=i,this.PnIndex=r,this.type=2839578677}};e.IfcPolyline=class extends xn{constructor(e,t){super(e),this.Points=t,this.type=3724593414}};class aa extends Xo{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.type=3740093272}}e.IfcPort=aa;class la extends Xo{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.type=1946335990}}e.IfcPositioningElement=la;e.IfcProcedure=class extends Yo{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.LongDescription=a,this.PredefinedType=l,this.type=2744685151}};e.IfcProjectOrder=class extends Bn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.PredefinedType=a,this.Status=l,this.LongDescription=h,this.type=2904328755}};e.IfcProjectionElement=class extends Yn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3651124850}};e.IfcProtectiveDeviceType=class extends Zn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1842657554}};e.IfcPumpType=class extends Jn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2250791053}};e.IfcRailType=class extends Nn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1763565496}};e.IfcRailingType=class extends Nn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2893384427}};e.IfcRailway=class extends Wn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.CompositionType=h,this.PredefinedType=c,this.type=3992365140}};e.IfcRailwayPart=class extends zn{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.CompositionType=h,this.UsageType=c,this.PredefinedType=u,this.type=1891881377}};e.IfcRampFlightType=class extends Nn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2324767716}};e.IfcRampType=class extends Nn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1469900589}};e.IfcRationalBSplineSurfaceWithKnots=class extends Cn{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p){super(e,t,s,i,r,o,n,a,l,h,c,u,A),this.UDegree=t,this.VDegree=s,this.ControlPointsList=i,this.SurfaceForm=r,this.UClosed=o,this.VClosed=n,this.SelfIntersect=a,this.UMultiplicities=l,this.VMultiplicities=h,this.UKnots=c,this.VKnots=u,this.KnotSpec=A,this.WeightsData=p,this.type=683857671}};e.IfcReferent=class extends la{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.PredefinedType=l,this.type=4021432810}};class ha extends Gn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.SteelGrade=h,this.type=3027567501}}e.IfcReinforcingElement=ha;class ca extends Vn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=964333572}}e.IfcReinforcingElementType=ca;e.IfcReinforcingMesh=class extends ha{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f,m,g,y){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.SteelGrade=h,this.MeshLength=c,this.MeshWidth=u,this.LongitudinalBarNominalDiameter=A,this.TransverseBarNominalDiameter=p,this.LongitudinalBarCrossSectionArea=d,this.TransverseBarCrossSectionArea=f,this.LongitudinalBarSpacing=m,this.TransverseBarSpacing=g,this.PredefinedType=y,this.type=2320036040}};e.IfcReinforcingMeshType=class extends ca{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f,m,g,y,E,v){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.MeshLength=u,this.MeshWidth=A,this.LongitudinalBarNominalDiameter=p,this.TransverseBarNominalDiameter=d,this.LongitudinalBarCrossSectionArea=f,this.TransverseBarCrossSectionArea=m,this.LongitudinalBarSpacing=g,this.TransverseBarSpacing=y,this.BendingShapeCode=E,this.BendingParameters=v,this.type=2310774935}};e.IfcRelAdheresToElement=class extends rn{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingElement=o,this.RelatedSurfaceFeatures=n,this.type=3818125796}};e.IfcRelAggregates=class extends rn{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.RelatingObject=o,this.RelatedObjects=n,this.type=160246688}};e.IfcRoad=class extends Wn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.CompositionType=h,this.PredefinedType=c,this.type=146592293}};e.IfcRoadPart=class extends zn{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.CompositionType=h,this.UsageType=c,this.PredefinedType=u,this.type=550521510}};e.IfcRoofType=class extends Nn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2781568857}};e.IfcSanitaryTerminalType=class extends ta{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1768891740}};e.IfcSeamCurve=class extends _n{constructor(e,t,s,i){super(e,t,s,i),this.Curve3D=t,this.AssociatedGeometry=s,this.MasterRepresentation=i,this.type=2157484638}};e.IfcSecondOrderPolynomialSpiral=class extends fn{constructor(e,t,s,i,r){super(e,t),this.Position=t,this.QuadraticTerm=s,this.LinearTerm=i,this.ConstantTerm=r,this.type=3649235739}};e.IfcSegmentedReferenceCurve=class extends On{constructor(e,t,s,i,r){super(e,t,s),this.Segments=t,this.SelfIntersect=s,this.BaseCurve=i,this.EndPoint=r,this.type=544395925}};e.IfcSeventhOrderPolynomialSpiral=class extends fn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t),this.Position=t,this.SepticTerm=s,this.SexticTerm=i,this.QuinticTerm=r,this.QuarticTerm=o,this.CubicTerm=n,this.QuadraticTerm=a,this.LinearTerm=l,this.ConstantTerm=h,this.type=1027922057}};e.IfcShadingDeviceType=class extends Nn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=4074543187}};e.IfcSign=class extends Gn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=33720170}};e.IfcSignType=class extends Vn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3599934289}};e.IfcSignalType=class extends ta{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1894708472}};e.IfcSineSpiral=class extends fn{constructor(e,t,s,i,r){super(e,t),this.Position=t,this.SineTerm=s,this.LinearTerm=i,this.ConstantTerm=r,this.type=42703149}};e.IfcSite=class extends pn{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.CompositionType=h,this.RefLatitude=c,this.RefLongitude=u,this.RefElevation=A,this.LandTitleNumber=p,this.SiteAddress=d,this.type=4097777520}};e.IfcSlabType=class extends Nn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2533589738}};e.IfcSolarDeviceType=class extends kn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1072016465}};e.IfcSpace=class extends pn{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.CompositionType=h,this.PredefinedType=c,this.ElevationWithFlooring=u,this.type=3856911033}};e.IfcSpaceHeaterType=class extends ta{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1305183839}};e.IfcSpaceType=class extends dn{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.LongName=u,this.type=3812236995}};e.IfcStackTerminalType=class extends ta{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3112655638}};e.IfcStairFlightType=class extends Nn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1039846685}};e.IfcStairType=class extends Nn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=338393293}};class ua extends mn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedLoad=l,this.GlobalOrLocal=h,this.DestabilizingLoad=c,this.type=682877961}}e.IfcStructuralAction=ua;class Aa extends gn{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedCondition=l,this.type=1179482911}}e.IfcStructuralConnection=Aa;class pa extends ua{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedLoad=l,this.GlobalOrLocal=h,this.DestabilizingLoad=c,this.ProjectedOrTrue=u,this.PredefinedType=A,this.type=1004757350}}e.IfcStructuralCurveAction=pa;e.IfcStructuralCurveConnection=class extends Aa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedCondition=l,this.AxisDirection=h,this.type=4243806635}};class da extends yn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.PredefinedType=l,this.Axis=h,this.type=214636428}}e.IfcStructuralCurveMember=da;e.IfcStructuralCurveMemberVarying=class extends da{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.PredefinedType=l,this.Axis=h,this.type=2445595289}};e.IfcStructuralCurveReaction=class extends En{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedLoad=l,this.GlobalOrLocal=h,this.PredefinedType=c,this.type=2757150158}};e.IfcStructuralLinearAction=class extends pa{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l,h,c,u,A),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedLoad=l,this.GlobalOrLocal=h,this.DestabilizingLoad=c,this.ProjectedOrTrue=u,this.PredefinedType=A,this.type=1807405624}};class fa extends oa{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.PredefinedType=n,this.ActionType=a,this.ActionSource=l,this.Coefficient=h,this.Purpose=c,this.type=1252848954}}e.IfcStructuralLoadGroup=fa;e.IfcStructuralPointAction=class extends ua{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedLoad=l,this.GlobalOrLocal=h,this.DestabilizingLoad=c,this.type=2082059205}};e.IfcStructuralPointConnection=class extends Aa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedCondition=l,this.ConditionCoordinateSystem=h,this.type=734778138}};e.IfcStructuralPointReaction=class extends En{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedLoad=l,this.GlobalOrLocal=h,this.type=1235345126}};e.IfcStructuralResultGroup=class extends oa{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.TheoryType=n,this.ResultForLoadGroup=a,this.IsLinear=l,this.type=2986769608}};class ma extends ua{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedLoad=l,this.GlobalOrLocal=h,this.DestabilizingLoad=c,this.ProjectedOrTrue=u,this.PredefinedType=A,this.type=3657597509}}e.IfcStructuralSurfaceAction=ma;e.IfcStructuralSurfaceConnection=class extends Aa{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedCondition=l,this.type=1975003073}};e.IfcSubContractResource=class extends Mn{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.LongDescription=a,this.Usage=l,this.BaseCosts=h,this.BaseQuantity=c,this.PredefinedType=u,this.type=148013059}};e.IfcSurfaceFeature=class extends Kn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3101698114}};e.IfcSwitchingDeviceType=class extends Zn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2315554128}};class ga extends oa{constructor(e,t,s,i,r,o){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.type=2254336722}}e.IfcSystem=ga;e.IfcSystemFurnitureElement=class extends ia{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=413509423}};e.IfcTankType=class extends ea{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=5716631}};e.IfcTendon=class extends ha{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f,m,g){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.SteelGrade=h,this.PredefinedType=c,this.NominalDiameter=u,this.CrossSectionArea=A,this.TensionForce=p,this.PreStress=d,this.FrictionCoefficient=f,this.AnchorageSlip=m,this.MinCurvatureRadius=g,this.type=3824725483}};e.IfcTendonAnchor=class extends ha{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.SteelGrade=h,this.PredefinedType=c,this.type=2347447852}};e.IfcTendonAnchorType=class extends ca{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3081323446}};e.IfcTendonConduit=class extends ha{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.SteelGrade=h,this.PredefinedType=c,this.type=3663046924}};e.IfcTendonConduitType=class extends ca{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2281632017}};e.IfcTendonType=class extends ca{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.NominalDiameter=u,this.CrossSectionArea=A,this.SheathDiameter=p,this.type=2415094496}};e.IfcTrackElementType=class extends Nn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=618700268}};e.IfcTransformerType=class extends kn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1692211062}};e.IfcTransportElementType=class extends Tn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2097647324}};class ya extends Hn{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=1953115116}}e.IfcTransportationDevice=ya;e.IfcTrimmedCurve=class extends xn{constructor(e,t,s,i,r,o){super(e),this.BasisCurve=t,this.Trim1=s,this.Trim2=i,this.SenseAgreement=r,this.MasterRepresentation=o,this.type=3593883385}};e.IfcTubeBundleType=class extends kn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1600972822}};e.IfcUnitaryEquipmentType=class extends kn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1911125066}};e.IfcValveType=class extends Zn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=728799441}};e.IfcVehicle=class extends ya{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=840318589}};e.IfcVibrationDamper=class extends Gn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1530820697}};e.IfcVibrationDamperType=class extends Vn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3956297820}};e.IfcVibrationIsolator=class extends Gn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2391383451}};e.IfcVibrationIsolatorType=class extends Vn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3313531582}};e.IfcVirtualElement=class extends Hn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2769231204}};e.IfcVoidingFeature=class extends Xn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=926996030}};e.IfcWallType=class extends Nn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1898987631}};e.IfcWasteTerminalType=class extends ta{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1133259667}};e.IfcWindowType=class extends Nn{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.PartitioningType=u,this.ParameterTakesPrecedence=A,this.UserDefinedPartitioningType=p,this.type=4009809668}};e.IfcWorkCalendar=class extends Bn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.WorkingTimes=a,this.ExceptionTimes=l,this.PredefinedType=h,this.type=4088093105}};class Ea extends Bn{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.CreationDate=a,this.Creators=l,this.Purpose=h,this.Duration=c,this.TotalFloat=u,this.StartTime=A,this.FinishTime=p,this.type=1028945134}}e.IfcWorkControl=Ea;e.IfcWorkPlan=class extends Ea{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d){super(e,t,s,i,r,o,n,a,l,h,c,u,A,p),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.CreationDate=a,this.Creators=l,this.Purpose=h,this.Duration=c,this.TotalFloat=u,this.StartTime=A,this.FinishTime=p,this.PredefinedType=d,this.type=4218914973}};e.IfcWorkSchedule=class extends Ea{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d){super(e,t,s,i,r,o,n,a,l,h,c,u,A,p),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.CreationDate=a,this.Creators=l,this.Purpose=h,this.Duration=c,this.TotalFloat=u,this.StartTime=A,this.FinishTime=p,this.PredefinedType=d,this.type=3342526732}};e.IfcZone=class extends ga{constructor(e,t,s,i,r,o,n){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.LongName=n,this.type=1033361043}};e.IfcActionRequest=class extends Bn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.PredefinedType=a,this.Status=l,this.LongDescription=h,this.type=3821786052}};e.IfcAirTerminalBoxType=class extends Zn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1411407467}};e.IfcAirTerminalType=class extends ta{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3352864051}};e.IfcAirToAirHeatRecoveryType=class extends kn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1871374353}};e.IfcAlignmentCant=class extends na{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.RailHeadDistance=l,this.type=4266260250}};e.IfcAlignmentHorizontal=class extends na{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.type=1545765605}};e.IfcAlignmentSegment=class extends na{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.DesignParameters=l,this.type=317615605}};e.IfcAlignmentVertical=class extends na{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.type=1662888072}};e.IfcAsset=class extends oa{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.OriginalValue=a,this.CurrentValue=l,this.TotalReplacementCost=h,this.Owner=c,this.User=u,this.ResponsiblePerson=A,this.IncorporationDate=p,this.DepreciatedValue=d,this.type=3460190687}};e.IfcAudioVisualApplianceType=class extends ta{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1532957894}};class va extends xn{constructor(e,t,s,i,r,o){super(e),this.Degree=t,this.ControlPointsList=s,this.CurveForm=i,this.ClosedCurve=r,this.SelfIntersect=o,this.type=1967976161}}e.IfcBSplineCurve=va;class _a extends va{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o),this.Degree=t,this.ControlPointsList=s,this.CurveForm=i,this.ClosedCurve=r,this.SelfIntersect=o,this.KnotMultiplicities=n,this.Knots=a,this.KnotSpec=l,this.type=2461110595}}e.IfcBSplineCurveWithKnots=_a;e.IfcBeamType=class extends Nn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=819618141}};e.IfcBearingType=class extends Nn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3649138523}};e.IfcBoilerType=class extends kn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=231477066}};class Ia extends Sn{constructor(e,t,s){super(e,t,s),this.Segments=t,this.SelfIntersect=s,this.type=1136057603}}e.IfcBoundaryCurve=Ia;e.IfcBridge=class extends Wn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.CompositionType=h,this.PredefinedType=c,this.type=644574406}};e.IfcBridgePart=class extends zn{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.CompositionType=h,this.UsageType=c,this.PredefinedType=u,this.type=963979645}};e.IfcBuilding=class extends Wn{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.CompositionType=h,this.ElevationOfRefHeight=c,this.ElevationOfTerrain=u,this.BuildingAddress=A,this.type=4031249490}};e.IfcBuildingElementPart=class extends Gn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2979338954}};e.IfcBuildingElementPartType=class extends Vn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=39481116}};e.IfcBuildingElementProxyType=class extends Nn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1909888760}};e.IfcBuildingSystem=class extends ga{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.PredefinedType=n,this.LongName=a,this.type=1177604601}};class Ta extends Hn{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=1876633798}}e.IfcBuiltElement=Ta;e.IfcBuiltSystem=class extends ga{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.PredefinedType=n,this.LongName=a,this.type=3862327254}};e.IfcBurnerType=class extends kn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2188180465}};e.IfcCableCarrierFittingType=class extends qn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=395041908}};e.IfcCableCarrierSegmentType=class extends $n{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3293546465}};e.IfcCableFittingType=class extends qn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2674252688}};e.IfcCableSegmentType=class extends $n{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1285652485}};e.IfcCaissonFoundationType=class extends Fn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3203706013}};e.IfcChillerType=class extends kn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2951183804}};e.IfcChimney=class extends Ta{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3296154744}};e.IfcCircle=class extends wn{constructor(e,t,s){super(e,t),this.Position=t,this.Radius=s,this.type=2611217952}};e.IfcCivilElement=class extends Hn{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=1677625105}};e.IfcCoilType=class extends kn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2301859152}};e.IfcColumn=class extends Ta{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=843113511}};e.IfcCommunicationsApplianceType=class extends ta{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=400855858}};e.IfcCompressorType=class extends Jn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3850581409}};e.IfcCondenserType=class extends kn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2816379211}};e.IfcConstructionEquipmentResource=class extends Mn{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.LongDescription=a,this.Usage=l,this.BaseCosts=h,this.BaseQuantity=c,this.PredefinedType=u,this.type=3898045240}};e.IfcConstructionMaterialResource=class extends Mn{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.LongDescription=a,this.Usage=l,this.BaseCosts=h,this.BaseQuantity=c,this.PredefinedType=u,this.type=1060000209}};e.IfcConstructionProductResource=class extends Mn{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.Identification=n,this.LongDescription=a,this.Usage=l,this.BaseCosts=h,this.BaseQuantity=c,this.PredefinedType=u,this.type=488727124}};e.IfcConveyorSegmentType=class extends $n{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2940368186}};e.IfcCooledBeamType=class extends kn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=335055490}};e.IfcCoolingTowerType=class extends kn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2954562838}};e.IfcCourse=class extends Ta{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1502416096}};e.IfcCovering=class extends Ta{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1973544240}};e.IfcCurtainWall=class extends Ta{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3495092785}};e.IfcDamperType=class extends Zn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3961806047}};class Pa extends Ta{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=3426335179}}e.IfcDeepFoundation=Pa;e.IfcDiscreteAccessory=class extends Gn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1335981549}};e.IfcDiscreteAccessoryType=class extends Vn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2635815018}};e.IfcDistributionBoardType=class extends Zn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=479945903}};e.IfcDistributionChamberElementType=class extends Un{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1599208980}};class Da extends Ln{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.type=2063403501}}e.IfcDistributionControlElementType=Da;class ba extends Hn{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=1945004755}}e.IfcDistributionElement=ba;class Ra extends ba{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=3040386961}}e.IfcDistributionFlowElement=Ra;e.IfcDistributionPort=class extends aa{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.FlowDirection=l,this.PredefinedType=h,this.SystemType=c,this.type=3041715199}};class Ca extends ga{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.LongName=n,this.PredefinedType=a,this.type=3205830791}}e.IfcDistributionSystem=Ca;e.IfcDoor=class extends Ta{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.OverallHeight=h,this.OverallWidth=c,this.PredefinedType=u,this.OperationType=A,this.UserDefinedOperationType=p,this.type=395920057}};e.IfcDuctFittingType=class extends qn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=869906466}};e.IfcDuctSegmentType=class extends $n{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3760055223}};e.IfcDuctSilencerType=class extends sa{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2030761528}};e.IfcEarthworksCut=class extends Xn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3071239417}};class xa extends Ta{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=1077100507}}e.IfcEarthworksElement=xa;e.IfcEarthworksFill=class extends xa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3376911765}};e.IfcElectricApplianceType=class extends ta{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=663422040}};e.IfcElectricDistributionBoardType=class extends Zn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2417008758}};e.IfcElectricFlowStorageDeviceType=class extends ea{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3277789161}};e.IfcElectricFlowTreatmentDeviceType=class extends sa{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2142170206}};e.IfcElectricGeneratorType=class extends kn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1534661035}};e.IfcElectricMotorType=class extends kn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1217240411}};e.IfcElectricTimeControlType=class extends Zn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=712377611}};class Na extends Ra{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=1658829314}}e.IfcEnergyConversionDevice=Na;e.IfcEngine=class extends Na{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2814081492}};e.IfcEvaporativeCooler=class extends Na{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3747195512}};e.IfcEvaporator=class extends Na{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=484807127}};e.IfcExternalSpatialElement=class extends jn{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.LongName=l,this.PredefinedType=h,this.type=1209101575}};e.IfcFanType=class extends Jn{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=346874300}};e.IfcFilterType=class extends sa{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1810631287}};e.IfcFireSuppressionTerminalType=class extends ta{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=4222183408}};class Oa extends Ra{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=2058353004}}e.IfcFlowController=Oa;class Sa extends Ra{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=4278956645}}e.IfcFlowFitting=Sa;e.IfcFlowInstrumentType=class extends Da{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=4037862832}};e.IfcFlowMeter=class extends Oa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2188021234}};class wa extends Ra{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=3132237377}}e.IfcFlowMovingDevice=wa;class Ma extends Ra{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=987401354}}e.IfcFlowSegment=Ma;class Ba extends Ra{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=707683696}}e.IfcFlowStorageDevice=Ba;class Fa extends Ra{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=2223149337}}e.IfcFlowTerminal=Fa;class La extends Ra{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=3508470533}}e.IfcFlowTreatmentDevice=La;e.IfcFooting=class extends Ta{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=900683007}};class Ua extends ra{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=2713699986}}e.IfcGeotechnicalAssembly=Ua;e.IfcGrid=class extends la{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.UAxes=l,this.VAxes=h,this.WAxes=c,this.PredefinedType=u,this.type=3009204131}};e.IfcHeatExchanger=class extends Na{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3319311131}};e.IfcHumidifier=class extends Na{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2068733104}};e.IfcInterceptor=class extends La{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=4175244083}};e.IfcJunctionBox=class extends Sa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2176052936}};e.IfcKerb=class extends Ta{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.Mountable=h,this.type=2696325953}};e.IfcLamp=class extends Fa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=76236018}};e.IfcLightFixture=class extends Fa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=629592764}};class Ha extends la{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.type=1154579445}}e.IfcLinearPositioningElement=Ha;e.IfcLiquidTerminal=class extends Fa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1638804497}};e.IfcMedicalDevice=class extends Fa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1437502449}};e.IfcMember=class extends Ta{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1073191201}};e.IfcMobileTelecommunicationsAppliance=class extends Fa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2078563270}};e.IfcMooringDevice=class extends Ta{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=234836483}};e.IfcMotorConnection=class extends Na{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2474470126}};e.IfcNavigationElement=class extends Ta{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2182337498}};e.IfcOuterBoundaryCurve=class extends Ia{constructor(e,t,s){super(e,t,s),this.Segments=t,this.SelfIntersect=s,this.type=144952367}};e.IfcOutlet=class extends Fa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3694346114}};e.IfcPavement=class extends Ta{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1383356374}};e.IfcPile=class extends Pa{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.ConstructionType=c,this.type=1687234759}};e.IfcPipeFitting=class extends Sa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=310824031}};e.IfcPipeSegment=class extends Ma{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3612865200}};e.IfcPlate=class extends Ta{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3171933400}};e.IfcProtectiveDevice=class extends Oa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=738039164}};e.IfcProtectiveDeviceTrippingUnitType=class extends Da{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=655969474}};e.IfcPump=class extends wa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=90941305}};e.IfcRail=class extends Ta{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3290496277}};e.IfcRailing=class extends Ta{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2262370178}};e.IfcRamp=class extends Ta{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3024970846}};e.IfcRampFlight=class extends Ta{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3283111854}};e.IfcRationalBSplineCurveWithKnots=class extends _a{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.Degree=t,this.ControlPointsList=s,this.CurveForm=i,this.ClosedCurve=r,this.SelfIntersect=o,this.KnotMultiplicities=n,this.Knots=a,this.KnotSpec=l,this.WeightsData=h,this.type=1232101972}};e.IfcReinforcedSoil=class extends xa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3798194928}};e.IfcReinforcingBar=class extends ha{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.SteelGrade=h,this.NominalDiameter=c,this.CrossSectionArea=u,this.BarLength=A,this.PredefinedType=p,this.BarSurface=d,this.type=979691226}};e.IfcReinforcingBarType=class extends ca{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p,d,f,m){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.NominalDiameter=u,this.CrossSectionArea=A,this.BarLength=p,this.BarSurface=d,this.BendingShapeCode=f,this.BendingParameters=m,this.type=2572171363}};e.IfcRoof=class extends Ta{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2016517767}};e.IfcSanitaryTerminal=class extends Fa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3053780830}};e.IfcSensorType=class extends Da{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=1783015770}};e.IfcShadingDevice=class extends Ta{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1329646415}};e.IfcSignal=class extends Fa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=991950508}};e.IfcSlab=class extends Ta{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1529196076}};e.IfcSolarDevice=class extends Na{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3420628829}};e.IfcSpaceHeater=class extends Fa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1999602285}};e.IfcStackTerminal=class extends Fa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1404847402}};e.IfcStair=class extends Ta{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=331165859}};e.IfcStairFlight=class extends Ta{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.NumberOfRisers=h,this.NumberOfTreads=c,this.RiserHeight=u,this.TreadLength=A,this.PredefinedType=p,this.type=4252922144}};e.IfcStructuralAnalysisModel=class extends ga{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.PredefinedType=n,this.OrientationOf2DPlane=a,this.LoadedBy=l,this.HasResults=h,this.SharedPlacement=c,this.type=2515109513}};e.IfcStructuralLoadCase=class extends fa{constructor(e,t,s,i,r,o,n,a,l,h,c,u){super(e,t,s,i,r,o,n,a,l,h,c),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.PredefinedType=n,this.ActionType=a,this.ActionSource=l,this.Coefficient=h,this.Purpose=c,this.SelfWeightCoefficients=u,this.type=385403989}};e.IfcStructuralPlanarAction=class extends ma{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A){super(e,t,s,i,r,o,n,a,l,h,c,u,A),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.AppliedLoad=l,this.GlobalOrLocal=h,this.DestabilizingLoad=c,this.ProjectedOrTrue=u,this.PredefinedType=A,this.type=1621171031}};e.IfcSwitchingDevice=class extends Oa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1162798199}};e.IfcTank=class extends Ba{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=812556717}};e.IfcTrackElement=class extends Ta{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3425753595}};e.IfcTransformer=class extends Na{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3825984169}};e.IfcTransportElement=class extends ya{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1620046519}};e.IfcTubeBundle=class extends Na{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3026737570}};e.IfcUnitaryControlElementType=class extends Da{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3179687236}};e.IfcUnitaryEquipment=class extends Na{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=4292641817}};e.IfcValve=class extends Oa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=4207607924}};class Ga extends Ta{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2391406946}}e.IfcWall=Ga;e.IfcWallStandardCase=class extends Ga{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3512223829}};e.IfcWasteTerminal=class extends Fa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=4237592921}};e.IfcWindow=class extends Ta{constructor(e,t,s,i,r,o,n,a,l,h,c,u,A,p){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.OverallHeight=h,this.OverallWidth=c,this.PredefinedType=u,this.PartitioningType=A,this.UserDefinedPartitioningType=p,this.type=3304561284}};e.IfcActuatorType=class extends Da{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=2874132201}};e.IfcAirTerminal=class extends Fa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1634111441}};e.IfcAirTerminalBox=class extends Oa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=177149247}};e.IfcAirToAirHeatRecovery=class extends Na{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2056796094}};e.IfcAlarmType=class extends Da{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=3001207471}};e.IfcAlignment=class extends Ha{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.PredefinedType=l,this.type=325726236}};e.IfcAudioVisualAppliance=class extends Fa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=277319702}};e.IfcBeam=class extends Ta{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=753842376}};e.IfcBearing=class extends Ta{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=4196446775}};e.IfcBoiler=class extends Na{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=32344328}};e.IfcBorehole=class extends Ua{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=3314249567}};e.IfcBuildingElementProxy=class extends Ta{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1095909175}};e.IfcBurner=class extends Na{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2938176219}};e.IfcCableCarrierFitting=class extends Sa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=635142910}};e.IfcCableCarrierSegment=class extends Ma{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3758799889}};e.IfcCableFitting=class extends Sa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1051757585}};e.IfcCableSegment=class extends Ma{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=4217484030}};e.IfcCaissonFoundation=class extends Pa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3999819293}};e.IfcChiller=class extends Na{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3902619387}};e.IfcCoil=class extends Na{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=639361253}};e.IfcCommunicationsAppliance=class extends Fa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3221913625}};e.IfcCompressor=class extends wa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3571504051}};e.IfcCondenser=class extends Na{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2272882330}};e.IfcControllerType=class extends Da{constructor(e,t,s,i,r,o,n,a,l,h,c){super(e,t,s,i,r,o,n,a,l,h),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ApplicableOccurrence=o,this.HasPropertySets=n,this.RepresentationMaps=a,this.Tag=l,this.ElementType=h,this.PredefinedType=c,this.type=578613899}};e.IfcConveyorSegment=class extends Ma{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3460952963}};e.IfcCooledBeam=class extends Na{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=4136498852}};e.IfcCoolingTower=class extends Na{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3640358203}};e.IfcDamper=class extends Oa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=4074379575}};e.IfcDistributionBoard=class extends Oa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3693000487}};e.IfcDistributionChamberElement=class extends Ra{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1052013943}};e.IfcDistributionCircuit=class extends Ca{constructor(e,t,s,i,r,o,n,a){super(e,t,s,i,r,o,n,a),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.LongName=n,this.PredefinedType=a,this.type=562808652}};class Va extends ba{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=1062813311}}e.IfcDistributionControlElement=Va;e.IfcDuctFitting=class extends Sa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=342316401}};e.IfcDuctSegment=class extends Ma{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3518393246}};e.IfcDuctSilencer=class extends La{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1360408905}};e.IfcElectricAppliance=class extends Fa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1904799276}};e.IfcElectricDistributionBoard=class extends Oa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=862014818}};e.IfcElectricFlowStorageDevice=class extends Ba{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3310460725}};e.IfcElectricFlowTreatmentDevice=class extends La{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=24726584}};e.IfcElectricGenerator=class extends Na{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=264262732}};e.IfcElectricMotor=class extends Na{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=402227799}};e.IfcElectricTimeControl=class extends Oa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1003880860}};e.IfcFan=class extends wa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3415622556}};e.IfcFilter=class extends La{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=819412036}};e.IfcFireSuppressionTerminal=class extends Fa{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=1426591983}};e.IfcFlowInstrument=class extends Va{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=182646315}};e.IfcGeomodel=class extends Ua{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=2680139844}};e.IfcGeoslice=class extends Ua{constructor(e,t,s,i,r,o,n,a,l){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.type=1971632696}};e.IfcProtectiveDeviceTrippingUnit=class extends Va{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=2295281155}};e.IfcSensor=class extends Va{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=4086658281}};e.IfcUnitaryControlElement=class extends Va{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=630975310}};e.IfcActuator=class extends Va{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=4288193352}};e.IfcAlarm=class extends Va{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=3087945054}};e.IfcController=class extends Va{constructor(e,t,s,i,r,o,n,a,l,h){super(e,t,s,i,r,o,n,a,l),this.GlobalId=t,this.OwnerHistory=s,this.Name=i,this.Description=r,this.ObjectType=o,this.ObjectPlacement=n,this.Representation=a,this.Tag=l,this.PredefinedType=h,this.type=25142252}}}(Qv||(Qv={})),(zv=Wv||(Wv={}))[zv.LOG_LEVEL_DEBUG=0]="LOG_LEVEL_DEBUG",zv[zv.LOG_LEVEL_INFO=1]="LOG_LEVEL_INFO",zv[zv.LOG_LEVEL_WARN=2]="LOG_LEVEL_WARN",zv[zv.LOG_LEVEL_ERROR=3]="LOG_LEVEL_ERROR",zv[zv.LOG_LEVEL_OFF=4]="LOG_LEVEL_OFF","undefined"!=typeof self&&self.crossOriginIsolated)try{Yv()}catch(e){Xv()}else Xv();p.vec2(),p.vec3(),p.vec3(),p.vec3();class Jv{constructor(e,t){this.items=e||[],this._lastUniqueId=(t||0)+1}addItem(){let e;if(2===arguments.length){const t=arguments[0];if(e=arguments[1],this.items[t])throw"ID clash: '"+t+"'";return this.items[t]=e,t}for(e=arguments[0]||{};;){const t=this._lastUniqueId++;if(!this.items[t])return this.items[t]=e,t}}removeItem(e){const t=this.items[e];return delete this.items[e],t}}class $v{constructor(e,t,s,i){this.bimViewer=e?e.bimViewer||e:this,this.server=e?e.server:s,this.viewer=e?e.viewer:i,this._children=[],e&&e._children.push(this),this._subIdMap=null,this._subIdEvents=null,this._eventSubs=null,this._events=null,this._eventCallDepth=0,this._enabled=null,this._active=null}fire(e,t,s){this._events||(this._events={}),this._eventSubs||(this._eventSubs={}),!0!==s&&(this._events[e]=t||!0);const i=this._eventSubs[e];let r;if(i)for(const s in i)i.hasOwnProperty(s)&&(r=i[s],this._eventCallDepth++,this._eventCallDepth<300?r.callback.call(r.scope,t):this.error("fire: potential stack overflow from recursive event '"+e+"' - dropping this event"),this._eventCallDepth--)}on(e,t,s){this._events||(this._events={}),this._subIdMap||(this._subIdMap=new Jv),this._subIdEvents||(this._subIdEvents={}),this._eventSubs||(this._eventSubs={});let i=this._eventSubs[e];i||(i={},this._eventSubs[e]=i);const r=this._subIdMap.addItem();i[r]={callback:t,scope:s||this},this._subIdEvents[r]=e;const o=this._events[e];return void 0!==o&&t.call(s||this,o),r}off(e){if(null==e)return;if(!this._subIdEvents)return;const t=this._subIdEvents[e];if(t){delete this._subIdEvents[e];const s=this._eventSubs[t];s&&delete s[e],this._subIdMap.removeItem(e)}}once(e,t,s){const i=this,r=this.on(e,(function(e){i.off(r),t.call(s||this,e)}),s)}log(e){e="[LOG] "+e,window.console.log(e)}warn(e){e="[WARN] "+e,window.console.warn(e)}error(e){e="[ERROR] "+e,window.console.error(e)}_mutexActivation(e){const t=e.length;for(let s=0;s<t;s++){e[s].on("active",function(){const i=s;return function(s){if(s)for(let s=0;s<t;s++)s!==i&&e[s].setActive(!1)}}())}}setEnabled(e){this._enabled!==e&&(this._enabled=e,this.fire("enabled",this._enabled))}getEnabled(){return this._enabled}setActive(e){this._active!==e&&(this._active=e,this.fire("active",this._active))}getActive(){return this._active}destroy(){if(!this.destroyed){this.fire("destroyed",this.destroyed=!0),this._subIdMap=null,this._subIdEvents=null,this._eventSubs=null,this._events=null,this._eventCallDepth=0;for(let e=0,t=this._children.length;e<t;e++)this._children[e].destroy();this._children=[]}}}class e_ extends $v{constructor(e,t={}){super(e,t);const s=t.busyModalBackdropElement||document.body;if(!s)throw"Missing config: busyModalBackdropElement";this._modal=document.createElement("div"),this._modal.classList.add("xeokit-busy-modal"),this._modal.innerHTML='<div class="xeokit-busy-modal-content"><div class="xeokit-busy-modal-body"><div class="xeokit-busy-modal-message">Default text</div></div></div>',s.appendChild(this._modal),this._modalVisible=!1,this._modal.style.display="hidden"}show(e){this._modalVisible=!0,this._modal.querySelector(".xeokit-busy-modal-message").innerText=e,this._modal.style.display="block"}hide(){this._modalVisible=!1,this._modal.style.display="none"}destroy(){super.destroy(),this._modal&&(this._modal.parentNode.removeChild(this._modal),this._modal=null)}}const t_=p.vec3();class s_ extends $v{constructor(e,t={}){if(super(e,t),!t.buttonElement)throw"Missing config: buttonElement";const s=t.buttonElement,i=this.viewer.camera;this._modelMementos={},i.eye=[.577,.577,.577],i.look=[0,0,0],i.up=[-1,1,-1],this.bimViewer._modelsExplorer.on("modelLoaded",(e=>{this._saveModelMemento(e)})),this.bimViewer._modelsExplorer.on("modelUnloaded",(e=>{this._destroyModelMemento(e)})),this.on("enabled",(e=>{e?s.classList.remove("disabled"):s.classList.add("disabled")})),this.on("active",(e=>{e?s.classList.add("active"):s.classList.remove("active")})),s.addEventListener("click",(e=>{this.getEnabled()&&this.reset(),e.preventDefault()}))}_saveModelMemento(e){const t=this.viewer.metaScene.metaModels[e];if(!t)return;const s=new $o;s.saveObjects(this.viewer.scene,t,{visible:!0,edges:!0,xrayed:!0,highlighted:!0,selected:!0,clippable:!0,pickable:!0,colorize:!1,opacity:!1}),this._modelMementos[e]=s}_restoreModelMemento(e){const t=this.viewer.metaScene.metaModels[e];if(!t)return;this._modelMementos[e].restoreObjects(this.viewer.scene,t)}_destroyModelMemento(e){delete this._modelMementos[e]}reset(){const e=this.viewer.scene.modelIds;for(var t=0,s=e.length;t<s;t++){const s=e[t];this._restoreModelMemento(s)}this.bimViewer.unShowObjectInExplorers(),this.fire("reset",!0),this._resetCamera()}_resetCamera(){const e=this.viewer,t=e.scene,s=t.getAABB(t.visibleObjectIds),i=p.getAABB3Diag(s),r=p.getAABB3Center(s,t_),o=t.camera;o.perspective.fov;const n=Math.abs(i/Math.tan(45*p.DEGTORAD)),a=p.normalizeVec3(o.yUp?[-.5,-.7071,-.5]:[-1,1,-1]),l=p.normalizeVec3(o.yUp?[-.5,.7071,-.5]:[-1,1,1]);e.cameraControl.pivotPos=r,e.cameraControl.planView=!1,e.cameraFlight.flyTo({look:r,eye:[r[0]-n*a[0],r[1]-n*a[1],r[2]-n*a[2]],up:l,orthoScale:1.3*i,projection:"perspective",duration:1})}}const i_=p.vec3();class r_ extends $v{constructor(e,t={}){if(super(e,t),!t.buttonElement)throw"Missing config: buttonElement";const s=t.buttonElement;this.on("enabled",(e=>{e?s.classList.remove("disabled"):s.classList.add("disabled")})),this.on("active",(e=>{e?s.classList.add("active"):s.classList.remove("active")})),s.addEventListener("click",(e=>{this.getEnabled()&&this.fit(),e.preventDefault()}))}fit(){const e=this.viewer.scene,t=e.getAABB(e.visibleObjectIds);this.viewer.cameraFlight.flyTo({aabb:t}),this.viewer.cameraControl.pivotPos=p.getAABB3Center(t,i_)}set fov(e){this.viewer.scene.cameraFlight.fitFOV=e}get fov(){return this.viewer.scene.cameraFlight.fitFOV}set duration(e){this.viewer.scene.cameraFlight.duration=e}get duration(){return this.viewer.scene.cameraFlight.duration}}class o_ extends $v{constructor(e,t){if(super(e,t),!t.buttonElement)throw"Missing config: buttonElement";const s=t.buttonElement,i=this.viewer.cameraControl,r=t.cameraControlNavModeMediator;i.navMode="orbit",i.followPointer=!0,this.on("enabled",(e=>{e?s.classList.remove("disabled"):s.classList.add("disabled")})),this.on("active",(e=>{e?s.classList.add("active"):s.classList.remove("active")})),this.on("active",(e=>{r.setFirstPersonModeActive(e),e?(i.followPointer=!0,i.pivoting=!1):i.pivoting=!0})),s.addEventListener("click",(e=>{if(this.getEnabled()){const e=this.getActive();this.setActive(!e)}e.preventDefault()})),this.bimViewer.on("reset",(()=>{this.setActive(!1)}))}}class n_ extends $v{constructor(e,t){if(super(e,t),!t.buttonElement)throw"Missing config: buttonElement";const s=t.buttonElement;this.on("enabled",(e=>{e?s.classList.remove("disabled"):s.classList.add("disabled")})),this.on("active",(e=>{e?(s.classList.add("active"),this.viewer.cameraControl.doublePickFlyTo=!1,this._onPick=this.viewer.cameraControl.on("picked",(e=>{e.entity&&(e.entity.visible=!1)}))):(s.classList.remove("active"),this.viewer.cameraControl.doublePickFlyTo=!1,void 0!==this._onPick&&(this.viewer.cameraControl.off(this._onPick),this._onPick=void 0))})),s.addEventListener("click",(e=>{if(this.getEnabled()){this.bimViewer._sectionTool.hideControl();const e=this.getActive();this.setActive(!e)}e.preventDefault()})),this.bimViewer.on("reset",(()=>{this.setActive(!1)}))}}class a_ extends $v{constructor(e,t){if(super(e),!t.buttonElement)throw"Missing config: buttonElement";const s=t.buttonElement;this.on("enabled",(e=>{e?s.classList.remove("disabled"):s.classList.add("disabled")})),this.on("active",(e=>{e?(s.classList.add("active"),this._onPick=this.viewer.cameraControl.on("picked",(e=>{e.entity&&(e.entity.selected=!e.entity.selected)}))):(s.classList.remove("active"),void 0!==this._onPick&&(this.viewer.cameraControl.off(this._onPick),this._onPick=void 0))})),s.addEventListener("click",(e=>{if(this.getEnabled()){this.bimViewer._sectionTool.hideControl();const e=this.getActive();this.setActive(!e)}e.preventDefault()})),this.bimViewer.on("reset",(()=>{this.setActive(!1)}))}}class l_ extends $v{constructor(e,t){if(super(e,t),!t.buttonElement)throw"Missing config: buttonElement";this._buttonElement=t.buttonElement,this.on("enabled",(e=>{e?this._buttonElement.classList.remove("disabled"):this._buttonElement.classList.add("disabled")})),this._buttonElement.addEventListener("click",(e=>{this.getEnabled()&&this.setActive(!this.getActive(),(()=>{})),e.preventDefault()})),this.bimViewer.on("reset",(()=>{this.setActive(!1)})),this.viewer.scene.on("modelLoaded",(e=>{if(!this._active){const e=this.viewer.metaScene.getObjectIDsByType("IfcSpace");this.viewer.scene.setObjectsCulled(e,!0)}})),this._active=!1,this._buttonElement.classList.remove("active")}setActive(e){this._active!==e&&(this._active=e,e?(this._buttonElement.classList.add("active"),this._enterShowSpacesMode(),this.fire("active",this._active)):(this._buttonElement.classList.remove("active"),this._exitShowSpacesMode(),this.fire("active",this._active)))}_enterShowSpacesMode(){const e=this.viewer,t=e.scene,s=e.metaScene.getObjectIDsByType("IfcSpace");t.setObjectsCulled(s,!1)}_exitShowSpacesMode(){const e=this.viewer,t=e.scene,s=e.metaScene.getObjectIDsByType("IfcSpace");t.setObjectsCulled(s,!0)}}class h_ extends $v{constructor(e,t){super(e)}}const c_=p.AABB3(),u_=p.vec3();class A_ extends n{constructor(e={}){if(!e.sectionPlanesPlugin)throw"Missing config: sectionPlanesPlugin";super(y.apply({},e)),this._sectionPlanesPlugin=e.sectionPlanesPlugin,this._viewer=this._sectionPlanesPlugin.viewer,this._onSceneSectionPlaneCreated=this._viewer.scene.on("sectionPlaneCreated",(()=>{this._buildMenu()})),this._onSceneSectionPlaneDestroyed=this._viewer.scene.on("sectionPlaneDestroyed",(()=>{this._buildMenu()})),this._buildMenu()}_buildMenu(){const e=this._sectionPlanesPlugin,t=Object.values(e.sectionPlanes),s=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];s.push({getTitle:e=>`${e.viewer.localeService.translate("sectionToolContextMenu.slice")||"Slice"} #`+(i+1),doHoverEnter(t){e.hideControl(),e.showControl(r.id)},doHoverLeave(t){e.hideControl()},items:[[{getTitle:e=>r.active?e.viewer.localeService.translate("sectionToolContextMenu.deactivate")||"Disable":e.viewer.localeService.translate("sectionToolContextMenu.activate")||"Enable",doAction:e=>{r.active=!r.active}},{getTitle:e=>e.viewer.localeService.translate("sectionToolContextMenu.edit")||"Edit",getEnabled:()=>r.active,doAction:t=>{e.hideControl(),e.showControl(r.id);const s=r.pos;c_.set(this._viewer.scene.aabb),p.getAABB3Center(c_,u_),c_[0]+=s[0]-u_[0],c_[1]+=s[1]-u_[1],c_[2]+=s[2]-u_[2],c_[3]+=s[0]-u_[0],c_[4]+=s[1]-u_[1],c_[5]+=s[2]-u_[2],this._viewer.cameraFlight.flyTo({aabb:c_,fitFOV:65})}},{getTitle:e=>e.viewer.localeService.translate("sectionToolContextMenu.flip")||"Flip",getEnabled:()=>r.active,doAction:e=>{r.flipDir()}},{getTitle:e=>e.viewer.localeService.translate("sectionToolContextMenu.delete")||"Delete",doAction:e=>{r.destroy()}}]]})}this.items=[[{getTitle:e=>e.viewer.localeService.translate("sectionToolContextMenu.clearSlices")||"Clear Slices",getEnabled:e=>e.bimViewer.getNumSections()>0,doAction:e=>{e.bimViewer.clearSections()}},{getTitle:e=>e.viewer.localeService.translate("sectionToolContextMenu.flipSlices")||"Flip Slices",getEnabled:e=>e.bimViewer.getNumSections()>0,doAction:e=>{e.bimViewer.flipSections()}}],[{getTitle:e=>e.viewer.localeService.translate("sectionToolContextMenu.disableAllSlices")||"Disable all Slices",getEnabled:e=>e.bimViewer.getNumSections()>0,doAction:e=>{e.bimViewer.disableSections()}},{getTitle:e=>e.viewer.localeService.translate("sectionToolContextMenu.enableAllSlices")||"Enable all Slices",getEnabled:e=>e.bimViewer.getNumSections()>0,doAction:e=>{e.bimViewer.enableSections()}}],s]}destroy(){super.destroy();const e=this._viewer.scene;e.off(this._onSceneSectionPlaneCreated),e.off(this._onSceneSectionPlaneDestroyed)}}class p_ extends $v{constructor(e,t){if(super(e,t),!t.buttonElement)throw"Missing config: buttonElement";if(!t.menuButtonElement)throw"Missing config: menuButtonElement";this._buttonElement=t.buttonElement,this._counterElement=t.counterElement,this._menuButtonElement=t.menuButtonElement,this._menuButtonArrowElement=t.menuButtonArrowElement,this._sectionPlanesPlugin=new YE(this.viewer,{}),this._sectionToolContextMenu=new A_({sectionPlanesPlugin:this._sectionPlanesPlugin,hideOnMouseDown:!1,hideOnAction:!1}),this._sectionPlanesPlugin.setOverviewVisible(!1),this.on("enabled",(e=>{e?(this._buttonElement.classList.remove("disabled"),this._counterElement&&this._counterElement.classList.remove("disabled"),this._menuButtonElement.classList.remove("disabled"),this._menuButtonArrowElement.classList.remove("disabled")):(this._buttonElement.classList.add("disabled"),this._counterElement&&this._counterElement.classList.add("disabled"),this._menuButtonElement.classList.add("disabled"),this._menuButtonArrowElement.classList.add("disabled"))})),this.on("active",(e=>{e?(this._buttonElement.classList.add("active"),this._counterElement&&this._counterElement.classList.add("active"),this._menuButtonElement.classList.add("active"),this._menuButtonArrowElement.classList.add("active")):(this._buttonElement.classList.remove("active"),this._counterElement&&this._counterElement.classList.remove("active"),this._menuButtonElement.classList.remove("active"),this._menuButtonArrowElement.classList.remove("active"))})),this.on("active",(e=>{e||this._sectionPlanesPlugin.hideControl()})),this._buttonElement.addEventListener("click",(e=>{if(!this.getEnabled())return;if(e.target===this._menuButtonElement||e.target.parentNode===this._menuButtonElement)return;const t=this.getActive();this.setActive(!t),e.preventDefault()})),document.addEventListener("mousedown",(e=>{if(!e.target.classList.contains("xeokit-context-menu-item"))if(e.target===this._menuButtonElement||e.target.parentNode===this._menuButtonElement)if(e.preventDefault(),this._sectionToolContextMenu.shown)this._sectionToolContextMenu.hide();else{this._sectionToolContextMenu.context={bimViewer:this.bimViewer,viewer:this.viewer,sectionTool:this};const e=this._menuButtonElement.getBoundingClientRect();this._sectionToolContextMenu.show(e.left,e.bottom+5)}else this._sectionToolContextMenu.hide()})),this._sectionToolContextMenu.on("shown",(()=>{this._menuButtonArrowElement.classList.remove("xeokit-arrow-down"),this._menuButtonArrowElement.classList.add("xeokit-arrow-up")})),this._sectionToolContextMenu.on("hidden",(()=>{this._menuButtonArrowElement.classList.remove("xeokit-arrow-up"),this._menuButtonArrowElement.classList.add("xeokit-arrow-down")})),this.bimViewer.on("reset",(()=>{this.clear(),this.setActive(!1)})),this.viewer.scene.on("sectionPlaneCreated",(()=>{this._updateSectionPlanesCount()})),this.viewer.scene.on("sectionPlaneDestroyed",(()=>{this._updateSectionPlanesCount()})),this._initSectionMode()}_initSectionMode(){this.viewer.scene.input.on("mouseclicked",(e=>{if(!this.getActive()||!this.getEnabled())return;const t=this.viewer.scene.pick({canvasPos:e,pickSurface:!0});if(t){const e=this._sectionPlanesPlugin.createSectionPlane({pos:t.worldPos,dir:p.mulVec3Scalar(t.worldNormal,-1)});this._sectionPlanesPlugin.showControl(e.id)}})),this._updateSectionPlanesCount()}_updateSectionPlanesCount(){this._counterElement&&(this._counterElement.innerText=""+this.getNumSections())}getNumSections(){return Object.keys(this.viewer.scene.sectionPlanes).length}clear(){this._sectionPlanesPlugin.clear(),this._updateSectionPlanesCount()}flipSections(){this._sectionPlanesPlugin.flipSectionPlanes()}enableSections(){const e=this.viewer.scene.sectionPlanes;for(let t in e){e[t].active=!0}}disableSections(){const e=this.viewer.scene.sectionPlanes;for(let t in e){e[t].active=!1}}hideControl(){this._sectionPlanesPlugin.hideControl()}destroy(){this._sectionPlanesPlugin.destroy(),this._sectionToolContextMenu.destroy(),super.destroy()}}class d_ extends $v{constructor(e,t){if(super(e,t),!t.navCubeCanvasElement)throw"Missing config: navCubeCanvasElement";const s=t.navCubeCanvasElement;this._navCube=new GE(this.viewer,{canvasElement:s,fitVisible:!0,color:"#CFCFCF"}),this._navCube.setVisible(this._active),this.on("active",(e=>{this._navCube.setVisible(e)}))}destroy(){this._navCube.destroy(),super.destroy()}}const f_={IfcSpace:{opacity:.3},IfcWindow:{opacity:.4},IfcOpeningElement:{opacity:.3},IfcPlate:{opacity:.3}},m_={IfcRoof:{colorize:[.837255,.203922,.270588],priority:0},IfcSlab:{colorize:[.637255,.603922,.670588],priority:0},IfcWall:{colorize:[.537255,.337255,.237255],priority:0},IfcWallStandardCase:{colorize:[.537255,.337255,.237255],priority:0},IfcCovering:{colorize:[.8470588235,.427450980392,0],priority:0},IfcDoor:{colorize:[.637255,.603922,.670588],priority:1},IfcStair:{colorize:[.637255,.603922,.670588],priority:2},IfcStairFlight:{colorize:[.637255,.603922,.670588],priority:2},IfcProxy:{colorize:[.137255,.403922,.870588],priority:2},IfcRamp:{colorize:[.8470588235,.427450980392,0],priority:2},IfcColumn:{colorize:[.137255,.403922,.870588],priority:3},IfcBeam:{colorize:[.137255,.403922,.870588],priority:3},IfcCurtainWall:{colorize:[.137255,.403922,.870588],priority:3},IfcPlate:{colorize:[.8470588235,.427450980392,0,.5],opacity:.5,priority:3},IfcTransportElement:{colorize:[.8470588235,.427450980392,0],priority:3},IfcFooting:{colorize:[.8470588235,.427450980392,0],priority:3},IfcRailing:{colorize:[.137255,.403922,.870588],priority:4},IfcFurnishingElement:{colorize:[.137255,.403922,.870588],priority:4},IfcFurniture:{colorize:[.8470588235,.427450980392,0],priority:4},IfcSystemFurnitureElement:{colorize:[.8470588235,.427450980392,0],priority:4},IfcFlowSegment:{colorize:[.137255,.403922,.870588],priority:5},IfcFlowitting:{colorize:[.137255,.403922,.870588],priority:5},IfcFlowTerminal:{colorize:[.137255,.403922,.870588],priority:5},IfcFlowController:{colorize:[.8470588235,.427450980392,0],priority:5},IfcFlowFitting:{colorize:[.8470588235,.427450980392,0],priority:5},IfcDuctSegment:{colorize:[.8470588235,.427450980392,0],priority:5},IfcDistributionFlowElement:{colorize:[.8470588235,.427450980392,0],priority:5},IfcDuctFitting:{colorize:[.8470588235,.427450980392,0],priority:5},IfcLightFixture:{colorize:[.8470588235,.8470588235,.870588],priority:5},IfcAirTerminal:{colorize:[.8470588235,.427450980392,0],priority:6},IfcOpeningElement:{colorize:[.137255,.403922,.870588],opacity:.3,priority:6},IfcSpace:{opacity:.5},IfcWindow:{colorize:[.137255,.403922,.870588],opacity:.4,priority:6},IfcBuildingElementProxy:{colorize:[.5,.5,.5]},IfcSite:{colorize:[.137255,.403922,.870588]},IfcMember:{colorize:[.8470588235,.427450980392,0]},DEFAULT:{colorize:[.5,.5,.5],priority:10}};class g_ extends n{constructor(e={}){const t=[[{getTitle:e=>e.viewer.localeService.translate("modelsContextMenu.loadModel")||"Load",getEnabled:e=>!e.bimViewer.isModelLoaded(e.modelId),doAction:e=>{e.bimViewer.loadModel(e.modelId)}},{getTitle:e=>e.viewer.localeService.translate("modelsContextMenu.unloadModel")||"Unload",getEnabled:e=>e.bimViewer.isModelLoaded(e.modelId),doAction:e=>{e.bimViewer.unloadModel(e.modelId)}}]];!!e.enableEditModels&&t.push([{getTitle:e=>e.viewer.localeService.translate("modelsContextMenu.editModel")||"Edit",getEnabled:e=>!0,doAction:e=>{e.bimViewer.editModel(e.modelId)}},{getTitle:e=>e.viewer.localeService.translate("modelsContextMenu.deleteModel")||"Delete",getEnabled:e=>!0,doAction:e=>{e.bimViewer.deleteModel(e.modelId)}}]),t.push([{getTitle:e=>e.viewer.localeService.translate("modelsContextMenu.loadAllModels")||"Load All",getEnabled:e=>{const t=e.bimViewer,s=t.getModelIds();return t.getLoadedModelIds().length<s.length},doAction:e=>{e.bimViewer.loadAllModels()}},{getTitle:e=>e.viewer.localeService.translate("modelsContextMenu.unloadAllModels")||"Unload All",getEnabled:e=>e.bimViewer.getLoadedModelIds().length>0,doAction:e=>{e.bimViewer.unloadAllModels()}}]),t.push([{getTitle:e=>e.viewer.localeService.translate("modelsContextMenu.clearSlices")||"Clear Slices",getEnabled:e=>e.bimViewer.getNumSections()>0,doAction:e=>{e.bimViewer.clearSections()}}]),super({hideOnAction:e.hideOnAction,context:e.context,items:t})}}const y_=p.vec3();class E_ extends $v{constructor(e,t){if(super(e,t),!t.modelsTabElement)throw"Missing config: modelsTabElement";if(!t.unloadModelsButtonElement)throw"Missing config: unloadModelsButtonElement";if(!t.modelsElement)throw"Missing config: modelsElement";if(this._enableAddModels=!!t.enableEditModels,this._modelsTabElement=t.modelsTabElement,this._loadModelsButtonElement=t.loadModelsButtonElement,this._unloadModelsButtonElement=t.unloadModelsButtonElement,this._addModelButtonElement=t.addModelButtonElement,this._modelsElement=t.modelsElement,this._modelsTabButtonElement=this._modelsTabElement.querySelector(".xeokit-tab-btn"),!this._modelsTabButtonElement)throw"Missing DOM element: ,xeokit-tab-btn";this._xktLoader=new Uv(this.viewer,{objectDefaults:f_}),this._modelsContextMenu=new g_({enableEditModels:t.enableEditModels,hideOnAction:!0}),this._modelsInfo={},this._numModels=0,this._numModelsLoaded=0,this._projectId=null}loadProject(e,t,s){this.server.getProject(e,(s=>{this.unloadProject(),this._projectId=e,this._modelsInfo={},this._numModels=0,this._parseProject(s,t),this._numModelsLoaded<this._numModels&&this._loadModelsButtonElement.classList.remove("disabled"),this._numModelsLoaded>0&&this._unloadModelsButtonElement.classList.remove("disabled"),this._enableAddModels&&this._addModelButtonElement.classList.remove("disabled")}),(e=>{this.error(e),s&&s(e)}))}_parseProject(e,t){this._buildModelsMenu(e),this._parseViewerConfigs(e),this._parseViewerContent(e,(()=>{this._parseViewerState(e,(()=>{t()}))}))}_buildModelsMenu(e){var t="";const s=e.models||[];this._modelsInfo={},this._numModels=s.length;for(let e=0,i=s.length;e<i;e++){const i=s[e];this._modelsInfo[i.id]=i,t+="<div class='xeokit-form-check'>",t+="<input id='"+i.id+"' type='checkbox' value=''><span id='span-"+i.id+"' class='disabled'>"+i.name+"</span>",t+="</div>"}this._modelsElement.innerHTML=t;for(let e=0,t=s.length;e<t;e++){const t=s[e],i=t.id,r=document.getElementById(""+i),o=document.getElementById("span-"+i);r.addEventListener("click",(()=>{r.checked?this.loadModel(i):this.unloadModel(t.id)})),o.addEventListener("click",(()=>{!!this.viewer.scene.models[i]?this.unloadModel(t.id):this.loadModel(i)})),o.oncontextmenu=e=>{this._modelsContextMenu.context={bimViewer:this.bimViewer,viewer:this.viewer,modelId:i},this._modelsContextMenu.show(e.pageX,e.pageY),e.preventDefault()}}}_parseViewerConfigs(e){const t=e.viewerConfigs;t&&this.bimViewer.setConfigs(t)}_parseViewerContent(e,t){const s=e.viewerContent;s?this._parseModelsLoaded(s,(()=>{t()})):t()}_parseModelsLoaded(e,t){const s=e.modelsLoaded;s&&0!==s.length?this._loadNextModel(s.slice(0),t):t()}_loadNextModel(e,t){if(0===e.length)return void t();const s=e.pop();this.loadModel(s,(()=>{this._loadNextModel(e,t)}),(()=>{this._loadNextModel(e,t)}))}_parseViewerState(e,t){const s=e.viewerState;s?this.bimViewer.setViewerState(s,t):t()}unloadProject(){if(!this._projectId)return;const e=this.viewer.scene.models;for(var t in e)if(e.hasOwnProperty(t)){e[t].destroy()}this._modelsElement.innerHTML="",this._numModelsLoaded=0,this._loadModelsButtonElement.classList.add("disabled"),this._unloadModelsButtonElement.classList.add("disabled"),this._enableAddModels&&this._addModelButtonElement.classList.add("disabled");const s=this._projectId;this._projectId=null,this.fire("projectUnloaded",{projectId:s})}getLoadedProjectId(){return this._projectId}getModelIds(){return Object.keys(this._modelsInfo)}loadModel(e,t,s){if(!this._projectId){const e="No project currently loaded";return this.error(e),void(s&&s(e))}const i=this._modelsInfo[e];if(!i){const e="Model not in currently loaded project";return this.error(e),void(s&&s(e))}this.bimViewer._busyModal.show(`${this.viewer.localeService.translate("busyModal.loading")||"Loading"} ${i.name}`);this.bimViewer.getConfig("externalMetadata")?this.server.getMetadata(this._projectId,e,(r=>{this._loadGeometry(e,i,r,t,s)}),(e=>{this.bimViewer._busyModal.hide(),this.error(e),s&&s(e)})):this._loadGeometry(e,i,null,t,s)}_loadGeometry(e,t,s,i,r){this.server.getGeometry(this._projectId,e,(r=>{const o="model"===(t.objectColorSource||this.bimViewer.getObjectColorSource())?f_:m_;this._xktLoader.load({id:e,metaModelData:s,xkt:r,objectDefaults:o,excludeUnclassifiedObjects:!0,origin:t.origin||t.position,scale:t.scale,rotation:t.rotation,matrix:t.matrix,edges:!1!==t.edges,saoEnabled:t.saoEnabled,pbrEnabled:t.pbrEnabled,backfaces:t.backfaces,globalizeObjectIds:t.globalizeObjectIds,reuseGeometries:!1!==t.reuseGeometries,useDataTextures:t.useDataTextures}).on("loaded",(()=>{document.getElementById(""+e).checked=!0,this.viewer.scene,this._numModelsLoaded++,this._unloadModelsButtonElement.classList.remove("disabled"),this._numModelsLoaded<this._numModels?this._loadModelsButtonElement.classList.remove("disabled"):this._loadModelsButtonElement.classList.add("disabled"),1===this._numModelsLoaded?(this._jumpToInitialCamera(),this.fire("modelLoaded",e),this.bimViewer._busyModal.hide(),i&&i()):(this.fire("modelLoaded",e),this.bimViewer._busyModal.hide(),i&&i())}))}),(e=>{this.bimViewer._busyModal.hide(),this.error(e),r&&r(e)}))}_jumpToInitialCamera(){const e=this.viewer,t=e.scene,s=t.getAABB(t.visibleObjectIds),i=p.getAABB3Diag(s),r=p.getAABB3Center(s,y_),o=t.camera;o.perspective.fov;const n=Math.abs(i/Math.tan(45*p.DEGTORAD)),a=p.normalizeVec3(o.yUp?[-.5,-.7071,-.5]:[-1,1,-1]),l=p.normalizeVec3(o.yUp?[-.5,.7071,-.5]:[-1,1,1]);e.cameraControl.pivotPos=r,e.cameraControl.planView=!1,e.cameraFlight.jumpTo({look:r,eye:[r[0]-n*a[0],r[1]-n*a[1],r[2]-n*a[2]],up:l,orthoScale:1.1*i})}unloadModel(e){const t=this.viewer.scene.models[e];if(!t)return void this.error("Model not loaded: "+e);t.destroy();document.getElementById(""+e).checked=!1,document.getElementById("span-"+e),this._numModelsLoaded--,this._numModelsLoaded>0?this._unloadModelsButtonElement.classList.remove("disabled"):this._unloadModelsButtonElement.classList.add("disabled"),this._numModelsLoaded<this._numModels?this._loadModelsButtonElement.classList.remove("disabled"):this._loadModelsButtonElement.classList.add("disabled"),this.fire("modelUnloaded",e)}unloadAllModels(){const e=this.viewer.scene.models,t=Object.keys(e);for(var s=0,i=t.length;s<i;s++){const e=t[s];this.unloadModel(e)}}getNumModelsLoaded(){return this._numModelsLoaded}_getLoadedModelIds(){return Object.keys(this.viewer.scene.models)}isModelLoaded(e){return!!this.viewer.scene.models[e]}getModelsInfo(){return this._modelsInfo}getModelInfo(e){return this._modelsInfo[e]}setEnabled(e){e?(this._modelsTabButtonElement.classList.remove("disabled"),this._unloadModelsButtonElement.classList.remove("disabled")):(this._modelsTabButtonElement.classList.add("disabled"),this._unloadModelsButtonElement.classList.add("disabled"))}destroy(){super.destroy(),this._xktLoader.destroy()}}const v_=p.vec3();class __ extends n{constructor(e,t={}){super(t),this._bimViewer=e,this._buildMenu()}_buildMenu(){const e=[],t=[];this._bimViewer._enablePropertiesInspector&&e.push({getTitle:e=>e.viewer.localeService.translate("treeViewContextMenu.inspectProperties")||"Inspect Properties",getShown:e=>!!e.viewer.metaScene.metaObjects[e.treeViewNode.objectId],doAction:e=>{const t=e.treeViewNode.objectId;e.bimViewer.showObjectProperties(t)}}),t.push({getTitle:e=>e.viewer.localeService.translate("treeViewContextMenu.viewFit")||"View Fit",doAction:function(e){const t=e.viewer,s=t.scene,i=[];e.treeViewPlugin.withNodeTree(e.treeViewNode,(e=>{e.objectId&&i.push(e.objectId)})),s.setObjectsVisible(i,!0),s.setObjectsHighlighted(i,!0);const r=s.getAABB(i);t.cameraFlight.flyTo({aabb:r,duration:.5},(()=>{setTimeout((function(){s.setObjectsHighlighted(s.highlightedObjectIds,!1)}),500)})),t.cameraControl.pivotPos=p.getAABB3Center(r)}},{getTitle:e=>e.viewer.localeService.translate("canvasContextMenu.viewFitSelection")||"View Fit Selected",getEnabled:e=>e.viewer.scene.numSelectedObjects>0,doAction:e=>{const t=e.viewer,s=t.scene,i=s.getAABB(s.selectedObjectIds);t.cameraFlight.flyTo({aabb:i,duration:.5}),t.cameraControl.pivotPos=p.getAABB3Center(i)}},{getTitle:e=>e.viewer.localeService.translate("treeViewContextMenu.viewFitAll")||"View Fit All",doAction:function(e){const t=e.viewer,s=t.scene,i=s.getAABB(s.visibleObjectIds);t.cameraFlight.flyTo({aabb:i,duration:.5}),t.cameraControl.pivotPos=p.getAABB3Center(i)}}),this.items=[e,t,[{getTitle:e=>e.viewer.localeService.translate("treeViewContextMenu.isolate")||"Isolate",doAction:function(e){const t=e.viewer,s=t.scene,i=[];e.treeViewPlugin.withNodeTree(e.treeViewNode,(e=>{e.objectId&&i.push(e.objectId)}));const r=s.getAABB(i);t.cameraControl.pivotPos=p.getAABB3Center(r,v_),s.setObjectsXRayed(s.xrayedObjectIds,!1),s.setObjectsVisible(s.visibleObjectIds,!1),s.setObjectsSelected(s.selectedObjectIds,!1),s.setObjectsVisible(i,!0),t.cameraFlight.flyTo({aabb:r},(()=>{}))}}],[{getTitle:e=>e.viewer.localeService.translate("treeViewContextMenu.hide")||"Hide",doAction:function(e){e.treeViewPlugin.withNodeTree(e.treeViewNode,(t=>{if(t.objectId){const s=e.viewer.scene.objects[t.objectId];s&&(s.visible=!1)}}))}},{getTitle:e=>e.viewer.localeService.translate("treeViewContextMenu.hideOthers")||"Hide Others",doAction:function(e){const t=e.viewer.scene;t.setObjectsVisible(t.visibleObjectIds,!1),t.setObjectsPickable(t.xrayedObjectIds,!0),t.setObjectsXRayed(t.xrayedObjectIds,!1),e.treeViewPlugin.withNodeTree(e.treeViewNode,(e=>{if(e.objectId){const s=t.objects[e.objectId];s&&(s.visible=!0)}}))}},{getTitle:e=>e.viewer.localeService.translate("treeViewContextMenu.hideAll")||"Hide All",getEnabled:function(e){return e.viewer.scene.visibleObjectIds.length>0},doAction:function(e){e.viewer.scene.setObjectsVisible(e.viewer.scene.visibleObjectIds,!1)}}],[{getTitle:e=>e.viewer.localeService.translate("treeViewContextMenu.show")||"Show",doAction:function(e){e.treeViewPlugin.withNodeTree(e.treeViewNode,(t=>{if(t.objectId){const s=e.viewer.scene.objects[t.objectId];s&&(s.visible=!0,s.xrayed&&(s.pickable=!0),s.xrayed=!1,s.selected=!1)}}))}},{getTitle:e=>e.viewer.localeService.translate("treeViewContextMenu.showOthers")||"Shows Others",doAction:function(e){const t=e.viewer.scene;t.setObjectsVisible(t.objectIds,!0),t.setObjectsPickable(t.xrayedObjectIds,!0),t.setObjectsXRayed(t.xrayedObjectIds,!1),e.treeViewPlugin.withNodeTree(e.treeViewNode,(e=>{if(e.objectId){const s=t.objects[e.objectId];s&&(s.visible=!1)}}))}},{getTitle:e=>e.viewer.localeService.translate("treeViewContextMenu.showAll")||"Show All",getEnabled:function(e){const t=e.viewer.scene;return t.numVisibleObjects<t.numObjects||e.viewer.scene.numXRayedObjects>0},doAction:function(e){const t=e.viewer.scene;t.setObjectsVisible(t.objectIds,!0),t.setObjectsPickable(t.xrayedObjectIds,!0),t.setObjectsXRayed(t.xrayedObjectIds,!1)}}],[{getTitle:e=>e.viewer.localeService.translate("treeViewContextMenu.xray")||"X-Ray",doAction:function(e){e.treeViewPlugin.withNodeTree(e.treeViewNode,(t=>{if(t.objectId){const s=e.viewer.scene.objects[t.objectId];s&&(s.selected=!1,s.xrayed=!0,s.visible=!0,s.pickable=e.bimViewer.getConfig("xrayPickable"))}}))}},{getTitle:e=>e.viewer.localeService.translate("treeViewContextMenu.undoXray")||"Undo X-Ray",doAction:function(e){e.treeViewPlugin.withNodeTree(e.treeViewNode,(t=>{if(t.objectId){const s=e.viewer.scene.objects[t.objectId];s&&(s.xrayed=!1,s.pickable=!0)}}))}},{getTitle:e=>e.viewer.localeService.translate("treeViewContextMenu.xrayOthers")||"X-Ray Others",doAction:function(e){const t=e.viewer.scene;t.setObjectsVisible(t.objectIds,!0),e.bimViewer.getConfig("xrayPickable")||t.setObjectsPickable(t.objectIds,!1),t.setObjectsXRayed(t.objectIds,!0),t.setObjectsSelected(t.selectedObjectIds,!1),e.treeViewPlugin.withNodeTree(e.treeViewNode,(e=>{if(e.objectId){const s=t.objects[e.objectId];s&&(s.xrayed=!1,s.pickable=!0)}}))}},{getTitle:e=>e.viewer.localeService.translate("treeViewContextMenu.xrayAll")||"X-Ray All",doAction:function(e){const t=e.viewer.scene;t.setObjectsVisible(t.objectIds,!0),t.setObjectsXRayed(t.objectIds,!0),t.setObjectsSelected(t.selectedObjectIds,!1),t.setObjectsPickable(t.objectIds,!1)}},{getTitle:e=>e.viewer.localeService.translate("treeViewContextMenu.xrayNone")||"X-Ray None",getEnabled:function(e){return e.viewer.scene.numXRayedObjects>0},doAction:function(e){const t=e.viewer.scene,s=t.xrayedObjectIds;t.setObjectsPickable(s,!0),t.setObjectsXRayed(s,!1)}}],[{getTitle:e=>e.viewer.localeService.translate("treeViewContextMenu.select")||"Select",doAction:function(e){e.treeViewPlugin.withNodeTree(e.treeViewNode,(t=>{if(t.objectId){const s=e.viewer.scene.objects[t.objectId];s&&(s.selected=!0,s.visible=!0)}}))}},{getTitle:e=>e.viewer.localeService.translate("treeViewContextMenu.undoSelect")||"Undo Select",doAction:function(e){e.treeViewPlugin.withNodeTree(e.treeViewNode,(t=>{if(t.objectId){const s=e.viewer.scene.objects[t.objectId];s&&(s.selected=!1)}}))}},{getTitle:e=>e.viewer.localeService.translate("treeViewContextMenu.selectNone")||"Select None",getEnabled:function(e){return e.viewer.scene.numSelectedObjects>0},doAction:function(e){e.viewer.scene.setObjectsSelected(e.viewer.scene.selectedObjectIds,!1)}}],[{getTitle:e=>e.viewer.localeService.translate("treeViewContextMenu.clearSlices")||"Clear Slices",getEnabled:function(e){return e.bimViewer.getNumSections()>0},doAction:function(e){e.bimViewer.clearSections()}}]]}}class I_ extends $v{constructor(e,t={}){if(super(e),!t.objectsTabElement)throw"Missing config: objectsTabElement";if(!t.showAllObjectsButtonElement)throw"Missing config: showAllObjectsButtonElement";if(!t.hideAllObjectsButtonElement)throw"Missing config: hideAllObjectsButtonElement";if(!t.objectsElement)throw"Missing config: objectsElement";if(this._objectsTabElement=t.objectsTabElement,this._showAllObjectsButtonElement=t.showAllObjectsButtonElement,this._hideAllObjectsButtonElement=t.hideAllObjectsButtonElement,this._objectsTabButtonElement=this._objectsTabElement.querySelector(".xeokit-tab-btn"),!this._objectsTabButtonElement)throw"Missing DOM element: ,xeokit-tab-btn";const s=t.objectsElement;this._treeView=new ZE(this.viewer,{containerElement:s,hierarchy:"containment",autoAddModels:!1,pruneEmptyNodes:!0}),this._treeViewContextMenu=new __(this.bimViewer,{hideOnAction:!0}),this._treeView.on("contextmenu",(e=>{this._treeViewContextMenu.context={bimViewer:this.bimViewer,viewer:e.viewer,treeViewPlugin:e.treeViewPlugin,treeViewNode:e.treeViewNode},this._treeViewContextMenu.show(e.event.pageX,e.event.pageY)})),this._treeView.on("nodeTitleClicked",(e=>{const t=this.viewer.scene,s=[];e.treeViewPlugin.withNodeTree(e.treeViewNode,(e=>{e.objectId&&s.push(e.objectId)}));e.treeViewNode.checked?(t.setObjectsXRayed(s,!1),t.setObjectsVisible(s,!1),t.setObjectsPickable(s,!0)):(t.setObjectsXRayed(s,!1),t.setObjectsVisible(s,!0),t.setObjectsPickable(s,!0))})),this._onModelLoaded=this.viewer.scene.on("modelLoaded",(e=>{if(this.viewer.metaScene.metaModels[e]){const t=this.bimViewer._modelsExplorer.getModelInfo(e);if(!t)return;this._treeView.addModel(e,{rootName:t.name})}})),this._onModelUnloaded=this.viewer.scene.on("modelUnloaded",(e=>{this.viewer.metaScene.metaModels[e]&&this._treeView.removeModel(e)})),this.bimViewer.on("reset",(()=>{this._treeView.collapse()}))}setEnabled(e){e?(this._objectsTabButtonElement.classList.remove("disabled"),this._showAllObjectsButtonElement.classList.remove("disabled"),this._hideAllObjectsButtonElement.classList.remove("disabled")):(this._objectsTabButtonElement.classList.add("disabled"),this._showAllObjectsButtonElement.classList.add("disabled"),this._hideAllObjectsButtonElement.classList.add("disabled"))}expandTreeViewToDepth(e){this._treeView.expandToDepth(e)}showNodeInTreeView(e){this._treeView.collapse(),this._treeView.showNode(e)}unShowNodeInTreeView(){this._treeView.unShowNode()}destroy(){super.destroy(),this._treeView.destroy(),this._treeViewContextMenu.destroy(),this.viewer.scene.off(this._onModelLoaded),this.viewer.scene.off(this._onModelUnloaded)}}class T_ extends $v{constructor(e,t={}){if(super(e),!t.classesTabElement)throw"Missing config: classesTabElement";if(!t.showAllClassesButtonElement)throw"Missing config: showAllClassesButtonElement";if(!t.hideAllClassesButtonElement)throw"Missing config: hideAllClassesButtonElement";if(!t.classesElement)throw"Missing config: classesElement";if(this._classesTabElement=t.classesTabElement,this._showAllClassesButtonElement=t.showAllClassesButtonElement,this._hideAllClassesButtonElement=t.hideAllClassesButtonElement,this._classesTabButtonElement=this._classesTabElement.querySelector(".xeokit-tab-btn"),!this._classesTabButtonElement)throw"Missing DOM element: xeokit-tab-btn";const s=t.classesElement;this._treeView=new ZE(this.viewer,{containerElement:s,hierarchy:"types",autoAddModels:!1,pruneEmptyNodes:!0}),this._treeViewContextMenu=new __(this.bimViewer,{hideOnAction:!0}),this._treeView.on("contextmenu",(e=>{this._treeViewContextMenu.context={bimViewer:this.bimViewer,viewer:e.viewer,treeViewPlugin:e.treeViewPlugin,treeViewNode:e.treeViewNode},this._treeViewContextMenu.show(e.event.pageX,e.event.pageY)})),this._treeView.on("nodeTitleClicked",(e=>{const t=this.viewer.scene,s=[];e.treeViewPlugin.withNodeTree(e.treeViewNode,(e=>{e.objectId&&s.push(e.objectId)}));e.treeViewNode.checked?(t.setObjectsXRayed(s,!1),t.setObjectsVisible(s,!1),t.setObjectsPickable(s,!0)):(t.setObjectsXRayed(s,!1),t.setObjectsVisible(s,!0),t.setObjectsPickable(s,!0))})),this._onModelLoaded=this.viewer.scene.on("modelLoaded",(e=>{if(this.viewer.metaScene.metaModels[e]){const t=this.bimViewer._modelsExplorer.getModelInfo(e);if(!t)return;this._treeView.addModel(e,{rootName:t.name})}})),this._onModelUnloaded=this.viewer.scene.on("modelUnloaded",(e=>{this.viewer.metaScene.metaModels[e]&&this._treeView.removeModel(e)})),this.bimViewer.on("reset",(()=>{this._treeView.collapse()}))}setEnabled(e){e?(this._classesTabButtonElement.classList.remove("disabled"),this._showAllClassesButtonElement.classList.remove("disabled"),this._hideAllClassesButtonElement.classList.remove("disabled")):(this._classesTabButtonElement.classList.add("disabled"),this._showAllClassesButtonElement.classList.add("disabled"),this._hideAllClassesButtonElement.classList.add("disabled"))}expandTreeViewToDepth(e){this._treeView.expandToDepth(e)}showNodeInTreeView(e){this._treeView.collapse(),this._treeView.showNode(e)}unShowNodeInTreeView(){this._treeView.unShowNode()}destroy(){super.destroy(),this._treeView.destroy(),this._treeViewContextMenu.destroy(),this.viewer.scene.off(this._onModelLoaded),this.viewer.scene.off(this._onModelUnloaded)}}const P_=p.vec3();class D_ extends $v{constructor(e,t={}){if(super(e),!t.storeysTabElement)throw"Missing config: storeysTabElement";if(!t.showAllStoreysButtonElement)throw"Missing config: showAllStoreysButtonElement";if(!t.hideAllStoreysButtonElement)throw"Missing config: hideAllStoreysButtonElement";if(!t.storeysElement)throw"Missing config: storeysElement";if(this._storeysTabElement=t.storeysTabElement,this._showAllStoreysButtonElement=t.showAllStoreysButtonElement,this._hideAllStoreysButtonElement=t.hideAllStoreysButtonElement,this._storeysTabButtonElement=this._storeysTabElement.querySelector(".xeokit-tab-btn"),!this._storeysTabButtonElement)throw"Missing DOM element: .xeokit-tab-btn";const s=t.storeysElement;this._treeView=new ZE(this.viewer,{containerElement:s,autoAddModels:!1,hierarchy:"storeys",autoExpandDepth:1}),this._treeViewContextMenu=new __(this.bimViewer,{hideOnAction:!0}),this._treeView.on("contextmenu",(e=>{this._treeViewContextMenu.context={bimViewer:this.bimViewer,viewer:e.viewer,treeViewPlugin:e.treeViewPlugin,treeViewNode:e.treeViewNode,pruneEmptyNodes:!0},this._treeViewContextMenu.show(e.event.pageX,e.event.pageY)})),this._treeView.on("nodeTitleClicked",(e=>{const t=this.viewer.scene,s=[];e.treeViewPlugin.withNodeTree(e.treeViewNode,(e=>{e.objectId&&s.push(e.objectId)}));e.treeViewNode.checked?(t.setObjectsXRayed(s,!1),t.setObjectsVisible(s,!1),t.setObjectsPickable(s,!0)):(t.setObjectsXRayed(s,!1),t.setObjectsVisible(s,!0),t.setObjectsPickable(s,!0))})),this._onModelLoaded=this.viewer.scene.on("modelLoaded",(e=>{const t=this.bimViewer._modelsExplorer.getModelInfo(e);t&&this._treeView.addModel(e,{rootName:t.name})})),this._onModelUnloaded=this.viewer.scene.on("modelUnloaded",(e=>{this.viewer.metaScene.metaModels[e]&&this._treeView.removeModel(e)})),this.bimViewer.on("reset",(()=>{this._treeView.collapse(),this._treeView.expandToDepth(1)}))}setEnabled(e){e?(this._storeysTabButtonElement.classList.remove("disabled"),this._showAllStoreysButtonElement.classList.remove("disabled"),this._hideAllStoreysButtonElement.classList.remove("disabled")):(this._storeysTabButtonElement.classList.add("disabled"),this._showAllStoreysButtonElement.classList.add("disabled"),this._hideAllStoreysButtonElement.classList.add("disabled"))}expandTreeViewToDepth(e){this._treeView.expandToDepth(e)}showNodeInTreeView(e){this._treeView.collapse(),this._treeView.showNode(e)}unShowNodeInTreeView(){this._treeView.unShowNode()}selectStorey(e,t){const s=this.viewer.metaScene.metaObjects[e];if(!s)return void this.error("selectStorey() - object is not found: '"+e+"'");if("IfcBuildingStorey"!==s.type)return void this.error("selectStorey() - object is not found: '"+e+"'");const i=s.getObjectIDsInSubtree();this._selectObjects(i,t)}_selectObjects(e,t){const s=this.viewer.scene,i=s.getAABB(e);this.viewer.cameraControl.pivotPos=p.getAABB3Center(i,P_),t?(s.setObjectsXRayed(s.objectIds,!0),s.setObjectsVisible(s.objectIds,!0),s.setObjectsPickable(s.objectIds,!1),s.setObjectsSelected(s.selectedObjectIds,!1),s.setObjectsXRayed(e,!1),s.setObjectsVisible(e,!0),s.setObjectsPickable(e,!0),this.viewer.cameraFlight.flyTo({aabb:i},(()=>{setTimeout((function(){s.setObjectsVisible(s.xrayedObjectIds,!1),s.setObjectsXRayed(s.xrayedObjectIds,!1)}),500),t()}))):(s.setObjectsVisible(s.objectIds,!1),s.setObjectsPickable(s.xrayedObjectIds,!0),s.setObjectsXRayed(s.xrayedObjectIds,!1),s.setObjectsSelected(s.selectedObjectIds,!1),s.setObjectsVisible(e,!0),this.viewer.cameraFlight.jumpTo({aabb:i}))}destroy(){super.destroy(),this._treeView.destroy(),this._treeViewContextMenu.destroy(),this.viewer.scene.off(this._onModelLoaded),this.viewer.scene.off(this._onModelUnloaded)}}const b_=p.vec3();class R_ extends $v{constructor(e,t){if(super(e,t),!t.buttonElement)throw"Missing config: buttonElement";this._saveOrthoActive=null,this._buttonElement=t.buttonElement,this._cameraControlNavModeMediator=t.cameraControlNavModeMediator,this._active=!1,this.on("enabled",(e=>{e?this._buttonElement.classList.remove("disabled"):this._buttonElement.classList.add("disabled")})),this._buttonElement.addEventListener("click",(e=>{this.getEnabled()&&(this.bimViewer._sectionTool.hideControl(),this.setActive(!this.getActive(),(()=>{}))),e.preventDefault()})),this.bimViewer.on("reset",(()=>{this.setActive(!0,(()=>{}))}))}setEnabled(e){super.setEnabled(e),this._saveOrthoActive=this.bimViewer._orthoMode.getActive()}setActive(e,t){this._active!==e?(this._active=e,e?(this._buttonElement.classList.add("active"),t?this._enterThreeDMode((()=>{this.fire("active",this._active),t()})):(this._enterThreeDMode(),this.fire("active",this._active))):(this._buttonElement.classList.remove("active"),t?this._exitThreeDMode((()=>{this.fire("active",this._active),t()})):(this._exitThreeDMode(),this.fire("active",this._active)))):t&&t()}_enterThreeDMode(e){const t=this.viewer,s=t.scene,i=s.getAABB(s.visibleObjectIds),r=p.getAABB3Diag(i),o=p.getAABB3Center(i,b_),n=Math.abs(r/Math.tan(32.5)),a=s.camera,l=a.yUp?[-1,-1,-1]:[1,1,1],h=a.yUp?[-1,1,-1]:[-1,1,1];t.cameraControl.pivotPos=o,this.bimViewer._navCubeMode.setActive(!0),this.bimViewer._firstPersonMode.setEnabled(!0),this._cameraControlNavModeMediator.setThreeDModeActive(!0),this.bimViewer._sectionTool.setEnabled(!0),this.bimViewer._orthoMode.setEnabled(!0),e?t.cameraFlight.flyTo({look:o,eye:[o[0]-n*l[0],o[1]-n*l[1],o[2]-n*l[2]],up:h,orthoScale:1.3*r,duration:1,projection:this._saveOrthoActive?"ortho":"perspective"},(()=>{e()})):t.cameraFlight.jumpTo({look:o,eye:[o[0]-n*l[0],o[1]-n*l[1],o[2]-n*l[2]],up:h,orthoScale:1.3*r,projection:this._saveOrthoActive?"ortho":"perspective"})}_exitThreeDMode(e){const t=this.viewer,s=t.scene,i=s.camera,r=s.getAABB(s.visibleObjectIds),o=p.getAABB3Center(r),n=p.getAABB3Diag(r),a=Math.abs(n/Math.tan(45*p.DEGTORAD)),l=1.3*n,h=b_;h[0]=o[0]+i.worldUp[0]*a,h[1]=o[1]+i.worldUp[1]*a,h[2]=o[2]+i.worldUp[2]*a;const c=p.mulVec3Scalar(i.worldForward,-1,[]);this.bimViewer._sectionTool.setActive(!1),this.bimViewer._firstPersonMode.setEnabled(!1),this._saveOrthoActive=this.bimViewer._orthoMode.getActive(),this.bimViewer._orthoMode.setEnabled(!1),this._cameraControlNavModeMediator.setThreeDModeActive(!1),e?t.cameraFlight.flyTo({eye:h,look:o,up:c,orthoScale:l,projection:"ortho"},(()=>{this.bimViewer._navCubeMode.setActive(!1)})):(t.cameraFlight.jumpTo({eye:h,look:o,up:c,orthoScale:l,projection:"ortho"}),this.bimViewer._navCubeMode.setActive(!1))}}class C_ extends n{constructor(e,t={}){super(t),this._bimViewer=e,this._buildMenu()}_buildMenu(){const e=[],t=[];this._bimViewer._enablePropertiesInspector&&e.push({getTitle:e=>e.viewer.localeService.translate("objectContextMenu.inspectProperties")||"Inspect Properties",doAction:e=>{const t=e.entity.id;e.bimViewer.showObjectProperties(t)}}),e.push({getTitle:e=>e.viewer.localeService.translate("objectContextMenu.showInTree")||"Show in Explorer",doAction:e=>{const t=e.entity.id;e.showObjectInExplorers(t)}}),t.push({getTitle:e=>e.viewer.localeService.translate("objectContextMenu.viewFit")||"View Fit",doAction:e=>{const t=e.viewer,s=t.scene,i=e.entity;t.cameraFlight.flyTo({aabb:i.aabb,duration:.5},(()=>{setTimeout((function(){s.setObjectsHighlighted(s.highlightedObjectIds,!1)}),500)})),t.cameraControl.pivotPos=p.getAABB3Center(i.aabb)}},{getTitle:e=>e.viewer.localeService.translate("canvasContextMenu.viewFitSelection")||"View Fit Selected",getEnabled:e=>e.viewer.scene.numSelectedObjects>0,doAction:e=>{const t=e.viewer,s=t.scene,i=s.getAABB(s.selectedObjectIds);t.cameraFlight.flyTo({aabb:i,duration:.5}),t.cameraControl.pivotPos=p.getAABB3Center(i)}},{getTitle:e=>e.viewer.localeService.translate("objectContextMenu.viewFitAll")||"View Fit All",doAction:e=>{const t=e.viewer,s=t.scene,i=s.getAABB(s.visibleObjectIds);t.cameraFlight.flyTo({aabb:i,duration:.5}),t.cameraControl.pivotPos=p.getAABB3Center(i)}}),this.items=[e,t,[{getTitle:e=>e.viewer.localeService.translate("objectContextMenu.hide")||"Hide",getEnabled:e=>e.entity.visible,doAction:e=>{e.entity.visible=!1}},{getTitle:e=>e.viewer.localeService.translate("objectContextMenu.hideOthers")||"Hide Others",doAction:e=>{const t=e.viewer,s=t.scene,i=e.entity,r=t.metaScene.metaObjects[i.id];r&&(s.setObjectsVisible(s.visibleObjectIds,!1),r.withMetaObjectsInSubtree((e=>{const t=s.objects[e.id];t&&(t.visible=!0)})))}},{getTitle:e=>e.viewer.localeService.translate("objectContextMenu.hideAll")||"Hide All",getEnabled:e=>e.viewer.scene.numVisibleObjects>0,doAction:e=>{e.viewer.scene.setObjectsVisible(e.viewer.scene.visibleObjectIds,!1)}},{getTitle:e=>e.viewer.localeService.translate("objectContextMenu.showAll")||"Show All",getEnabled:e=>{const t=e.viewer.scene;return t.numVisibleObjects<t.numObjects||e.viewer.scene.numXRayedObjects>0},doAction:e=>{const t=e.viewer.scene;t.setObjectsVisible(t.objectIds,!0),t.setObjectsPickable(t.xrayedObjectIds,!0),t.setObjectsXRayed(t.xrayedObjectIds,!1)}}],[{getTitle:e=>e.viewer.localeService.translate("objectContextMenu.xray")||"X-Ray",getEnabled:e=>!e.entity.xrayed,doAction:e=>{const t=e.entity;t.xrayed=!0,t.pickable=e.bimViewer.getConfig("xrayPickable")}},{getTitle:e=>e.viewer.localeService.translate("objectContextMenu.xrayOthers")||"X-Ray Others",doAction:e=>{const t=e.viewer,s=t.scene,i=e.entity,r=t.metaScene.metaObjects[i.id];r&&(s.setObjectsVisible(s.objectIds,!0),s.setObjectsXRayed(s.objectIds,!0),e.bimViewer.getConfig("xrayPickable")||s.setObjectsPickable(s.objectIds,!1),r.withMetaObjectsInSubtree((e=>{const t=s.objects[e.id];t&&(t.xrayed=!1,t.pickable=!0)})))}},{getTitle:e=>e.viewer.localeService.translate("objectContextMenu.xrayAll")||"X-Ray All",getEnabled:e=>{const t=e.viewer.scene;return t.numXRayedObjects<t.numObjects},doAction:e=>{const t=e.viewer.scene;t.setObjectsVisible(t.objectIds,!0),e.bimViewer.getConfig("xrayPickable")||t.setObjectsPickable(t.objectIds,!1),t.setObjectsXRayed(t.objectIds,!0)}},{getTitle:e=>e.viewer.localeService.translate("objectContextMenu.xrayNone")||"X-Ray None",getEnabled:e=>e.viewer.scene.numXRayedObjects>0,doAction:e=>{const t=e.viewer.scene,s=t.xrayedObjectIds;t.setObjectsPickable(s,!0),t.setObjectsXRayed(s,!1)}}],[{getTitle:e=>e.viewer.localeService.translate("objectContextMenu.select")||"Select",getEnabled:e=>!e.entity.selected,doAction:e=>{e.entity.selected=!0}},{getTitle:e=>e.viewer.localeService.translate("objectContextMenu.undoSelect")||"Undo Select",getEnabled:e=>e.entity.selected,doAction:e=>{e.entity.selected=!1}},{getTitle:e=>e.viewer.localeService.translate("objectContextMenu.selectNone")||"Select None",getEnabled:e=>e.viewer.scene.numSelectedObjects>0,doAction:e=>{e.viewer.scene.setObjectsSelected(e.viewer.scene.selectedObjectIds,!1)}}],[{getTitle:e=>e.viewer.localeService.translate("objectContextMenu.clearSlices")||"Clear Slices",getEnabled:e=>e.bimViewer.getNumSections()>0,doAction:e=>{e.bimViewer.clearSections()}}]]}}class x_ extends n{constructor(e={}){super({hideOnAction:e.hideOnAction,context:e.context,items:[[{getTitle:e=>e.viewer.localeService.translate("canvasContextMenu.viewFitAll")||"View Fit All",doAction:e=>{const t=e.viewer,s=t.scene,i=s.getAABB(s.visibleObjectIds);t.cameraFlight.flyTo({aabb:i,duration:.5}),t.cameraControl.pivotPos=p.getAABB3Center(i)}},{getTitle:e=>e.viewer.localeService.translate("canvasContextMenu.viewFitSelection")||"View Fit Selected",getEnabled:e=>e.viewer.scene.numSelectedObjects>0,doAction:e=>{const t=e.viewer,s=t.scene,i=s.getAABB(s.selectedObjectIds);t.cameraFlight.flyTo({aabb:i,duration:.5}),t.cameraControl.pivotPos=p.getAABB3Center(i)}}],[{getTitle:e=>e.viewer.localeService.translate("canvasContextMenu.hideAll")||"Hide All",getEnabled:e=>e.viewer.scene.numVisibleObjects>0,doAction:e=>{e.viewer.scene.setObjectsVisible(e.viewer.scene.visibleObjectIds,!1)}},{getTitle:e=>e.viewer.localeService.translate("canvasContextMenu.showAll")||"Show All",getEnabled:e=>{const t=e.viewer.scene;return t.numVisibleObjects<t.numObjects||e.viewer.scene.numXRayedObjects>0},doAction:e=>{const t=e.viewer.scene;t.setObjectsVisible(t.objectIds,!0),t.setObjectsXRayed(t.xrayedObjectIds,!1)}}],[{getTitle:e=>e.viewer.localeService.translate("canvasContextMenu.xRayAll")||"X-Ray All",getEnabled:e=>{const t=e.viewer.scene;return t.numXRayedObjects<t.numObjects},doAction:e=>{const t=e.viewer.scene;t.setObjectsVisible(t.objectIds,!0),t.setObjectsXRayed(t.objectIds,!0),e.bimViewer.getConfig("xrayPickable")||t.setObjectsPickable(t.objectIds,!1)}},{getTitle:e=>e.viewer.localeService.translate("canvasContextMenu.xRayNone")||"X-Ray None",getEnabled:e=>e.viewer.scene.numXRayedObjects>0,doAction:e=>{const t=e.viewer.scene.xrayedObjectIds;e.viewer.scene.setObjectsPickable(t,!0),e.viewer.scene.setObjectsXRayed(t,!1)}}],[{getTitle:e=>e.viewer.localeService.translate("canvasContextMenu.selectNone")||"Select None",getEnabled:e=>e.viewer.scene.numSelectedObjects>0,doAction:e=>{e.viewer.scene.setObjectsSelected(e.viewer.scene.selectedObjectIds,!1)}}],[{getTitle:e=>e.viewer.localeService.translate("canvasContextMenu.resetView")||"Reset View",doAction:e=>{e.bimViewer.resetView()}}],[{getTitle:e=>e.viewer.localeService.translate("canvasContextMenu.clearSlices")||"Clear Slices",getEnabled:e=>e.bimViewer.getNumSections()>0,doAction:e=>{e.bimViewer.clearSections()}}]]})}}class N_ extends $v{constructor(e,t){if(super(e,t),!t.buttonElement)throw"Missing config: buttonElement";this._buttonElement=t.buttonElement,this.on("enabled",(e=>{e?this._buttonElement.classList.remove("disabled"):this._buttonElement.classList.add("disabled")})),this._buttonElement.addEventListener("click",(e=>{this.getEnabled()&&this.setActive(!this.getActive(),(()=>{})),e.preventDefault()})),this.bimViewer.on("reset",(()=>{this.setActive(!1)})),this.viewer.camera.on("projection",(()=>{const e="ortho"===this.viewer.camera.projection;this._active=e,this._active?this._buttonElement.classList.add("active"):this._buttonElement.classList.remove("active")})),this._active=!1,this._buttonElement.classList.remove("active")}setActive(e,t){this._active!==e?(this._active=e,e?(this._buttonElement.classList.add("active"),t?this._enterOrthoMode((()=>{this.fire("active",this._active),t()})):(this._enterOrthoMode(),this.fire("active",this._active))):(this._buttonElement.classList.remove("active"),t?this._exitOrthoMode((()=>{this.fire("active",this._active),t()})):(this._exitOrthoMode(),this.fire("active",this._active)))):t&&t()}_enterOrthoMode(e){e?this.viewer.cameraFlight.flyTo({projection:"ortho",duration:.5},e):this.viewer.cameraFlight.jumpTo({projection:"ortho"})}_exitOrthoMode(e){e?this.viewer.cameraFlight.flyTo({projection:"perspective",duration:.5},e):this.viewer.cameraFlight.jumpTo({projection:"perspective"})}}class O_ extends $v{constructor(e,t={}){if(super(e),!t.propertiesTabElement)throw"Missing config: propertiesTabElement";if(!t.propertiesElement)throw"Missing config: propertiesElement";if(this._metaObject=null,this._propertiesTabElement=t.propertiesTabElement,this._propertiesElement=t.propertiesElement,this._propertiesTabButtonElement=this._propertiesTabElement.querySelector(".xeokit-tab-btn"),!this._propertiesTabButtonElement)throw"Missing DOM element: ,xeokit-tab-btn";this._onModelUnloaded=this.viewer.scene.on("modelUnloaded",(e=>{if(this._metaObject){const t=this._metaObject.metaModels;for(let s=0,i=t.length;s<i;s++)if(t[s].id===e)return void this.clear()}})),this.bimViewer.on("reset",(()=>{this.clear()})),document.addEventListener("click",this._clickListener=e=>{e.target.matches(".xeokit-accordion .xeokit-accordion-button")&&(e.target.parentElement.classList.contains("active")?e.target.parentElement.classList.remove("active"):e.target.parentElement.classList.add("active"))}),this.clear()}showObjectPropertySets(e){const t=this.viewer.metaScene.metaObjects[e];if(!t)return;const s=t.propertySets;s&&s.length>0?this._setPropertySets(t,s):this._setPropertySets(t),this._metaObject=t}clear(){const e=[],t=this.viewer.localeService.translate("propertiesInspector.noObjectSelectedWarning")||"No object inspected. Right-click or long-tab an object and select 'Inspect Properties' to view its properties here.";e.push('<div class="element-attributes">'),e.push(`<p class="xeokit-i18n subsubtitle no-object-selected-warning" data-xeokit-i18n="propertiesInspector.noObjectSelectedWarning">${t}</p>`),e.push("</div>");const s=e.join("");this._propertiesElement.innerHTML=s}_setPropertySets(e,t){const s=[];if(s.push('<div class="element-attributes">'),e)if(s.push('<table class="xeokit-table">'),s.push(`<tr><td class="td1">Name:</td><td class="td2">${e.name}</td></tr>`),e.type&&s.push(`<tr><td class="td1">Class:</td><td class="td2">${e.type}</td></tr>`),s.push(`<tr><td class="td1">UUID:</td><td class="td2">${e.originalSystemId}</td></tr>`),s.push(`<tr><td class="td1">Viewer ID:</td><td class="td2">${e.id}</td></tr>`),s.push("</table>"),t&&0!==t.length){s.push("</div>"),s.push('<div class="xeokit-accordion">');for(let e=0,i=t.length;e<i;e++){const i=t[e],r=i.properties||[];if(r.length>0){s.push(`<div class="xeokit-accordion-container">\n                                        <p class="xeokit-accordion-button"><span></span>${i.name}</p>                                       \n                                        <div class="xeokit-accordion-panel">                                           \n                                            <table class="xeokit-table"><tbody>`);for(let e=0,t=r.length;e<t;e++){const t=r[e];s.push(`<tr><td class="td1">${t.name||t.label}:</td><td class="td2">${t.value}</td></tr>`)}s.push("</tbody></table>\n                        </div>\n                        </div>")}}s.push("</div>")}else{const e=this.viewer.localeService.translate("propertiesInspector.noPropSetWarning")||"No properties sets found for this object";s.push(`<p class="xeokit-i18n subtitle xeokit-no-prop-set-warning" data-xeokit-i18n="propertiesInspector.noPropSetWarning">${e}</p>`),s.push("</div>")}else s.push('<p class="subsubtitle">No object selected</p>');this._propertiesElement.innerHTML=s.join("")}setEnabled(e){e?this._propertiesTabButtonElement.classList.remove("disabled"):this._propertiesTabButtonElement.classList.add("disabled")}destroy(){super.destroy(),this.viewer.scene.off(this._onModelLoaded),this.viewer.scene.off(this._onModelUnloaded),document.removeEventListener("click",this._clickListener)}}const S_=new Float32Array(3);class w_{constructor(e){if(!e)throw"Parameter expected: cfg";if(!e.viewer)throw"Parameter expected: cfg.viewer";this.viewer=e.viewer,this._maxTreeDepth=e.maxTreeDepth||15,this._root=null,this._needsRebuild=!0,this._onModelLoaded=this.viewer.scene.on("modelLoaded",(e=>{this._needsRebuild=!0})),this._onModelUnloaded=this.viewer.scene.on("modelUnloaded",(e=>{this._needsRebuild=!0}))}get root(){return this._needsRebuild&&this._rebuild(),this._root}_rebuild(){const e=this.viewer.scene;this._root={aabb:e.getAABB()};for(let t in e.objects){const s=e.objects[t];this._insertEntity(this._root,s,1)}this._needsRebuild=!1}_insertEntity(e,t,s){const i=t.aabb;if(s>=this._maxTreeDepth)return e.entities=e.entities||[],void e.entities.push(t);if(e.left&&p.containsAABB3(e.left.aabb,i))return void this._insertEntity(e.left,t,s+1);if(e.right&&p.containsAABB3(e.right.aabb,i))return void this._insertEntity(e.right,t,s+1);const r=e.aabb;S_[0]=r[3]-r[0],S_[1]=r[4]-r[1],S_[2]=r[5]-r[2];let o=0;if(S_[1]>S_[o]&&(o=1),S_[2]>S_[o]&&(o=2),!e.left){const n=r.slice();if(n[o+3]=(r[o]+r[o+3])/2,e.left={aabb:n},p.containsAABB3(n,i))return void this._insertEntity(e.left,t,s+1)}if(!e.right){const n=r.slice();if(n[o]=(r[o]+r[o+3])/2,e.right={aabb:n},p.containsAABB3(n,i))return void this._insertEntity(e.right,t,s+1)}e.entities=e.entities||[],e.entities.push(t)}destroy(){const e=this.viewer.scene;e.off(this._onModelLoaded),e.off(this._onModelUnloaded),this._root=null,this._needsRebuild=!0}}class M_ extends $v{constructor(e,t){if(super(e),!t.buttonElement)throw"Missing config: buttonElement";this._objectsKdTree3=t.objectsKdTree3,this._marquee=p.AABB2(),this._marqueeFrustum=new Zo,this._marqueeFrustumProjMat=p.mat4(),this._marqueeDir=!1;const s=t.buttonElement;this.on("enabled",(e=>{e?s.classList.remove("disabled"):s.classList.add("disabled")})),this.on("active",(e=>{e?(s.classList.add("active"),this._objectsKdTree3.root):s.classList.remove("active")})),s.addEventListener("click",(e=>{if(this.getEnabled()){const e=this.getActive();this.setActive(!e)}e.preventDefault()})),this.bimViewer.on("reset",(()=>{this.setActive(!1)}));const i=this.viewer.scene,r=i.canvas.canvas;this._marqueeElement=document.createElement("div"),document.body.appendChild(this._marqueeElement);const o=this._marqueeElement.style;let n,a,l,h,c,u,A,d;o.position="absolute",o["z-index"]="40000005",o.width="8px",o.height="8px",o.visibility="hidden",o.top="0px",o.left="0px",o["box-shadow"]="0 2px 5px 0 #182A3D;",o.opacity=1,o["pointer-events"]="none";let f=!1,m=!1;r.addEventListener("mousedown",(e=>{if(!this.getActive()||!this.getEnabled())return;if(0!==e.button)return;const t=this.bimViewer.viewer.scene.input;t.keyDown[t.KEY_CTRL]||i.setObjectsSelected(i.selectedObjectIds,!1),n=e.pageX,a=e.pageY,o.visibility="visible",o.left=`${n}px`,o.top=`${a}px`,o.width="0px",o.height="0px",o.display="block",c=e.offsetX,u=e.offsetY,f=!0,this.viewer.cameraControl.pointerEnabled=!1})),r.addEventListener("mouseup",(e=>{if(!this.getActive()||!this.getEnabled())return;if(!f&&!m)return;if(0!==e.button)return;l=e.pageX,h=e.pageY;const t=Math.abs(l-n),s=Math.abs(h-a);o.width=`${t}px`,o.height=`${s}px`,o.visibility="hidden",f=!1,this.viewer.cameraControl.pointerEnabled=!0,m&&(m=!1),(t>3||s>3)&&this._marqueePick()})),document.addEventListener("mouseup",(e=>{this.getActive()&&this.getEnabled()&&0===e.button&&f&&(o.visibility="hidden",f=!1,m=!0,this.viewer.cameraControl.pointerEnabled=!0)}),!0),r.addEventListener("mousemove",(e=>{if(!this.getActive()||!this.getEnabled())return;if(0!==e.button)return;if(!f)return;const t=e.pageX,s=e.pageY,i=t-n,r=s-a;o.width=`${Math.abs(i)}px`,o.height=`${Math.abs(r)}px`,o.left=`${Math.min(n,t)}px`,o.top=`${Math.min(a,s)}px`,A=e.offsetX,d=e.offsetY;const l=c<A?0:1;this._setMarqueeDir(l),this._marquee[0]=Math.min(c,A),this._marquee[1]=Math.min(u,d),this._marquee[2]=Math.max(c,A),this._marquee[3]=Math.max(u,d)}))}_setMarqueeDir(e){e!==this._marqueeDir&&(this._marqueeElement.style["background-image"]=0===e?"url(\"data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='6' ry='6' stroke='%23333' stroke-width='4'/%3e%3c/svg%3e\")":"url(\"data:image/svg+xml,%3csvg width='100%25' height='100%25' xmlns='http://www.w3.org/2000/svg'%3e%3crect width='100%25' height='100%25' fill='none' rx='6' ry='6' stroke='%23333' stroke-width='4' stroke-dasharray='6%2c 14' stroke-dashoffset='0' stroke-linecap='square'/%3e%3c/svg%3e\")",this._marqueeDir=e)}_marqueePick(){this._buildMarqueeFrustum();const e=[],t=(s,i=Zo.INTERSECT)=>{if(i===Zo.INTERSECT&&(i=qo(this._marqueeFrustum,s.aabb)),i!==Zo.OUTSIDE){if(s.entities){const t=s.entities;for(let s=0,i=t.length;s<i;s++){const i=t[s];if(!i.visible)continue;const r=i.aabb;if(0===this._marqueeDir){qo(this._marqueeFrustum,r)===Zo.INSIDE&&e.push(i)}else{qo(this._marqueeFrustum,r)!==Zo.OUTSIDE&&e.push(i)}}}s.left&&t(s.left,i),s.right&&t(s.right,i)}};t(this._objectsKdTree3.root);for(let t=0,s=e.length;t<s;t++)e[t].selected=!0;return e}_buildMarqueeFrustum(){const e=this.viewer.scene.canvas.canvas,t=2/e.clientWidth,s=2/e.clientHeight,i=e.clientHeight/e.clientWidth,r=this._marquee[0]*t-1,o=this._marquee[2]*t-1,n=-this._marquee[3]*s+1,a=-this._marquee[1]*s+1,l=this.viewer.scene.camera.frustum.near*(17*i);p.frustumMat4(r,o,n*i,a*i,l,1e4,this._marqueeFrustumProjMat),function(e,t,s){const i=p.mulMat4(s,t,Yo),r=i[0],o=i[1],n=i[2],a=i[3],l=i[4],h=i[5],c=i[6],u=i[7],A=i[8],d=i[9],f=i[10],m=i[11],g=i[12],y=i[13],E=i[14],v=i[15];e.planes[0].set(a-r,u-l,m-A,v-g),e.planes[1].set(a+r,u+l,m+A,v+g),e.planes[2].set(a-o,u-h,m-d,v-y),e.planes[3].set(a+o,u+h,m+d,v+y),e.planes[4].set(a-n,u-c,m-f,v-E),e.planes[5].set(a+n,u+c,m+f,v+E)}(this._marqueeFrustum,this.viewer.scene.camera.viewMatrix,this._marqueeFrustumProjMat)}}function B_(e){const t="xeokit-tab",s="active";function i(e){let i=e.parentNode.querySelectorAll("."+t);for(let t=0;t<i.length;t++){let r=i[t];r.isEqualNode(e)?r.classList.add(s):r.classList.remove(s)}}let r=e.querySelectorAll(".xeokit-tabs");for(let e=0;e<r.length;e++){let s=r[e].querySelectorAll("."+t);i(s[0]);for(let e=0;e<s.length;e++){s[e].querySelector(".xeokit-tab-btn").addEventListener("click",(function(e){e.preventDefault(),this.classList.contains("disabled")||i(e.target.parentNode)}))}}}e.BIMViewer=class extends $v{constructor(e,t={}){if(!t.canvasElement)throw"Config expected: canvasElement";if(!t.explorerElement)throw"Config expected: explorerElement";if(!t.toolbarElement)throw"Config expected: toolbarElement";if(!t.navCubeCanvasElement)throw"Config expected: navCubeCanvasElement";const s=t.canvasElement,i=t.explorerElement,r=t.inspectorElement,o=t.toolbarElement,n=t.navCubeCanvasElement,a=t.busyModelBackdropElement;i.oncontextmenu=e=>{e.preventDefault()},o.oncontextmenu=e=>{e.preventDefault()},n.oncontextmenu=e=>{e.preventDefault()};const l=new vy({localeService:t.localeService,canvasElement:s,keyboardEventsElement:t.keyboardEventsElement,transparent:!1,backgroundColor:[1,1,1],backgroundColorFromAmbientLight:!1,saoEnabled:!0,pbrEnabled:!1,colorTextureEnabled:!0});super(null,t,e,l),this._configs={},this._enableAddModels=!!t.enableEditModels,this._enablePropertiesInspector=!!t.inspectorElement,this.viewer=l,this._objectsKdTree3=new w_({viewer:l}),this._customizeViewer(),this._initCanvasContextMenus(),i.innerHTML=function(e){return'<div class="xeokit-tabs"> \n    <div class="xeokit-tab xeokit-modelsTab">\n        <a class="xeokit-i18n xeokit-tab-btn" href="#" data-xeokit-i18n="modelsExplorer.title">Models</a>\n        <div class="xeokit-tab-content">\n            <div class="xeokit-btn-group">\n                <button type="button" class="xeokit-i18n xeokit-loadAllModels xeokit-btn disabled" data-xeokit-i18n="modelsExplorer.loadAll" data-xeokit-i18ntip="modelsExplorer.loadAllTip" data-tippy-content="Load all models">Load all</button>\n                <button type="button" class="xeokit-i18n xeokit-unloadAllModels xeokit-btn disabled" data-xeokit-i18n="modelsExplorer.unloadAll"  data-xeokit-i18ntip="modelsExplorer.unloadAllTip" data-tippy-content="Unload all models">Unload all</button>'+(e.enableEditModels?'<button type="button" class="xeokit-i18n xeokit-addModel xeokit-btn disabled" data-xeokit-i18n="modelsExplorer.add"  data-xeokit-i18ntip="modelsExplorer.addTip" data-tippy-content="Add model">Add</button>':"")+'</div>\n            <div class="xeokit-models" ></div>\n        </div>\n    </div>\n    <div class="xeokit-tab xeokit-objectsTab">\n        <a class="xeokit-i18n xeokit-tab-btn disabled" href="#" data-xeokit-i18n="objectsExplorer.title">Objects</a>\n        <div class="xeokit-tab-content">\n         <div class="xeokit-btn-group">\n            <button type="button" class="xeokit-i18n xeokit-showAllObjects xeokit-btn disabled" data-xeokit-i18n="objectsExplorer.showAll" data-xeokit-i18ntip="objectsExplorer.showAllTip" data-tippy-content="Show all objects">Show all</button>\n            <button type="button" class="xeokit-i18n xeokit-hideAllObjects xeokit-btn disabled" data-xeokit-i18n="objectsExplorer.hideAll" data-xeokit-i18ntip="objectsExplorer.hideAllTip" data-tippy-content="Hide all objects">Hide all</button>\n        </div>\n        <div class="xeokit-objects xeokit-tree-panel" ></div>\n        </div>\n    </div>\n    <div class="xeokit-i18n xeokit-tab xeokit-classesTab">\n        <a class="xeokit-i18n xeokit-tab-btn disabled" href="#" data-xeokit-i18n="classesExplorer.title">Classes</a>\n        <div class="xeokit-tab-content">\n            <div class="xeokit-btn-group">\n                <button type="button" class="xeokit-i18n xeokit-showAllClasses xeokit-btn disabled" data-xeokit-i18n="classesExplorer.showAll"  data-xeokit-i18ntip="classesExplorer.hideAllTip" data-tippy-content="Show all classes">Show all</button>\n                <button type="button" class="xeokit-i18n xeokit-hideAllClasses xeokit-btn disabled" data-xeokit-i18n="classesExplorer.hideAll" data-xeokit-i18ntip="classesExplorer.hideAllTip" data-tippy-content="Hide all classes">Hide all</button>\n            </div>\n            <div class="xeokit-classes xeokit-tree-panel" ></div>\n        </div>\n    </div>\n     <div class="xeokit-tab xeokit-storeysTab">\n        <a class="xeokit-i18n xeokit-tab-btn disabled" href="#" data-xeokit-i18n="storeysExplorer.title">Storeys</a>\n        <div class="xeokit-tab-content">\n         <div class="xeokit-btn-group">\n                <button type="button" class="xeokit-i18n xeokit-showAllStoreys xeokit-btn disabled" data-xeokit-i18n="storeysExplorer.showAll" data-xeokit-i18ntip="storeysExplorer.showAllTip" data-tippy-content="Show all storeys">Show all</button>\n                <button type="button" class="xeokit-i18n xeokit-hideAllStoreys xeokit-btn disabled" data-xeokit-i18n="storeysExplorer.hideAll" data-xeokit-i18ntip="storeysExplorer.hideAllTip" data-tippy-content="Hide all storeys">Hide all</button>\n            </div>\n             <div class="xeokit-storeys xeokit-tree-panel"></div>\n        </div>\n    </div>\n</div>'}(t),o.innerHTML='<div class="xeokit-toolbar">\n    \x3c!-- Reset button --\x3e\n    <div class="xeokit-btn-group">\n        <button type="button" class="xeokit-i18n xeokit-reset xeokit-btn fa fa-home fa-2x disabled" data-xeokit-i18ntip="toolbar.resetViewTip" data-tippy-content="Reset view"></button>\n    </div>\n    <div class="xeokit-btn-group" role="group">\n        \x3c!-- 3D Mode button --\x3e\n        <button type="button" class="xeokit-i18n xeokit-threeD xeokit-btn fa fa-cube fa-2x disabled" data-xeokit-i18ntip="toolbar.toggle2d3dTip" data-tippy-content="Toggle 2D/3D"></button>\n        \x3c!-- Perspective/Ortho Mode button --\x3e\n        <button type="button" class="xeokit-i18n xeokit-ortho xeokit-btn fa fa-th fa-2x  disabled" data-xeokit-i18ntip="toolbar.togglePerspectiveTip" data-tippy-content="Toggle Perspective/Ortho"></button>\n        \x3c!-- Fit button --\x3e\n        <button type="button" class="xeokit-i18n xeokit-fit xeokit-btn fa fa-crop fa-2x disabled" data-xeokit-i18ntip="toolbar.viewFitTip" data-tippy-content="View fit"></button>\n        \x3c!-- First Person mode button --\x3e\n        <button type="button" class="xeokit-i18n xeokit-firstPerson xeokit-btn fa fa-male fa-2x disabled" data-xeokit-i18ntip="toolbar.firstPersonTip" data-tippy-content="Toggle first-person mode"></button>\n          \x3c!-- Show/hide IFCSpaces --\x3e\n        <button type="button" class="xeokit-i18n xeokit-showSpaces xeokit-btn fab fa-codepen fa-2x disabled" data-xeokit-i18ntip="toolbar.showSpacesTip" data-tippy-content="Show IFCSpaces"></button>   \n    </div>\n    \x3c!-- Tools button group --\x3e\n    <div class="xeokit-btn-group" role="group">\n        \x3c!-- Hide tool button --\x3e\n        <button type="button" class="xeokit-i18n xeokit-hide xeokit-btn fa fa-eraser fa-2x disabled" data-xeokit-i18ntip="toolbar.hideObjectsTip" data-tippy-content="Hide objects"></button>\n        \x3c!-- Select tool button --\x3e\n        <button type="button" class="xeokit-i18n xeokit-select xeokit-btn fa fa-mouse-pointer fa-2x disabled" data-xeokit-i18ntip="toolbar.selectObjectsTip" data-tippy-content="Select objects"></button>    \n          \x3c!-- Marquee select tool button --\x3e\n        <button type="button" class="xeokit-i18n xeokit-marquee xeokit-btn fas fa-object-group fa-2x disabled" data-xeokit-i18ntip="toolbar.marqueeSelectTip" data-tippy-content="Marquee select objects"></button>    \n        \x3c!-- section tool button --\x3e\n        <button type="button" class="xeokit-i18n xeokit-section xeokit-btn fa fa-cut fa-2x disabled" data-xeokit-i18ntip="toolbar.sliceObjectsTip" data-tippy-content="Slice objects">\n            <div class="xeokit-i18n xeokit-section-menu-button disabled" data-xeokit-i18ntip="toolbar.slicesMenuTip"  data-tippy-content="Slices menu">\n                <span class="xeokit-arrow-down xeokit-section-menu-button-arrow"></span>\n            </div>\n            <div class="xeokit-i18n xeokit-section-counter" data-xeokit-i18ntip="toolbar.numSlicesTip" data-tippy-content="Number of existing slices"></div>\n        </button>\n    </div>\n</div>',this._enablePropertiesInspector&&(r.innerHTML='<div class="xeokit-tabs">  \n    <div class="xeokit-tab xeokit-propertiesTab">\n        <a class="xeokit-i18n xeokit-tab-btn disabled" href="#" data-xeokit-i18n="propertiesInspector.title">Properties</a>\n        <div class="xeokit-tab-content">        \n        <div class="xeokit-properties"></div>\n        </div>\n    </div>\n</div>'),this._explorerElement=i,this._inspectorElement=r,B_(i),this._enablePropertiesInspector&&B_(r),this._modelsExplorer=new E_(this,{modelsTabElement:i.querySelector(".xeokit-modelsTab"),loadModelsButtonElement:i.querySelector(".xeokit-loadAllModels"),unloadModelsButtonElement:i.querySelector(".xeokit-unloadAllModels"),addModelButtonElement:i.querySelector(".xeokit-addModel"),modelsElement:i.querySelector(".xeokit-models"),enableEditModels:this._enableAddModels}),this._objectsExplorer=new I_(this,{objectsTabElement:i.querySelector(".xeokit-objectsTab"),showAllObjectsButtonElement:i.querySelector(".xeokit-showAllObjects"),hideAllObjectsButtonElement:i.querySelector(".xeokit-hideAllObjects"),objectsElement:i.querySelector(".xeokit-objects")}),this._classesExplorer=new T_(this,{classesTabElement:i.querySelector(".xeokit-classesTab"),showAllClassesButtonElement:i.querySelector(".xeokit-showAllClasses"),hideAllClassesButtonElement:i.querySelector(".xeokit-hideAllClasses"),classesElement:i.querySelector(".xeokit-classes")}),this._storeysExplorer=new D_(this,{storeysTabElement:i.querySelector(".xeokit-storeysTab"),showAllStoreysButtonElement:i.querySelector(".xeokit-showAllStoreys"),hideAllStoreysButtonElement:i.querySelector(".xeokit-hideAllStoreys"),storeysElement:i.querySelector(".xeokit-storeys")}),this._enablePropertiesInspector&&(this._propertiesInspector=new O_(this,{propertiesTabElement:r.querySelector(".xeokit-propertiesTab"),propertiesElement:r.querySelector(".xeokit-properties")})),this._resetAction=new s_(this,{buttonElement:o.querySelector(".xeokit-reset"),active:!1}),this._fitAction=new r_(this,{buttonElement:o.querySelector(".xeokit-fit"),active:!1});const h=new function(e){let t=!1;this.setThreeDModeActive=s=>{s?(e._firstPersonMode.setActive(!1),e._marqueeSelectionTool.setEnabled(!0),e.viewer.cameraControl.navMode="orbit"):(e._marqueeSelectionTool.setEnabled(!1),e._marqueeSelectionTool.setActive(!1),e._firstPersonMode.setActive(!1),e.viewer.cameraControl.navMode="planView"),t=s},this.setFirstPersonModeActive=s=>{e.viewer.cameraControl.navMode=s?"firstPerson":t?"orbit":"planView"}}(this);this._threeDMode=new R_(this,{buttonElement:o.querySelector(".xeokit-threeD"),cameraControlNavModeMediator:h,active:!1}),this._orthoMode=new N_(this,{buttonElement:o.querySelector(".xeokit-ortho"),active:!1}),this._firstPersonMode=new o_(this,{buttonElement:o.querySelector(".xeokit-firstPerson"),cameraControlNavModeMediator:h,active:!1}),this._hideTool=new n_(this,{buttonElement:o.querySelector(".xeokit-hide"),active:!1}),this._selectionTool=new a_(this,{buttonElement:o.querySelector(".xeokit-select"),active:!1}),this._marqueeSelectionTool=new M_(this,{buttonElement:o.querySelector(".xeokit-marquee"),active:!1,objectsKdTree3:this._objectsKdTree3}),this._showSpacesMode=new l_(this,{buttonElement:o.querySelector(".xeokit-showSpaces"),active:!1}),this._queryTool=new h_(this,{active:!1}),this._sectionTool=new p_(this,{buttonElement:o.querySelector(".xeokit-section"),counterElement:o.querySelector(".xeokit-section-counter"),menuButtonElement:o.querySelector(".xeokit-section-menu-button"),menuButtonArrowElement:o.querySelector(".xeokit-section-menu-button-arrow"),active:!1}),this._navCubeMode=new d_(this,{navCubeCanvasElement:n,active:!0}),this._busyModal=new e_(this,{busyModalBackdropElement:a}),this._threeDMode.setActive(!0),this._firstPersonMode.setActive(!1),this._navCubeMode.setActive(!0),this._modelsExplorer.on("modelLoaded",(e=>{this._modelsExplorer.getNumModelsLoaded()>0&&this.setControlsEnabled(!0),this.fire("modelLoaded",e)})),this._modelsExplorer.on("modelUnloaded",(e=>{0===this._modelsExplorer.getNumModelsLoaded()&&(this.setControlsEnabled(!1),this.openTab("models")),this.fire("modelUnloaded",e)})),this._resetAction.on("reset",(()=>{this.fire("reset",!0)})),this._mutexActivation([this._hideTool,this._selectionTool,this._marqueeSelectionTool,this._sectionTool]),i.querySelector(".xeokit-showAllObjects").addEventListener("click",(e=>{this.setAllObjectsVisible(!0),this.setAllObjectsXRayed(!1),e.preventDefault()})),i.querySelector(".xeokit-hideAllObjects").addEventListener("click",(e=>{this.setAllObjectsVisible(!1),e.preventDefault()})),i.querySelector(".xeokit-showAllClasses").addEventListener("click",(e=>{this.setAllObjectsVisible(!0),this.setAllObjectsXRayed(!1),e.preventDefault()})),i.querySelector(".xeokit-hideAllClasses").addEventListener("click",(e=>{this.setAllObjectsVisible(!1),e.preventDefault()})),i.querySelector(".xeokit-showAllStoreys").addEventListener("click",(e=>{this.setAllObjectsVisible(!0),this.setAllObjectsXRayed(!1),e.preventDefault()})),i.querySelector(".xeokit-hideAllStoreys").addEventListener("click",(e=>{this.setAllObjectsVisible(!1),e.preventDefault()})),i.querySelector(".xeokit-loadAllModels").addEventListener("click",(e=>{this.setControlsEnabled(!1),this.loadAllModels(),e.preventDefault()})),i.querySelector(".xeokit-unloadAllModels").addEventListener("click",(e=>{this.setControlsEnabled(!1),this._modelsExplorer.unloadAllModels(),e.preventDefault()})),this._enableAddModels&&i.querySelector(".xeokit-addModel").addEventListener("click",(e=>{this.fire("addModel",{}),e.preventDefault()})),this._bcfViewpointsPlugin=new Oo(this.viewer,{}),this._fastNavPlugin=new _y(l,{hideEdges:!0,hideSAO:!0,hidePBR:!1,hideColorTexture:!1,hideTransparentObjects:!1,scaleCanvasResolution:!1,scaleCanvasResolutionFactor:.6}),this.viewer.scene.on("rendered",(()=>{const e=this._fastNavPlugin;e.hideEdges=5<d.frame.drawElements+d.frame.drawArrays,e.scaleCanvasResolution=1e3<d.frame.drawElements+d.frame.drawArrays})),this._initConfigs(),this.setControlsEnabled(!1)}get localeService(){return this.viewer.localeService}_customizeViewer(){const e=this.viewer.scene;e.xrayMaterial.fill=!1,e.xrayMaterial.fillAlpha=.3,e.xrayMaterial.fillColor=[0,0,0],e.xrayMaterial.edges=!0,e.xrayMaterial.edgeAlpha=.1,e.xrayMaterial.edgeColor=[0,0,0],e.highlightMaterial.edges=!0,e.highlightMaterial.edgeColor=[1,1,0],e.highlightMaterial.edgeAlpha=.9,e.highlightMaterial.fill=!0,e.highlightMaterial.fillAlpha=.1,e.highlightMaterial.fillColor=[1,0,0],e.pointsMaterial.pointSize=1,e.pointsMaterial.roundPoints=!0,e.pointsMaterial.perspectivePoints=!0,e.pointsMaterial.minPerspectivePointSize=2,e.pointsMaterial.maxPerspectivePointSize=4,this.viewer.cameraControl.panRightClick=!0,this.viewer.cameraControl.followPointer=!0,this.viewer.cameraControl.doublePickFlyTo=!1,this.viewer.cameraControl.smartPivot=!0,this.viewer.cameraControl.keyboardDollyRate=100,this.viewer.cameraControl.mouseWheelDollyRate=100,this.viewer.cameraControl.dollyInertia=0,this.viewer.cameraControl.dollyMinSpeed=.04,this.viewer.cameraControl.dollyProximityThreshold=30;const t=document.createRange().createContextualFragment("<div class='xeokit-camera-pivot-marker'></div>").firstChild;document.body.appendChild(t),this.viewer.cameraControl.pivotElement=t,e.camera.perspective.near=.01,e.camera.perspective.far=3e3,e.camera.ortho.near=.01,e.camera.ortho.far=2e3;const s=e.sao;s.enabled=!0,s.numSamples=50,s.kernelRadius=200}_initCanvasContextMenus(){this._canvasContextMenu=new x_(this,{hideOnAction:!0}),this._objectContextMenu=new C_(this,{hideOnAction:!0}),this.viewer.cameraControl.on("rightClick",(e=>{e.event;const t=this.viewer.scene.pick({canvasPos:e.canvasPos});t&&t.entity.isObject?(this._canvasContextMenu.hide(),this._objectContextMenu.context={viewer:this.viewer,bimViewer:this,showObjectInExplorers:e=>{const t=this.getOpenTab();"objects"!==t&&"classes"!==t&&"storeys"!==t&&this.openTab("objects"),this.showObjectInExplorers(e)},entity:t.entity},this._objectContextMenu.show(e.pagePos[0],e.pagePos[1])):(this._objectContextMenu.hide(),this._canvasContextMenu.context={viewer:this.viewer,bimViewer:this},this._canvasContextMenu.show(e.pagePos[0],e.pagePos[1]))}))}_initConfigs(){this.setConfigs({cameraNear:"0.05",cameraFar:"3000.0",smartPivot:"true",saoEnabled:"true",pbrEnabled:"false",saoBias:"0.5",saoIntensity:"0.15",saoNumSamples:"40",saoKernelRadius:"100",edgesEnabled:!0,xrayContext:!0,xrayPickable:!1,selectedGlowThrough:!0,highlightGlowThrough:!0,backgroundColor:[1,1,1],objectColorSource:"model",externalMetadata:!1})}setConfigs(e){for(let t in e)if(e.hasOwnProperty(t)){const s=e[t];this.setConfig(t,s)}}setConfig(e,t){function s(e){return!0===e||"true"===e}try{switch(e){case"backgroundColor":const i=t;this.setBackgroundColor(i),this._configs[e]=i;break;case"cameraNear":const r=parseFloat(t);this.viewer.scene.camera.perspective.near=r,this.viewer.scene.camera.ortho.near=r,this._configs[e]=r;break;case"cameraFar":const o=parseFloat(t);this.viewer.scene.camera.perspective.far=o,this._configs[e]=o;break;case"smartPivot":this.viewer.cameraControl.smartPivot=this._configs[e]=s(t);break;case"saoEnabled":this._fastNavPlugin.saoEnabled=this._configs[e]=s(t);break;case"saoBias":this.viewer.scene.sao.bias=parseFloat(t);break;case"saoIntensity":this.viewer.scene.sao.intensity=parseFloat(t);break;case"saoKernelRadius":this.viewer.scene.sao.kernelRadius=this._configs[e]=parseFloat(t);break;case"saoNumSamples":this.viewer.scene.sao.numSamples=this._configs[e]=parseFloat(t);break;case"saoBlur":this.viewer.scene.sao.blur=this._configs[e]=s(t);break;case"edgesEnabled":this._fastNavPlugin.edgesEnabled=this._configs[e]=s(t);break;case"pbrEnabled":this._fastNavPlugin.pbrEnabled=this._configs[e]=s(t);break;case"viewFitFOV":this.viewer.cameraFlight.fitFOV=this._configs[e]=parseFloat(t);break;case"viewFitDuration":this.viewer.cameraFlight.duration=this._configs[e]=parseFloat(t);break;case"perspectiveFOV":this.viewer.camera.perspective.fov=this._configs[e]=parseFloat(t);break;case"excludeUnclassifiedObjects":case"xrayPickable":case"externalMetadata":this._configs[e]=s(t);break;case"objectColorSource":this.setObjectColorSource(t),this._configs[e]=t;break;case"xrayContext":this._configs[e]=t;break;case"selectedGlowThrough":const n=this._configs[e]=s(t),a=this.viewer.scene.selectedMaterial;a.glowThrough=n,a.fillAlpha=n?.5:1,a.edgeAlpha=n?.5:1;break;case"highlightGlowThrough":const l=this._configs[e]=s(t),h=this.viewer.scene.highlightMaterial;h.glowThrough=l,h.fillAlpha=l?.5:1,h.edgeAlpha=l?.5:1;break;case"showSpaces":this._configs[e]=s(t),this._showSpacesMode.setActive(t);break;default:this.error("setConfig() - unsupported configuration: '"+e+"'")}}catch(t){this.error("setConfig() - failed to configure '"+e+"': "+t)}}getConfig(e){return this._configs[e]}getProjectsInfo(e,t){e?this.server.getProjects(e,(e=>{this.error("getProjectsInfo() - "+e),t&&t(e)})):this.error("getProjectsInfo() - Argument expected: 'done'")}getProjectInfo(e,t,s){e?t?this.server.getProject(e,t,(e=>{this.error("getProjectInfo() - "+e),s&&s(e)})):this.error("getProjectInfo() - Argument expected: 'done'"):this.error("getProjectInfo() - Argument expected: projectId")}getObjectInfo(e,t,s,i,r){e?t?s?i?this.server.getObjectInfo(e,t,s,i,(e=>{r&&r(e)})):this.error("getProjectInfo() - Argument expected: 'done'"):this.error("getObjectInfo() - Argument expected: objectId"):this.error("getObjectInfo() - Argument expected: modelId"):this.error("getObjectInfo() - Argument expected: projectId")}loadProject(e,t,s){e?this._modelsExplorer.loadProject(e,(()=>{t&&t()}),(e=>{this.error("loadProject() - "+e),s&&s(e)})):this.error("loadProject() - Argument expected: objectId")}unloadProject(){this._modelsExplorer.unloadProject(),this.openTab("models"),this.setControlsEnabled(!1)}getLoadedProjectId(){return this._modelsExplorer.getLoadedProjectId()}getModelIds(){return this._modelsExplorer.getModelIds()}loadModel(e,t,s){e?this._modelsExplorer.loadModel(e,(()=>{t&&t()}),(e=>{this.error("loadModel() - "+e),s&&s(e)})):this.error("loadModel() - Argument expected: modelId")}loadAllModels(e=function(){}){const t=this._modelsExplorer.getModelIds(),s=(e,i)=>{if(e>=t.length)i();else{const r=t[e];this._modelsExplorer.isModelLoaded(r)?s(e+1,i):this._modelsExplorer.loadModel(r,(()=>{s(e+1,i)}),(t=>{this.error("loadAllModels() - "+t),s(e+1,i)}))}};s(0,e)}getLoadedModelIds(){return this._modelsExplorer._getLoadedModelIds()}isModelLoaded(e){if(e)return this._modelsExplorer.isModelLoaded(e);this.error("unloadModel() - Argument expected: modelId")}unloadModel(e){e?this._modelsExplorer.unloadModel(e):this.error("unloadModel() - Argument expected: modelId")}unloadAllModels(){this._modelsExplorer.unloadAllModels()}editModel(e){this.fire("editModel",{modelId:e})}deleteModel(e){this.fire("deleteModel",{modelId:e})}addModel(){this.fire("addModel",{})}setBackgroundColor(e){this.viewer.scene.canvas.backgroundColor=e}setObjectColorSource(e){switch(e){case"model":case"viewer":break;default:return e="model",void this.error("setObjectColorSource() - Unsupported value - accepted values are 'model' and 'viewer' - defaulting to 'model'")}this._objectColorSource=e}getObjectColorSource(){return this._objectColorSource||"model"}setViewerState(e,t=(()=>{})){e.tabOpen&&this.openTab(e.tabOpen),e.expandObjectsTree&&this._objectsExplorer.expandTreeViewToDepth(e.expandObjectsTree),e.expandClassesTree&&this._classesExplorer.expandTreeViewToDepth(e.expandClassesTree),e.expandStoreysTree&&this._storeysExplorer.expandTreeViewToDepth(e.expandStoreysTree),e.setCamera&&this.setCamera(e.setCamera),this._parseSelectedStorey(e,(()=>{this._parseThreeDMode(e,(()=>{t()}))}))}_parseSelectedStorey(e,t){e.selectedStorey?(this.selectStorey(e.selectedStorey),t()):t()}_parseThreeDMode(e,t){const s=!1!==e.threeDActive;this.set3DEnabled(s,t)}showObjectInExplorers(e){e?(this._objectsExplorer.showNodeInTreeView(e),this._classesExplorer.showNodeInTreeView(e),this._storeysExplorer.showNodeInTreeView(e),this.fire("openExplorer",{})):this.error("showObjectInExplorers() - Argument expected: objectId")}unShowObjectInExplorers(){this._objectsExplorer.unShowNodeInTreeView(),this._classesExplorer.unShowNodeInTreeView(),this._storeysExplorer.unShowNodeInTreeView()}showObjectProperties(e){e?(this._enablePropertiesInspector&&this._propertiesInspector.showObjectPropertySets(e),this.fire("openInspector",{})):this.error("showObjectInExplorers() - Argument expected: objectId")}setObjectsVisible(e,t){this._withObjectsInSubtree(e,(e=>{e.visible=t}))}setAllObjectsVisible(e){e?this.viewer.scene.setObjectsVisible(this.viewer.scene.objectIds,!0):this.viewer.scene.setObjectsVisible(this.viewer.scene.visibleObjectIds,!1)}setObjectsXRayed(e,t){this._withObjectsInSubtree(e,(e=>{e.xrayed=t}))}setAllObjectsXRayed(e){e?this.viewer.scene.setObjectsXRayed(this.viewer.scene.objectIds,!0):this.viewer.scene.setObjectsXRayed(this.viewer.scene.xrayedObjectIds,!1)}setObjectsSelected(e,t){this._withObjectsInSubtree(e,(e=>{e.selected=t}))}setAllObjectsSelected(e){e?this.viewer.scene.setObjectsSelected(this.viewer.scene.objectIds,!0):this.viewer.scene.setObjectsSelected(this.viewer.scene.selectedObjectIds,!1)}_withObjectsInSubtree(e,t){if(e)for(let s=0,i=e.length;s<i;s++){const i=e[s];this.viewer.metaScene.withMetaObjectsInSubtree(i,(e=>{const s=this.viewer.scene.objects[e.id];s&&t(s)}))}else this.error("Argument expected: objectIds")}flyToObject(e,t){if(!e)return void this.error("flyToObject() - Argument expected: objectId");const s=this.viewer,i=s.scene,r=[];if(this.viewer.metaScene.withMetaObjectsInSubtree(e,(e=>{i.objects[e.id]&&r.push(e.id)})),0===r.length)return this.error("Object not found in viewer: '"+e+"'"),void(t&&t());i.setObjectsVisible(r,!0),i.setObjectsHighlighted(r,!0);const o=i.getAABB(r);s.cameraFlight.flyTo({aabb:o},(()=>{t&&t(),setTimeout((function(){i.setObjectsHighlighted(i.highlightedObjectIds,!1)}),500)})),s.cameraControl.pivotPos=p.getAABB3Center(o)}viewFitObjects(e,t){if(!e)return void this.error("flyToObject() - Argument expected: objectIds");const s=this.viewer,i=s.scene,r=[];for(var o=0,n=e.length;o<n;o++){const t=e[o];this.viewer.metaScene.withMetaObjectsInSubtree(t,(e=>{i.objects[e.id]&&r.push(e.id)}))}if(0===r.length)return void(t&&t());i.setObjectsVisible(r,!0),i.setObjectsHighlighted(r,!0);const a=i.getAABB(r);s.cameraFlight.flyTo({aabb:a},(()=>{t&&t(),setTimeout((function(){i.setObjectsHighlighted(i.highlightedObjectIds,!1)}),500)})),s.cameraControl.pivotPos=p.getAABB3Center(a)}viewFitAll(e){const t=this.viewer,s=t.scene.getAABB();t.cameraFlight.flyTo({aabb:s},(()=>{e&&e()})),t.cameraControl.pivotPos=p.getAABB3Center(s)}jumpToObject(e){if(!e)return void this.error("jumpToObject() - Argument expected: objectId");const t=this.viewer,s=t.scene,i=[];if(this.viewer.metaScene.withMetaObjectsInSubtree(e,(e=>{s.objects[e.id]&&i.push(e.id)})),0===i.length)return void this.error("Object not found in viewer: '"+e+"'");s.setObjectsVisible(i,!0);const r=s.getAABB(i);t.cameraFlight.jumpTo({aabb:r}),t.cameraControl.pivotPos=p.getAABB3Center(r)}setCamera(e){const t=this.viewer.scene.camera;e.eye&&(t.eye=e.eye),e.look&&(t.look=e.look),e.up&&(t.up=e.up)}viewFitModels(e,t){if(!e)return void this.error("viewFitModels() - Argument expected: modelIds");const s=this.viewer,i=s.scene,r=p.AABB3();p.collapseAABB3(r);for(var o=0,n=e.length;o<n;o++){const t=e[o],s=i.models[t];s?(s.visible=!0,s.highlighted=!0,p.expandAABB3(r,s.aabb)):this.error("Model not found in viewer: '"+t+"'")}t?s.cameraFlight.flyTo({aabb:r},(()=>{t(),setTimeout((function(){i.setObjectsHighlighted(i.highlightedObjectIds,!1)}),500)})):(s.cameraFlight.jumpTo({aabb:r}),setTimeout((function(){i.setObjectsHighlighted(i.highlightedObjectIds,!1)}),500)),s.cameraControl.pivotPos=p.getAABB3Center(r)}openTab(e){if(!e)return void this.error("openTab() - Argument expected: tabId");let t;switch(e){case"models":t="xeokit-modelsTab";break;case"objects":t="xeokit-objectsTab";break;case"classes":t="xeokit-classesTab";break;case"storeys":t="xeokit-storeysTab";break;case"properties":t="xeokit-propertiesTab";break;default:return void this.error("openTab() - tab not recognized: '"+e+"'")}this._openTab(this._explorerElement,t)}_openTab(e,t){const s="active";let i=e.querySelectorAll(".xeokit-tab"),r=e.querySelector("."+t);for(let e=0;e<i.length;e++){let t=i[e];t.isEqualNode(r)?t.classList.add(s):t.classList.remove(s)}}getOpenTab(){function e(e,t){return!!e&&(" "+e.className+" ").indexOf(" "+t+" ")>-1}const t="active";return e(this._explorerElement.querySelector(".xeokit-modelsTab"),t)?"models":e(this._explorerElement.querySelector(".xeokit-objectsTab"),t)?"objects":e(this._explorerElement.querySelector(".xeokit-classesTab"),t)?"classes":e(this._explorerElement.querySelector(".xeokit-storeysTab"),t)?"storeys":e(this._inspectorElement.querySelector(".xeokit-propertiesTab"),t)?"properties":"none"}set3DEnabled(e,t){this._threeDMode.setActive(e,t)}get3DEnabled(){return this._threeDMode.getActive()}setSpacesShown(e){this._showSpacesMode.setActive(e)}getSpacesShown(){return this._showSpacesMode.getActive()}setOrthoEnabled(e,t){this._orthoMode.setActive(e,t)}getOrthoEnabled(){return this._orthoMode.getActive()}selectStorey(e,t){const s=this.viewer.metaScene.metaObjects[e];s?"IfcBuildingStorey"===s.type?this._storeysExplorer.selectStorey(e,t):this.error("selectStorey() - Object is not an IfcBuildingStorey: '"+e+"'"):this.error("selectStorey() - Object is not found: '"+e+"'")}saveBCFViewpoint(e){return this._bcfViewpointsPlugin.getViewpoint(e)}loadBCFViewpoint(e,t){e?(this._orthoMode.setActive("ortho"===this.viewer.camera.projection),this._bcfViewpointsPlugin.setViewpoint(e,t)):this.error("loadBCFViewpoint() - Argument expected: bcfViewpoint")}resetView(){this._resetAction.reset()}setControlsEnabled(e){this._objectsExplorer.setEnabled(e),this._classesExplorer.setEnabled(e),this._storeysExplorer.setEnabled(e),this._resetAction.setEnabled(e),this._fitAction.setEnabled(e),this._threeDMode.setEnabled(e),this._orthoMode.setEnabled(e),this._firstPersonMode.setEnabled(e),this._queryTool.setEnabled(e),this._hideTool.setEnabled(e),this._selectionTool.setEnabled(e),this._marqueeSelectionTool.setEnabled(e),this._showSpacesMode.setEnabled(e),this._sectionTool.setEnabled(e),this._enablePropertiesInspector&&this._propertiesInspector.setEnabled(e)}setKeyboardEnabled(e){this.viewer.scene.input.keyboardEnabled=e}getKeyboardEnabled(){return this.viewer.scene.input.keyboardEnabled}clearSections(){this._sectionTool.clear()}disableSections(){this._sectionTool.disableSections()}enableSections(){this._sectionTool.enableSections()}flipSections(){this._sectionTool.flipSections()}hideSectionEditControl(){this._sectionTool.hideControl()}getNumSections(){return this._sectionTool.getNumSections()}destroy(){this.viewer.destroy(),this._bcfViewpointsPlugin.destroy(),this._canvasContextMenu.destroy(),this._objectContextMenu.destroy()}},e.LocaleService=Fo,e.Server=class{constructor(e={}){this._dataDir=e.dataDir||""}getProjects(e,t){const s=this._dataDir+"/projects/index.json";y.loadJSON(s,e,t)}getProject(e,t,s){const i=this._dataDir+"/projects/"+e+"/index.json";y.loadJSON(i,t,s)}getMetadata(e,t,s,i){const r=this._dataDir+"/projects/"+e+"/models/"+t+"/metadata.json";y.loadJSON(r,s,i)}getGeometry(e,t,s,i){const r=this._dataDir+"/projects/"+e+"/models/"+t+"/geometry.xkt";y.loadArraybuffer(r,s,i)}getObjectInfo(e,t,s,i,r){const o=this._dataDir+"/projects/"+e+"/models/"+t+"/props/"+s+".json";y.loadJSON(o,i,r)}getIssues(e,t,s,i){const r=this._dataDir+"/projects/"+e+"/models/"+t+"/issues.json";y.loadJSON(r,s,i)}},Object.defineProperty(e,"__esModule",{value:!0})}));
